function mdMediaFactory(e,t,n){function r(e){var t=s[e];angular.isUndefined(t)&&(t=s[e]=i(e));var n=c[t];return angular.isUndefined(n)&&(n=o(t)),n}function i(t){return e.MEDIA[t]||("("!==t.charAt(0)?"("+t+")":t)}function o(e){var t=n.matchMedia(e);return t.addListener(a),c[t.media]=!!t.matches}function a(){var e=this;t.$evalAsync(function(){c[e.media]=!!e.matches})}var s={},c={};return r}!function(e,t,n){"use strict";function r(e,t){return t=t||Error,function(){var n,r,i=arguments[0],o="["+(e?e+":":"")+i+"] ",a=arguments[1],s=arguments;for(n=o+a.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t+2<s.length?ft(s[t+2]):e}),n=n+"\nhttp://errors.angularjs.org/1.3.13/"+(e?e+"/":"")+i,r=2;r<arguments.length;r++)n=n+(2==r?"?":"&")+"p"+(r-2)+"="+encodeURIComponent(ft(arguments[r]));return new t(n)}}function i(e){if(null==e||k(e))return!1;var t=e.length;return e.nodeType===vi&&t?!0:y(e)||ui(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function o(e,t,n){var r,a;if(e)if(M(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r,e);else if(ui(e)||i(e)){var s="object"!=typeof e;for(r=0,a=e.length;a>r;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==o)e.forEach(t,n,e);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);return e}function a(e){return Object.keys(e).sort()}function s(e,t,n){for(var r=a(e),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function c(e){return function(t,n){e(n,t)}}function l(){return++ci}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function d(e){for(var t=e.$$hashKey,n=1,r=arguments.length;r>n;n++){var i=arguments[n];if(i)for(var o=Object.keys(i),a=0,s=o.length;s>a;a++){var c=o[a];e[c]=i[c]}}return u(e,t),e}function f(e){return parseInt(e,10)}function m(e,t){return d(Object.create(e),t)}function p(){}function h(e){return e}function g(e){return function(){return e}}function v(e){return"undefined"==typeof e}function $(e){return"undefined"!=typeof e}function b(e){return null!==e&&"object"==typeof e}function y(e){return"string"==typeof e}function E(e){return"number"==typeof e}function w(e){return"[object Date]"===oi.call(e)}function M(e){return"function"==typeof e}function A(e){return"[object RegExp]"===oi.call(e)}function k(e){return e&&e.window===e}function C(e){return e&&e.$evalAsync&&e.$watch}function x(e){return"[object File]"===oi.call(e)}function T(e){return"[object FormData]"===oi.call(e)}function S(e){return"[object Blob]"===oi.call(e)}function _(e){return"boolean"==typeof e}function N(e){return e&&M(e.then)}function O(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function D(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function H(e){return Gr(e.nodeName||e[0]&&e[0].nodeName)}function R(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),t}function j(e,t,n,r){if(k(e)||C(e))throw ai("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw ai("cpi","Can't copy! Source and destination are identical.");if(n=n||[],r=r||[],b(e)){var i=n.indexOf(e);if(-1!==i)return r[i];n.push(e),r.push(t)}var a;if(ui(e)){t.length=0;for(var s=0;s<e.length;s++)a=j(e[s],null,n,r),b(e[s])&&(n.push(e[s]),r.push(a)),t.push(a)}else{var c=t.$$hashKey;ui(t)?t.length=0:o(t,function(e,n){delete t[n]});for(var l in e)e.hasOwnProperty(l)&&(a=j(e[l],null,n,r),b(e[l])&&(n.push(e[l]),r.push(a)),t[l]=a);u(t,c)}}else if(t=e,e)if(ui(e))t=j(e,[],n,r);else if(w(e))t=new Date(e.getTime());else if(A(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if(b(e)){var d=Object.create(Object.getPrototypeOf(e));t=j(e,d,n,r)}return t}function I(e,t){if(ui(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(b(e)){t=t||{};for(var i in e)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=e[i])}return t||e}function P(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,i,o,a=typeof e,s=typeof t;if(a==s&&"object"==a){if(!ui(e)){if(w(e))return w(t)?P(e.getTime(),t.getTime()):!1;if(A(e)&&A(t))return e.toString()==t.toString();if(C(e)||C(t)||k(e)||k(t)||ui(t))return!1;o={};for(i in e)if("$"!==i.charAt(0)&&!M(e[i])){if(!P(e[i],t[i]))return!1;o[i]=!0}for(i in t)if(!o.hasOwnProperty(i)&&"$"!==i.charAt(0)&&t[i]!==n&&!M(t[i]))return!1;return!0}if(!ui(t))return!1;if((r=e.length)==t.length){for(i=0;r>i;i++)if(!P(e[i],t[i]))return!1;return!0}}return!1}function V(e,t,n){return e.concat(ni.call(t,n))}function L(e,t){return ni.call(e,t||0)}function q(e,t){var n=arguments.length>2?L(arguments,2):[];return!M(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,V(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function F(e,r){var i=r;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=n:k(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":C(r)&&(i="$SCOPE"),i}function U(e,t){return"undefined"==typeof e?n:(E(t)||(t=t?2:null),JSON.stringify(e,F,t))}function B(e){return y(e)?JSON.parse(e):e}function z(e){e=Qr(e).clone();try{e.empty()}catch(t){}var n=Qr("<div>").append(e).html();try{return e[0].nodeType===$i?Gr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Gr(t)})}catch(t){return Gr(n)}}function W(e){try{return decodeURIComponent(e)}catch(t){}}function G(e){var t,n,r={};return o((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=W(t[0]),$(n))){var i=$(t[1])?W(t[1]):!0;Yr.call(r,n)?ui(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i}}),r}function Y(e){var t=[];return o(e,function(e,n){ui(e)?o(e,function(e){t.push(X(n,!0)+(e===!0?"":"="+X(e,!0)))}):t.push(X(n,!0)+(e===!0?"":"="+X(e,!0)))}),t.length?t.join("&"):""}function K(e){return X(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function X(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function Z(e,t){var n,r,i=pi.length;for(e=Qr(e),r=0;i>r;++r)if(n=pi[r]+t,y(n=e.attr(n)))return n;return null}function J(e,t){var n,r,i={};o(pi,function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,r=e.getAttribute(i))}),o(pi,function(t){var i,o=t+"app";!n&&(i=e.querySelector("["+o.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(o))}),n&&(i.strictDi=null!==Z(n,"strict-di"),t(n,r?[r]:[],i))}function Q(n,r,i){b(i)||(i={});var a={strictDi:!1};i=d(a,i);var s=function(){if(n=Qr(n),n.injector()){var e=n[0]===t?"document":z(n);throw ai("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var o=Bt(r,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),o},c=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return e&&c.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(c,"")),e&&!l.test(e.name)?s():(e.name=e.name.replace(l,""),si.resumeBootstrap=function(e){return o(e,function(e){r.push(e)}),s()},void(M(si.resumeDeferredBootstrap)&&si.resumeDeferredBootstrap()))}function et(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function tt(e){var t=si.element(e).injector();if(!t)throw ai("test","no injector found for element argument to getTestability");return t.get("$$testability")}function nt(e,t){return t=t||"_",e.replace(hi,function(e,n){return(n?t:"")+e.toLowerCase()})}function rt(){var t;gi||(ei=e.jQuery,ei&&ei.fn.on?(Qr=ei,d(ei.fn,{scope:ji.scope,isolateScope:ji.isolateScope,controller:ji.controller,injector:ji.injector,inheritedData:ji.inheritedData}),t=ei.cleanData,ei.cleanData=function(e){var n;if(li)li=!1;else for(var r,i=0;null!=(r=e[i]);i++)n=ei._data(r,"events"),n&&n.$destroy&&ei(r).triggerHandler("$destroy");t(e)}):Qr=yt,si.element=Qr,gi=!0)}function it(e,t,n){if(!e)throw ai("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ot(e,t,n){return n&&ui(e)&&(e=e[e.length-1]),it(M(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function at(e,t){if("hasOwnProperty"===e)throw ai("badname","hasOwnProperty is not a valid {0} name",t)}function st(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;a>s;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&M(e)?q(o,e):e}function ct(e){var t=e[0],n=e[e.length-1],r=[t];do{if(t=t.nextSibling,!t)break;r.push(t)}while(t!==n);return Qr(r)}function lt(){return Object.create(null)}function ut(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),i=r("ng"),o=t(e,"angular",Object);return o.$$minErr=o.$$minErr||r,t(o,"module",function(){var e={};return function(r,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(r,"module"),o&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),l}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],s=[],c=e("$injector","invoke","push",i),l={_invokeQueue:t,_configBlocks:i,_runBlocks:s,requires:o,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:c,run:function(e){return s.push(e),this}};return a&&c(a),l})}})}function dt(e){var t=[];return JSON.stringify(e,function(e,n){if(n=F(e,n),b(n)){if(t.indexOf(n)>=0)return"<<already seen>>";t.push(n)}return n})}function ft(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?dt(e):e}function mt(t){d(t,{bootstrap:Q,copy:j,extend:d,equals:P,element:Qr,forEach:o,injector:Bt,noop:p,bind:q,toJson:U,fromJson:B,identity:h,isUndefined:v,isDefined:$,isString:y,isFunction:M,isObject:b,isNumber:E,isElement:O,isArray:ui,version:wi,isDate:w,lowercase:Gr,uppercase:Kr,callbacks:{counter:0},getTestability:tt,$$minErr:r,$$csp:mi,reloadWithDebugInfo:et}),ti=ut(e);try{ti("ngLocale")}catch(n){ti("ngLocale",[]).provider("$locale",vn)}ti("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Kn}),e.provider("$compile",Zt).directive({a:So,input:Wo,textarea:Wo,form:Ho,script:Ra,select:Pa,style:La,option:Va,ngBind:Ko,ngBindHtml:Zo,ngBindTemplate:Xo,ngClass:Qo,ngClassEven:ta,ngClassOdd:ea,ngCloak:na,ngController:ra,ngForm:Ro,ngHide:Sa,ngIf:aa,ngInclude:sa,ngInit:la,ngNonBindable:Ma,ngPluralize:Aa,ngRepeat:ka,ngShow:Ta,ngStyle:_a,ngSwitch:Na,ngSwitchWhen:Oa,ngSwitchDefault:Da,ngOptions:Ia,ngTransclude:Ha,ngModel:ya,ngList:ua,ngChange:Jo,pattern:Fa,ngPattern:Fa,required:qa,ngRequired:qa,minlength:Ba,ngMinlength:Ba,maxlength:Ua,ngMaxlength:Ua,ngValue:Yo,ngModelOptions:wa}).directive({ngInclude:ca}).directive(_o).directive(ia),e.provider({$anchorScroll:zt,$animate:Wi,$browser:Yt,$cacheFactory:Kt,$controller:tn,$document:nn,$exceptionHandler:rn,$filter:sr,$interpolate:hn,$interval:gn,$http:dn,$httpBackend:mn,$location:Nn,$log:On,$parse:Un,$rootScope:Yn,$q:Bn,$$q:zn,$sce:Qn,$sceDelegate:Jn,$sniffer:er,$templateCache:Xt,$templateRequest:tr,$$testability:nr,$timeout:rr,$window:ar,$$rAF:Gn,$$asyncCallback:Wt,$$jqLite:Vt})}])}function pt(){return++Ai}function ht(e){return e.replace(xi,function(e,t,n,r){return r?n.toUpperCase():n}).replace(Ti,"Moz$1")}function gt(e){return!Oi.test(e)}function vt(e){var t=e.nodeType;return t===vi||!t||t===yi}function $t(e,t){var n,r,i,a,s=t.createDocumentFragment(),c=[];if(gt(e))c.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),r=(Di.exec(e)||["",""])[1].toLowerCase(),i=Ri[r]||Ri._default,n.innerHTML=i[1]+e.replace(Hi,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;c=V(c,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",o(c,function(e){s.appendChild(e)}),s}function bt(e,n){n=n||t;var r;return(r=Ni.exec(e))?[n.createElement(r[1])]:(r=$t(e,n))?r.childNodes:[]}function yt(e){if(e instanceof yt)return e;var t;if(y(e)&&(e=di(e),t=!0),!(this instanceof yt)){if(t&&"<"!=e.charAt(0))throw _i("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new yt(e)}t?_t(this,bt(e)):_t(this,e)}function Et(e){return e.cloneNode(!0)}function wt(e,t){if(t||At(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;i>r;r++)At(n[r])}function Mt(e,t,n,r){if($(r))throw _i("offargs","jqLite#off() does not support the `selector` argument");var i=kt(e),a=i&&i.events,s=i&&i.handle;if(s)if(t)o(t.split(" "),function(t){if($(n)){var r=a[t];if(R(r||[],n),r&&r.length>0)return}Ci(e,t,s),delete a[t]});else for(t in a)"$destroy"!==t&&Ci(e,t,s),delete a[t]}function At(e,t){var r=e.ng339,i=r&&Mi[r];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),Mt(e)),delete Mi[r],e.ng339=n}}function kt(e,t){var r=e.ng339,i=r&&Mi[r];return t&&!i&&(e.ng339=r=pt(),i=Mi[r]={events:{},data:{},handle:n}),i}function Ct(e,t,n){if(vt(e)){var r=$(n),i=!r&&t&&!b(t),o=!t,a=kt(e,!i),s=a&&a.data;if(r)s[t]=n;else{if(o)return s;if(i)return s&&s[t];d(s,t)}}}function xt(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Tt(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",di((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+di(t)+" "," ")))})}function St(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=di(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",di(n))}}function _t(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;n>r;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Nt(e,t){return Ot(e,"$"+(t||"ngController")+"Controller")}function Ot(e,t,r){e.nodeType==yi&&(e=e.documentElement);for(var i=ui(t)?t:[t];e;){for(var o=0,a=i.length;a>o;o++)if((r=Qr.data(e,i[o]))!==n)return r;e=e.parentNode||e.nodeType===Ei&&e.host}}function Dt(e){for(wt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ht(e,t){t||wt(e);var n=e.parentNode;n&&n.removeChild(e)}function Rt(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Qr(n).on("load",t)}function jt(e,t){var n=Ii[t.toLowerCase()];return n&&Pi[H(e)]&&n}function It(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&Vi[t]}function Pt(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],o=i?i.length:0;if(o){if(v(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},o>1&&(i=I(i));for(var s=0;o>s;s++)n.isImmediatePropagationStopped()||i[s].call(e,n)}};return n.elem=e,n}function Vt(){this.$get=function(){return d(yt,{hasClass:function(e,t){return e.attr&&(e=e[0]),xt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),St(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Tt(e,t)}})}}function Lt(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"==r||"object"==r&&null!==e?e.$$hashKey=r+":"+(t||l)():r+":"+e}function qt(e,t){if(t){var n=0;this.nextUid=function(){return++n}}o(e,this.put,this)}function Ft(e){var t=e.toString().replace(Ui,""),n=t.match(Li);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Ut(e,t,n){var r,i,a,s;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw y(n)&&n||(n=e.name||Ft(e)),Bi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=e.toString().replace(Ui,""),a=i.match(Li),o(a[1].split(qi),function(e){e.replace(Fi,function(e,t,n){r.push(n)})})}e.$inject=r}}else ui(e)?(s=e.length-1,ot(e[s],"fn"),r=e.slice(0,s)):ot(e,"fn",!0);return r}function Bt(e,t){function r(e){return function(t,n){return b(t)?void o(t,c(e)):e(t,n)}}function i(e,t){if(at(e,"service"),(M(t)||ui(t))&&(t=C.instantiate(t)),!t.$get)throw Bi("pget","Provider '{0}' must define $get factory method.",e);return k[e+E]=t}function a(e,t){return function(){var n=T.invoke(t,this);if(v(n))throw Bi("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return i(e,{$get:n!==!1?a(e,t):t})}function l(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return s(e,g(t),!1)}function d(e,t){at(e,"constant"),k[e]=t,x[e]=t}function f(e,t){var n=C.get(e+E),r=n.$get;n.$get=function(){var e=T.invoke(r,n);return T.invoke(t,null,{$delegate:e})}}function m(e){var t,n=[];return o(e,function(e){function r(e){var t,n;for(t=0,n=e.length;n>t;t++){var r=e[t],i=C.get(r[0]);i[r[1]].apply(i,r[2])}}if(!A.get(e)){A.put(e,!0);try{y(e)?(t=ti(e),n=n.concat(m(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):M(e)?n.push(C.invoke(e)):ui(e)?n.push(C.invoke(e)):ot(e,"module")}catch(i){throw ui(e)&&(e=e[e.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Bi("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function h(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===$)throw Bi("cdep","Circular dependency found: {0}",t+" <- "+w.join(" <- "));return e[t]}try{return w.unshift(t),e[t]=$,e[t]=n(t,r)}catch(i){throw e[t]===$&&delete e[t],i}finally{w.shift()}}function i(e,n,i,o){"string"==typeof i&&(o=i,i=null);var a,s,c,l=[],u=Bt.$$annotate(e,t,o);for(s=0,a=u.length;a>s;s++){if(c=u[s],"string"!=typeof c)throw Bi("itkn","Incorrect injection token! Expected service name as string, got {0}",c);l.push(i&&i.hasOwnProperty(c)?i[c]:r(c,o))}return ui(e)&&(e=e[a]),e.apply(n,l)}function o(e,t,n){var r=Object.create((ui(e)?e[e.length-1]:e).prototype||null),o=i(e,r,t,n);return b(o)||M(o)?o:r}return{invoke:i,instantiate:o,get:r,annotate:Bt.$$annotate,has:function(t){return k.hasOwnProperty(t+E)||e.hasOwnProperty(t)}}}t=t===!0;var $={},E="Provider",w=[],A=new qt([],!0),k={$provide:{provider:r(i),factory:r(s),service:r(l),value:r(u),constant:r(d),decorator:f}},C=k.$injector=h(k,function(e,t){throw si.isString(t)&&w.push(t),Bi("unpr","Unknown provider: {0}",w.join(" <- "))}),x={},T=x.$injector=h(x,function(e,t){var r=C.get(e+E,t);return T.invoke(r.$get,r,n,e)});return o(m(e),function(e){T.invoke(e||p)}),T}function zt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===H(e)?(t=e,!0):void 0}),t}function o(){var e=s.yOffset;if(M(e))e=e();else if(O(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else E(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(){var e,t=n.hash();t?(e=c.getElementById(t))?a(e):(e=i(c.getElementsByName(t)))?a(e):"top"===t&&a(null):a(null)}var c=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&Rt(function(){r.$evalAsync(s)})}),s}]}function Wt(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Gt(e,t,r,i){function a(e){try{e.apply(null,L(arguments,1))}finally{if(M--,0===M)for(;A.length;)try{A.pop()()}catch(t){r.error(t)}}}function s(e){var t=e.indexOf("#");return-1===t?"":e.substr(t+1)}function c(e,t){!function n(){o(C,function(e){e()}),k=t(n,e)}()}function l(){u(),d()}function u(){x=e.history.state,x=v(x)?null:x,P(x,H)&&(x=H),H=x}function d(){(S!==m.url()||T!==x)&&(S=m.url(),T=x,o(O,function(e){e(m.url(),x)}))}function f(e){try{return decodeURIComponent(e)}catch(t){return e}}var m=this,h=t[0],g=e.location,$=e.history,b=e.setTimeout,E=e.clearTimeout,w={};m.isMock=!1;var M=0,A=[];m.$$completeOutstandingRequest=a,m.$$incOutstandingRequestCount=function(){M++},m.notifyWhenNoOutstandingRequests=function(e){o(C,function(e){e()}),0===M?e():A.push(e)};var k,C=[];m.addPollFn=function(e){return v(k)&&c(100,b),C.push(e),e};var x,T,S=g.href,_=t.find("base"),N=null;u(),T=x,m.url=function(t,n,r){if(v(r)&&(r=null),g!==e.location&&(g=e.location),$!==e.history&&($=e.history),t){var o=T===r;if(S===t&&(!i.history||o))return m;var a=S&&wn(S)===wn(t);return S=t,T=r,!i.history||a&&o?(a||(N=t),n?g.replace(t):a?g.hash=s(t):g.href=t):($[n?"replaceState":"pushState"](r,"",t),u(),T=x),m}return N||g.href.replace(/%27/g,"'")},m.state=function(){return x};var O=[],D=!1,H=null;m.onUrlChange=function(t){return D||(i.history&&Qr(e).on("popstate",l),Qr(e).on("hashchange",l),D=!0),O.push(t),t},m.$$checkUrlChange=d,m.baseHref=function(){var e=_.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var R={},j="",I=m.baseHref();m.cookies=function(e,t){var i,o,a,s,c;if(!e){if(h.cookie!==j)for(j=h.cookie,o=j.split("; "),R={},s=0;s<o.length;s++)a=o[s],c=a.indexOf("="),c>0&&(e=f(a.substring(0,c)),R[e]===n&&(R[e]=f(a.substring(c+1))));return R}t===n?h.cookie=encodeURIComponent(e)+"=;path="+I+";expires=Thu, 01 Jan 1970 00:00:00 GMT":y(t)&&(i=(h.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+I).length+1,i>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!"))},m.defer=function(e,t){var n;return M++,n=b(function(){delete w[n],a(e)},t||0),w[n]=!0,n},m.defer.cancel=function(e){return w[e]?(delete w[e],E(e),a(p),!0):!1}}function Yt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new Gt(e,r,t,n)}]}function Kt(){this.$get=function(){function e(e,n){function i(e){e!=f&&(m?m==e&&(m=e.n):m=e,o(e.n,e.p),o(e,f),f=e,f.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=d({},n,{id:e}),c={},l=n&&n.capacity||Number.MAX_VALUE,u={},f=null,m=null;return t[e]={put:function(e,t){if(l<Number.MAX_VALUE){var n=u[e]||(u[e]={key:e});i(n)}if(!v(t))return e in c||a++,c[e]=t,a>l&&this.remove(m.key),t},get:function(e){if(l<Number.MAX_VALUE){var t=u[e];if(!t)return;i(t)}return c[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=u[e];if(!t)return;t==f&&(f=t.p),t==m&&(m=t.n),o(t.n,t.p),delete u[e]}delete c[e],a--},removeAll:function(){c={},a=0,u={},f=m=null},destroy:function(){c=null,s=null,u=null,delete t[e]},info:function(){return d({},s,{size:a})}}}var t={};return e.info=function(){var e={};return o(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Xt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Zt(e,r){function i(e,t){var n=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,r={};return o(e,function(e,i){var o=e.match(n);if(!o)throw Gi("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,i,e);r[i]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||i}}),r}var a={},s="Directive",l=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,u=/(([\w\-]+)(?:\:([^;]+))?;?)/,f=D("ngSrc,ngSrcset,src,srcset"),v=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,E=/^(on[a-z]+|formaction)$/;this.directive=function A(t,n){return at(t,"directive"),y(t)?(it(n,"directiveFactory"),a.hasOwnProperty(t)||(a[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var r=[];return o(a[t],function(o,a){try{var s=e.invoke(o);M(s)?s={compile:g(s)}:!s.compile&&s.link&&(s.compile=g(s.link)),s.priority=s.priority||0,s.index=a,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",b(s.scope)&&(s.$$isolateBindings=i(s.scope,s.name)),r.push(s)}catch(c){n(c)}}),r}])),a[t].push(n)):o(t,c(A)),this},this.aHrefSanitizationWhitelist=function(e){return $(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var w=!0;this.debugInfoEnabled=function(e){return $(e)?(w=e,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,i,c,g,$,A,k,x,T,S){function _(e,t){try{e.addClass(t)}catch(n){}}function N(e,t,n,r,i){e instanceof Qr||(e=Qr(e)),o(e,function(t,n){t.nodeType==$i&&t.nodeValue.match(/\S+/)&&(e[n]=Qr(t).wrap("<span></span>").parent()[0])});var a=D(e,t,e,n,r,i);N.$$addScopeClass(e);var s=null;return function(t,n,r){it(t,"scope"),r=r||{};var i=r.parentBoundTranscludeFn,o=r.transcludeControllers,c=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),s||(s=O(c));var l;if(l="html"!==s?Qr(J(s,Qr("<div>").append(e).html())):n?ji.clone.call(e):e,o)for(var u in o)l.data("$"+u+"Controller",o[u].instance);return N.$$addScopeInfo(l,t),n&&n(l,t),a&&a(t,l,l,i),l}}function O(e){var t=e&&e[0];return t&&"foreignobject"!==H(t)&&t.toString().match(/SVG/)?"svg":"html"}function D(e,t,r,i,o,a){function s(e,r,i,o){var a,s,c,l,u,d,f,m,g;if(p){var v=r.length;for(g=new Array(v),u=0;u<h.length;u+=3)f=h[u],g[f]=r[f]}else g=r;for(u=0,d=h.length;d>u;)c=g[h[u++]],a=h[u++],s=h[u++],a?(a.scope?(l=e.$new(),N.$$addScopeInfo(Qr(c),l)):l=e,m=a.transcludeOnThisElement?j(e,a.transclude,o,a.elementTranscludeOnThisElement):!a.templateOnThisElement&&o?o:!o&&t?j(e,t):null,a(s,l,c,i,m)):s&&s(e,c.childNodes,n,o)}for(var c,l,u,d,f,m,p,h=[],g=0;g<e.length;g++)c=new at,l=I(e[g],[],c,0===g?i:n,o),u=l.length?F(l,e[g],c,t,r,null,[],[],a):null,u&&u.scope&&N.$$addScopeClass(c.$$element),f=u&&u.terminal||!(d=e[g].childNodes)||!d.length?null:D(d,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||f)&&(h.push(g,u,f),m=!0,p=p||u),a=null;return m?s:null}function j(e,t,n){var r=function(r,i,o,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})};return r}function I(e,t,n,r,i){var o,a,s=e.nodeType,c=n.$attr;switch(s){case vi:B(t,Jt(H(e)),"E",r,i);for(var d,f,m,p,h,g,v=e.attributes,$=0,E=v&&v.length;E>$;$++){var w=!1,M=!1;d=v[$],f=d.name,h=di(d.value),p=Jt(f),(g=dt.test(p))&&(f=f.replace(Yi,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var A=p.replace(/(Start|End)$/,"");W(A)&&p===A+"Start"&&(w=f,M=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),m=Jt(f.toLowerCase()),c[m]=f,(g||!n.hasOwnProperty(m))&&(n[m]=h,jt(e,m)&&(n[m]=!0)),et(e,t,h,m,g),B(t,m,"A",r,i,w,M)}if(a=e.className,b(a)&&(a=a.animVal),y(a)&&""!==a)for(;o=u.exec(a);)m=Jt(o[2]),B(t,m,"C",r,i)&&(n[m]=di(o[3])),a=a.substr(o.index+o[0].length);break;case $i:Z(t,e.nodeValue);break;case bi:try{o=l.exec(e.nodeValue),o&&(m=Jt(o[1]),B(t,m,"M",r,i)&&(n[m]=di(o[2])))}catch(k){}}return t.sort(K),t}function V(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Gi("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==vi&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return Qr(r)}function q(e,t,n){return function(r,i,o,a,s){return i=V(i[0],t,n),e(r,i,o,a,s)}}function F(e,a,s,c,l,u,d,f,m){function p(e,t,n,r){e&&(n&&(e=q(e,n,r)),e.require=k.require,e.directiveName=x,(H===k||k.$$isolateScope)&&(e=rt(e,{isolateScope:!0})),d.push(e)),t&&(n&&(t=q(t,n,r)),t.require=k.require,t.directiveName=x,(H===k||k.$$isolateScope)&&(t=rt(t,{isolateScope:!0})),f.push(t))}function h(e,t,n,r){var i,a,s="data",c=!1,l=n;if(y(t)){if(a=t.match(v),t=t.substring(a[0].length),a[3]&&(a[1]?a[3]=null:a[1]=a[3]),"^"===a[1]?s="inheritedData":"^^"===a[1]&&(s="inheritedData",l=n.parent()),"?"===a[2]&&(c=!0),i=null,r&&"data"===s&&(i=r[t])&&(i=i.instance),i=i||l[s]("$"+t+"Controller"),!i&&!c)throw Gi("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i||null}return ui(t)&&(i=[],o(t,function(t){i.push(h(e,t,n,r))})),i}function E(e,t,i,c,l){function u(e,t,r){var i;return C(e)||(r=t,t=e,e=n),W&&(i=E),r||(r=W?M.parent():M),l(e,t,i,r,S)}var m,p,v,b,y,E,w,M,k;if(a===i?(k=s,M=s.$$element):(M=Qr(i),k=new at(M,s)),H&&(y=t.$new(!0)),l&&(w=u,w.$$boundTransclude=l),D&&(A={},E={},o(D,function(e){var n,r={$scope:e===H||e.$$isolateScope?y:t,$element:M,$attrs:k,$transclude:w};b=e.controller,"@"==b&&(b=k[e.name]),n=$(b,r,!0,e.controllerAs),E[e.name]=n,W||M.data("$"+e.name+"Controller",n.instance),A[e.name]=n})),H){N.$$addScopeInfo(M,y,!0,!(R&&(R===H||R===H.$$originalDirective))),N.$$addScopeClass(M,!0);var x=A&&A[H.name],T=y;x&&x.identifier&&H.bindToController===!0&&(T=x.instance),o(y.$$isolateBindings=H.$$isolateBindings,function(e,n){var i,o,a,s,c=e.attrName,l=e.optional,u=e.mode;switch(u){case"@":k.$observe(c,function(e){T[n]=e}),k.$$observers[c].$$scope=t,k[c]&&(T[n]=r(k[c])(t));break;case"=":if(l&&!k[c])return;o=g(k[c]),s=o.literal?P:function(e,t){return e===t||e!==e&&t!==t},a=o.assign||function(){throw i=T[n]=o(t),Gi("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",k[c],H.name)},i=T[n]=o(t);var d=function(e){return s(e,T[n])||(s(e,i)?a(t,e=T[n]):T[n]=e),i=e};d.$stateful=!0;var f;f=e.collection?t.$watchCollection(k[c],d):t.$watch(g(k[c],d),null,o.literal),y.$on("$destroy",f);break;case"&":o=g(k[c]),T[n]=function(e){return o(t,e)}}})}for(A&&(o(A,function(e){e()}),A=null),m=0,p=d.length;p>m;m++)v=d[m],ot(v,v.isolateScope?y:t,M,k,v.require&&h(v.directiveName,v.require,M,E),w);var S=t;for(H&&(H.template||null===H.templateUrl)&&(S=y),e&&e(S,i.childNodes,n,l),m=f.length-1;m>=0;m--)v=f[m],ot(v,v.isolateScope?y:t,M,k,v.require&&h(v.directiveName,v.require,M,E),w)}m=m||{};for(var w,A,k,x,T,S,_,O=-Number.MAX_VALUE,D=m.controllerDirectives,H=m.newIsolateScopeDirective,R=m.templateDirective,j=m.nonTlbTranscludeDirective,F=!1,B=!1,W=m.hasElementTranscludeDirective,K=s.$$element=Qr(a),Z=u,Q=c,et=0,nt=e.length;nt>et;et++){k=e[et];var it=k.$$start,st=k.$$end;if(it&&(K=V(a,it,st)),T=n,O>k.priority)break;if((_=k.scope)&&(k.templateUrl||(b(_)?(X("new/isolated scope",H||w,k,K),H=k):X("new/isolated scope",H,k,K)),w=w||k),x=k.name,!k.templateUrl&&k.controller&&(_=k.controller,D=D||{},X("'"+x+"' controller",D[x],k,K),D[x]=k),(_=k.transclude)&&(F=!0,k.$$tlb||(X("transclusion",j,k,K),j=k),"element"==_?(W=!0,O=k.priority,T=K,K=s.$$element=Qr(t.createComment(" "+x+": "+s[x]+" ")),a=K[0],tt(l,L(T),a),Q=N(T,c,O,Z&&Z.name,{nonTlbTranscludeDirective:j})):(T=Qr(Et(a)).contents(),K.empty(),Q=N(T,c))),k.template)if(B=!0,X("template",R,k,K),R=k,_=M(k.template)?k.template(K,s):k.template,_=ut(_),k.replace){if(Z=k,T=gt(_)?[]:en(J(k.templateNamespace,di(_))),a=T[0],1!=T.length||a.nodeType!==vi)throw Gi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",x,"");tt(l,K,a);var ct={$attr:{}},lt=I(a,[],ct),dt=e.splice(et+1,e.length-(et+1));H&&U(lt),e=e.concat(lt).concat(dt),G(s,ct),nt=e.length}else K.html(_);if(k.templateUrl)B=!0,X("template",R,k,K),R=k,k.replace&&(Z=k),E=Y(e.splice(et,e.length-et),K,s,l,F&&Q,d,f,{controllerDirectives:D,newIsolateScopeDirective:H,templateDirective:R,nonTlbTranscludeDirective:j}),nt=e.length;else if(k.compile)try{S=k.compile(K,s,Q),M(S)?p(null,S,it,st):S&&p(S.pre,S.post,it,st)}catch(ft){i(ft,z(K))}k.terminal&&(E.terminal=!0,O=Math.max(O,k.priority))}return E.scope=w&&w.scope===!0,E.transcludeOnThisElement=F,E.elementTranscludeOnThisElement=W,E.templateOnThisElement=B,E.transclude=Q,m.hasElementTranscludeDirective=W,E
}function U(e){for(var t=0,n=e.length;n>t;t++)e[t]=m(e[t],{$$isolateScope:!0})}function B(t,r,o,c,l,u,d){if(r===l)return null;var f=null;if(a.hasOwnProperty(r))for(var p,h=e.get(r+s),g=0,v=h.length;v>g;g++)try{p=h[g],(c===n||c>p.priority)&&-1!=p.restrict.indexOf(o)&&(u&&(p=m(p,{$$start:u,$$end:d})),t.push(p),f=p)}catch($){i($)}return f}function W(t){if(a.hasOwnProperty(t))for(var n,r=e.get(t+s),i=0,o=r.length;o>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function G(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;o(e,function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),o(t,function(t,o){"class"==o?(_(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==o?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,r[o]=n[o])})}function Y(e,t,n,r,i,a,s,l){var u,d,f=[],p=t[0],h=e.shift(),g=m(h,{templateUrl:null,transclude:null,replace:null,$$originalDirective:h}),v=M(h.templateUrl)?h.templateUrl(t,n):h.templateUrl,$=h.templateNamespace;return t.empty(),c(x.getTrustedResourceUrl(v)).then(function(c){var m,y,E,w;if(c=ut(c),h.replace){if(E=gt(c)?[]:en(J($,di(c))),m=E[0],1!=E.length||m.nodeType!==vi)throw Gi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h.name,v);y={$attr:{}},tt(r,t,m);var M=I(m,[],y);b(h.scope)&&U(M),e=M.concat(e),G(n,y)}else m=p,t.html(c);for(e.unshift(g),u=F(e,m,n,i,t,h,a,s,l),o(r,function(e,n){e==m&&(r[n]=t[0])}),d=D(t[0].childNodes,i);f.length;){var A=f.shift(),k=f.shift(),C=f.shift(),x=f.shift(),T=t[0];if(!A.$$destroyed){if(k!==p){var S=k.className;l.hasElementTranscludeDirective&&h.replace||(T=Et(m)),tt(C,Qr(k),T),_(Qr(T),S)}w=u.transcludeOnThisElement?j(A,u.transclude,x):x,u(d,A,T,r,w)}}f=null}),function(e,t,n,r,i){var o=i;t.$$destroyed||(f?f.push(t,n,r,o):(u.transcludeOnThisElement&&(o=j(t,u.transclude,i)),u(d,t,n,r,o)))}}function K(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function X(e,t,n,r){if(t)throw Gi("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,z(r))}function Z(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=!!t.length;return r&&N.$$addBindingClass(t),function(e,t){var i=t.parent();r||N.$$addBindingClass(i),N.$$addBindingInfo(i,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function J(e,n){switch(e=Gr(e||"html")){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function Q(e,t){if("srcdoc"==t)return x.HTML;var n=H(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?x.RESOURCE_URL:void 0}function et(e,t,n,i,o){var a=Q(e,i);o=f[i]||o;var s=r(n,!0,a,o);if(s){if("multiple"===i&&"select"===H(e))throw Gi("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",z(e));t.push({priority:100,compile:function(){return{pre:function(e,t,c){var l=c.$$observers||(c.$$observers={});if(E.test(i))throw Gi("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var u=c[i];u!==n&&(s=u&&r(u,!0,a,o),n=u),s&&(c[i]=s(e),(l[i]||(l[i]=[])).$$inter=!0,(c.$$observers&&c.$$observers[i].$$scope||e).$watch(s,function(e,t){"class"===i&&e!=t?c.$updateClass(e,t):c.$set(i,e)}))}}}})}}function tt(e,n,r){var i,o,a=n[0],s=n.length,c=a.parentNode;if(e)for(i=0,o=e.length;o>i;i++)if(e[i]==a){e[i++]=r;for(var l=i,u=l+s-1,d=e.length;d>l;l++,u++)d>u?e[l]=e[u]:delete e[l];e.length-=s-1,e.context===a&&(e.context=r);break}c&&c.replaceChild(r,a);var f=t.createDocumentFragment();f.appendChild(a),Qr(r).data(Qr(a).data()),ei?(li=!0,ei.cleanData([a])):delete Qr.cache[a[Qr.expando]];for(var m=1,p=n.length;p>m;m++){var h=n[m];Qr(h).remove(),f.appendChild(h),delete n[m]}n[0]=r,n.length=1}function rt(e,t){return d(function(){return e.apply(null,arguments)},e,t)}function ot(e,t,n,r,o,a){try{e(t,n,r,o,a)}catch(s){i(s,z(n))}}var at=function(e,t){if(t){var n,r,i,o=Object.keys(t);for(n=0,r=o.length;r>n;n++)i=o[n],this[i]=t[i]}else this.$attr={};this.$$element=e};at.prototype={$normalize:Jt,$addClass:function(e){e&&e.length>0&&T.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&T.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Qt(e,t);n&&n.length&&T.addClass(this.$$element,n);var r=Qt(t,e);r&&r.length&&T.removeClass(this.$$element,r)},$set:function(e,t,r,a){var s,c=this.$$element[0],l=jt(c,e),u=It(c,e),d=e;if(l?(this.$$element.prop(e,t),a=l):u&&(this[u]=t,d=u),this[e]=t,a?this.$attr[e]=a:(a=this.$attr[e],a||(this.$attr[e]=a=nt(e,"-"))),s=H(this.$$element),"a"===s&&"href"===e||"img"===s&&"src"===e)this[e]=t=S(t,"src"===e);else if("img"===s&&"srcset"===e){for(var f="",m=di(t),p=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,h=/\s/.test(m)?p:/(,)/,g=m.split(h),v=Math.floor(g.length/2),$=0;v>$;$++){var b=2*$;f+=S(di(g[b]),!0),f+=" "+di(g[b+1])}var y=di(g[2*$]).split(/\s/);f+=S(di(y[0]),!0),2===y.length&&(f+=" "+di(y[1])),this[e]=t=f}r!==!1&&(null===t||t===n?this.$$element.removeAttr(a):this.$$element.attr(a,t));var E=this.$$observers;E&&o(E[d],function(e){try{e(t)}catch(n){i(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=lt()),i=r[e]||(r[e]=[]);return i.push(t),A.$evalAsync(function(){!i.$$inter&&n.hasOwnProperty(e)&&t(n[e])}),function(){R(i,t)}}};var st=r.startSymbol(),ct=r.endSymbol(),ut="{{"==st||"}}"==ct?h:function(e){return e.replace(/\{\{/g,st).replace(/}}/g,ct)},dt=/^ngAttr[A-Z]/;return N.$$addBindingInfo=w?function(e,t){var n=e.data("$binding")||[];ui(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:p,N.$$addBindingClass=w?function(e){_(e,"ng-binding")}:p,N.$$addScopeInfo=w?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:p,N.$$addScopeClass=w?function(e,t){_(e,t?"ng-isolate-scope":"ng-scope")}:p,N}]}function Jt(e){return ht(e.replace(Yi,""))}function Qt(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function en(e){e=Qr(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===bi&&ri.call(e,t,1)}return e}function tn(){var e={},t=!1,i=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){at(t,"controller"),b(t)?d(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(o,a){function s(e,t,n,i){if(!e||!b(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}return function(r,c,l,u){var f,m,p,h;if(l=l===!0,u&&y(u)&&(h=u),y(r)){if(m=r.match(i),!m)throw Ki("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);p=m[1],h=h||m[3],r=e.hasOwnProperty(p)?e[p]:st(c.$scope,p,!0)||(t?st(a,p,!0):n),ot(r,p,!0)}if(l){var g=(ui(r)?r[r.length-1]:r).prototype;return f=Object.create(g||null),h&&s(c,h,f,p||r.name),d(function(){return o.invoke(r,f,c,p),f},{instance:f,identifier:h})}return f=o.instantiate(r,c,p),h&&s(c,h,f,p||r.name),f}}]}function nn(){this.$get=["$window",function(e){return Qr(e.document)}]}function rn(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function on(e,t){if(y(e)){var n=e.replace(eo,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(Xi)||an(n))&&(e=B(n))}}return e}function an(e){var t=e.match(Ji);return t&&Qi[t[0]].test(e)}function sn(e){var t,n,r,i=lt();return e?(o(e.split("\n"),function(e){r=e.indexOf(":"),t=Gr(di(e.substr(0,r))),n=di(e.substr(r+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}function cn(e){var t=b(e)?e:n;return function(n){if(t||(t=sn(e)),n){var r=t[Gr(n)];return void 0===r&&(r=null),r}return t}}function ln(e,t,n,r){return M(r)?r(e,t,n):(o(r,function(r){e=r(e,t,n)}),e)}function un(e){return e>=200&&300>e}function dn(){var e=this.defaults={transformResponse:[on],transformRequest:[function(e){return!b(e)||x(e)||S(e)||T(e)?e:U(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:I(Zi),put:I(Zi),patch:I(Zi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},t=!1;this.useApplyAsync=function(e){return $(e)?(t=!!e,this):t};var i=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,c,l,u,f,m){function p(t){function i(e){var t=d({},e);return t.data=e.data?ln(e.data,e.headers,e.status,c.transformResponse):e.data,un(e.status)?t:f.reject(t)}function a(e){var t,n={};return o(e,function(e,r){M(e)?(t=e(),null!=t&&(n[r]=t)):n[r]=e}),n}function s(t){var n,r,i,o=e.headers,s=d({},t.headers);o=d({},o.common,o[Gr(t.method)]);e:for(n in o){r=Gr(n);for(i in s)if(Gr(i)===r)continue e;s[n]=o[n]}return a(s)}if(!si.isObject(t))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var c=d({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},t);c.headers=s(t),c.method=Kr(c.method);var l=function(t){var r=t.headers,a=ln(t.data,cn(r),n,t.transformRequest);return v(a)&&o(r,function(e,t){"content-type"===Gr(t)&&delete r[t]}),v(t.withCredentials)&&!v(e.withCredentials)&&(t.withCredentials=e.withCredentials),E(t,a).then(i,i)},u=[l,n],m=f.when(c);for(o(C,function(e){(e.request||e.requestError)&&u.unshift(e.request,e.requestError),(e.response||e.responseError)&&u.push(e.response,e.responseError)});u.length;){var p=u.shift(),h=u.shift();m=m.then(p,h)}return m.success=function(e){return m.then(function(t){e(t.data,t.status,t.headers,c)}),m},m.error=function(e){return m.then(null,function(t){e(t.data,t.status,t.headers,c)}),m},m}function h(){o(arguments,function(e){p[e]=function(t,n){return p(d(n||{},{method:e,url:t}))}})}function g(){o(arguments,function(e){p[e]=function(t,n,r){return p(d(r||{},{method:e,url:t,data:n}))}})}function E(r,i){function o(e,n,r,i){function o(){s(n,e,r,i)}m&&(un(e)?m.put(w,[e,n,sn(r),i]):m.remove(w)),t?u.$applyAsync(o):(o(),u.$$phase||u.$apply())}function s(e,t,n,i){t=Math.max(t,0),(un(t)?g.resolve:g.reject)({data:e,status:t,headers:cn(n),config:r,statusText:i})}function l(e){s(e.data,e.status,I(e.headers()),e.statusText)}function d(){var e=p.pendingRequests.indexOf(r);-1!==e&&p.pendingRequests.splice(e,1)}var m,h,g=f.defer(),y=g.promise,E=r.headers,w=A(r.url,r.params);if(p.pendingRequests.push(r),y.then(d,d),!r.cache&&!e.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(m=b(r.cache)?r.cache:b(e.cache)?e.cache:k),m&&(h=m.get(w),$(h)?N(h)?h.then(l,l):ui(h)?s(h[1],h[0],I(h[2]),h[3]):s(h,200,{},"OK"):m.put(w,y)),v(h)){var M=or(r.url)?c.cookies()[r.xsrfCookieName||e.xsrfCookieName]:n;M&&(E[r.xsrfHeaderName||e.xsrfHeaderName]=M),a(r.method,w,i,o,E,r.timeout,r.withCredentials,r.responseType)}return y}function A(e,t){if(!t)return e;var n=[];return s(t,function(e,t){null===e||v(e)||(ui(e)||(e=[e]),o(e,function(e){b(e)&&(e=w(e)?e.toISOString():U(e)),n.push(X(t)+"="+X(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var k=l("$http"),C=[];return o(i,function(e){C.unshift(y(e)?m.get(e):m.invoke(e))}),p.pendingRequests=[],h("get","delete","head","jsonp"),g("post","put","patch"),p.defaults=e,p}]}function fn(){return new e.XMLHttpRequest}function mn(){this.$get=["$browser","$window","$document",function(e,t,n){return pn(e,fn,e.defer,t.angular.callbacks,n[0])}]}function pn(e,t,r,i,a){function s(e,t,n){var r=a.createElement("script"),o=null;return r.type="text/javascript",r.src=e,r.async=!0,o=function(e){Ci(r,"load",o),Ci(r,"error",o),a.body.removeChild(r),r=null;var s=-1,c="unknown";e&&("load"!==e.type||i[t].called||(e={type:"error"}),c=e.type,s="error"===e.type?404:200),n&&n(s,c)},ki(r,"load",o),ki(r,"error",o),a.body.appendChild(r),o}return function(a,c,l,u,d,f,m,h){function g(){y&&y(),E&&E.abort()}function v(t,i,o,a,s){A!==n&&r.cancel(A),y=E=null,t(i,o,a,s),e.$$completeOutstandingRequest(p)}if(e.$$incOutstandingRequestCount(),c=c||e.url(),"jsonp"==Gr(a)){var b="_"+(i.counter++).toString(36);i[b]=function(e){i[b].data=e,i[b].called=!0};var y=s(c.replace("JSON_CALLBACK","angular.callbacks."+b),b,function(e,t){v(u,e,i[b].data,"",t),i[b]=p})}else{var E=t();E.open(a,c,!0),o(d,function(e,t){$(e)&&E.setRequestHeader(t,e)}),E.onload=function(){var e=E.statusText||"",t="response"in E?E.response:E.responseText,n=1223===E.status?204:E.status;0===n&&(n=t?200:"file"==ir(c).protocol?404:0),v(u,n,t,E.getAllResponseHeaders(),e)};var w=function(){v(u,-1,null,null,"")};if(E.onerror=w,E.onabort=w,m&&(E.withCredentials=!0),h)try{E.responseType=h}catch(M){if("json"!==h)throw M}E.send(l||null)}if(f>0)var A=r(g,f);else N(f)&&f.then(g)}}function hn(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(e){return"\\\\\\"+e}function a(o,a,f,m){function p(n){return n.replace(l,e).replace(u,t)}function h(e){try{return e=S(e),m&&!$(e)?e:_(e)}catch(t){var n=to("interr","Can't interpolate: {0}\n{1}",o,t.toString());r(n)}}m=!!m;for(var g,b,y,E=0,w=[],A=[],k=o.length,C=[],x=[];k>E;){if(-1==(g=o.indexOf(e,E))||-1==(b=o.indexOf(t,g+s))){E!==k&&C.push(p(o.substring(E)));break}E!==g&&C.push(p(o.substring(E,g))),y=o.substring(g+s,b),w.push(y),A.push(n(y,h)),E=b+c,x.push(C.length),C.push("")}if(f&&C.length>1)throw to("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);if(!a||w.length){var T=function(e){for(var t=0,n=w.length;n>t;t++){if(m&&v(e[t]))return;C[x[t]]=e[t]}return C.join("")},S=function(e){return f?i.getTrusted(f,e):i.valueOf(e)},_=function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=U(e)}return e};return d(function(e){var t=0,n=w.length,i=new Array(n);try{for(;n>t;t++)i[t]=A[t](e);return T(i)}catch(a){var s=to("interr","Can't interpolate: {0}\n{1}",o,a.toString());r(s)}},{exp:o,expressions:w,$$watchDelegate:function(e,t,n){var r;return e.$watchGroup(A,function(n,i){var o=T(n);M(t)&&t.call(this,o,n!==i?r:o,e),r=o},n)}})}}var s=e.length,c=t.length,l=new RegExp(e.replace(/./g,o),"g"),u=new RegExp(t.replace(/./g,o),"g");return a.startSymbol=function(){return e},a.endSymbol=function(){return t},a}]}function gn(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){function i(i,a,s,c){var l=t.setInterval,u=t.clearInterval,d=0,f=$(c)&&!c,m=(f?r:n).defer(),p=m.promise;return s=$(s)?s:0,p.then(null,null,i),p.$$intervalId=l(function(){m.notify(d++),s>0&&d>=s&&(m.resolve(d),u(p.$$intervalId),delete o[p.$$intervalId]),f||e.$apply()},a),o[p.$$intervalId]=m,p}var o={};return i.cancel=function(e){return e&&e.$$intervalId in o?(o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0):!1},i}]}function vn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function $n(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=K(t[n]);return t.join("/")}function bn(e,t){var n=ir(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=f(n.port)||ro[n.protocol]||null}function yn(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var r=ir(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=G(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function En(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function wn(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function Mn(e){return e.replace(/(#.+)|#$/,"$1")}function An(e){return e.substr(0,wn(e).lastIndexOf("/")+1)}function kn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Cn(e,t){this.$$html5=!0,t=t||"";var r=An(e);bn(e,this),this.$$parse=function(e){var t=En(r,e);if(!y(t))throw io("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,r);yn(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=Y(this.$$search),t=this.$$hash?"#"+K(this.$$hash):"";this.$$url=$n(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var a,s,c;return(a=En(e,i))!==n?(s=a,c=(a=En(t,a))!==n?r+(En("/",a)||a):e+s):(a=En(r,i))!==n?c=r+a:r==i+"/"&&(c=r),c&&this.$$parse(c),!!c}}function xn(e,t){var n=An(e);bn(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var o,a=En(e,r)||En(n,r);"#"===a.charAt(0)?(o=En(t,a),v(o)&&(o=a)):o=this.$$html5?a:"",yn(o,this),this.$$path=i(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var n=Y(this.$$search),r=this.$$hash?"#"+K(this.$$hash):"";this.$$url=$n(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t){return wn(e)==wn(t)?(this.$$parse(t),!0):!1}}function Tn(e,t){this.$$html5=!0,xn.apply(this,arguments);var n=An(e);this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e==wn(r)?o=r:(a=En(n,r))?o=e+t+a:n===r+"/"&&(o=n),o&&this.$$parse(o),!!o},this.$$compose=function(){var n=Y(this.$$search),r=this.$$hash?"#"+K(this.$$hash):"";this.$$url=$n(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+t+this.$$url}}function Sn(e){return function(){return this[e]}}function _n(e,t){return function(n){return v(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Nn(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return $(t)?(e=t,this):e},this.html5Mode=function(e){return _(e)?(t.enabled=e,this):b(e)?(_(e.enabled)&&(t.enabled=e.enabled),_(e.requireBase)&&(t.requireBase=e.requireBase),_(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(e,t,n){var i=l.url(),o=l.$$state;try{r.url(e,t,n),l.$$state=r.state()}catch(a){throw l.url(i),l.$$state=o,a}}function c(e,t){n.$broadcast("$locationChangeSuccess",l.absUrl(),e,l.$$state,t)}var l,u,d,f=r.baseHref(),m=r.url();if(t.enabled){if(!f&&t.requireBase)throw io("nobase","$location in HTML5 mode requires a <base> tag to be present!");d=kn(m)+(f||"/"),u=i.history?Cn:Tn}else d=wn(m),u=xn;l=new u(d,"#"+e),l.$$parseLinkUrl(m,m),l.$$state=r.state();var p=/^\s*(javascript|mailto):/i;o.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var i=Qr(e.target);"a"!==H(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var s=i.prop("href"),c=i.attr("href")||i.attr("xlink:href");b(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=ir(s.animVal).href),p.test(s)||!s||i.attr("target")||e.isDefaultPrevented()||l.$$parseLinkUrl(s,c)&&(e.preventDefault(),l.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Mn(l.absUrl())!=Mn(m)&&r.url(l.absUrl(),!0);var h=!0;return r.onUrlChange(function(e,t){n.$evalAsync(function(){var r,i=l.absUrl(),o=l.$$state;l.$$parse(e),l.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,o).defaultPrevented,l.absUrl()===e&&(r?(l.$$parse(i),l.$$state=o,s(i,!1,o)):(h=!1,c(i,o)))}),n.$$phase||n.$digest()}),n.$watch(function(){var e=Mn(r.url()),t=Mn(l.absUrl()),o=r.state(),a=l.$$replace,u=e!==t||l.$$html5&&i.history&&o!==l.$$state;(h||u)&&(h=!1,n.$evalAsync(function(){var t=l.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,l.$$state,o).defaultPrevented;l.absUrl()===t&&(r?(l.$$parse(e),l.$$state=o):(u&&s(t,a,o===l.$$state?null:l.$$state),c(e,o)))})),l.$$replace=!1}),l}]}function On(){var e=!0,t=this;this.debugEnabled=function(t){return $(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||p,a=!1;try{a=!!i.apply}catch(s){}return a?function(){var e=[];return o(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Dn(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw ao("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Hn(e,t){if(e){if(e.constructor===e)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw ao("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw ao("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw ao("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function Rn(e,t){if(e){if(e.constructor===e)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===so||e===co||e===lo)throw ao("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function jn(e){return e.constant}function In(e,t,n,r,i){Hn(e,i),Hn(t,i);for(var o,a=n.split("."),s=0;a.length>1;s++){o=Dn(a.shift(),i);var c=0===s&&t&&t[o]||e[o];c||(c={},e[o]=c),e=Hn(c,i)}return o=Dn(a.shift(),i),Hn(e[o],i),e[o]=r,r}function Pn(e){return"constructor"==e}function Vn(e,t,r,i,o,a,s){Dn(e,a),Dn(t,a),Dn(r,a),Dn(i,a),Dn(o,a);var c=function(e){return Hn(e,a)},l=s||Pn(e)?c:h,u=s||Pn(t)?c:h,d=s||Pn(r)?c:h,f=s||Pn(i)?c:h,m=s||Pn(o)?c:h;return function(a,s){var c=s&&s.hasOwnProperty(e)?s:a;return null==c?c:(c=l(c[e]),t?null==c?n:(c=u(c[t]),r?null==c?n:(c=d(c[r]),i?null==c?n:(c=f(c[i]),o?null==c?n:c=m(c[o]):c):c):c):c)}}function Ln(e,t){return function(n,r){return e(n,r,Hn,t)}}function qn(e,t,r){var i=t.expensiveChecks,a=i?vo:go,s=a[e];if(s)return s;var c=e.split("."),l=c.length;if(t.csp)s=6>l?Vn(c[0],c[1],c[2],c[3],c[4],r,i):function(e,t){var o,a=0;do o=Vn(c[a++],c[a++],c[a++],c[a++],c[a++],r,i)(e,t),t=n,e=o;while(l>a);return o};else{var u="";i&&(u+="s = eso(s, fe);\nl = eso(l, fe);\n");var d=i;o(c,function(e,t){Dn(e,r);var n=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e;(i||Pn(e))&&(n="eso("+n+", fe)",d=!0),u+="if(s == null) return undefined;\ns="+n+";\n"}),u+="return s;";var f=new Function("s","l","eso","fe",u);f.toString=g(u),d&&(f=Ln(f,r)),s=f}return s.sharedGetter=!0,s.assign=function(t,n,r){return In(t,r,e,n,e)},a[e]=s,s}function Fn(e){return M(e.valueOf)?e.valueOf():$o.call(e)}function Un(){var e=lt(),t=lt();this.$get=["$filter","$sniffer",function(n,r){function i(e){var t=e;return e.sharedGetter&&(t=function(t,n){return e(t,n)},t.literal=e.literal,t.constant=e.constant,t.assign=e.assign),t}function a(e,t){for(var n=0,r=e.length;r>n;n++){var i=e[n];i.constant||(i.inputs?a(i.inputs,t):-1===t.indexOf(i)&&t.push(i))}return t}function s(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=Fn(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function c(e,t,n,r){var i,o=r.$$inputs||(r.$$inputs=a(r.inputs,[]));if(1===o.length){var c=s;return o=o[0],e.$watch(function(e){var t=o(e);return s(t,c)||(i=r(e),c=t&&Fn(t)),i},t,n)}for(var l=[],u=0,d=o.length;d>u;u++)l[u]=s;return e.$watch(function(e){for(var t=!1,n=0,a=o.length;a>n;n++){var c=o[n](e);(t||(t=!s(c,l[n])))&&(l[n]=c&&Fn(c))}return t&&(i=r(e)),i},t,n)}function l(e,t,n,r){var i,o;return i=e.$watch(function(e){return r(e)},function(e,n,r){o=e,M(t)&&t.apply(this,arguments),$(e)&&r.$$postDigest(function(){$(o)&&i()})},n)}function u(e,t,n,r){function i(e){var t=!0;return o(e,function(e){$(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return r(e)},function(e,n,r){s=e,M(t)&&t.call(this,e,n,r),i(e)&&r.$$postDigest(function(){i(s)&&a()})},n)}function d(e,t,n,r){var i;return i=e.$watch(function(e){return r(e)},function(){M(t)&&t.apply(this,arguments),i()},n)}function f(e,t){if(!t)return e;var n=e.$$watchDelegate,r=n!==u&&n!==l,i=r?function(n,r){var i=e(n,r);return t(i,n,r)}:function(n,r){var i=e(n,r),o=t(i,n,r);return $(i)?o:i};return e.$$watchDelegate&&e.$$watchDelegate!==c?i.$$watchDelegate=e.$$watchDelegate:t.$stateful||(i.$$watchDelegate=c,i.inputs=[e]),i}var m={csp:r.csp,expensiveChecks:!1},h={csp:r.csp,expensiveChecks:!0};return function(r,o,a){var s,g,v;switch(typeof r){case"string":v=r=r.trim();var $=a?t:e;if(s=$[v],!s){":"===r.charAt(0)&&":"===r.charAt(1)&&(g=!0,r=r.substring(2));var b=a?h:m,y=new po(b),E=new ho(y,n,b);s=E.parse(r),s.constant?s.$$watchDelegate=d:g?(s=i(s),s.$$watchDelegate=s.literal?u:l):s.inputs&&(s.$$watchDelegate=c),$[v]=s}return f(s,o);case"function":return f(r,o);default:return f(p,o)}}}]}function Bn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Wn(function(t){e.$evalAsync(t)},t)}]}function zn(){this.$get=["$browser","$exceptionHandler",function(e,t){return Wn(function(t){e.defer(t)},t)}]}function Wn(e,t){function i(e,t,n){function r(t){return function(n){i||(i=!0,t.call(e,n))}}var i=!1;return[r(t),r(n)]}function a(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function c(e){var r,i,o;o=e.pending,e.processScheduled=!1,e.pending=n;for(var a=0,s=o.length;s>a;++a){i=o[a][0],r=o[a][e.status];try{M(r)?i.resolve(r(e.value)):1===e.status?i.resolve(e.value):i.reject(e.value)}catch(c){i.reject(c),t(c)}}}function l(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){c(t)}))}function u(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function d(e){var t=new u,n=0,r=ui(e)?[]:{};return o(e,function(e,i){n++,v(e).then(function(e){r.hasOwnProperty(i)||(r[i]=e,--n||t.resolve(r))},function(e){r.hasOwnProperty(i)||t.reject(e)})}),0===n&&t.resolve(r),t.promise}var f=r("$q",TypeError),m=function(){return new u};a.prototype={then:function(e,t,n){var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return g(t,!0,e)},function(t){return g(t,!1,e)},t)}},u.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(f("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(b(e)||M(e))&&(n=e&&e.then),M(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(o){r[1](o),t(o)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,i,o=0,a=r.length;a>o;o++){i=r[o][0],e=r[o][3];try{i.notify(M(e)?e(n):n)}catch(s){t(s)}}})}};var p=function(e){var t=new u;return t.reject(e),t.promise},h=function(e,t){var n=new u;return t?n.resolve(e):n.reject(e),n.promise},g=function(e,t,n){var r=null;try{M(n)&&(r=n())}catch(i){return h(i,!1)}return N(r)?r.then(function(){return h(e,t)},function(e){return h(e,!1)}):h(e,t)},v=function(e,t,n,r){var i=new u;return i.resolve(e),i.promise.then(t,n,r)},$=function y(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!M(e))throw f("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof y))return new y(e);var r=new u;return e(t,n),r.promise};return $.defer=m,$.reject=p,$.when=v,$.all=d,$}function Gn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function Yn(){var e=10,t=r("$rootScope"),n=null,a=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,s,c,u){function d(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function f(e){if(E.$$phase)throw t("inprog","{0} already in progress",E.$$phase);E.$$phase=e}function m(){E.$$phase=null}function h(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function g(){}function $(){for(;k.length;)try{k.shift()()}catch(e){s(e)}a=null}function y(){null===a&&(a=u.defer(function(){E.$apply($)}))}d.prototype={constructor:d,$new:function(e,t){function n(){r.$$destroyed=!0}var r;return t=t||this,e?(r=new d,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=l(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),r=new this.$$ChildScope),r.$parent=t,r.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=r,t.$$childTail=r):t.$$childHead=t.$$childTail=r,(e||t!=this)&&r.$on("$destroy",n),r},$watch:function(e,t,r){var i=c(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,r,i);var o=this,a=o.$$watchers,s={fn:t,last:g,get:i,exp:e,eq:!!r};return n=null,M(t)||(s.fn=p),a||(a=o.$$watchers=[]),a.unshift(s),function(){R(a,s),n=null}},$watchGroup:function(e,t){function n(){c=!1,l?(l=!1,t(i,i,s)):t(i,r,s)}var r=new Array(e.length),i=new Array(e.length),a=[],s=this,c=!1,l=!0;if(!e.length){var u=!0;return s.$evalAsync(function(){u&&t(i,i,s)}),function(){u=!1}}return 1===e.length?this.$watch(e[0],function(e,n,o){i[0]=e,r[0]=n,t(i,e===n?i:r,o)}):(o(e,function(e,t){var o=s.$watch(e,function(e,o){i[t]=e,r[t]=o,c||(c=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function n(e){o=e;var t,n,r,s,c;if(!v(o)){if(b(o))if(i(o)){a!==m&&(a=m,g=a.length=0,d++),t=o.length,g!==t&&(d++,a.length=g=t);for(var l=0;t>l;l++)c=a[l],s=o[l],r=c!==c&&s!==s,r||c===s||(d++,a[l]=s)}else{a!==p&&(a=p={},g=0,d++),t=0;for(n in o)o.hasOwnProperty(n)&&(t++,s=o[n],c=a[n],n in a?(r=c!==c&&s!==s,r||c===s||(d++,a[n]=s)):(g++,a[n]=s,d++));if(g>t){d++;for(n in a)o.hasOwnProperty(n)||(g--,delete a[n])}}else a!==o&&(a=o,d++);return d}}function r(){if(h?(h=!1,t(o,o,l)):t(o,s,l),u)if(b(o))if(i(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var n in o)Yr.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,l=this,u=t.length>1,d=0,f=c(e,n),m=[],p={},h=!0,g=0;
return this.$watch(f,r)},$digest:function(){var r,i,o,c,l,d,p,h,v,b,y=e,k=this,C=[];f("$digest"),u.$$checkUrlChange(),this===E&&null!==a&&(u.defer.cancel(a),$()),n=null;do{for(d=!1,h=k;w.length;){try{b=w.shift(),b.scope.$eval(b.expression,b.locals)}catch(x){s(x)}n=null}e:do{if(c=h.$$watchers)for(l=c.length;l--;)try{if(r=c[l])if((i=r.get(h))===(o=r.last)||(r.eq?P(i,o):"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))){if(r===n){d=!1;break e}}else d=!0,n=r,r.last=r.eq?j(i,null):i,r.fn(i,o===g?i:o,h),5>y&&(v=4-y,C[v]||(C[v]=[]),C[v].push({msg:M(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:i,oldVal:o}))}catch(x){s(x)}if(!(p=h.$$childHead||h!==k&&h.$$nextSibling))for(;h!==k&&!(p=h.$$nextSibling);)h=h.$parent}while(h=p);if((d||w.length)&&!y--)throw m(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,C)}while(d||w.length);for(m();A.length;)try{A.shift()()}catch(x){s(x)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==E){for(var t in this.$$listenerCount)h(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(e,t){return c(e)(this,t)},$evalAsync:function(e,t){E.$$phase||w.length||u.defer(function(){w.length&&E.$digest()}),w.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){A.push(e)},$apply:function(e){try{return f("$apply"),this.$eval(e)}catch(t){s(t)}finally{m();try{E.$digest()}catch(t){throw s(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&k.push(t),y()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,h(i,1,e))}},$emit:function(e){var t,n,r,i=[],o=this,a=!1,c={name:e,targetScope:o,stopPropagation:function(){a=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=V([c],arguments,1);do{for(t=o.$$listeners[e]||i,c.currentScope=o,n=0,r=t.length;r>n;n++)if(t[n])try{t[n].apply(null,l)}catch(u){s(u)}else t.splice(n,1),n--,r--;if(a)return c.currentScope=null,c;o=o.$parent}while(o);return c.currentScope=null,c},$broadcast:function(e){var t=this,n=t,r=t,i={name:e,targetScope:t,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!t.$$listenerCount[e])return i;for(var o,a,c,l=V([i],arguments,1);n=r;){for(i.currentScope=n,o=n.$$listeners[e]||[],a=0,c=o.length;c>a;a++)if(o[a])try{o[a].apply(null,l)}catch(u){s(u)}else o.splice(a,1),a--,c--;if(!(r=n.$$listenerCount[e]&&n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(r=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var E=new d,w=E.$$asyncQueue=[],A=E.$$postDigestQueue=[],k=E.$$applyAsyncQueue=[];return E}]}function Kn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return $(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return i=ir(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function Xn(e){if("self"===e)return e;if(y(e)){if(e.indexOf("***")>-1)throw bo("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=fi(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(A(e))return new RegExp("^"+e.source+"$");throw bo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Zn(e){var t=[];return $(e)&&o(e,function(e){t.push(Xn(e))}),t}function Jn(){this.SCE_CONTEXTS=yo;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Zn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Zn(e)),t},this.$get=["$injector",function(r){function i(e,t){return"self"===e?or(t):!!e.exec(t.href)}function o(n){var r,o,a=ir(n.toString()),s=!1;for(r=0,o=e.length;o>r;r++)if(i(e[r],a)){s=!0;break}if(s)for(r=0,o=t.length;o>r;r++)if(i(t[r],a)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var r=f.hasOwnProperty(e)?f[e]:null;if(!r)throw bo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw bo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function c(e){return e instanceof d?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||t===n||""===t)return t;var r=f.hasOwnProperty(e)?f[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===yo.RESOURCE_URL){if(o(t))return t;throw bo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===yo.HTML)return u(t);throw bo("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(){throw bo("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(u=r.get("$sanitize"));var d=a(),f={};return f[yo.HTML]=a(d),f[yo.CSS]=a(d),f[yo.URL]=a(d),f[yo.JS]=a(d),f[yo.RESOURCE_URL]=a(f[yo.URL]),{trustAs:s,getTrusted:l,valueOf:c}}]}function Qn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>Jr)throw bo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=I(yo);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=h),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,function(t){return r.getTrusted(e,t)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return o(yo,function(e,t){var n=Gr(t);r[ht("parse_as_"+n)]=function(t){return i(e,t)},r[ht("get_trusted_"+n)]=function(t){return a(e,t)},r[ht("trust_as_"+n)]=function(t){return s(e,t)}}),r}]}function er(){this.$get=["$window","$document",function(e,t){var n,r,i={},o=f((/android (\d+)/.exec(Gr((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,l=s.body&&s.body.style,u=!1,d=!1;if(l){for(var m in l)if(r=c.exec(m)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in l&&"webkit"),u=!!("transition"in l||n+"Transition"in l),d=!!("animation"in l||n+"Animation"in l),!o||u&&d||(u=y(s.body.style.webkitTransition),d=y(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>o||a),hasEvent:function(e){if("input"===e&&11>=Jr)return!1;if(v(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:mi(),vendorPrefix:n,transitions:u,animations:d,android:o}}]}function tr(){this.$get=["$templateCache","$http","$q",function(e,t,n){function r(i,o){function a(e){if(!o)throw Gi("tpload","Failed to load template: {0}",i);return n.reject(e)}r.totalPendingRequests++;var s=t.defaults&&t.defaults.transformResponse;ui(s)?s=s.filter(function(e){return e!==on}):s===on&&(s=null);var c={cache:e,transformResponse:s};return t.get(i,c)["finally"](function(){r.totalPendingRequests--}).then(function(e){return e.data},a)}return r.totalPendingRequests=0,r}]}function nr(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return o(r,function(e){var r=si.element(e).data("$binding");r&&o(r,function(r){if(n){var o=new RegExp("(^|\\s)"+fi(t)+"(\\s|\\||$)");o.test(r)&&i.push(e)}else-1!=r.indexOf(t)&&i.push(e)})}),i},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function rr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,s,c){var l,u=$(c)&&!c,d=(u?r:n).defer(),f=d.promise;return l=t.defer(function(){try{d.resolve(o())}catch(t){d.reject(t),i(t)}finally{delete a[f.$$timeoutId]}u||e.$apply()},s),f.$$timeoutId=l,a[l]=d,f}var a={};return o.cancel=function(e){return e&&e.$$timeoutId in a?(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function ir(e){var t=e;return Jr&&(Eo.setAttribute("href",t),t=Eo.href),Eo.setAttribute("href",t),{href:Eo.href,protocol:Eo.protocol?Eo.protocol.replace(/:$/,""):"",host:Eo.host,search:Eo.search?Eo.search.replace(/^\?/,""):"",hash:Eo.hash?Eo.hash.replace(/^#/,""):"",hostname:Eo.hostname,port:Eo.port,pathname:"/"===Eo.pathname.charAt(0)?Eo.pathname:"/"+Eo.pathname}}function or(e){var t=y(e)?ir(e):e;return t.protocol===wo.protocol&&t.host===wo.host}function ar(){this.$get=g(e)}function sr(e){function t(r,i){if(b(r)){var a={};return o(r,function(e,n){a[n]=t(n,e)}),a}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",dr),t("date",wr),t("filter",cr),t("json",Mr),t("limitTo",Ar),t("lowercase",xo),t("number",fr),t("orderBy",kr),t("uppercase",To)}function cr(){return function(e,t,n){if(!ui(e))return e;var r,i;switch(typeof t){case"function":r=t;break;case"boolean":case"number":case"string":i=!0;case"object":r=lr(t,n,i);break;default:return e}return e.filter(r)}}function lr(e,t,n){var r,i=b(e)&&"$"in e;return t===!0?t=P:M(t)||(t=function(e,t){return b(e)||b(t)?!1:(e=Gr(""+e),t=Gr(""+t),-1!==e.indexOf(t))}),r=function(r){return i&&!b(r)?ur(r,e.$,t,!1):ur(r,e,t,n)}}function ur(e,t,n,r,i){var o=typeof e,a=typeof t;if("string"===a&&"!"===t.charAt(0))return!ur(e,t.substring(1),n,r);if(ui(e))return e.some(function(e){return ur(e,t,n,r)});switch(o){case"object":var s;if(r){for(s in e)if("$"!==s.charAt(0)&&ur(e[s],t,n,!0))return!0;return i?!1:ur(e,t,n,!1)}if("object"===a){for(s in t){var c=t[s];if(!M(c)){var l="$"===s,u=l?e:e[s];if(!ur(u,c,n,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function dr(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return v(n)&&(n=t.CURRENCY_SYM),v(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:mr(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function fr(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:mr(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function mr(e,t,n,r,i){if(!isFinite(e)||b(e))return"";var o=0>e;e=Math.abs(e);var a=e+"",s="",c=[],l=!1;if(-1!==a.indexOf("e")){var u=a.match(/([\d\.]+)e(-?)(\d+)/);u&&"-"==u[2]&&u[3]>i+1?e=0:(s=a,l=!0)}if(l)i>0&&1>e&&(s=e.toFixed(i),e=parseFloat(s));else{var d=(a.split(Mo)[1]||"").length;v(i)&&(i=Math.min(Math.max(t.minFrac,d),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i);var f=(""+e).split(Mo),m=f[0];f=f[1]||"";var p,h=0,g=t.lgSize,$=t.gSize;if(m.length>=g+$)for(h=m.length-g,p=0;h>p;p++)(h-p)%$===0&&0!==p&&(s+=n),s+=m.charAt(p);for(p=h;p<m.length;p++)(m.length-p)%g===0&&0!==p&&(s+=n),s+=m.charAt(p);for(;f.length<i;)f+="0";i&&"0"!==i&&(s+=r+f.substr(0,i))}return 0===e&&(o=!1),c.push(o?t.negPre:t.posPre,s,o?t.negSuf:t.posSuf),c.join("")}function pr(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function hr(e,t,n,r){return n=n||0,function(i){var o=i["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),pr(o,t,r)}}function gr(e,t){return function(n,r){var i=n["get"+e](),o=Kr(t?"SHORT"+e:e);return r[o][i]}}function vr(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=pr(Math[t>0?"floor":"ceil"](t/60),2)+pr(Math.abs(t%60),2)}function $r(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function br(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function yr(e){return function(t){var n=$r(t.getFullYear()),r=br(t),i=+r-+n,o=1+Math.round(i/6048e5);return pr(o,e)}}function Er(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function wr(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=f(t[9]+t[10]),o=f(t[9]+t[11])),a.call(r,f(t[1]),f(t[2])-1,f(t[3]));var c=f(t[4]||0)-i,l=f(t[5]||0)-o,u=f(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,c,l,u,d),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,s,c="",l=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,y(n)&&(n=Co.test(n)?f(n):t(n)),E(n)&&(n=new Date(n)),!w(n))return n;for(;r;)s=ko.exec(r),s?(l=V(l,s,1),r=l.pop()):(l.push(r),r=null);return i&&"UTC"===i&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+n.getTimezoneOffset())),o(l,function(t){a=Ao[t],c+=a?a(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}}function Mr(){return function(e,t){return v(t)&&(t=2),U(e,t)}}function Ar(){return function(e,t){return E(e)&&(e=e.toString()),ui(e)||y(e)?(t=1/0===Math.abs(Number(t))?Number(t):f(t),t?t>0?e.slice(0,t):e.slice(t):y(e)?"":[]):e}}function kr(e){return function(t,n,r){function o(e,t){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(0!==i)return i}return 0}function a(e,t){return t?function(t,n){return e(n,t)}:e}function s(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function c(e){return null===e?"null":"function"==typeof e.valueOf&&(e=e.valueOf(),s(e))?e:"function"==typeof e.toString&&(e=e.toString(),s(e))?e:""}function l(e,t){var n=typeof e,r=typeof t;return n===r&&"object"===n&&(e=c(e),t=c(t)),n===r?("string"===n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):r>n?-1:1}return i(t)?(n=ui(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(t){var n=!1,r=t||h;if(y(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return a(l,n);if(r=e(t),r.constant){var i=r();return a(function(e,t){return l(e[i],t[i])},n)}}return a(function(e,t){return l(r(e),r(t))},n)}),ni.call(t).sort(a(o,r))):t}}function Cr(e){return M(e)&&(e={link:e}),e.restrict=e.restrict||"AC",g(e)}function xr(e,t){e.$name=t}function Tr(e,t,r,i,a){var s=this,c=[],l=s.$$parentForm=e.parent().controller("form")||No;s.$error={},s.$$success={},s.$pending=n,s.$name=a(t.name||t.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,l.$addControl(s),s.$rollbackViewValue=function(){o(c,function(e){e.$rollbackViewValue()})},s.$commitViewValue=function(){o(c,function(e){e.$commitViewValue()})},s.$addControl=function(e){at(e.$name,"input"),c.push(e),e.$name&&(s[e.$name]=e)},s.$$renameControl=function(e,t){var n=e.$name;s[n]===e&&delete s[n],s[t]=e,e.$name=t},s.$removeControl=function(e){e.$name&&s[e.$name]===e&&delete s[e.$name],o(s.$pending,function(t,n){s.$setValidity(n,null,e)}),o(s.$error,function(t,n){s.$setValidity(n,null,e)}),o(s.$$success,function(t,n){s.$setValidity(n,null,e)}),R(c,e)},Ur({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(R(r,n),0===r.length&&delete e[t])},parentForm:l,$animate:i}),s.$setDirty=function(){i.removeClass(e,ma),i.addClass(e,pa),s.$dirty=!0,s.$pristine=!1,l.$setDirty()},s.$setPristine=function(){i.setClass(e,ma,pa+" "+Oo),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(c,function(e){e.$setPristine()})},s.$setUntouched=function(){o(c,function(e){e.$setUntouched()})},s.$setSubmitted=function(){i.addClass(e,Oo),s.$submitted=!0,l.$setSubmitted()}}function Sr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function _r(e,t,n,r,i,o){Nr(e,t,n,r,i,o),Sr(r)}function Nr(e,t,n,r,i,o){var a=Gr(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,c()})}var c=function(e){if(l&&(o.defer.cancel(l),l=null),!s){var i=t.val(),c=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=di(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))t.on("input",c);else{var l,u=function(e,t,n){l||(l=o.defer(function(){l=null,t&&t.value===n||c(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||u(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",u)}t.on("change",c),r.$render=function(){t.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function Or(e,t){if(w(e))return e;if(y(e)){Fo.lastIndex=0;var n=Fo.exec(e);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,c=0,l=$r(r),u=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds()),new Date(r,0,l.getDate()+u,o,a,s,c)}}return 0/0}function Dr(e,t){return function(n,r){var i,a;if(w(n))return n;if(y(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),jo.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return 0/0}}function Hr(e,t,r,i){return function(o,a,s,c,l,u,d){function f(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function m(e){return $(e)?w(e)?e:r(e):n}Rr(o,a,s,c),Nr(o,a,s,c,l,u);var p,h=c&&c.$options&&c.$options.timezone;if(c.$$parserName=e,c.$parsers.push(function(e){if(c.$isEmpty(e))return null;if(t.test(e)){var i=r(e,p);return"UTC"===h&&i.setMinutes(i.getMinutes()-i.getTimezoneOffset()),i}return n}),c.$formatters.push(function(e){if(e&&!w(e))throw $a("datefmt","Expected `{0}` to be a date",e);if(f(e)){if(p=e,p&&"UTC"===h){var t=6e4*p.getTimezoneOffset();p=new Date(p.getTime()+t)}return d("date")(e,i,h)}return p=null,""}),$(s.min)||s.ngMin){var g;c.$validators.min=function(e){return!f(e)||v(g)||r(e)>=g},s.$observe("min",function(e){g=m(e),c.$validate()})}if($(s.max)||s.ngMax){var b;c.$validators.max=function(e){return!f(e)||v(b)||r(e)<=b},s.$observe("max",function(e){b=m(e),c.$validate()})}}}function Rr(e,t,r,i){var o=t[0],a=i.$$hasNativeValidators=b(o.validity);a&&i.$parsers.push(function(e){var r=t.prop(Wr)||{};return r.badInput&&!r.typeMismatch?n:e})}function jr(e,t,r,i,o,a){if(Rr(e,t,r,i),Nr(e,t,r,i,o,a),i.$$parserName="number",i.$parsers.push(function(e){return i.$isEmpty(e)?null:Vo.test(e)?parseFloat(e):n}),i.$formatters.push(function(e){if(!i.$isEmpty(e)){if(!E(e))throw $a("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),r.min||r.ngMin){var s;i.$validators.min=function(e){return i.$isEmpty(e)||v(s)||e>=s},r.$observe("min",function(e){$(e)&&!E(e)&&(e=parseFloat(e,10)),s=E(e)&&!isNaN(e)?e:n,i.$validate()})}if(r.max||r.ngMax){var c;i.$validators.max=function(e){return i.$isEmpty(e)||v(c)||c>=e},r.$observe("max",function(e){$(e)&&!E(e)&&(e=parseFloat(e,10)),c=E(e)&&!isNaN(e)?e:n,i.$validate()})}}function Ir(e,t,n,r,i,o){Nr(e,t,n,r,i,o),Sr(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||Io.test(n)}}function Pr(e,t,n,r,i,o){Nr(e,t,n,r,i,o),Sr(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||Po.test(n)}}function Vr(e,t,n,r){v(n.name)&&t.attr("name",l());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function Lr(e,t,n,i,o){var a;if($(i)){if(a=e(i),!a.constant)throw r("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return a(t)}return o}function qr(e,t,n,r,i,o,a,s){var c=Lr(s,e,"ngTrueValue",n.ngTrueValue,!0),l=Lr(s,e,"ngFalseValue",n.ngFalseValue,!1),u=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",u),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return P(e,c)}),r.$parsers.push(function(e){return e?c:l})}function Fr(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i==t[o])continue e;n.push(i)}return n}function i(e){if(ui(e))return e;if(y(e))return e.split(" ");if(b(e)){var t=[];return o(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(a,s,c){function l(e){var t=d(e,1);c.$addClass(t)}function u(e){var t=d(e,-1);c.$removeClass(t)}function d(e,t){var n=s.data("$classCounts")||{},r=[];return o(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))}),s.data("$classCounts",n),r.join(" ")}function f(e,t){var i=r(t,e),o=r(e,t);i=d(i,1),o=d(o,-1),i&&i.length&&n.addClass(s,i),o&&o.length&&n.removeClass(s,o)}function m(e){if(t===!0||a.$index%2===t){var n=i(e||[]);if(p){if(!P(e,p)){var r=i(p);f(r,n)}}else l(n)}p=I(e)}var p;a.$watch(c[e],m,!0),c.$observe("class",function(){m(a.$eval(c[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(c[e]));o===t?l(s):u(s)}})}}}]}function Ur(e){function t(e,t,c){t===n?r("$pending",e,c):i("$pending",e,c),_(t)?t?(d(s.$error,e,c),u(s.$$success,e,c)):(u(s.$error,e,c),d(s.$$success,e,c)):(d(s.$error,e,c),d(s.$$success,e,c)),s.$pending?(o(va,!0),s.$valid=s.$invalid=n,a("",null)):(o(va,!1),s.$valid=Br(s.$error),s.$invalid=!s.$valid,a("",s.$valid));var l;l=s.$pending&&s.$pending[e]?n:s.$error[e]?!1:s.$$success[e]?!0:null,a(e,l),f.$setValidity(e,l,s)}function r(e,t,n){s[e]||(s[e]={}),u(s[e],t,n)}function i(e,t,r){s[e]&&d(s[e],t,r),Br(s[e])&&(s[e]=n)}function o(e,t){t&&!l[e]?(m.addClass(c,e),l[e]=!0):!t&&l[e]&&(m.removeClass(c,e),l[e]=!1)}function a(e,t){e=e?"-"+nt(e,"-"):"",o(da+e,t===!0),o(fa+e,t===!1)}var s=e.ctrl,c=e.$element,l={},u=e.set,d=e.unset,f=e.parentForm,m=e.$animate;l[fa]=!(l[da]=c.hasClass(da)),s.$setValidity=t}function Br(e){if(e)for(var t in e)return!1;return!0}var zr=/^\/(.+)\/([a-z]*)$/,Wr="validity",Gr=function(e){return y(e)?e.toLowerCase():e},Yr=Object.prototype.hasOwnProperty,Kr=function(e){return y(e)?e.toUpperCase():e},Xr=function(e){return y(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Zr=function(e){return y(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Gr=Xr,Kr=Zr);var Jr,Qr,ei,ti,ni=[].slice,ri=[].splice,ii=[].push,oi=Object.prototype.toString,ai=r("ng"),si=e.angular||(e.angular={}),ci=0;Jr=t.documentMode,p.$inject=[],h.$inject=[];var li,ui=Array.isArray,di=function(e){return y(e)?e.trim():e},fi=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},mi=function(){if($(mi.isActive_))return mi.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return mi.isActive_=e},pi=["ng-","data-ng-","ng:","x-ng-"],hi=/[A-Z]/g,gi=!1,vi=1,$i=3,bi=8,yi=9,Ei=11,wi={full:"1.3.13",major:1,minor:3,dot:13,codeName:"meticulous-riffleshuffle"};yt.expando="ng339";var Mi=yt.cache={},Ai=1,ki=function(e,t,n){e.addEventListener(t,n,!1)},Ci=function(e,t,n){e.removeEventListener(t,n,!1)};yt._data=function(e){return this.cache[e[this.expando]]||{}};var xi=/([\:\-\_]+(.))/g,Ti=/^moz([A-Z])/,Si={mouseleave:"mouseout",mouseenter:"mouseover"},_i=r("jqLite"),Ni=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Oi=/<|&#?\w+;/,Di=/<([\w:]+)/,Hi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ri={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ri.optgroup=Ri.option,Ri.tbody=Ri.tfoot=Ri.colgroup=Ri.caption=Ri.thead,Ri.th=Ri.td;var ji=yt.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),yt(e).on("load",r))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Qr(e>=0?this[e]:this[this.length+e])},length:0,push:ii,sort:[].sort,splice:[].splice},Ii={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Ii[Gr(e)]=e});var Pi={};o("input,select,option,textarea,button,form,details".split(","),function(e){Pi[e]=!0});var Vi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:Ct,removeData:At},function(e,t){yt[t]=e}),o({data:Ct,inheritedData:Ot,scope:function(e){return Qr.data(e,"$scope")||Ot(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Qr.data(e,"$isolateScope")||Qr.data(e,"$isolateScopeNoTemplate")},controller:Nt,injector:function(e){return Ot(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:xt,css:function(e,t,n){return t=ht(t),$(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,r){var i=Gr(t);if(Ii[i]){if(!$(r))return e[t]||(e.attributes.getNamedItem(t)||p).specified?i:n;r?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if($(r))e.setAttribute(t,r);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}},prop:function(e,t,n){return $(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(v(t)){var n=e.nodeType;return n===vi||n===$i?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(v(t)){if(e.multiple&&"select"===H(e)){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return v(t)?e.innerHTML:(wt(e,!0),void(e.innerHTML=t))},empty:Dt},function(e,t){yt.prototype[t]=function(t,r){var i,o,a=this.length;if(e!==Dt&&(2==e.length&&e!==xt&&e!==Nt?t:r)===n){if(b(t)){for(i=0;a>i;i++)if(e===Ct)e(this[i],t);else for(o in t)e(this[i],o,t[o]);return this}for(var s=e.$dv,c=s===n?Math.min(a,1):a,l=0;c>l;l++){var u=e(this[l],t,r);s=s?s+u:u}return s}for(i=0;a>i;i++)e(this[i],t,r);return this}}),o({removeData:At,on:function za(e,t,n,r){if($(r))throw _i("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(vt(e)){var i=kt(e,!0),o=i.events,a=i.handle;a||(a=i.handle=Pt(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],c=s.length;c--;){t=s[c];var l=o[t];l||(o[t]=[],"mouseenter"===t||"mouseleave"===t?za(e,Si[t],function(e){var n=this,r=e.relatedTarget;(!r||r!==n&&!n.contains(r))&&a(e,t)}):"$destroy"!==t&&ki(e,t,a),l=o[t]),l.push(n)}}},off:Mt,one:function(e,t,n){e=Qr(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;wt(e),o(new yt(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){e.nodeType===vi&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===vi||n===Ei){t=new yt(t);for(var r=0,i=t.length;i>r;r++){var o=t[r];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===vi){var n=e.firstChild;o(new yt(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=Qr(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:Ht,detach:function(e){Ht(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new yt(t);for(var i=0,o=t.length;o>i;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:St,removeClass:Tt,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var r=n;v(r)&&(r=!xt(e,t)),(r?St:Tt)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Ei?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Et,triggerHandler:function(e,t,n){var r,i,a,s=t.type||t,c=kt(e),l=c&&c.events,u=l&&l[s];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:s,target:e},t.type&&(r=d(r,t)),i=I(u),a=n?[r].concat(n):[r],o(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){yt.prototype[t]=function(t,n,r){for(var i,o=0,a=this.length;a>o;o++)v(i)?(i=e(this[o],t,n,r),$(i)&&(i=Qr(i))):_t(i,e(this[o],t,n,r));return $(i)?i:this},yt.prototype.bind=yt.prototype.on,yt.prototype.unbind=yt.prototype.off}),qt.prototype={put:function(e,t){this[Lt(e,this.nextUid)]=t},get:function(e){return this[Lt(e,this.nextUid)]},remove:function(e){var t=this[e=Lt(e,this.nextUid)];return delete this[e],t}};var Li=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,qi=/,/,Fi=/^\s*(_?)(\S+?)\1\s*$/,Ui=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Bi=r("$injector");Bt.$$annotate=Ut;var zi=r("$animate"),Wi=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var r=t+"-animation";if(t&&"."!=t.charAt(0))throw zi("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=r,e.factory(r,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(e,t,n){function r(t){var r,i=e.defer();return i.promise.$$cancelFn=function(){r&&r()},n.$$postDigest(function(){r=t(function(){i.resolve()})}),i.promise}function i(e,t){var n=[],r=[],i=lt();return o((e.attr("class")||"").split(/\s+/),function(e){i[e]=!0}),o(t,function(e,t){var o=i[t];e===!1&&o?r.push(t):e!==!0||o||n.push(t)}),n.length+r.length>0&&[n.length?n:null,r.length?r:null]}function a(e,t,n){for(var r=0,i=t.length;i>r;++r){var o=t[r];e[o]=n}}function s(){return l||(l=e.defer(),t(function(){l.resolve(),l=null})),l.promise}function c(e,t){if(si.isObject(t)){var n=d(t.from||{},t.to||{});e.css(n)}}var l;return{animate:function(e,t,n){return c(e,{from:t,to:n}),s()},enter:function(e,t,n,r){return c(e,r),n?n.after(e):t.prepend(e),s()},leave:function(e){return e.remove(),s()},move:function(e,t,n,r){return this.enter(e,t,n,r)},addClass:function(e,t,n){return this.setClass(e,t,[],n)},$$addClassImmediately:function(e,t,n){return e=Qr(e),t=y(t)?t:ui(t)?t.join(" "):"",o(e,function(e){St(e,t)}),c(e,n),s()},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},$$removeClassImmediately:function(e,t,n){return e=Qr(e),t=y(t)?t:ui(t)?t.join(" "):"",o(e,function(e){Tt(e,t)}),c(e,n),s()},setClass:function(e,t,n,o){var s=this,c="$$animateClasses",l=!1;e=Qr(e);var u=e.data(c);u?o&&u.options&&(u.options=si.extend(u.options||{},o)):(u={classes:{},options:o},l=!0);var d=u.classes;return t=ui(t)?t:t.split(" "),n=ui(n)?n:n.split(" "),a(d,t,!0),a(d,n,!1),l&&(u.promise=r(function(t){var n=e.data(c);if(e.removeData(c),n){var r=i(e,n.classes);r&&s.$$setClassImmediately(e,r[0],r[1],n.options)}t()}),e.data(c,u)),u.promise},$$setClassImmediately:function(e,t,n,r){return t&&this.$$addClassImmediately(e,t),n&&this.$$removeClassImmediately(e,n),c(e,r),s()
},enabled:p,cancel:p}}]}],Gi=r("$compile");Zt.$inject=["$provide","$$sanitizeUriProvider"];var Yi=/^((?:x|data)[\:\-_])/i,Ki=r("$controller"),Xi="application/json",Zi={"Content-Type":Xi+";charset=utf-8"},Ji=/^\[|^\{(?!\{)/,Qi={"[":/]$/,"{":/}$/},eo=/^\)\]\}',?\n/,to=r("$interpolate"),no=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ro={http:80,https:443,ftp:21},io=r("$location"),oo={$$html5:!1,$$replace:!1,absUrl:Sn("$$absUrl"),url:function(e){if(v(e))return this.$$url;var t=no.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Sn("$$protocol"),host:Sn("$$host"),port:Sn("$$port"),path:_n("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(y(e)||E(e))e=e.toString(),this.$$search=G(e);else{if(!b(e))throw io("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=j(e,{}),o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:v(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:_n("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};o([Tn,xn,Cn],function(e){e.prototype=Object.create(oo),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Cn||!this.$$html5)throw io("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(t)?null:t,this}});var ao=r("$parse"),so=Function.prototype.call,co=Function.prototype.apply,lo=Function.prototype.bind,uo=lt();o({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(e,t){e.constant=e.literal=e.sharedGetter=!0,uo[t]=e}),uo["this"]=function(e){return e},uo["this"].sharedGetter=!0;var fo=d(lt(),{"+":function(e,t,r,i){return r=r(e,t),i=i(e,t),$(r)?$(i)?r+i:r:$(i)?i:n},"-":function(e,t,n,r){return n=n(e,t),r=r(e,t),($(n)?n:0)-($(r)?r:0)},"*":function(e,t,n,r){return n(e,t)*r(e,t)},"/":function(e,t,n,r){return n(e,t)/r(e,t)},"%":function(e,t,n,r){return n(e,t)%r(e,t)},"===":function(e,t,n,r){return n(e,t)===r(e,t)},"!==":function(e,t,n,r){return n(e,t)!==r(e,t)},"==":function(e,t,n,r){return n(e,t)==r(e,t)},"!=":function(e,t,n,r){return n(e,t)!=r(e,t)},"<":function(e,t,n,r){return n(e,t)<r(e,t)},">":function(e,t,n,r){return n(e,t)>r(e,t)},"<=":function(e,t,n,r){return n(e,t)<=r(e,t)},">=":function(e,t,n,r){return n(e,t)>=r(e,t)},"&&":function(e,t,n,r){return n(e,t)&&r(e,t)},"||":function(e,t,n,r){return n(e,t)||r(e,t)},"!":function(e,t,n){return!n(e,t)},"=":!0,"|":!0}),mo={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},po=function(e){this.options=e};po.prototype={constructor:po,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=fo[t],o=fo[n],a=fo[r];if(i||o||a){var s=a?r:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=$(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw ao("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Gr(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=mo[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var ho=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};ho.ZERO=d(function(){return 0},{sharedGetter:!0,constant:!0}),ho.prototype={constructor:ho,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.peek().identifier&&this.peek().text in uo?e=uo[this.consume().text]:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t,n;t=this.expect("(","[",".");)"("===t.text?(e=this.functionCall(e,n),n=null):"["===t.text?(n=e,e=this.objectIndex(e)):"."===t.text?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw ao("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===r||a===i||!t&&!n&&!r&&!i)return o}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},consume:function(e){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},unaryFn:function(e,t){var n=fo[e];return d(function(e,r){return n(e,r,t)},{constant:t.constant,inputs:[t]})},binaryFn:function(e,t,n,r){var i=fo[t];return d(function(t,r){return i(t,r,e,n)},{constant:e.constant&&n.constant,inputs:!r&&[e,n]})},identifier:function(){for(var e=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)e+=this.consume().text+this.consume().text;return qn(e,this.options,this.text)},constant:function(){var e=this.consume().value;return d(function(){return e},{constant:!0,literal:!0})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var r,i=0,o=e.length;o>i;i++)r=e[i](t,n);return r}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},filter:function(e){var t,r,i=this.$filter(this.consume().text);if(this.peek(":"))for(t=[],r=[];this.expect(":");)t.push(this.expression());var o=[e].concat(t||[]);return d(function(o,a){var s=e(o,a);if(r){r[0]=s;for(var c=t.length;c--;)r[c+1]=t[c](o,a);return i.apply(n,r)}return i(s)},{constant:!i.$stateful&&o.every(jn),inputs:!i.$stateful&&o})},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),d(function(t,r){return n.assign(t,e(t,r),r)},{inputs:[n,e]})):n},ternary:function(){var e,t,n=this.logicalOR();if((t=this.expect("?"))&&(e=this.assignment(),this.consume(":"))){var r=this.assignment();return d(function(t,i){return n(t,i)?e(t,i):r(t,i)},{constant:n.constant&&e.constant&&r.constant})}return n},logicalOR:function(){for(var e,t=this.logicalAND();e=this.expect("||");)t=this.binaryFn(t,e.text,this.logicalAND(),!0);return t},logicalAND:function(){for(var e,t=this.equality();e=this.expect("&&");)t=this.binaryFn(t,e.text,this.equality(),!0);return t},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=this.binaryFn(t,e.text,this.relational());return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=this.binaryFn(t,e.text,this.additive());return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.text,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.text,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(ho.ZERO,e.text,this.unary()):(e=this.expect("!"))?this.unaryFn(e.text,this.unary()):this.primary()},fieldAccess:function(e){var t=this.identifier();return d(function(r,i,o){var a=o||e(r,i);return null==a?n:t(a)},{assign:function(n,r,i){var o=e(n,i);return o||e.assign(n,o={},i),t.assign(o,r)}})},objectIndex:function(e){var t=this.text,r=this.expression();return this.consume("]"),d(function(i,o){var a,s=e(i,o),c=r(i,o);return Dn(c,t),s?a=Hn(s[c],t):n},{assign:function(n,i,o){var a=Dn(r(n,o),t),s=Hn(e(n,o),t);return s||e.assign(n,s={},o),s[a]=i}})},functionCall:function(e,t){var r=[];if(")"!==this.peekToken().text)do r.push(this.expression());while(this.expect(","));this.consume(")");var i=this.text,o=r.length?[]:null;return function(a,s){var c=t?t(a,s):$(t)?n:a,l=e(a,s,c)||p;if(o)for(var u=r.length;u--;)o[u]=Hn(r[u](a,s),i);Hn(c,i),Rn(l,i);var d=l.apply?l.apply(c,o):l(o[0],o[1],o[2],o[3],o[4]);return o&&(o.length=0),Hn(d,i)}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),d(function(t,n){for(var r=[],i=0,o=e.length;o>i;i++)r.push(e[i](t,n));return r},{literal:!0,constant:e.every(jn),inputs:e})},object:function(){var e=[],t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.consume();n.constant?e.push(n.value):n.identifier?e.push(n.text):this.throwError("invalid key",n),this.consume(":"),t.push(this.expression())}while(this.expect(","));return this.consume("}"),d(function(n,r){for(var i={},o=0,a=t.length;a>o;o++)i[e[o]]=t[o](n,r);return i},{literal:!0,constant:t.every(jn),inputs:t})}};var go=lt(),vo=lt(),$o=Object.prototype.valueOf,bo=r("$sce"),yo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Gi=r("$compile"),Eo=t.createElement("a"),wo=ir(e.location.href);sr.$inject=["$provide"],dr.$inject=["$locale"],fr.$inject=["$locale"];var Mo=".",Ao={yyyy:hr("FullYear",4),yy:hr("FullYear",2,0,!0),y:hr("FullYear",1),MMMM:gr("Month"),MMM:gr("Month",!0),MM:hr("Month",2,1),M:hr("Month",1,1),dd:hr("Date",2),d:hr("Date",1),HH:hr("Hours",2),H:hr("Hours",1),hh:hr("Hours",2,-12),h:hr("Hours",1,-12),mm:hr("Minutes",2),m:hr("Minutes",1),ss:hr("Seconds",2),s:hr("Seconds",1),sss:hr("Milliseconds",3),EEEE:gr("Day"),EEE:gr("Day",!0),a:Er,Z:vr,ww:yr(2),w:yr(1)},ko=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Co=/^\-?\d+$/;wr.$inject=["$locale"];var xo=g(Gr),To=g(Kr);kr.$inject=["$parse"];var So=g({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref||t.name?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===oi.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),_o={};o(Ii,function(e,t){if("multiple"!=e){var n=Jt("ng-"+t);_o[n]=function(){return{restrict:"A",priority:100,link:function(e,r,i){e.$watch(i[n],function(e){i.$set(t,!!e)})}}}}}),o(Vi,function(e,t){_o[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match(zr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),o(["src","srcset","href"],function(e){var t=Jt("ng-"+e);_o[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===oi.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(Jr&&o&&r.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var No={$addControl:p,$$renameControl:xr,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},Oo="ng-submitted";Tr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Do=function(e){return["$timeout",function(t){var r={name:"form",restrict:e?"EAC":"E",controller:Tr,compile:function(e){return e.addClass(ma).addClass(da),{pre:function(e,r,i,o){if(!("action"in i)){var a=function(t){e.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),t.preventDefault()};ki(r[0],"submit",a),r.on("$destroy",function(){t(function(){Ci(r[0],"submit",a)},0,!1)})}var s=o.$$parentForm,c=o.$name;c&&(In(e,null,c,o,c),i.$observe(i.name?"name":"ngForm",function(t){c!==t&&(In(e,null,c,n,c),c=t,In(e,null,c,o,c),s.$$renameControl(o,c))})),r.on("$destroy",function(){s.$removeControl(o),c&&In(e,null,c,n,c),d(o,No)})}}}};return r}]},Ho=Do(),Ro=Do(!0),jo=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Io=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Po=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Vo=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Lo=/^(\d{4})-(\d{2})-(\d{2})$/,qo=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Fo=/^(\d{4})-W(\d\d)$/,Uo=/^(\d{4})-(\d\d)$/,Bo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,zo={text:_r,date:Hr("date",Lo,Dr(Lo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Hr("datetimelocal",qo,Dr(qo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Hr("time",Bo,Dr(Bo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Hr("week",Fo,Or,"yyyy-Www"),month:Hr("month",Uo,Dr(Uo,["yyyy","MM"]),"yyyy-MM"),number:jr,url:Ir,email:Pr,radio:Vr,checkbox:qr,hidden:p,button:p,submit:p,reset:p,file:p},Wo=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(zo[Gr(a.type)]||zo.text)(i,o,a,s[0],t,e,n,r)}}}}],Go=/^(true|false|\d+)$/,Yo=function(){return{restrict:"A",priority:100,compile:function(e,t){return Go.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Ko=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,r,i){e.$$addBindingInfo(r,i.ngBind),r=r[0],t.$watch(i.ngBind,function(e){r.textContent=e===n?"":e})}}}}],Xo=["$interpolate","$compile",function(e,t){return{compile:function(r){return t.$$addBindingClass(r),function(r,i,o){var a=e(i.attr(o.$attr.ngBindTemplate));t.$$addBindingInfo(i,a.expressions),i=i[0],o.$observe("ngBindTemplate",function(e){i.textContent=e===n?"":e})}}}}],Zo=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var o=t(i.ngBindHtml),a=t(i.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(a,function(){r.html(e.getTrustedHtml(o(t))||"")})}}}}],Jo=g({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Qo=Fr("",!0),ea=Fr("Odd",0),ta=Fr("Even",1),na=Cr({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),ra=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ia={},oa={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Jt("ng-"+e);ia[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[t],null,!0);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};oa[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var aa=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,c,l;n.$watch(i.ngIf,function(n){n?c||a(function(n,o){c=o,n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)}):(l&&(l.remove(),l=null),c&&(c.$destroy(),c=null),s&&(l=ct(s.clone),e.leave(l).then(function(){l=null}),s=null))})}}}],sa=["$templateRequest","$anchorScroll","$animate","$sce",function(e,t,n,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:si.noop,compile:function(i,o){var a=o.ngInclude||o.src,s=o.onload||"",c=o.autoscroll;return function(i,o,l,u,d){var f,m,p,h=0,g=function(){m&&(m.remove(),m=null),f&&(f.$destroy(),f=null),p&&(n.leave(p).then(function(){m=null}),m=p,p=null)};i.$watch(r.parseAsResourceUrl(a),function(r){var a=function(){!$(c)||c&&!i.$eval(c)||t()},l=++h;r?(e(r,!0).then(function(e){if(l===h){var t=i.$new();u.template=e;var c=d(t,function(e){g(),n.enter(e,null,o).then(a)});f=t,p=c,f.$emit("$includeContentLoaded",r),i.$eval(s)}},function(){l===h&&(g(),i.$emit("$includeContentError",r))}),i.$emit("$includeContentRequested",r)):(g(),u.template=null)})}}}}],ca=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return/SVG/.test(r[0].toString())?(r.empty(),void e($t(o.template,t).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(o.template),void e(r.contents())(n))}}}],la=Cr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),ua=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var a=t.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,c=s?di(a):a,l=function(e){if(!v(e)){var t=[];return e&&o(e.split(c),function(e){e&&t.push(s?di(e):e)}),t}};i.$parsers.push(l),i.$formatters.push(function(e){return ui(e)?e.join(a):n}),i.$isEmpty=function(e){return!e||!e.length}}}},da="ng-valid",fa="ng-invalid",ma="ng-pristine",pa="ng-dirty",ha="ng-untouched",ga="ng-touched",va="ng-pending",$a=new r("ngModel"),ba=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,r,i,a,s,c,l,u,d){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=d(r.name||"",!1)(e);var f=a(r.ngModel),m=f.assign,h=f,g=m,b=null,y=this;this.$$setOptions=function(e){if(y.$options=e,e&&e.getterSetter){var t=a(r.ngModel+"()"),n=a(r.ngModel+"($$$p)");h=function(e){var n=f(e);return M(n)&&(n=t(e)),n},g=function(e){M(f(e))?n(e,{$$$p:y.$modelValue}):m(e,y.$modelValue)}}else if(!f.assign)throw $a("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,z(i))},this.$render=p,this.$isEmpty=function(e){return v(e)||""===e||null===e||e!==e};var w=i.inheritedData("$formController")||No,A=0;Ur({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:w,$animate:s}),this.$setPristine=function(){y.$dirty=!1,y.$pristine=!0,s.removeClass(i,pa),s.addClass(i,ma)},this.$setDirty=function(){y.$dirty=!0,y.$pristine=!1,s.removeClass(i,ma),s.addClass(i,pa),w.$setDirty()},this.$setUntouched=function(){y.$touched=!1,y.$untouched=!0,s.setClass(i,ha,ga)},this.$setTouched=function(){y.$touched=!0,y.$untouched=!1,s.setClass(i,ga,ha)},this.$rollbackViewValue=function(){c.cancel(b),y.$viewValue=y.$$lastCommittedViewValue,y.$render()},this.$validate=function(){if(!E(y.$modelValue)||!isNaN(y.$modelValue)){var e=y.$$lastCommittedViewValue,t=y.$$rawModelValue,r=y.$$parserName||"parse",i=y.$error[r]?!1:n,o=y.$valid,a=y.$modelValue,s=y.$options&&y.$options.allowInvalid;y.$$runValidators(i,t,e,function(e){s||o===e||(y.$modelValue=e?t:n,y.$modelValue!==a&&y.$$writeModelToScope())})}},this.$$runValidators=function(e,t,r,i){function a(e){var t=y.$$parserName||"parse";if(e===n)l(t,null);else if(l(t,e),!e)return o(y.$validators,function(e,t){l(t,null)}),o(y.$asyncValidators,function(e,t){l(t,null)}),!1;return!0}function s(){var e=!0;return o(y.$validators,function(n,i){var o=n(t,r);e=e&&o,l(i,o)}),e?!0:(o(y.$asyncValidators,function(e,t){l(t,null)}),!1)}function c(){var e=[],i=!0;o(y.$asyncValidators,function(o,a){var s=o(t,r);if(!N(s))throw $a("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);l(a,n),e.push(s.then(function(){l(a,!0)},function(){i=!1,l(a,!1)}))}),e.length?u.all(e).then(function(){d(i)},p):d(!0)}function l(e,t){f===A&&y.$setValidity(e,t)}function d(e){f===A&&i(e)}A++;var f=A;return a(e)&&s()?void c():void d(!1)},this.$commitViewValue=function(){var e=y.$viewValue;c.cancel(b),(y.$$lastCommittedViewValue!==e||""===e&&y.$$hasNativeValidators)&&(y.$$lastCommittedViewValue=e,y.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){y.$modelValue!==s&&y.$$writeModelToScope()}var r=y.$$lastCommittedViewValue,i=r,o=v(i)?n:!0;if(o)for(var a=0;a<y.$parsers.length;a++)if(i=y.$parsers[a](i),v(i)){o=!1;break}E(y.$modelValue)&&isNaN(y.$modelValue)&&(y.$modelValue=h(e));var s=y.$modelValue,c=y.$options&&y.$options.allowInvalid;y.$$rawModelValue=i,c&&(y.$modelValue=i,t()),y.$$runValidators(o,i,y.$$lastCommittedViewValue,function(e){c||(y.$modelValue=e?i:n,t())})},this.$$writeModelToScope=function(){g(e,y.$modelValue),o(y.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){y.$viewValue=e,(!y.$options||y.$options.updateOnDefault)&&y.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=y.$options;i&&$(i.debounce)&&(n=i.debounce,E(n)?r=n:E(n[t])?r=n[t]:E(n["default"])&&(r=n["default"])),c.cancel(b),r?b=c(function(){y.$commitViewValue()},r):l.$$phase?y.$commitViewValue():e.$apply(function(){y.$commitViewValue()})},e.$watch(function(){var t=h(e);if(t!==y.$modelValue){y.$modelValue=y.$$rawModelValue=t;for(var r=y.$formatters,i=r.length,o=t;i--;)o=r[i](o);y.$viewValue!==o&&(y.$viewValue=y.$$lastCommittedViewValue=o,y.$render(),y.$$runValidators(n,t,o,p))}return t})}],ya=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ba,priority:1,compile:function(t){return t.addClass(ma).addClass(ha).addClass(da),{pre:function(e,t,n,r){var i=r[0],o=r[1]||No;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(e){i.$name!==e&&o.$$renameControl(i,e)}),e.$on("$destroy",function(){o.$removeControl(i)})},post:function(t,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){o.$touched||(e.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],Ea=/(\s+|^)default(\s+|$)/,wa=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var r=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=di(this.$options.updateOn.replace(Ea,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Ma=Cr({terminal:!0,priority:1e3}),Aa=["$locale","$interpolate",function(e,t){var n=/{}/g,r=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(i,a,s){function c(e){a.text(e||"")}var l,u=s.count,d=s.$attr.when&&a.attr(s.$attr.when),f=s.offset||0,m=i.$eval(d)||{},p={},h=t.startSymbol(),g=t.endSymbol(),v=h+u+"-"+f+g,$=si.noop;o(s,function(e,t){var n=r.exec(t);if(n){var i=(n[1]?"-":"")+Gr(n[2]);m[i]=a.attr(s.$attr[t])}}),o(m,function(e,r){p[r]=t(e.replace(n,v))}),i.$watch(u,function(t){var n=parseFloat(t),r=isNaN(n);r||n in m||(n=e.pluralCat(n-f)),n===l||r&&isNaN(l)||($(),$=i.$watch(p[n],c),l=n)})}}}],ka=["$parse","$animate",function(e,a){var s="$$NG_REMOVED",c=r("ngRepeat"),l=function(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},u=function(e){return e.clone[0]},d=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,f){var m=f.ngRepeat,p=t.createComment(" end ngRepeat: "+m+" "),h=m.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!h)throw c("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",m);var g=h[1],v=h[2],$=h[3],b=h[4];if(h=g.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!h)throw c("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var y=h[3]||h[1],E=h[2];if($&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test($)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test($)))throw c("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",$);var w,M,A,k,C={$id:Lt};return b?w=e(b):(A=function(e,t){return Lt(t)},k=function(e){return e}),function(e,t,r,f,h){w&&(M=function(t,n,r){return E&&(C[E]=t),C[y]=n,C.$index=r,w(e,C)});var g=lt();e.$watchCollection(v,function(r){var f,v,b,w,C,x,T,S,_,N,O,D,H=t[0],R=lt();if($&&(e[$]=r),i(r))_=r,S=M||A;else{S=M||k,_=[];for(var j in r)r.hasOwnProperty(j)&&"$"!=j.charAt(0)&&_.push(j);_.sort()}for(w=_.length,O=new Array(w),f=0;w>f;f++)if(C=r===_?f:_[f],x=r[C],T=S(C,x,f),g[T])N=g[T],delete g[T],R[T]=N,O[f]=N;else{if(R[T])throw o(O,function(e){e&&e.scope&&(g[e.id]=e)}),c("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",m,T,x);O[f]={id:T,scope:n,clone:n},R[T]=!0}for(var I in g){if(N=g[I],D=ct(N.clone),a.leave(D),D[0].parentNode)for(f=0,v=D.length;v>f;f++)D[f][s]=!0;N.scope.$destroy()}for(f=0;w>f;f++)if(C=r===_?f:_[f],x=r[C],N=O[f],N.scope){b=H;do b=b.nextSibling;while(b&&b[s]);u(N)!=b&&a.move(ct(N.clone),null,Qr(H)),H=d(N),l(N.scope,f,y,x,E,C,w)}else h(function(e,t){N.scope=t;var n=p.cloneNode(!1);e[e.length++]=n,a.enter(e,null,Qr(H)),H=n,N.clone=e,R[N.id]=N,l(N.scope,f,y,x,E,C,w)});g=R})}}}}],Ca="ng-hide",xa="ng-hide-animate",Ta=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,Ca,{tempClasses:xa})})}}}],Sa=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,Ca,{tempClasses:xa})})}}}],_a=Cr(function(e,t,n){e.$watchCollection(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)})}),Na=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var s=i.ngSwitch||i.on,c=[],l=[],u=[],d=[],f=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var r,i;for(r=0,i=u.length;i>r;++r)e.cancel(u[r]);for(u.length=0,r=0,i=d.length;i>r;++r){var s=ct(l[r].clone);d[r].$destroy();var m=u[r]=e.leave(s);m.then(f(u,r))}l.length=0,d.length=0,(c=a.cases["!"+n]||a.cases["?"])&&o(c,function(n){n.transclude(function(r,i){d.push(i);var o=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var a={clone:r};l.push(a),e.enter(r,o.parent(),o)})})})}}}],Oa=Cr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),Da=Cr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),Ha=Cr({restrict:"EAC",link:function(e,t,n,i,o){if(!o)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",z(t));o(function(e){t.empty(),t.append(e)})}}),Ra=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],ja=r("ngOptions"),Ia=g({restrict:"A",terminal:!0}),Pa=["$compile","$parse",function(e,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:p};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var r,i,o=this,a={},c=s;o.databound=n.ngModel,o.init=function(e,t,n){c=e,r=t,i=n},o.addOption=function(t,n){at(t,'"option value"'),a[t]=!0,c.$viewValue==t&&(e.val(t),i.parent()&&i.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},o.removeOption=function(e){this.hasOption(e)&&(delete a[e],c.$viewValue===e&&this.renderUnknownOption(e))},o.renderUnknownOption=function(t){var n="? "+Lt(t)+" ?";i.val(n),e.prepend(i),e.val(n),i.prop("selected",!0)},o.hasOption=function(e){return a.hasOwnProperty(e)},t.$on("$destroy",function(){o.renderUnknownOption=p})}],link:function(s,c,l,u){function d(e,t,n,r){n.$render=function(){var e=n.$viewValue;r.hasOption(e)?(k.parent()&&k.remove(),t.val(e),""===e&&p.prop("selected",!0)):v(e)&&p?t.val(""):r.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){k.parent()&&k.remove(),n.$setViewValue(t.val())})})}function f(e,t,n){var r;n.$render=function(){var e=new qt(n.$viewValue);o(t.find("option"),function(t){t.selected=$(e.get(t.value))})},e.$watch(function(){P(r,n.$viewValue)||(r=I(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];o(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function m(t,s,c){function l(e,n,r){return P[x]=r,_&&(P[_]=n),e(t,P)}function u(){t.$apply(function(){var e,n=D(t)||[];if(b)e=[],o(s.val(),function(t){t=R?j[t]:t,e.push(d(t,n[t]))});else{var r=R?j[s.val()]:s.val();e=d(r,n[r])}c.$setViewValue(e),v()})}function d(e,t){if("?"===e)return n;if(""===e)return null;var r=S?S:O;return l(r,e,t)}function f(){var e,n=D(t);if(n&&ui(n)){e=new Array(n.length);for(var r=0,i=n.length;i>r;r++)e[r]=l(C,r,n[r]);return e}if(n){e={};for(var o in n)n.hasOwnProperty(o)&&(e[o]=l(C,o,n[o]))}return e}function m(e){var t;if(b)if(R&&ui(e)){t=new qt([]);for(var n=0;n<e.length;n++)t.put(l(R,null,e[n]),!0)}else t=new qt(e);else R&&(e=l(R,null,e));
return function(n,r){var i;return i=R?R:S?S:O,b?$(t.remove(l(i,n,r))):e===l(i,n,r)}}function p(){w||(t.$$postDigest(v),w=!0)}function g(e,t,n){e[t]=e[t]||0,e[t]+=n?1:-1}function v(){w=!1;var e,n,r,i,u,d,f,p,v,y,k,x,T,S,O,H,V,L={"":[]},q=[""],F=c.$viewValue,U=D(t)||[],B=_?a(U):U,z={},W=m(F),G=!1;for(j={},x=0;y=B.length,y>x;x++)f=x,_&&(f=B[x],"$"===f.charAt(0))||(p=U[f],e=l(N,f,p)||"",(n=L[e])||(n=L[e]=[],q.push(e)),T=W(f,p),G=G||T,H=l(C,f,p),H=$(H)?H:"",V=R?R(t,P):_?B[x]:x,R&&(j[V]=f),n.push({id:V,label:H,selected:T}));for(b||(E||null===F?L[""].unshift({id:"",label:"",selected:!G}):G||L[""].unshift({id:"?",label:"",selected:!0})),k=0,v=q.length;v>k;k++){for(e=q[k],n=L[e],I.length<=k?(i={element:A.clone().attr("label",e),label:n.label},u=[i],I.push(u),s.append(i.element)):(u=I[k],i=u[0],i.label!=e&&i.element.attr("label",i.label=e)),S=null,x=0,y=n.length;y>x;x++)r=n[x],(d=u[x+1])?(S=d.element,d.label!==r.label&&(g(z,d.label,!1),g(z,r.label,!0),S.text(d.label=r.label),S.prop("label",d.label)),d.id!==r.id&&S.val(d.id=r.id),S[0].selected!==r.selected&&(S.prop("selected",d.selected=r.selected),Jr&&S.prop("selected",d.selected))):(""===r.id&&E?O=E:(O=M.clone()).val(r.id).prop("selected",r.selected).attr("selected",r.selected).prop("label",r.label).text(r.label),u.push(d={element:O,label:r.label,id:r.id,selected:r.selected}),g(z,r.label,!0),S?S.after(O):i.element.append(O),S=O);for(x++;u.length>x;)r=u.pop(),g(z,r.label,!1),r.element.remove()}for(;I.length>k;){for(n=I.pop(),x=1;x<n.length;++x)g(z,n[x].label,!1);n[0].element.remove()}o(z,function(e,t){e>0?h.addOption(t):0>e&&h.removeOption(t)})}var k;if(!(k=y.match(i)))throw ja("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",y,z(s));var C=r(k[2]||k[1]),x=k[4]||k[6],T=/ as /.test(k[0])&&k[1],S=T?r(T):null,_=k[5],N=r(k[3]||""),O=r(k[2]?k[1]:x),D=r(k[7]),H=k[8],R=H?r(k[8]):null,j={},I=[[{element:s,label:""}]],P={};E&&(e(E)(t),E.removeClass("ng-scope"),E.remove()),s.empty(),s.on("change",u),c.$render=v,t.$watchCollection(D,p),t.$watchCollection(f,p),b&&t.$watchCollection(function(){return c.$modelValue},p)}if(u[1]){for(var p,h=u[0],g=u[1],b=l.multiple,y=l.ngOptions,E=!1,w=!1,M=Qr(t.createElement("option")),A=Qr(t.createElement("optgroup")),k=M.clone(),C=0,x=c.children(),T=x.length;T>C;C++)if(""===x[C].value){p=E=x.eq(C);break}h.init(g,E,k),b&&(g.$isEmpty=function(e){return!e||0===e.length}),y?m(s,c,g):b?f(s,c,g):d(s,c,g,h)}}}}],Va=["$interpolate",function(e){var t={addOption:p,removeOption:p};return{restrict:"E",priority:100,compile:function(n,r){if(v(r.value)){var i=e(n.text(),!0);i||r.$set("value",n.text())}return function(e,n,r){var o="$selectController",a=n.parent(),s=a.data(o)||a.parent().data(o);s&&s.databound||(s=t),i?e.$watch(i,function(e,t){r.$set("value",e),t!==e&&s.removeOption(t),s.addOption(e,n)}):s.addOption(r.value,n),n.on("$destroy",function(){s.removeOption(r.value)})}}}}],La=g({restrict:"E",terminal:!1}),qa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},Fa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,o){if(o){var a,s=i.ngPattern||i.pattern;i.$observe("pattern",function(e){if(y(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,z(t));a=e||n,o.$validate()}),o.$validators.pattern=function(e){return o.$isEmpty(e)||v(a)||a.test(e)}}}}},Ua=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=f(e);i=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return 0>i||r.$isEmpty(t)||t.length<=i}}}}},Ba=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=f(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(rt(),mt(si),void Qr(t).ready(function(){J(t,Q)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(e,t){"use strict";function n(){function e(e,n){return t.extend(Object.create(e),n)}function n(e,t){var n=t.caseInsensitiveMatch,r={originalPath:e,regexp:e},i=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,n,r){var o="?"===r?r:null,a="*"===r?r:null;return i.push({name:n,optional:!!o}),t=t||"",""+(o?"":t)+"(?:"+(o?t:"")+(a&&"(.+?)"||"([^/]+)")+(o||"")+")"+(o||"")}).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",n?"i":""),r}var r={};this.when=function(e,i){var o=t.copy(i);if(t.isUndefined(o.reloadOnSearch)&&(o.reloadOnSearch=!0),t.isUndefined(o.caseInsensitiveMatch)&&(o.caseInsensitiveMatch=this.caseInsensitiveMatch),r[e]=t.extend(o,e&&n(e,o)),e){var a="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";r[a]=t.extend({redirectTo:e},n(a,o))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(n,i,o,a,c,l,u){function d(e,t){var n=t.keys,r={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var o=1,a=i.length;a>o;++o){var s=n[o-1],c=i[o];s&&c&&(r[s.name]=c)}return r}function f(e){var r=b.current;g=p(),v=g&&r&&g.$$route===r.$$route&&t.equals(g.pathParams,r.pathParams)&&!g.reloadOnSearch&&!$,v||!r&&!g||n.$broadcast("$routeChangeStart",g,r).defaultPrevented&&e&&e.preventDefault()}function m(){var e=b.current,r=g;v?(e.params=r.params,t.copy(e.params,o),n.$broadcast("$routeUpdate",e)):(r||e)&&($=!1,b.current=r,r&&r.redirectTo&&(t.isString(r.redirectTo)?i.path(h(r.redirectTo,r.params)).search(r.params).replace():i.url(r.redirectTo(r.pathParams,i.path(),i.search())).replace()),a.when(r).then(function(){if(r){var e,n,i=t.extend({},r.resolve);return t.forEach(i,function(e,n){i[n]=t.isString(e)?c.get(e):c.invoke(e,null,null,n)}),t.isDefined(e=r.template)?t.isFunction(e)&&(e=e(r.params)):t.isDefined(n=r.templateUrl)&&(t.isFunction(n)&&(n=n(r.params)),n=u.getTrustedResourceUrl(n),t.isDefined(n)&&(r.loadedTemplateUrl=n,e=l(n))),t.isDefined(e)&&(i.$template=e),a.all(i)}}).then(function(i){r==b.current&&(r&&(r.locals=i,t.copy(r.params,o)),n.$broadcast("$routeChangeSuccess",r,e))},function(t){r==b.current&&n.$broadcast("$routeChangeError",r,e,t)}))}function p(){var n,o;return t.forEach(r,function(r){!o&&(n=d(i.path(),r))&&(o=e(r,{params:t.extend({},i.search(),n),pathParams:n}),o.$$route=r)}),o||r[null]&&e(r[null],{params:{},pathParams:{}})}function h(e,n){var r=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)r.push(e);else{var i=e.match(/(\w+)(?:[?*])?(.*)/),o=i[1];r.push(n[o]),r.push(i[2]||""),delete n[o]}}),r.join("")}var g,v,$=!1,b={routes:r,reload:function(){$=!0,n.$evalAsync(function(){f(),m()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw s("norout","Tried updating route when with no current route");e=t.extend({},this.current.params,e),i.path(h(this.current.$$route.originalPath,e)),i.search(e)}};return n.$on("$locationChangeStart",f),n.$on("$locationChangeSuccess",m),b}]}function r(){this.$get=function(){return{}}}function i(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,o,a,s,c){function l(){m&&(r.cancel(m),m=null),d&&(d.$destroy(),d=null),f&&(m=r.leave(f),m.then(function(){m=null}),f=null)}function u(){var a=e.current&&e.current.locals,s=a&&a.$template;if(t.isDefined(s)){var u=i.$new(),m=e.current,g=c(u,function(e){r.enter(e,null,f||o).then(function(){!t.isDefined(p)||p&&!i.$eval(p)||n()}),l()});f=g,d=m.scope=u,d.$emit("$viewContentLoaded"),d.$eval(h)}else l()}var d,f,m,p=a.autoscroll,h=a.onload||"";i.$on("$routeChangeSuccess",u),u()}}}function o(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,i){var o=n.current,a=o.locals;i.html(a.$template);var s=e(i.contents());if(o.controller){a.$scope=r;var c=t(o.controller,a);o.controllerAs&&(r[o.controllerAs]=c),i.data("$ngControllerController",c),i.children().data("$ngControllerController",c)}s(r)}}}var a=t.module("ngRoute",["ng"]).provider("$route",n),s=t.$$minErr("ngRoute");a.provider("$routeParams",r),a.directive("ngView",i),a.directive("ngView",o),i.$inject=["$route","$anchorScroll","$animate"],o.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t){"use strict";function n(e,n,i){r.directive(e,["$parse","$swipe",function(r,o){var a=75,s=.3,c=30;return function(l,u,d){function f(e){if(!m)return!1;var t=Math.abs(e.y-m.y),r=(e.x-m.x)*n;return p&&a>t&&r>0&&r>c&&s>t/r}var m,p,h=r(d[e]),g=["touch"];t.isDefined(d.ngSwipeDisableMouse)||g.push("mouse"),o.bind(u,{start:function(e){m=e,p=!0},cancel:function(){p=!1},end:function(e,t){f(e)&&l.$apply(function(){u.triggerHandler(i),h(l,{$event:t})})}},g)}}])}var r=t.module("ngTouch",[]);r.factory("$swipe",[function(){function e(e){var t=e.touches&&e.touches.length?e.touches:[e],n=e.changedTouches&&e.changedTouches[0]||e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]||t[0].originalEvent||t[0];return{x:n.clientX,y:n.clientY}}function n(e,n){var r=[];return t.forEach(e,function(e){var t=i[e][n];t&&r.push(t)}),r.join(" ")}var r=10,i={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(t,i,o){var a,s,c,l,u=!1;o=o||["mouse","touch"],t.on(n(o,"start"),function(t){c=e(t),u=!0,a=0,s=0,l=c,i.start&&i.start(c,t)});var d=n(o,"cancel");d&&t.on(d,function(e){u=!1,i.cancel&&i.cancel(e)}),t.on(n(o,"move"),function(t){if(u&&c){var n=e(t);if(a+=Math.abs(n.x-l.x),s+=Math.abs(n.y-l.y),l=n,!(r>a&&r>s))return s>a?(u=!1,void(i.cancel&&i.cancel(t))):(t.preventDefault(),void(i.move&&i.move(n,t)))}}),t.on(n(o,"end"),function(t){u&&(u=!1,i.end&&i.end(e(t),t))})}}}]),r.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]),r.directive("ngClick",["$parse","$timeout","$rootElement",function(e,n,r){function i(e,t,n,r){return Math.abs(e-n)<h&&Math.abs(t-r)<h}function o(e,t,n){for(var r=0;r<e.length;r+=2)if(i(e[r],e[r+1],t,n))return e.splice(r,r+2),!0;return!1}function a(e){if(!(Date.now()-l>p)){var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].clientX,r=t[0].clientY;1>n&&1>r||d&&d[0]===n&&d[1]===r||(d&&(d=null),"label"===e.target.tagName.toLowerCase()&&(d=[n,r]),o(u,n,r)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur()))}}function s(e){var t=e.touches&&e.touches.length?e.touches:[e],r=t[0].clientX,i=t[0].clientY;u.push(r,i),n(function(){for(var e=0;e<u.length;e+=2)if(u[e]==r&&u[e+1]==i)return void u.splice(e,e+2)},p,!1)}function c(e,t){u||(r[0].addEventListener("click",a,!0),r[0].addEventListener("touchstart",s,!0),u=[]),l=Date.now(),o(u,e,t)}var l,u,d,f=750,m=12,p=2500,h=25,g="ng-click-active";return function(n,r,i){function o(){p=!1,r.removeClass(g)}var a,s,l,u,d=e(i.ngClick),p=!1;r.on("touchstart",function(e){p=!0,a=e.target?e.target:e.srcElement,3==a.nodeType&&(a=a.parentNode),r.addClass(g),s=Date.now();var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].originalEvent||t[0];l=n.clientX,u=n.clientY}),r.on("touchmove",function(){o()}),r.on("touchcancel",function(){o()}),r.on("touchend",function(e){var n=Date.now()-s,d=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],h=d[0].originalEvent||d[0],g=h.clientX,v=h.clientY,$=Math.sqrt(Math.pow(g-l,2)+Math.pow(v-u,2));p&&f>n&&m>$&&(c(g,v),a&&a.blur(),t.isDefined(i.disabled)&&i.disabled!==!1||r.triggerHandler("click",[e])),o()}),r.onclick=function(){},r.on("click",function(e,t){n.$apply(function(){d(n,{$event:t||e})})}),r.on("mousedown",function(){r.addClass(g)}),r.on("mousemove mouseup",function(){r.removeClass(g)})}}]),n("ngSwipeLeft",-1,"swipeleft"),n("ngSwipeRight",1,"swiperight")}(window,window.angular),function(e,t,n){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var e="$$ngAnimateChildren";return function(n,r,i){var o=i.ngAnimateChildren;t.isString(o)&&0===o.length?r.data(e,!0):n.$watch(o,function(t){r.data(e,!!t)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var n=t[0].body;return function(t){return e(function(){n.offsetWidth+1;t()})}}]).config(["$provide","$animateProvider",function(r,i){function o(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==g)return n}}function a(e){return e&&t.element(e)}function s(e){return t.element(o(e))}function c(e,t){return o(e)==o(t)}var l,u=t.noop,d=t.forEach,f=i.$$selectors,m=t.isArray,p=t.isString,h=t.isObject,g=1,v="$$ngAnimateState",$="$$ngAnimateChildren",b="ng-animate",y={running:!0};r.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(e,n,r,g,E,w,M,A,k,C){function x(e,t){var n=e.data(v)||{};return t&&(n.running=!0,n.structural=!0,e.data(v,n)),n.disabled||n.running&&n.structural}function T(e){var t,r=n.defer();return r.promise.$$cancelFn=function(){t&&t()},M.$$postDigest(function(){t=e(function(){r.resolve()})}),r.promise}function S(e){return h(e)?(e.tempClasses&&p(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e):void 0}function _(e,t,n){n=n||{};var r={};d(n,function(e,t){d(t.split(" "),function(t){r[t]=e})});var i=Object.create(null);d((e.attr("class")||"").split(/\s+/),function(e){i[e]=!0});var o=[],a=[];return d(t&&t.classes||[],function(e,t){var n=i[t],s=r[t]||{};e===!1?(n||"addClass"==s.event)&&a.push(t):e===!0&&(n&&"removeClass"!=s.event||o.push(t))}),o.length+a.length>0&&[o.join(" "),a.join(" ")]}function N(e){if(e){var t=[],n={},i=e.substr(1).split(".");(g.transitions||g.animations)&&t.push(r.get(f[""]));for(var o=0;o<i.length;o++){var a=i[o],s=f[a];s&&!n[a]&&(t.push(r.get(s)),n[a]=!0)}return t}}function O(e,n,r,i){function o(e,t){var n=e[t],r=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];return n||r?("leave"==t&&(r=n,n=null),w.push({event:t,fn:n}),b.push({event:t,fn:r}),!0):void 0}function a(t,n,o){function a(e){if(n){if((n[e]||u)(),++f<s.length)return;n=null}o()}var s=[];d(t,function(e){e.fn&&s.push(e)});var f=0;d(s,function(t,o){var s=function(){a(o)};switch(t.event){case"setClass":n.push(t.fn(e,c,l,s,i));break;case"animate":n.push(t.fn(e,r,i.from,i.to,s));break;case"addClass":n.push(t.fn(e,c||r,s,i));break;case"removeClass":n.push(t.fn(e,l||r,s,i));break;default:n.push(t.fn(e,s,i))}}),n&&0===n.length&&o()}var s=e[0];if(s){i&&(i.to=i.to||{},i.from=i.from||{});var c,l;m(r)&&(c=r[0],l=r[1],c?l?r=c+" "+l:(r=c,n="addClass"):(r=l,n="removeClass"));var f="setClass"==n,p=f||"addClass"==n||"removeClass"==n||"animate"==n,h=e.attr("class"),g=h+" "+r;if(L(g)){var v=u,$=[],b=[],y=u,E=[],w=[],M=(" "+g).replace(/\s+/g,".");return d(N(M),function(e){var t=o(e,n);!t&&f&&(o(e,"addClass"),o(e,"removeClass"))}),{node:s,event:n,className:r,isClassBased:p,isSetClassOperation:f,applyStyles:function(){i&&e.css(t.extend(i.from||{},i.to||{}))},before:function(e){v=e,a(b,$,function(){v=u,e()})},after:function(e){y=e,a(w,E,function(){y=u,e()})},cancel:function(){$&&(d($,function(e){(e||u)(!0)}),v(!0)),E&&(d(E,function(e){(e||u)(!0)}),y(!0))}}}}}function D(e,n,r,i,o,a,s,c){function f(t){var i="$animate:"+t;M&&M[i]&&M[i].length>0&&w(function(){r.triggerHandler(i,{event:e,className:n})})}function m(){f("before")}function p(){f("after")}function h(){f("close"),c()}function g(){g.hasBeenRun||(g.hasBeenRun=!0,a())}function $(){if(!$.hasBeenRun){E&&E.applyStyles(),$.hasBeenRun=!0,s&&s.tempClasses&&d(s.tempClasses,function(e){l.removeClass(r,e)});var t=r.data(v);t&&(E&&E.isClassBased?R(r,n):(w(function(){var t=r.data(v)||{};D==t.index&&R(r,n,e)}),r.data(v,t))),h()}}var y=u,E=O(r,e,n,s);if(!E)return g(),m(),p(),$(),y;e=E.event,n=E.className;var M=t.element._data(E.node);if(M=M&&M.events,i||(i=o?o.parent():r.parent()),j(r,i))return g(),m(),p(),$(),y;var A=r.data(v)||{},k=A.active||{},C=A.totalActive||0,x=A.last,T=!1;if(C>0){var S=[];if(E.isClassBased){if("setClass"==x.event)S.push(x),R(r,n);else if(k[n]){var _=k[n];_.event==e?T=!0:(S.push(_),R(r,n))}}else if("leave"==e&&k["ng-leave"])T=!0;else{for(var N in k)S.push(k[N]);A={},R(r,!0)}S.length>0&&d(S,function(e){e.cancel()})}if(!E.isClassBased||E.isSetClassOperation||"animate"==e||T||(T="addClass"==e==r.hasClass(n)),T)return g(),m(),p(),h(),y;k=A.active||{},C=A.totalActive||0,"leave"==e&&r.one("$destroy",function(){var e=t.element(this),n=e.data(v);if(n){var r=n.active["ng-leave"];r&&(r.cancel(),R(e,"ng-leave"))}}),l.addClass(r,b),s&&s.tempClasses&&d(s.tempClasses,function(e){l.addClass(r,e)});var D=P++;return C++,k[n]=E,r.data(v,{last:E,active:k,index:D,totalActive:C}),m(),E.before(function(t){var i=r.data(v);t=t||!i||!i.active[n]||E.isClassBased&&i.active[n].event!=e,g(),t===!0?$():(p(),E.after($))}),E.cancel}function H(e){var n=o(e);if(n){var r=t.isFunction(n.getElementsByClassName)?n.getElementsByClassName(b):n.querySelectorAll("."+b);d(r,function(e){e=t.element(e);var n=e.data(v);n&&n.active&&d(n.active,function(e){e.cancel()})})}}function R(e,t){if(c(e,E))y.disabled||(y.running=!1,y.structural=!1);else if(t){var n=e.data(v)||{},r=t===!0;!r&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]),(r||!n.totalActive)&&(l.removeClass(e,b),e.removeData(v))}}function j(e,n){if(y.disabled)return!0;if(c(e,E))return y.running;var r,i,o;do{if(0===n.length)break;var a=c(n,E),s=a?y:n.data(v)||{};if(s.disabled)return!0;if(a&&(o=!0),r!==!1){var l=n.data($);t.isDefined(l)&&(r=l)}i=i||s.running||s.last&&!s.last.isClassBased}while(n=n.parent());return!o||!r&&i}l=C,E.data(v,y);var I=M.$watch(function(){return k.totalPendingRequests},function(e){0===e&&(I(),M.$$postDigest(function(){M.$$postDigest(function(){y.running=!1})}))}),P=0,V=i.classNameFilter(),L=V?function(e){return V.test(e)}:function(){return!0};return{animate:function(e,t,n,r,i){return r=r||"ng-inline-animate",i=S(i)||{},i.from=n?t:null,i.to=n?n:t,T(function(t){return D("animate",r,s(e),null,null,u,i,t)})},enter:function(n,r,i,o){return o=S(o),n=t.element(n),r=a(r),i=a(i),x(n,!0),e.enter(n,r,i),T(function(e){return D("enter","ng-enter",s(n),r,i,u,o,e)})},leave:function(n,r){return r=S(r),n=t.element(n),H(n),x(n,!0),T(function(t){return D("leave","ng-leave",s(n),null,null,function(){e.leave(n)},r,t)})},move:function(n,r,i,o){return o=S(o),n=t.element(n),r=a(r),i=a(i),H(n),x(n,!0),e.move(n,r,i),T(function(e){return D("move","ng-move",s(n),r,i,u,o,e)})},addClass:function(e,t,n){return this.setClass(e,t,[],n)},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},setClass:function(n,r,i,a){a=S(a);var c="$$animateClasses";if(n=t.element(n),n=s(n),x(n))return e.$$setClassImmediately(n,r,i,a);var l,u=n.data(c),f=!!u;return u||(u={},u.classes={}),l=u.classes,r=m(r)?r:r.split(" "),d(r,function(e){e&&e.length&&(l[e]=!0)}),i=m(i)?i:i.split(" "),d(i,function(e){e&&e.length&&(l[e]=!1)}),f?(a&&u.options&&(u.options=t.extend(u.options||{},a)),u.promise):(n.data(c,u={classes:l,options:a}),u.promise=T(function(t){var r=n.parent(),i=o(n),a=i.parentNode;if(!a||a.$$NG_REMOVED||i.$$NG_REMOVED)return void t();var s=n.data(c);n.removeData(c);var l=n.data(v)||{},u=_(n,s,l.active);return u?D("setClass",u,n,r,null,function(){u[0]&&e.$$addClassImmediately(n,u[0]),u[1]&&e.$$removeClassImmediately(n,u[1])},s.options,t):t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)R(t);else{var n=t.data(v)||{};n.disabled=!0,t.data(v,n)}break;case 1:y.disabled=!e;break;default:e=!y.disabled}return!!e}}}]),i.register("",["$window","$sniffer","$timeout","$$animateReflow",function(r,i,a,s){function c(){R||(R=s(function(){Y=[],R=null,W={}}))}function f(e,t){R&&R(),Y.push(t),R=s(function(){d(Y,function(e){e()}),Y=[],R=null,W={}})}function h(e,n){var r=o(e);e=t.element(r),Z.push(e);var i=Date.now()+n;X>=i||(a.cancel(K),X=i,K=a(function(){v(Z),Z=[]},n,!1))}function v(e){d(e,function(e){var t=e.data(F);t&&d(t.closeAnimationFns,function(e){e()})})}function $(e,t){var n=t?W[t]:null;if(!n){var i=0,o=0,a=0,s=0;d(e,function(e){if(e.nodeType==g){var t=r.getComputedStyle(e)||{},n=t[_+j];i=Math.max(b(n),i);var c=t[_+P];o=Math.max(b(c),o);{t[O+P]}s=Math.max(b(t[O+P]),s);var l=b(t[O+j]);l>0&&(l*=parseInt(t[O+V],10)||1),a=Math.max(l,a)}}),n={total:0,transitionDelay:o,transitionDuration:i,animationDelay:s,animationDuration:a},t&&(W[t]=n)}return n}function b(e){var t=0,n=p(e)?e.split(/\s*,\s*/):[];return d(n,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function y(e){var t=e.parent(),n=t.data(q);return n||(t.data(q,++G),n=G),n+"-"+o(e).getAttribute("class")}function E(e,t,n,r){var i=["ng-enter","ng-leave","ng-move"].indexOf(n)>=0,a=y(t),s=a+" "+n,c=W[s]?++W[s].total:0,u={};if(c>0){var d=n+"-stagger",f=a+" "+d,m=!W[f];m&&l.addClass(t,d),u=$(t,f),m&&l.removeClass(t,d)}l.addClass(t,n);var p=t.data(F)||{},h=$(t,s),g=h.transitionDuration,v=h.animationDuration;if(i&&0===g&&0===v)return l.removeClass(t,n),!1;var b=r||i&&g>0,E=v>0&&u.animationDelay>0&&0===u.animationDuration,w=p.closeAnimationFns||[];t.data(F,{stagger:u,cacheKey:s,running:p.running||0,itemIndex:c,blockTransition:b,closeAnimationFns:w});var k=o(t);return b&&(M(k,!0),r&&t.css(r)),E&&A(k,!0),!0}function w(e,t,n,r,i){function s(){t.off(P,c),l.removeClass(t,m),l.removeClass(t,p),j&&a.cancel(j),T(t,n);var e=o(t);for(var r in v)e.style.removeProperty(v[r])}function c(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),i=parseFloat(t.elapsedTime.toFixed(U));Math.max(n-I,0)>=O&&i>=S&&r()}var u=o(t),f=t.data(F);if(-1==u.getAttribute("class").indexOf(n)||!f)return void r();var m="",p="";d(n.split(" "),function(e,t){var n=(t>0?" ":"")+e;m+=n+"-active",p+=n+"-pending"});var g="",v=[],b=f.itemIndex,y=f.stagger,E=0;if(b>0){var w=0;y.transitionDelay>0&&0===y.transitionDuration&&(w=y.transitionDelay*b);var k=0;y.animationDelay>0&&0===y.animationDuration&&(k=y.animationDelay*b,v.push(H+"animation-play-state")),E=Math.round(100*Math.max(w,k))/100}E||(l.addClass(t,m),f.blockTransition&&M(u,!1));var C=f.cacheKey+" "+m,x=$(t,C),S=Math.max(x.transitionDuration,x.animationDuration);if(0===S)return l.removeClass(t,m),T(t,n),void r();!E&&i&&Object.keys(i).length>0&&(x.transitionDuration||(t.css("transition",x.animationDuration+"s linear all"),v.push("transition")),t.css(i));var _=Math.max(x.transitionDelay,x.animationDelay),O=_*z;if(v.length>0){var R=u.getAttribute("style")||"";";"!==R.charAt(R.length-1)&&(R+=";"),u.setAttribute("style",R+" "+g)}var j,I=Date.now(),P=D+" "+N,V=(_+S)*B,L=(E+V)*z;return E>0&&(l.addClass(t,p),j=a(function(){j=null,x.transitionDuration>0&&M(u,!1),x.animationDuration>0&&A(u,!1),l.addClass(t,m),l.removeClass(t,p),i&&(0===x.transitionDuration&&t.css("transition",x.animationDuration+"s linear all"),t.css(i),v.push("transition"))},E*z,!1)),t.on(P,c),f.closeAnimationFns.push(function(){s(),r()}),f.running++,h(t,L),s}function M(e,t){e.style[_+I]=t?"none":""}function A(e,t){e.style[O+L]=t?"paused":""}function k(e,t,n,r){return E(e,t,n,r)?function(e){e&&T(t,n)}:void 0}function C(e,t,n,r,i){return t.data(F)?w(e,t,n,r,i):(T(t,n),void r())}function x(e,t,n,r,i){var o=k(e,t,n,i.from);if(!o)return c(),void r();var a=o;return f(t,function(){a=C(e,t,n,r,i.to)}),function(e){(a||u)(e)}}function T(e,t){l.removeClass(e,t);var n=e.data(F);n&&(n.running&&n.running--,n.running&&0!==n.running||e.removeData(F))}function S(e,t){var n="";return e=m(e)?e:e.split(/\s+/),d(e,function(e,r){e&&e.length>0&&(n+=(r>0?" ":"")+e+t)}),n}var _,N,O,D,H="";e.ontransitionend===n&&e.onwebkittransitionend!==n?(H="-webkit-",_="WebkitTransition",N="webkitTransitionEnd transitionend"):(_="transition",N="transitionend"),e.onanimationend===n&&e.onwebkitanimationend!==n?(H="-webkit-",O="WebkitAnimation",D="webkitAnimationEnd animationend"):(O="animation",D="animationend");var R,j="Duration",I="Property",P="Delay",V="IterationCount",L="PlayState",q="$$ngAnimateKey",F="$$ngAnimateCSS3Data",U=3,B=1.5,z=1e3,W={},G=0,Y=[],K=null,X=0,Z=[];return{animate:function(e,t,n,r,i,o){return o=o||{},o.from=n,o.to=r,x("animate",e,t,i,o)},enter:function(e,t,n){return n=n||{},x("enter",e,"ng-enter",t,n)},leave:function(e,t,n){return n=n||{},x("leave",e,"ng-leave",t,n)},move:function(e,t,n){return n=n||{},x("move",e,"ng-move",t,n)},beforeSetClass:function(e,t,n,r,i){i=i||{};var o=S(n,"-remove")+" "+S(t,"-add"),a=k("setClass",e,o,i.from);return a?(f(e,r),a):(c(),void r())},beforeAddClass:function(e,t,n,r){r=r||{};var i=k("addClass",e,S(t,"-add"),r.from);return i?(f(e,n),i):(c(),void n())},beforeRemoveClass:function(e,t,n,r){r=r||{};var i=k("removeClass",e,S(t,"-remove"),r.from);return i?(f(e,n),i):(c(),void n())},setClass:function(e,t,n,r,i){i=i||{},n=S(n,"-remove"),t=S(t,"-add");var o=n+" "+t;return C("setClass",e,o,r,i.to)},addClass:function(e,t,n,r){return r=r||{},C("addClass",e,S(t,"-add"),n,r.to)},removeClass:function(e,t,n,r){return r=r||{},C("removeClass",e,S(t,"-remove"),n,r.to)}}}])}])}(window,window.angular),function(e,t){"use strict";function n(){function e(e,t,r){return function(i,o,a){var s=a.$normalize(t);n[s]&&!a[s]&&i.$watch(a[e],function(e){r&&(e=!e),o.attr(t,e)})}}var n={ariaHidden:!0,ariaChecked:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaMultiline:!0,ariaValue:!0,tabindex:!0,bindKeypress:!0};this.config=function(e){n=t.extend(n,e)},this.$get=function(){return{config:function(e){return n[e]},$$watchExpr:e}}}var r=t.module("ngAria",["ng"]).provider("$aria",n);r.directive("ngShow",["$aria",function(e){return e.$$watchExpr("ngShow","aria-hidden",!0)}]).directive("ngHide",["$aria",function(e){return e.$$watchExpr("ngHide","aria-hidden",!1)}]).directive("ngModel",["$aria",function(e){function t(t,n,r){return e.config(n)&&!r.attr(t)}function n(e,t){var n=e.type,r=e.role;return"checkbox"===(n||r)||"menuitemcheckbox"===r?"checkbox":"radio"===(n||r)||"menuitemradio"===r?"radio":"range"===n||"progressbar"===r||"slider"===r?"range":"textbox"===(n||r)||"TEXTAREA"===t[0].nodeName?"multiline":""}return{restrict:"A",require:"?ngModel",link:function(r,i,o,a){function s(){return a.$modelValue}function c(){return d?(d=!1,function(e){var t=e===o.value;i.attr("aria-checked",t),i.attr("tabindex",0-!t)}):function(e){i.attr("aria-checked",e===o.value)}}function l(e){i.attr("aria-checked",!!e)}var u=n(o,i),d=t("tabindex","tabindex",i);switch(u){case"radio":case"checkbox":t("aria-checked","ariaChecked",i)&&r.$watch(s,"radio"===u?c():l);break;case"range":e.config("ariaValue")&&(o.min&&!i.attr("aria-valuemin")&&i.attr("aria-valuemin",o.min),o.max&&!i.attr("aria-valuemax")&&i.attr("aria-valuemax",o.max),i.attr("aria-valuenow")||r.$watch(s,function(e){i.attr("aria-valuenow",e)}));break;case"multiline":t("aria-multiline","ariaMultiline",i)&&i.attr("aria-multiline",!0)}d&&i.attr("tabindex",0),a.$validators.required&&t("aria-required","ariaRequired",i)&&r.$watch(function(){return a.$error.required},function(e){i.attr("aria-required",!!e)}),t("aria-invalid","ariaInvalid",i)&&r.$watch(function(){return a.$invalid},function(e){i.attr("aria-invalid",!!e)})}}}]).directive("ngDisabled",["$aria",function(e){return e.$$watchExpr("ngDisabled","aria-disabled")}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(e,t){t.attr("aria-live")||t.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(e,t){return{restrict:"A",compile:function(n,r){var i=t(r.ngClick,null,!0);return function(t,n,r){function o(e,t){return-1!==t.indexOf(e[0].nodeName)?!0:void 0}e.config("tabindex")&&!n.attr("tabindex")&&n.attr("tabindex",0),e.config("bindKeypress")&&!r.ngKeypress&&o(n,["DIV","LI"])&&n.on("keypress",function(e){function n(){i(t,{$event:e})}(32===e.keyCode||13===e.keyCode)&&t.$apply(n)})}}}}]).directive("ngDblclick",["$aria",function(e){return function(t,n){e.config("tabindex")&&!n.attr("tabindex")&&n.attr("tabindex",0)}}])}(window,window.angular),angular.module("ngMaterial",["ng","ngAnimate","ngAria","material.core","material.core.theming.palette","material.core.theming","material.components.backdrop","material.components.bottomSheet","material.components.button","material.components.card","material.components.checkbox","material.components.content","material.components.dialog","material.components.divider","material.components.icon","material.components.input","material.components.list","material.components.progressCircular","material.components.progressLinear","material.components.radioButton","material.components.sidenav","material.components.slider","material.components.sticky","material.components.subheader","material.components.swipe","material.components.switch","material.components.tabs","material.components.textField","material.components.toast","material.components.toolbar","material.components.tooltip","material.components.whiteframe"]),function(){"use strict";function e(e,n){e.decorator("$$rAF",["$delegate",t]),n.theme("default").primaryPalette("indigo").accentPalette("pink").warnPalette("red").backgroundPalette("grey")}function t(e){return e.throttle=function(t){var n,r,i,o;return function(){n=arguments,o=this,i=t,r||(r=!0,e(function(){i.apply(o,n),r=!1}))}},e}angular.module("material.core",["material.core.theming"]).config(e),e.$inject=["$provide","$mdThemingProvider"]}(),function(){"use strict";function e(e,t){function n(e){return r?"webkit"+e.charAt(0).toUpperCase()+e.substring(1):e}var r=/webkit/i.test(t.vendorPrefix);return{KEY_CODE:{ENTER:13,ESCAPE:27,SPACE:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40},CSS:{TRANSITIONEND:"transitionend"+(r?" webkitTransitionEnd":""),ANIMATIONEND:"animationend"+(r?" webkitAnimationEnd":""),TRANSFORM:n("transform"),TRANSITION:n("transition"),TRANSITION_DURATION:n("transitionDuration"),ANIMATION_PLAY_STATE:n("animationPlayState"),ANIMATION_DURATION:n("animationDuration"),ANIMATION_NAME:n("animationName"),ANIMATION_TIMING:n("animationTimingFunction"),ANIMATION_DIRECTION:n("animationDirection")},MEDIA:{sm:"(max-width: 600px)","gt-sm":"(min-width: 600px)",md:"(min-width: 600px) and (max-width: 960px)","gt-md":"(min-width: 960px)",lg:"(min-width: 960px) and (max-width: 1200px)","gt-lg":"(min-width: 1200px)"}}}angular.module("material.core").factory("$mdConstant",e),e.$inject=["$$rAF","$sniffer"]}(),function(){function e(e,t){function n(){return[].concat(v)}function r(){return v.length}function i(e){return v.length&&e>-1&&e<v.length}function o(e){return e?i(d(e)+1):!1}function a(e){return e?i(d(e)-1):!1}function s(e){return i(e)?v[e]:null}function c(e,t){return v.filter(function(n){return n[e]===t})}function l(e,t){return e?(angular.isNumber(t)||(t=v.length),v.splice(t,0,e),d(e)):-1}function u(e){f(e)&&v.splice(d(e),1)}function d(e){return v.indexOf(e)}function f(e){return e&&d(e)>-1}function m(){return v.length?v[0]:null}function p(){return v.length?v[v.length-1]:null}function h(e,n,r,o){r=r||g;var a=d(n);if(!i(a))return null;var s=a+(e?-1:1),c=null;return i(s)?c=v[s]:t&&(c=e?p():m(),s=d(c)),null===c||s===o?null:(angular.isUndefined(o)&&(o=s),r(c)?c:h(e,c,r,o))}var g=function(){return!0};t=!!t;var v=e||[];return{items:n,count:r,inRange:i,contains:f,indexOf:d,itemAt:s,findBy:c,add:l,remove:u,first:m,last:p,next:angular.bind(null,h,!1),previous:angular.bind(null,h,!0),hasPrevious:a,hasNext:o}}angular.module("material.core").config(["$provide",function(t){t.decorator("$mdUtil",["$delegate",function(t){return t.iterator=e,t}])}])}(),angular.module("material.core").factory("$mdMedia",mdMediaFactory),mdMediaFactory.$inject=["$mdConstant","$rootScope","$window"],function(){"use strict";
var e=["0","0","0"];angular.module("material.core").factory("$mdUtil",["$document","$timeout",function(t,n){var r;return r={now:window.performance?angular.bind(window.performance,window.performance.now):Date.now,elementRect:function(e,t){var n=e[0];t=t||n.offsetParent||document.body,t=t[0]||t;var r=n.getBoundingClientRect(),i=t.getBoundingClientRect();return{left:r.left-i.left+t.scrollLeft,top:r.top-i.top+t.scrollTop,width:r.width,height:r.height}},fakeNgModel:function(){return{$fake:!0,$setViewValue:function(e){this.$viewValue=e,this.$render(e),this.$viewChangeListeners.forEach(function(e){e()})},$isEmpty:function(e){return 0===(""+e).length},$parsers:[],$formatters:[],$viewChangeListeners:[],$render:angular.noop}},debounce:function(e,t,r,i){var o;return function(){var a=r,s=Array.prototype.slice.call(arguments);n.cancel(o),o=n(function(){o=void 0,e.apply(a,s)},t||10,i)}},throttle:function(e,t){var n;return function(){var i=this,o=arguments,a=r.now();(!n||a-n>t)&&(e.apply(i,o),n=a)}},nextUid:function(){for(var t,n=e.length;n;){if(n--,t=e[n].charCodeAt(0),57==t)return e[n]="A",e.join("");if(90!=t)return e[n]=String.fromCharCode(t+1),e.join("");e[n]="0"}return e.unshift("0"),e.join("")},disconnectScope:function(e){if(e&&e.$root!==e&&!e.$$destroyed){var t=e.$parent;e.$$disconnected=!0,t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$$nextSibling=e.$$prevSibling=null}},reconnectScope:function(e){if(e&&e.$root!==e&&e.$$disconnected){var t=e,n=t.$parent;t.$$disconnected=!1,t.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=t,n.$$childTail=t):n.$$childHead=n.$$childTail=t}},getClosest:function(e,t){t=t.toUpperCase();do if(e.nodeName===t)return e;while(e=e.parentNode);return null}}}]),angular.element.prototype.focus=angular.element.prototype.focus||function(){return this.length&&this[0].focus(),this},angular.element.prototype.blur=angular.element.prototype.blur||function(){return this.length&&this[0].blur(),this}}(),function(){"use strict";function e(e,t,n){function r(e,n,r){var i=e[0];i.hasAttribute(n)||a(i,n)||(r=angular.isString(r)&&r.trim()||"",r.length?e.attr(n,r):t.warn('ARIA: Attribute "',n,'", required for accessibility, is missing on node:',i))}function i(t,n,i){e(function(){r(t,n,i())})}function o(e,t){i(e,t,function(){return e.text().trim()})}function a(e,t){function r(e){var t=e.currentStyle?e.currentStyle:n.getComputedStyle(e);return"none"===t.display}var i=e.hasChildNodes(),o=!1;if(i)for(var a=e.childNodes,s=0;s<a.length;s++){var c=a[s];1===c.nodeType&&c.hasAttribute(t)&&(r(c)||(o=!0))}return o}return{expect:r,expectAsync:i,expectWithText:o}}angular.module("material.core").service("$mdAria",e),e.$inject=["$$rAF","$log","$window"]}(),function(){"use strict";function e(e,t,n,r,i,o){this.compile=function(a){var s=a.templateUrl,c=a.template||"",l=a.controller,u=a.controllerAs,d=a.resolve||{},f=a.locals||{},m=a.transformTemplate||angular.identity,p=a.bindToController;return angular.forEach(d,function(e,t){d[t]=angular.isString(e)?n.get(e):n.invoke(e)}),angular.extend(d,f),d.$template=s?t.get(s,{cache:o}).then(function(e){return e.data}):e.when(c),e.all(d).then(function(e){var t=m(e.$template),n=angular.element("<div>").html(t.trim()).contents(),o=r(n);return{locals:e,element:n,link:function(t){if(e.$scope=t,l){var r=i(l,e);p&&angular.extend(r,e),n.data("$ngControllerController",r),n.children().data("$ngControllerController",r),u&&(t[u]=r)}return o(t)}}})}}angular.module("material.core").service("$mdCompiler",e),e.$inject=["$q","$http","$injector","$compile","$controller","$templateCache"]}(),function(){"use strict";function e(e,t){var n;for(var r in c)n=c[r],"start"===e&&n.cancel(),n[e](t,g)}function t(t){if(!g){var n=+Date.now();v&&!i(t,v)&&n-v.endTime<1500||(g=s(t),e("start",t))}}function n(t){g&&i(t,g)&&(a(t,g),e("move",t))}function r(t){g&&i(t,g)&&(a(t,g),g.endTime=+Date.now(),e("end",t),v=g,g=null)}function i(e,t){return e&&t&&e.type.charAt(0)===t.type}function o(e){return e=e.originalEvent||e,e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0]||e}function a(e,t){var n=o(e),r=t.x=n.pageX,i=t.y=n.pageY;t.distanceX=r-t.startX,t.distanceY=i-t.startY,t.distance=Math.sqrt(t.distanceX*t.distanceX+t.distanceY*t.distanceY),t.directionX=t.distanceX>0?"right":t.distanceX<0?"left":"",t.directionY=t.distanceY>0?"up":t.distanceY<0?"down":"",t.duration=+Date.now()-t.startTime,t.velocityX=t.distanceX/t.duration,t.velocityY=t.distanceY/t.duration}function s(e){var t=o(e),n={startTime:+Date.now(),target:e.target,type:e.type.charAt(0)};return n.startX=n.x=t.pageX,n.startY=n.y=t.pageY,n}var c,l="mousedown touchstart pointerdown",u="mousemove touchmove pointermove",d="mouseup mouseleave touchend touchcancel pointerup pointercancel";document.contains||(document.contains=function(e){return document.body.contains(e)});var f=navigator.userAgent||navigator.vendor||window.opera,m=f.match(/iPad/i)||f.match(/iPhone/i)||f.match(/iPod/i),p=f.match(/Android/i),h=m||p;h&&document.addEventListener("click",function(e){var t=0===e.clientX&&0===e.clientY;t||e.$material||(e.preventDefault(),e.stopPropagation())},!0),angular.element(document).on(l,t).on(u,n).on(d,r).on("$$mdGestureReset",function(){v=g=null});var g,v;angular.module("material.core").run(["$mdGesture",function(){}]).factory("$mdGesture",["$$MdGestureHandler","$$rAF","$timeout",function(e,t,n){function r(t,n){var r=new e(t);return angular.extend(r,n),c[t]=r,o}function i(e,t,n){var r=c[t.replace(/^\$md./,"")];if(!r)throw new Error("Failed to register element with handler "+t+". Available handlers: "+Object.keys(c).join(", "));return r.registerElement(e,n)}c={},h&&r("click",{options:{maxDistance:6},onEnd:function(e,t){t.distance<this.state.options.maxDistance&&this.dispatchEvent(e,"click",null,e)}}),r("press",{onStart:function(e){this.dispatchEvent(e,"$md.pressdown")},onEnd:function(e){this.dispatchEvent(e,"$md.pressup")}}),r("hold",{options:{maxDistance:6,delay:500},onCancel:function(){n.cancel(this.state.timeout)},onStart:function(e,t){return this.state.registeredParent?(this.state.pos={x:t.x,y:t.y},void(this.state.timeout=n(angular.bind(this,function(){this.dispatchEvent(e,"$md.hold"),this.cancel()}),this.state.options.delay,!1))):this.cancel()},onMove:function(e,t){e.preventDefault();var n=this.state.pos.x-t.x,r=this.state.pos.y-t.y;Math.sqrt(n*n+r*r)>this.options.maxDistance&&this.cancel()},onEnd:function(){this.onCancel()}}),r("drag",{options:{minDistance:6,horizontal:!0},onStart:function(){this.state.registeredParent||this.cancel()},onMove:function(e,t){var n,r;e.preventDefault(),this.state.dragPointer?this.dispatchDragMove(e):(this.state.options.horizontal?(n=Math.abs(t.distanceX)>this.state.options.minDistance,r=Math.abs(t.distanceY)>1.5*this.state.options.minDistance):(n=Math.abs(t.distanceY)>this.state.options.minDistance,r=Math.abs(t.distanceX)>1.5*this.state.options.minDistance),n?(this.state.dragPointer=s(e),a(e,this.state.dragPointer),this.dispatchEvent(e,"$md.dragstart",this.state.dragPointer)):r&&this.cancel())},dispatchDragMove:t.throttle(function(e){this.state.isRunning&&(a(e,this.state.dragPointer),this.dispatchEvent(e,"$md.drag",this.state.dragPointer))}),onEnd:function(e){this.state.dragPointer&&(a(e,this.state.dragPointer),this.dispatchEvent(e,"$md.dragend",this.state.dragPointer))}}),r("swipe",{options:{minVelocity:.65,minDistance:10},onEnd:function(e,t){if(Math.abs(t.velocityX)>this.state.options.minVelocity&&Math.abs(t.distanceX)>this.state.options.minDistance){var n="left"==t.directionX?"$md.swipeleft":"$md.swiperight";this.dispatchEvent(e,n)}}});var o;return o={handler:r,register:i}}]).factory("$$MdGestureHandler",["$$rAF",function(){function e(e){this.name=e,this.state={}}function t(e,t,n,r){n=n||g;var i;"click"===t?(i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget||null)):(i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,{})),i.$material=!0,i.pointer=n,i.srcEvent=e,n.target.dispatchEvent(i)}e.prototype={onStart:angular.noop,onMove:angular.noop,onEnd:angular.noop,onCancel:angular.noop,options:{},dispatchEvent:t,start:function(e,t){if(!this.state.isRunning){var n=this.getNearestParent(e.target),r=n&&n.$mdGesture[this.name]||{};this.state={isRunning:!0,options:angular.extend({},this.options,r),registeredParent:n},this.onStart(e,t)}},move:function(e,t){this.state.isRunning&&this.onMove(e,t)},end:function(e,t){this.state.isRunning&&(this.onEnd(e,t),this.state.isRunning=!1)},cancel:function(e,t){this.onCancel(e,t),this.state={}},getNearestParent:function(e){for(var t=e;t;){if((t.$mdGesture||{})[this.name])return t;t=t.parentNode}},registerElement:function(e,t){function n(){delete e[0].$mdGesture[r.name],e.off("$destroy",n)}var r=this;return e[0].$mdGesture=e[0].$mdGesture||{},e[0].$mdGesture[this.name]=t||{},e.on("$destroy",n),n}};return e}])}(),function(){"use strict";function e(){function e(e){function t(e){return o.optionsFactory=e.options,o.methods=(e.methods||[]).concat(i),a}function n(t,n){if(n=n||{},n.methods=n.methods||[],n.options=n.options||function(){return{}},/^cancel|hide|show$/.test(t))throw new Error("Preset '"+t+"' in "+e+" is reserved!");if(n.methods.indexOf("_options")>-1)throw new Error("Method '_options' in "+e+" is reserved!");return o.presets[t]={methods:n.methods.concat(i),optionsFactory:n.options,argOption:n.argOption},a}function r(t,n,r){function i(e){return e&&e._options&&(e=e._options),l.show(angular.extend({},c,e))}function a(t,n){var i={};return i[e]=u,r.invoke(t||function(){return n},{},i)}var s,c,l=t(),u={hide:l.hide,cancel:l.cancel,show:i};return s=o.methods||[],c=a(o.optionsFactory,{}),angular.forEach(o.presets,function(e,t){function n(e){this._options=angular.extend({},r,e)}var r=a(e.optionsFactory,{}),i=(e.methods||[]).concat(s);if(angular.extend(r,{$type:t}),angular.forEach(i,function(e){n.prototype[e]=function(t){return this._options[e]=t,this}}),e.argOption){var o="show"+t.charAt(0).toUpperCase()+t.slice(1);u[o]=function(e){var n=u[t](e);return u.show(n)}}u[t]=function(t){return arguments.length&&e.argOption&&!angular.isObject(t)&&!angular.isArray(t)?(new n)[e.argOption](t):new n(t)}}),u}var i=["onHide","onShow","onRemove"],o={presets:{}},a={setDefaults:t,addPreset:n,$get:r};return a.addPreset("build",{methods:["controller","controllerAs","resolve","template","templateUrl","themable","transformTemplate","parent"]}),r.$inject=["$$interimElement","$animate","$injector"],a}function t(e,t,n,r,i,o,a,s,c){function l(e){return e&&angular.isString(e)?e.replace(/\{\{/g,u).replace(/}}/g,d):e}var u=a.startSymbol(),d=a.endSymbol(),f="{{"===u&&"}}"===d,m=f?angular.identity:l;return function(){function a(e){p.length&&f.cancel();var t=new d(e);return p.push(t),t.show().then(function(){return t.deferred.promise})}function l(e){var n=p.shift();return n&&n.remove().then(function(){n.deferred.resolve(e)}),n?n.deferred.promise:t.when(e)}function u(e){var n=p.shift();return n&&n.remove().then(function(){n.deferred.reject(e)}),n?n.deferred.promise:t.reject(e)}function d(a){var l,u,d;return a=a||{},a=angular.extend({scope:a.scope||n.$new(a.isolateScope),onShow:function(e,t,n){return o.enter(t,n.parent)},onRemove:function(e,n){return n&&o.leave(n)||t.when()}},a),a.template&&(a.template=m(a.template)),l={options:a,deferred:t.defer(),show:function(){return s.compile(a).then(function(n){function o(){a.hideDelay&&(u=r(f.cancel,a.hideDelay))}angular.extend(n.locals,l.options),angular.isString(a.parent)?a.parent=angular.element(e[0].querySelector(a.parent)):a.parent||(a.parent=i.find("body"),a.parent.length||(a.parent=i)),d=n.link(a.scope),a.themable&&c(d);var s=a.onShow(a.scope,d,a);return t.when(s).then(function(){(a.onComplete||angular.noop)(a.scope,d,a),o()})})},cancelTimeout:function(){u&&(r.cancel(u),u=void 0)},remove:function(){l.cancelTimeout();var e=a.onRemove(a.scope,d,a);return t.when(e).then(function(){a.scope.$destroy()})}}}var f,p=[];return f={show:a,hide:l,cancel:u}}}return e.$get=t,t.$inject=["$document","$q","$rootScope","$timeout","$rootElement","$animate","$interpolate","$mdCompiler","$mdTheming"],e}angular.module("material.core").provider("$$interimElement",e)}(),function(){"use strict";function e(e,t){function n(e){return e&&""!==e}var r,i=[],o={};return r={notFoundError:function(t){e.error("No instance found for handle",t)},getInstances:function(){return i},get:function(e){if(!n(e))return null;var t,r,o;for(t=0,r=i.length;r>t;t++)if(o=i[t],o.$$mdHandle===e)return o;return null},register:function(e,t){function n(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}function r(){var n=o[t];n&&(n.resolve(e),delete o[t])}return t?(e.$$mdHandle=t,i.push(e),r(),n):angular.noop},when:function(e){if(n(e)){var i=t.defer(),a=r.get(e);return a?i.resolve(a):o[e]=i,i.promise}return t.reject("Invalid `md-component-id` value.")}}}angular.module("material.core").factory("$mdComponentRegistry",e),e.$inject=["$log","$q"]}(),function(){"use strict";function e(e){return{controller:angular.noop,link:function(t,n,r){r.hasOwnProperty("mdInkRippleCheckbox")?e.attachCheckboxBehavior(t,n):e.attachButtonBehavior(t,n)}}}function t(e,t){function n(e,t,n){return o(e,t,angular.extend({isFAB:t.hasClass("md-fab"),isMenuItem:t.hasClass("md-menu-item"),center:!1,dimBackground:!0},n))}function r(e,t,n){return o(e,t,angular.extend({center:!0,dimBackground:!1,fitRipple:!0},n))}function i(e,t,n){return o(e,t,angular.extend({center:!1,dimBackground:!0,outline:!0},n))}function o(n,r,i){function o(){var e=r.data("$mdRippleContainer");return e?e:(e=angular.element('<div class="md-ripple-container">'),r.append(e),r.data("$mdRippleContainer",e),e)}function a(e){function t(e){var t="#"===e.charAt(0)?e.substr(1):e,n=t.length/3,r=t.substr(0,n),i=t.substr(n,n),o=t.substr(2*n);return 1===n&&(r+=r,i+=i,o+=o),"rgba("+parseInt(r,16)+","+parseInt(i,16)+","+parseInt(o,16)+",0.1)"}function n(e){return e.replace(")",", 0.1)").replace("(","a(")}if(e)return 0===e.indexOf("rgba")?e.replace(/\d?\.?\d*\s*\)\s*$/,"0.1)"):0===e.indexOf("rgb")?n(e):0===e.indexOf("#")?t(e):void 0}function s(e,n){g.splice(g.indexOf(e),1),0===g.length&&o().css({backgroundColor:""}),t(function(){e.remove()},n,!1)}function c(e){var t=g.indexOf(e),n=v[t]||{},r=g.length>1?!1:b,o=g.length>1?!1:y;r||n.animating||o?e.addClass("md-ripple-visible"):e&&(e.removeClass("md-ripple-visible"),i.outline&&e.css({width:m+"px",height:m+"px",marginLeft:-1*m+"px",marginTop:-1*m+"px"}),s(e,i.outline?450:650))}function l(n,s){function l(e){var t=angular.element('<div class="md-ripple" data-counter="'+h++ +'">');return g.unshift(t),v.unshift({animating:!0}),f.append(t),e&&t.css(e),t}function u(e,t){var n,r,o,a=f.prop("offsetWidth"),s=f.prop("offsetHeight");return i.isMenuItem?r=Math.sqrt(Math.pow(a,2)+Math.pow(s,2)):i.outline?(o=E.getBoundingClientRect(),e-=o.left,t-=o.top,a=Math.max(e,a-e),s=Math.max(t,s-t),r=2*Math.sqrt(Math.pow(a,2)+Math.pow(s,2))):(n=i.isFAB?1.1:.8,r=Math.sqrt(Math.pow(a,2)+Math.pow(s,2))*n,i.fitRipple&&(r=Math.min(s,a,r))),r}function d(e,t,n){function r(e){return e.replace("rgba","rgb").replace(/,[^\)\,]+\)/,")")}var o,a={backgroundColor:r(M),borderColor:r(M),width:e+"px",height:e+"px"};return i.outline?(a.width=0,a.height=0):a.marginLeft=a.marginTop=e*-.5+"px",i.center?a.left=a.top="50%":(o=E.getBoundingClientRect(),a.left=Math.round((t-o.left)/f.prop("offsetWidth")*100)+"%",a.top=Math.round((n-o.top)/f.prop("offsetHeight")*100)+"%"),a}M=a(r.attr("md-ink-ripple"))||a(e.getComputedStyle(i.colorElement[0]).color||"rgb(0, 0, 0)");var f=o(),p=u(n,s),$=d(p,n,s),b=l($),y=g.indexOf(b),w=v[y]||{};return m=p,w.animating=!0,t(function(){i.dimBackground&&f.css({backgroundColor:M}),b.addClass("md-ripple-placed md-ripple-scaled"),b.css(i.outline?{borderWidth:.5*p+"px",marginLeft:p*-.5+"px",marginTop:p*-.5+"px"}:{left:"50%",top:"50%"}),c(b),t(function(){w.animating=!1,c(b)},i.outline?450:225,!1)},0,!1),b}function u(e){if(f()){{l(e.pointer.x,e.pointer.y)}y=!0}}function d(){y=!1;var e=g[g.length-1];t(function(){c(e)},0,!1)}function f(){function e(e){return e&&e.hasAttribute&&e.hasAttribute("disabled")}var t=E.parentNode,n=t&&t.parentNode,r=n&&n.parentNode;return!(e(E)||e(t)||e(n)||e(r))}if(r.controller("mdNoInk"))return angular.noop;i=angular.extend({colorElement:r,mousedown:!0,hover:!0,focus:!0,center:!1,mousedownPauseTime:150,dimBackground:!1,outline:!1,isFAB:!1,isMenuItem:!1,fitRipple:!1},i);var m,p=r.controller("mdInkRipple")||{},h=0,g=[],v=[],$=r.attr("md-highlight"),b=!1,y=!1,E=r[0],w=r.attr("md-ripple-size"),M=a(r.attr("md-ink-ripple"))||a(e.getComputedStyle(i.colorElement[0]).color||"rgb(0, 0, 0)");switch(w){case"full":i.isFAB=!0;break;case"partial":i.isFAB=!1}return i.mousedown&&r.on("$md.pressdown",u).on("$md.pressup",d),p.createRipple=l,$&&n.$watch($,function(e){b=e,b&&!g.length&&t(function(){l(0,0)},0,!1),angular.forEach(g,c)}),function(){r.off("$md.pressdown",u).off("$md.pressup",d),o().remove()}}return{attachButtonBehavior:n,attachCheckboxBehavior:r,attachTabBehavior:i,attach:o}}function n(){return function(){return{controller:angular.noop}}}angular.module("material.core").factory("$mdInkRipple",t).directive("mdInkRipple",e).directive("mdNoInk",n()).directive("mdNoBar",n()).directive("mdNoStretch",n()),e.$inject=["$mdInkRipple"],t.$inject=["$window","$timeout"]}(),function(){"use strict";angular.module("material.core.theming.palette",[]).constant("$mdColorPalette",{red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 A200 A400 A700"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400 A700"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff",contrastDefaultColor:"light",contrastDarkColors:"100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900 A700",contrastStrongLightColors:"500 600 700 800 A700"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700 800"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00",contrastDefaultColor:"dark",contrastLightColors:"900",contrastStrongLightColors:"900"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600",contrastDefaultColor:"dark"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00",contrastDefaultColor:"dark"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100 A200",contrastStrongLightColors:"500 600 700 800 900 A400 A700"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037",contrastDefaultColor:"light",contrastDarkColors:"50 100 200",contrastStrongLightColors:"300 400"},grey:{0:"#ffffff",50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",1000:"#000000",A100:"#ffffff",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300",contrastStrongLightColors:"400 500"}})}(),function(){"use strict";function e(e){function t(e,t){return t=t||{},c[e]=i(e,t),u}function n(e,t){return i(e,angular.extend({},c[e]||{},t))}function i(e,t){var n=M.filter(function(e){return!t[e]});if(n.length)throw new Error("Missing colors %1 in palette %2!".replace("%1",n.join(", ")).replace("%2",e));return t}function o(e,t){if(t=t||"default",l[e])return l[e];var n="string"==typeof t?l[t]:t,r=new a(e);return n&&angular.forEach(n.colors,function(e,t){r.colors[t]={name:e.name,hues:angular.extend({},e.hues)}}),l[e]=r,r}function a(e){function t(e){if(e=0===arguments.length?!0:!!e,e!==n.isDark){n.isDark=e,n.foregroundPalette=n.isDark?m:f,n.foregroundShadow=n.isDark?p:h;var t=n.isDark?w:E,r=n.isDark?E:w;return angular.forEach(t,function(e,t){var i=n.colors[t],o=r[t];if(i)for(var a in i.hues)i.hues[a]===o[a]&&(i.hues[a]=e[a])}),n}}var n=this;n.name=e,n.colors={},n.dark=t,t(!1),b.forEach(function(e){var t=(n.isDark?w:E)[e];n[e+"Palette"]=function(r,i){var o=n.colors[e]={name:r,hues:angular.extend({},t,i)};return Object.keys(o.hues).forEach(function(e){if(!t[e])throw new Error("Invalid hue name '%1' in theme %2's %3 color %4. Available hue names: %4".replace("%1",e).replace("%2",n.name).replace("%3",r).replace("%4",Object.keys(t).join(", ")))}),Object.keys(o.hues).map(function(e){return o.hues[e]}).forEach(function(t){if(-1==M.indexOf(t))throw new Error("Invalid hue value '%1' in theme %2's %3 color %4. Available hue values: %5".replace("%1",t).replace("%2",n.name).replace("%3",e).replace("%4",r).replace("%5",M.join(", ")))}),n},n[e+"Color"]=function(){var t=Array.prototype.slice.call(arguments);return console.warn("$mdThemingProviderTheme."+e+"Color() has been depricated. Use $mdThemingProviderTheme."+e+"Palette() instead."),n[e+"Palette"].apply(n,t)}})}function d(e,t){function n(e){return void 0===e||""===e?!0:void 0!==l[e]}function r(t,n){void 0===n&&(n=t,t=void 0),void 0===t&&(t=e),r.inherit(n,n)}return r.inherit=function(r,i){function o(e){n(e)||t.warn("Attempted to use unregistered theme '"+e+"'. Register it with $mdThemingProvider.theme().");var i=r.data("$mdThemeName");i&&r.removeClass("md-"+i+"-theme"),r.addClass("md-"+e+"-theme"),r.data("$mdThemeName",e)}var a=i.controller("mdTheme"),s=r.attr("md-theme-watch");if((v||angular.isDefined(s))&&"false"!=s){var c=e.$watch(function(){return a&&a.$mdTheme||g},o);r.on("$destroy",c)}else{var l=a&&a.$mdTheme||g;o(l)}},r.registered=n,r}c={},l={};var g="default",v=!1;return angular.extend(c,e),d.$inject=["$rootScope","$log"],u={definePalette:t,extendPalette:n,theme:o,setDefaultTheme:function(e){g=e},alwaysWatchTheme:function(e){v=e},$get:d,_LIGHT_DEFAULT_HUES:E,_DARK_DEFAULT_HUES:w,_PALETTES:c,_THEMES:l,_parseRules:r,_rgba:s}}function t(e,t,n){return{priority:100,link:{pre:function(r,i,o){var a={$setTheme:function(t){e.registered(t)||n.warn("attempted to use unregistered theme '"+t+"'"),a.$mdTheme=t}};i.data("$mdThemeController",a),a.$setTheme(t(o.mdTheme)(r)),o.$observe("mdTheme",a.$setTheme)}}}}function n(e){return e}function r(e,t,n){o(e,t),n=n.replace(/THEME_NAME/g,e.name);var r=[],i=e.colors[t],a=new RegExp(".md-"+e.name+"-theme","g"),l=new RegExp("('|\")?{{\\s*("+t+")-(color|contrast)-?(\\d\\.?\\d*)?\\s*}}(\"|')?","g"),u=/'?"?\{\{\s*([a-zA-Z]+)-(A?\d+|hue\-[0-3]|shadow)-?(\d\.?\d*)?\s*\}\}'?"?/g,d=c[i.name];return n=n.replace(u,function(t,n,r,i){return"foreground"===n?"shadow"==r?e.foregroundShadow:e.foregroundPalette[r]||e.foregroundPalette[1]:(0===r.indexOf("hue")&&(r=e.colors[n].hues[r]),s((c[e.colors[n].name][r]||"").value,i))}),angular.forEach(i.hues,function(t,i){var o=n.replace(l,function(e,n,r,i,o){return s(d[t]["color"===i?"value":"contrast"],o)});"default"!==i&&(o=o.replace(a,".md-"+e.name+"-theme.md-"+i)),r.push(o)}),r.join("")}function i(e){function t(e){var t=e.contrastDefaultColor,n=e.contrastLightColors||[],r=e.contrastStrongLightColors||[],i=e.contrastDarkColors||[];"string"==typeof n&&(n=n.split(" ")),"string"==typeof r&&(r=r.split(" ")),"string"==typeof i&&(i=i.split(" ")),delete e.contrastDefaultColor,delete e.contrastLightColors,delete e.contrastStrongLightColors,delete e.contrastDarkColors,angular.forEach(e,function(o,s){function c(){return"light"===t?i.indexOf(s)>-1?g:r.indexOf(s)>-1?$:v:n.indexOf(s)>-1?r.indexOf(s)>-1?$:v:g}if(!angular.isObject(o)){var l=a(o);if(!l)throw new Error("Color %1, in palette %2's hue %3, is invalid. Hex or rgb(a) color expected.".replace("%1",o).replace("%2",e.name).replace("%3",s));e[s]={value:l,contrast:c()}}})}var n=e.has("$MD_THEME_CSS")?e.get("$MD_THEME_CSS"):"";angular.forEach(c,t);var i=n.split(/\}(?!(\}|'|"|;))/).filter(function(e){return e&&e.length}).map(function(e){return e.trim()+"}"}),o={};b.forEach(function(e){o[e]=""});var s=new RegExp("md-("+b.join("|")+")","g");i.forEach(function(e){for(var t,n=(e.match(s),0);t=b[n];n++)if(e.indexOf(".md-"+t)>-1)return o[t]+=e;for(n=0;t=b[n];n++)if(e.indexOf(t)>-1)return o[t]+=e;return o[y]+=e});var u="";if(angular.forEach(l,function(e){b.forEach(function(t){u+=r(e,t,o[t]+"")}),e.colors.primary.name==e.colors.accent.name&&console.warn("$mdThemingProvider: Using the same palette for primary andaccent. This violates the material design spec.")}),!d){var f=document.createElement("style");f.innerHTML=u;var m=document.getElementsByTagName("head")[0];m.insertBefore(f,m.firstElementChild),d=!0}}function o(e,t){if(!c[(e.colors[t]||{}).name])throw new Error("You supplied an invalid color palette for theme %1's %2 palette. Available palettes: %3".replace("%1",e.name).replace("%2",t).replace("%3",Object.keys(c).join(", ")))}function a(e){if(angular.isArray(e)&&3==e.length)return e;if(/^rgb/.test(e))return e.replace(/(^\s*rgba?\(|\)\s*$)/g,"").split(",").map(function(e,t){return 3==t?parseFloat(e,10):parseInt(e,10)});if("#"==e.charAt(0)&&(e=e.substring(1)),/^([a-fA-F0-9]{3}){1,2}$/g.test(e)){var t=e.length/3,n=e.substr(0,t),r=e.substr(t,t),i=e.substr(2*t);return 1===t&&(n+=n,r+=r,i+=i),[parseInt(n,16),parseInt(r,16),parseInt(i,16)]}}function s(e,t){return 4==e.length&&(e=angular.copy(e),t?e.pop():t=e.pop()),t&&("number"==typeof t||"string"==typeof t&&t.length)?"rgba("+e.join(",")+","+t+")":"rgb("+e.join(",")+")"}angular.module("material.core.theming",["material.core.theming.palette"]).directive("mdTheme",t).directive("mdThemable",n).provider("$mdTheming",e).run(i);var c,l,u,d,f={name:"dark",1:"rgba(0,0,0,0.87)",2:"rgba(0,0,0,0.54)",3:"rgba(0,0,0,0.26)",4:"rgba(0,0,0,0.12)"},m={name:"light",1:"rgba(255,255,255,1.0)",2:"rgba(255,255,255,0.7)",3:"rgba(255,255,255,0.3)",4:"rgba(255,255,255,0.12)"},p="1px 1px 0px rgba(0,0,0,0.4), -1px -1px 0px rgba(0,0,0,0.4)",h="",g=a("rgba(0,0,0,0.87)"),v=a("rgba(255,255,255,0.87"),$=a("rgb(255,255,255)"),b=["primary","accent","warn","background"],y="primary",E={accent:{"default":"A200","hue-1":"A100","hue-2":"A400","hue-3":"A700"}},w={background:{"default":"500","hue-1":"300","hue-2":"600","hue-3":"800"}};b.forEach(function(e){var t={"default":"500","hue-1":"300","hue-2":"800","hue-3":"A100"};E[e]||(E[e]=t),w[e]||(w[e]=t)});var M=["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"];e.$inject=["$mdColorPalette"],t.$inject=["$mdTheming","$interpolate","$log"],n.$inject=["$mdTheming"],i.$inject=["$injector"]}(),function(){"use strict";function e(e){return e}angular.module("material.components.backdrop",["material.core"]).directive("mdBackdrop",e),e.$inject=["$mdTheming"]}(),function(){"use strict";function e(){return{restrict:"E"}}function t(e){function t(e,t,i,o,a,s,c,l,u,d){function f(n,r,o){h=a('<md-backdrop class="md-opaque md-bottom-sheet-backdrop">')(n),h.on("click",function(){i(c.cancel)}),s.inherit(h,o.parent),e.enter(h,o.parent,null);var u=new p(r,o.parent);return o.bottomSheet=u,o.targetEvent&&angular.element(o.targetEvent.target).blur(),s.inherit(u.element,o.parent),o.disableParentScroll&&(o.lastOverflow=o.parent.css("overflow"),o.parent.css("overflow","hidden")),e.enter(u.element,o.parent).then(function(){var e=angular.element(r[0].querySelector("button")||r[0].querySelector("a")||r[0].querySelector("[ng-click]"));e.focus(),o.escapeToClose&&(o.rootElementKeyupCallback=function(e){e.keyCode===t.KEY_CODE.ESCAPE&&i(c.cancel)},l.on("keyup",o.rootElementKeyupCallback))})}function m(t,n,r){var i=r.bottomSheet;return e.leave(h),e.leave(i.element).then(function(){r.disableParentScroll&&(r.parent.css("overflow",r.lastOverflow),delete r.lastOverflow),i.cleanup(),r.targetEvent&&angular.element(r.targetEvent.target).focus()
})}function p(e,o){function a(){e.css(t.CSS.TRANSITION_DURATION,"0ms")}function s(n){var i=n.pointer.distanceY;5>i&&(i=Math.max(-r,i/2)),e.css(t.CSS.TRANSFORM,"translate3d(0,"+(r+i)+"px,0)")}function l(r){if(r.pointer.distanceY>0&&(r.pointer.distanceY>20||Math.abs(r.pointer.velocityY)>n)){var o=e.prop("offsetHeight")-r.pointer.distanceY,a=Math.min(o/r.pointer.velocityY*.75,500);e.css(t.CSS.TRANSITION_DURATION,a+"ms"),i(c.cancel)}else e.css(t.CSS.TRANSITION_DURATION,""),e.css(t.CSS.TRANSFORM,"")}var u=d.register(o,"drag",{horizontal:!1});return o.on("$md.dragstart",a).on("$md.drag",s).on("$md.dragend",l),{element:e,cleanup:function(){u(),o.off("$md.dragstart",a).off("$md.drag",s).off("$md.dragend",l)}}}var h;return{themable:!0,targetEvent:null,onShow:f,onRemove:m,escapeToClose:!0,disableParentScroll:!0}}var n=.5,r=80;return t.$inject=["$animate","$mdConstant","$timeout","$$rAF","$compile","$mdTheming","$mdBottomSheet","$rootElement","$rootScope","$mdGesture"],e("$mdBottomSheet").setDefaults({methods:["disableParentScroll","escapeToClose","targetEvent"],options:t})}angular.module("material.components.bottomSheet",["material.core","material.components.backdrop"]).directive("mdBottomSheet",e).provider("$mdBottomSheet",t),t.$inject=["$$interimElementProvider"]}(),function(){"use strict";function e(e,t,n){function r(e){return angular.isDefined(e.href)||angular.isDefined(e.ngHref)}function i(e,t){return r(t)?'<a class="md-button" ng-transclude></a>':'<button class="md-button" ng-transclude></button>'}function o(i,o,a){var s=o[0];t(o),e.attachButtonBehavior(i,o);var c=s.textContent.trim();c||n.expect(o,"aria-label"),r(a)&&angular.isDefined(a.ngDisabled)&&i.$watch(a.ngDisabled,function(e){o.attr("tabindex",e?-1:0)})}return{restrict:"E",replace:!0,transclude:!0,template:i,link:o}}angular.module("material.components.button",["material.core"]).directive("mdButton",e),e.$inject=["$mdInkRipple","$mdTheming","$mdAria"]}(),function(){"use strict";function e(e){return{restrict:"E",link:function(t,n){e(n)}}}angular.module("material.components.card",["material.core"]).directive("mdCard",e),e.$inject=["$mdTheming"]}(),function(){"use strict";function e(e,t,n,r,i,o){function a(t,a){return a.type="checkbox",a.tabIndex=0,t.attr("role",a.type),function(t,a,c,l){function u(e){e.which===r.KEY_CODE.SPACE&&(e.preventDefault(),d(e))}function d(e){a[0].hasAttribute("disabled")||t.$apply(function(){m=!m,l.$setViewValue(m,e&&e.type),l.$render()})}function f(){m=l.$viewValue,m?a.addClass(s):a.removeClass(s)}l=l||o.fakeNgModel();var m=!1;i(a),n.expectWithText(a,"aria-label"),e.link.pre(t,{on:angular.noop,0:{}},c,[l]),a.on("click",d).on("keypress",u),l.$render=f}}e=e[0];var s="md-checked";return{restrict:"E",transclude:!0,require:"?ngModel",template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox><div class="md-icon"></div></div><div ng-transclude class="md-label"></div>',compile:a}}angular.module("material.components.checkbox",["material.core"]).directive("mdCheckbox",e),e.$inject=["inputDirective","$mdInkRipple","$mdAria","$mdConstant","$mdTheming","$mdUtil"]}(),function(){"use strict";function e(e){function n(e,t){this.$scope=e,this.$element=t}return{restrict:"E",controller:["$scope","$element",n],link:function(n,r){r[0];e(r),n.$broadcast("$mdContentLoaded",r),t(r[0])}}}function t(e){angular.element(e).on("$md.pressdown",function(t){"t"===t.pointer.type&&(t.$materialScrollFixed||(t.$materialScrollFixed=!0,0===e.scrollTop?e.scrollTop=1:e.scrollHeight===e.scrollTop+e.offsetHeight&&(e.scrollTop-=1)))})}angular.module("material.components.content",["material.core"]).directive("mdContent",e),e.$inject=["$mdTheming"]}(),function(){"use strict";function e(e,t){return{restrict:"E",link:function(n,r){t(r),e(function(){var e=r[0].querySelector("md-content");e&&e.scrollHeight>e.clientHeight&&r.addClass("md-content-overflow")})}}}function t(e){function t(e){return{template:['<md-dialog aria-label="{{ dialog.ariaLabel }}">',"<md-content>","<h2>{{ dialog.title }}</h2>","<p>{{ dialog.content }}</p>","</md-content>",'<div class="md-actions">','<md-button ng-if="dialog.$type == \'confirm\'" ng-click="dialog.abort()">',"{{ dialog.cancel }}","</md-button>",'<md-button ng-click="dialog.hide()" class="md-primary">',"{{ dialog.ok }}","</md-button>","</div>","</md-dialog>"].join(""),controller:function(){this.hide=function(){e.hide(!0)},this.abort=function(){e.cancel()}},controllerAs:"dialog",bindToController:!0}}function n(e,t,n,r,i,o,a,s,c,l,u,d){function f(n,i,o){function a(){var e=i[0].querySelector(".dialog-close");if(!e){var t=i[0].querySelectorAll(".md-actions button");e=t[t.length-1]}return angular.element(e)}o.parent=angular.element(o.parent),o.popInTarget=angular.element((o.targetEvent||{}).target);var l=a();if(p(i.find("md-dialog")),o.hasBackdrop){var u=o.parent.prop("scrollTop");o.backdrop=angular.element('<md-backdrop class="md-dialog-backdrop md-opaque">'),c.inherit(o.backdrop,o.parent),r.enter(o.backdrop,o.parent),i.css("top",u+"px")}return o.disableParentScroll&&(o.lastOverflow=o.parent.css("overflow"),o.parent.css("overflow","hidden")),h(i,o.parent,o.popInTarget&&o.popInTarget.length&&o.popInTarget).then(function(){o.escapeToClose&&(o.rootElementKeyupCallback=function(t){t.keyCode===s.KEY_CODE.ESCAPE&&e(d.cancel)},t.on("keyup",o.rootElementKeyupCallback)),o.clickOutsideToClose&&(o.dialogClickOutsideCallback=function(t){t.target===i[0]&&e(d.cancel)},i.on("click",o.dialogClickOutsideCallback)),l.focus()})}function m(e,n,i){return i.backdrop&&r.leave(i.backdrop),i.disableParentScroll&&(i.parent.css("overflow",i.lastOverflow),delete i.lastOverflow),i.escapeToClose&&t.off("keyup",i.rootElementKeyupCallback),i.clickOutsideToClose&&n.off("click",i.dialogClickOutsideCallback),g(n,i.parent,i.popInTarget&&i.popInTarget.length&&i.popInTarget).then(function(){i.scope.$destroy(),n.remove(),i.popInTarget&&i.popInTarget.focus()})}function p(e){e.attr({role:"dialog"});var t=e.find("md-content");0===t.length&&(t=e),i.expectAsync(e,"aria-label",function(){var e=t.text().split(/\s+/);return e.length>3&&(e=e.slice(0,3).concat("...")),e.join(" ")})}function h(e,t,n){var r=e.find("md-dialog");return t.append(e),v(r,n),l(function(){r.addClass("transition-in").css(s.CSS.TRANSFORM,"")}),$(r)}function g(e,t,n){var r=e.find("md-dialog");return r.addClass("transition-out").removeClass("transition-in"),v(r,n),$(r)}function v(e,t){if(t){var n=t[0].getBoundingClientRect(),r=e[0].getBoundingClientRect(),i=Math.min(.5,n.width/r.width),o=Math.min(.5,n.height/r.height);e.css(s.CSS.TRANSFORM,"translate3d("+(-r.left+n.left+n.width/2-r.width/2)+"px,"+(-r.top+n.top+n.height/2-r.height/2)+"px,0) scale("+i+","+o+")")}}function $(e){function t(r){r.target===e[0]&&(e.off(s.CSS.TRANSITIONEND,t),n.resolve())}var n=u.defer();return e.on(s.CSS.TRANSITIONEND,t),n.promise}return{hasBackdrop:!0,isolateScope:!0,onShow:f,onRemove:m,clickOutsideToClose:!0,escapeToClose:!0,targetEvent:null,disableParentScroll:!0,transformTemplate:function(e){return'<div class="md-dialog-container">'+e+"</div>"}}}return t.$inject=["$mdDialog"],n.$inject=["$timeout","$rootElement","$compile","$animate","$mdAria","$document","$mdUtil","$mdConstant","$mdTheming","$$rAF","$q","$mdDialog"],e("$mdDialog").setDefaults({methods:["disableParentScroll","hasBackdrop","clickOutsideToClose","escapeToClose","targetEvent"],options:n}).addPreset("alert",{methods:["title","content","ariaLabel","ok"],options:t}).addPreset("confirm",{methods:["title","content","ariaLabel","ok","cancel"],options:t})}angular.module("material.components.dialog",["material.core","material.components.backdrop"]).directive("mdDialog",e).provider("$mdDialog",t),e.$inject=["$$rAF","$mdTheming"],t.$inject=["$$interimElementProvider"]}(),function(){"use strict";function e(){}function t(t){return{restrict:"E",link:t,controller:[e]}}angular.module("material.components.divider",["material.core"]).directive("mdDivider",t),t.$inject=["$mdTheming"]}(),function(){"use strict";function e(){return{restrict:"E",template:'<object class="md-icon"></object>',compile:function(e,t){var n=angular.element(e[0].children[0]);angular.isDefined(t.icon)&&n.attr("data",t.icon)}}}angular.module("material.components.icon",["material.core"]).directive("mdIcon",e)}(),function(){function e(e,t){function n(t,n){e(n)}function r(e,n,r){var i=this;i.isErrorGetter=r.mdIsError&&t(r.mdIsError),i.element=n,i.setFocused=function(e){n.toggleClass("md-input-focused",!!e)},i.setHasValue=function(e){n.toggleClass("md-input-has-value",!!e)},i.setInvalid=function(e){n.toggleClass("md-input-invalid",!!e)},e.$watch(function(){return i.label&&i.input},function(e){e&&!i.label.attr("for")&&i.label.attr("for",i.input.attr("id"))})}return r.$inject=["$scope","$element","$attrs"],{restrict:"E",link:n,controller:r}}function t(){return{restrict:"E",require:"^?mdInputContainer",link:function(e,t,n,r){r&&(r.label=t,e.$on("$destroy",function(){r.label=null}))}}}function n(e,t){function n(n,r,i,o){function a(e){return l.setHasValue(!u.$isEmpty(e)),e}function s(){l.setHasValue(r.val().length>0||(r[0].validity||{}).badInput)}function c(){function i(e){return c(),e}function o(){s.style.height="auto";var e=s.scrollHeight-s.offsetHeight;s.scrollTop=0;var t=s.offsetHeight+(e>0?e:0);s.style.height=t+"px"}function a(){s.scrollTop=0;var e=s.scrollHeight-s.offsetHeight,t=s.offsetHeight+e;s.style.height=t+"px"}var s=r[0],c=e.debounce(o,1);u?(u.$formatters.push(i),u.$viewChangeListeners.push(i)):c(),r.on("keydown input",c),r.on("scroll",a),angular.element(t).on("resize",c),n.$on("$destroy",function(){angular.element(t).off("resize",c)})}var l=o[0],u=o[1]||e.fakeNgModel(),d=angular.isDefined(i.readonly);if(l){if(l.input)throw new Error("<md-input-container> can only have *one* <input> or <textarea> child element!");l.input=r,r.addClass("md-input"),r.attr("id")||r.attr("id","input_"+e.nextUid()),"textarea"===r[0].tagName.toLowerCase()&&c();var f=l.isErrorGetter||function(){return u.$invalid&&u.$touched};n.$watch(f,l.setInvalid),u.$parsers.push(a),u.$formatters.push(a),r.on("input",s),d||r.on("focus",function(){l.setFocused(!0)}).on("blur",function(){l.setFocused(!1),s()}),n.$on("$destroy",function(){l.setFocused(!1),l.setHasValue(!1),l.input=null})}}return{restrict:"E",require:["^?mdInputContainer","?ngModel"],link:n}}function r(e){function t(t,n,r,i){function o(e){return l.text((n.val()||e||"").length+"/"+a),e}var a,s=i[0],c=i[1],l=angular.element('<div class="md-char-counter">');r.$set("ngTrim","false"),c.element.append(l),s.$formatters.push(o),s.$viewChangeListeners.push(o),n.on("input keydown",function(){o()}),t.$watch(r.mdMaxlength,function(t){a=t,angular.isNumber(t)&&t>0?(l.parent().length||e.enter(l,c.element,angular.element(c.element[0].lastElementChild)),o()):e.leave(l)}),s.$validators["md-maxlength"]=function(e,t){return!angular.isNumber(a)||0>a?!0:(e||n.val()||t||"").length<=a}}return{restrict:"A",require:["ngModel","^mdInputContainer"],link:t}}function i(){function e(e,t,n,r){if(r){var i=n.placeholder;t.removeAttr("placeholder"),r.element.append('<div class="md-placeholder">'+i+"</div>")}}return{restrict:"A",require:"^^?mdInputContainer",link:e}}angular.module("material.components.input",["material.core"]).directive("mdInputContainer",e).directive("label",t).directive("input",n).directive("textarea",n).directive("mdMaxlength",r).directive("placeholder",i),e.$inject=["$mdTheming","$parse"],n.$inject=["$mdUtil","$window","$compile","$animate"],r.$inject=["$animate"]}(),function(){"use strict";function e(){return{restrict:"E",link:function(e,t){t.attr({role:"list"})}}}function t(){return{restrict:"E",link:function(e,t){t.attr({role:"listitem"})}}}angular.module("material.components.list",["material.core"]).directive("mdList",e).directive("mdItem",t)}(),function(){"use strict";function e(e,t,n){function r(e){return e.attr("aria-valuemin",0),e.attr("aria-valuemax",100),e.attr("role","progressbar"),i}function i(e,r,i){n(r);var c,l,u,d,f=r[0],m=f.querySelectorAll(".md-fill, .md-mask.md-full"),p=f.querySelectorAll(".md-fill.md-fix"),h=i.mdDiameter||48,g=h/48;f.style[t.CSS.TRANSFORM]="scale("+g.toString()+")",i.$observe("value",function(e){for(l=o(e),u=a[l],d=s[l],r.attr("aria-valuenow",l),c=0;c<m.length;c++)m[c].style[t.CSS.TRANSFORM]=u;for(c=0;c<p.length;c++)p[c].style[t.CSS.TRANSFORM]=d})}function o(e){return e>100?100:0>e?0:Math.ceil(e||0)}for(var a=new Array(101),s=new Array(101),c=0;101>c;c++){var l=c/100,u=Math.floor(180*l);a[c]="rotate("+u.toString()+"deg)",s[c]="rotate("+(2*u).toString()+"deg)"}return{restrict:"E",template:'<div class="md-spinner-wrapper"><div class="md-inner"><div class="md-gap"></div><div class="md-left"><div class="md-half-circle"></div></div><div class="md-right"><div class="md-half-circle"></div></div></div></div>',compile:r}}angular.module("material.components.progressCircular",["material.core"]).directive("mdProgressCircular",e),e.$inject=["$$rAF","$mdConstant","$mdTheming"]}(),function(){"use strict";function e(e,n,r){function i(e){return e.attr("aria-valuemin",0),e.attr("aria-valuemax",100),e.attr("role","progressbar"),o}function o(i,o,s){r(o);var c=o[0].querySelector(".md-bar1").style,l=o[0].querySelector(".md-bar2").style,u=angular.element(o[0].querySelector(".md-container"));s.$observe("value",function(e){if("query"!=s.mdMode){var r=a(e);o.attr("aria-valuenow",r),l[n.CSS.TRANSFORM]=t[r]}}),s.$observe("mdBufferValue",function(e){c[n.CSS.TRANSFORM]=t[a(e)]}),e(function(){u.addClass("md-ready")})}function a(e){return e>100?100:0>e?0:Math.ceil(e||0)}return{restrict:"E",template:'<div class="md-container"><div class="md-dashed"></div><div class="md-bar md-bar1"></div><div class="md-bar md-bar2"></div></div>',compile:i}}angular.module("material.components.progressLinear",["material.core"]).directive("mdProgressLinear",e),e.$inject=["$$rAF","$mdConstant","$mdTheming"];var t=function(){function e(e){var t=e/100,n=(e-100)/2;return"translateX("+n.toString()+"%) scale("+t.toString()+", 1)"}for(var t=new Array(101),n=0;101>n;n++)t[n]=e(n);return t}()}(),function(){"use strict";function e(e,t,n){function r(r,i,o,a){function s(n){switch(n.keyCode){case t.KEY_CODE.LEFT_ARROW:case t.KEY_CODE.UP_ARROW:n.preventDefault(),c.selectPrevious();break;case t.KEY_CODE.RIGHT_ARROW:case t.KEY_CODE.DOWN_ARROW:n.preventDefault(),c.selectNext();break;case t.KEY_CODE.ENTER:var r=angular.element(e.getClosest(i[0],"form"));r.length>0&&r.triggerHandler("submit")}}n(i);var c=a[0],l=a[1]||e.fakeNgModel();c.init(l),i.attr({role:"radiogroup",tabIndex:i.attr("tabindex")||"0"}).on("keydown",s)}function i(e){this._radioButtonRenderFns=[],this.$element=e}function o(){return{init:function(e){this._ngModelCtrl=e,this._ngModelCtrl.$render=angular.bind(this,this.render)},add:function(e){this._radioButtonRenderFns.push(e)},remove:function(e){var t=this._radioButtonRenderFns.indexOf(e);-1!==t&&this._radioButtonRenderFns.splice(t,1)},render:function(){this._radioButtonRenderFns.forEach(function(e){e()})},setViewValue:function(e,t){this._ngModelCtrl.$setViewValue(e,t),this.render()},getViewValue:function(){return this._ngModelCtrl.$viewValue},selectNext:function(){return a(this.$element,1)},selectPrevious:function(){return a(this.$element,-1)},setActiveDescendant:function(e){this.$element.attr("aria-activedescendant",e)}}}function a(t,n){var r=e.iterator(Array.prototype.slice.call(t[0].querySelectorAll("md-radio-button")),!0);if(r.count()){var i=function(e){return!angular.element(e).attr("disabled")},o=t[0].querySelector("md-radio-button.md-checked"),a=r[0>n?"previous":"next"](o,i)||r.first();angular.element(a).triggerHandler("click")}}return i.prototype=o(),{restrict:"E",controller:["$element",i],require:["mdRadioGroup","?ngModel"],link:{pre:r}}}function t(e,t,n){function r(r,o,a,s){function c(e){o[0].hasAttribute("disabled")||r.$apply(function(){s.setViewValue(a.value,e&&e.type)})}function l(){var e=s.getViewValue()==a.value;e!==d&&(d=e,o.attr("aria-checked",e),e?(o.addClass(i),s.setActiveDescendant(o.attr("id"))):o.removeClass(i))}function u(n,r){function i(){return a.id||"radio_"+t.nextUid()}r.ariaId=i(),n.attr({id:r.ariaId,role:"radio","aria-checked":"false"}),e.expectWithText(n,"aria-label")}var d;n(o),u(o,r),s.add(l),a.$observe("value",l),o.on("click",c).on("$destroy",function(){s.remove(l)})}var i="md-checked";return{restrict:"E",require:"^mdRadioGroup",transclude:!0,template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox><div class="md-off"></div><div class="md-on"></div></div><div ng-transclude class="md-label"></div>',link:r}}angular.module("material.components.radioButton",["material.core"]).directive("mdRadioGroup",e).directive("mdRadioButton",t),e.$inject=["$mdUtil","$mdConstant","$mdTheming"],t.$inject=["$mdAria","$mdUtil","$mdTheming"]}(),function(){"use strict";function e(e,t){return function(n){var r="SideNav '"+n+"' is not available!",i=e.get(n);return i||e.notFoundError(n),{isOpen:function(){return i&&i.isOpen()},isLockedOpen:function(){return i&&i.isLockedOpen()},toggle:function(){return i?i.toggle():t.reject(r)},open:function(){return i?i.open():t.reject(r)},close:function(){return i?i.close():t.reject(r)}}}}function t(e,t,n,r,i,o,a,s,c){function l(l,u,d,f){function m(e,n){l.isLockedOpen=e,e===n?u.toggleClass("md-locked-open",!!e):t[e?"addClass":"removeClass"](u,"md-locked-open"),w.toggleClass("md-locked-open",!!e)}function p(e){var n=u.parent();return n[e?"on":"off"]("keydown",g),w[e?"on":"off"]("click",v),e&&($=c[0].activeElement),b=s.all([t[e?"enter":"leave"](w,n),t[e?"removeClass":"addClass"](u,"md-closed").then(function(){l.isOpen&&u.focus()})])}function h(t){if(l.isOpen==t)return s.when(!0);var n=s.defer();return l.isOpen=t,e(function(){b.then(function(e){l.isOpen||($&&$.focus(),$=null),n.resolve(e)})},0,!1),n.promise}function g(e){var t=e.keyCode===i.KEY_CODE.ESCAPE;return t?v(e):s.when(!0)}function v(e){return e.preventDefault(),e.stopPropagation(),f.close()}var $=null,b=s.when(!0),y=n(d.mdIsLockedOpen),E=function(){return y(l.$parent,{$media:r})},w=o('<md-backdrop class="md-sidenav-backdrop md-opaque ng-enter">')(l);u.on("$destroy",f.destroy),a.inherit(w,u),l.$watch(E,m),l.$watch("isOpen",p),f.$toggleOpen=h}return{restrict:"E",scope:{isOpen:"=?mdIsOpen"},controller:"$mdSidenavController",compile:function(e){return e.addClass("md-closed"),e.attr("tabIndex","-1"),l}}}function n(e,t,n,r,i){var o=this;o.$toggleOpen=function(){return i.when(e.isOpen)},o.isOpen=function(){return!!e.isOpen},o.isLockedOpen=function(){return!!e.isLockedOpen},o.open=function(){return o.$toggleOpen(!0)},o.close=function(){return o.$toggleOpen(!1)},o.toggle=function(){return o.$toggleOpen(!e.isOpen)},o.destroy=r.register(o,n.mdComponentId)}angular.module("material.components.sidenav",["material.core","material.components.backdrop"]).factory("$mdSidenav",e).directive("mdSidenav",t).controller("$mdSidenavController",n),e.$inject=["$mdComponentRegistry","$q"],t.$inject=["$timeout","$animate","$parse","$mdMedia","$mdConstant","$compile","$mdTheming","$q","$document"],n.$inject=["$scope","$element","$attrs","$mdComponentRegistry","$q"]}(),function(){"use strict";function e(e,t,n,r,i,o,a,s){function c(c,l,u,d){function f(){$(),w(),v()}function m(e){Y=parseFloat(e),l.attr("aria-valuemin",e),f()}function p(e){K=parseFloat(e),l.attr("aria-valuemax",e),f()}function h(e){X=parseFloat(e),v()}function g(e){l.attr("aria-disabled",!!e)}function v(){if(angular.isDefined(u.mdDiscrete)){var e=Math.floor((K-Y)/X);if(!Z){var n=t.getComputedStyle(B[0]);Z=angular.element('<canvas style="position:absolute;">'),J=Z[0].getContext("2d"),J.fillStyle=n.backgroundColor||"black",B.append(Z)}var r=b();Z[0].width=r.width,Z[0].height=r.height;for(var i,o=0;e>=o;o++)i=Math.floor(r.width*(o/e)),J.fillRect(i-1,0,2,r.height)}}function $(){Q=F[0].getBoundingClientRect()}function b(){return z(),Q}function y(e){if(!l[0].hasAttribute("disabled")){var t;e.keyCode===i.KEY_CODE.LEFT_ARROW?t=-X:e.keyCode===i.KEY_CODE.RIGHT_ARROW&&(t=X),t&&((e.metaKey||e.ctrlKey||e.altKey)&&(t*=4),e.preventDefault(),e.stopPropagation(),c.$evalAsync(function(){E(d.$viewValue+t)}))}}function E(e){d.$setViewValue(M(A(e)))}function w(){isNaN(d.$viewValue)&&(d.$viewValue=d.$modelValue);var e=(d.$viewValue-Y)/(K-Y);c.modelValue=d.$viewValue,l.attr("aria-valuenow",d.$viewValue),k(e),L.text(d.$viewValue)}function M(e){return angular.isNumber(e)?Math.max(Y,Math.min(K,e)):void 0}function A(e){return angular.isNumber(e)?Math.round(e/X)*X:void 0}function k(e){U.css("width",100*e+"%"),q.css(i.CSS.TRANSFORM,"translate3d("+100*e+"%,0,0)"),l.toggleClass("md-min",0===e)}function C(e){if(!P()){l.addClass("active"),l[0].focus(),$();var t=R(H(e.pointer.x)),n=M(A(t));c.$apply(function(){E(n),k(j(n))})}}function x(e){if(!P()){l.removeClass("dragging active");var t=R(H(e.pointer.x)),n=M(A(t));c.$apply(function(){E(n)})}}function T(e){P()||(et=!0,e.stopPropagation(),l.addClass("dragging"),N(e))}function S(e){et&&(e.stopPropagation(),N(e))}function _(e){et&&(e.stopPropagation(),et=!1)}function N(e){tt?D(e.pointer.x):O(e.pointer.x)}function O(e){c.$evalAsync(function(){E(R(H(e)))})}function D(e){var t=R(H(e)),n=M(A(t));k(H(e)),L.text(n)}function H(e){return Math.max(0,Math.min(1,(e-Q.left)/Q.width))}function R(e){return Y+e*(K-Y)}function j(e){return(e-Y)/(K-Y)}o(l),d=d||{$setViewValue:function(e){this.$viewValue=e,this.$viewChangeListeners.forEach(function(e){e()})},$parsers:[],$formatters:[],$viewChangeListeners:[]};var I=u.ngDisabled&&s(u.ngDisabled),P=I?function(){return I(c.$parent)}:angular.noop,V=angular.element(l[0].querySelector(".md-thumb")),L=angular.element(l[0].querySelector(".md-thumb-text")),q=V.parent(),F=angular.element(l[0].querySelector(".md-track-container")),U=angular.element(l[0].querySelector(".md-track-fill")),B=angular.element(l[0].querySelector(".md-track-ticks")),z=r.throttle($,5e3);u.min?u.$observe("min",m):m(0),u.max?u.$observe("max",p):p(100),u.step?u.$observe("step",h):h(1);var W=angular.noop;u.ngDisabled&&(W=c.$parent.$watch(u.ngDisabled,g)),n.expect(l,"aria-label"),a.register(l,"drag"),l.attr({tabIndex:0,role:"slider"}).on("keydown",y).on("$md.pressdown",C).on("$md.pressup",x).on("$md.dragstart",T).on("$md.drag",S).on("$md.dragend",_),setTimeout(f);var G=e.throttle(f);angular.element(t).on("resize",G),c.$on("$destroy",function(){angular.element(t).off("resize",G),W()}),d.$render=w,d.$viewChangeListeners.push(w),d.$formatters.push(M),d.$formatters.push(A);var Y,K,X,Z,J,Q={};$();var et=!1,tt=angular.isDefined(u.mdDiscrete)}return{scope:{},require:"?ngModel",template:'<div class="md-track-container"><div class="md-track"></div><div class="md-track md-track-fill"></div><div class="md-track-ticks"></div></div><div class="md-thumb-container"><div class="md-thumb"></div><div class="md-focus-thumb"></div><div class="md-focus-ring"></div><div class="md-sign"><span class="md-thumb-text"></span></div><div class="md-disabled-thumb"></div></div>',link:c}}angular.module("material.components.slider",["material.core"]).directive("mdSlider",e),e.$inject=["$$rAF","$window","$mdAria","$mdUtil","$mdConstant","$mdTheming","$mdGesture","$parse"]}(),function(){"use strict";function e(e,t,n,r,i){function o(e){function n(e,t){t.addClass("md-sticky-clone"),t.css("top",p+"px");var n={element:e,clone:t};return m.items.push(n),d.parent().prepend(n.clone),f(),function(){m.items.forEach(function(t,n){t.element[0]===e[0]&&(m.items.splice(n,1),t.clone.remove())}),f()}}function i(){m.items.forEach(o),m.items=m.items.sort(function(e,t){return e.top<t.top?-1:1});for(var e,t=d.prop("scrollTop"),n=m.items.length-1;n>=0;n--)if(t>m.items[n].top){e=m.items[n];break}c(e)}function o(e){var t=e.element[0];for(e.top=0,e.left=0;t&&t!==d[0];)e.top+=t.offsetTop,e.left+=t.offsetLeft,t=t.offsetParent;e.height=e.element.prop("offsetHeight"),e.clone.css("margin-left",e.left+"px")}function a(){var e=d.prop("scrollTop"),t=e>(a.prevScrollTop||0);a.prevScrollTop=e,0===e?c(null):t&&m.next?m.next.top-e<=0?c(m.next):m.current&&(m.next.top-e<=m.next.height?u(m.current,m.next.top-m.next.height-e):u(m.current,null)):!t&&m.current&&(e<m.current.top&&c(m.prev),m.current&&m.next&&(e>=m.next.top-m.current.height?u(m.current,m.next.top-e-m.current.height):u(m.current,null)))}function c(e){if(m.current!==e){m.current&&(u(m.current,null),l(m.current,null)),e&&l(e,"active"),m.current=e;var t=m.items.indexOf(e);m.next=m.items[t+1],m.prev=m.items[t-1],l(m.next,"next"),l(m.prev,"prev")}}function l(e,t){e&&e.state!==t&&(e.state&&(e.clone.attr("sticky-prev-state",e.state),e.element.attr("sticky-prev-state",e.state)),e.clone.attr("sticky-state",t),e.element.attr("sticky-state",t),e.state=t)}function u(e,n){e&&(null===n||void 0===n?e.translateY&&(e.translateY=null,e.clone.css(t.CSS.TRANSFORM,"")):(e.translateY=n,e.clone.css(t.CSS.TRANSFORM,"translate3d("+e.left+"px,"+n+"px,0)")))}var d=e.$element,f=r.throttle(i);s(d),d.on("$scrollstart",f),d.on("$scroll",a);var m,p=d.prop("offsetTop");return m={prev:null,current:null,next:null,items:[],add:n,refreshElements:i}}function a(){var t,n=angular.element("<div>");e[0].body.appendChild(n[0]);for(var r=["sticky","-webkit-sticky"],i=0;i<r.length;++i)if(n.css({position:r[i],top:0,"z-index":2}),n.css("position")==r[i]){t=r[i];break}return n.remove(),t}function s(e){function t(){+i.now()-o>a?(n=!1,e.triggerHandler("$scrollend")):(e.triggerHandler("$scroll"),r(t))}var n,o,a=200;e.on("scroll touchmove",function(){n||(n=!0,r(t),e.triggerHandler("$scrollstart")),e.triggerHandler("$scroll"),o=+i.now()})}var c=a();return function(e,t,n){var r=t.controller("mdContent");if(r)if(c)t.css({position:c,top:0,"z-index":2});else{var i=r.$element.data("$$sticky");i||(i=o(r),r.$element.data("$$sticky",i));var a=i.add(t,n||t.clone());e.$on("$destroy",a)}}}angular.module("material.components.sticky",["material.core","material.components.content"]).factory("$mdSticky",e),e.$inject=["$document","$mdConstant","$compile","$$rAF","$mdUtil"]}(),function(){"use strict";function e(e,t,n){return{restrict:"E",replace:!0,transclude:!0,template:'<h2 class="md-subheader"><span class="md-subheader-content"></span></h2>',compile:function(r,i,o){var a=r[0].outerHTML;return function(r,i){function s(e){return angular.element(e[0].querySelector(".md-subheader-content"))}n(i),o(r,function(e){s(i).append(e)}),o(r,function(o){var c=t(angular.element(a))(r);n(c),s(c).append(o),e(r,i,c)})}}}}angular.module("material.components.subheader",["material.core","material.components.sticky"]).directive("mdSubheader",e),e.$inject=["$mdSticky","$compile","$mdTheming"]}(),function(){"use strict";var e=angular.module("material.components.swipe",[]);["SwipeLeft","SwipeRight"].forEach(function(t){var n="md"+t,r="$md."+t.toLowerCase();e.directive(n,["$parse",function(e){function t(t,i,o){var a=e(o[n]);i.on(r,function(e){t.$apply(function(){a(t,{$event:e})})})}return{restrict:"A",link:t}}])})}(),function(){"use strict";function e(e,t,n,r,i,o,a,s){function c(e,t){var r=l.compile(e,t);return e.addClass("md-dragging"),function(e,t,c,l){function u(n){p(e)||(n.stopPropagation(),t.addClass("md-dragging"),v={width:h.prop("offsetWidth")},t.removeClass("transition"))}function d(e){if(v){e.stopPropagation(),e.srcEvent&&e.srcEvent.preventDefault();var t=e.pointer.distanceX/v.width,n=l.$viewValue?1+t:t;n=Math.max(0,Math.min(1,n)),h.css(i.CSS.TRANSFORM,"translate3d("+100*n+"%,0,0)"),v.translate=n}}function f(e){if(v){e.stopPropagation(),t.removeClass("md-dragging"),h.css(i.CSS.TRANSFORM,"");var n=l.$viewValue?v.translate<.5:v.translate>.5;n&&m(!l.$viewValue),v=null}}function m(t){e.$apply(function(){l.$setViewValue(t),l.$render()})}l=l||n.fakeNgModel();var p=o(c.ngDisabled),h=angular.element(t[0].querySelector(".md-thumb-container")),g=angular.element(t[0].querySelector(".md-container"));a(function(){t.removeClass("md-dragging")}),r(e,t,c,l),angular.isDefined(c.ngDisabled)&&e.$watch(p,function(e){t.attr("tabindex",e?-1:0)}),s.register(g,"drag"),g.on("$md.dragstart",u).on("$md.drag",d).on("$md.dragend",f);var v}}var l=e[0];return{restrict:"E",transclude:!0,template:'<div class="md-container"><div class="md-bar"></div><div class="md-thumb-container"><div class="md-thumb" md-ink-ripple md-ink-ripple-checkbox></div></div></div><div ng-transclude class="md-label"></div>',require:"?ngModel",compile:c}}angular.module("material.components.switch",["material.core","material.components.checkbox"]).directive("mdSwitch",e),e.$inject=["mdCheckboxDirective","$mdTheming","$mdUtil","$document","$mdConstant","$parse","$$rAF","$mdGesture"]}(),function(){"use strict";angular.module("material.components.tabs",["material.core"])}(),function(){"use strict";function e(e,t,n,r){return{restrict:"E",replace:!0,scope:{fid:"@?mdFid",label:"@?",value:"=ngModel"},compile:function(i,o){return r.warn("<md-text-float> is deprecated. Please use `<md-input-container>` and `<input>`.More information at http://material.angularjs.org/#/api/material.components.input/directive/mdInputContainer"),angular.isUndefined(o.mdFid)&&(o.mdFid=t.nextUid()),{pre:function(e,t,r){var i=n(r.ngDisabled);e.isDisabled=function(){return i(e.$parent)},e.inputType=r.type||"text"},post:e}},template:'<md-input-group tabindex="-1"> <label for="{{fid}}" >{{label}}</label> <md-input id="{{fid}}" ng-disabled="isDisabled()" ng-model="value" type="{{inputType}}"></md-input></md-input-group>'}}function t(e){return{restrict:"CE",controller:["$element",function(t){e.warn("<md-input-group> is deprecated. Please use `<md-input-container>` and `<input>`.More information at http://material.angularjs.org/#/api/material.components.input/directive/mdInputContainer"),this.setFocused=function(e){t.toggleClass("md-input-focused",!!e)},this.setHasValue=function(e){t.toggleClass("md-input-has-value",e)}}]}}function n(e,t){return{restrict:"E",replace:!0,template:"<input >",require:["^?mdInputGroup","?ngModel"],link:function(e,n,r,i){function o(e){return e=angular.isUndefined(e)?n.val():e,angular.isDefined(e)&&null!==e&&""!==e.toString().trim()}if(i[0]){t.warn("<md-input> is deprecated. Please use `<md-input-container>` and `<input>`.More information at http://material.angularjs.org/#/api/material.components.input/directive/mdInputContainer");var a=i[0],s=i[1];e.$watch(e.isDisabled,function(e){n.attr("aria-disabled",!!e),n.attr("tabindex",!!e)}),n.attr("type",r.type||n.parent().attr("type")||"text"),s&&s.$formatters.push(function(e){return a.setHasValue(o(e)),e}),n.on("input",function(){a.setHasValue(o())}).on("focus",function(){a.setFocused(!0)}).on("blur",function(){a.setFocused(!1),a.setHasValue(o())}),e.$on("$destroy",function(){a.setFocused(!1),a.setHasValue(!1)})}}}}angular.module("material.components.textField",["material.core"]).directive("mdInputGroup",t).directive("mdInput",n).directive("mdTextFloat",e),e.$inject=["$mdTheming","$mdUtil","$parse","$log"],t.$inject=["$log"],n.$inject=["$mdUtil","$log"]}(),function(){"use strict";function e(){return{restrict:"E"}}function t(e){function t(e,t,n,r){function i(n,i,o){return i.addClass(o.position.split(" ").map(function(e){return"md-"+e}).join(" ")),o.parent.addClass(a(o.position)),o.onSwipe=function(t){i.addClass("md-"+t.type.replace("$md.","")),e(r.cancel)},i.on("$md.swipeleft $md.swiperight",o.onSwipe),t.enter(i,o.parent)}function o(e,n,r){return n.off("$md.swipeleft $md.swiperight",r.onSwipe),r.parent.removeClass(a(r.position)),t.leave(n)}function a(e){return"md-toast-open-"+(e.indexOf("top")>-1?"top":"bottom")}return{onShow:i,onRemove:o,position:"bottom left",themable:!0,hideDelay:3e3}}return t.$inject=["$timeout","$animate","$mdTheming","$mdToast"],e("$mdToast").setDefaults({methods:["position","hideDelay","capsule"],options:t}).addPreset("simple",{argOption:"content",methods:["content","action","highlightAction"],options:["$mdToast",function(e){return{template:["<md-toast ng-class=\"{'md-capsule': toast.capsule}\">","<span flex>{{ toast.content }}</span>",'<md-button class="md-action" ng-if="toast.action" ng-click="toast.resolve()" ng-class="{\'md-highlight\': toast.highlightAction}">',"{{ toast.action }}","</md-button>","</md-toast>"].join(""),controller:function(){this.resolve=function(){e.hide()
}},controllerAs:"toast",bindToController:!0}}]})}angular.module("material.components.toast",["material.core","material.components.button"]).directive("mdToast",e).provider("$mdToast",t),t.$inject=["$$interimElementProvider"]}(),function(){"use strict";function e(e,t,n,r){return{restrict:"E",controller:angular.noop,link:function(i,o,a){function s(){function r(t,n){o.parent()[0]===n.parent()[0]&&(u&&u.off("scroll",p),n.on("scroll",p),n.attr("scroll-shrink","true"),u=n,e(s))}function s(){l=o.prop("offsetHeight"),u.css("margin-top",-l*m+"px"),c()}function c(e){var n=e?e.target.scrollTop:f;h(),d=Math.min(l/m,Math.max(0,d+n-f)),o.css(t.CSS.TRANSFORM,"translate3d(0,"+-d*m+"px,0)"),u.css(t.CSS.TRANSFORM,"translate3d(0,"+(l-d)*m+"px,0)"),f=n}var l,u,d=0,f=0,m=a.mdShrinkSpeedFactor||.5,p=e.throttle(c),h=n.debounce(s,5e3);i.$on("$mdContentLoaded",r)}r(o),angular.isDefined(a.mdScrollShrink)&&s()}}}angular.module("material.components.toolbar",["material.core","material.components.content"]).directive("mdToolbar",e),e.$inject=["$$rAF","$mdConstant","$mdUtil","$mdTheming"]}(),function(){"use strict";function e(e,t,n,r,i,o,a){function s(s,u,d){function f(t){f.value=!!t,f.queued||(t?(f.queued=!0,e(function(){s.visible=f.value,f.queued=!1},s.delay)):e(function(){s.visible=!1}))}function m(){u.removeClass("md-hide"),g.attr("aria-describedby",u.attr("id")),$.append(u),h(),n(function(){n(function(){h(),s.visible&&u.addClass("md-show")})})}function p(){u.removeClass("md-show").addClass("md-hide"),g.removeAttr("aria-describedby"),e(function(){s.visible||u.detach()},200,!1)}function h(){var e=i.elementRect(u,$),t=i.elementRect(g,$),n="bottom",r={left:t.left+t.width/2-e.width/2,top:t.top+t.height};r.left=Math.min(r.left,$.prop("scrollWidth")-e.width-l),r.left=Math.max(r.left,l),r.top+e.height>$.prop("scrollHeight")&&(r.top=t.top-e.height,n="top"),u.css({top:r.top+"px",left:r.left+"px"}),u.attr("width-32",Math.ceil(e.width/32)),u.attr("md-direction",n)}o(u);for(var g=u.parent(),v=u.parent()[0];v&&v!==a[0]&&v!==document.body&&(!v.tagName||"md-content"!=v.tagName.toLowerCase());)v=v.parentNode;var $=angular.element(v||document.body);angular.isDefined(d.mdDelay)||(s.delay=c),u.detach(),u.attr("role","tooltip"),u.attr("id",d.id||"tooltip_"+i.nextUid()),g.on("focus mouseenter touchstart",function(){f(!0)}),g.on("blur mouseleave touchend touchcancel",function(){r[0].activeElement!==g[0]&&f(!1)}),s.$watch("visible",function(e){e?m():p()});var b=n.throttle(function(){s.visible&&h()});angular.element(t).on("resize",b),s.$on("$destroy",function(){s.visible=!1,u.remove(),angular.element(t).off("resize",b)})}var c=400,l=8;return{restrict:"E",transclude:!0,template:'<div class="md-background"></div><div class="md-content" ng-transclude></div>',scope:{visible:"=?mdVisible",delay:"=?mdDelay"},link:s}}angular.module("material.components.tooltip",["material.core"]).directive("mdTooltip",e),e.$inject=["$timeout","$window","$$rAF","$document","$mdUtil","$mdTheming","$rootElement"]}(),function(){"use strict";angular.module("material.components.whiteframe",[])}(),function(){"use strict";function e(e){function t(t,r,i,o){function a(){var e=c.getSelectedItem(),i=!e||c.count()<2||s;if(r.css("display",i?"none":"block"),!i&&t.pagination&&t.pagination.tabData){var o=c.getSelectedIndex(),a=t.pagination.tabData.tabs[o]||{left:0,right:0,width:0},l=r.parent().prop("offsetWidth")-a.right,u=["md-transition-left","md-transition-right","md-no-transition"],d=n>o?0:o>n?1:2;r.removeClass(u.join(" ")).addClass(u[d]).css({left:a.left+"px",right:l+"px"}),n=o}}var s=!!o[0],c=o[1],l=e.throttle(a);c.inkBarElement=r,t.$on("$mdTabsPaginationChanged",l)}var n=0;return{restrict:"E",require:["^?mdNoBar","^mdTabs"],link:t}}angular.module("material.components.tabs").directive("mdTabsInkBar",e),e.$inject=["$$rAF"]}(),function(){"use strict";function e(e,t,n,r,i,o){function a(a,c,l,u){function d(e,t){if(e){var n=v(e);M.active&&n!==M.page?(t&&t.element.blur(),$(n).then(function(){w=!1,e.element.focus()})):e.element.focus()}}function f(e){var t=M.tabData,n=Math.max(0,Math.min(t.pages.length-1,M.page+e)),r=t.pages[n][e>0?"firstTabIndex":"lastTabIndex"],i=u.itemAt(r);w=!0,d(i)}function m(){function e(){E.css("width","9999px"),angular.forEach(o.tabs,function(e){angular.element(e.element).css("margin-left",e.filler+"px")}),$(v(u.getSelectedItem()))}function t(){p(0),E.css("width",""),r.css("width",""),r.css("margin-left",""),M.page=null,M.active=!1}function n(){return l||a.$watch(function(){i(function(){c[0].offsetParent&&(angular.isFunction(l)&&l(),y(),l=null)},0,!1)})}if(c.prop("offsetParent")){var r=c.find("md-tab");t();var o=M.tabData=g(),s=M.active=o.pages.length>1;s&&e(),a.$evalAsync(function(){a.$broadcast("$mdTabsPaginationChanged")})}else var l=n()}function p(t){function n(t){t.target===E[0]&&(E.off(e.CSS.TRANSITIONEND,n),i.resolve())}if(u.pagingOffset===t)return r.when();var i=r.defer();return u.$$pagingOffset=t,E.css(e.CSS.TRANSFORM,"translate3d("+t+"px,0,0)"),E.on(e.CSS.TRANSITIONEND,n),i.promise}function h(){switch(a.stretchTabs){case"never":return!1;case"always":return!0;default:return o("sm")}}function g(e){function t(){var e=1===d.length?r:i,t=Math.min(Math.floor(e/l),b.length),n=Math.floor(e/t);return o.css("width",n+"px"),g(!0)}var n,r=c.parent().prop("offsetWidth"),i=r-s-1,o=angular.element(b),a=0,l=0,u=[],d=[];return o.css("max-width",""),angular.forEach(b,function(e,t){var o=Math.min(i,e.offsetWidth),s={element:e,left:a,width:o,right:a+o,filler:0};s.page=Math.ceil(s.right/(1===d.length&&t===b.length-1?r:i))-1,s.page>=d.length?(s.filler=i*s.page-s.left,s.right+=s.filler,s.left+=s.filler,n={left:s.left,firstTabIndex:t,lastTabIndex:t,tabs:[s]},d.push(n)):(n.lastTabIndex=t,n.tabs.push(s)),a=s.right,l=Math.max(l,o),u.push(s)}),o.css("max-width",i+"px"),!e&&h()?t():{width:a,max:l,tabs:u,pages:d,tabElements:b}}function v(e){var t=u.indexOf(e);if(-1===t)return 0;var n=M.tabData;return n?n.tabs[t].page:0}function $(e){if(e!==M.page){var t=M.tabData.pages.length-1;return 0>e&&(e=0),e>t&&(e=t),M.hasPrev=e>0,M.hasNext=t>e,M.page=e,a.$broadcast("$mdTabsPaginationChanged"),p(-M.tabData.pages[e].left)}}var b=c[0].getElementsByTagName("md-tab"),y=n.throttle(m),E=c.children(),w=!1,M=a.pagination={page:-1,active:!1,clickNext:function(){w||f(1)},clickPrevious:function(){w||f(-1)}};a.$on("$mdTabsChanged",y),angular.element(t).on("resize",y),a.$on("$destroy",function(){angular.element(t).off("resize",y)}),a.$watch(function(){return u.tabToFocus},d)}var s=64;return{restrict:"A",require:"^mdTabs",link:a}}angular.module("material.components.tabs").directive("mdTabsPagination",e),e.$inject=["$mdConstant","$window","$$rAF","$$q","$timeout","$mdMedia"]}(),function(){"use strict";function e(e,t,n,r,i,o,a,s){function c(){return v(e.$parent)}function l(t,n){h.content.length&&(h.contentContainer.append(h.content),h.contentScope=e.$parent.$new(),t.append(h.contentContainer),r(h.contentContainer)(h.contentScope),n===!0&&s(function(){o.disconnectScope(h.contentScope)},0,!1))}function u(){i.leave(h.contentContainer).then(function(){h.contentScope&&h.contentScope.$destroy(),h.contentScope=null})}function d(e){h.contentContainer[e?"addClass":"removeClass"]("md-transition-rtl")}function f(n){o.reconnectScope(h.contentScope),t.addClass("active").attr({"aria-selected":!0,tabIndex:0}).on("$md.swipeleft $md.swiperight",p),d(n),i.removeClass(h.contentContainer,"ng-hide"),e.onSelect()}function m(n){o.disconnectScope(h.contentScope),t.removeClass("active").attr({"aria-selected":!1,tabIndex:-1}).off("$md.swipeleft $md.swiperight",p),d(n),i.addClass(h.contentContainer,"ng-hide"),e.onDeselect()}function p(t){e.$apply(function(){g.select(/left/.test(t.type)?g.next():g.previous())})}var h=this,g=t.controller("mdTabs");h.contentContainer=angular.element('<div class="md-tab-content ng-hide">'),h.element=t,h.isDisabled=c,h.onAdd=l,h.onRemove=u,h.onSelect=f,h.onDeselect=m;var v=a(n.ngDisabled)}angular.module("material.components.tabs").controller("$mdTab",e),e.$inject=["$scope","$element","$attrs","$compile","$animate","$mdUtil","$parse","$timeout"]}(),function(){"use strict";function e(e,t,n,r,i){function o(o,a){var s=o.find("md-tab-label");s.length?s.remove():s=angular.isDefined(a.label)?angular.element("<md-tab-label>").html(a.label):angular.element("<md-tab-label>").append(o.contents().remove());var c=o.contents().remove();return function(o,a,l,u){function d(){var e=s.clone();a.append(e),t(e)(o.$parent),$.content=c.clone()}function f(){o.$apply(function(){b.select($),b.focus($)})}function m(e){e.keyCode==r.KEY_CODE.SPACE||e.keyCode==r.KEY_CODE.ENTER?(a.triggerHandler("click"),e.preventDefault()):e.keyCode===r.KEY_CODE.LEFT_ARROW?o.$evalAsync(function(){b.focus(b.previous($))}):e.keyCode===r.KEY_CODE.RIGHT_ARROW&&o.$evalAsync(function(){b.focus(b.next($))})}function p(){o.$watch("$parent.$index",function(e){b.move($,e)})}function h(){function e(e){var t=b.getSelectedItem()===$;e&&!t?b.select($):!e&&t&&b.deselect($)}var t=o.$parent.$watch("!!("+l.mdActive+")",e);o.$on("$destroy",t)}function g(){function e(e){a.attr("aria-disabled",e);var t=b.getSelectedItem()===$;t&&e&&b.select(b.next()||b.previous())}o.$watch($.isDisabled,e)}function v(){var e=l.id||"tab_"+n.nextUid();if(a.attr({id:e,role:"tab",tabIndex:-1}),c.length){var t="content_"+e;a.attr("aria-controls")||a.attr("aria-controls",t),$.contentContainer.attr({id:t,role:"tabpanel","aria-labelledby":e})}}var $=u[0],b=u[1];i(a.addClass.bind(a,"md-tab-themed"),0,!1),o.$watch(function(){return l.label},function(){i(function(){b.scope.$broadcast("$mdTabsChanged")},0,!1)}),d(),v();var y=e.attachTabBehavior(o,a,{colorElement:b.inkBarElement});b.add($),o.$on("$destroy",function(){y(),b.remove($)}),a.on("$destroy",function(){i(function(){b.scope.$broadcast("$mdTabsChanged")},0,!1)}),angular.isDefined(l.ngClick)||a.on("click",f),a.on("keydown",m),angular.isNumber(o.$parent.$index)&&p(),angular.isDefined(l.mdActive)&&h(),g()}}return{restrict:"E",require:["mdTab","^mdTabs"],controller:"$mdTab",scope:{onSelect:"&mdOnSelect",onDeselect:"&mdOnDeselect",label:"@"},compile:o}}angular.module("material.components.tabs").directive("mdTab",e),e.$inject=["$mdInkRipple","$compile","$mdUtil","$mdConstant","$timeout"]}(),function(){"use strict";function e(e,t,n){function r(){return v(e.selectedIndex)}function i(){return e.selectedIndex}function o(t,n){p.add(t,n),angular.isDefined(t.element.attr("md-active"))||-1!==e.selectedIndex&&angular.isNumber(e.selectedIndex)&&e.selectedIndex!==h.indexOf(t)?t.onAdd(h.contentArea,!0):(t.onAdd(h.contentArea,!1),h.select(t)),e.$broadcast("$mdTabsChanged")}function a(t,n){if(p.contains(t)&&!n){var i=r()===t,o=f()||d();u(t),p.remove(t),t.onRemove(),e.$broadcast("$mdTabsChanged"),i&&c(o)}}function s(t,n){var i=r()===t;p.remove(t),p.add(t,n),i&&c(t),e.$broadcast("$mdTabsChanged")}function c(t,n){!t||t.isSelected||t.isDisabled()||p.contains(t)&&(angular.isDefined(n)||(n=g(t)<e.selectedIndex),u(r(),n),e.selectedIndex=g(t),t.isSelected=!0,t.onSelect(n),e.$broadcast("$mdTabsChanged"))}function l(e){h.tabToFocus=e}function u(t,n){t&&t.isSelected&&p.contains(t)&&(e.selectedIndex=-1,t.isSelected=!1,t.onDeselect(n))}function d(e,t){return p.next(e||r(),t||m)}function f(e,t){return p.previous(e||r(),t||m)}function m(e){return e&&!e.isDisabled()}var p=n.iterator([],!1),h=this;h.$element=t,h.scope=e;var g=(h.contentArea=angular.element(t[0].querySelector(".md-tabs-content")),h.inRange=p.inRange,h.indexOf=p.indexOf),v=h.itemAt=p.itemAt;h.count=p.count,h.getSelectedItem=r,h.getSelectedIndex=i,h.add=o,h.remove=a,h.move=s,h.select=c,h.focus=l,h.deselect=u,h.next=d,h.previous=f,e.$on("$destroy",function(){u(r());for(var e=p.count()-1;e>=0;e--)a(p[e],!0)})}angular.module("material.components.tabs").controller("$mdTabs",e),e.$inject=["$scope","$element","$mdUtil","$timeout"]}(),function(){"use strict";function e(e){function t(t,n,r,i,o){function a(){n.attr("role","tablist")}function s(){t.$watch("selectedIndex",function(e,t){if(t!=e){var n=t>e;if(i.deselect(i.itemAt(t),n),i.inRange(e)){for(var r=i.itemAt(e);r&&r.isDisabled();)r=e>t?i.next(r):i.previous(r);i.select(r,n)}}})}t.stretchTabs=r.hasOwnProperty("mdStretchTabs")?r.mdStretchTabs||"always":"auto",e(n),a(),s(),o(t.$parent,function(e){angular.element(n[0].querySelector(".md-header-items")).append(e)})}return{restrict:"E",controller:"$mdTabs",require:"mdTabs",transclude:!0,scope:{selectedIndex:"=?mdSelected"},template:'<section class="md-header" ng-class="{\'md-paginating\': pagination.active}"><button class="md-paginator md-prev" ng-if="pagination.active && pagination.hasPrev" ng-click="pagination.clickPrevious()" aria-hidden="true"></button><div class="md-header-items-container" md-tabs-pagination><div class="md-header-items"><md-tabs-ink-bar></md-tabs-ink-bar></div></div><button class="md-paginator md-next" ng-if="pagination.active && pagination.hasNext" ng-click="pagination.clickNext()" aria-hidden="true"></button></section><section class="md-tabs-content"></section>',link:t}}angular.module("material.components.tabs").directive("mdTabs",e),e.$inject=["$mdTheming"]}(),angular.module("material.core").constant("$MD_THEME_CSS","md-backdrop.md-opaque.md-THEME_NAME-theme {  background-color: '{{foreground-4-0.5}}'; }md-bottom-sheet.md-THEME_NAME-theme {  background-color: '{{background-50}}';  border-top-color: '{{background-300}}'; }  md-bottom-sheet.md-THEME_NAME-theme.md-list md-item {    color: '{{foreground-1}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    background-color: '{{background-50}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    color: '{{foreground-1}}'; }md-toolbar .md-button.md-THEME_NAME-theme.md-fab {  background-color: white; }.md-button.md-THEME_NAME-theme {  border-radius: 3px; }  .md-button.md-THEME_NAME-theme:not([disabled]):hover, .md-button.md-THEME_NAME-theme:not([disabled]):focus {    background-color: '{{background-500-0.2}}'; }  .md-button.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised, .md-button.md-THEME_NAME-theme.md-primary.md-fab {      color: '{{primary-contrast}}';      background-color: '{{primary-color}}'; }      .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):focus, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):focus {        background-color: '{{primary-600}}'; }  .md-button.md-THEME_NAME-theme.md-fab {    border-radius: 50%;    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):focus {      background-color: '{{accent-A700}}'; }  .md-button.md-THEME_NAME-theme.md-raised {    color: '{{background-contrast}}';    background-color: '{{background-50}}'; }    .md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-raised:not([disabled]):focus {      background-color: '{{background-200}}'; }  .md-button.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised, .md-button.md-THEME_NAME-theme.md-warn.md-fab {      color: '{{warn-contrast}}';      background-color: '{{warn-color}}'; }      .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):focus, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):focus {        background-color: '{{warn-700}}'; }  .md-button.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised, .md-button.md-THEME_NAME-theme.md-accent.md-fab {      color: '{{accent-contrast}}';      background-color: '{{accent-color}}'; }      .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):focus, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):focus {        background-color: '{{accent-700}}'; }  .md-button.md-THEME_NAME-theme[disabled], .md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled] {    color: '{{foreground-3}}';    background-color: transparent;    cursor: not-allowed; }md-card.md-THEME_NAME-theme {  border-radius: 2px; }  md-card.md-THEME_NAME-theme .md-card-image {    border-radius: 2px 2px 0 0; }md-checkbox.md-THEME_NAME-theme .md-ripple {  color: '{{accent-600}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme .md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-icon {  background-color: '{{accent-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ripple {  color: '{{primary-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon {  background-color: '{{primary-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ripple {  color: '{{warn-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon {  background-color: '{{warn-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme[disabled] .md-icon {  border-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled].md-checked .md-icon {  background-color: '{{foreground-3}}'; }md-content.md-THEME_NAME-theme {  background-color: '{{background-hue-3}}'; }md-dialog.md-THEME_NAME-theme {  border-radius: 4px;  background-color: '{{background-hue-3}}'; }  md-dialog.md-THEME_NAME-theme.md-content-overflow .md-actions {    border-top-color: '{{foreground-4}}'; }md-divider.md-THEME_NAME-theme {  border-top-color: '{{foreground-4}}'; }md-input-container.md-THEME_NAME-theme .md-input {  color: '{{foreground-1}}';  border-color: '{{foreground-4}}';  text-shadow: '{{foreground-shadow}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder, md-input-container.md-THEME_NAME-theme .md-input::-moz-placeholder, md-input-container.md-THEME_NAME-theme .md-input:-moz-placeholder, md-input-container.md-THEME_NAME-theme .md-input:-ms-input-placeholder {    color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme label, md-input-container.md-THEME_NAME-theme .md-placeholder {  text-shadow: '{{foreground-shadow}}';  color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-has-value label {  color: '{{foreground-2}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused .md-input {  border-color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused label {  color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent .md-input {  border-color: '{{accent-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent label {  color: '{{accent-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn .md-input {  border-color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn label {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input {  border-color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid label {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid ng-message, md-input-container.md-THEME_NAME-theme.md-input-invalid data-ng-message, md-input-container.md-THEME_NAME-theme.md-input-invalid x-ng-message, md-input-container.md-THEME_NAME-theme.md-input-invalid [ng-message], md-input-container.md-THEME_NAME-theme.md-input-invalid [data-ng-message], md-input-container.md-THEME_NAME-theme.md-input-invalid [x-ng-message], md-input-container.md-THEME_NAME-theme.md-input-invalid .md-char-counter {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme .md-input[disabled] {  border-bottom-color: transparent;  color: '{{foreground-3}}';  background-image: linear-gradient(to right, '{{foreground-4}}' 0%, '{{foreground-4}}' 33%, transparent 0%); }md-progress-circular.md-THEME_NAME-theme {  background-color: transparent; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-gap {    border-top-color: '{{primary-color}}';    border-bottom-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-left .md-half-circle, md-progress-circular.md-THEME_NAME-theme .md-inner .md-right .md-half-circle {    border-top-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-right .md-half-circle {    border-right-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-left .md-half-circle {    border-left-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-gap {    border-top-color: '{{warn-color}}';    border-bottom-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-left .md-half-circle, md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-right .md-half-circle {    border-top-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-right .md-half-circle {    border-right-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-left .md-half-circle {    border-left-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-gap {    border-top-color: '{{accent-color}}';    border-bottom-color: '{{accent-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-left .md-half-circle, md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-right .md-half-circle {    border-top-color: '{{accent-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-right .md-half-circle {    border-right-color: '{{accent-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-left .md-half-circle {    border-left-color: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme .md-container {  background-color: '{{primary-100}}'; }md-progress-linear.md-THEME_NAME-theme .md-bar {  background-color: '{{primary-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn .md-container {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn .md-bar {  background-color: '{{warn-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent .md-container {  background-color: '{{accent-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent .md-bar {  background-color: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-bar1 {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-dashed:before {  background: radial-gradient('{{warn-100}}' 0%, '{{warn-100}}' 16%, transparent 42%); }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-bar1 {  background-color: '{{accent-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-dashed:before {  background: radial-gradient('{{accent-100}}' 0%, '{{accent-100}}' 16%, transparent 42%); }md-radio-button.md-THEME_NAME-theme .md-off {  border-color: '{{foreground-2}}'; }md-radio-button.md-THEME_NAME-theme .md-on {  background-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked .md-off {  border-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme .md-container .md-ripple {  color: '{{accent-600}}'; }md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-on {  background-color: '{{primary-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-off {  border-color: '{{primary-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple {  color: '{{primary-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-container .md-ripple {  color: '{{primary-600}}'; }md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-on {  background-color: '{{warn-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-off {  border-color: '{{warn-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple {  color: '{{warn-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-container .md-ripple {  color: '{{warn-600}}'; }md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-off {  border-color: '{{foreground-3}}'; }md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-on {  border-color: '{{foreground-3}}'; }md-radio-group.md-THEME_NAME-theme:focus:not(:empty) {  border-color: '{{foreground-1}}'; }md-sidenav.md-THEME_NAME-theme {  background-color: '{{background-hue-3}}'; }md-slider.md-THEME_NAME-theme .md-track {  background-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme .md-track-ticks {  background-color: '{{foreground-4}}'; }md-slider.md-THEME_NAME-theme .md-focus-thumb {  background-color: '{{foreground-2}}'; }md-slider.md-THEME_NAME-theme .md-focus-ring {  border-color: '{{foreground-4}}'; }md-slider.md-THEME_NAME-theme .md-disabled-thumb {  border-color: '{{background-hue-3}}'; }md-slider.md-THEME_NAME-theme.md-min .md-thumb:after {  background-color: '{{background-hue-3}}'; }md-slider.md-THEME_NAME-theme .md-track.md-track-fill {  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme .md-thumb:after {  border-color: '{{primary-color}}';  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme .md-sign {  background-color: '{{primary-color}}'; }  md-slider.md-THEME_NAME-theme .md-sign:after {    border-top-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme .md-thumb-text {  color: '{{primary-contrast}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-track-fill {  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-thumb:after {  border-color: '{{warn-color}}';  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-sign {  background-color: '{{warn-color}}'; }  md-slider.md-THEME_NAME-theme.md-warn .md-sign:after {    border-top-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-thumb-text {  color: '{{warn-contrast}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-track-fill {  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-thumb:after {  border-color: '{{primary-color}}';  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-sign {  background-color: '{{primary-color}}'; }  md-slider.md-THEME_NAME-theme.md-primary .md-sign:after {    border-top-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-thumb-text {  color: '{{primary-contrast}}'; }md-slider.md-THEME_NAME-theme[disabled] .md-thumb:after {  border-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme[disabled]:not(.md-min) .md-thumb:after {  background-color: '{{foreground-3}}'; }.md-subheader.md-THEME_NAME-theme {  color: '{{ foreground-2-0.23 }}';  background-color: '{{background-hue-3}}'; }  .md-subheader.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme .md-thumb {  background-color: '{{background-50}}'; }md-switch.md-THEME_NAME-theme .md-bar {  background-color: '{{background-500}}'; }md-switch.md-THEME_NAME-theme.md-checked .md-thumb {  background-color: '{{accent-color}}'; }md-switch.md-THEME_NAME-theme.md-checked .md-bar {  background-color: '{{accent-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-thumb {  background-color: '{{primary-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-bar {  background-color: '{{primary-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-thumb {  background-color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-bar {  background-color: '{{warn-color-0.5}}'; }md-switch.md-THEME_NAME-theme[disabled] .md-thumb {  background-color: '{{background-400}}'; }md-switch.md-THEME_NAME-theme[disabled] .md-bar {  background-color: '{{foreground-4}}'; }md-switch.md-THEME_NAME-theme:focus .md-label:not(:empty) {  border-color: '{{foreground-1}}';  border-style: dotted; }md-tabs.md-THEME_NAME-theme .md-header {  background-color: '{{primary-color}}'; }md-tabs.md-THEME_NAME-theme.md-accent .md-header {  background-color: '{{accent-color}}'; }md-tabs.md-THEME_NAME-theme.md-accent md-tab:not([disabled]) {  color: '{{accent-100}}'; }  md-tabs.md-THEME_NAME-theme.md-accent md-tab:not([disabled]).active {    color: '{{accent-contrast}}'; }md-tabs.md-THEME_NAME-theme.md-warn .md-header {  background-color: '{{warn-color}}'; }md-tabs.md-THEME_NAME-theme.md-warn md-tab:not([disabled]) {  color: '{{warn-100}}'; }  md-tabs.md-THEME_NAME-theme.md-warn md-tab:not([disabled]).active {    color: '{{warn-contrast}}'; }md-tabs.md-THEME_NAME-theme md-tabs-ink-bar {  color: '{{primary-contrast}}';  background: '{{primary-contrast}}'; }md-tabs.md-THEME_NAME-theme md-tab {  color: '{{primary-100}}'; }  md-tabs.md-THEME_NAME-theme md-tab.active {    color: '{{primary-contrast}}'; }  md-tabs.md-THEME_NAME-theme md-tab[disabled] {    color: '{{foreground-4}}'; }  md-tabs.md-THEME_NAME-theme md-tab:focus {    color: '{{primary-contrast}}';    background-color: '{{primary-contrast-0.1}}'; }  md-tabs.md-THEME_NAME-theme md-tab .md-ripple-container {    color: '{{primary-contrast}}'; }md-input-group.md-THEME_NAME-theme input, md-input-group.md-THEME_NAME-theme textarea {  text-shadow: '{{foreground-shadow}}'; }  md-input-group.md-THEME_NAME-theme input::-webkit-input-placeholder, md-input-group.md-THEME_NAME-theme input::-moz-placeholder, md-input-group.md-THEME_NAME-theme input:-moz-placeholder, md-input-group.md-THEME_NAME-theme input:-ms-input-placeholder, md-input-group.md-THEME_NAME-theme textarea::-webkit-input-placeholder, md-input-group.md-THEME_NAME-theme textarea::-moz-placeholder, md-input-group.md-THEME_NAME-theme textarea:-moz-placeholder, md-input-group.md-THEME_NAME-theme textarea:-ms-input-placeholder {    color: '{{foreground-3}}'; }md-input-group.md-THEME_NAME-theme label {  text-shadow: '{{foreground-shadow}}';  color: '{{foreground-3}}'; }md-input-group.md-THEME_NAME-theme input, md-input-group.md-THEME_NAME-theme textarea {  color: '{{foreground-1}}';  border-color: '{{foreground-4}}'; }md-input-group.md-THEME_NAME-theme.md-input-focused input, md-input-group.md-THEME_NAME-theme.md-input-focused textarea {  border-color: '{{primary-500}}'; }md-input-group.md-THEME_NAME-theme.md-input-focused label {  color: '{{primary-500}}'; }md-input-group.md-THEME_NAME-theme.md-input-focused.md-accent input, md-input-group.md-THEME_NAME-theme.md-input-focused.md-accent textarea {  border-color: '{{accent-500}}'; }md-input-group.md-THEME_NAME-theme.md-input-focused.md-accent label {  color: '{{accent-500}}'; }md-input-group.md-THEME_NAME-theme.md-input-has-value:not(.md-input-focused) label {  color: '{{foreground-2}}'; }md-input-group.md-THEME_NAME-theme .md-input[disabled] {  border-bottom-color: '{{foreground-4}}';  color: '{{foreground-3}}'; }md-toast.md-THEME_NAME-theme {  background-color: '{{foreground-1}}';  color: '{{background-50}}'; }  md-toast.md-THEME_NAME-theme .md-button {    color: '{{background-50}}'; }    md-toast.md-THEME_NAME-theme .md-button.md-highlight {      color: '{{primary-A200}}'; }      md-toast.md-THEME_NAME-theme .md-button.md-highlight.md-accent {        color: '{{accent-A200}}'; }      md-toast.md-THEME_NAME-theme .md-button.md-highlight.md-warn {        color: '{{warn-A200}}'; }md-toolbar.md-THEME_NAME-theme {  background-color: '{{primary-color}}';  color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme .md-button {    color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme.md-accent {    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }  md-toolbar.md-THEME_NAME-theme.md-warn {    background-color: '{{warn-color}}';    color: '{{warn-contrast}}'; }md-tooltip.md-THEME_NAME-theme {  color: '{{background-A100}}'; }  md-tooltip.md-THEME_NAME-theme .md-background {    background-color: '{{foreground-2}}'; }"),function(e,t){"use strict";
t.module("ngMessages",[]).directive("ngMessages",["$compile","$animate","$templateRequest",function(e,n,r){var i="ng-active",o="ng-inactive";return{restrict:"AE",controller:function(){this.$renderNgMessageClasses=t.noop;var e=[];this.registerMessage=function(t,n){for(var r=0;r<e.length;r++)if(e[r].type==n.type){if(t!=r){var i=e[t];e[t]=e[r],t<e.length?e[r]=i:e.splice(0,r)}return}e.splice(t,0,n)},this.renderMessages=function(n,r){function i(e){return null!==e&&e!==!1&&e}n=n||{};var o;t.forEach(e,function(e){o&&!r||!i(n[e.type])?e.detach():(e.attach(),o=!0)}),this.renderElementClasses(o)}},require:"ngMessages",link:function(a,s,c,l){l.renderElementClasses=function(e){e?n.setClass(s,i,o):n.setClass(s,o,i)};var u,d=t.isString(c.ngMessagesMultiple)||t.isString(c.multiple),f=c.ngMessages||c["for"];a.$watchCollection(f,function(e){u=e,l.renderMessages(e,d)});var m=c.ngMessagesInclude||c.include;m&&r(m).then(function(n){var r,i=t.element("<div/>").html(n);t.forEach(i.children(),function(n){n=t.element(n),r?r.after(n):s.prepend(n),r=n,e(n)(a)}),l.renderMessages(u,d)})}}}]).directive("ngMessage",["$animate",function(e){var t=8;return{require:"^ngMessages",transclude:"element",terminal:!0,restrict:"AE",link:function(n,r,i,o,a){for(var s,c,l=r[0],u=l.parentNode,d=0,f=0;d<u.childNodes.length;d++){var m=u.childNodes[d];if(m.nodeType==t&&m.nodeValue.indexOf("ngMessage")>=0){if(m===l){s=f;break}f++}}o.registerMessage(s,{type:i.ngMessage||i.when,attach:function(){c||a(n,function(t){e.enter(t,null,r),c=t})},detach:function(){c&&(e.leave(c),c=null)}})}}}])}(window,window.angular),angular.module("mdDateTime",[]).directive("timeDatePicker",["$filter","$sce","$rootScope","$parse",function(e,t,n,r){var i;return i=e("date"),{restrict:"AE",replace:!0,scope:{_modelValue:"=ngModel"},require:"ngModel",templateUrl:"md-date-time.tpl.html",link:function(e,t,n,i){var o,a;return n.$observe("defaultMode",function(t){return e._mode=null!=t?t:"date"}),n.$observe("displayMode",function(t){return e._displayMode=t}),n.$observe("orientation",function(t){return e._verticalMode="true"===t}),n.$observe("displayTwentyfour",function(t){return e._hours24=null!=t&&t}),n.$observe("mindate",function(t){return null!=t&&angular.isDate(t)?e.restrictions.mindate=t:void 0}),n.$observe("maxdate",function(t){return null!=t&&angular.isDate(t)?e.restrictions.maxdate=t:void 0}),i.$render=function(){return e.setDate(i.$modelValue)},a=r(n.onSave),o=r(n.onCancel),e.save=function(){return e._modelValue=e.date,i.$setDirty(),a(e.$parent,{$value:e.date})},e.cancel=function(){return o(e.$parent,{}),i.$render()}},controller:["$scope",function(e){var n;return e.restrictions={mindate:void 0,maxdate:void 0},e.setDate=function(t){return e.date=null!=t?new Date(t):new Date,e.calendar._year=e.date.getFullYear(),e.calendar._month=e.date.getMonth(),e.clock._minutes=e.date.getMinutes(),e.clock._hours=e._hours24?e.date.getHours():e.date.getHours()%12,e._hours24||0!==e.clock._hours?void 0:e.clock._hours=12},e.display={fullTitle:function(){return i(e.date,"EEEE d MMMM yyyy, h:mm a")},title:function(){return"date"===e._mode?i(e.date,"date"===e._displayMode?"EEEE":"EEEE h:mm a"):i(e.date,"MMMM d yyyy")},"super":function(){return"date"===e._mode?i(e.date,"MMM"):""},main:function(){return t.trustAsHtml("date"===e._mode?i(e.date,"d"):""+i(e.date,"h:mm")+"<small>"+i(e.date,"a")+"</small>")},sub:function(){return"date"===e._mode?i(e.date,"yyyy"):i(e.date,"HH:mm")}},e.calendar={_month:0,_year:0,_months:function(){var e,t;for(t=[],n=e=0;11>=e;n=++e)t.push(i(new Date(0,n),"MMMM"));return t}(),offsetMargin:function(){return""+2.7*new Date(this._year,this._month).getDay()+"rem"},isVisible:function(e){return new Date(this._year,this._month,e).getMonth()===this._month},"class":function(t){return null!=e.date&&new Date(this._year,this._month,t).getTime()===new Date(e.date.getTime()).setHours(0,0,0,0)?"selected":new Date(this._year,this._month,t).getTime()===(new Date).setHours(0,0,0,0)?"today":""},select:function(t){return e.date.setFullYear(this._year,this._month,t)},monthChange:function(){return(null==this._year||isNaN(this._year))&&(this._year=(new Date).getFullYear()),e.date.setFullYear(this._year,this._month),e.date.getMonth()!==this._month?e.date.setDate(0):void 0},_incMonth:function(e){for(this._month+=e;this._month<0||this._month>11;)this._month<0?(this._month+=12,this._year--):(this._month-=12,this._year++);return this.monthChange()}},e.clock={_minutes:0,_hours:0,_incHours:function(t){return this._hours=e._hours24?Math.max(0,Math.min(23,this._hours+t)):Math.max(1,Math.min(12,this._hours+t)),isNaN(this._hours)?this._hours=0:void 0},_incMinutes:function(e){return this._minutes=Math.max(0,Math.min(59,this._minutes+e)),isNaN(this._minutes)?this._minutes=0:void 0},setAM:function(t){return null==t&&(t=!this.isAM()),t&&!this.isAM()?e.date.setHours(e.date.getHours()-12):!t&&this.isAM()?e.date.setHours(e.date.getHours()+12):void 0},isAM:function(){return e.date.getHours()<12}},e.$watch("clock._minutes",function(t){return null!=t&&t!==e.date.getMinutes()&&!isNaN(t)&&t>=0&&59>=t?e.date.setMinutes(t):void 0}),e.$watch("clock._hours",function(t){return null==t||isNaN(t)||(e._hours24||(24===t?t=12:12===t?t=0:e.clock.isAM()||(t+=12)),t===e.date.getHours())?void 0:e.date.setHours(t)}),e.setNow=function(){return e.setDate()},e._mode="date",e.modeClass=function(){return null!=e._displayMode&&(e._mode=e._displayMode),""+(null!=e._verticalMode&&e._verticalMode?"vertical ":"")+("full"===e._displayMode?"full-mode":"time"===e._displayMode?"time-only":"date"===e._displayMode?"date-only":"date"===e._mode?"date-mode":"time-mode")},e.modeSwitch=function(){var t;return e._mode=null!=(t=e._displayMode)?t:"date"===e._mode?"time":"date"},e.modeSwitchText=function(){return"date"===e._mode?"Clock":"Calendar"}}]}}]),angular.module("mdDateTime").run(["$templateCache",function(e){e.put("md-date-time.tpl.html",'<div ng-class="modeClass()" class="time-date"><div ng-click="modeSwitch()" aria-label="Switch to {{modeSwitchText()}}" class="display"><div class="title">{{display.title()}}</div><div class="content"><div class="super-title">{{display.super()}}</div><div ng-bind-html="display.main()" class="main-title"></div><div class="sub-title">{{display.sub()}}</div></div></div><div class="control"><div class="full-title">{{display.fullTitle()}}</div><div class="slider"><div class="date-control"><div class="title"><md-button ng-click="calendar._incMonth(-1)" aria-label="Previous Month" style="float: left"><i class="fa fa-caret-left"></i></md-button><span class="month-part">{{date | date:\'MMMM\'}}<select ng-model="calendar._month" ng-change="calendar.monthChange()" ng-options="calendar._months.indexOf(month) as month for month in calendar._months"></select></span><input ng-model="calendar._year" ng-change="calendar.monthChange()" type="number" class="year-part"><md-button ng-click="calendar._incMonth(1)" aria-label="Next Month" style="float: right"><i class="fa fa-caret-right"></i></md-button></div><div class="headers"><div class="day-cell">S</div><div class="day-cell">M</div><div class="day-cell">T</div><div class="day-cell">W</div><div class="day-cell">T</div><div class="day-cell">F</div><div class="day-cell">S</div></div><div class="days"><md-button ng-style="{\'margin-left\': calendar.offsetMargin()}" ng-class="calendar.class(1)" ng-show="calendar.isVisible(1)" ng-click="calendar.select(1)" class="day-cell">1</md-button><md-button ng-class="calendar.class(2)" ng-show="calendar.isVisible(2)" ng-click="calendar.select(2)" class="day-cell">2</md-button><md-button ng-class="calendar.class(3)" ng-show="calendar.isVisible(3)" ng-click="calendar.select(3)" class="day-cell">3</md-button><md-button ng-class="calendar.class(4)" ng-show="calendar.isVisible(4)" ng-click="calendar.select(4)" class="day-cell">4</md-button><md-button ng-class="calendar.class(5)" ng-show="calendar.isVisible(5)" ng-click="calendar.select(5)" class="day-cell">5</md-button><md-button ng-class="calendar.class(6)" ng-show="calendar.isVisible(6)" ng-click="calendar.select(6)" class="day-cell">6</md-button><md-button ng-class="calendar.class(7)" ng-show="calendar.isVisible(7)" ng-click="calendar.select(7)" class="day-cell">7</md-button><md-button ng-class="calendar.class(8)" ng-show="calendar.isVisible(8)" ng-click="calendar.select(8)" class="day-cell">8</md-button><md-button ng-class="calendar.class(9)" ng-show="calendar.isVisible(9)" ng-click="calendar.select(9)" class="day-cell">9</md-button><md-button ng-class="calendar.class(10)" ng-show="calendar.isVisible(10)" ng-click="calendar.select(10)" class="day-cell">10</md-button><md-button ng-class="calendar.class(11)" ng-show="calendar.isVisible(11)" ng-click="calendar.select(11)" class="day-cell">11</md-button><md-button ng-class="calendar.class(12)" ng-show="calendar.isVisible(12)" ng-click="calendar.select(12)" class="day-cell">12</md-button><md-button ng-class="calendar.class(13)" ng-show="calendar.isVisible(13)" ng-click="calendar.select(13)" class="day-cell">13</md-button><md-button ng-class="calendar.class(14)" ng-show="calendar.isVisible(14)" ng-click="calendar.select(14)" class="day-cell">14</md-button><md-button ng-class="calendar.class(15)" ng-show="calendar.isVisible(15)" ng-click="calendar.select(15)" class="day-cell">15</md-button><md-button ng-class="calendar.class(16)" ng-show="calendar.isVisible(16)" ng-click="calendar.select(16)" class="day-cell">16</md-button><md-button ng-class="calendar.class(17)" ng-show="calendar.isVisible(17)" ng-click="calendar.select(17)" class="day-cell">17</md-button><md-button ng-class="calendar.class(18)" ng-show="calendar.isVisible(18)" ng-click="calendar.select(18)" class="day-cell">18</md-button><md-button ng-class="calendar.class(19)" ng-show="calendar.isVisible(19)" ng-click="calendar.select(19)" class="day-cell">19</md-button><md-button ng-class="calendar.class(20)" ng-show="calendar.isVisible(20)" ng-click="calendar.select(20)" class="day-cell">20</md-button><md-button ng-class="calendar.class(21)" ng-show="calendar.isVisible(21)" ng-click="calendar.select(21)" class="day-cell">21</md-button><md-button ng-class="calendar.class(22)" ng-show="calendar.isVisible(22)" ng-click="calendar.select(22)" class="day-cell">22</md-button><md-button ng-class="calendar.class(23)" ng-show="calendar.isVisible(23)" ng-click="calendar.select(23)" class="day-cell">23</md-button><md-button ng-class="calendar.class(24)" ng-show="calendar.isVisible(24)" ng-click="calendar.select(24)" class="day-cell">24</md-button><md-button ng-class="calendar.class(25)" ng-show="calendar.isVisible(25)" ng-click="calendar.select(25)" class="day-cell">25</md-button><md-button ng-class="calendar.class(26)" ng-show="calendar.isVisible(26)" ng-click="calendar.select(26)" class="day-cell">26</md-button><md-button ng-class="calendar.class(27)" ng-show="calendar.isVisible(27)" ng-click="calendar.select(27)" class="day-cell">27</md-button><md-button ng-class="calendar.class(28)" ng-show="calendar.isVisible(28)" ng-click="calendar.select(28)" class="day-cell">28</md-button><md-button ng-class="calendar.class(29)" ng-show="calendar.isVisible(29)" ng-click="calendar.select(29)" class="day-cell">29</md-button><md-button ng-class="calendar.class(30)" ng-show="calendar.isVisible(30)" ng-click="calendar.select(30)" class="day-cell">30</md-button><md-button ng-class="calendar.class(31)" ng-show="calendar.isVisible(31)" ng-click="calendar.select(31)" class="day-cell">31</md-button></div></div><md-button ng-click="modeSwitch()" aria-label="Switch to {{modeSwitchText()}}" class="switch-control"><i class="fa fa-clock-o"></i><i class="fa fa-calendar"></i><span class="visuallyhidden">{{modeSwitchText()}}</span></md-button><div class="time-control"><div class="time-inputs"><input type="number" min="{{_hours24 ? 0 : 1}}" max="{{_hours24 ? 23 : 12}}" ng-model="clock._hours"><md-button ng-click="clock._incHours(1)" aria-label="Increment Hours" class="hours up"><i class="fa fa-caret-up"></i></md-button><md-button ng-click="clock._incHours(-1)" aria-label="Decrement Hours" class="hours down"><i class="fa fa-caret-down"></i></md-button><input type="number" min="0" max="59" ng-model="clock._minutes"><md-button ng-click="clock._incMinutes(1)" aria-label="Increment Minutes" class="minutes up"><i class="fa fa-caret-up"></i></md-button><md-button ng-click="clock._incMinutes(-1)" aria-label="Decrement Minutes" class="minutes down"><i class="fa fa-caret-down"></i></md-button></div><div ng-if="!_hours24" class="buttons"><md-button ng-click="clock.setAM()" aria-label="Switch AM/PM">{{date | date:\'a\'}}</md-button></div></div></div></div><div class="buttons"><md-button ng-click="setNow()" aria-label="Set To Current {{ _dispalyMode == \'date\' ? \'Date\' : \'Date/Time\'}}">Now</md-button><md-button ng-click="cancel()" aria-label="Cancel">Cancel</md-button><md-button ng-click="save()" aria-label="Save">Save</md-button></div></div>')}]);var ngMap=angular.module("ngMap",[]);ngMap.service("Attr2Options",["$parse","NavigatorGeolocation","GeoCoder",function($parse,NavigatorGeolocation,GeoCoder){var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,orgAttributes=function(e){e.length>0&&(e=e[0]);for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];t[r.name]=r.value}return t},camelCase=function(e){return e.replace(SPECIAL_CHARS_REGEXP,function(e,t,n,r){return r?n.toUpperCase():n}).replace(MOZ_HACK_REGEXP,"Moz$1")},JSONize=function(e){try{return JSON.parse(e),e}catch(t){return e.replace(/([\$\w]+)\s*:/g,function(e,t){return'"'+t+'":'}).replace(/'([^']+)'/g,function(e,t){return'"'+t+'"'})}},toOptionValue=function(input,options){var output,key=options.key,scope=options.scope;try{var num=Number(input);if(isNaN(num))throw"Not a number";output=num}catch(err){try{if(input.match(/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/)&&(input="["+input+"]"),output=JSON.parse(JSONize(input)),output instanceof Array){var t1stEl=output[0];if(t1stEl.constructor==Object);else if(t1stEl.constructor==Array)output=output.map(function(e){return new google.maps.LatLng(e[0],e[1])});else if(!isNaN(parseFloat(t1stEl))&&isFinite(t1stEl))return new google.maps.LatLng(output[0],output[1])}}catch(err2){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+input;output=eval(exp)}catch(e){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(e){output=input}else if(input.match(/^[A-Z]+$/))try{var capitalizedKey=key.charAt(0).toUpperCase()+key.slice(1);key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),output=google.maps.weather[capitalizedKey][input]):output=google.maps[capitalizedKey][input]}catch(e){output=input}else output=input}}return output},setDelayedGeoLocation=function(e,t,n,r){r=r||{};var i=e.centered||r.centered,o=function(){var n=r.fallbackLocation||new google.maps.LatLng(0,0);e[t](n)};!n||n.match(/^current/i)?NavigatorGeolocation.getCurrentPosition().then(function(n){var o=n.coords.latitude,a=n.coords.longitude,s=new google.maps.LatLng(o,a);e[t](s),i&&e.map.setCenter(s),r.callback&&r.callback.apply(e)},o):GeoCoder.geocode({address:n}).then(function(n){e[t](n[0].geometry.location),i&&e.map.setCenter(n[0].geometry.location)},o)},getAttrsToObserve=function(e){var t=[];if(e["ng-repeat"]||e.ngRepeat);else for(var n in e){var r=e[n];r&&r.match(/\{\{.*\}\}/)&&t.push(camelCase(n))}return t},observeAttrSetObj=function(e,t,n){var r=getAttrsToObserve(e);Object.keys(r).length;for(var i=0;i<r.length;i++)observeAndSet(t,r[i],n)},observeAndSet=function(e,t,n){e.$observe(t,function(e){if(e){var r=camelCase("set-"+t),i=toOptionValue(e,{key:t});n[r]&&(t.match(/center|position/)&&"string"==typeof i?setDelayedGeoLocation(n,r,i):n[r](i))}})};return{filter:function(e){var t={};for(var n in e)n.match(/^\$/)||n.match(/^ng[A-Z]/)||(t[n]=e[n]);return t},getOptions:function(e,t){var n={};for(var r in e)if(e[r]){if(r.match(/^on[A-Z]/))continue;if(r.match(/ControlOptions$/))continue;n[r]=toOptionValue(e[r],{scope:t,key:r})}return n},getEvents:function(e,t){var n={},r=function(e){return"_"+e.toLowerCase()},i=function(t){var n=t.match(/([^\(]+)\(([^\)]*)\)/),r=n[1],i=n[2].replace(/event[ ,]*/,""),o=e.$eval("["+i+"]");return function(t){function n(e,t){return e[t]}f=r.split(".").reduce(n,e),f.apply(this,[t].concat(o)),e.$apply()}};for(var o in t)if(t[o]){if(!o.match(/^on[A-Z]/))continue;var a=o.replace(/^on/,"");a=a.charAt(0).toLowerCase()+a.slice(1),a=a.replace(/([A-Z])/g,r);var s=t[o];n[a]=new i(s)}return n},getControlOptions:function(e){var t={};if("object"!=typeof e)return!1;for(var n in e)if(e[n]){if(!n.match(/(.*)ControlOptions$/))continue;var r=e[n],i=r.replace(/'/g,'"');i=i.replace(/([^"]+)|("[^"]+")/g,function(e,t,n){return t?t.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):n});try{var o=JSON.parse(i);for(var a in o)if(o[a]){var s=o[a];if("string"==typeof s?s=s.toUpperCase():"mapTypeIds"===a&&(s=s.map(function(e){return e.match(/^[A-Z]+$/)?google.maps.MapTypeId[e.toUpperCase()]:e})),"style"===a){var c=n.charAt(0).toUpperCase()+n.slice(1),l=c.replace(/Options$/,"")+"Style";o[a]=google.maps[l][s]}else o[a]="position"===a?google.maps.ControlPosition[s]:s}t[n]=o}catch(u){}}return t},toOptionValue:toOptionValue,camelCase:camelCase,setDelayedGeoLocation:setDelayedGeoLocation,getAttrsToObserve:getAttrsToObserve,observeAndSet:observeAndSet,observeAttrSetObj:observeAttrSetObj,orgAttributes:orgAttributes}}]),ngMap.service("GeoCoder",["$q",function(e){return{geocode:function(t){var n=e.defer(),r=new google.maps.Geocoder;return r.geocode(t,function(e,t){t==google.maps.GeocoderStatus.OK?n.resolve(e):n.reject("Geocoder failed due to: "+t)}),n.promise}}}]),ngMap.service("NavigatorGeolocation",["$q",function(e){return{getCurrentPosition:function(){var t=e.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t.resolve(e)},function(e){t.reject(e)}):t.reject("Browser Geolocation service failed."),t.promise},watchPosition:function(){return"TODO"},clearWatch:function(){return"TODO"}}}]),ngMap.service("StreetView",["$q",function(e){return{getPanorama:function(t,n){n=n||t.getCenter();var r=e.defer(),i=new google.maps.StreetViewService;return i.getPanoramaByLocation(n||t.getCenter,100,function(e,t){r.resolve(t===google.maps.StreetViewStatus.OK?e.location.pano:!1)}),r.promise},setPanorama:function(e,t){var n=new google.maps.StreetViewPanorama(e.getDiv(),{enableCloseButton:!0});n.setPano(t)}}}]),ngMap.directive("bicyclingLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.BicyclingLayer(e);for(var r in t)google.maps.event.addListener(n,r,t[r]);return n};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.orgAttributes(r),s=t.filter(i),c=t.getOptions(s),l=t.getEvents(e,s),u=n(c,l);o.addObject("bicyclingLayers",u),t.observeAttrSetObj(a,i,u)}}}]),ngMap.directive("cloudLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.weather.CloudLayer(e);for(var r in t)google.maps.event.addListener(n,r,t[r]);return n};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.orgAttributes(r),s=t.filter(i),c=t.getOptions(s),l=t.getEvents(e,s),u=n(c,l);o.addObject("cloudLayers",u),t.observeAttrSetObj(a,i,u)}}}]),ngMap.directive("customControl",["Attr2Options","$compile",function(e,t){var n=e;return{restrict:"E",require:"^map",link:function(e,r,i,o){r.css("display","none");var a=(n.orgAttributes(r),n.filter(i)),s=n.getOptions(a,e),c=n.getEvents(e,a),l=t(r.html().trim())(e),u=l[0];for(var d in c)google.maps.event.addDomListener(u,d,c[d]);o.addObject("customControls",u),e.$on("mapInitialized",function(e,t){var n=s.position;t.controls[google.maps.ControlPosition[n]].push(u)})}}}]),ngMap.directive("dynamicMapsEngineLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.visualization.DynamicMapsEngineLayer(e);for(var r in t)google.maps.event.addListener(n,r,t[r]);return n};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.filter(i),s=t.getOptions(a),c=t.getEvents(e,a,c),l=n(s,c);o.addObject("mapsEngineLayers",l)}}}]),ngMap.directive("fusionTablesLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.FusionTablesLayer(e);for(var r in t)google.maps.event.addListener(n,r,t[r]);return n};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.filter(i),s=t.getOptions(a),c=t.getEvents(e,a,c),l=n(s,c);o.addObject("fusionTablesLayers",l)}}}]),ngMap.directive("heatmapLayer",["Attr2Options","$window",function(e,t){var n=e;return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=n.filter(i),s=n.getOptions(a);if(s.data=t[i.data]||e[i.data],!(s.data instanceof Array))throw"invalid heatmap data";s.data=new google.maps.MVCArray(s.data);{var c=new google.maps.visualization.HeatmapLayer(s);n.getEvents(e,a)}o.addObject("heatmapLayers",c)}}}]),ngMap.directive("infoWindow",["Attr2Options","$compile","$timeout",function(Attr2Options,$compile,$timeout){var parser=Attr2Options,getInfoWindow=function(options,events,element){var infoWindow;if(!options.position||options.position instanceof google.maps.LatLng)infoWindow=new google.maps.InfoWindow(options);else{var address=options.position;delete options.position,infoWindow=new google.maps.InfoWindow(options);var callback=function(){infoWindow.open(infoWindow.map)};parser.setDelayedGeoLocation(infoWindow,"setPosition",address,{callback:callback})}Object.keys(events).length>0;for(var eventName in events)eventName&&google.maps.event.addListener(infoWindow,eventName,events[eventName]);var template=element.html().trim();if(1!=angular.element(template).length)throw"info-window working as a template must have a container";return infoWindow.__template=template.replace(/\s?ng-non-bindable[='"]+/,""),infoWindow.__compile=function(e){var t=$compile(infoWindow.__template)(e);e.$apply(),infoWindow.setContent(t[0])},infoWindow.__eval=function(event){var template=infoWindow.__template,_this=this;return template=template.replace(/{{(event|this)[^;\}]+}}/g,function(match){var expression=match.replace(/[{}]/g,"").replace("this.","_this.");return eval(expression)})},infoWindow};return{restrict:"E",require:"^map",link:function(e,t,n,r){t.css("display","none");var i=parser.orgAttributes(t),o=parser.filter(n),a=parser.getOptions(o,e),s=parser.getEvents(e,o),c=getInfoWindow(a,s,t);r.addObject("infoWindows",c),parser.observeAttrSetObj(i,n,c),c.visible&&e.$on("mapInitialized",function(t,n){$timeout(function(){c.__template=c.__eval.apply(this,[t]),c.__compile(e),c.map=n,c.position&&c.open(n)})}),c.visibleOnMarker&&e.$on("mapInitialized",function(t,n){$timeout(function(){var r=c.visibleOnMarker,i=n.markers[r];if(!i)throw"Invalid marker id";c.__template=c.__eval.apply(this,[t]),c.__compile(e),c.open(n,i)})}),e.showInfoWindow=e.showInfoWindow||function(t,n,i){var o=r.map.infoWindows[n];o.__template=o.__eval.apply(this,[t]),o.__compile(e),i?o.open(r.map,i):this.getPosition?o.open(r.map,this):o.open(r.map)},e.hideInfoWindow=e.hideInfoWindow||function(t,n){var i=r.map.infoWindows[n];i.__template=i.__eval.apply(this,[t]),i.__compile(e),i.close()}}}}]),ngMap.directive("kmlLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.KmlLayer(e);for(var r in t)google.maps.event.addListener(n,r,t[r]);return n};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.orgAttributes(r),s=t.filter(i),c=t.getOptions(s),l=t.getEvents(e,s),u=n(c,l);o.addObject("kmlLayers",u),t.observeAttrSetObj(a,i,u)}}}]),ngMap.directive("mapData",["Attr2Options",function(e){var t=e;return{restrict:"E",require:"^map",link:function(e,n,r){var i=t.filter(r),o=t.getOptions(i),a=t.getEvents(e,i,a);e.$on("mapInitialized",function(t,n){for(var r in o)if(r){var i=o[r];n.data[r]("function"==typeof e[i]?e[i]:i)}for(var s in a)a[s]&&n.data.addListener(s,a[s])})}}}]),ngMap.directive("mapType",["Attr2Options","$window",function(e,t){return{restrict:"E",require:"^map",link:function(e,n,r,i){var o,a=r.name;if(!a)throw"invalid map-type name";if(r.object){var s=e[r.object]?e:t;o=s[r.object],"function"==typeof o&&(o=new o)}if(!o)throw"invalid map-type object";e.$on("mapInitialized",function(e,t){t.mapTypes.set(a,o)}),i.addObject("mapTypes",o)}}}]),ngMap.directive("map",["Attr2Options","$timeout",function(e,t){function n(e,t){if(e.currentStyle)var n=e.currentStyle[t];else if(window.getComputedStyle)var n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t);return n}var r=e;return{restrict:"AE",controller:ngMap.MapController,link:function(i,o,a,s){var c=r.orgAttributes(o);i.google=google;var l=document.createElement("div");l.style.width="100%",l.style.height="100%",o.prepend(l),"block"!=n(o[0],"display")&&o.css("display","block"),n(o[0],"height").match(/^(0|auto)/)&&o.css("height","300px");var u=function(n,o){var u=new google.maps.Map(l,{});u.markers={},u.shapes={},t(function(){google.maps.event.trigger(u,"resize")}),n.zoom=n.zoom||15;var d=n.center;d?d instanceof google.maps.LatLng||(delete n.center,e.setDelayedGeoLocation(u,"setCenter",d,{fallbackLocation:f.geoFallbackCenter})):n.center=new google.maps.LatLng(0,0),u.setOptions(n);for(var m in o)m&&google.maps.event.addListener(u,m,o[m]);r.observeAttrSetObj(c,a,u),s.map=u,s.addObjects(s._objects),i.map=u,i.map.scope=i,i.$emit("mapInitialized",u),i.maps=i.maps||{},i.maps[f.id||Object.keys(i.maps).length]=u,i.$emit("mapsInitialized",i.maps)},d=r.filter(a),f=r.getOptions(d,i),m=r.getControlOptions(d),p=angular.extend(f,m),h=r.getEvents(i,d);a.initEvent?i.$on(a.initEvent,function(){!s.map&&u(p,h)}):u(p,h)}}}]),ngMap.MapController=function(){this.map=null,this._objects=[],this.addMarker=function(e){if(this.map){this.map.markers=this.map.markers||{},e.setMap(this.map),e.centered&&this.map.setCenter(e.position);var t=Object.keys(this.map.markers).length;this.map.markers[e.id||t]=e}else this._objects.push(e)},this.addShape=function(e){if(this.map){this.map.shapes=this.map.shapes||{},e.setMap(this.map);var t=Object.keys(this.map.shapes).length;this.map.shapes[e.id||t]=e}else this._objects.push(e)},this.addObject=function(e,t){if(this.map){this.map[e]=this.map[e]||{};var n=Object.keys(this.map[e]).length;this.map[e][t.id||n]=t,"infoWindows"!=e&&t.setMap&&t.setMap(this.map)}else t.groupName=e,this._objects.push(t)},this.addObjects=function(e){for(var t=0;t<e.length;t++){var n=e[t];n instanceof google.maps.Marker?this.addMarker(n):n instanceof google.maps.Circle||n instanceof google.maps.Polygon||n instanceof google.maps.Polyline||n instanceof google.maps.Rectangle||n instanceof google.maps.GroundOverlay?this.addShape(n):this.addObject(n.groupName,n)}}},ngMap.directive("mapsEngineLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.visualization.MapsEngineLayer(e);for(var r in t)google.maps.event.addListener(n,r,t[r]);return n};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.filter(i),s=t.getOptions(a),c=t.getEvents(e,a,c),l=n(s,c);o.addObject("mapsEngineLayers",l)}}}]),ngMap.directive("marker",["Attr2Options",function(e){var t=e,n=function(e,n){var r;if(e.icon instanceof Object){(""+e.icon.path).match(/^[A-Z_]+$/)&&(e.icon.path=google.maps.SymbolPath[e.icon.path]);for(var i in e.icon){var o=e.icon[i];"anchor"==i||"origin"==i?e.icon[i]=new google.maps.Point(o[0],o[1]):("size"==i||"scaledSize"==i)&&(e.icon[i]=new google.maps.Size(o[0],o[1]))}}if(e.position instanceof google.maps.LatLng)r=new google.maps.Marker(e);else{var a=e.position;e.position=new google.maps.LatLng(0,0),r=new google.maps.Marker(e),t.setDelayedGeoLocation(r,"setPosition",a)}Object.keys(n).length>0;for(var s in n)s&&google.maps.event.addListener(r,s,n[s]);return r};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.orgAttributes(r),s=t.filter(i),c=t.getOptions(s,e),l=t.getEvents(e,s);r.bind("$destroy",function(){var e=u.map.markers;for(var t in e)e[t]==u&&delete e[t];u.setMap(null)});var u=n(c,l);o.addMarker(u),t.observeAttrSetObj(a,i,u)}}}]),ngMap.directive("overlayMapType",["Attr2Options","$window",function(e,t){return{restrict:"E",require:"^map",link:function(e,n,r,i){var o,a=r.initMethod||"insertAt";if(r.object){var s=e[r.object]?e:t;o=s[r.object],"function"==typeof o&&(o=new o)}if(!o)throw"invalid map-type object";e.$on("mapInitialized",function(e,t){if("insertAt"==a){var n=parseInt(r.index,10);t.overlayMapTypes.insertAt(n,o)}else"push"==a&&t.overlayMapTypes.push(o)}),i.addObject("overlayMapTypes",o)}}}]),ngMap.directive("shape",["Attr2Options",function(e){var t=e,n=function(e){return new google.maps.LatLngBounds(e[0],e[1])},r=function(e,r){var i,o=e.name;if(delete e.name,e.icons)for(var a=0;a<e.icons.length;a++){var s=e.icons[a];s.icon.path.match(/^[A-Z_]+$/)&&(s.icon.path=google.maps.SymbolPath[s.icon.path])}switch(o){case"circle":if(e.center instanceof google.maps.LatLng)i=new google.maps.Circle(e);else{var c=e.center;e.center=new google.maps.LatLng(0,0),i=new google.maps.Circle(e),t.setDelayedGeoLocation(i,"setCenter",c)}break;case"polygon":i=new google.maps.Polygon(e);break;case"polyline":i=new google.maps.Polyline(e);break;case"rectangle":e.bounds&&(e.bounds=n(e.bounds)),i=new google.maps.Rectangle(e);break;case"groundOverlay":case"image":var l=e.url,u=n(e.bounds),d={opacity:e.opacity,clickable:e.clickable,id:e.id};i=new google.maps.GroundOverlay(l,u,d)}for(var f in r)r[f]&&google.maps.event.addListener(i,f,r[f]);return i};return{restrict:"E",require:"^map",link:function(e,n,i,o){var a=t.orgAttributes(n),s=t.filter(i),c=t.getOptions(s),l=t.getEvents(e,s),u=r(c,l);o.addShape(u),t.observeAttrSetObj(a,i,u)}}}]),ngMap.directive("trafficLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.TrafficLayer(e);for(var r in t)google.maps.event.addListener(n,r,t[r]);return n};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.orgAttributes(r),s=t.filter(i),c=t.getOptions(s),l=t.getEvents(e,s),u=n(c,l);o.addObject("trafficLayers",u),t.observeAttrSetObj(a,i,u)}}}]),ngMap.directive("transitLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.TransitLayer(e);for(var r in t)google.maps.event.addListener(n,r,t[r]);return n};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.orgAttributes(r),s=t.filter(i),c=t.getOptions(s),l=t.getEvents(e,s),u=n(c,l);o.addObject("transitLayers",u),t.observeAttrSetObj(a,i,u)}}}]),ngMap.directive("weatherLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.weather.WeatherLayer(e);for(var r in t)google.maps.event.addListener(n,r,t[r]);return n};return{restrict:"E",require:"^map",link:function(e,r,i,o){var a=t.orgAttributes(r),s=t.filter(i),c=t.getOptions(s),l=t.getEvents(e,s),u=n(c,l);o.addObject("weatherLayers",u),t.observeAttrSetObj(a,i,u)}}}]),angular.module("ngAutocomplete",[]).directive("ngAutocomplete",function(){return{require:"ngModel",scope:{ngModel:"=",options:"=?",details:"=?"},link:function(e,t,n,r){var i,o=!1,a=function(){i={},e.options&&(o=e.options.watchEnter!==!0?!1:!0,e.options.types?(i.types=[],i.types.push(e.options.types),e.gPlace.setTypes(i.types)):e.gPlace.setTypes([]),e.options.bounds?(i.bounds=e.options.bounds,e.gPlace.setBounds(i.bounds)):e.gPlace.setBounds(null),e.options.country?(i.componentRestrictions={country:e.options.country},e.gPlace.setComponentRestrictions(i.componentRestrictions)):e.gPlace.setComponentRestrictions(null))};void 0==e.gPlace&&(e.gPlace=new google.maps.places.Autocomplete(t[0],{})),google.maps.event.addListener(e.gPlace,"place_changed",function(){var n=e.gPlace.getPlace();void 0!==n&&(void 0!==n.address_components?e.$apply(function(){e.details=n,r.$setViewValue(t.val())}):o&&s(n))});var s=function(n){var i=new google.maps.places.AutocompleteService;n.name.length>0&&i.getPlacePredictions({input:n.name,offset:n.name.length},function(n){if(null==n||0==n.length)e.$apply(function(){e.details=null
});else{var i=new google.maps.places.PlacesService(t[0]);i.getDetails({reference:n[0].reference},function(n,i){i==google.maps.GeocoderStatus.OK&&e.$apply(function(){r.$setViewValue(n.formatted_address),t.val(n.formatted_address),e.details=n;t.on("focusout",function(){t.val(n.formatted_address),t.unbind("focusout")})})})}})};r.$render=function(){var e=r.$viewValue;t.val(e)},e.watchOptions=function(){return e.options},e.$watch(e.watchOptions,function(){a()},!0)}}}),angular.module("app-controllers",["ngMaterial","ngMessages","mdDateTime","ngAutocomplete","ngMap"]).controller("AppController",["$log","$mdSidenav","$mdBottomSheet","$location","$filter","$mdDialog",function(e,t,n,r,i,o){var a=this;this.openDataTimePicker=function(t){o.show({controller:["$scope",function(e){e.save=function(e){o.hide(e)},e.cancel=function(e){o.hide(e)}}],template:'<md-dialog aria-label="Mango (Fruit)"><time-date-picker data-ng-model="app.event.when" on-save="save($value)" on-cancel="cancel($value)" data-display-mode="full"></time-date-picker></md-dialog>',targetEvent:t}).then(function(e){e&&(a.event.when=new Date(e).getTime())},function(){e.info("You cancelled the dialog.")})},this.createEvent=function(){e.info("Event created!",angular.toJson(a.event,!0))},this.resetEvent=function(){this.event={},this.event.limitTo=18,this.event.when=(new Date).getTime()},this.resetEvent()}]).controller("EventController",["$log","$mdSidenav","$mdBottomSheet","$location","$mdDialog",function(){}]).controller("EventListController",["$log","$mdSidenav","$mdBottomSheet","$location","$mdDialog",function(){this.events=[];for(var e=1;10>=e;e++)this.events.push({what:"event - "+e,where:"somewhere"+e,when:1288323623006,description:"This paragraph contains a very long word: thisisaveryveryveryveryveryverylongword. The long word will break and wrap to the next line."+e,limitTo:18,attendees:[{name:"tizio"},{name:"caio"},{name:"sempronio"}]})}]),angular.module("app",["ngRoute","ngMaterial","app-controllers"]).config(["$mdThemingProvider",function(){}]).config(["$routeProvider",function(e){e.when("/event",{templateUrl:"partials/event.html"}),e.when("/event-list",{templateUrl:"partials/event-list.html"}),e.when("/test-map",{templateUrl:"partials/test-map.html"})}]).config(["$provide","$httpProvider",function(e,t){e.factory("RgiHttpInterceptor",["$q","$rootScope",function(e,t){return{request:function(n){return t.loadingInProgress=!0,n||e.when(n)},requestError:function(n){return t.loadingInProgress=!1,e.reject(n)},response:function(n){return t.loadingInProgress=!1,n||e.when(n)},responseError:function(n){return t.loadingInProgress=!1,e.reject(n)}}}]),t.interceptors.push("RgiHttpInterceptor")}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItbWF0ZXJpYWwuanMiLCJhbmd1bGFyLmpzIiwiYXBwLmpzIiwiYW5ndWxhci1yb3V0ZS5qcyIsImFuZ3VsYXItdG91Y2guanMiLCJhbmd1bGFyLWFuaW1hdGUuanMiLCJhbmd1bGFyLWFyaWEuanMiLCJhbmd1bGFyLW1lc3NhZ2VzLmpzIiwibWQtZGF0ZS10aW1lLmpzIiwibmctbWFwLmpzIiwibmdBdXRvY29tcGxldGUuanMiLCJhcHAtY29udHJvbGxlcnMuanMiXSwibmFtZXMiOlsibWRNZWRpYUZhY3RvcnkiLCIkbWRDb25zdGFudCIsIiRyb290U2NvcGUiLCIkd2luZG93IiwiJG1kTWVkaWEiLCJxdWVyeSIsInZhbGlkYXRlZCIsInF1ZXJpZXMiLCJhbmd1bGFyIiwiaXNVbmRlZmluZWQiLCJ2YWxpZGF0ZSIsInJlc3VsdCIsInJlc3VsdHMiLCJhZGQiLCJNRURJQSIsImNoYXJBdCIsIm1hdGNoTWVkaWEiLCJhZGRMaXN0ZW5lciIsIm9uUXVlcnlDaGFuZ2UiLCJtZWRpYSIsIm1hdGNoZXMiLCJ0aGlzIiwiJGV2YWxBc3luYyIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwibWluRXJyIiwibW9kdWxlIiwiRXJyb3JDb25zdHJ1Y3RvciIsIkVycm9yIiwibWVzc2FnZSIsImkiLCJjb2RlIiwiYXJndW1lbnRzIiwicHJlZml4IiwidGVtcGxhdGUiLCJ0ZW1wbGF0ZUFyZ3MiLCJyZXBsYWNlIiwibWF0Y2giLCJpbmRleCIsInNsaWNlIiwibGVuZ3RoIiwidG9EZWJ1Z1N0cmluZyIsImVuY29kZVVSSUNvbXBvbmVudCIsImlzQXJyYXlMaWtlIiwib2JqIiwiaXNXaW5kb3ciLCJub2RlVHlwZSIsIk5PREVfVFlQRV9FTEVNRU5UIiwiaXNTdHJpbmciLCJpc0FycmF5IiwiZm9yRWFjaCIsIml0ZXJhdG9yIiwiY29udGV4dCIsImtleSIsImlzRnVuY3Rpb24iLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpc1ByaW1pdGl2ZSIsInNvcnRlZEtleXMiLCJPYmplY3QiLCJrZXlzIiwic29ydCIsImZvckVhY2hTb3J0ZWQiLCJyZXZlcnNlUGFyYW1zIiwiaXRlcmF0b3JGbiIsInZhbHVlIiwibmV4dFVpZCIsInVpZCIsInNldEhhc2hLZXkiLCJoIiwiJCRoYXNoS2V5IiwiZXh0ZW5kIiwiZHN0IiwiaWkiLCJqIiwiamoiLCJpbnQiLCJzdHIiLCJwYXJzZUludCIsImluaGVyaXQiLCJwYXJlbnQiLCJleHRyYSIsImNyZWF0ZSIsIm5vb3AiLCJpZGVudGl0eSIsIiQiLCJ2YWx1ZUZuIiwiaXNEZWZpbmVkIiwiaXNPYmplY3QiLCJpc051bWJlciIsImlzRGF0ZSIsInRvU3RyaW5nIiwiaXNSZWdFeHAiLCJpc1Njb3BlIiwiJHdhdGNoIiwiaXNGaWxlIiwiaXNGb3JtRGF0YSIsImlzQmxvYiIsImlzQm9vbGVhbiIsImlzUHJvbWlzZUxpa2UiLCJ0aGVuIiwiaXNFbGVtZW50Iiwibm9kZSIsIm5vZGVOYW1lIiwicHJvcCIsImF0dHIiLCJmaW5kIiwibWFrZU1hcCIsIml0ZW1zIiwic3BsaXQiLCJub2RlTmFtZV8iLCJlbGVtZW50IiwibG93ZXJjYXNlIiwiYXJyYXlSZW1vdmUiLCJhcnJheSIsImluZGV4T2YiLCJzcGxpY2UiLCJjb3B5Iiwic291cmNlIiwiZGVzdGluYXRpb24iLCJzdGFja1NvdXJjZSIsInN0YWNrRGVzdCIsIm5nTWluRXJyIiwicHVzaCIsIkRhdGUiLCJnZXRUaW1lIiwiUmVnRXhwIiwibGFzdEluZGV4IiwiZW1wdHlPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsInNoYWxsb3dDb3B5Iiwic3JjIiwiZXF1YWxzIiwibzEiLCJvMiIsImtleVNldCIsInQxIiwidDIiLCJjb25jYXQiLCJhcnJheTEiLCJhcnJheTIiLCJzbGljZUFyZ3MiLCJhcmdzIiwic3RhcnRJbmRleCIsImJpbmQiLCJzZWxmIiwiZm4iLCJjdXJyeUFyZ3MiLCJhcHBseSIsInRvSnNvblJlcGxhY2VyIiwidmFsIiwidG9Kc29uIiwicHJldHR5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZyb21Kc29uIiwianNvbiIsInBhcnNlIiwic3RhcnRpbmdUYWciLCJqcUxpdGUiLCJjbG9uZSIsImVtcHR5IiwiZSIsImVsZW1IdG1sIiwiYXBwZW5kIiwiaHRtbCIsIk5PREVfVFlQRV9URVhUIiwidHJ5RGVjb2RlVVJJQ29tcG9uZW50IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGFyc2VLZXlWYWx1ZSIsImtleVZhbHVlIiwia2V5X3ZhbHVlIiwidG9LZXlWYWx1ZSIsInBhcnRzIiwiYXJyYXlWYWx1ZSIsImVuY29kZVVyaVF1ZXJ5Iiwiam9pbiIsImVuY29kZVVyaVNlZ21lbnQiLCJwY3RFbmNvZGVTcGFjZXMiLCJnZXROZ0F0dHJpYnV0ZSIsIm5nQXR0ciIsIm5nQXR0clByZWZpeGVzIiwiYW5ndWxhckluaXQiLCJib290c3RyYXAiLCJhcHBFbGVtZW50IiwiY29uZmlnIiwibmFtZSIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsImNhbmRpZGF0ZSIsInF1ZXJ5U2VsZWN0b3IiLCJzdHJpY3REaSIsIm1vZHVsZXMiLCJkZWZhdWx0Q29uZmlnIiwiZG9Cb290c3RyYXAiLCJpbmplY3RvciIsInRhZyIsInVuc2hpZnQiLCIkcHJvdmlkZSIsImRlYnVnSW5mb0VuYWJsZWQiLCIkY29tcGlsZVByb3ZpZGVyIiwiY3JlYXRlSW5qZWN0b3IiLCJpbnZva2UiLCJzY29wZSIsImNvbXBpbGUiLCIkYXBwbHkiLCJkYXRhIiwiTkdfRU5BQkxFX0RFQlVHX0lORk8iLCJOR19ERUZFUl9CT09UU1RSQVAiLCJ0ZXN0IiwicmVzdW1lQm9vdHN0cmFwIiwiZXh0cmFNb2R1bGVzIiwicmVzdW1lRGVmZXJyZWRCb290c3RyYXAiLCJyZWxvYWRXaXRoRGVidWdJbmZvIiwibG9jYXRpb24iLCJyZWxvYWQiLCJnZXRUZXN0YWJpbGl0eSIsInJvb3RFbGVtZW50IiwiZ2V0Iiwic25ha2VfY2FzZSIsInNlcGFyYXRvciIsIlNOQUtFX0NBU0VfUkVHRVhQIiwibGV0dGVyIiwicG9zIiwidG9Mb3dlckNhc2UiLCJiaW5kSlF1ZXJ5Iiwib3JpZ2luYWxDbGVhbkRhdGEiLCJiaW5kSlF1ZXJ5RmlyZWQiLCJqUXVlcnkiLCJvbiIsIkpRTGl0ZVByb3RvdHlwZSIsImlzb2xhdGVTY29wZSIsImNvbnRyb2xsZXIiLCJpbmhlcml0ZWREYXRhIiwiY2xlYW5EYXRhIiwiZWxlbXMiLCJldmVudHMiLCJza2lwRGVzdHJveU9uTmV4dEpRdWVyeUNsZWFuRGF0YSIsImVsZW0iLCJfZGF0YSIsIiRkZXN0cm95IiwidHJpZ2dlckhhbmRsZXIiLCJKUUxpdGUiLCJhc3NlcnRBcmciLCJhcmciLCJyZWFzb24iLCJhc3NlcnRBcmdGbiIsImFjY2VwdEFycmF5QW5ub3RhdGlvbiIsImNvbnN0cnVjdG9yIiwiYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkiLCJnZXR0ZXIiLCJwYXRoIiwiYmluZEZuVG9TY29wZSIsImxhc3RJbnN0YW5jZSIsImxlbiIsImdldEJsb2NrTm9kZXMiLCJub2RlcyIsImVuZE5vZGUiLCJibG9ja05vZGVzIiwibmV4dFNpYmxpbmciLCJjcmVhdGVNYXAiLCJzZXR1cE1vZHVsZUxvYWRlciIsImVuc3VyZSIsImZhY3RvcnkiLCIkaW5qZWN0b3JNaW5FcnIiLCIkJG1pbkVyciIsInJlcXVpcmVzIiwiY29uZmlnRm4iLCJpbnZva2VMYXRlciIsInByb3ZpZGVyIiwibWV0aG9kIiwiaW5zZXJ0TWV0aG9kIiwicXVldWUiLCJpbnZva2VRdWV1ZSIsIm1vZHVsZUluc3RhbmNlIiwiY29uZmlnQmxvY2tzIiwicnVuQmxvY2tzIiwiX2ludm9rZVF1ZXVlIiwiX2NvbmZpZ0Jsb2NrcyIsIl9ydW5CbG9ja3MiLCJzZXJ2aWNlIiwiY29uc3RhbnQiLCJhbmltYXRpb24iLCJmaWx0ZXIiLCJkaXJlY3RpdmUiLCJydW4iLCJibG9jayIsInNlcmlhbGl6ZU9iamVjdCIsInNlZW4iLCJwdWJsaXNoRXh0ZXJuYWxBUEkiLCJ2ZXJzaW9uIiwidXBwZXJjYXNlIiwiY2FsbGJhY2tzIiwiY291bnRlciIsIiQkY3NwIiwiY3NwIiwiYW5ndWxhck1vZHVsZSIsIiRMb2NhbGVQcm92aWRlciIsIiQkc2FuaXRpemVVcmkiLCIkJFNhbml0aXplVXJpUHJvdmlkZXIiLCIkQ29tcGlsZVByb3ZpZGVyIiwiYSIsImh0bWxBbmNob3JEaXJlY3RpdmUiLCJpbnB1dCIsImlucHV0RGlyZWN0aXZlIiwidGV4dGFyZWEiLCJmb3JtIiwiZm9ybURpcmVjdGl2ZSIsInNjcmlwdCIsInNjcmlwdERpcmVjdGl2ZSIsInNlbGVjdCIsInNlbGVjdERpcmVjdGl2ZSIsInN0eWxlIiwic3R5bGVEaXJlY3RpdmUiLCJvcHRpb24iLCJvcHRpb25EaXJlY3RpdmUiLCJuZ0JpbmQiLCJuZ0JpbmREaXJlY3RpdmUiLCJuZ0JpbmRIdG1sIiwibmdCaW5kSHRtbERpcmVjdGl2ZSIsIm5nQmluZFRlbXBsYXRlIiwibmdCaW5kVGVtcGxhdGVEaXJlY3RpdmUiLCJuZ0NsYXNzIiwibmdDbGFzc0RpcmVjdGl2ZSIsIm5nQ2xhc3NFdmVuIiwibmdDbGFzc0V2ZW5EaXJlY3RpdmUiLCJuZ0NsYXNzT2RkIiwibmdDbGFzc09kZERpcmVjdGl2ZSIsIm5nQ2xvYWsiLCJuZ0Nsb2FrRGlyZWN0aXZlIiwibmdDb250cm9sbGVyIiwibmdDb250cm9sbGVyRGlyZWN0aXZlIiwibmdGb3JtIiwibmdGb3JtRGlyZWN0aXZlIiwibmdIaWRlIiwibmdIaWRlRGlyZWN0aXZlIiwibmdJZiIsIm5nSWZEaXJlY3RpdmUiLCJuZ0luY2x1ZGUiLCJuZ0luY2x1ZGVEaXJlY3RpdmUiLCJuZ0luaXQiLCJuZ0luaXREaXJlY3RpdmUiLCJuZ05vbkJpbmRhYmxlIiwibmdOb25CaW5kYWJsZURpcmVjdGl2ZSIsIm5nUGx1cmFsaXplIiwibmdQbHVyYWxpemVEaXJlY3RpdmUiLCJuZ1JlcGVhdCIsIm5nUmVwZWF0RGlyZWN0aXZlIiwibmdTaG93IiwibmdTaG93RGlyZWN0aXZlIiwibmdTdHlsZSIsIm5nU3R5bGVEaXJlY3RpdmUiLCJuZ1N3aXRjaCIsIm5nU3dpdGNoRGlyZWN0aXZlIiwibmdTd2l0Y2hXaGVuIiwibmdTd2l0Y2hXaGVuRGlyZWN0aXZlIiwibmdTd2l0Y2hEZWZhdWx0IiwibmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlIiwibmdPcHRpb25zIiwibmdPcHRpb25zRGlyZWN0aXZlIiwibmdUcmFuc2NsdWRlIiwibmdUcmFuc2NsdWRlRGlyZWN0aXZlIiwibmdNb2RlbCIsIm5nTW9kZWxEaXJlY3RpdmUiLCJuZ0xpc3QiLCJuZ0xpc3REaXJlY3RpdmUiLCJuZ0NoYW5nZSIsIm5nQ2hhbmdlRGlyZWN0aXZlIiwicGF0dGVybiIsInBhdHRlcm5EaXJlY3RpdmUiLCJuZ1BhdHRlcm4iLCJyZXF1aXJlZCIsInJlcXVpcmVkRGlyZWN0aXZlIiwibmdSZXF1aXJlZCIsIm1pbmxlbmd0aCIsIm1pbmxlbmd0aERpcmVjdGl2ZSIsIm5nTWlubGVuZ3RoIiwibWF4bGVuZ3RoIiwibWF4bGVuZ3RoRGlyZWN0aXZlIiwibmdNYXhsZW5ndGgiLCJuZ1ZhbHVlIiwibmdWYWx1ZURpcmVjdGl2ZSIsIm5nTW9kZWxPcHRpb25zIiwibmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUiLCJuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZSIsIm5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzIiwibmdFdmVudERpcmVjdGl2ZXMiLCIkYW5jaG9yU2Nyb2xsIiwiJEFuY2hvclNjcm9sbFByb3ZpZGVyIiwiJGFuaW1hdGUiLCIkQW5pbWF0ZVByb3ZpZGVyIiwiJGJyb3dzZXIiLCIkQnJvd3NlclByb3ZpZGVyIiwiJGNhY2hlRmFjdG9yeSIsIiRDYWNoZUZhY3RvcnlQcm92aWRlciIsIiRjb250cm9sbGVyIiwiJENvbnRyb2xsZXJQcm92aWRlciIsIiRkb2N1bWVudCIsIiREb2N1bWVudFByb3ZpZGVyIiwiJGV4Y2VwdGlvbkhhbmRsZXIiLCIkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyIiwiJGZpbHRlciIsIiRGaWx0ZXJQcm92aWRlciIsIiRpbnRlcnBvbGF0ZSIsIiRJbnRlcnBvbGF0ZVByb3ZpZGVyIiwiJGludGVydmFsIiwiJEludGVydmFsUHJvdmlkZXIiLCIkaHR0cCIsIiRIdHRwUHJvdmlkZXIiLCIkaHR0cEJhY2tlbmQiLCIkSHR0cEJhY2tlbmRQcm92aWRlciIsIiRsb2NhdGlvbiIsIiRMb2NhdGlvblByb3ZpZGVyIiwiJGxvZyIsIiRMb2dQcm92aWRlciIsIiRwYXJzZSIsIiRQYXJzZVByb3ZpZGVyIiwiJFJvb3RTY29wZVByb3ZpZGVyIiwiJHEiLCIkUVByb3ZpZGVyIiwiJCRxIiwiJCRRUHJvdmlkZXIiLCIkc2NlIiwiJFNjZVByb3ZpZGVyIiwiJHNjZURlbGVnYXRlIiwiJFNjZURlbGVnYXRlUHJvdmlkZXIiLCIkc25pZmZlciIsIiRTbmlmZmVyUHJvdmlkZXIiLCIkdGVtcGxhdGVDYWNoZSIsIiRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIiLCIkdGVtcGxhdGVSZXF1ZXN0IiwiJFRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyIiwiJCR0ZXN0YWJpbGl0eSIsIiQkVGVzdGFiaWxpdHlQcm92aWRlciIsIiR0aW1lb3V0IiwiJFRpbWVvdXRQcm92aWRlciIsIiRXaW5kb3dQcm92aWRlciIsIiQkckFGIiwiJCRSQUZQcm92aWRlciIsIiQkYXN5bmNDYWxsYmFjayIsIiQkQXN5bmNDYWxsYmFja1Byb3ZpZGVyIiwiJCRqcUxpdGUiLCIkJGpxTGl0ZVByb3ZpZGVyIiwianFOZXh0SWQiLCJqcUlkIiwiY2FtZWxDYXNlIiwiU1BFQ0lBTF9DSEFSU19SRUdFWFAiLCJfIiwib2Zmc2V0IiwidG9VcHBlckNhc2UiLCJNT1pfSEFDS19SRUdFWFAiLCJqcUxpdGVJc1RleHROb2RlIiwiSFRNTF9SRUdFWFAiLCJqcUxpdGVBY2NlcHRzRGF0YSIsIk5PREVfVFlQRV9ET0NVTUVOVCIsImpxTGl0ZUJ1aWxkRnJhZ21lbnQiLCJ0bXAiLCJ3cmFwIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJUQUdfTkFNRV9SRUdFWFAiLCJleGVjIiwid3JhcE1hcCIsIl9kZWZhdWx0IiwiaW5uZXJIVE1MIiwiWEhUTUxfVEFHX1JFR0VYUCIsImxhc3RDaGlsZCIsImNoaWxkTm9kZXMiLCJmaXJzdENoaWxkIiwidGV4dENvbnRlbnQiLCJqcUxpdGVQYXJzZUhUTUwiLCJwYXJzZWQiLCJTSU5HTEVfVEFHX1JFR0VYUCIsImFyZ0lzU3RyaW5nIiwidHJpbSIsImpxTGl0ZU1pbkVyciIsImpxTGl0ZUFkZE5vZGVzIiwianFMaXRlQ2xvbmUiLCJjbG9uZU5vZGUiLCJqcUxpdGVEZWFsb2MiLCJvbmx5RGVzY2VuZGFudHMiLCJqcUxpdGVSZW1vdmVEYXRhIiwicXVlcnlTZWxlY3RvckFsbCIsImRlc2NlbmRhbnRzIiwibCIsImpxTGl0ZU9mZiIsInR5cGUiLCJ1bnN1cHBvcnRlZCIsImV4cGFuZG9TdG9yZSIsImpxTGl0ZUV4cGFuZG9TdG9yZSIsImhhbmRsZSIsImxpc3RlbmVyRm5zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lckZuIiwiZXhwYW5kb0lkIiwibmczMzkiLCJqcUNhY2hlIiwiY3JlYXRlSWZOZWNlc3NhcnkiLCJqcUxpdGVEYXRhIiwiaXNTaW1wbGVTZXR0ZXIiLCJpc1NpbXBsZUdldHRlciIsIm1hc3NHZXR0ZXIiLCJqcUxpdGVIYXNDbGFzcyIsInNlbGVjdG9yIiwianFMaXRlUmVtb3ZlQ2xhc3MiLCJjc3NDbGFzc2VzIiwic2V0QXR0cmlidXRlIiwiY3NzQ2xhc3MiLCJqcUxpdGVBZGRDbGFzcyIsImV4aXN0aW5nQ2xhc3NlcyIsInJvb3QiLCJlbGVtZW50cyIsImpxTGl0ZUNvbnRyb2xsZXIiLCJqcUxpdGVJbmhlcml0ZWREYXRhIiwiZG9jdW1lbnRFbGVtZW50IiwibmFtZXMiLCJwYXJlbnROb2RlIiwiTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UIiwiaG9zdCIsImpxTGl0ZUVtcHR5IiwicmVtb3ZlQ2hpbGQiLCJqcUxpdGVSZW1vdmUiLCJrZWVwRGF0YSIsImpxTGl0ZURvY3VtZW50TG9hZGVkIiwiYWN0aW9uIiwid2luIiwicmVhZHlTdGF0ZSIsInNldFRpbWVvdXQiLCJnZXRCb29sZWFuQXR0ck5hbWUiLCJib29sZWFuQXR0ciIsIkJPT0xFQU5fQVRUUiIsIkJPT0xFQU5fRUxFTUVOVFMiLCJnZXRBbGlhc2VkQXR0ck5hbWUiLCJBTElBU0VEX0FUVFIiLCJjcmVhdGVFdmVudEhhbmRsZXIiLCJldmVudEhhbmRsZXIiLCJldmVudCIsImlzRGVmYXVsdFByZXZlbnRlZCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJldmVudEZucyIsImV2ZW50Rm5zTGVuZ3RoIiwiaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkIiwib3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJzdG9wUHJvcGFnYXRpb24iLCJpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCIsIiRnZXQiLCJoYXNDbGFzcyIsImNsYXNzZXMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaGFzaEtleSIsIm5leHRVaWRGbiIsIm9ialR5cGUiLCJIYXNoTWFwIiwiaXNvbGF0ZWRVaWQiLCJwdXQiLCJhbm9uRm4iLCJmblRleHQiLCJTVFJJUF9DT01NRU5UUyIsIkZOX0FSR1MiLCJhbm5vdGF0ZSIsIiRpbmplY3QiLCJhcmdEZWNsIiwibGFzdCIsIkZOX0FSR19TUExJVCIsIkZOX0FSRyIsImFsbCIsInVuZGVyc2NvcmUiLCJtb2R1bGVzVG9Mb2FkIiwic3VwcG9ydE9iamVjdCIsImRlbGVnYXRlIiwicHJvdmlkZXJfIiwicHJvdmlkZXJJbmplY3RvciIsImluc3RhbnRpYXRlIiwicHJvdmlkZXJDYWNoZSIsInByb3ZpZGVyU3VmZml4IiwiZW5mb3JjZVJldHVyblZhbHVlIiwiaW5zdGFuY2VJbmplY3RvciIsImZhY3RvcnlGbiIsImVuZm9yY2UiLCIkaW5qZWN0b3IiLCJpbnN0YW5jZUNhY2hlIiwiZGVjb3JhdG9yIiwic2VydmljZU5hbWUiLCJkZWNvckZuIiwib3JpZ1Byb3ZpZGVyIiwib3JpZyRnZXQiLCJvcmlnSW5zdGFuY2UiLCIkZGVsZWdhdGUiLCJsb2FkTW9kdWxlcyIsIm1vZHVsZUZuIiwicnVuSW52b2tlUXVldWUiLCJpbnZva2VBcmdzIiwibG9hZGVkTW9kdWxlcyIsInN0YWNrIiwiY3JlYXRlSW50ZXJuYWxJbmplY3RvciIsImNhY2hlIiwiZ2V0U2VydmljZSIsImNhbGxlciIsIklOU1RBTlRJQVRJTkciLCJlcnIiLCJzaGlmdCIsImxvY2FscyIsIiQkYW5ub3RhdGUiLCJUeXBlIiwiaW5zdGFuY2UiLCJwcm90b3R5cGUiLCJyZXR1cm5lZFZhbHVlIiwiaGFzIiwiYXV0b1Njcm9sbGluZ0VuYWJsZWQiLCJkaXNhYmxlQXV0b1Njcm9sbGluZyIsImdldEZpcnN0QW5jaG9yIiwibGlzdCIsIkFycmF5Iiwic29tZSIsImdldFlPZmZzZXQiLCJzY3JvbGwiLCJ5T2Zmc2V0IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBvc2l0aW9uIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYm90dG9tIiwic2Nyb2xsVG8iLCJzY3JvbGxJbnRvVmlldyIsImVsZW1Ub3AiLCJ0b3AiLCJzY3JvbGxCeSIsImVsbSIsImhhc2giLCJnZXRFbGVtZW50QnlJZCIsImdldEVsZW1lbnRzQnlOYW1lIiwibmV3VmFsIiwib2xkVmFsIiwic3VwcG9ydGVkIiwiQnJvd3NlciIsImNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0Iiwib3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQiLCJvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MiLCJwb3AiLCJlcnJvciIsImdldEhhc2giLCJ1cmwiLCJzdWJzdHIiLCJzdGFydFBvbGxlciIsImludGVydmFsIiwiY2hlY2siLCJwb2xsRm5zIiwicG9sbEZuIiwicG9sbFRpbWVvdXQiLCJjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSIsImNhY2hlU3RhdGUiLCJmaXJlVXJsQ2hhbmdlIiwiY2FjaGVkU3RhdGUiLCJoaXN0b3J5Iiwic3RhdGUiLCJsYXN0Q2FjaGVkU3RhdGUiLCJsYXN0QnJvd3NlclVybCIsImxhc3RIaXN0b3J5U3RhdGUiLCJ1cmxDaGFuZ2VMaXN0ZW5lcnMiLCJsaXN0ZW5lciIsInNhZmVEZWNvZGVVUklDb21wb25lbnQiLCJyYXdEb2N1bWVudCIsImNsZWFyVGltZW91dCIsInBlbmRpbmdEZWZlcklkcyIsImlzTW9jayIsIiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QiLCIkJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50Iiwibm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyIsImNhbGxiYWNrIiwiYWRkUG9sbEZuIiwiaHJlZiIsImJhc2VFbGVtZW50IiwicmVsb2FkTG9jYXRpb24iLCJzYW1lU3RhdGUiLCJzYW1lQmFzZSIsInN0cmlwSGFzaCIsInVybENoYW5nZUluaXQiLCJvblVybENoYW5nZSIsIiQkY2hlY2tVcmxDaGFuZ2UiLCJiYXNlSHJlZiIsImxhc3RDb29raWVzIiwibGFzdENvb2tpZVN0cmluZyIsImNvb2tpZVBhdGgiLCJjb29raWVzIiwiY29va2llTGVuZ3RoIiwiY29va2llQXJyYXkiLCJjb29raWUiLCJzdWJzdHJpbmciLCJ3YXJuIiwiZGVmZXIiLCJkZWxheSIsInRpbWVvdXRJZCIsImNhbmNlbCIsImRlZmVySWQiLCJjYWNoZUZhY3RvcnkiLCJjYWNoZUlkIiwib3B0aW9ucyIsInJlZnJlc2giLCJlbnRyeSIsImZyZXNoRW5kIiwic3RhbGVFbmQiLCJuIiwibGluayIsInAiLCJuZXh0RW50cnkiLCJwcmV2RW50cnkiLCJjYWNoZXMiLCJzaXplIiwic3RhdHMiLCJpZCIsImNhcGFjaXR5IiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwibHJ1SGFzaCIsImxydUVudHJ5IiwicmVtb3ZlIiwicmVtb3ZlQWxsIiwiZGVzdHJveSIsImluZm8iLCIkJHNhbml0aXplVXJpUHJvdmlkZXIiLCJwYXJzZUlzb2xhdGVCaW5kaW5ncyIsImRpcmVjdGl2ZU5hbWUiLCJMT0NBTF9SRUdFWFAiLCJiaW5kaW5ncyIsImRlZmluaXRpb24iLCJzY29wZU5hbWUiLCIkY29tcGlsZU1pbkVyciIsIm1vZGUiLCJjb2xsZWN0aW9uIiwib3B0aW9uYWwiLCJhdHRyTmFtZSIsImhhc0RpcmVjdGl2ZXMiLCJTdWZmaXgiLCJDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAiLCJDTEFTU19ESVJFQ1RJVkVfUkVHRVhQIiwiQUxMX09SX05PVEhJTkdfQVRUUlMiLCJSRVFVSVJFX1BSRUZJWF9SRUdFWFAiLCJFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQIiwicmVnaXN0ZXJEaXJlY3RpdmUiLCJkaXJlY3RpdmVGYWN0b3J5IiwiZGlyZWN0aXZlcyIsInByaW9yaXR5IiwicmVxdWlyZSIsInJlc3RyaWN0IiwiJCRpc29sYXRlQmluZGluZ3MiLCJhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCIsInJlZ2V4cCIsImltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCIsImVuYWJsZWQiLCJzYWZlQWRkQ2xhc3MiLCIkZWxlbWVudCIsImNsYXNzTmFtZSIsIiRjb21waWxlTm9kZXMiLCJ0cmFuc2NsdWRlRm4iLCJtYXhQcmlvcml0eSIsImlnbm9yZURpcmVjdGl2ZSIsInByZXZpb3VzQ29tcGlsZUNvbnRleHQiLCJub2RlVmFsdWUiLCJjb21wb3NpdGVMaW5rRm4iLCJjb21waWxlTm9kZXMiLCIkJGFkZFNjb3BlQ2xhc3MiLCJuYW1lc3BhY2UiLCJjbG9uZUNvbm5lY3RGbiIsInBhcmVudEJvdW5kVHJhbnNjbHVkZUZuIiwidHJhbnNjbHVkZUNvbnRyb2xsZXJzIiwiZnV0dXJlUGFyZW50RWxlbWVudCIsIiQkYm91bmRUcmFuc2NsdWRlIiwiZGV0ZWN0TmFtZXNwYWNlRm9yQ2hpbGRFbGVtZW50cyIsIiRsaW5rTm9kZSIsIndyYXBUZW1wbGF0ZSIsImNvbnRyb2xsZXJOYW1lIiwiJCRhZGRTY29wZUluZm8iLCJwYXJlbnRFbGVtZW50Iiwibm9kZUxpc3QiLCIkcm9vdEVsZW1lbnQiLCJub2RlTGlua0ZuIiwiY2hpbGRMaW5rRm4iLCJjaGlsZFNjb3BlIiwiaWR4IiwiY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiIsInN0YWJsZU5vZGVMaXN0Iiwibm9kZUxpbmtGbkZvdW5kIiwibm9kZUxpc3RMZW5ndGgiLCJsaW5rRm5zIiwiJG5ldyIsInRyYW5zY2x1ZGVPblRoaXNFbGVtZW50IiwiY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4iLCJ0cmFuc2NsdWRlIiwiZWxlbWVudFRyYW5zY2x1ZGVPblRoaXNFbGVtZW50IiwidGVtcGxhdGVPblRoaXNFbGVtZW50IiwiYXR0cnMiLCJsaW5rRm5Gb3VuZCIsIkF0dHJpYnV0ZXMiLCJjb2xsZWN0RGlyZWN0aXZlcyIsImFwcGx5RGlyZWN0aXZlc1RvTm9kZSIsIiQkZWxlbWVudCIsInRlcm1pbmFsIiwicHJldmlvdXNCb3VuZFRyYW5zY2x1ZGVGbiIsImJvdW5kVHJhbnNjbHVkZUZuIiwidHJhbnNjbHVkZWRTY29wZSIsImNsb25lRm4iLCJjb250cm9sbGVycyIsImNvbnRhaW5pbmdTY29wZSIsIiQkdHJhbnNjbHVkZWQiLCJhdHRyc01hcCIsIiRhdHRyIiwiYWRkRGlyZWN0aXZlIiwiZGlyZWN0aXZlTm9ybWFsaXplIiwibk5hbWUiLCJuZ0F0dHJOYW1lIiwiaXNOZ0F0dHIiLCJuQXR0cnMiLCJhdHRyaWJ1dGVzIiwiYXR0clN0YXJ0TmFtZSIsImF0dHJFbmROYW1lIiwiTkdfQVRUUl9CSU5ESU5HIiwiUFJFRklYX1JFR0VYUCIsImRpcmVjdGl2ZU5OYW1lIiwiZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQiLCJhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUiLCJhbmltVmFsIiwiYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlIiwiTk9ERV9UWVBFX0NPTU1FTlQiLCJieVByaW9yaXR5IiwiZ3JvdXBTY2FuIiwiYXR0clN0YXJ0IiwiYXR0ckVuZCIsImRlcHRoIiwiZ3JvdXBFbGVtZW50c0xpbmtGbldyYXBwZXIiLCJsaW5rRm4iLCJjb21waWxlTm9kZSIsInRlbXBsYXRlQXR0cnMiLCJqcUNvbGxlY3Rpb24iLCJvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUiLCJwcmVMaW5rRm5zIiwicG9zdExpbmtGbnMiLCJhZGRMaW5rRm5zIiwicHJlIiwicG9zdCIsIm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSIsIiQkaXNvbGF0ZVNjb3BlIiwiY2xvbmVBbmRBbm5vdGF0ZUZuIiwiZ2V0Q29udHJvbGxlcnMiLCJlbGVtZW50Q29udHJvbGxlcnMiLCJyZXRyaWV2YWxNZXRob2QiLCIkc2VhcmNoRWxlbWVudCIsImxpbmtOb2RlIiwiY29udHJvbGxlcnNCb3VuZFRyYW5zY2x1ZGUiLCJjbG9uZUF0dGFjaEZuIiwiaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUiLCJzY29wZVRvQ2hpbGQiLCJjb250cm9sbGVyRGlyZWN0aXZlcyIsImNvbnRyb2xsZXJJbnN0YW5jZSIsIiRzY29wZSIsIiRhdHRycyIsIiR0cmFuc2NsdWRlIiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVEaXJlY3RpdmUiLCIkJG9yaWdpbmFsRGlyZWN0aXZlIiwiaXNvbGF0ZVNjb3BlQ29udHJvbGxlciIsImlzb2xhdGVCaW5kaW5nQ29udGV4dCIsImlkZW50aWZpZXIiLCJiaW5kVG9Db250cm9sbGVyIiwibGFzdFZhbHVlIiwicGFyZW50R2V0IiwicGFyZW50U2V0IiwiY29tcGFyZSIsIiRvYnNlcnZlIiwiJCRvYnNlcnZlcnMiLCIkJHNjb3BlIiwibGl0ZXJhbCIsImIiLCJhc3NpZ24iLCJwYXJlbnRWYWx1ZVdhdGNoIiwicGFyZW50VmFsdWUiLCIkc3RhdGVmdWwiLCJ1bndhdGNoIiwiJHdhdGNoQ29sbGVjdGlvbiIsIiRvbiIsImludm9rZUxpbmtGbiIsInRlbXBsYXRlVXJsIiwibmV3U2NvcGVEaXJlY3RpdmUiLCIkdGVtcGxhdGUiLCJkaXJlY3RpdmVWYWx1ZSIsInRlcm1pbmFsUHJpb3JpdHkiLCJub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlIiwiaGFzVHJhbnNjbHVkZURpcmVjdGl2ZSIsImhhc1RlbXBsYXRlIiwiJGNvbXBpbGVOb2RlIiwicmVwbGFjZURpcmVjdGl2ZSIsImNoaWxkVHJhbnNjbHVkZUZuIiwiJCRzdGFydCIsIiQkZW5kIiwiYXNzZXJ0Tm9EdXBsaWNhdGUiLCIkJHRsYiIsImNyZWF0ZUNvbW1lbnQiLCJyZXBsYWNlV2l0aCIsImNvbnRlbnRzIiwiZGVub3JtYWxpemVUZW1wbGF0ZSIsInJlbW92ZUNvbW1lbnRzIiwidGVtcGxhdGVOYW1lc3BhY2UiLCJuZXdUZW1wbGF0ZUF0dHJzIiwidGVtcGxhdGVEaXJlY3RpdmVzIiwidW5wcm9jZXNzZWREaXJlY3RpdmVzIiwibWFya0RpcmVjdGl2ZXNBc0lzb2xhdGUiLCJtZXJnZVRlbXBsYXRlQXR0cmlidXRlcyIsImNvbXBpbGVUZW1wbGF0ZVVybCIsIk1hdGgiLCJtYXgiLCJ0RGlyZWN0aXZlcyIsInN0YXJ0QXR0ck5hbWUiLCJlbmRBdHRyTmFtZSIsIm11bHRpRWxlbWVudCIsInNyY0F0dHIiLCJkc3RBdHRyIiwiJHNldCIsInRBdHRycyIsImFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuIiwiYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuIiwibGlua1F1ZXVlIiwiYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZSIsIm9yaWdBc3luY0RpcmVjdGl2ZSIsImRlcml2ZWRTeW5jRGlyZWN0aXZlIiwiZ2V0VHJ1c3RlZFJlc291cmNlVXJsIiwiY29udGVudCIsInRlbXBUZW1wbGF0ZUF0dHJzIiwiYmVmb3JlVGVtcGxhdGVMaW5rTm9kZSIsImxpbmtSb290RWxlbWVudCIsIiQkZGVzdHJveWVkIiwib2xkQ2xhc3NlcyIsImlnbm9yZUNoaWxkTGlua0ZuIiwiZGlmZiIsIndoYXQiLCJwcmV2aW91c0RpcmVjdGl2ZSIsInRleHQiLCJpbnRlcnBvbGF0ZUZuIiwidGVtcGxhdGVOb2RlIiwidGVtcGxhdGVOb2RlUGFyZW50IiwiaGFzQ29tcGlsZVBhcmVudCIsIiQkYWRkQmluZGluZ0NsYXNzIiwiJCRhZGRCaW5kaW5nSW5mbyIsImV4cHJlc3Npb25zIiwid3JhcHBlciIsImdldFRydXN0ZWRDb250ZXh0IiwiYXR0ck5vcm1hbGl6ZWROYW1lIiwiSFRNTCIsIlJFU09VUkNFX1VSTCIsImFsbE9yTm90aGluZyIsInRydXN0ZWRDb250ZXh0IiwibmV3VmFsdWUiLCIkJGludGVyIiwib2xkVmFsdWUiLCIkdXBkYXRlQ2xhc3MiLCJlbGVtZW50c1RvUmVtb3ZlIiwibmV3Tm9kZSIsImZpcnN0RWxlbWVudFRvUmVtb3ZlIiwicmVtb3ZlQ291bnQiLCJqMiIsInJlcGxhY2VDaGlsZCIsImV4cGFuZG8iLCJrIiwia2siLCJhbm5vdGF0aW9uIiwiYXR0cmlidXRlc1RvQ29weSIsIiRub3JtYWxpemUiLCIkYWRkQ2xhc3MiLCJjbGFzc1ZhbCIsIiRyZW1vdmVDbGFzcyIsIm5ld0NsYXNzZXMiLCJ0b0FkZCIsInRva2VuRGlmZmVyZW5jZSIsInRvUmVtb3ZlIiwid3JpdGVBdHRyIiwiYm9vbGVhbktleSIsImFsaWFzZWRLZXkiLCJvYnNlcnZlciIsInRyaW1tZWRTcmNzZXQiLCJzcmNQYXR0ZXJuIiwicmF3VXJpcyIsIm5iclVyaXNXaXRoMnBhcnRzIiwiZmxvb3IiLCJpbm5lcklkeCIsImxhc3RUdXBsZSIsInJlbW92ZUF0dHIiLCJsaXN0ZW5lcnMiLCJzdGFydFN5bWJvbCIsImVuZFN5bWJvbCIsImJpbmRpbmciLCJpc29sYXRlZCIsIm5vVGVtcGxhdGUiLCJkYXRhTmFtZSIsInN0cjEiLCJzdHIyIiwidmFsdWVzIiwidG9rZW5zMSIsInRva2VuczIiLCJvdXRlciIsInRva2VuIiwianFOb2RlcyIsImdsb2JhbHMiLCJDTlRSTF9SRUciLCJyZWdpc3RlciIsImFsbG93R2xvYmFscyIsImFkZElkZW50aWZpZXIiLCJleHByZXNzaW9uIiwibGF0ZXIiLCJpZGVudCIsIiRjb250cm9sbGVyTWluRXJyIiwiY29udHJvbGxlclByb3RvdHlwZSIsImRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm0iLCJoZWFkZXJzIiwidGVtcERhdGEiLCJKU09OX1BST1RFQ1RJT05fUFJFRklYIiwiY29udGVudFR5cGUiLCJBUFBMSUNBVElPTl9KU09OIiwiaXNKc29uTGlrZSIsImpzb25TdGFydCIsIkpTT05fU1RBUlQiLCJKU09OX0VORFMiLCJwYXJzZUhlYWRlcnMiLCJsaW5lIiwiaGVhZGVyc0dldHRlciIsImhlYWRlcnNPYmoiLCJ0cmFuc2Zvcm1EYXRhIiwic3RhdHVzIiwiZm5zIiwiaXNTdWNjZXNzIiwiZGVmYXVsdHMiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsInRyYW5zZm9ybVJlcXVlc3QiLCJkIiwiY29tbW9uIiwiQWNjZXB0IiwiQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04iLCJwYXRjaCIsInhzcmZDb29raWVOYW1lIiwieHNyZkhlYWRlck5hbWUiLCJ1c2VBcHBseUFzeW5jIiwiaW50ZXJjZXB0b3JGYWN0b3JpZXMiLCJpbnRlcmNlcHRvcnMiLCJyZXF1ZXN0Q29uZmlnIiwicmVzcG9uc2UiLCJyZXNwIiwicmVqZWN0IiwiZXhlY3V0ZUhlYWRlckZucyIsImhlYWRlckNvbnRlbnQiLCJwcm9jZXNzZWRIZWFkZXJzIiwiaGVhZGVyRm4iLCJoZWFkZXIiLCJtZXJnZUhlYWRlcnMiLCJkZWZIZWFkZXJOYW1lIiwibG93ZXJjYXNlRGVmSGVhZGVyTmFtZSIsInJlcUhlYWRlck5hbWUiLCJkZWZIZWFkZXJzIiwicmVxSGVhZGVycyIsImRlZmF1bHRIZWFkZXJzSXRlcmF0aW9uIiwic2VydmVyUmVxdWVzdCIsInJlcURhdGEiLCJ3aXRoQ3JlZGVudGlhbHMiLCJzZW5kUmVxIiwiY2hhaW4iLCJwcm9taXNlIiwid2hlbiIsInJldmVyc2VkSW50ZXJjZXB0b3JzIiwiaW50ZXJjZXB0b3IiLCJyZXF1ZXN0IiwicmVxdWVzdEVycm9yIiwicmVzcG9uc2VFcnJvciIsInRoZW5GbiIsInJlamVjdEZuIiwic3VjY2VzcyIsImNyZWF0ZVNob3J0TWV0aG9kcyIsImNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhIiwiZG9uZSIsImhlYWRlcnNTdHJpbmciLCJzdGF0dXNUZXh0IiwicmVzb2x2ZUh0dHBQcm9taXNlIiwicmVzb2x2ZVByb21pc2UiLCIkYXBwbHlBc3luYyIsIiQkcGhhc2UiLCJkZWZlcnJlZCIsInJlc29sdmUiLCJyZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQiLCJyZW1vdmVQZW5kaW5nUmVxIiwicGVuZGluZ1JlcXVlc3RzIiwiY2FjaGVkUmVzcCIsImJ1aWxkVXJsIiwicGFyYW1zIiwiZGVmYXVsdENhY2hlIiwieHNyZlZhbHVlIiwidXJsSXNTYW1lT3JpZ2luIiwidGltZW91dCIsInJlc3BvbnNlVHlwZSIsInYiLCJ0b0lTT1N0cmluZyIsImludGVyY2VwdG9yRmFjdG9yeSIsImNyZWF0ZVhociIsIlhNTEh0dHBSZXF1ZXN0IiwiY3JlYXRlSHR0cEJhY2tlbmQiLCIkYnJvd3NlckRlZmVyIiwianNvbnBSZXEiLCJjYWxsYmFja0lkIiwiYXN5bmMiLCJib2R5IiwiY2FsbGVkIiwiYWRkRXZlbnRMaXN0ZW5lckZuIiwidGltZW91dFJlcXVlc3QiLCJqc29ucERvbmUiLCJ4aHIiLCJhYm9ydCIsImNvbXBsZXRlUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25sb2FkIiwicmVzcG9uc2VUZXh0IiwidXJsUmVzb2x2ZSIsInByb3RvY29sIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwib25lcnJvciIsIm9uYWJvcnQiLCJzZW5kIiwiZXNjYXBlIiwiY2giLCJtdXN0SGF2ZUV4cHJlc3Npb24iLCJ1bmVzY2FwZVRleHQiLCJlc2NhcGVkU3RhcnRSZWdleHAiLCJlc2NhcGVkRW5kUmVnZXhwIiwicGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvciIsImdldFZhbHVlIiwibmV3RXJyIiwiJGludGVycG9sYXRlTWluRXJyIiwiZW5kSW5kZXgiLCJleHAiLCJwYXJzZUZucyIsInRleHRMZW5ndGgiLCJleHByZXNzaW9uUG9zaXRpb25zIiwic3RhcnRTeW1ib2xMZW5ndGgiLCJlbmRTeW1ib2xMZW5ndGgiLCJjb21wdXRlIiwiZ2V0VHJ1c3RlZCIsInZhbHVlT2YiLCIkJHdhdGNoRGVsZWdhdGUiLCJvYmplY3RFcXVhbGl0eSIsIiR3YXRjaEdyb3VwIiwib2xkVmFsdWVzIiwiY3VyclZhbHVlIiwiY291bnQiLCJpbnZva2VBcHBseSIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsIml0ZXJhdGlvbiIsInNraXBBcHBseSIsIiQkaW50ZXJ2YWxJZCIsIm5vdGlmeSIsImludGVydmFscyIsIk5VTUJFUl9GT1JNQVRTIiwiREVDSU1BTF9TRVAiLCJHUk9VUF9TRVAiLCJQQVRURVJOUyIsIm1pbkludCIsIm1pbkZyYWMiLCJtYXhGcmFjIiwicG9zUHJlIiwicG9zU3VmIiwibmVnUHJlIiwibmVnU3VmIiwiZ1NpemUiLCJsZ1NpemUiLCJDVVJSRU5DWV9TWU0iLCJEQVRFVElNRV9GT1JNQVRTIiwiTU9OVEgiLCJTSE9SVE1PTlRIIiwiREFZIiwiU0hPUlREQVkiLCJBTVBNUyIsIm1lZGl1bSIsInNob3J0IiwiZnVsbERhdGUiLCJsb25nRGF0ZSIsIm1lZGl1bURhdGUiLCJzaG9ydERhdGUiLCJtZWRpdW1UaW1lIiwic2hvcnRUaW1lIiwicGx1cmFsQ2F0IiwibnVtIiwiZW5jb2RlUGF0aCIsInNlZ21lbnRzIiwicGFyc2VBYnNvbHV0ZVVybCIsImFic29sdXRlVXJsIiwibG9jYXRpb25PYmoiLCJwYXJzZWRVcmwiLCIkJHByb3RvY29sIiwiJCRob3N0IiwiaG9zdG5hbWUiLCIkJHBvcnQiLCJwb3J0IiwiREVGQVVMVF9QT1JUUyIsInBhcnNlQXBwVXJsIiwicmVsYXRpdmVVcmwiLCJwcmVmaXhlZCIsIiQkcGF0aCIsInBhdGhuYW1lIiwiJCRzZWFyY2giLCJzZWFyY2giLCIkJGhhc2giLCJiZWdpbnNXaXRoIiwiYmVnaW4iLCJ3aG9sZSIsInRyaW1FbXB0eUhhc2giLCJzdHJpcEZpbGUiLCJsYXN0SW5kZXhPZiIsInNlcnZlckJhc2UiLCJMb2NhdGlvbkh0bWw1VXJsIiwiYXBwQmFzZSIsImJhc2VQcmVmaXgiLCIkJGh0bWw1IiwiYXBwQmFzZU5vRmlsZSIsIiQkcGFyc2UiLCJwYXRoVXJsIiwiJGxvY2F0aW9uTWluRXJyIiwiJCRjb21wb3NlIiwiJCR1cmwiLCIkJGFic1VybCIsIiQkcGFyc2VMaW5rVXJsIiwicmVsSHJlZiIsImFwcFVybCIsInByZXZBcHBVcmwiLCJyZXdyaXR0ZW5VcmwiLCJMb2NhdGlvbkhhc2hiYW5nVXJsIiwiaGFzaFByZWZpeCIsInJlbW92ZVdpbmRvd3NEcml2ZU5hbWUiLCJiYXNlIiwiZmlyc3RQYXRoU2VnbWVudE1hdGNoIiwid2luZG93c0ZpbGVQYXRoRXhwIiwid2l0aG91dEhhc2hVcmwiLCJ3aXRob3V0QmFzZVVybCIsIkxvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsIiwibG9jYXRpb25HZXR0ZXIiLCJwcm9wZXJ0eSIsImxvY2F0aW9uR2V0dGVyU2V0dGVyIiwicHJlcHJvY2VzcyIsImh0bWw1TW9kZSIsInJlcXVpcmVCYXNlIiwicmV3cml0ZUxpbmtzIiwic2V0QnJvd3NlclVybFdpdGhGYWxsYmFjayIsIm9sZFVybCIsIm9sZFN0YXRlIiwiJCRzdGF0ZSIsImFmdGVyTG9jYXRpb25DaGFuZ2UiLCIkYnJvYWRjYXN0IiwiYWJzVXJsIiwiTG9jYXRpb25Nb2RlIiwiaW5pdGlhbFVybCIsIklHTk9SRV9VUklfUkVHRVhQIiwiY3RybEtleSIsIm1ldGFLZXkiLCJzaGlmdEtleSIsIndoaWNoIiwiYnV0dG9uIiwidGFyZ2V0IiwiYWJzSHJlZiIsInByZXZlbnREZWZhdWx0IiwiaW5pdGlhbGl6aW5nIiwibmV3VXJsIiwibmV3U3RhdGUiLCIkZGlnZXN0IiwiY3VycmVudFJlcGxhY2UiLCIkJHJlcGxhY2UiLCJ1cmxPclN0YXRlQ2hhbmdlZCIsImRlYnVnIiwiZGVidWdFbmFibGVkIiwiZmxhZyIsImZvcm1hdEVycm9yIiwic291cmNlVVJMIiwiY29uc29sZUxvZyIsImNvbnNvbGUiLCJsb2dGbiIsImxvZyIsImhhc0FwcGx5IiwiYXJnMSIsImFyZzIiLCJlbnN1cmVTYWZlTWVtYmVyTmFtZSIsImZ1bGxFeHByZXNzaW9uIiwiJHBhcnNlTWluRXJyIiwiZW5zdXJlU2FmZU9iamVjdCIsImNoaWxkcmVuIiwiZW5zdXJlU2FmZUZ1bmN0aW9uIiwiQ0FMTCIsIkFQUExZIiwiQklORCIsImlzQ29uc3RhbnQiLCJzZXR0ZXIiLCJzZXRWYWx1ZSIsImZ1bGxFeHAiLCJwcm9wZXJ0eU9iaiIsImlzUG9zc2libHlEYW5nZXJvdXNNZW1iZXJOYW1lIiwiY3NwU2FmZUdldHRlckZuIiwia2V5MCIsImtleTEiLCJrZXkyIiwia2V5MyIsImtleTQiLCJleHBlbnNpdmVDaGVja3MiLCJlc28iLCJvIiwiZXNvMCIsImVzbzEiLCJlc28yIiwiZXNvMyIsImVzbzQiLCJwYXRoVmFsIiwiZ2V0dGVyRm5XaXRoRW5zdXJlU2FmZU9iamVjdCIsInMiLCJnZXR0ZXJGbiIsImdldHRlckZuQ2FjaGUiLCJnZXR0ZXJGbkNhY2hlRXhwZW5zaXZlIiwiZ2V0dGVyRm5DYWNoZURlZmF1bHQiLCJwYXRoS2V5cyIsInBhdGhLZXlzTGVuZ3RoIiwibmVlZHNFbnN1cmVTYWZlT2JqZWN0IiwibG9va3VwSnMiLCJldmFsZWRGbkdldHRlciIsIkZ1bmN0aW9uIiwic2hhcmVkR2V0dGVyIiwiZ2V0VmFsdWVPZiIsIm9iamVjdFZhbHVlT2YiLCJjYWNoZURlZmF1bHQiLCJjYWNoZUV4cGVuc2l2ZSIsIndyYXBTaGFyZWRFeHByZXNzaW9uIiwid3JhcHBlZCIsImNvbGxlY3RFeHByZXNzaW9uSW5wdXRzIiwiaW5wdXRzIiwiZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayIsIm9sZFZhbHVlT2ZWYWx1ZSIsImlucHV0c1dhdGNoRGVsZWdhdGUiLCJwYXJzZWRFeHByZXNzaW9uIiwibGFzdFJlc3VsdCIsImlucHV0RXhwcmVzc2lvbnMiLCIkJGlucHV0cyIsIm9sZElucHV0VmFsdWUiLCJuZXdJbnB1dFZhbHVlIiwib2xkSW5wdXRWYWx1ZU9mVmFsdWVzIiwiY2hhbmdlZCIsIm9uZVRpbWVXYXRjaERlbGVnYXRlIiwib2xkIiwiJCRwb3N0RGlnZXN0Iiwib25lVGltZUxpdGVyYWxXYXRjaERlbGVnYXRlIiwiaXNBbGxEZWZpbmVkIiwiYWxsRGVmaW5lZCIsImNvbnN0YW50V2F0Y2hEZWxlZ2F0ZSIsImFkZEludGVyY2VwdG9yIiwiaW50ZXJjZXB0b3JGbiIsIndhdGNoRGVsZWdhdGUiLCJyZWd1bGFyV2F0Y2giLCIkcGFyc2VPcHRpb25zIiwiJHBhcnNlT3B0aW9uc0V4cGVuc2l2ZSIsIm9uZVRpbWUiLCJjYWNoZUtleSIsInBhcnNlT3B0aW9ucyIsImxleGVyIiwiTGV4ZXIiLCJwYXJzZXIiLCJQYXJzZXIiLCJxRmFjdG9yeSIsIm5leHRUaWNrIiwiZXhjZXB0aW9uSGFuZGxlciIsImNhbGxPbmNlIiwicmVzb2x2ZUZuIiwiUHJvbWlzZSIsInNpbXBsZUJpbmQiLCJwcm9jZXNzUXVldWUiLCJwZW5kaW5nIiwicHJvY2Vzc1NjaGVkdWxlZCIsInNjaGVkdWxlUHJvY2Vzc1F1ZXVlIiwiRGVmZXJyZWQiLCJwcm9taXNlcyIsIiRxTWluRXJyIiwiVHlwZUVycm9yIiwib25GdWxmaWxsZWQiLCJvblJlamVjdGVkIiwicHJvZ3Jlc3NCYWNrIiwiY2F0Y2giLCJmaW5hbGx5IiwiaGFuZGxlQ2FsbGJhY2siLCIkJHJlamVjdCIsIiQkcmVzb2x2ZSIsInByb2dyZXNzIiwibWFrZVByb21pc2UiLCJyZXNvbHZlZCIsImlzUmVzb2x2ZWQiLCJjYWxsYmFja091dHB1dCIsImVycmJhY2siLCIkUSIsIlEiLCJyZXNvbHZlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwid2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyYWZTdXBwb3J0ZWQiLCJyYWYiLCJ0aW1lciIsIlRUTCIsIiRyb290U2NvcGVNaW5FcnIiLCJsYXN0RGlydHlXYXRjaCIsImFwcGx5QXN5bmNJZCIsImRpZ2VzdFR0bCIsIlNjb3BlIiwiJGlkIiwiJHBhcmVudCIsIiQkd2F0Y2hlcnMiLCIkJG5leHRTaWJsaW5nIiwiJCRwcmV2U2libGluZyIsIiQkY2hpbGRIZWFkIiwiJCRjaGlsZFRhaWwiLCIkcm9vdCIsIiQkbGlzdGVuZXJzIiwiJCRsaXN0ZW5lckNvdW50IiwiYmVnaW5QaGFzZSIsInBoYXNlIiwiY2xlYXJQaGFzZSIsImRlY3JlbWVudExpc3RlbmVyQ291bnQiLCJjdXJyZW50IiwiaW5pdFdhdGNoVmFsIiwiZmx1c2hBcHBseUFzeW5jIiwiYXBwbHlBc3luY1F1ZXVlIiwic2NoZWR1bGVBcHBseUFzeW5jIiwiaXNvbGF0ZSIsImRlc3Ryb3lDaGlsZCIsImNoaWxkIiwiJCRDaGlsZFNjb3BlIiwid2F0Y2hFeHAiLCJ3YXRjaGVyIiwiZXEiLCJ3YXRjaEV4cHJlc3Npb25zIiwid2F0Y2hHcm91cEFjdGlvbiIsImNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkIiwiZmlyc3RSdW4iLCJuZXdWYWx1ZXMiLCJkZXJlZ2lzdGVyRm5zIiwic2hvdWxkQ2FsbCIsImV4cHIiLCJ1bndhdGNoRm4iLCIkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IiLCJfdmFsdWUiLCJuZXdMZW5ndGgiLCJib3RoTmFOIiwibmV3SXRlbSIsIm9sZEl0ZW0iLCJpbnRlcm5hbEFycmF5Iiwib2xkTGVuZ3RoIiwiY2hhbmdlRGV0ZWN0ZWQiLCJpbnRlcm5hbE9iamVjdCIsIiR3YXRjaENvbGxlY3Rpb25BY3Rpb24iLCJpbml0UnVuIiwidmVyeU9sZFZhbHVlIiwidHJhY2tWZXJ5T2xkVmFsdWUiLCJjaGFuZ2VEZXRlY3RvciIsIndhdGNoIiwid2F0Y2hlcnMiLCJkaXJ0eSIsIm5leHQiLCJsb2dJZHgiLCJhc3luY1Rhc2siLCJ0dGwiLCJ3YXRjaExvZyIsImFzeW5jUXVldWUiLCIkZXZhbCIsInRyYXZlcnNlU2NvcGVzTG9vcCIsImlzTmFOIiwibXNnIiwicG9zdERpZ2VzdFF1ZXVlIiwiZXZlbnROYW1lIiwiJGFwcGx5QXN5bmNFeHByZXNzaW9uIiwibmFtZWRMaXN0ZW5lcnMiLCJpbmRleE9mTGlzdGVuZXIiLCIkZW1pdCIsInRhcmdldFNjb3BlIiwibGlzdGVuZXJBcmdzIiwiY3VycmVudFNjb3BlIiwiJCRhc3luY1F1ZXVlIiwiJCRwb3N0RGlnZXN0UXVldWUiLCIkJGFwcGx5QXN5bmNRdWV1ZSIsInVyaSIsImlzSW1hZ2UiLCJub3JtYWxpemVkVmFsIiwicmVnZXgiLCJhZGp1c3RNYXRjaGVyIiwibWF0Y2hlciIsIiRzY2VNaW5FcnIiLCJlc2NhcGVGb3JSZWdleHAiLCJhZGp1c3RNYXRjaGVycyIsIm1hdGNoZXJzIiwiYWRqdXN0ZWRNYXRjaGVycyIsIlNDRV9DT05URVhUUyIsInJlc291cmNlVXJsV2hpdGVsaXN0IiwicmVzb3VyY2VVcmxCbGFja2xpc3QiLCJtYXRjaFVybCIsImlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kiLCJhbGxvd2VkIiwiZ2VuZXJhdGVIb2xkZXJUeXBlIiwiQmFzZSIsImhvbGRlclR5cGUiLCJ0cnVzdGVkVmFsdWUiLCIkJHVud3JhcFRydXN0ZWRWYWx1ZSIsInRydXN0QXMiLCJDb25zdHJ1Y3RvciIsImJ5VHlwZSIsIm1heWJlVHJ1c3RlZCIsInRydXN0ZWRWYWx1ZUhvbGRlckJhc2UiLCJodG1sU2FuaXRpemVyIiwiQ1NTIiwiVVJMIiwiSlMiLCJtc2llIiwic2NlIiwiaXNFbmFibGVkIiwicGFyc2VBcyIsImVudW1WYWx1ZSIsImxOYW1lIiwidmVuZG9yUHJlZml4IiwiZXZlbnRTdXBwb3J0IiwiYW5kcm9pZCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImJveGVlIiwidmVuZG9yUmVnZXgiLCJib2R5U3R5bGUiLCJ0cmFuc2l0aW9ucyIsImFuaW1hdGlvbnMiLCJ3ZWJraXRUcmFuc2l0aW9uIiwid2Via2l0QW5pbWF0aW9uIiwicHVzaFN0YXRlIiwiaGFzRXZlbnQiLCJkaXZFbG0iLCJoYW5kbGVSZXF1ZXN0Rm4iLCJ0cGwiLCJpZ25vcmVSZXF1ZXN0RXJyb3IiLCJoYW5kbGVFcnJvciIsInRvdGFsUGVuZGluZ1JlcXVlc3RzIiwidHJhbnNmb3JtZXIiLCJodHRwT3B0aW9ucyIsInRlc3RhYmlsaXR5IiwiZmluZEJpbmRpbmdzIiwib3B0X2V4YWN0TWF0Y2giLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZGF0YUJpbmRpbmciLCJiaW5kaW5nTmFtZSIsImZpbmRNb2RlbHMiLCJwcmVmaXhlcyIsImF0dHJpYnV0ZUVxdWFscyIsImdldExvY2F0aW9uIiwic2V0TG9jYXRpb24iLCJ3aGVuU3RhYmxlIiwiZGVmZXJyZWRzIiwiJCR0aW1lb3V0SWQiLCJ1cmxQYXJzaW5nTm9kZSIsInJlcXVlc3RVcmwiLCJvcmlnaW5VcmwiLCJmaWx0ZXJzIiwic3VmZml4IiwiY3VycmVuY3lGaWx0ZXIiLCJkYXRlRmlsdGVyIiwiZmlsdGVyRmlsdGVyIiwianNvbkZpbHRlciIsImxpbWl0VG9GaWx0ZXIiLCJsb3dlcmNhc2VGaWx0ZXIiLCJudW1iZXJGaWx0ZXIiLCJvcmRlckJ5RmlsdGVyIiwidXBwZXJjYXNlRmlsdGVyIiwiY29tcGFyYXRvciIsInByZWRpY2F0ZUZuIiwibWF0Y2hBZ2FpbnN0QW55UHJvcCIsImNyZWF0ZVByZWRpY2F0ZUZuIiwic2hvdWxkTWF0Y2hQcmltaXRpdmVzIiwiYWN0dWFsIiwiZXhwZWN0ZWQiLCJpdGVtIiwiZGVlcENvbXBhcmUiLCJkb250TWF0Y2hXaG9sZU9iamVjdCIsImFjdHVhbFR5cGUiLCJleHBlY3RlZFR5cGUiLCJleHBlY3RlZFZhbCIsIm1hdGNoQW55UHJvcGVydHkiLCJhY3R1YWxWYWwiLCIkbG9jYWxlIiwiZm9ybWF0cyIsImFtb3VudCIsImN1cnJlbmN5U3ltYm9sIiwiZnJhY3Rpb25TaXplIiwiZm9ybWF0TnVtYmVyIiwibnVtYmVyIiwiZ3JvdXBTZXAiLCJkZWNpbWFsU2VwIiwiaXNGaW5pdGUiLCJpc05lZ2F0aXZlIiwiYWJzIiwibnVtU3RyIiwiZm9ybWF0ZWRUZXh0IiwiaGFzRXhwb25lbnQiLCJ0b0ZpeGVkIiwicGFyc2VGbG9hdCIsImZyYWN0aW9uTGVuIiwibWluIiwicm91bmQiLCJmcmFjdGlvbiIsImxncm91cCIsImdyb3VwIiwicGFkTnVtYmVyIiwiZGlnaXRzIiwibmVnIiwiZGF0ZUdldHRlciIsImRhdGUiLCJkYXRlU3RyR2V0dGVyIiwic2hvcnRGb3JtIiwidGltZVpvbmVHZXR0ZXIiLCJ6b25lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJwYWRkZWRab25lIiwiZ2V0Rmlyc3RUaHVyc2RheU9mWWVhciIsInllYXIiLCJkYXlPZldlZWtPbkZpcnN0IiwiZ2V0RGF5IiwiZ2V0VGh1cnNkYXlUaGlzV2VlayIsImRhdGV0aW1lIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJ3ZWVrR2V0dGVyIiwiZmlyc3RUaHVycyIsInRoaXNUaHVycyIsImFtcG1HZXR0ZXIiLCJnZXRIb3VycyIsImpzb25TdHJpbmdUb0RhdGUiLCJzdHJpbmciLCJSX0lTTzg2MDFfU1RSIiwidHpIb3VyIiwidHpNaW4iLCJkYXRlU2V0dGVyIiwic2V0VVRDRnVsbFllYXIiLCJzZXRGdWxsWWVhciIsInRpbWVTZXR0ZXIiLCJzZXRVVENIb3VycyIsInNldEhvdXJzIiwibSIsIm1zIiwiZm9ybWF0IiwidGltZXpvbmUiLCJOVU1CRVJfU1RSSU5HIiwiREFURV9GT1JNQVRTX1NQTElUIiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJEQVRFX0ZPUk1BVFMiLCJvYmplY3QiLCJzcGFjaW5nIiwibGltaXQiLCJJbmZpbml0eSIsInNvcnRQcmVkaWNhdGUiLCJyZXZlcnNlT3JkZXIiLCJjb21wIiwicmV2ZXJzZUNvbXBhcmF0b3IiLCJkZXNjZW5kaW5nIiwib2JqZWN0VG9TdHJpbmciLCJ2MSIsInYyIiwibWFwIiwicHJlZGljYXRlIiwibmdEaXJlY3RpdmUiLCJudWxsRm9ybVJlbmFtZUNvbnRyb2wiLCJjb250cm9sIiwiJG5hbWUiLCJGb3JtQ29udHJvbGxlciIsImNvbnRyb2xzIiwicGFyZW50Rm9ybSIsIiQkcGFyZW50Rm9ybSIsIm51bGxGb3JtQ3RybCIsIiRlcnJvciIsIiQkc3VjY2VzcyIsIiRwZW5kaW5nIiwiJGRpcnR5IiwiJHByaXN0aW5lIiwiJHZhbGlkIiwiJGludmFsaWQiLCIkc3VibWl0dGVkIiwiJGFkZENvbnRyb2wiLCIkcm9sbGJhY2tWaWV3VmFsdWUiLCIkY29tbWl0Vmlld1ZhbHVlIiwiJCRyZW5hbWVDb250cm9sIiwibmV3TmFtZSIsIm9sZE5hbWUiLCIkcmVtb3ZlQ29udHJvbCIsIiRzZXRWYWxpZGl0eSIsImFkZFNldFZhbGlkaXR5TWV0aG9kIiwiY3RybCIsInNldCIsInVuc2V0IiwiJHNldERpcnR5IiwiUFJJU1RJTkVfQ0xBU1MiLCJESVJUWV9DTEFTUyIsIiRzZXRQcmlzdGluZSIsInNldENsYXNzIiwiU1VCTUlUVEVEX0NMQVNTIiwiJHNldFVudG91Y2hlZCIsIiRzZXRTdWJtaXR0ZWQiLCJzdHJpbmdCYXNlZElucHV0VHlwZSIsIiRmb3JtYXR0ZXJzIiwiJGlzRW1wdHkiLCJ0ZXh0SW5wdXRUeXBlIiwiYmFzZUlucHV0VHlwZSIsImNvbXBvc2luZyIsImV2IiwibmdUcmltIiwiJHZpZXdWYWx1ZSIsIiQkaGFzTmF0aXZlVmFsaWRhdG9ycyIsIiRzZXRWaWV3VmFsdWUiLCJkZWZlckxpc3RlbmVyIiwib3JpZ1ZhbHVlIiwia2V5Q29kZSIsIiRyZW5kZXIiLCJ3ZWVrUGFyc2VyIiwiaXNvV2VlayIsImV4aXN0aW5nRGF0ZSIsIldFRUtfUkVHRVhQIiwid2VlayIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiLCJhZGREYXlzIiwiZ2V0U2Vjb25kcyIsImdldE1pbGxpc2Vjb25kcyIsIk5hTiIsImNyZWF0ZURhdGVQYXJzZXIiLCJtYXBwaW5nIiwiaXNvIiwiSVNPX0RBVEVfUkVHRVhQIiwieXl5eSIsIk1NIiwiZGQiLCJISCIsIm1tIiwic3MiLCJzc3MiLCJwYXJ0IiwiY3JlYXRlRGF0ZUlucHV0VHlwZSIsInBhcnNlRGF0ZSIsImlzVmFsaWREYXRlIiwicGFyc2VPYnNlcnZlZERhdGVWYWx1ZSIsImJhZElucHV0Q2hlY2tlciIsInByZXZpb3VzRGF0ZSIsIiRvcHRpb25zIiwiJCRwYXJzZXJOYW1lIiwiJHBhcnNlcnMiLCJwYXJzZWREYXRlIiwiJG5nTW9kZWxNaW5FcnIiLCJ0aW1lem9uZU9mZnNldCIsIm5nTWluIiwibWluVmFsIiwiJHZhbGlkYXRvcnMiLCIkdmFsaWRhdGUiLCJuZ01heCIsIm1heFZhbCIsIm5hdGl2ZVZhbGlkYXRpb24iLCJ2YWxpZGl0eSIsIlZBTElESVRZX1NUQVRFX1BST1BFUlRZIiwiYmFkSW5wdXQiLCJ0eXBlTWlzbWF0Y2giLCJudW1iZXJJbnB1dFR5cGUiLCJOVU1CRVJfUkVHRVhQIiwidXJsSW5wdXRUeXBlIiwibW9kZWxWYWx1ZSIsInZpZXdWYWx1ZSIsIlVSTF9SRUdFWFAiLCJlbWFpbElucHV0VHlwZSIsImVtYWlsIiwiRU1BSUxfUkVHRVhQIiwicmFkaW9JbnB1dFR5cGUiLCJjaGVja2VkIiwicGFyc2VDb25zdGFudEV4cHIiLCJmYWxsYmFjayIsInBhcnNlRm4iLCJjaGVja2JveElucHV0VHlwZSIsInRydWVWYWx1ZSIsIm5nVHJ1ZVZhbHVlIiwiZmFsc2VWYWx1ZSIsIm5nRmFsc2VWYWx1ZSIsImNsYXNzRGlyZWN0aXZlIiwiYXJyYXlEaWZmZXJlbmNlIiwiYXJyYXlDbGFzc2VzIiwiYWRkQ2xhc3NlcyIsImRpZ2VzdENsYXNzQ291bnRzIiwicmVtb3ZlQ2xhc3NlcyIsImNsYXNzQ291bnRzIiwiY2xhc3Nlc1RvVXBkYXRlIiwidXBkYXRlQ2xhc3NlcyIsIm5nQ2xhc3NXYXRjaEFjdGlvbiIsIiRpbmRleCIsIm9sZCRpbmRleCIsIm1vZCIsInNldFZhbGlkaXR5IiwidmFsaWRhdGlvbkVycm9yS2V5IiwiY3JlYXRlQW5kU2V0IiwidW5zZXRBbmRDbGVhbnVwIiwiY2FjaGVkVG9nZ2xlQ2xhc3MiLCJQRU5ESU5HX0NMQVNTIiwidG9nZ2xlVmFsaWRhdGlvbkNzcyIsImlzT2JqZWN0RW1wdHkiLCJjb21iaW5lZFN0YXRlIiwic3dpdGNoVmFsdWUiLCJjbGFzc0NhY2hlIiwiaXNWYWxpZCIsIlZBTElEX0NMQVNTIiwiSU5WQUxJRF9DTEFTUyIsIlJFR0VYX1NUUklOR19SRUdFWFAiLCJtYW51YWxMb3dlcmNhc2UiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjaGFyQ29kZUF0IiwibWFudWFsVXBwZXJjYXNlIiwiZG9jdW1lbnRNb2RlIiwiaXNBY3RpdmVfIiwiYWN0aXZlIiwiZnVsbCIsIm1ham9yIiwibWlub3IiLCJkb3QiLCJjb2RlTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiTU9VU0VfRVZFTlRfTUFQIiwibW91c2VsZWF2ZSIsIm1vdXNlZW50ZXIiLCJ0aGVhZCIsImNvbCIsInRyIiwidGQiLCJvcHRncm91cCIsInRib2R5IiwidGZvb3QiLCJjb2xncm91cCIsImNhcHRpb24iLCJ0aCIsInJlYWR5IiwidHJpZ2dlciIsImZpcmVkIiwicmVtb3ZlRGF0YSIsInJlbW92ZUF0dHJpYnV0ZSIsImNzcyIsImxvd2VyY2FzZWROYW1lIiwiZ2V0TmFtZWRJdGVtIiwic3BlY2lmaWVkIiwicmV0IiwiZ2V0VGV4dCIsIiRkdiIsIm11bHRpcGxlIiwic2VsZWN0ZWQiLCJub2RlQ291bnQiLCJqcUxpdGVPbiIsInR5cGVzIiwicmVsYXRlZCIsInJlbGF0ZWRUYXJnZXQiLCJjb250YWlucyIsIm9mZiIsIm9uZSIsIm9uRm4iLCJyZXBsYWNlTm9kZSIsImluc2VydEJlZm9yZSIsImNvbnRlbnREb2N1bWVudCIsInByZXBlbmQiLCJ3cmFwTm9kZSIsImRldGFjaCIsImFmdGVyIiwibmV3RWxlbWVudCIsInRvZ2dsZUNsYXNzIiwiY29uZGl0aW9uIiwiY2xhc3NDb25kaXRpb24iLCJuZXh0RWxlbWVudFNpYmxpbmciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImV4dHJhUGFyYW1ldGVycyIsImR1bW15RXZlbnQiLCJldmVudEZuc0NvcHkiLCJoYW5kbGVyQXJncyIsImFyZzMiLCJ1bmJpbmQiLCIkYW5pbWF0ZU1pbkVyciIsIiQkc2VsZWN0b3JzIiwiY2xhc3NOYW1lRmlsdGVyIiwiJCRjbGFzc05hbWVGaWx0ZXIiLCJydW5BbmltYXRpb25Qb3N0RGlnZXN0IiwiY2FuY2VsRm4iLCIkJGNhbmNlbEZuIiwicmVzb2x2ZUVsZW1lbnRDbGFzc2VzIiwiaGFzQ2xhc3NlcyIsImNhY2hlZENsYXNzTWFuaXB1bGF0aW9uIiwib3AiLCJhc3luY1Byb21pc2UiLCJjdXJyZW50RGVmZXIiLCJhcHBseVN0eWxlcyIsInN0eWxlcyIsImZyb20iLCJ0byIsImFuaW1hdGUiLCJlbnRlciIsImxlYXZlIiwibW92ZSIsIiQkYWRkQ2xhc3NJbW1lZGlhdGVseSIsIiQkcmVtb3ZlQ2xhc3NJbW1lZGlhdGVseSIsIlNUT1JBR0VfS0VZIiwiY3JlYXRlZENhY2hlIiwiJCRzZXRDbGFzc0ltbWVkaWF0ZWx5IiwiQ29udGVudC1UeXBlIiwiWyIsInsiLCJQQVRIX01BVENIIiwiaHR0cCIsImh0dHBzIiwiZnRwIiwibG9jYXRpb25Qcm90b3R5cGUiLCJwYXJhbVZhbHVlIiwiTG9jYXRpb24iLCJDT05TVEFOVFMiLCJudWxsIiwidHJ1ZSIsImZhbHNlIiwiY29uc3RhbnRHZXR0ZXIiLCJPUEVSQVRPUlMiLCIrIiwiLSIsIioiLCIvIiwiJSIsIj09PSIsIiE9PSIsIj09IiwiIT0iLCI8IiwiPiIsIjw9IiwiPj0iLCImJiIsInx8IiwiISIsIj0iLCJ8IiwiRVNDQVBFIiwiZiIsInIiLCJ0IiwiJyIsIlwiIiwibGV4IiwidG9rZW5zIiwicmVhZFN0cmluZyIsInBlZWsiLCJyZWFkTnVtYmVyIiwiaXNJZGVudCIsInJlYWRJZGVudCIsImlzIiwiaXNXaGl0ZXNwYWNlIiwiY2gyIiwiY2gzIiwib3AxIiwib3AyIiwib3AzIiwib3BlcmF0b3IiLCJ0aHJvd0Vycm9yIiwiY2hhcnMiLCJpc0V4cE9wZXJhdG9yIiwic3RhcnQiLCJlbmQiLCJjb2xTdHIiLCJwZWVrQ2giLCJxdW90ZSIsInJhd1N0cmluZyIsImhleCIsInJlcCIsIlpFUk8iLCJzdGF0ZW1lbnRzIiwicHJpbWFyeSIsImV4cGVjdCIsImZpbHRlckNoYWluIiwiY29uc3VtZSIsImFycmF5RGVjbGFyYXRpb24iLCJmdW5jdGlvbkNhbGwiLCJvYmplY3RJbmRleCIsImZpZWxkQWNjZXNzIiwicGVla1Rva2VuIiwiZTEiLCJlMiIsImUzIiwiZTQiLCJwZWVrQWhlYWQiLCJ1bmFyeUZuIiwicmlnaHQiLCJiaW5hcnlGbiIsImxlZnQiLCJpc0JyYW5jaGluZyIsImlucHV0Rm4iLCJhcmdzRm4iLCJldmVyeSIsImFzc2lnbm1lbnQiLCJ0ZXJuYXJ5IiwibWlkZGxlIiwibG9naWNhbE9SIiwibG9naWNhbEFORCIsImVxdWFsaXR5IiwicmVsYXRpb25hbCIsImFkZGl0aXZlIiwibXVsdGlwbGljYXRpdmUiLCJ1bmFyeSIsImluZGV4Rm4iLCJmbkdldHRlciIsImNvbnRleHRHZXR0ZXIiLCJleHByZXNzaW9uVGV4dCIsImVsZW1lbnRGbnMiLCJ2YWx1ZUZucyIsInl5IiwieSIsIk1NTU0iLCJNTU0iLCJNIiwiSCIsImhoIiwiRUVFRSIsIkVFRSIsIloiLCJ3dyIsInciLCJ4bGlua0hyZWYiLCJwcm9wTmFtZSIsIm5vcm1hbGl6ZWQiLCJodG1sQXR0ciIsImZvcm1EaXJlY3RpdmVGYWN0b3J5IiwiaXNOZ0Zvcm0iLCJmb3JtRWxlbWVudCIsImhhbmRsZUZvcm1TdWJtaXNzaW9uIiwicGFyZW50Rm9ybUN0cmwiLCJhbGlhcyIsIkRBVEVfUkVHRVhQIiwiREFURVRJTUVMT0NBTF9SRUdFWFAiLCJNT05USF9SRUdFWFAiLCJUSU1FX1JFR0VYUCIsImlucHV0VHlwZSIsImRhdGV0aW1lLWxvY2FsIiwidGltZSIsIm1vbnRoIiwicmFkaW8iLCJjaGVja2JveCIsImhpZGRlbiIsInN1Ym1pdCIsInJlc2V0IiwiZmlsZSIsImN0cmxzIiwiQ09OU1RBTlRfVkFMVUVfUkVHRVhQIiwidHBsQXR0ciIsIiRjb21waWxlIiwidGVtcGxhdGVFbGVtZW50IiwidEVsZW1lbnQiLCJuZ0JpbmRIdG1sR2V0dGVyIiwibmdCaW5kSHRtbFdhdGNoIiwiZ2V0VHJ1c3RlZEh0bWwiLCIkdmlld0NoYW5nZUxpc3RlbmVycyIsImZvcmNlQXN5bmNFdmVudHMiLCJibHVyIiwiZm9jdXMiLCIkZXZlbnQiLCJwcmV2aW91c0VsZW1lbnRzIiwibmV3U2NvcGUiLCJzcmNFeHAiLCJvbmxvYWRFeHAiLCJhdXRvU2Nyb2xsRXhwIiwiYXV0b3Njcm9sbCIsInByZXZpb3VzRWxlbWVudCIsImN1cnJlbnRFbGVtZW50IiwiY2hhbmdlQ291bnRlciIsImNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQiLCJwYXJzZUFzUmVzb3VyY2VVcmwiLCJhZnRlckFuaW1hdGlvbiIsInRoaXNDaGFuZ2VJZCIsInRyaW1WYWx1ZXMiLCJVTlRPVUNIRURfQ0xBU1MiLCJUT1VDSEVEX0NMQVNTIiwiTmdNb2RlbENvbnRyb2xsZXIiLCIkbW9kZWxWYWx1ZSIsIiQkcmF3TW9kZWxWYWx1ZSIsIiRhc3luY1ZhbGlkYXRvcnMiLCIkdW50b3VjaGVkIiwiJHRvdWNoZWQiLCJwYXJzZWROZ01vZGVsIiwicGFyc2VkTmdNb2RlbEFzc2lnbiIsIm5nTW9kZWxHZXQiLCJuZ01vZGVsU2V0IiwicGVuZGluZ0RlYm91bmNlIiwiJCRzZXRPcHRpb25zIiwiZ2V0dGVyU2V0dGVyIiwiaW52b2tlTW9kZWxHZXR0ZXIiLCJpbnZva2VNb2RlbFNldHRlciIsIiQkJHAiLCJjdXJyZW50VmFsaWRhdGlvblJ1bklkIiwiJHNldFRvdWNoZWQiLCIkJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUiLCJwYXJzZXJOYW1lIiwicGFyc2VyVmFsaWQiLCJwcmV2VmFsaWQiLCJwcmV2TW9kZWxWYWx1ZSIsImFsbG93SW52YWxpZCIsIiQkcnVuVmFsaWRhdG9ycyIsImFsbFZhbGlkIiwiJCR3cml0ZU1vZGVsVG9TY29wZSIsInBhcnNlVmFsaWQiLCJkb25lQ2FsbGJhY2siLCJwcm9jZXNzUGFyc2VFcnJvcnMiLCJlcnJvcktleSIsInByb2Nlc3NTeW5jVmFsaWRhdG9ycyIsInN5bmNWYWxpZGF0b3JzVmFsaWQiLCJ2YWxpZGF0b3IiLCJwcm9jZXNzQXN5bmNWYWxpZGF0b3JzIiwidmFsaWRhdG9yUHJvbWlzZXMiLCJ2YWxpZGF0aW9uRG9uZSIsImxvY2FsVmFsaWRhdGlvblJ1bklkIiwiJCRwYXJzZUFuZFZhbGlkYXRlIiwid3JpdGVUb01vZGVsSWZOZWVkZWQiLCJ1cGRhdGVPbkRlZmF1bHQiLCIkJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0IiwiZGVib3VuY2UiLCJkZWJvdW5jZURlbGF5IiwiZm9ybWF0dGVycyIsIm1vZGVsQ3RybCIsImZvcm1DdHJsIiwidXBkYXRlT24iLCJERUZBVUxUX1JFR0VYUCIsInRoYXQiLCJCUkFDRSIsIklTX1dIRU4iLCJ1cGRhdGVFbGVtZW50VGV4dCIsIm5ld1RleHQiLCJsYXN0Q291bnQiLCJudW1iZXJFeHAiLCJ3aGVuRXhwIiwid2hlbnMiLCJ3aGVuc0V4cEZucyIsImJyYWNlUmVwbGFjZW1lbnQiLCJ3YXRjaFJlbW92ZXIiLCJhdHRyaWJ1dGVOYW1lIiwidG1wTWF0Y2giLCJ3aGVuS2V5IiwiY291bnRJc05hTiIsIk5HX1JFTU9WRUQiLCJuZ1JlcGVhdE1pbkVyciIsInVwZGF0ZVNjb3BlIiwidmFsdWVJZGVudGlmaWVyIiwia2V5SWRlbnRpZmllciIsImFycmF5TGVuZ3RoIiwiJGZpcnN0IiwiJGxhc3QiLCIkbWlkZGxlIiwiJG9kZCIsIiRldmVuIiwiZ2V0QmxvY2tTdGFydCIsImdldEJsb2NrRW5kIiwibmdSZXBlYXRFbmRDb21tZW50IiwibGhzIiwicmhzIiwiYWxpYXNBcyIsInRyYWNrQnlFeHAiLCJ0cmFja0J5RXhwR2V0dGVyIiwidHJhY2tCeUlkRXhwRm4iLCJ0cmFja0J5SWRBcnJheUZuIiwidHJhY2tCeUlkT2JqRm4iLCJoYXNoRm5Mb2NhbHMiLCJsYXN0QmxvY2tNYXAiLCJuZXh0Tm9kZSIsImNvbGxlY3Rpb25MZW5ndGgiLCJ0cmFja0J5SWQiLCJ0cmFja0J5SWRGbiIsImNvbGxlY3Rpb25LZXlzIiwibmV4dEJsb2NrT3JkZXIiLCJwcmV2aW91c05vZGUiLCJuZXh0QmxvY2tNYXAiLCJpdGVtS2V5IiwiYmxvY2tLZXkiLCJOR19ISURFX0NMQVNTIiwiTkdfSElERV9JTl9QUk9HUkVTU19DTEFTUyIsInRlbXBDbGFzc2VzIiwibmV3U3R5bGVzIiwib2xkU3R5bGVzIiwiY2FzZXMiLCJuZ1N3aXRjaENvbnRyb2xsZXIiLCJ3YXRjaEV4cHIiLCJzZWxlY3RlZFRyYW5zY2x1ZGVzIiwic2VsZWN0ZWRFbGVtZW50cyIsInByZXZpb3VzTGVhdmVBbmltYXRpb25zIiwic2VsZWN0ZWRTY29wZXMiLCJzcGxpY2VGYWN0b3J5Iiwic2VsZWN0ZWRUcmFuc2NsdWRlIiwiY2FzZUVsZW1lbnQiLCJzZWxlY3RlZFNjb3BlIiwiYW5jaG9yIiwibmdPcHRpb25zTWluRXJyIiwiTkdfT1BUSU9OU19SRUdFWFAiLCJudWxsTW9kZWxDdHJsIiwibnVsbE9wdGlvbiIsInVua25vd25PcHRpb24iLCJvcHRpb25zTWFwIiwibmdNb2RlbEN0cmwiLCJkYXRhYm91bmQiLCJpbml0IiwibmdNb2RlbEN0cmxfIiwibnVsbE9wdGlvbl8iLCJ1bmtub3duT3B0aW9uXyIsImFkZE9wdGlvbiIsInJlbW92ZU9wdGlvbiIsImhhc09wdGlvbiIsInJlbmRlclVua25vd25PcHRpb24iLCJ1bmtub3duVmFsIiwic2V0dXBBc1NpbmdsZSIsInNlbGVjdEVsZW1lbnQiLCJzZWxlY3RDdHJsIiwiZW1wdHlPcHRpb24iLCJzZXR1cEFzTXVsdGlwbGUiLCJsYXN0VmlldyIsInNldHVwQXNPcHRpb25zIiwiY2FsbEV4cHJlc3Npb24iLCJleHByRm4iLCJ2YWx1ZU5hbWUiLCJrZXlOYW1lIiwic2VsZWN0aW9uQ2hhbmdlZCIsInZhbHVlc0ZuIiwic2VsZWN0ZWRLZXkiLCJ0cmFja0ZuIiwidHJhY2tLZXlzQ2FjaGUiLCJnZXRWaWV3VmFsdWUiLCJyZW5kZXIiLCJ2aWV3VmFsdWVGbiIsInNlbGVjdEFzRm4iLCJnZXRMYWJlbHMiLCJ0b0Rpc3BsYXkiLCJkaXNwbGF5Rm4iLCJjcmVhdGVJc1NlbGVjdGVkRm4iLCJzZWxlY3RlZFNldCIsInRyYWNrSW5kZXgiLCJjb21wYXJlVmFsdWVGbiIsInNjaGVkdWxlUmVuZGVyaW5nIiwicmVuZGVyU2NoZWR1bGVkIiwidXBkYXRlTGFiZWxNYXAiLCJsYWJlbE1hcCIsImxhYmVsIiwiYWRkZWQiLCJvcHRpb25Hcm91cE5hbWUiLCJvcHRpb25Hcm91cCIsImV4aXN0aW5nUGFyZW50IiwiZXhpc3RpbmdPcHRpb25zIiwiZXhpc3RpbmdPcHRpb24iLCJncm91cExlbmd0aCIsImdyb3VwSW5kZXgiLCJsYXN0RWxlbWVudCIsIm9wdGlvbklkIiwib3B0aW9uR3JvdXBzIiwib3B0aW9uR3JvdXBOYW1lcyIsImlzU2VsZWN0ZWQiLCJhbnlTZWxlY3RlZCIsImdyb3VwQnlGbiIsIm9wdGlvbkdyb3Vwc0NhY2hlIiwib3B0R3JvdXBUZW1wbGF0ZSIsIm9wdGlvblRlbXBsYXRlIiwib3B0aW9uc0V4cCIsInNlbGVjdEFzIiwidHJhY2siLCJudWxsU2VsZWN0Q3RybCIsInNlbGVjdEN0cmxOYW1lIiwicGF0dGVybkV4cCIsImludFZhbCIsIiRSb3V0ZVByb3ZpZGVyIiwicGF0aFJlZ0V4cCIsIm9wdHMiLCJpbnNlbnNpdGl2ZSIsImNhc2VJbnNlbnNpdGl2ZU1hdGNoIiwib3JpZ2luYWxQYXRoIiwic2xhc2giLCJzdGFyIiwicm91dGVzIiwicm91dGUiLCJyb3V0ZUNvcHkiLCJyZWxvYWRPblNlYXJjaCIsInJlZGlyZWN0UGF0aCIsInJlZGlyZWN0VG8iLCJvdGhlcndpc2UiLCIkcm91dGVQYXJhbXMiLCJzd2l0Y2hSb3V0ZU1hdGNoZXIiLCJwcmVwYXJlUm91dGUiLCIkbG9jYXRpb25FdmVudCIsImxhc3RSb3V0ZSIsIiRyb3V0ZSIsInByZXBhcmVkUm91dGUiLCJwYXJzZVJvdXRlIiwicHJlcGFyZWRSb3V0ZUlzVXBkYXRlT25seSIsIiQkcm91dGUiLCJwYXRoUGFyYW1zIiwiZm9yY2VSZWxvYWQiLCJjb21taXRSb3V0ZSIsIm5leHRSb3V0ZSIsImludGVycG9sYXRlIiwibG9hZGVkVGVtcGxhdGVVcmwiLCJzZWdtZW50Iiwic2VnbWVudE1hdGNoIiwidXBkYXRlUGFyYW1zIiwibmV3UGFyYW1zIiwiJHJvdXRlTWluRXJyIiwiJFJvdXRlUGFyYW1zUHJvdmlkZXIiLCJuZ1ZpZXdGYWN0b3J5IiwiY2xlYW51cExhc3RWaWV3IiwicHJldmlvdXNMZWF2ZUFuaW1hdGlvbiIsInVwZGF0ZSIsIm5nVmlld0ZpbGxDb250ZW50RmFjdG9yeSIsIm5nUm91dGVNb2R1bGUiLCJtYWtlU3dpcGVEaXJlY3RpdmUiLCJkaXJlY3Rpb24iLCJuZ1RvdWNoIiwiJHN3aXBlIiwiTUFYX1ZFUlRJQ0FMX0RJU1RBTkNFIiwiTUFYX1ZFUlRJQ0FMX1JBVElPIiwiTUlOX0hPUklaT05UQUxfRElTVEFOQ0UiLCJ2YWxpZFN3aXBlIiwiY29vcmRzIiwic3RhcnRDb29yZHMiLCJkZWx0YVkiLCJkZWx0YVgiLCJ4IiwidmFsaWQiLCJzd2lwZUhhbmRsZXIiLCJwb2ludGVyVHlwZXMiLCJnZXRDb29yZGluYXRlcyIsInRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsIm9yaWdpbmFsRXZlbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsImdldEV2ZW50cyIsImV2ZW50VHlwZSIsInJlcyIsInBvaW50ZXJUeXBlIiwiUE9JTlRFUl9FVkVOVFMiLCJNT1ZFX0JVRkZFUl9SQURJVVMiLCJtb3VzZSIsInRvdWNoIiwiZXZlbnRIYW5kbGVycyIsInRvdGFsWCIsInRvdGFsWSIsImxhc3RQb3MiLCJoaXQiLCJ4MSIsInkxIiwieDIiLCJ5MiIsIkNMSUNLQlVTVEVSX1RIUkVTSE9MRCIsImNoZWNrQWxsb3dhYmxlUmVnaW9ucyIsInRvdWNoQ29vcmRpbmF0ZXMiLCJvbkNsaWNrIiwibm93IiwibGFzdFByZXZlbnRlZFRpbWUiLCJQUkVWRU5UX0RVUkFUSU9OIiwibGFzdExhYmVsQ2xpY2tDb29yZGluYXRlcyIsInRhZ05hbWUiLCJvblRvdWNoU3RhcnQiLCJwcmV2ZW50R2hvc3RDbGljayIsIlRBUF9EVVJBVElPTiIsIk1PVkVfVE9MRVJBTkNFIiwiQUNUSVZFX0NMQVNTX05BTUUiLCJyZXNldFN0YXRlIiwidGFwcGluZyIsInRhcEVsZW1lbnQiLCJzdGFydFRpbWUiLCJ0b3VjaFN0YXJ0WCIsInRvdWNoU3RhcnRZIiwiY2xpY2tIYW5kbGVyIiwibmdDbGljayIsInNyY0VsZW1lbnQiLCJkaXN0Iiwic3FydCIsInBvdyIsImRpc2FibGVkIiwib25jbGljayIsInRvdWNoZW5kIiwiTkdfQU5JTUFURV9DSElMRFJFTiIsIm5nQW5pbWF0ZUNoaWxkcmVuIiwiYm9kIiwib2Zmc2V0V2lkdGgiLCIkYW5pbWF0ZVByb3ZpZGVyIiwiZXh0cmFjdEVsZW1lbnROb2RlIiwiRUxFTUVOVF9OT0RFIiwicHJlcGFyZUVsZW1lbnQiLCJzdHJpcENvbW1lbnRzRnJvbUVsZW1lbnQiLCJpc01hdGNoaW5nRWxlbWVudCIsImVsbTEiLCJlbG0yIiwic2VsZWN0b3JzIiwiTkdfQU5JTUFURV9TVEFURSIsIk5HX0FOSU1BVEVfQ0xBU1NfTkFNRSIsInJvb3RBbmltYXRlU3RhdGUiLCJydW5uaW5nIiwiJCQkanFMaXRlIiwiY2xhc3NCYXNlZEFuaW1hdGlvbnNCbG9ja2VkIiwic3RydWN0dXJhbCIsInBhcnNlQW5pbWF0ZU9wdGlvbnMiLCJydW5uaW5nQW5pbWF0aW9ucyIsImxvb2t1cCIsIm1hdGNoaW5nQW5pbWF0aW9uIiwiZmxhZ01hcCIsImtsYXNzIiwic2VsZWN0b3JGYWN0b3J5TmFtZSIsImFuaW1hdGlvblJ1bm5lciIsImFuaW1hdGlvbkV2ZW50IiwicmVnaXN0ZXJBbmltYXRpb24iLCJhbmltYXRpb25GYWN0b3J5IiwiYWZ0ZXJGbiIsImJlZm9yZUZuIiwiYmVmb3JlIiwiY2FuY2VsbGF0aW9ucyIsImFsbENvbXBsZXRlRm4iLCJhZnRlckFuaW1hdGlvbkNvbXBsZXRlIiwiY2xhc3NOYW1lQWRkIiwiY2xhc3NOYW1lUmVtb3ZlIiwiaXNTZXRDbGFzc09wZXJhdGlvbiIsImlzQ2xhc3NCYXNlZCIsImN1cnJlbnRDbGFzc05hbWUiLCJpc0FuaW1hdGFibGVDbGFzc05hbWUiLCJiZWZvcmVDb21wbGV0ZSIsImJlZm9yZUNhbmNlbCIsImFmdGVyQ29tcGxldGUiLCJhZnRlckNhbmNlbCIsImFuaW1hdGlvbkxvb2t1cCIsImNyZWF0ZWQiLCJwZXJmb3JtQW5pbWF0aW9uIiwiYWZ0ZXJFbGVtZW50IiwiZG9tT3BlcmF0aW9uIiwiZmlyZURPTUNhbGxiYWNrIiwiYW5pbWF0aW9uUGhhc2UiLCJlbGVtZW50RXZlbnRzIiwiZmlyZUJlZm9yZUNhbGxiYWNrQXN5bmMiLCJmaXJlQWZ0ZXJDYWxsYmFja0FzeW5jIiwiZmlyZURvbmVDYWxsYmFja0FzeW5jIiwiZmlyZURPTU9wZXJhdGlvbiIsImhhc0JlZW5SdW4iLCJjbG9zZUFuaW1hdGlvbiIsInJ1bm5lciIsImNsZWFudXAiLCJsb2NhbEFuaW1hdGlvbkNvdW50Iiwibm9vcENhbmNlbCIsImFuaW1hdGlvbnNEaXNhYmxlZCIsIm5nQW5pbWF0ZVN0YXRlIiwidG90YWxBY3RpdmVBbmltYXRpb25zIiwidG90YWxBY3RpdmUiLCJsYXN0QW5pbWF0aW9uIiwic2tpcEFuaW1hdGlvbiIsImFuaW1hdGlvbnNUb0NhbmNlbCIsIm9wZXJhdGlvbiIsImFjdGl2ZUxlYXZlQW5pbWF0aW9uIiwiZ2xvYmFsQW5pbWF0aW9uQ291bnRlciIsImNhbmNlbGxlZCIsImNhbmNlbENoaWxkQW5pbWF0aW9ucyIsInJlbW92ZUFuaW1hdGlvbnMiLCJhbGxvd0NoaWxkQW5pbWF0aW9ucyIsInBhcmVudFJ1bm5pbmdBbmltYXRpb24iLCJoYXNQYXJlbnQiLCJpc1Jvb3QiLCJhbmltYXRlQ2hpbGRyZW5GbGFnIiwiZGVyZWdpc3RlcldhdGNoIiwiaGFzQ2FjaGUiLCJjIiwiZWxlbWVudE5vZGUiLCIkJGFuaW1hdGVSZWZsb3ciLCJjbGVhckNhY2hlQWZ0ZXJSZWZsb3ciLCJjYW5jZWxBbmltYXRpb25SZWZsb3ciLCJhbmltYXRpb25SZWZsb3dRdWV1ZSIsImxvb2t1cENhY2hlIiwiYWZ0ZXJSZWZsb3ciLCJhbmltYXRpb25DbG9zZUhhbmRsZXIiLCJ0b3RhbFRpbWUiLCJhbmltYXRpb25FbGVtZW50UXVldWUiLCJmdXR1cmVUaW1lc3RhbXAiLCJjbG9zaW5nVGltZXN0YW1wIiwiY2xvc2luZ1RpbWVyIiwiY2xvc2VBbGxBbmltYXRpb25zIiwiZWxlbWVudERhdGEiLCJOR19BTklNQVRFX0NTU19EQVRBX0tFWSIsImNsb3NlQW5pbWF0aW9uRm5zIiwiZ2V0RWxlbWVudEFuaW1hdGlvbkRldGFpbHMiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJ0cmFuc2l0aW9uRGVsYXkiLCJhbmltYXRpb25EdXJhdGlvbiIsImFuaW1hdGlvbkRlbGF5IiwiZWxlbWVudFN0eWxlcyIsInRyYW5zaXRpb25EdXJhdGlvblN0eWxlIiwiVFJBTlNJVElPTl9QUk9QIiwiRFVSQVRJT05fS0VZIiwicGFyc2VNYXhUaW1lIiwidHJhbnNpdGlvbkRlbGF5U3R5bGUiLCJERUxBWV9LRVkiLCJBTklNQVRJT05fUFJPUCIsImFEdXJhdGlvbiIsIkFOSU1BVElPTl9JVEVSQVRJT05fQ09VTlRfS0VZIiwidG90YWwiLCJtYXhWYWx1ZSIsImdldENhY2hlS2V5IiwicGFyZW50SUQiLCJOR19BTklNQVRFX1BBUkVOVF9LRVkiLCJwYXJlbnRDb3VudGVyIiwiYW5pbWF0ZVNldHVwIiwiZXZlbnRDYWNoZUtleSIsIml0ZW1JbmRleCIsInN0YWdnZXIiLCJzdGFnZ2VyQ2xhc3NOYW1lIiwic3RhZ2dlckNhY2hlS2V5IiwiYXBwbHlDbGFzc2VzIiwiZm9ybWVyRGF0YSIsInRpbWluZ3MiLCJibG9ja1RyYW5zaXRpb24iLCJibG9ja0FuaW1hdGlvbiIsImJsb2NrVHJhbnNpdGlvbnMiLCJibG9ja0FuaW1hdGlvbnMiLCJhbmltYXRlUnVuIiwiYWN0aXZlQW5pbWF0aW9uQ29tcGxldGUiLCJvbkVuZCIsImNzczNBbmltYXRpb25FdmVudHMiLCJvbkFuaW1hdGlvblByb2dyZXNzIiwiYWN0aXZlQ2xhc3NOYW1lIiwicGVuZGluZ0NsYXNzTmFtZSIsInN0YWdnZXJUaW1lb3V0IiwiYW5pbWF0ZUNsb3NlIiwiYXBwbGllZFN0eWxlcyIsInJlbW92ZVByb3BlcnR5IiwidGltZVN0YW1wIiwiJG1hbnVhbFRpbWVTdGFtcCIsImVsYXBzZWRUaW1lIiwiRUxBUFNFRF9USU1FX01BWF9ERUNJTUFMX1BMQUNFUyIsIm1heERlbGF5VGltZSIsIm1heER1cmF0aW9uIiwic3RhZ2dlclRpbWUiLCJ0cmFuc2l0aW9uU3RhZ2dlckRlbGF5IiwiYW5pbWF0aW9uU3RhZ2dlckRlbGF5IiwiQ1NTX1BSRUZJWCIsIm1heERlbGF5IiwiT05FX1NFQ09ORCIsIm9sZFN0eWxlIiwiQU5JTUFUSU9ORU5EX0VWRU5UIiwiVFJBTlNJVElPTkVORF9FVkVOVCIsImFuaW1hdGlvblRpbWUiLCJDTE9TSU5HX1RJTUVfQlVGRkVSIiwiYm9vbCIsIlBST1BFUlRZX0tFWSIsIkFOSU1BVElPTl9QTEFZU1RBVEVfS0VZIiwiYW5pbWF0ZUJlZm9yZSIsImFuaW1hdGVBZnRlciIsImFuaW1hdGlvbkNvbXBsZXRlIiwicHJlUmVmbG93Q2FuY2VsbGF0aW9uIiwic3VmZml4Q2xhc3NlcyIsIm9udHJhbnNpdGlvbmVuZCIsIm9ud2Via2l0dHJhbnNpdGlvbmVuZCIsIm9uYW5pbWF0aW9uZW5kIiwib253ZWJraXRhbmltYXRpb25lbmQiLCJhbmltYXRpb25Db21wbGV0ZWQiLCJiZWZvcmVTZXRDbGFzcyIsImNhbmNlbGxhdGlvbk1ldGhvZCIsImJlZm9yZUFkZENsYXNzIiwiYmVmb3JlUmVtb3ZlQ2xhc3MiLCIkQXJpYVByb3ZpZGVyIiwiYXJpYUF0dHIiLCJuZWdhdGUiLCJhcmlhQ2FtZWxOYW1lIiwiYm9vbFZhbCIsImFyaWFIaWRkZW4iLCJhcmlhQ2hlY2tlZCIsImFyaWFEaXNhYmxlZCIsImFyaWFSZXF1aXJlZCIsImFyaWFJbnZhbGlkIiwiYXJpYU11bHRpbGluZSIsImFyaWFWYWx1ZSIsInRhYmluZGV4IiwiYmluZEtleXByZXNzIiwibmV3Q29uZmlnIiwiJCR3YXRjaEV4cHIiLCJuZ0FyaWFNb2R1bGUiLCIkYXJpYSIsInNob3VsZEF0dGFjaEF0dHIiLCJub3JtYWxpemVkQXR0ciIsImdldFNoYXBlIiwicm9sZSIsIm5nQXJpYVdhdGNoTW9kZWxWYWx1ZSIsImdldFJhZGlvUmVhY3Rpb24iLCJuZWVkc1RhYkluZGV4IiwibmdBcmlhQ2hlY2tib3hSZWFjdGlvbiIsInNoYXBlIiwiaXNOb2RlT25lT2YiLCJub2RlVHlwZUFycmF5IiwibmdLZXlwcmVzcyIsIk1kQ29yZUNvbmZpZ3VyZSIsIiRtZFRoZW1pbmdQcm92aWRlciIsInJBRkRlY29yYXRvciIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsInRocm90dGxlIiwiY2IiLCJxdWV1ZUFyZ3MiLCJhbHJlYWR5UXVldWVkIiwicXVldWVDYiIsIk1kQ29uc3RhbnRGYWN0b3J5IiwidmVuZG9yUHJvcGVydHkiLCJ3ZWJraXQiLCJLRVlfQ09ERSIsIkVOVEVSIiwiU1BBQ0UiLCJMRUZUX0FSUk9XIiwiVVBfQVJST1ciLCJSSUdIVF9BUlJPVyIsIkRPV05fQVJST1ciLCJUUkFOU0lUSU9ORU5EIiwiQU5JTUFUSU9ORU5EIiwiVFJBTlNGT1JNIiwiVFJBTlNJVElPTiIsIlRSQU5TSVRJT05fRFVSQVRJT04iLCJBTklNQVRJT05fUExBWV9TVEFURSIsIkFOSU1BVElPTl9EVVJBVElPTiIsIkFOSU1BVElPTl9OQU1FIiwiQU5JTUFUSU9OX1RJTUlORyIsIkFOSU1BVElPTl9ESVJFQ1RJT04iLCJzbSIsImd0LXNtIiwibWQiLCJndC1tZCIsImxnIiwiZ3QtbGciLCJJdGVyYXRvciIsInJlbG9vcCIsImdldEl0ZW1zIiwiX2l0ZW1zIiwiaW5SYW5nZSIsImhhc05leHQiLCJoYXNQcmV2aW91cyIsIml0ZW1BdCIsImZpbmRCeSIsImZpcnN0IiwiZmluZFN1YnNlcXVlbnRJdGVtIiwiYmFja3dhcmRzIiwidHJ1ZUZuIiwiY3VySW5kZXgiLCJuZXh0SW5kZXgiLCJmb3VuZEl0ZW0iLCJwcmV2aW91cyIsIm5leHRVbmlxdWVJZCIsIlV0aWwiLCJwZXJmb3JtYW5jZSIsImVsZW1lbnRSZWN0Iiwib2Zmc2V0UGFyZW50Iiwibm9kZVJlY3QiLCJwYXJlbnRSZWN0Iiwic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCIsIndpZHRoIiwiaGVpZ2h0IiwiZmFrZU5nTW9kZWwiLCIkZmFrZSIsImZ1bmMiLCJ3YWl0IiwicmVjZW50IiwiZGlnaXQiLCJkaXNjb25uZWN0U2NvcGUiLCIkJGRpc2Nvbm5lY3RlZCIsInJlY29ubmVjdFNjb3BlIiwiZ2V0Q2xvc2VzdCIsImVsIiwiQXJpYVNlcnZpY2UiLCJkZWZhdWx0VmFsdWUiLCJjaGlsZEhhc0F0dHJpYnV0ZSIsImV4cGVjdEFzeW5jIiwiZGVmYXVsdFZhbHVlR2V0dGVyIiwiZXhwZWN0V2l0aFRleHQiLCJpc0hpZGRlbiIsImN1cnJlbnRTdHlsZSIsImRpc3BsYXkiLCJoYXNDaGlsZHJlbiIsImhhc0NoaWxkTm9kZXMiLCJoYXNBdHRyIiwibWRDb21waWxlclNlcnZpY2UiLCJ0cmFuc2Zvcm1UZW1wbGF0ZSIsInJ1bkhhbmRsZXJzIiwiaGFuZGxlckV2ZW50IiwiaGFuZGxlciIsImhhbmRsZXJOYW1lIiwiSEFORExFUlMiLCJwb2ludGVyIiwiZ2VzdHVyZVN0YXJ0IiwibGFzdFBvaW50ZXIiLCJ0eXBlc01hdGNoIiwiZW5kVGltZSIsIm1ha2VTdGFydFBvaW50ZXIiLCJnZXN0dXJlTW92ZSIsInVwZGF0ZVBvaW50ZXJTdGF0ZSIsImdlc3R1cmVFbmQiLCJnZXRFdmVudFBvaW50IiwicG9pbnQiLCJwYWdlWCIsInBhZ2VZIiwiZGlzdGFuY2VYIiwic3RhcnRYIiwiZGlzdGFuY2VZIiwic3RhcnRZIiwiZGlzdGFuY2UiLCJkaXJlY3Rpb25YIiwiZGlyZWN0aW9uWSIsImR1cmF0aW9uIiwidmVsb2NpdHlYIiwidmVsb2NpdHlZIiwic3RhcnRQb2ludGVyIiwiU1RBUlRfRVZFTlRTIiwiTU9WRV9FVkVOVFMiLCJFTkRfRVZFTlRTIiwidmVuZG9yIiwib3BlcmEiLCJpc0lvcyIsImlzQW5kcm9pZCIsInNob3VsZEhpamFja0NsaWNrcyIsImlzS2V5Q2xpY2siLCIkbWF0ZXJpYWwiLCIkJE1kR2VzdHVyZUhhbmRsZXIiLCJhZGRIYW5kbGVyIiwicmVnaXN0ZXJFbGVtZW50IiwibWF4RGlzdGFuY2UiLCJkaXNwYXRjaEV2ZW50Iiwib25TdGFydCIsIm9uQ2FuY2VsIiwicmVnaXN0ZXJlZFBhcmVudCIsIm9uTW92ZSIsImR4IiwiZHkiLCJtaW5EaXN0YW5jZSIsImhvcml6b250YWwiLCJzaG91bGRTdGFydERyYWciLCJzaG91bGRDYW5jZWwiLCJkcmFnUG9pbnRlciIsImRpc3BhdGNoRHJhZ01vdmUiLCJpc1J1bm5pbmciLCJtaW5WZWxvY2l0eSIsIkdlc3R1cmVIYW5kbGVyIiwic3JjRXZlbnQiLCJldmVudFBvaW50ZXIiLCJldmVudE9iaiIsImNyZWF0ZUV2ZW50IiwiaW5pdE1vdXNlRXZlbnQiLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImFsdEtleSIsImluaXRDdXN0b21FdmVudCIsInBhcmVudFRhcmdldCIsImdldE5lYXJlc3RQYXJlbnQiLCJwYXJlbnRUYXJnZXRPcHRpb25zIiwiJG1kR2VzdHVyZSIsIm9uRGVzdHJveSIsIkludGVyaW1FbGVtZW50UHJvdmlkZXIiLCJjcmVhdGVJbnRlcmltRWxlbWVudFByb3ZpZGVyIiwiaW50ZXJpbUZhY3RvcnlOYW1lIiwic2V0RGVmYXVsdHMiLCJwcm92aWRlckNvbmZpZyIsIm9wdGlvbnNGYWN0b3J5IiwibWV0aG9kcyIsIkVYUE9TRURfTUVUSE9EUyIsImFkZFByZXNldCIsInByZXNldHMiLCJhcmdPcHRpb24iLCIkJGludGVyaW1FbGVtZW50Iiwic2hvd0ludGVyaW1FbGVtZW50IiwiX29wdGlvbnMiLCJpbnRlcmltRWxlbWVudFNlcnZpY2UiLCJzaG93IiwiZGVmYXVsdE9wdGlvbnMiLCJpbnZva2VGYWN0b3J5IiwiZGVmYXVsdFZhbCIsInB1YmxpY1NlcnZpY2UiLCJkZWZhdWx0TWV0aG9kcyIsImhpZGUiLCJQcmVzZXQiLCJwcmVzZXREZWZhdWx0cyIsInByZXNldE1ldGhvZHMiLCIkdHlwZSIsIm1ldGhvZE5hbWUiLCJJbnRlcmltRWxlbWVudEZhY3RvcnkiLCIkbWRDb21waWxlciIsIiRtZFRoZW1pbmciLCJyZXBsYWNlSW50ZXJwb2xhdGlvblN5bWJvbHMiLCJ1c2VzU3RhbmRhcmRTeW1ib2xzIiwicHJvY2Vzc1RlbXBsYXRlIiwiaW50ZXJpbUVsZW1lbnQiLCJJbnRlcmltRWxlbWVudCIsImhpZGVUaW1lb3V0Iiwib25TaG93Iiwib25SZW1vdmUiLCJjb21waWxlRGF0YSIsInN0YXJ0SGlkZVRpbWVvdXQiLCJoaWRlRGVsYXkiLCJ0aGVtYWJsZSIsIm9uQ29tcGxldGUiLCJjYW5jZWxUaW1lb3V0IiwiQ29tcG9uZW50UmVnaXN0cnkiLCJpc1ZhbGlkSUQiLCJpbnN0YW5jZXMiLCJwZW5kaW5ncyIsIm5vdEZvdW5kRXJyb3IiLCJnZXRJbnN0YW5jZXMiLCIkJG1kSGFuZGxlIiwiZGVyZWdpc3RlciIsInJlc29sdmVXaGVuIiwiZGZkIiwiSW5rUmlwcGxlRGlyZWN0aXZlIiwiJG1kSW5rUmlwcGxlIiwiYXR0YWNoQ2hlY2tib3hCZWhhdmlvciIsImF0dGFjaEJ1dHRvbkJlaGF2aW9yIiwiSW5rUmlwcGxlU2VydmljZSIsImF0dGFjaCIsImlzRkFCIiwiaXNNZW51SXRlbSIsImNlbnRlciIsImRpbUJhY2tncm91bmQiLCJmaXRSaXBwbGUiLCJhdHRhY2hUYWJCZWhhdmlvciIsIm91dGxpbmUiLCJnZXRSaXBwbGVDb250YWluZXIiLCJjb250YWluZXIiLCJwYXJzZUNvbG9yIiwiY29sb3IiLCJoZXhUb1JHQkEiLCJkaWciLCJyZWQiLCJncm4iLCJibHUiLCJyZ2JUb1JHQkEiLCJyZW1vdmVFbGVtZW50IiwicmlwcGxlcyIsImJhY2tncm91bmRDb2xvciIsInVwZGF0ZUVsZW1lbnQiLCJzdGF0ZXMiLCJlbGVtSXNBY3RpdmUiLCJpc0FjdGl2ZSIsImVsZW1Jc0hlbGQiLCJpc0hlbGQiLCJhbmltYXRpbmciLCJyaXBwbGVTaXplIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsImNyZWF0ZVJpcHBsZSIsImdldFJpcHBsZUVsZW1lbnQiLCJnZXRSaXBwbGVTaXplIiwibXVsdGlwbGllciIsInJlY3QiLCJnZXRSaXBwbGVDc3MiLCJyZ2JhVG9SR0IiLCJib3JkZXJDb2xvciIsImNvbG9yRWxlbWVudCIsImJvcmRlcldpZHRoIiwib25QcmVzc0Rvd24iLCJpc1JpcHBsZUFsbG93ZWQiLCJvblByZXNzVXAiLCJyaXBwbGUiLCJpc0Rpc2FibGVkIiwiZ3JhbmRwYXJlbnQiLCJhbmNlc3RvciIsIm1vdXNlZG93biIsImhvdmVyIiwibW91c2Vkb3duUGF1c2VUaW1lIiwiaXNBY3RpdmVFeHByIiwicmlwcGxlU2l6ZVNldHRpbmciLCJhdHRyTm9EaXJlY3RpdmUiLCI1MCIsIjEwMCIsIjIwMCIsIjMwMCIsIjQwMCIsIjUwMCIsIjYwMCIsIjcwMCIsIjgwMCIsIjkwMCIsIkExMDAiLCJBMjAwIiwiQTQwMCIsIkE3MDAiLCJjb250cmFzdERlZmF1bHRDb2xvciIsImNvbnRyYXN0RGFya0NvbG9ycyIsImNvbnRyYXN0U3Ryb25nTGlnaHRDb2xvcnMiLCJwaW5rIiwicHVycGxlIiwiZGVlcC1wdXJwbGUiLCJpbmRpZ28iLCJibHVlIiwibGlnaHQtYmx1ZSIsImNvbnRyYXN0TGlnaHRDb2xvcnMiLCJjeWFuIiwidGVhbCIsImdyZWVuIiwibGlnaHQtZ3JlZW4iLCJsaW1lIiwieWVsbG93IiwiYW1iZXIiLCJvcmFuZ2UiLCJkZWVwLW9yYW5nZSIsImJyb3duIiwiZ3JleSIsIjAiLCIxMDAwIiwiYmx1ZS1ncmV5IiwiVGhlbWluZ1Byb3ZpZGVyIiwiJG1kQ29sb3JQYWxldHRlIiwiZGVmaW5lUGFsZXR0ZSIsIlBBTEVUVEVTIiwiY2hlY2tQYWxldHRlVmFsaWQiLCJ0aGVtaW5nUHJvdmlkZXIiLCJleHRlbmRQYWxldHRlIiwibWlzc2luZ0NvbG9ycyIsIlZBTElEX0hVRV9WQUxVRVMiLCJmaWVsZCIsInJlZ2lzdGVyVGhlbWUiLCJpbmhlcml0RnJvbSIsIlRIRU1FUyIsInBhcmVudFRoZW1lIiwiVGhlbWUiLCJjb2xvcnMiLCJjb2xvclR5cGUiLCJodWVzIiwic2V0RGFyayIsImlzRGFyayIsImZvcmVncm91bmRQYWxldHRlIiwiTElHSFRfRk9SRUdST1VORCIsIkRBUktfRk9SRUdST1VORCIsImZvcmVncm91bmRTaGFkb3ciLCJEQVJLX1NIQURPVyIsIkxJR0hUX1NIQURPVyIsIm5ld0RlZmF1bHRIdWVzIiwiREFSS19ERUZBVUxUX0hVRVMiLCJMSUdIVF9ERUZBVUxUX0hVRVMiLCJvbGREZWZhdWx0SHVlcyIsIm5ld0RlZmF1bHRzIiwib2xkRGVmYXVsdHMiLCJodWVOYW1lIiwiZGFyayIsIlRIRU1FX0NPTE9SX1RZUEVTIiwiZGVmYXVsdEh1ZXMiLCJwYWxldHRlTmFtZSIsImh1ZVZhbHVlIiwiVGhlbWluZ1NlcnZpY2UiLCJyZWdpc3RlcmVkIiwiYXBwbHlUaGVtZSIsImNoYW5nZVRoZW1lIiwib2xkVGhlbWUiLCJhdHRyVGhlbWVWYWx1ZSIsImFsd2F5c1dhdGNoVGhlbWUiLCIkbWRUaGVtZSIsImRlZmF1bHRUaGVtZSIsInNldERlZmF1bHRUaGVtZSIsImFsd2F5c1dhdGNoIiwiX0xJR0hUX0RFRkFVTFRfSFVFUyIsIl9EQVJLX0RFRkFVTFRfSFVFUyIsIl9QQUxFVFRFUyIsIl9USEVNRVMiLCJfcGFyc2VSdWxlcyIsInBhcnNlUnVsZXMiLCJfcmdiYSIsInJnYmEiLCJUaGVtaW5nRGlyZWN0aXZlIiwiJHNldFRoZW1lIiwibWRUaGVtZSIsIlRoZW1hYmxlRGlyZWN0aXZlIiwicnVsZXMiLCJjaGVja1ZhbGlkUGFsZXR0ZSIsImdlbmVyYXRlZFJ1bGVzIiwidGhlbWVOYW1lUmVnZXgiLCJodWVSZWdleCIsInNpbXBsZVZhcmlhYmxlUmVnZXgiLCJwYWxldHRlIiwiaHVlIiwib3BhY2l0eSIsIm5ld1J1bGUiLCJodWVUeXBlIiwiZ2VuZXJhdGVUaGVtZXMiLCJzYW5pdGl6ZVBhbGV0dGUiLCJkZWZhdWx0Q29udHJhc3QiLCJsaWdodENvbG9ycyIsInN0cm9uZ0xpZ2h0Q29sb3JzIiwiZGFya0NvbG9ycyIsImdldENvbnRyYXN0Q29sb3IiLCJEQVJLX0NPTlRSQVNUX0NPTE9SIiwiU1RST05HX0xJR0hUX0NPTlRSQVNUX0NPTE9SIiwiTElHSFRfQ09OVFJBU1RfQ09MT1IiLCJyZ2JWYWx1ZSIsImNvbG9yVG9SZ2JhQXJyYXkiLCJjb250cmFzdCIsInRoZW1lQ3NzIiwicnVsZSIsInJ1bGVzQnlUeXBlIiwicnVsZU1hdGNoUmVnZXgiLCJERUZBVUxUX0NPTE9SX1RZUEUiLCJzdHlsZVN0cmluZyIsImFjY2VudCIsImdlbmVyYXRpb25Jc0RvbmUiLCJoZWFkIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbHIiLCJyZ2JBcnJheSIsIjEiLCIyIiwiMyIsIjQiLCJkZWZhdWx0IiwiaHVlLTEiLCJodWUtMiIsImh1ZS0zIiwiYmFja2dyb3VuZCIsImRlZmF1bHREZWZhdWx0SHVlcyIsIkJhY2tkcm9wRGlyZWN0aXZlIiwiTWRCb3R0b21TaGVldERpcmVjdGl2ZSIsIk1kQm90dG9tU2hlZXRQcm92aWRlciIsIiQkaW50ZXJpbUVsZW1lbnRQcm92aWRlciIsImJvdHRvbVNoZWV0RGVmYXVsdHMiLCIkbWRCb3R0b21TaGVldCIsImJhY2tkcm9wIiwiYm90dG9tU2hlZXQiLCJCb3R0b21TaGVldCIsInRhcmdldEV2ZW50IiwiZGlzYWJsZVBhcmVudFNjcm9sbCIsImxhc3RPdmVyZmxvdyIsImZvY3VzYWJsZSIsImVzY2FwZVRvQ2xvc2UiLCJyb290RWxlbWVudEtleXVwQ2FsbGJhY2siLCJvbkRyYWdTdGFydCIsIm9uRHJhZyIsInRyYW5zZm9ybSIsIlBBRERJTkciLCJvbkRyYWdFbmQiLCJDTE9TSU5HX1ZFTE9DSVRZIiwiZGlzdGFuY2VSZW1haW5pbmciLCJNZEJ1dHRvbkRpcmVjdGl2ZSIsIiRtZEFyaWEiLCJpc0FuY2hvciIsIm5nSHJlZiIsImdldFRlbXBsYXRlIiwicG9zdExpbmsiLCJlbGVtZW50SGFzVGV4dCIsIm5nRGlzYWJsZWQiLCJtZENhcmREaXJlY3RpdmUiLCJNZENoZWNrYm94RGlyZWN0aXZlIiwiJG1kVXRpbCIsInRhYkluZGV4Iiwia2V5cHJlc3NIYW5kbGVyIiwiQ0hFQ0tFRF9DU1MiLCJtZENvbnRlbnREaXJlY3RpdmUiLCJDb250ZW50Q29udHJvbGxlciIsImlvc1Njcm9sbEZpeCIsIiRtYXRlcmlhbFNjcm9sbEZpeGVkIiwic2Nyb2xsSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiTWREaWFsb2dEaXJlY3RpdmUiLCJjbGllbnRIZWlnaHQiLCJNZERpYWxvZ1Byb3ZpZGVyIiwiYWR2YW5jZWREaWFsb2dPcHRpb25zIiwiJG1kRGlhbG9nIiwiZGlhbG9nRGVmYXVsdE9wdGlvbnMiLCJmaW5kQ2xvc2VCdXR0b24iLCJjbG9zZUJ1dHRvbiIsImFjdGlvbkJ1dHRvbnMiLCJwb3BJblRhcmdldCIsImNvbmZpZ3VyZUFyaWEiLCJoYXNCYWNrZHJvcCIsInBhcmVudE9mZnNldCIsImRpYWxvZ1BvcEluIiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsImRpYWxvZ0NsaWNrT3V0c2lkZUNhbGxiYWNrIiwiZGlhbG9nUG9wT3V0IiwiZGlhbG9nQ29udGVudCIsIndvcmRzIiwiY2xpY2tFbGVtZW50IiwiZGlhbG9nRWwiLCJ0cmFuc2Zvcm1Ub0NsaWNrRWxlbWVudCIsImRpYWxvZ1RyYW5zaXRpb25FbmQiLCJjbGlja1JlY3QiLCJkaWFsb2dSZWN0Iiwic2NhbGVYIiwic2NhbGVZIiwiZmluaXNoZWQiLCJNZERpdmlkZXJDb250cm9sbGVyIiwiTWREaXZpZGVyRGlyZWN0aXZlIiwibWRJY29uRGlyZWN0aXZlIiwiaWNvbiIsIm1kSW5wdXRDb250YWluZXJEaXJlY3RpdmUiLCJDb250YWluZXJDdHJsIiwiaXNFcnJvckdldHRlciIsIm1kSXNFcnJvciIsInNldEZvY3VzZWQiLCJpc0ZvY3VzZWQiLCJzZXRIYXNWYWx1ZSIsImhhc1ZhbHVlIiwic2V0SW52YWxpZCIsImlzSW52YWxpZCIsImhhc0xhYmVsQW5kSW5wdXQiLCJsYWJlbERpcmVjdGl2ZSIsImNvbnRhaW5lckN0cmwiLCJpbnB1dFRleHRhcmVhRGlyZWN0aXZlIiwibmdNb2RlbFBpcGVsaW5lQ2hlY2tWYWx1ZSIsImlucHV0Q2hlY2tWYWx1ZSIsInNldHVwVGV4dGFyZWEiLCJwaXBlbGluZUxpc3RlbmVyIiwib25DaGFuZ2VUZXh0YXJlYSIsImdyb3dUZXh0YXJlYSIsIm9uU2Nyb2xsIiwiaXNSZWFkb25seSIsInJlYWRvbmx5IiwibWRNYXhsZW5ndGhEaXJlY3RpdmUiLCJyZW5kZXJDaGFyQ291bnQiLCJjaGFyQ291bnRFbCIsIm1kTWF4bGVuZ3RoIiwibGFzdEVsZW1lbnRDaGlsZCIsInBsYWNlaG9sZGVyRGlyZWN0aXZlIiwiaW5wdXRDb250YWluZXIiLCJwbGFjZWhvbGRlclRleHQiLCJwbGFjZWhvbGRlciIsIm1kTGlzdERpcmVjdGl2ZSIsIm1kSXRlbURpcmVjdGl2ZSIsIk1kUHJvZ3Jlc3NDaXJjdWxhckRpcmVjdGl2ZSIsImNsYW1wZWQiLCJmaWxsUm90YXRpb24iLCJmaXhSb3RhdGlvbiIsImNpcmNsZSIsImZpbGwiLCJmaXgiLCJkaWFtZXRlciIsIm1kRGlhbWV0ZXIiLCJzY2FsZSIsImNsYW1wIiwiZmlsbFJvdGF0aW9ucyIsImZpeFJvdGF0aW9ucyIsImNlaWwiLCJwZXJjZW50Iiwicm90YXRpb24iLCJNZFByb2dyZXNzTGluZWFyRGlyZWN0aXZlIiwiYmFyMVN0eWxlIiwiYmFyMlN0eWxlIiwibWRNb2RlIiwidHJhbnNmb3JtcyIsIm1ha2VUcmFuc2Zvcm0iLCJ0cmFuc2xhdGVYIiwibWRSYWRpb0dyb3VwRGlyZWN0aXZlIiwibGlua1JhZGlvR3JvdXAiLCJrZXlkb3duTGlzdGVuZXIiLCJyZ0N0cmwiLCJzZWxlY3RQcmV2aW91cyIsInNlbGVjdE5leHQiLCJSYWRpb0dyb3VwQ29udHJvbGxlciIsIl9yYWRpb0J1dHRvblJlbmRlckZucyIsImNyZWF0ZVJhZGlvR3JvdXBDb250cm9sbGVyUHJvdG8iLCJfbmdNb2RlbEN0cmwiLCJyYlJlbmRlciIsInNldFZpZXdWYWx1ZSIsImNoYW5nZVNlbGVjdGVkQnV0dG9uIiwic2V0QWN0aXZlRGVzY2VuZGFudCIsInJhZGlvSWQiLCJpbmNyZW1lbnQiLCJidXR0b25zIiwibWRSYWRpb0J1dHRvbkRpcmVjdGl2ZSIsImxhc3RDaGVja2VkIiwiYnVpbGRBcmlhSUQiLCJhcmlhSWQiLCJhcmlhLWNoZWNrZWQiLCJTaWRlbmF2U2VydmljZSIsIiRtZENvbXBvbmVudFJlZ2lzdHJ5IiwiZXJyb3JNc2ciLCJpc09wZW4iLCJpc0xvY2tlZE9wZW4iLCJ0b2dnbGUiLCJjbG9zZSIsIlNpZGVuYXZEaXJlY3RpdmUiLCJzaWRlbmF2Q3RybCIsInVwZGF0ZUlzTG9ja2VkIiwiaXNMb2NrZWQiLCJ1cGRhdGVJc09wZW4iLCJvbktleURvd24iLCJ0cmlnZ2VyaW5nRWxlbWVudCIsImFjdGl2ZUVsZW1lbnQiLCJ0b2dnbGVPcGVuIiwiaXNFc2NhcGUiLCJpc0xvY2tlZE9wZW5QYXJzZWQiLCJtZElzTG9ja2VkT3BlbiIsIiRtZWRpYSIsIiR0b2dnbGVPcGVuIiwiU2lkZW5hdkNvbnRyb2xsZXIiLCJtZENvbXBvbmVudElkIiwiU2xpZGVyRGlyZWN0aXZlIiwidXBkYXRlQWxsIiwicmVmcmVzaFNsaWRlckRpbWVuc2lvbnMiLCJuZ01vZGVsUmVuZGVyIiwicmVkcmF3VGlja3MiLCJ1cGRhdGVNaW4iLCJ1cGRhdGVNYXgiLCJ1cGRhdGVTdGVwIiwic3RlcCIsInVwZGF0ZUFyaWFEaXNhYmxlZCIsIm1kRGlzY3JldGUiLCJudW1TdGVwcyIsInRpY2tDYW52YXMiLCJ0cmFja1RpY2tzU3R5bGUiLCJ0aWNrQ29udGFpbmVyIiwidGlja0N0eCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJkaW1lbnNpb25zIiwiZ2V0U2xpZGVyRGltZW5zaW9ucyIsImZpbGxSZWN0Iiwic2xpZGVyRGltZW5zaW9ucyIsInRyYWNrQ29udGFpbmVyIiwidGhyb3R0bGVkUmVmcmVzaERpbWVuc2lvbnMiLCJjaGFuZ2VBbW91bnQiLCJzZXRNb2RlbFZhbHVlIiwibWluTWF4VmFsaWRhdG9yIiwic3RlcFZhbGlkYXRvciIsInNldFNsaWRlclBlcmNlbnQiLCJ0aHVtYlRleHQiLCJhY3RpdmVUcmFjayIsInRodW1iQ29udGFpbmVyIiwiaXNEaXNhYmxlZEdldHRlciIsImV4YWN0VmFsIiwicGVyY2VudFRvVmFsdWUiLCJwb3NpdGlvblRvUGVyY2VudCIsImNsb3Nlc3RWYWwiLCJ2YWx1ZVRvUGVyY2VudCIsImlzRHJhZ2dpbmciLCJzZXRTbGlkZXJGcm9tRXZlbnQiLCJpc0Rpc2NyZXRlIiwiYWRqdXN0VGh1bWJQb3NpdGlvbiIsImRvU2xpZGUiLCJpc0Rpc2FibGVkUGFyc2VkIiwidGh1bWIiLCJzdG9wRGlzYWJsZWRXYXRjaCIsImRlYm91bmNlZFVwZGF0ZUFsbCIsIk1kU3RpY2t5Iiwic2V0dXBTdGlja3kiLCJjb250ZW50Q3RybCIsInN0aWNreUNsb25lIiwic3RpY2t5QmFzZW9mZnNldCIsImNvbnRlbnRFbCIsImRlYm91bmNlZFJlZnJlc2hFbGVtZW50cyIsInJlZnJlc2hFbGVtZW50cyIsInJlZnJlc2hQb3NpdGlvbiIsImN1cnJlbnRTY3JvbGxUb3AiLCJzZXRDdXJyZW50SXRlbSIsIm9mZnNldFRvcCIsIm9mZnNldExlZnQiLCJpc1Njcm9sbGluZ0Rvd24iLCJwcmV2U2Nyb2xsVG9wIiwidHJhbnNsYXRlIiwicHJldiIsInNldFN0aWNreVN0YXRlIiwidHJhbnNsYXRlWSIsInNldHVwQXVnbWVudGVkU2Nyb2xsRXZlbnRzIiwiY2hlY2tTdGlja3lTdXBwb3J0Iiwic3RpY2t5UHJvcCIsInRlc3RFbCIsInN0aWNreVByb3BzIiwiei1pbmRleCIsImxvb3BTY3JvbGxFdmVudCIsImxhc3RTY3JvbGxUaW1lIiwiU0NST0xMX0VORF9ERUxBWSIsImlzU2Nyb2xsaW5nIiwiYnJvd3NlclN0aWNreVN1cHBvcnQiLCIkJHN0aWNreSIsIk1kU3ViaGVhZGVyRGlyZWN0aXZlIiwiJG1kU3RpY2t5Iiwib3V0ZXJIVE1MIiwiZ2V0Q29udGVudCIsIk1kU3dpdGNoIiwibWRDaGVja2JveERpcmVjdGl2ZSIsImNoZWNrYm94TGluayIsImNoZWNrYm94RGlyZWN0aXZlIiwiZGlzYWJsZWRHZXR0ZXIiLCJkcmFnIiwiaXNDaGFuZ2VkIiwiYXBwbHlNb2RlbFZhbHVlIiwic3dpdGNoQ29udGFpbmVyIiwibWRUZXh0RmxvYXREaXJlY3RpdmUiLCJmaWQiLCJtZEZpZCIsImRpc2FibGVkUGFyc2VkIiwibWRJbnB1dEdyb3VwRGlyZWN0aXZlIiwibWRJbnB1dERpcmVjdGl2ZSIsImlzTm90RW1wdHkiLCJpbnB1dEdyb3VwQ3RybCIsIk1kVG9hc3REaXJlY3RpdmUiLCJNZFRvYXN0UHJvdmlkZXIiLCJ0b2FzdERlZmF1bHRPcHRpb25zIiwiJG1kVG9hc3QiLCJ0b2FzdE9wZW5DbGFzcyIsIm9uU3dpcGUiLCJtZFRvb2xiYXJEaXJlY3RpdmUiLCJzZXR1cFNjcm9sbFNocmluayIsIm9uTWRDb250ZW50TG9hZCIsIm5ld0NvbnRlbnRFbCIsImNvbnRlbnRFbGVtZW50IiwiZGVib3VuY2VkQ29udGVudFNjcm9sbCIsInVwZGF0ZVRvb2xiYXJIZWlnaHQiLCJ0b29sYmFySGVpZ2h0Iiwic2hyaW5rU3BlZWRGYWN0b3IiLCJvbkNvbnRlbnRTY3JvbGwiLCJkZWJvdW5jZWRVcGRhdGVIZWlnaHQiLCJtZFNocmlua1NwZWVkRmFjdG9yIiwibWRTY3JvbGxTaHJpbmsiLCJNZFRvb2x0aXBEaXJlY3RpdmUiLCJzZXRWaXNpYmxlIiwicXVldWVkIiwidmlzaWJsZSIsInNob3dUb29sdGlwIiwidG9vbHRpcFBhcmVudCIsInBvc2l0aW9uVG9vbHRpcCIsImhpZGVUb29sdGlwIiwidGlwUmVjdCIsInRpcERpcmVjdGlvbiIsIm5ld1Bvc2l0aW9uIiwiVE9PTFRJUF9XSU5ET1dfRURHRV9TUEFDRSIsIm1kRGVsYXkiLCJUT09MVElQX1NIT1dfREVMQVkiLCJpc1Zpc2libGUiLCJkZWJvdW5jZWRPblJlc2l6ZSIsIk1kVGFiSW5rRGlyZWN0aXZlIiwidXBkYXRlQmFyIiwidGFic0N0cmwiLCJnZXRTZWxlY3RlZEl0ZW0iLCJoaWRlSW5rQmFyIiwibWROb0JhciIsInBhZ2luYXRpb24iLCJ0YWJEYXRhIiwiZ2V0U2VsZWN0ZWRJbmRleCIsInRhYnMiLCJjbGFzc05hbWVzIiwiY2xhc3NJbmRleCIsImRlYm91bmNlZFVwZGF0ZUJhciIsImlua0JhckVsZW1lbnQiLCJUYWJQYWdpbmF0aW9uRGlyZWN0aXZlIiwib25UYWJGb2N1cyIsInRhYiIsIm9sZFRhYiIsInBhZ2VJbmRleCIsImdldFBhZ2VGb3JUYWIiLCJwYWdlIiwic2V0UGFnZSIsImxvY2tlZCIsInVzZXJDaGFuZ2VQYWdlIiwic2l6ZURhdGEiLCJuZXdQYWdlIiwicGFnZXMiLCJuZXdUYWJJbmRleCIsIm5ld1RhYiIsInVwZGF0ZVBhZ2luYXRpb24iLCJlbmFibGVQYWdpbmF0aW9uIiwidGFic1BhcmVudCIsImZpbGxlciIsImRpc2FibGVQYWdpbmF0aW9uIiwic2xpZGVUYWJCdXR0b25zIiwid2FpdEZvclZpc2libGUiLCJkZWJvdW5jZWRVcGRhdGVQYWdpbmF0aW9uIiwiY2FsY3VsYXRlVGFiRGF0YSIsIm5lZWRQYWdpbmF0aW9uIiwib25UYWJzUGFyZW50VHJhbnNpdGlvbkVuZCIsInBhZ2luZ09mZnNldCIsIiQkcGFnaW5nT2Zmc2V0Iiwic2hvdWxkU3RyZXRjaFRhYnMiLCJzdHJldGNoVGFicyIsIm5vQWRqdXN0IiwiYWRqdXN0Rm9yU3RyZXRjaGVkVGFicyIsImNhbnZhc1dpZHRoIiwiY2xpZW50V2lkdGgiLCJ0YWJzV2lkdGgiLCJ0YWJzUGVyUGFnZSIsInRhYldpZHRoIiwiJHRhYnMiLCJjdXJyZW50UGFnZSIsIlBBR0lOQVRPUlNfV0lEVEgiLCJ0b3RhbFdpZHRoIiwiZmlyc3RUYWJJbmRleCIsImxhc3RUYWJJbmRleCIsInRhYkVsZW1lbnRzIiwibGFzdFBhZ2UiLCJoYXNQcmV2IiwiY2xpY2tOZXh0IiwiY2xpY2tQcmV2aW91cyIsInRhYlRvRm9jdXMiLCJUYWJJdGVtQ29udHJvbGxlciIsIm9uQWRkIiwiY29udGVudEFyZWEiLCJzaG91bGREaXNjb25uZWN0U2NvcGUiLCJjb250ZW50Q29udGFpbmVyIiwiY29udGVudFNjb3BlIiwidG9nZ2xlQW5pbWF0aW9uQ2xhc3MiLCJyaWdodFRvTGVmdCIsIm9uU2VsZWN0IiwiYXJpYS1zZWxlY3RlZCIsIm9uRGVzZWxlY3QiLCJNZFRhYkRpcmVjdGl2ZSIsInRhYkxhYmVsIiwidGFiQ29udGVudCIsInRyYW5zY2x1ZGVUYWJDb250ZW50IiwidGFiSXRlbUN0cmwiLCJkZWZhdWx0Q2xpY2tMaXN0ZW5lciIsIndhdGNoTmdSZXBlYXRJbmRleCIsIm5ld0luZGV4Iiwid2F0Y2hBY3RpdmVBdHRyaWJ1dGUiLCJhY3RpdmVXYXRjaEFjdGlvbiIsImRlc2VsZWN0IiwibWRBY3RpdmUiLCJ3YXRjaERpc2FibGVkIiwiZGlzYWJsZWRXYXRjaEFjdGlvbiIsInRhYklkIiwidGFiQ29udGVudElkIiwiYXJpYS1sYWJlbGxlZGJ5IiwiZGV0YWNoUmlwcGxlRm4iLCJNZFRhYnNDb250cm9sbGVyIiwic2VsZWN0ZWRJbmRleCIsInRhYnNMaXN0Iiwibm9SZXNlbGVjdCIsImlzU2VsZWN0ZWRJdGVtIiwidG9JbmRleCIsImZpbHRlckZuIiwiaXNUYWJFbmFibGVkIiwiVGFic0RpcmVjdGl2ZSIsIndhdGNoU2VsZWN0ZWQiLCJvbGRJbmRleCIsIm1kU3RyZXRjaFRhYnMiLCJBQ1RJVkVfQ0xBU1MiLCJJTkFDVElWRV9DTEFTUyIsIiRyZW5kZXJOZ01lc3NhZ2VDbGFzc2VzIiwibWVzc2FnZXMiLCJyZWdpc3Rlck1lc3NhZ2UiLCJ0ZW1wIiwicmVuZGVyTWVzc2FnZXMiLCJ0cnV0aHlWYWwiLCJmb3VuZCIsInJlbmRlckVsZW1lbnRDbGFzc2VzIiwiY2FjaGVkVmFsdWVzIiwibmdNZXNzYWdlc011bHRpcGxlIiwid2F0Y2hBdHRyIiwibmdNZXNzYWdlcyIsIm5nTWVzc2FnZXNJbmNsdWRlIiwiaW5jbHVkZSIsIkNPTU1FTlRfTk9ERSIsImNvbW1lbnROb2RlIiwibmdNZXNzYWdlIiwiX2RhdGVGaWx0ZXIiLCJfbW9kZWxWYWx1ZSIsInNhdmVGbiIsIl9tb2RlIiwiX2Rpc3BsYXlNb2RlIiwiX3ZlcnRpY2FsTW9kZSIsIl9ob3VyczI0IiwicmVzdHJpY3Rpb25zIiwibWluZGF0ZSIsIm1heGRhdGUiLCJzZXREYXRlIiwib25TYXZlIiwic2F2ZSIsIiR2YWx1ZSIsImNhbGVuZGFyIiwiX3llYXIiLCJfbW9udGgiLCJjbG9jayIsIl9taW51dGVzIiwiX2hvdXJzIiwiZnVsbFRpdGxlIiwidGl0bGUiLCJzdXBlciIsIm1haW4iLCJ0cnVzdEFzSHRtbCIsInN1YiIsIl9tb250aHMiLCJfaSIsIl9yZXN1bHRzIiwib2Zmc2V0TWFyZ2luIiwiY2xhc3MiLCJtb250aENoYW5nZSIsIl9pbmNNb250aCIsIm1vbnRocyIsIl9pbmNIb3VycyIsImluYyIsIl9pbmNNaW51dGVzIiwic2V0QU0iLCJpc0FNIiwic2V0Tm93IiwibW9kZUNsYXNzIiwibW9kZVN3aXRjaCIsIl9yZWYiLCJtb2RlU3dpdGNoVGV4dCIsIm5nTWFwIiwiTmF2aWdhdG9yR2VvbG9jYXRpb24iLCJHZW9Db2RlciIsIm9yZ0F0dHJpYnV0ZXMiLCJKU09OaXplIiwiJDEiLCJ0b09wdGlvblZhbHVlIiwib3V0cHV0IiwidDFzdEVsIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsImVycjIiLCJldmFsIiwiY2FwaXRhbGl6ZWRLZXkiLCJ3ZWF0aGVyIiwic2V0RGVsYXllZEdlb0xvY2F0aW9uIiwicGFyYW0iLCJjZW50ZXJlZCIsImVycm9yRnVuYyIsImZhbGxiYWNrTG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJsYXQiLCJsYXRpdHVkZSIsImxuZyIsImxvbmdpdHVkZSIsImxhdExuZyIsInNldENlbnRlciIsImdlb2NvZGUiLCJhZGRyZXNzIiwiZ2VvbWV0cnkiLCJnZXRBdHRyc1RvT2JzZXJ2ZSIsImF0dHJzVG9PYnNlcnZlIiwiYXR0clZhbHVlIiwib2JzZXJ2ZUF0dHJTZXRPYmoiLCJvcmdBdHRycyIsIm9ic2VydmVBbmRTZXQiLCJzZXRNZXRob2QiLCJvcHRpb25WYWx1ZSIsImdldE9wdGlvbnMiLCJ0b0xvd2VyY2FzZUZ1bmMiLCJldmVudEZ1bmMiLCJmdW5jTmFtZSIsImFyZ3NTdHIiLCJyZWR1Y2UiLCJnZXRDb250cm9sT3B0aW9ucyIsImZpbHRlcmVkIiwiY29udHJvbE9wdGlvbnMiLCJvcmdWYWx1ZSIsIiQwIiwiJDIiLCJNYXBUeXBlSWQiLCJvYmpOYW1lIiwiQ29udHJvbFBvc2l0aW9uIiwiZ2VvY29kZXIiLCJHZW9jb2RlciIsIkdlb2NvZGVyU3RhdHVzIiwiT0siLCJnZW9sb2NhdGlvbiIsImV2dCIsIndhdGNoUG9zaXRpb24iLCJjbGVhcldhdGNoIiwiZ2V0UGFub3JhbWEiLCJsYXRsbmciLCJnZXRDZW50ZXIiLCJzdnMiLCJTdHJlZXRWaWV3U2VydmljZSIsImdldFBhbm9yYW1hQnlMb2NhdGlvbiIsIlN0cmVldFZpZXdTdGF0dXMiLCJwYW5vIiwic2V0UGFub3JhbWEiLCJwYW5vSWQiLCJzdnAiLCJTdHJlZXRWaWV3UGFub3JhbWEiLCJnZXREaXYiLCJlbmFibGVDbG9zZUJ1dHRvbiIsInNldFBhbm8iLCJBdHRyMk9wdGlvbnMiLCJnZXRMYXllciIsImxheWVyIiwiQmljeWNsaW5nTGF5ZXIiLCJtYXBDb250cm9sbGVyIiwiYWRkT2JqZWN0IiwiQ2xvdWRMYXllciIsImNvbXBpbGVkIiwiY3VzdG9tQ29udHJvbEVsIiwiYWRkRG9tTGlzdGVuZXIiLCJnZXREeW5hbWljTWFwc0VuZ2luZUxheWVyIiwidmlzdWFsaXphdGlvbiIsIkR5bmFtaWNNYXBzRW5naW5lTGF5ZXIiLCJGdXNpb25UYWJsZXNMYXllciIsIk1WQ0FycmF5IiwiSGVhdG1hcExheWVyIiwiZ2V0SW5mb1dpbmRvdyIsImluZm9XaW5kb3ciLCJJbmZvV2luZG93IiwiX190ZW1wbGF0ZSIsIl9fY29tcGlsZSIsInNldENvbnRlbnQiLCJfX2V2YWwiLCJfdGhpcyIsInZpc2libGVPbk1hcmtlciIsIm1hcmtlcklkIiwibWFya2VyIiwibWFya2VycyIsInNob3dJbmZvV2luZG93IiwiaW5mb1dpbmRvd3MiLCJnZXRQb3NpdGlvbiIsImhpZGVJbmZvV2luZG93IiwiZ2V0S21sTGF5ZXIiLCJrbWxMYXllciIsIkttbExheWVyIiwibWFwVHlwZU9iamVjdCIsIm1hcFR5cGVOYW1lIiwiX19zY29wZSIsIm1hcFR5cGVzIiwiZ2V0U3R5bGUiLCJzdHlsZVByb3AiLCJkZWZhdWx0VmlldyIsImdldFByb3BlcnR5VmFsdWUiLCJNYXBDb250cm9sbGVyIiwiaW5pdGlhbGl6ZU1hcCIsIm1hcE9wdGlvbnMiLCJtYXBFdmVudHMiLCJNYXAiLCJzaGFwZXMiLCJ6b29tIiwiZ2VvRmFsbGJhY2tDZW50ZXIiLCJzZXRPcHRpb25zIiwiYWRkT2JqZWN0cyIsIl9vYmplY3RzIiwiaW5pdEV2ZW50IiwiYWRkTWFya2VyIiwic2V0TWFwIiwiYWRkU2hhcGUiLCJncm91cE5hbWUiLCJvYmplY3RzIiwiTWFya2VyIiwiQ2lyY2xlIiwiUG9seWdvbiIsIlBvbHlsaW5lIiwiUmVjdGFuZ2xlIiwiR3JvdW5kT3ZlcmxheSIsImdldE1hcHNFbmdpbmVMYXllciIsIk1hcHNFbmdpbmVMYXllciIsImdldE1hcmtlciIsIlN5bWJvbFBhdGgiLCJhcnIiLCJQb2ludCIsIlNpemUiLCJvcmdQb3NpdGlvbiIsIm1hcmtlck9wdGlvbnMiLCJtYXJrZXJFdmVudHMiLCJvdmVybGF5TWFwVHlwZU9iamVjdCIsImluaXRNZXRob2QiLCJvdmVybGF5TWFwVHlwZXMiLCJpbnNlcnRBdCIsImdldEJvdW5kcyIsInBvaW50cyIsIkxhdExuZ0JvdW5kcyIsInNoYXBlTmFtZSIsImljb25zIiwib3JnQ2VudGVyIiwiYm91bmRzIiwiY2xpY2thYmxlIiwic2hhcGVPcHRpb25zIiwic2hhcGVFdmVudHMiLCJUcmFmZmljTGF5ZXIiLCJUcmFuc2l0TGF5ZXIiLCJXZWF0aGVyTGF5ZXIiLCJkZXRhaWxzIiwid2F0Y2hFbnRlciIsImluaXRPcHRzIiwiZ1BsYWNlIiwic2V0VHlwZXMiLCJzZXRCb3VuZHMiLCJjb3VudHJ5IiwiY29tcG9uZW50UmVzdHJpY3Rpb25zIiwic2V0Q29tcG9uZW50UmVzdHJpY3Rpb25zIiwicGxhY2VzIiwiQXV0b2NvbXBsZXRlIiwiZ2V0UGxhY2UiLCJhZGRyZXNzX2NvbXBvbmVudHMiLCJhdXRvY29tcGxldGVTZXJ2aWNlIiwiQXV0b2NvbXBsZXRlU2VydmljZSIsImdldFBsYWNlUHJlZGljdGlvbnMiLCJwbGFjZXNTZXJ2aWNlIiwiUGxhY2VzU2VydmljZSIsImdldERldGFpbHMiLCJyZWZlcmVuY2UiLCJkZXRhaWxzUmVzdWx0IiwicGxhY2VzU2VydmljZVN0YXR1cyIsImZvcm1hdHRlZF9hZGRyZXNzIiwid2F0Y2hPcHRpb25zIiwiJG1kU2lkZW5hdiIsIm9wZW5EYXRhVGltZVBpY2tlciIsImFuc3dlciIsInJlc2V0RXZlbnQiLCJsaW1pdFRvIiwid2hlcmUiLCJkZXNjcmlwdGlvbiIsImF0dGVuZGVlcyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsImxvYWRpbmdJblByb2dyZXNzIiwicmVqZWN0aW9uIl0sIm1hcHBpbmdzIjoiQUEwWEEsUUFBQUEsZ0JBQUFDLEVBQUFDLEVBQUFDLEdBTUEsUUFBQUMsR0FBQUMsR0FDQSxHQUFBQyxHQUFBQyxFQUFBRixFQUNBRyxTQUFBQyxZQUFBSCxLQUNBQSxFQUFBQyxFQUFBRixHQUFBSyxFQUFBTCxHQUdBLElBQUFNLEdBQUFDLEVBQUFOLEVBS0EsT0FKQUUsU0FBQUMsWUFBQUUsS0FDQUEsRUFBQUUsRUFBQVAsSUFHQUssRUFHQSxRQUFBRCxHQUFBTCxHQUNBLE1BQUFKLEdBQUFhLE1BQUFULEtBQ0EsTUFBQUEsRUFBQVUsT0FBQSxHQUFBLElBQUFWLEVBQUEsSUFBQUEsR0FHQSxRQUFBUSxHQUFBUixHQUNBLEdBQUFNLEdBQUFSLEVBQUFhLFdBQUFYLEVBRUEsT0FEQU0sR0FBQU0sWUFBQUMsR0FDQU4sRUFBQUQsRUFBQVEsU0FBQVIsRUFBQVMsUUFHQSxRQUFBRixLQUNBLEdBQUFiLEdBQUFnQixJQUNBbkIsR0FBQW9CLFdBQUEsV0FDQVYsRUFBQVAsRUFBQWMsU0FBQWQsRUFBQWUsVUFqQ0EsR0FBQWIsTUFDQUssSUFFQSxPQUFBUixJQ3pYQSxTQUFBbUIsRUFBQUMsRUFBQUMsR0FBQSxZQWdDQSxTQUFBQyxHQUFBQyxF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QUFBLDBCQUNBQywwQkFBQSwwQkFFQUUsUUFDQWxCLEdBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxxQkFBQSxRQUNBQyxtQkFBQSxrQkFDQUMsMEJBQUEsMEJBRUFHLGVBQ0FuQixHQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMscUJBQUEsUUFDQUMsbUJBQUEsa0JBQ0FDLDBCQUFBLGdCQUVBSSxRQUNBcEIsR0FBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLHFCQUFBLFFBQ0FDLG1CQUFBLGtCQUNBQywwQkFBQSxxQkFFQUssTUFDQXJCLEdBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxxQkFBQSxRQUNBQyxtQkFBQSx1QkFDQUMsMEJBQUEsOEJBRUFNLGNBQ0F0QixHQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMscUJBQUEsT0FDQVMsb0JBQUEsMkJBQ0FQLDBCQUFBLHdCQUVBUSxNQUNBeEIsR0FBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLHFCQUFBLE9BQ0FTLG9CQUFBLHNCQUNBUCwwQkFBQSxtQkFFQVMsTUFDQXpCLEdBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxxQkFBQSxPQUNBUyxvQkFBQSxzQkFDQVAsMEJBQUEsZUFFQVUsT0FDQTFCLEdBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxxQkFBQSxPQUNBUyxvQkFBQSxzQkFDQVAsMEJBQUEsZUFFQVcsZUFDQTNCLEdBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxxQkFBQSxPQUNBUyxvQkFBQSxVQUNBUCwwQkFBQSxXQUVBWSxNQUNBNUIsR0FBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLHFCQUFBLE9BQ0FTLG9CQUFBLE1BQ0FQLDBCQUFBLE9BRUFhLFFBQ0E3QixHQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMscUJBQUEsUUFFQWdCLE9BQ0E5QixHQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMscUJBQUEsUUFFQWlCLFFBQ0EvQixHQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVBQ0FDLEtBQUEsVUFDQUMscUJBQUEsT0FDQVMsb0JBQUEsVUFDQVAsMEJBQUEsV0FFQWdCLGVBQ0FoQyxHQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLElBQUEsVUFDQUMsSUFBQSxVQUNBQyxJQUFBLFVBQ0FDLEtBQUEsVUFDQUMsS0FBQSxVQUNBQyxLQUFBLFVB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LFFBQUEscUJBQUEsZUFNQUEsUUFBQSxpQkFBQSxTQUFBNjdHLEdBSUFBLEVBQUE3a0YsS0FBQSxVQUNBdEwsWUFBQSx3QkFFQW13RixFQUFBN2tGLEtBQUEsZUFDQXRMLFlBQUEsNkJBRUFtd0YsRUFBQTdrRixLQUFBLGFBQ0F0TCxZQUFBLDhCQThEQTFyQixRQUFBLFdBQUEsZ0JBQUEsU0FBQWEsRUFBQWk3RyxHQUdBajdHLEVBQUFpRSxRQUFBLHNCQUFBLEtBQUEsYUFBQSxTQUFBMkosRUFBQWphLEdBQ0EsT0FFQTJpQyxRQUFBLFNBQUFuM0IsR0FJQSxNQUZBeEwsR0FBQXVuSCxtQkFBQSxFQUVBLzdHLEdBQUF5TyxFQUFBdW9CLEtBQUFoM0IsSUFJQW8zQixhQUFBLFNBQUE0a0YsR0FJQSxNQUZBeG5ILEdBQUF1bkgsbUJBQUEsRUFFQXR0RyxFQUFBb25CLE9BQUFtbUYsSUFJQXJtRixTQUFBLFNBQUFBLEdBSUEsTUFGQW5oQyxHQUFBdW5ILG1CQUFBLEVBRUFwbUYsR0FBQWxuQixFQUFBdW9CLEtBQUFyQixJQUlBMEIsY0FBQSxTQUFBMmtGLEdBSUEsTUFGQXhuSCxHQUFBdW5ILG1CQUFBLEVBRUF0dEcsRUFBQW9uQixPQUFBbW1GLFFBTUFGLEVBQUFybUYsYUFBQXY1QixLQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG5hbmd1bGFyLm1vZHVsZSgnbmdNYXRlcmlhbCcsIFtcIm5nXCIsXCJuZ0FuaW1hdGVcIixcIm5nQXJpYVwiLFwibWF0ZXJpYWwuY29yZVwiLFwibWF0ZXJpYWwuY29yZS50aGVtaW5nLnBhbGV0dGVcIixcIm1hdGVyaWFsLmNvcmUudGhlbWluZ1wiLFwibWF0ZXJpYWwuY29tcG9uZW50cy5iYWNrZHJvcFwiLFwibWF0ZXJpYWwuY29tcG9uZW50cy5ib3R0b21TaGVldFwiLFwibWF0ZXJpYWwuY29tcG9uZW50cy5idXR0b25cIixcIm1hdGVyaWFsLmNvbXBvbmVudHMuY2FyZFwiLFwibWF0ZXJpYWwuY29tcG9uZW50cy5jaGVja2JveFwiLFwibWF0ZXJpYWwuY29tcG9uZW50cy5jb250ZW50XCIsXCJtYXRlcmlhbC5jb21wb25lbnRzLmRpYWxvZ1wiLFwibWF0ZXJpYWwuY29tcG9uZW50cy5kaXZpZGVyXCIsXCJtYXRlcmlhbC5jb21wb25lbnRzLmljb25cIixcIm1hdGVyaWFsLmNvbXBvbmVudHMuaW5wdXRcIixcIm1hdGVyaWFsLmNvbXBvbmVudHMubGlzdFwiLFwibWF0ZXJpYWwuY29tcG9uZW50cy5wcm9ncmVzc0NpcmN1bGFyXCIsXCJtYXRlcmlhbC5jb21wb25lbnRzLnByb2dyZXNzTGluZWFyXCIsXCJtYXRlcmlhbC5jb21wb25lbnRzLnJhZGlvQnV0dG9uXCIsXCJtYXRlcmlhbC5jb21wb25lbnRzLnNpZGVuYXZcIixcIm1hdGVyaWFsLmNvbXBvbmVudHMuc2xpZGVyXCIsXCJtYXRlcmlhbC5jb21wb25lbnRzLnN0aWNreVwiLFwibWF0ZXJpYWwuY29tcG9uZW50cy5zdWJoZWFkZXJcIixcIm1hdGVyaWFsLmNvbXBvbmVudHMuc3dpcGVcIixcIm1hdGVyaWFsLmNvbXBvbmVudHMuc3dpdGNoXCIsXCJtYXRlcmlhbC5jb21wb25lbnRzLnRhYnNcIixcIm1hdGVyaWFsLmNvbXBvbmVudHMudGV4dEZpZWxkXCIsXCJtYXRlcmlhbC5jb21wb25lbnRzLnRvYXN0XCIsXCJtYXRlcmlhbC5jb21wb25lbnRzLnRvb2xiYXJcIixcIm1hdGVyaWFsLmNvbXBvbmVudHMudG9vbHRpcFwiLFwibWF0ZXJpYWwuY29tcG9uZW50cy53aGl0ZWZyYW1lXCJdKTtcbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogSW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gdGhhdCB2YWxpZGF0ZXMgZW52aXJvbm1lbnRcbiAqIHJlcXVpcmVtZW50cy5cbiAqL1xuYW5ndWxhclxuICAubW9kdWxlKCdtYXRlcmlhbC5jb3JlJywgWydtYXRlcmlhbC5jb3JlLnRoZW1pbmcnXSlcbiAgLmNvbmZpZyhNZENvcmVDb25maWd1cmUpO1xuXG5cbmZ1bmN0aW9uIE1kQ29yZUNvbmZpZ3VyZSgkcHJvdmlkZSwgJG1kVGhlbWluZ1Byb3ZpZGVyKSB7XG4gICRwcm92aWRlLmRlY29yYXRvcignJCRyQUYnLCBbXCIkZGVsZWdhdGVcIiwgckFGRGVjb3JhdG9yXSk7XG5cbiAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcbiAgICAucHJpbWFyeVBhbGV0dGUoJ2luZGlnbycpXG4gICAgLmFjY2VudFBhbGV0dGUoJ3BpbmsnKVxuICAgIC53YXJuUGFsZXR0ZSgncmVkJylcbiAgICAuYmFja2dyb3VuZFBhbGV0dGUoJ2dyZXknKTtcbn1cbk1kQ29yZUNvbmZpZ3VyZS4kaW5qZWN0ID0gW1wiJHByb3ZpZGVcIiwgXCIkbWRUaGVtaW5nUHJvdmlkZXJcIl07XG5cbmZ1bmN0aW9uIHJBRkRlY29yYXRvciggJGRlbGVnYXRlICkge1xuICAvKipcbiAgICogVXNlIHRoaXMgdG8gdGhyb3R0bGUgZXZlbnRzIHRoYXQgY29tZSBpbiBvZnRlbi5cbiAgICogVGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIGFsd2F5cyB1c2UgdGhlICpsYXN0KiBpbnZvY2F0aW9uIGJlZm9yZSB0aGVcbiAgICogY29taW5nIGZyYW1lLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgd2luZG93IHJlc2l6ZSBldmVudHMgdGhhdCBmaXJlIG1hbnkgdGltZXMgYSBzZWNvbmQ6XG4gICAqIElmIHdlIHNldCB0byB1c2UgYW4gcmFmLXRocm90dGxlZCBjYWxsYmFjayBvbiB3aW5kb3cgcmVzaXplLCB0aGVuXG4gICAqIG91ciBjYWxsYmFjayB3aWxsIG9ubHkgYmUgZmlyZWQgb25jZSBwZXIgZnJhbWUsIHdpdGggdGhlIGxhc3QgcmVzaXplXG4gICAqIGV2ZW50IHRoYXQgaGFwcGVuZWQgYmVmb3JlIHRoYXQgZnJhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGRlYm91bmNlXG4gICAqL1xuICAkZGVsZWdhdGUudGhyb3R0bGUgPSBmdW5jdGlvbihjYikge1xuICAgIHZhciBxdWV1ZUFyZ3MsIGFscmVhZHlRdWV1ZWQsIHF1ZXVlQ2IsIGNvbnRleHQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICAgIHF1ZXVlQXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgcXVldWVDYiA9IGNiO1xuICAgICAgaWYgKCFhbHJlYWR5UXVldWVkKSB7XG4gICAgICAgIGFscmVhZHlRdWV1ZWQgPSB0cnVlO1xuICAgICAgICAkZGVsZWdhdGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcXVldWVDYi5hcHBseShjb250ZXh0LCBxdWV1ZUFyZ3MpO1xuICAgICAgICAgIGFscmVhZHlRdWV1ZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuICRkZWxlZ2F0ZTtcbn1cblxufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvcmUnKVxuLmZhY3RvcnkoJyRtZENvbnN0YW50JywgTWRDb25zdGFudEZhY3RvcnkpO1xuXG5mdW5jdGlvbiBNZENvbnN0YW50RmFjdG9yeSgkJHJBRiwgJHNuaWZmZXIpIHtcblxuICB2YXIgd2Via2l0ID0gL3dlYmtpdC9pLnRlc3QoJHNuaWZmZXIudmVuZG9yUHJlZml4KTtcbiAgZnVuY3Rpb24gdmVuZG9yUHJvcGVydHkobmFtZSkge1xuICAgIHJldHVybiB3ZWJraXQgPyAgKCd3ZWJraXQnICsgbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc3Vic3RyaW5nKDEpKSA6IG5hbWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIEtFWV9DT0RFOiB7XG4gICAgICBFTlRFUjogMTMsXG4gICAgICBFU0NBUEU6IDI3LFxuICAgICAgU1BBQ0U6IDMyLFxuICAgICAgTEVGVF9BUlJPVyA6IDM3LFxuICAgICAgVVBfQVJST1cgOiAzOCxcbiAgICAgIFJJR0hUX0FSUk9XIDogMzksXG4gICAgICBET1dOX0FSUk9XIDogNDBcbiAgICB9LFxuICAgIENTUzoge1xuICAgICAgLyogQ29uc3RhbnRzICovXG4gICAgICBUUkFOU0lUSU9ORU5EOiAndHJhbnNpdGlvbmVuZCcgKyAod2Via2l0ID8gJyB3ZWJraXRUcmFuc2l0aW9uRW5kJyA6ICcnKSxcbiAgICAgIEFOSU1BVElPTkVORDogJ2FuaW1hdGlvbmVuZCcgKyAod2Via2l0ID8gJyB3ZWJraXRBbmltYXRpb25FbmQnIDogJycpLFxuXG4gICAgICBUUkFOU0ZPUk06IHZlbmRvclByb3BlcnR5KCd0cmFuc2Zvcm0nKSxcbiAgICAgIFRSQU5TSVRJT046IHZlbmRvclByb3BlcnR5KCd0cmFuc2l0aW9uJyksXG4gICAgICBUUkFOU0lUSU9OX0RVUkFUSU9OOiB2ZW5kb3JQcm9wZXJ0eSgndHJhbnNpdGlvbkR1cmF0aW9uJyksXG4gICAgICBBTklNQVRJT05fUExBWV9TVEFURTogdmVuZG9yUHJvcGVydHkoJ2FuaW1hdGlvblBsYXlTdGF0ZScpLFxuICAgICAgQU5JTUFUSU9OX0RVUkFUSU9OOiB2ZW5kb3JQcm9wZXJ0eSgnYW5pbWF0aW9uRHVyYXRpb24nKSxcbiAgICAgIEFOSU1BVElPTl9OQU1FOiB2ZW5kb3JQcm9wZXJ0eSgnYW5pbWF0aW9uTmFtZScpLFxuICAgICAgQU5JTUFUSU9OX1RJTUlORzogdmVuZG9yUHJvcGVydHkoJ2FuaW1hdGlvblRpbWluZ0Z1bmN0aW9uJyksXG4gICAgICBBTklNQVRJT05fRElSRUNUSU9OOiB2ZW5kb3JQcm9wZXJ0eSgnYW5pbWF0aW9uRGlyZWN0aW9uJylcbiAgICB9LFxuICAgIE1FRElBOiB7XG4gICAgICAnc20nOiAnKG1heC13aWR0aDogNjAwcHgpJyxcbiAgICAgICdndC1zbSc6ICcobWluLXdpZHRoOiA2MDBweCknLFxuICAgICAgJ21kJzogJyhtaW4td2lkdGg6IDYwMHB4KSBhbmQgKG1heC13aWR0aDogOTYwcHgpJyxcbiAgICAgICdndC1tZCc6ICcobWluLXdpZHRoOiA5NjBweCknLFxuICAgICAgJ2xnJzogJyhtaW4td2lkdGg6IDk2MHB4KSBhbmQgKG1heC13aWR0aDogMTIwMHB4KScsXG4gICAgICAnZ3QtbGcnOiAnKG1pbi13aWR0aDogMTIwMHB4KSdcbiAgICB9XG4gIH07XG59XG5NZENvbnN0YW50RmFjdG9yeS4kaW5qZWN0ID0gW1wiJCRyQUZcIiwgXCIkc25pZmZlclwiXTtcblxufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpe1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXRlcmlhbC5jb3JlJylcbiAgICAuY29uZmlnKCBbXCIkcHJvdmlkZVwiLCBmdW5jdGlvbigkcHJvdmlkZSl7XG4gICAgICAgJHByb3ZpZGUuZGVjb3JhdG9yKCckbWRVdGlsJywgWyckZGVsZWdhdGUnLCBmdW5jdGlvbiAoJGRlbGVnYXRlKXtcbiAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAqIEluamVjdCB0aGUgaXRlcmF0b3IgZmFjYWRlIHRvIGVhc2lseSBzdXBwb3J0IGl0ZXJhdGlvbiBhbmQgYWNjZXNzb3JzXG4gICAgICAgICAgICAqIEBzZWUgaXRlcmF0b3IgYmVsb3dcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICRkZWxlZ2F0ZS5pdGVyYXRvciA9IEl0ZXJhdG9yO1xuXG4gICAgICAgICAgIHJldHVybiAkZGVsZWdhdGU7XG4gICAgICAgICB9XG4gICAgICAgXSk7XG4gICAgIH1dKTtcblxuICAvKipcbiAgICogaXRlcmF0b3IgaXMgYSBsaXN0IGZhY2FkZSB0byBlYXNpbHkgc3VwcG9ydCBpdGVyYXRpb24gYW5kIGFjY2Vzc29yc1xuICAgKlxuICAgKiBAcGFyYW0gaXRlbXMgQXJyYXkgbGlzdCB3aGljaCB0aGlzIGl0ZXJhdG9yIHdpbGwgZW51bWVyYXRlXG4gICAqIEBwYXJhbSByZWxvb3AgQm9vbGVhbiBlbmFibGVzIGl0ZXJhdG9yIHRvIGNvbnNpZGVyIHRoZSBsaXN0IGFzIGFuIGVuZGxlc3MgcmVsb29wXG4gICAqL1xuICBmdW5jdGlvbiBJdGVyYXRvcihpdGVtcywgcmVsb29wKSB7XG4gICAgdmFyIHRydWVGbiA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfTtcblxuICAgIHJlbG9vcCA9ICEhcmVsb29wO1xuICAgIHZhciBfaXRlbXMgPSBpdGVtcyB8fCBbIF07XG5cbiAgICAvLyBQdWJsaXNoZWQgQVBJXG4gICAgcmV0dXJuIHtcbiAgICAgIGl0ZW1zOiBnZXRJdGVtcyxcbiAgICAgIGNvdW50OiBjb3VudCxcblxuICAgICAgaW5SYW5nZTogaW5SYW5nZSxcbiAgICAgIGNvbnRhaW5zOiBjb250YWlucyxcbiAgICAgIGluZGV4T2Y6IGluZGV4T2YsXG4gICAgICBpdGVtQXQ6IGl0ZW1BdCxcblxuICAgICAgZmluZEJ5OiBmaW5kQnksXG5cbiAgICAgIGFkZDogYWRkLFxuICAgICAgcmVtb3ZlOiByZW1vdmUsXG5cbiAgICAgIGZpcnN0OiBmaXJzdCxcbiAgICAgIGxhc3Q6IGxhc3QsXG4gICAgICBuZXh0OiBhbmd1bGFyLmJpbmQobnVsbCwgZmluZFN1YnNlcXVlbnRJdGVtLCBmYWxzZSksXG4gICAgICBwcmV2aW91czogYW5ndWxhci5iaW5kKG51bGwsIGZpbmRTdWJzZXF1ZW50SXRlbSwgdHJ1ZSksXG5cbiAgICAgIGhhc1ByZXZpb3VzOiBoYXNQcmV2aW91cyxcbiAgICAgIGhhc05leHQ6IGhhc05leHRcblxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQdWJsaXNoIGNvcHkgb2YgdGhlIGVudW1lcmFibGUgc2V0XG4gICAgICogQHJldHVybnMge0FycmF5fCp9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0SXRlbXMoKSB7XG4gICAgICByZXR1cm4gW10uY29uY2F0KF9pdGVtcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGxlbmd0aCBvZiB0aGUgbGlzdFxuICAgICAqIEByZXR1cm5zIHtBcnJheS5sZW5ndGh8KnxudW1iZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gY291bnQoKSB7XG4gICAgICByZXR1cm4gX2l0ZW1zLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJcyB0aGUgaW5kZXggc3BlY2lmaWVkIHZhbGlkXG4gICAgICogQHBhcmFtIGluZGV4XG4gICAgICogQHJldHVybnMge0FycmF5Lmxlbmd0aHwqfG51bWJlcnxib29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluUmFuZ2UoaW5kZXgpIHtcbiAgICAgIHJldHVybiBfaXRlbXMubGVuZ3RoICYmICggaW5kZXggPiAtMSApICYmIChpbmRleCA8IF9pdGVtcy5sZW5ndGggKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYW4gdGhlIGl0ZXJhdG9yIHByb2NlZWQgdG8gdGhlIG5leHQgaXRlbSBpbiB0aGUgbGlzdDsgcmVsYXRpdmUgdG9cbiAgICAgKiB0aGUgc3BlY2lmaWVkIGl0ZW0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaXRlbVxuICAgICAqIEByZXR1cm5zIHtBcnJheS5sZW5ndGh8KnxudW1iZXJ8Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYXNOZXh0KGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtID8gaW5SYW5nZShpbmRleE9mKGl0ZW0pICsgMSkgOiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYW4gdGhlIGl0ZXJhdG9yIHByb2NlZWQgdG8gdGhlIHByZXZpb3VzIGl0ZW0gaW4gdGhlIGxpc3Q7IHJlbGF0aXZlIHRvXG4gICAgICogdGhlIHNwZWNpZmllZCBpdGVtLlxuICAgICAqXG4gICAgICogQHBhcmFtIGl0ZW1cbiAgICAgKiBAcmV0dXJucyB7QXJyYXkubGVuZ3RofCp8bnVtYmVyfGJvb2xlYW59XG4gICAgICovXG4gICAgZnVuY3Rpb24gaGFzUHJldmlvdXMoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0gPyBpblJhbmdlKGluZGV4T2YoaXRlbSkgLSAxKSA6IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBpdGVtIGF0IHNwZWNpZmllZCBpbmRleC9wb3NpdGlvblxuICAgICAqIEBwYXJhbSBpbmRleFxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGl0ZW1BdChpbmRleCkge1xuICAgICAgcmV0dXJuIGluUmFuZ2UoaW5kZXgpID8gX2l0ZW1zW2luZGV4XSA6IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCBhbGwgZWxlbWVudHMgbWF0Y2hpbmcgdGhlIGtleS92YWx1ZSBwYWlyXG4gICAgICogb3RoZXJ3aXNlIHJldHVybiBudWxsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqXG4gICAgICogQHJldHVybiBhcnJheVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRCeShrZXksIHZhbCkge1xuICAgICAgcmV0dXJuIF9pdGVtcy5maWx0ZXIoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbVtrZXldID09PSB2YWw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgaXRlbSB0byBsaXN0XG4gICAgICogQHBhcmFtIGl0ZW1cbiAgICAgKiBAcGFyYW0gaW5kZXhcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGQoaXRlbSwgaW5kZXgpIHtcbiAgICAgIGlmICggIWl0ZW0gKSByZXR1cm4gLTE7XG5cbiAgICAgIGlmICghYW5ndWxhci5pc051bWJlcihpbmRleCkpIHtcbiAgICAgICAgaW5kZXggPSBfaXRlbXMubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBfaXRlbXMuc3BsaWNlKGluZGV4LCAwLCBpdGVtKTtcblxuICAgICAgcmV0dXJuIGluZGV4T2YoaXRlbSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGl0ZW0gZnJvbSBsaXN0Li4uXG4gICAgICogQHBhcmFtIGl0ZW1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmUoaXRlbSkge1xuICAgICAgaWYgKCBjb250YWlucyhpdGVtKSApe1xuICAgICAgICBfaXRlbXMuc3BsaWNlKGluZGV4T2YoaXRlbSksIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgemVyby1iYXNlZCBpbmRleCBvZiB0aGUgdGFyZ2V0IGl0ZW1cbiAgICAgKiBAcGFyYW0gaXRlbVxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluZGV4T2YoaXRlbSkge1xuICAgICAgcmV0dXJuIF9pdGVtcy5pbmRleE9mKGl0ZW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJvb2xlYW4gZXhpc3RlbmNlIGNoZWNrXG4gICAgICogQHBhcmFtIGl0ZW1cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb250YWlucyhpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbSAmJiAoaW5kZXhPZihpdGVtKSA+IC0xKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gZmlyc3QgaXRlbSBpbiB0aGUgbGlzdFxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpcnN0KCkge1xuICAgICAgcmV0dXJuIF9pdGVtcy5sZW5ndGggPyBfaXRlbXNbMF0gOiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBsYXN0IGl0ZW0gaW4gdGhlIGxpc3QuLi5cbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsYXN0KCkge1xuICAgICAgcmV0dXJuIF9pdGVtcy5sZW5ndGggPyBfaXRlbXNbX2l0ZW1zLmxlbmd0aCAtIDFdIDogbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBuZXh0IGl0ZW0uIElmIHJlbG9vcCBpcyB0cnVlIGFuZCBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0LCBpdCB3aWxsXG4gICAgICogZ28gYmFjayB0byB0aGUgZmlyc3QgaXRlbS4gSWYgZ2l2ZW4gLHRoZSBgdmFsaWRhdGVgIGNhbGxiYWNrIHdpbGwgYmUgdXNlZFxuICAgICAqIGRldGVybWluZSB3aGV0aGVyIHRoZSBuZXh0IGl0ZW0gaXMgdmFsaWQuIElmIG5vdCB2YWxpZCwgaXQgd2lsbCB0cnkgdG8gZmluZCB0aGVcbiAgICAgKiBuZXh0IGl0ZW0gYWdhaW4uXG4gICAgICogQHBhcmFtIGl0ZW1cbiAgICAgKiBAcGFyYW0ge29wdGlvbmFsfSB2YWxpZGF0ZSBWYWxpZGF0ZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7b3B0aW9uYWx9IGxpbWl0IFJlY3Vyc2lvbiBsaW1pdFxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRTdWJzZXF1ZW50SXRlbShiYWNrd2FyZHMsIGl0ZW0sIHZhbGlkYXRlLCBsaW1pdCkge1xuICAgICAgdmFsaWRhdGUgPSB2YWxpZGF0ZSB8fCB0cnVlRm47XG5cbiAgICAgIHZhciBjdXJJbmRleCA9IGluZGV4T2YoaXRlbSk7XG4gICAgICBpZiAoIWluUmFuZ2UoY3VySW5kZXgpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmV4dEluZGV4ID0gY3VySW5kZXggKyAoYmFja3dhcmRzID8gLTEgOiAxKTtcbiAgICAgIHZhciBmb3VuZEl0ZW0gPSBudWxsO1xuICAgICAgaWYgKGluUmFuZ2UobmV4dEluZGV4KSkge1xuICAgICAgICBmb3VuZEl0ZW0gPSBfaXRlbXNbbmV4dEluZGV4XTtcbiAgICAgIH0gZWxzZSBpZiAocmVsb29wKSB7XG4gICAgICAgIGZvdW5kSXRlbSA9IGJhY2t3YXJkcyA/IGxhc3QoKSA6IGZpcnN0KCk7XG4gICAgICAgIG5leHRJbmRleCA9IGluZGV4T2YoZm91bmRJdGVtKTtcbiAgICAgIH1cblxuICAgICAgaWYgKChmb3VuZEl0ZW0gPT09IG51bGwpIHx8IChuZXh0SW5kZXggPT09IGxpbWl0KSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQobGltaXQpKSB7XG4gICAgICAgIGxpbWl0ID0gbmV4dEluZGV4O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsaWRhdGUoZm91bmRJdGVtKSA/IGZvdW5kSXRlbSA6IGZpbmRTdWJzZXF1ZW50SXRlbShiYWNrd2FyZHMsIGZvdW5kSXRlbSwgdmFsaWRhdGUsIGxpbWl0KTtcbiAgICB9XG4gIH1cblxufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb3JlJylcbi5mYWN0b3J5KCckbWRNZWRpYScsIG1kTWVkaWFGYWN0b3J5KTtcblxuLyoqXG4gKiBFeHBvc2VzIGEgZnVuY3Rpb24gb24gdGhlICckbWRNZWRpYScgc2VydmljZSB3aGljaCB3aWxsIHJldHVybiB0cnVlIG9yIGZhbHNlLFxuICogd2hldGhlciB0aGUgZ2l2ZW4gbWVkaWEgcXVlcnkgbWF0Y2hlcy4gUmUtZXZhbHVhdGVzIG9uIHJlc2l6ZS4gQWxsb3dzIHByZXNldHNcbiAqIGZvciAnc20nLCAnbWQnLCAnbGcnLlxuICpcbiAqIEBleGFtcGxlICRtZE1lZGlhKCdzbScpID09IHRydWUgaWYgZGV2aWNlLXdpZHRoIDw9IHNtXG4gKiBAZXhhbXBsZSAkbWRNZWRpYSgnKG1pbi13aWR0aDogMTIwMHB4KScpID09IHRydWUgaWYgZGV2aWNlLXdpZHRoID49IDEyMDBweFxuICogQGV4YW1wbGUgJG1kTWVkaWEoJ21heC13aWR0aDogMzAwcHgnKSA9PSB0cnVlIGlmIGRldmljZS13aWR0aCA8PSAzMDBweCAoc2FuaXRpemVzIGlucHV0LCBhZGRpbmcgcGFyZW5zKVxuICovXG5mdW5jdGlvbiBtZE1lZGlhRmFjdG9yeSgkbWRDb25zdGFudCwgJHJvb3RTY29wZSwgJHdpbmRvdykge1xuICB2YXIgcXVlcmllcyA9IHt9O1xuICB2YXIgcmVzdWx0cyA9IHt9O1xuXG4gIHJldHVybiAkbWRNZWRpYTtcblxuICBmdW5jdGlvbiAkbWRNZWRpYShxdWVyeSkge1xuICAgIHZhciB2YWxpZGF0ZWQgPSBxdWVyaWVzW3F1ZXJ5XTtcbiAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWxpZGF0ZWQpKSB7XG4gICAgICB2YWxpZGF0ZWQgPSBxdWVyaWVzW3F1ZXJ5XSA9IHZhbGlkYXRlKHF1ZXJ5KTtcbiAgICB9XG5cbiAgICB2YXIgcmVzdWx0ID0gcmVzdWx0c1t2YWxpZGF0ZWRdO1xuICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHJlc3VsdCkpIHtcbiAgICAgIHJlc3VsdCA9IGFkZCh2YWxpZGF0ZWQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiB2YWxpZGF0ZShxdWVyeSkge1xuICAgIHJldHVybiAkbWRDb25zdGFudC5NRURJQVtxdWVyeV0gfHxcbiAgICAgICAgICAgKChxdWVyeS5jaGFyQXQoMCkgIT09ICcoJykgPyAoJygnICsgcXVlcnkgKyAnKScpIDogcXVlcnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkKHF1ZXJ5KSB7XG4gICAgdmFyIHJlc3VsdCA9ICR3aW5kb3cubWF0Y2hNZWRpYShxdWVyeSk7XG4gICAgcmVzdWx0LmFkZExpc3RlbmVyKG9uUXVlcnlDaGFuZ2UpO1xuICAgIHJldHVybiAocmVzdWx0c1tyZXN1bHQubWVkaWFdID0gISFyZXN1bHQubWF0Y2hlcyk7XG4gIH1cblxuICBmdW5jdGlvbiBvblF1ZXJ5Q2hhbmdlKCkge1xuICAgIHZhciBxdWVyeSA9IHRoaXM7XG4gICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgcmVzdWx0c1txdWVyeS5tZWRpYV0gPSAhIXF1ZXJ5Lm1hdGNoZXM7XG4gICAgfSk7XG4gIH1cblxufVxubWRNZWRpYUZhY3RvcnkuJGluamVjdCA9IFtcIiRtZENvbnN0YW50XCIsIFwiJHJvb3RTY29wZVwiLCBcIiR3aW5kb3dcIl07XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbi8qXG4gKiBUaGlzIHZhciBoYXMgdG8gYmUgb3V0c2lkZSB0aGUgYW5ndWxhciBmYWN0b3J5LCBvdGhlcndpc2Ugd2hlblxuICogdGhlcmUgYXJlIG11bHRpcGxlIG1hdGVyaWFsIGFwcHMgb24gdGhlIHNhbWUgcGFnZSwgZWFjaCBhcHBcbiAqIHdpbGwgY3JlYXRlIGl0cyBvd24gaW5zdGFuY2Ugb2YgdGhpcyBhcnJheSBhbmQgdGhlIGFwcCdzIElEc1xuICogd2lsbCBub3QgYmUgdW5pcXVlLlxuICovXG52YXIgbmV4dFVuaXF1ZUlkID0gWycwJywnMCcsJzAnXTtcblxuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvcmUnKVxuLmZhY3RvcnkoJyRtZFV0aWwnLCBbXCIkZG9jdW1lbnRcIiwgXCIkdGltZW91dFwiLCBmdW5jdGlvbigkZG9jdW1lbnQsICR0aW1lb3V0KSB7XG4gIHZhciBVdGlsO1xuXG4gIHJldHVybiBVdGlsID0ge1xuICAgIG5vdzogd2luZG93LnBlcmZvcm1hbmNlID8gYW5ndWxhci5iaW5kKHdpbmRvdy5wZXJmb3JtYW5jZSwgd2luZG93LnBlcmZvcm1hbmNlLm5vdykgOiBEYXRlLm5vdyxcblxuICAgIGVsZW1lbnRSZWN0OiBmdW5jdGlvbihlbGVtZW50LCBvZmZzZXRQYXJlbnQpIHtcbiAgICAgIHZhciBub2RlID0gZWxlbWVudFswXTtcbiAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudCB8fCBub2RlLm9mZnNldFBhcmVudCB8fCBkb2N1bWVudC5ib2R5O1xuICAgICAgb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50WzBdIHx8IG9mZnNldFBhcmVudDtcbiAgICAgIHZhciBub2RlUmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB2YXIgcGFyZW50UmVjdCA9IG9mZnNldFBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxlZnQ6IG5vZGVSZWN0LmxlZnQgLSBwYXJlbnRSZWN0LmxlZnQgKyBvZmZzZXRQYXJlbnQuc2Nyb2xsTGVmdCxcbiAgICAgICAgdG9wOiBub2RlUmVjdC50b3AgLSBwYXJlbnRSZWN0LnRvcCArIG9mZnNldFBhcmVudC5zY3JvbGxUb3AsXG4gICAgICAgIHdpZHRoOiBub2RlUmVjdC53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBub2RlUmVjdC5oZWlnaHRcbiAgICAgIH07XG4gICAgfSxcblxuICAgIGZha2VOZ01vZGVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgICRmYWtlOiB0cnVlLFxuICAgICAgICAkc2V0Vmlld1ZhbHVlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHRoaXMuJHZpZXdWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMuJHJlbmRlcih2YWx1ZSk7XG4gICAgICAgICAgdGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGNiKSB7IGNiKCk7IH0pO1xuICAgICAgICB9LFxuICAgICAgICAkaXNFbXB0eTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gKCcnK3ZhbHVlKS5sZW5ndGggPT09IDA7XG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZXJzOiBbXSxcbiAgICAgICAgJGZvcm1hdHRlcnM6IFtdLFxuICAgICAgICAkdmlld0NoYW5nZUxpc3RlbmVyczogW10sXG4gICAgICAgICRyZW5kZXI6IGFuZ3VsYXIubm9vcFxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICAgIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgICAvLyBOIG1pbGxpc2Vjb25kcy5cbiAgICAvLyBAcGFyYW0gd2FpdCBJbnRlZ2VyIHZhbHVlIG9mIG1zZWNzIHRvIGRlbGF5IChzaW5jZSBsYXN0IGRlYm91bmNlIHJlc2V0KTsgZGVmYXVsdCB2YWx1ZSAxMCBtc2Vjc1xuICAgIC8vIEBwYXJhbSBpbnZva2VBcHBseSBzaG91bGQgdGhlICR0aW1lb3V0IHRyaWdnZXIgJGRpZ2VzdCgpIGRpcnR5IGNoZWNraW5nXG4gICAgZGVib3VuY2U6IGZ1bmN0aW9uIChmdW5jLCB3YWl0LCBzY29wZSwgaW52b2tlQXBwbHkpIHtcbiAgICAgIHZhciB0aW1lcjtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBzY29wZSxcbiAgICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblxuICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xuICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgdGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblxuICAgICAgICB9LCB3YWl0IHx8IDEwLCBpbnZva2VBcHBseSApO1xuICAgICAgfTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgY2FuIG9ubHkgYmUgdHJpZ2dlcmVkIGV2ZXJ5IGBkZWxheWAgbWlsbGlzZWNvbmRzLlxuICAgIC8vIEluIG90aGVyIHdvcmRzLCB0aGUgZnVuY3Rpb24gd2lsbCBub3QgYmUgY2FsbGVkIHVubGVzcyBpdCBoYXMgYmVlbiBtb3JlXG4gICAgLy8gdGhhbiBgZGVsYXlgIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGUgbGFzdCBjYWxsLlxuICAgIHRocm90dGxlOiBmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCBkZWxheSkge1xuICAgICAgdmFyIHJlY2VudDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiB0aHJvdHRsZWQoKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHZhciBub3cgPSBVdGlsLm5vdygpO1xuXG4gICAgICAgIGlmICghcmVjZW50IHx8IChub3cgLSByZWNlbnQgPiBkZWxheSkpIHtcbiAgICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIHJlY2VudCA9IG5vdztcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogbmV4dFVpZCwgZnJvbSBhbmd1bGFyLmpzLlxuICAgICAqIEEgY29uc2lzdGVudCB3YXkgb2YgY3JlYXRpbmcgdW5pcXVlIElEcyBpbiBhbmd1bGFyLiBUaGUgSUQgaXMgYSBzZXF1ZW5jZSBvZiBhbHBoYSBudW1lcmljXG4gICAgICogY2hhcmFjdGVycyBzdWNoIGFzICcwMTJBQkMnLiBUaGUgcmVhc29uIHdoeSB3ZSBhcmUgbm90IHVzaW5nIHNpbXBseSBhIG51bWJlciBjb3VudGVyIGlzIHRoYXRcbiAgICAgKiB0aGUgbnVtYmVyIHN0cmluZyBnZXRzIGxvbmdlciBvdmVyIHRpbWUsIGFuZCBpdCBjYW4gYWxzbyBvdmVyZmxvdywgd2hlcmUgYXMgdGhlIG5leHRJZFxuICAgICAqIHdpbGwgZ3JvdyBtdWNoIHNsb3dlciwgaXQgaXMgYSBzdHJpbmcsIGFuZCBpdCB3aWxsIG5ldmVyIG92ZXJmbG93LlxuICAgICAqXG4gICAgICogQHJldHVybnMgYW4gdW5pcXVlIGFscGhhLW51bWVyaWMgc3RyaW5nXG4gICAgICovXG4gICAgbmV4dFVpZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW5kZXggPSBuZXh0VW5pcXVlSWQubGVuZ3RoO1xuICAgICAgdmFyIGRpZ2l0O1xuXG4gICAgICB3aGlsZShpbmRleCkge1xuICAgICAgICBpbmRleC0tO1xuICAgICAgICBkaWdpdCA9IG5leHRVbmlxdWVJZFtpbmRleF0uY2hhckNvZGVBdCgwKTtcbiAgICAgICAgaWYgKGRpZ2l0ID09IDU3IC8qJzknKi8pIHtcbiAgICAgICAgICBuZXh0VW5pcXVlSWRbaW5kZXhdID0gJ0EnO1xuICAgICAgICAgIHJldHVybiBuZXh0VW5pcXVlSWQuam9pbignJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpZ2l0ID09IDkwICAvKidaJyovKSB7XG4gICAgICAgICAgbmV4dFVuaXF1ZUlkW2luZGV4XSA9ICcwJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0VW5pcXVlSWRbaW5kZXhdID0gU3RyaW5nLmZyb21DaGFyQ29kZShkaWdpdCArIDEpO1xuICAgICAgICAgIHJldHVybiBuZXh0VW5pcXVlSWQuam9pbignJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5leHRVbmlxdWVJZC51bnNoaWZ0KCcwJyk7XG4gICAgICByZXR1cm4gbmV4dFVuaXF1ZUlkLmpvaW4oJycpO1xuICAgIH0sXG5cbiAgICAvLyBTdG9wIHdhdGNoZXJzIGFuZCBldmVudHMgZnJvbSBmaXJpbmcgb24gYSBzY29wZSB3aXRob3V0IGRlc3Ryb3lpbmcgaXQsXG4gICAgLy8gYnkgZGlzY29ubmVjdGluZyBpdCBmcm9tIGl0cyBwYXJlbnQgYW5kIGl0cyBzaWJsaW5ncycgbGlua2VkIGxpc3RzLlxuICAgIGRpc2Nvbm5lY3RTY29wZTogZnVuY3Rpb24gZGlzY29ubmVjdFNjb3BlKHNjb3BlKSB7XG4gICAgICBpZiAoIXNjb3BlKSByZXR1cm47XG5cbiAgICAgIC8vIHdlIGNhbid0IGRlc3Ryb3kgdGhlIHJvb3Qgc2NvcGUgb3IgYSBzY29wZSB0aGF0IGhhcyBiZWVuIGFscmVhZHkgZGVzdHJveWVkXG4gICAgICBpZiAoc2NvcGUuJHJvb3QgPT09IHNjb3BlKSByZXR1cm47XG4gICAgICBpZiAoc2NvcGUuJCRkZXN0cm95ZWQgKSByZXR1cm47XG5cbiAgICAgIHZhciBwYXJlbnQgPSBzY29wZS4kcGFyZW50O1xuICAgICAgc2NvcGUuJCRkaXNjb25uZWN0ZWQgPSB0cnVlO1xuXG4gICAgICAvLyBTZWUgU2NvcGUuJGRlc3Ryb3lcbiAgICAgIGlmIChwYXJlbnQuJCRjaGlsZEhlYWQgPT09IHNjb3BlKSBwYXJlbnQuJCRjaGlsZEhlYWQgPSBzY29wZS4kJG5leHRTaWJsaW5nO1xuICAgICAgaWYgKHBhcmVudC4kJGNoaWxkVGFpbCA9PT0gc2NvcGUpIHBhcmVudC4kJGNoaWxkVGFpbCA9IHNjb3BlLiQkcHJldlNpYmxpbmc7XG4gICAgICBpZiAoc2NvcGUuJCRwcmV2U2libGluZykgc2NvcGUuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nID0gc2NvcGUuJCRuZXh0U2libGluZztcbiAgICAgIGlmIChzY29wZS4kJG5leHRTaWJsaW5nKSBzY29wZS4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmcgPSBzY29wZS4kJHByZXZTaWJsaW5nO1xuXG4gICAgICBzY29wZS4kJG5leHRTaWJsaW5nID0gc2NvcGUuJCRwcmV2U2libGluZyA9IG51bGw7XG5cbiAgICB9LFxuXG4gICAgLy8gVW5kbyB0aGUgZWZmZWN0cyBvZiBkaXNjb25uZWN0U2NvcGUgYWJvdmUuXG4gICAgcmVjb25uZWN0U2NvcGU6IGZ1bmN0aW9uIHJlY29ubmVjdFNjb3BlKHNjb3BlKSB7XG4gICAgICBpZiAoIXNjb3BlKSByZXR1cm47XG5cbiAgICAgIC8vIHdlIGNhbid0IGRpc2Nvbm5lY3QgdGhlIHJvb3Qgbm9kZSBvciBzY29wZSBhbHJlYWR5IGRpc2Nvbm5lY3RlZFxuICAgICAgaWYgKHNjb3BlLiRyb290ID09PSBzY29wZSkgcmV0dXJuO1xuICAgICAgaWYgKCFzY29wZS4kJGRpc2Nvbm5lY3RlZCkgcmV0dXJuO1xuXG4gICAgICB2YXIgY2hpbGQgPSBzY29wZTtcblxuICAgICAgdmFyIHBhcmVudCA9IGNoaWxkLiRwYXJlbnQ7XG4gICAgICBjaGlsZC4kJGRpc2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgLy8gU2VlIFNjb3BlLiRuZXcgZm9yIHRoaXMgbG9naWMuLi5cbiAgICAgIGNoaWxkLiQkcHJldlNpYmxpbmcgPSBwYXJlbnQuJCRjaGlsZFRhaWw7XG4gICAgICBpZiAocGFyZW50LiQkY2hpbGRIZWFkKSB7XG4gICAgICAgIHBhcmVudC4kJGNoaWxkVGFpbC4kJG5leHRTaWJsaW5nID0gY2hpbGQ7XG4gICAgICAgIHBhcmVudC4kJGNoaWxkVGFpbCA9IGNoaWxkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50LiQkY2hpbGRIZWFkID0gcGFyZW50LiQkY2hpbGRUYWlsID0gY2hpbGQ7XG4gICAgICB9XG4gICAgfSxcbiAgLypcbiAgICogZ2V0Q2xvc2VzdCByZXBsaWNhdGVzIGpRdWVyeS5jbG9zZXN0KCkgdG8gd2FsayB1cCB0aGUgRE9NIHRyZWUgdW50aWwgaXQgZmluZHMgYSBtYXRjaGluZyBub2RlTmFtZVxuICAgKlxuICAgKiBAcGFyYW0gZWwgRWxlbWVudCB0byBzdGFydCB3YWxraW5nIHRoZSBET00gZnJvbVxuICAgKiBAcGFyYW0gdGFnTmFtZSBUYWcgbmFtZSB0byBmaW5kIGNsb3Nlc3QgdG8gZWwsIHN1Y2ggYXMgJ2Zvcm0nXG4gICAqL1xuICAgIGdldENsb3Nlc3Q6IGZ1bmN0aW9uIGdldENsb3Nlc3QoZWwsIHRhZ05hbWUpIHtcbiAgICAgIHRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICBkbyB7XG4gICAgICAgIGlmIChlbC5ub2RlTmFtZSA9PT0gdGFnTmFtZSkge1xuICAgICAgICAgIHJldHVybiBlbDtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoZWwgPSBlbC5wYXJlbnROb2RlKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxufV0pO1xuXG4vKlxuICogU2luY2UgcmVtb3ZpbmcgalF1ZXJ5IGZyb20gdGhlIGRlbW9zLCBzb21lIGNvZGUgdGhhdCB1c2VzIGBlbGVtZW50LmZvY3VzKClgIGlzIGJyb2tlbi5cbiAqXG4gKiBXZSBuZWVkIHRvIGFkZCBgZWxlbWVudC5mb2N1cygpYCwgYmVjYXVzZSBpdCdzIHRlc3RhYmxlIHVubGlrZSBgZWxlbWVudFswXS5mb2N1c2AuXG4gKlxuICogVE9ETyhham9zbGluKTogVGhpcyBzaG91bGQgYmUgYWRkZWQgaW4gYSBiZXR0ZXIgcGxhY2UgbGF0ZXIuXG4gKi9cblxuYW5ndWxhci5lbGVtZW50LnByb3RvdHlwZS5mb2N1cyA9IGFuZ3VsYXIuZWxlbWVudC5wcm90b3R5cGUuZm9jdXMgfHwgZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmxlbmd0aCkge1xuICAgIHRoaXNbMF0uZm9jdXMoKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5hbmd1bGFyLmVsZW1lbnQucHJvdG90eXBlLmJsdXIgPSBhbmd1bGFyLmVsZW1lbnQucHJvdG90eXBlLmJsdXIgfHwgZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmxlbmd0aCkge1xuICAgIHRoaXNbMF0uYmx1cigpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvcmUnKVxuICAuc2VydmljZSgnJG1kQXJpYScsIEFyaWFTZXJ2aWNlKTtcblxuZnVuY3Rpb24gQXJpYVNlcnZpY2UoJCRyQUYsICRsb2csICR3aW5kb3cpIHtcblxuICByZXR1cm4ge1xuICAgIGV4cGVjdDogZXhwZWN0LFxuICAgIGV4cGVjdEFzeW5jOiBleHBlY3RBc3luYyxcbiAgICBleHBlY3RXaXRoVGV4dDogZXhwZWN0V2l0aFRleHRcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2sgaWYgZXhwZWN0ZWQgYXR0cmlidXRlIGhhcyBiZWVuIHNwZWNpZmllZCBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQgb3IgY2hpbGRcbiAgICogQHBhcmFtIGVsZW1lbnRcbiAgICogQHBhcmFtIGF0dHJOYW1lXG4gICAqIEBwYXJhbSB7b3B0aW9uYWx9IGRlZmF1bHRWYWx1ZSBXaGF0IHRvIHNldCB0aGUgYXR0ciB0byBpZiBubyB2YWx1ZSBpcyBmb3VuZFxuICAgKi9cbiAgZnVuY3Rpb24gZXhwZWN0KGVsZW1lbnQsIGF0dHJOYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgICB2YXIgbm9kZSA9IGVsZW1lbnRbMF07XG5cbiAgICBpZiAoIW5vZGUuaGFzQXR0cmlidXRlKGF0dHJOYW1lKSAmJiAhY2hpbGRIYXNBdHRyaWJ1dGUobm9kZSwgYXR0ck5hbWUpKSB7XG5cbiAgICAgIGRlZmF1bHRWYWx1ZSA9IGFuZ3VsYXIuaXNTdHJpbmcoZGVmYXVsdFZhbHVlKSAmJiBkZWZhdWx0VmFsdWUudHJpbSgpIHx8ICcnO1xuICAgICAgaWYgKGRlZmF1bHRWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgZWxlbWVudC5hdHRyKGF0dHJOYW1lLCBkZWZhdWx0VmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGxvZy53YXJuKCdBUklBOiBBdHRyaWJ1dGUgXCInLCBhdHRyTmFtZSwgJ1wiLCByZXF1aXJlZCBmb3IgYWNjZXNzaWJpbGl0eSwgaXMgbWlzc2luZyBvbiBub2RlOicsIG5vZGUpO1xuICAgICAgfVxuXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZXhwZWN0QXN5bmMoZWxlbWVudCwgYXR0ck5hbWUsIGRlZmF1bHRWYWx1ZUdldHRlcikge1xuICAgIC8vIFByb2JsZW06IHdoZW4gcmV0cmlldmluZyB0aGUgZWxlbWVudCdzIGNvbnRlbnRzIHN5bmNocm9ub3VzbHkgdG8gZmluZCB0aGUgbGFiZWwsXG4gICAgLy8gdGhlIHRleHQgbWF5IG5vdCBiZSBkZWZpbmVkIHlldCBpbiB0aGUgY2FzZSBvZiBhIGJpbmRpbmcuXG4gICAgLy8gVGhlcmUgaXMgYSBoaWdoZXIgY2hhbmNlIHRoYXQgYSBiaW5kaW5nIHdpbGwgYmUgZGVmaW5lZCBpZiB3ZSB3YWl0IG9uZSBmcmFtZS5cbiAgICAkJHJBRihmdW5jdGlvbigpIHtcbiAgICAgIGV4cGVjdChlbGVtZW50LCBhdHRyTmFtZSwgZGVmYXVsdFZhbHVlR2V0dGVyKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZXhwZWN0V2l0aFRleHQoZWxlbWVudCwgYXR0ck5hbWUpIHtcbiAgICBleHBlY3RBc3luYyhlbGVtZW50LCBhdHRyTmFtZSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZWxlbWVudC50ZXh0KCkudHJpbSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hpbGRIYXNBdHRyaWJ1dGUobm9kZSwgYXR0ck5hbWUpIHtcbiAgICB2YXIgaGFzQ2hpbGRyZW4gPSBub2RlLmhhc0NoaWxkTm9kZXMoKSxcbiAgICAgICAgaGFzQXR0ciA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gaXNIaWRkZW4oZWwpIHtcbiAgICAgIHZhciBzdHlsZSA9IGVsLmN1cnJlbnRTdHlsZSA/IGVsLmN1cnJlbnRTdHlsZSA6ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG4gICAgICByZXR1cm4gKHN0eWxlLmRpc3BsYXkgPT09ICdub25lJyk7XG4gICAgfVxuXG4gICAgaWYoaGFzQ2hpbGRyZW4pIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IG5vZGUuY2hpbGROb2RlcztcbiAgICAgIGZvcih2YXIgaT0wOyBpPGNoaWxkcmVuLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIGlmKGNoaWxkLm5vZGVUeXBlID09PSAxICYmIGNoaWxkLmhhc0F0dHJpYnV0ZShhdHRyTmFtZSkpIHtcbiAgICAgICAgICBpZighaXNIaWRkZW4oY2hpbGQpKXtcbiAgICAgICAgICAgIGhhc0F0dHIgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGFzQXR0cjtcbiAgfVxufVxuQXJpYVNlcnZpY2UuJGluamVjdCA9IFtcIiQkckFGXCIsIFwiJGxvZ1wiLCBcIiR3aW5kb3dcIl07XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29yZScpXG4gIC5zZXJ2aWNlKCckbWRDb21waWxlcicsIG1kQ29tcGlsZXJTZXJ2aWNlKTtcblxuZnVuY3Rpb24gbWRDb21waWxlclNlcnZpY2UoJHEsICRodHRwLCAkaW5qZWN0b3IsICRjb21waWxlLCAkY29udHJvbGxlciwgJHRlbXBsYXRlQ2FjaGUpIHtcbiAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuXG4gIC8qXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAqIEBuYW1lICRtZENvbXBpbGVyXG4gICAqIEBtb2R1bGUgbWF0ZXJpYWwuY29yZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhlICRtZENvbXBpbGVyIHNlcnZpY2UgaXMgYW4gYWJzdHJhY3Rpb24gb2YgYW5ndWxhcidzIGNvbXBpbGVyLCB0aGF0IGFsbG93cyB0aGUgZGV2ZWxvcGVyXG4gICAqIHRvIGVhc2lseSBjb21waWxlIGFuIGVsZW1lbnQgd2l0aCBhIHRlbXBsYXRlVXJsLCBjb250cm9sbGVyLCBhbmQgbG9jYWxzLlxuICAgKlxuICAgKiBAdXNhZ2VcbiAgICogPGhsanMgbGFuZz1cImpzXCI+XG4gICAqICRtZENvbXBpbGVyLmNvbXBpbGUoe1xuICAgKiAgIHRlbXBsYXRlVXJsOiAnbW9kYWwuaHRtbCcsXG4gICAqICAgY29udHJvbGxlcjogJ01vZGFsQ3RybCcsXG4gICAqICAgbG9jYWxzOiB7XG4gICAqICAgICBtb2RhbDogbXlNb2RhbEluc3RhbmNlO1xuICAgKiAgIH1cbiAgICogfSkudGhlbihmdW5jdGlvbihjb21waWxlRGF0YSkge1xuICAgKiAgIGNvbXBpbGVEYXRhLmVsZW1lbnQ7IC8vIG1vZGFsLmh0bWwncyB0ZW1wbGF0ZSBpbiBhbiBlbGVtZW50XG4gICAqICAgY29tcGlsZURhdGEubGluayhteVNjb3BlKTsgLy9hdHRhY2ggY29udHJvbGxlciAmIHNjb3BlIHRvIGVsZW1lbnRcbiAgICogfSk7XG4gICAqIDwvaGxqcz5cbiAgICovXG5cbiAgIC8qXG4gICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgKiBAbmFtZSAkbWRDb21waWxlciNjb21waWxlXG4gICAgKiBAZGVzY3JpcHRpb24gQSBoZWxwZXIgdG8gY29tcGlsZSBhbiBIVE1MIHRlbXBsYXRlL3RlbXBsYXRlVXJsIHdpdGggYSBnaXZlbiBjb250cm9sbGVyLFxuICAgICogbG9jYWxzLCBhbmQgc2NvcGUuXG4gICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyBBbiBvcHRpb25zIG9iamVjdCwgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgKlxuICAgICogICAgLSBgY29udHJvbGxlcmAgLSBgeyhzdHJpbmc9fGZ1bmN0aW9uKCk9fWAgQ29udHJvbGxlciBmbiB0aGF0IHNob3VsZCBiZSBhc3NvY2lhdGVkIHdpdGhcbiAgICAqICAgICAgbmV3bHkgY3JlYXRlZCBzY29wZSBvciB0aGUgbmFtZSBvZiBhIHJlZ2lzdGVyZWQgY29udHJvbGxlciBpZiBwYXNzZWQgYXMgYSBzdHJpbmcuXG4gICAgKiAgICAtIGBjb250cm9sbGVyQXNgIC0gYHtzdHJpbmc9fWAgQSBjb250cm9sbGVyIGFsaWFzIG5hbWUuIElmIHByZXNlbnQgdGhlIGNvbnRyb2xsZXIgd2lsbCBiZVxuICAgICogICAgICBwdWJsaXNoZWQgdG8gc2NvcGUgdW5kZXIgdGhlIGBjb250cm9sbGVyQXNgIG5hbWUuXG4gICAgKiAgICAtIGB0ZW1wbGF0ZWAgLSBge3N0cmluZz19YCBBbiBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nLlxuICAgICogICAgLSBgdGVtcGxhdGVVcmxgIC0gYHtzdHJpbmc9fWAgQSBwYXRoIHRvIGFuIGh0bWwgdGVtcGxhdGUuXG4gICAgKiAgICAtIGB0cmFuc2Zvcm1UZW1wbGF0ZWAgLSBge2Z1bmN0aW9uKHRlbXBsYXRlKT19YCBBIGZ1bmN0aW9uIHdoaWNoIHRyYW5zZm9ybXMgdGhlIHRlbXBsYXRlIGFmdGVyXG4gICAgKiAgICAgIGl0IGlzIGxvYWRlZC4gSXQgd2lsbCBiZSBnaXZlbiB0aGUgdGVtcGxhdGUgc3RyaW5nIGFzIGEgcGFyYW1ldGVyLCBhbmQgc2hvdWxkXG4gICAgKiAgICAgIHJldHVybiBhIGEgbmV3IHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRyYW5zZm9ybWVkIHRlbXBsYXRlLlxuICAgICogICAgLSBgcmVzb2x2ZWAgLSBge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj49fWAgLSBBbiBvcHRpb25hbCBtYXAgb2YgZGVwZW5kZW5jaWVzIHdoaWNoIHNob3VsZFxuICAgICogICAgICBiZSBpbmplY3RlZCBpbnRvIHRoZSBjb250cm9sbGVyLiBJZiBhbnkgb2YgdGhlc2UgZGVwZW5kZW5jaWVzIGFyZSBwcm9taXNlcywgdGhlIGNvbXBpbGVyXG4gICAgKiAgICAgIHdpbGwgd2FpdCBmb3IgdGhlbSBhbGwgdG8gYmUgcmVzb2x2ZWQsIG9yIGlmIG9uZSBpcyByZWplY3RlZCBiZWZvcmUgdGhlIGNvbnRyb2xsZXIgaXNcbiAgICAqICAgICAgaW5zdGFudGlhdGVkIGBjb21waWxlKClgIHdpbGwgZmFpbC4uXG4gICAgKiAgICAgICogYGtleWAgLSBge3N0cmluZ31gOiBhIG5hbWUgb2YgYSBkZXBlbmRlbmN5IHRvIGJlIGluamVjdGVkIGludG8gdGhlIGNvbnRyb2xsZXIuXG4gICAgKiAgICAgICogYGZhY3RvcnlgIC0gYHtzdHJpbmd8ZnVuY3Rpb259YDogSWYgYHN0cmluZ2AgdGhlbiBpdCBpcyBhbiBhbGlhcyBmb3IgYSBzZXJ2aWNlLlxuICAgICogICAgICAgIE90aGVyd2lzZSBpZiBmdW5jdGlvbiwgdGhlbiBpdCBpcyBpbmplY3RlZCBhbmQgdGhlIHJldHVybiB2YWx1ZSBpcyB0cmVhdGVkIGFzIHRoZVxuICAgICogICAgICAgIGRlcGVuZGVuY3kuIElmIHRoZSByZXN1bHQgaXMgYSBwcm9taXNlLCBpdCBpcyByZXNvbHZlZCBiZWZvcmUgaXRzIHZhbHVlIGlzIFxuICAgICogICAgICAgIGluamVjdGVkIGludG8gdGhlIGNvbnRyb2xsZXIuXG4gICAgKlxuICAgICogQHJldHVybnMge29iamVjdD19IHByb21pc2UgQSBwcm9taXNlLCB3aGljaCB3aWxsIGJlIHJlc29sdmVkIHdpdGggYSBgY29tcGlsZURhdGFgIG9iamVjdC5cbiAgICAqIGBjb21waWxlRGF0YWAgaGFzIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczogXG4gICAgKlxuICAgICogICAtIGBlbGVtZW50YCAtIGB7ZWxlbWVudH1gOiBhbiB1bmNvbXBpbGVkIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIHByb3ZpZGVkIHRlbXBsYXRlLlxuICAgICogICAtIGBsaW5rYCAtIGB7ZnVuY3Rpb24oc2NvcGUpfWA6IEEgbGluayBmdW5jdGlvbiwgd2hpY2gsIHdoZW4gY2FsbGVkLCB3aWxsIGNvbXBpbGVcbiAgICAqICAgICB0aGUgZWxlbWVudCBhbmQgaW5zdGFudGlhdGUgdGhlIHByb3ZpZGVkIGNvbnRyb2xsZXIgKGlmIGdpdmVuKS5cbiAgICAqICAgLSBgbG9jYWxzYCAtIGB7b2JqZWN0fWA6IFRoZSBsb2NhbHMgd2hpY2ggd2lsbCBiZSBwYXNzZWQgaW50byB0aGUgY29udHJvbGxlciBvbmNlIGBsaW5rYCBpc1xuICAgICogICAgIGNhbGxlZC4gSWYgYGJpbmRUb0NvbnRyb2xsZXJgIGlzIHRydWUsIHRoZXkgd2lsbCBiZSBjb3BwaWVkIHRvIHRoZSBjdHJsIGluc3RlYWRcbiAgICAqICAgLSBgYmluZFRvQ29udHJvbGxlcmAgLSBgYm9vbGA6IGJpbmQgdGhlIGxvY2FscyB0byB0aGUgY29udHJvbGxlciwgaW5zdGVhZCBvZiBwYXNzaW5nIHRoZW0gaW5cbiAgICAqL1xuICB0aGlzLmNvbXBpbGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdmFyIHRlbXBsYXRlVXJsID0gb3B0aW9ucy50ZW1wbGF0ZVVybDtcbiAgICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlIHx8ICcnO1xuICAgIHZhciBjb250cm9sbGVyID0gb3B0aW9ucy5jb250cm9sbGVyO1xuICAgIHZhciBjb250cm9sbGVyQXMgPSBvcHRpb25zLmNvbnRyb2xsZXJBcztcbiAgICB2YXIgcmVzb2x2ZSA9IG9wdGlvbnMucmVzb2x2ZSB8fCB7fTtcbiAgICB2YXIgbG9jYWxzID0gb3B0aW9ucy5sb2NhbHMgfHwge307XG4gICAgdmFyIHRyYW5zZm9ybVRlbXBsYXRlID0gb3B0aW9ucy50cmFuc2Zvcm1UZW1wbGF0ZSB8fCBhbmd1bGFyLmlkZW50aXR5O1xuICAgIHZhciBiaW5kVG9Db250cm9sbGVyID0gb3B0aW9ucy5iaW5kVG9Db250cm9sbGVyO1xuXG4gICAgLy8gVGFrZSByZXNvbHZlIHZhbHVlcyBhbmQgaW52b2tlIHRoZW0uICBcbiAgICAvLyBSZXNvbHZlcyBjYW4gZWl0aGVyIGJlIGEgc3RyaW5nICh2YWx1ZTogJ015UmVnaXN0ZXJlZEFuZ3VsYXJDb25zdCcpLFxuICAgIC8vIG9yIGFuIGludm9rYWJsZSAnZmFjdG9yeScgb2Ygc29ydHM6ICh2YWx1ZTogZnVuY3Rpb24gVmFsdWVHZXR0ZXIoJGRlcGVuZGVuY3kpIHt9KVxuICAgIGFuZ3VsYXIuZm9yRWFjaChyZXNvbHZlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgcmVzb2x2ZVtrZXldID0gJGluamVjdG9yLmdldCh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlW2tleV0gPSAkaW5qZWN0b3IuaW52b2tlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvL0FkZCB0aGUgbG9jYWxzLCB3aGljaCBhcmUganVzdCBzdHJhaWdodCB2YWx1ZXMgdG8gaW5qZWN0XG4gICAgLy9lZyBsb2NhbHM6IHsgdGhyZWU6IDMgfSwgd2lsbCBpbmplY3QgdGhyZWUgaW50byB0aGUgY29udHJvbGxlclxuICAgIGFuZ3VsYXIuZXh0ZW5kKHJlc29sdmUsIGxvY2Fscyk7XG5cbiAgICBpZiAodGVtcGxhdGVVcmwpIHtcbiAgICAgIHJlc29sdmUuJHRlbXBsYXRlID0gJGh0dHAuZ2V0KHRlbXBsYXRlVXJsLCB7Y2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUuJHRlbXBsYXRlID0gJHEud2hlbih0ZW1wbGF0ZSk7XG4gICAgfVxuXG4gICAgLy8gV2FpdCBmb3IgYWxsIHRoZSByZXNvbHZlcyB0byBmaW5pc2ggaWYgdGhleSBhcmUgcHJvbWlzZXNcbiAgICByZXR1cm4gJHEuYWxsKHJlc29sdmUpLnRoZW4oZnVuY3Rpb24obG9jYWxzKSB7XG5cbiAgICAgIHZhciB0ZW1wbGF0ZSA9IHRyYW5zZm9ybVRlbXBsYXRlKGxvY2Fscy4kdGVtcGxhdGUpO1xuICAgICAgdmFyIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXY+JykuaHRtbCh0ZW1wbGF0ZS50cmltKCkpLmNvbnRlbnRzKCk7XG4gICAgICB2YXIgbGlua0ZuID0gJGNvbXBpbGUoZWxlbWVudCk7XG5cbiAgICAgIC8vUmV0dXJuIGEgbGlua2luZyBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIGxhdGVyIHdoZW4gdGhlIGVsZW1lbnQgaXMgcmVhZHlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxvY2FsczogbG9jYWxzLFxuICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlKSB7XG4gICAgICAgICAgbG9jYWxzLiRzY29wZSA9IHNjb3BlO1xuXG4gICAgICAgICAgLy9JbnN0YW50aWF0ZSBjb250cm9sbGVyIGlmIGl0IGV4aXN0cywgYmVjYXVzZSB3ZSBoYXZlIHNjb3BlXG4gICAgICAgICAgaWYgKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHZhciBjdHJsID0gJGNvbnRyb2xsZXIoY29udHJvbGxlciwgbG9jYWxzKTtcbiAgICAgICAgICAgIGlmIChiaW5kVG9Db250cm9sbGVyKSB7XG4gICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGN0cmwsIGxvY2Fscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL1NlZSBhbmd1bGFyLXJvdXRlIHNvdXJjZSBmb3IgdGhpcyBsb2dpY1xuICAgICAgICAgICAgZWxlbWVudC5kYXRhKCckbmdDb250cm9sbGVyQ29udHJvbGxlcicsIGN0cmwpO1xuICAgICAgICAgICAgZWxlbWVudC5jaGlsZHJlbigpLmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJywgY3RybCk7XG5cbiAgICAgICAgICAgIGlmIChjb250cm9sbGVyQXMpIHtcbiAgICAgICAgICAgICAgc2NvcGVbY29udHJvbGxlckFzXSA9IGN0cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGxpbmtGbihzY29wZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG5cbiAgfTtcbn1cbm1kQ29tcGlsZXJTZXJ2aWNlLiRpbmplY3QgPSBbXCIkcVwiLCBcIiRodHRwXCIsIFwiJGluamVjdG9yXCIsIFwiJGNvbXBpbGVcIiwgXCIkY29udHJvbGxlclwiLCBcIiR0ZW1wbGF0ZUNhY2hlXCJdO1xufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxuLypcbiAqIFRPRE86IEFkZCBzdXBwb3J0IGZvciBtdWx0aXBsZSBmaW5nZXJzIG9uIHRoZSBgcG9pbnRlcmAgb2JqZWN0IChlbmFibGVzIHBpbmNoIGdlc3R1cmUpXG4gKi9cblxudmFyIFNUQVJUX0VWRU5UUyA9ICdtb3VzZWRvd24gdG91Y2hzdGFydCBwb2ludGVyZG93bic7XG52YXIgTU9WRV9FVkVOVFMgPSAnbW91c2Vtb3ZlIHRvdWNobW92ZSBwb2ludGVybW92ZSc7XG52YXIgRU5EX0VWRU5UUyA9ICdtb3VzZXVwIG1vdXNlbGVhdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwgcG9pbnRlcnVwIHBvaW50ZXJjYW5jZWwnO1xudmFyIEhBTkRMRVJTO1xuXG5kb2N1bWVudC5jb250YWlucyB8fCAoZG9jdW1lbnQuY29udGFpbnMgPSBmdW5jdGlvbihub2RlKSB7XG4gIHJldHVybiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKG5vZGUpO1xufSk7XG5cbi8vIFRPRE8gYWRkIHdpbmRvd3MgcGhvbmUgdG8gdGhpc1xudmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmE7XG52YXIgaXNJb3MgPSB1c2VyQWdlbnQubWF0Y2goL2lQYWQvaSkgfHwgdXNlckFnZW50Lm1hdGNoKC9pUGhvbmUvaSkgfHwgdXNlckFnZW50Lm1hdGNoKC9pUG9kL2kpO1xudmFyIGlzQW5kcm9pZCA9IHVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKTtcbnZhciBzaG91bGRIaWphY2tDbGlja3MgPSBpc0lvcyB8fCBpc0FuZHJvaWQ7XG5cbmlmIChzaG91bGRIaWphY2tDbGlja3MpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgIC8vIFNwYWNlL2VudGVyIG9uIGEgYnV0dG9uLCBhbmQgc3VibWl0IGV2ZW50cywgY2FuIHNlbmQgY2xpY2tzXG4gICAgdmFyIGlzS2V5Q2xpY2sgPSBldi5jbGllbnRYID09PSAwICYmIGV2LmNsaWVudFkgPT09IDA7XG4gICAgaWYgKGlzS2V5Q2xpY2sgfHwgZXYuJG1hdGVyaWFsKSByZXR1cm47XG5cbiAgICAvLyBQcmV2ZW50IGNsaWNrcyB1bmxlc3MgdGhleSdyZSBzZW50IGJ5IG1hdGVyaWFsXG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfSwgdHJ1ZSk7XG59XG5cbmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudClcbiAgLm9uKFNUQVJUX0VWRU5UUywgZ2VzdHVyZVN0YXJ0KVxuICAub24oTU9WRV9FVkVOVFMsIGdlc3R1cmVNb3ZlKVxuICAub24oRU5EX0VWRU5UUywgZ2VzdHVyZUVuZClcbiAgLy8gRm9yIHRlc3RpbmdcbiAgLm9uKCckJG1kR2VzdHVyZVJlc2V0JywgZnVuY3Rpb24oKSB7XG4gICAgbGFzdFBvaW50ZXIgPSBwb2ludGVyID0gbnVsbDtcbiAgfSk7XG5cbi8vIFRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudCBhbmQgcHJldmlvdXMgJ3BvaW50ZXInICh1c2VyJ3MgaGFuZClcbnZhciBwb2ludGVyLCBsYXN0UG9pbnRlcjtcblxuZnVuY3Rpb24gcnVuSGFuZGxlcnMoaGFuZGxlckV2ZW50LCBldmVudCkge1xuICB2YXIgaGFuZGxlcjtcbiAgZm9yICh2YXIgaGFuZGxlck5hbWUgaW4gSEFORExFUlMpIHtcbiAgICBoYW5kbGVyID0gSEFORExFUlNbaGFuZGxlck5hbWVdO1xuICAgIGlmIChoYW5kbGVyRXZlbnQgPT09ICdzdGFydCcpIHtcbiAgICAgIC8vIFJ1biBjYW5jZWwgdG8gcmVzZXQgYW55IGhhbmRsZXJzJyBzdGF0ZVxuICAgICAgaGFuZGxlci5jYW5jZWwoKTtcbiAgICB9XG4gICAgaGFuZGxlcltoYW5kbGVyRXZlbnRdKGV2ZW50LCBwb2ludGVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXN0dXJlU3RhcnQoZXYpIHtcbiAgLy8gSWYgd2UncmUgYWxyZWFkeSB0b3VjaGVkIGRvd24sIGFib3J0XG4gIGlmIChwb2ludGVyKSByZXR1cm47XG5cbiAgdmFyIG5vdyA9ICtEYXRlLm5vdygpO1xuXG4gIC8vIGlPUyAmIG9sZCBhbmRyb2lkIGJ1ZzogYWZ0ZXIgYSB0b3VjaCBldmVudCwgYSBjbGljayBldmVudCBpcyBzZW50IDM1MCBtcyBsYXRlci5cbiAgLy8gSWYgPDQwMG1zIGhhdmUgcGFzc2VkLCBkb24ndCBhbGxvdyBhbiBldmVudCBvZiBhIGRpZmZlcmVudCB0eXBlIHRoYW4gdGhlIHByZXZpb3VzIGV2ZW50XG4gIGlmIChsYXN0UG9pbnRlciAmJiAhdHlwZXNNYXRjaChldiwgbGFzdFBvaW50ZXIpICYmIChub3cgLSBsYXN0UG9pbnRlci5lbmRUaW1lIDwgMTUwMCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwb2ludGVyID0gbWFrZVN0YXJ0UG9pbnRlcihldik7XG5cbiAgcnVuSGFuZGxlcnMoJ3N0YXJ0JywgZXYpO1xufVxuXG5mdW5jdGlvbiBnZXN0dXJlTW92ZShldikge1xuICBpZiAoIXBvaW50ZXIgfHwgIXR5cGVzTWF0Y2goZXYsIHBvaW50ZXIpKSByZXR1cm47XG5cbiAgdXBkYXRlUG9pbnRlclN0YXRlKGV2LCBwb2ludGVyKTtcbiAgcnVuSGFuZGxlcnMoJ21vdmUnLCBldik7XG59XG5cbmZ1bmN0aW9uIGdlc3R1cmVFbmQoZXYpIHtcbiAgaWYgKCFwb2ludGVyIHx8ICF0eXBlc01hdGNoKGV2LCBwb2ludGVyKSkgcmV0dXJuO1xuXG4gIHVwZGF0ZVBvaW50ZXJTdGF0ZShldiwgcG9pbnRlcik7XG4gIHBvaW50ZXIuZW5kVGltZSA9ICtEYXRlLm5vdygpO1xuXG4gIHJ1bkhhbmRsZXJzKCdlbmQnLCBldik7XG5cbiAgbGFzdFBvaW50ZXIgPSBwb2ludGVyO1xuICBwb2ludGVyID0gbnVsbDtcbn1cblxuLyoqKioqKioqIEhlbHBlcnMgKioqKioqKioqL1xuZnVuY3Rpb24gdHlwZXNNYXRjaChldiwgcG9pbnRlcikge1xuICByZXR1cm4gZXYgJiYgcG9pbnRlciAmJiBldi50eXBlLmNoYXJBdCgwKSA9PT0gcG9pbnRlci50eXBlO1xufVxuXG5mdW5jdGlvbiBnZXRFdmVudFBvaW50KGV2KSB7XG4gIGV2ID0gZXYub3JpZ2luYWxFdmVudCB8fCBldjsgLy8gc3VwcG9ydCBqUXVlcnkgZXZlbnRzXG4gIHJldHVybiAoZXYudG91Y2hlcyAmJiBldi50b3VjaGVzWzBdKSB8fFxuICAgIChldi5jaGFuZ2VkVG91Y2hlcyAmJiBldi5jaGFuZ2VkVG91Y2hlc1swXSkgfHxcbiAgICBldjtcbn1cblxuZnVuY3Rpb24gdXBkYXRlUG9pbnRlclN0YXRlKGV2LCBwb2ludGVyKSB7XG4gIHZhciBwb2ludCA9IGdldEV2ZW50UG9pbnQoZXYpO1xuICB2YXIgeCA9IHBvaW50ZXIueCA9IHBvaW50LnBhZ2VYO1xuICB2YXIgeSA9IHBvaW50ZXIueSA9IHBvaW50LnBhZ2VZO1xuXG4gIHBvaW50ZXIuZGlzdGFuY2VYID0geCAtIHBvaW50ZXIuc3RhcnRYO1xuICBwb2ludGVyLmRpc3RhbmNlWSA9IHkgLSBwb2ludGVyLnN0YXJ0WTtcbiAgcG9pbnRlci5kaXN0YW5jZSA9IE1hdGguc3FydChcbiAgICBwb2ludGVyLmRpc3RhbmNlWCAqIHBvaW50ZXIuZGlzdGFuY2VYICsgcG9pbnRlci5kaXN0YW5jZVkgKiBwb2ludGVyLmRpc3RhbmNlWVxuICApO1xuXG4gIHBvaW50ZXIuZGlyZWN0aW9uWCA9IHBvaW50ZXIuZGlzdGFuY2VYID4gMCA/ICdyaWdodCcgOiBwb2ludGVyLmRpc3RhbmNlWCA8IDAgPyAnbGVmdCcgOiAnJztcbiAgcG9pbnRlci5kaXJlY3Rpb25ZID0gcG9pbnRlci5kaXN0YW5jZVkgPiAwID8gJ3VwJyA6IHBvaW50ZXIuZGlzdGFuY2VZIDwgMCA/ICdkb3duJyA6ICcnO1xuXG4gIHBvaW50ZXIuZHVyYXRpb24gPSArRGF0ZS5ub3coKSAtIHBvaW50ZXIuc3RhcnRUaW1lO1xuICBwb2ludGVyLnZlbG9jaXR5WCA9IHBvaW50ZXIuZGlzdGFuY2VYIC8gcG9pbnRlci5kdXJhdGlvbjtcbiAgcG9pbnRlci52ZWxvY2l0eVkgPSBwb2ludGVyLmRpc3RhbmNlWSAvIHBvaW50ZXIuZHVyYXRpb247XG59XG5cblxuZnVuY3Rpb24gbWFrZVN0YXJ0UG9pbnRlcihldikge1xuICB2YXIgcG9pbnQgPSBnZXRFdmVudFBvaW50KGV2KTtcbiAgdmFyIHN0YXJ0UG9pbnRlciA9IHtcbiAgICBzdGFydFRpbWU6ICtEYXRlLm5vdygpLFxuICAgIHRhcmdldDogZXYudGFyZ2V0LFxuICAgIC8vICdwJyBmb3IgcG9pbnRlciwgJ20nIGZvciBtb3VzZSwgJ3QnIGZvciB0b3VjaFxuICAgIHR5cGU6IGV2LnR5cGUuY2hhckF0KDApXG4gIH07XG4gIHN0YXJ0UG9pbnRlci5zdGFydFggPSBzdGFydFBvaW50ZXIueCA9IHBvaW50LnBhZ2VYO1xuICBzdGFydFBvaW50ZXIuc3RhcnRZID0gc3RhcnRQb2ludGVyLnkgPSBwb2ludC5wYWdlWTtcbiAgcmV0dXJuIHN0YXJ0UG9pbnRlcjtcbn1cblxuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvcmUnKVxuLnJ1bihbXCIkbWRHZXN0dXJlXCIsIGZ1bmN0aW9uKCRtZEdlc3R1cmUpIHt9XSkgLy8gbWFrZSBzdXJlICRtZEdlc3R1cmUgaXMgYWx3YXlzIGluc3RhbnRpYXRlZFxuLmZhY3RvcnkoJyRtZEdlc3R1cmUnLCBbXCIkJE1kR2VzdHVyZUhhbmRsZXJcIiwgXCIkJHJBRlwiLCBcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uKCQkTWRHZXN0dXJlSGFuZGxlciwgJCRyQUYsICR0aW1lb3V0KSB7XG4gIEhBTkRMRVJTID0ge307XG5cbiAgaWYgKHNob3VsZEhpamFja0NsaWNrcykge1xuICAgIGFkZEhhbmRsZXIoJ2NsaWNrJywge1xuICAgICAgb3B0aW9uczoge1xuICAgICAgICBtYXhEaXN0YW5jZTogNlxuICAgICAgfSxcbiAgICAgIG9uRW5kOiBmdW5jdGlvbihldiwgcG9pbnRlcikge1xuICAgICAgICBpZiAocG9pbnRlci5kaXN0YW5jZSA8IHRoaXMuc3RhdGUub3B0aW9ucy5tYXhEaXN0YW5jZSkge1xuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldiwgJ2NsaWNrJywgbnVsbCwgZXYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhZGRIYW5kbGVyKCdwcmVzcycsIHtcbiAgICBvblN0YXJ0OiBmdW5jdGlvbihldiwgcG9pbnRlcikge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2LCAnJG1kLnByZXNzZG93bicpO1xuICAgIH0sXG4gICAgb25FbmQ6IGZ1bmN0aW9uKGV2LCBwb2ludGVyKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXYsICckbWQucHJlc3N1cCcpO1xuICAgIH1cbiAgfSk7XG5cblxuICBhZGRIYW5kbGVyKCdob2xkJywge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIGtlZXBzIGhpcyBmaW5nZXIgd2l0aGluIHRoZSBzYW1lIDxtYXhEaXN0YW5jZT4gYXJlYSBmb3JcbiAgICAgIC8vIDxkZWxheT4gbXMsIGRpc3BhdGNoIGEgaG9sZCBldmVudC5cbiAgICAgIG1heERpc3RhbmNlOiA2LFxuICAgICAgZGVsYXk6IDUwMCxcbiAgICB9LFxuICAgIG9uQ2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICAgICR0aW1lb3V0LmNhbmNlbCh0aGlzLnN0YXRlLnRpbWVvdXQpO1xuICAgIH0sXG4gICAgb25TdGFydDogZnVuY3Rpb24oZXYsIHBvaW50ZXIpIHtcbiAgICAgIC8vIEZvciBob2xkLCByZXF1aXJlIGEgcGFyZW50IHRvIGJlIHJlZ2lzdGVyZWQgd2l0aCAkbWRHZXN0dXJlLnJlZ2lzdGVyKClcbiAgICAgIC8vIEJlY2F1c2Ugd2UgcHJldmVudCBzY3JvbGwgZXZlbnRzLCB0aGlzIGlzIG5lY2Vzc2FyeS5cbiAgICAgIGlmICghdGhpcy5zdGF0ZS5yZWdpc3RlcmVkUGFyZW50KSByZXR1cm4gdGhpcy5jYW5jZWwoKTtcblxuICAgICAgdGhpcy5zdGF0ZS5wb3MgPSB7eDogcG9pbnRlci54LCB5OiBwb2ludGVyLnl9O1xuICAgICAgdGhpcy5zdGF0ZS50aW1lb3V0ID0gJHRpbWVvdXQoYW5ndWxhci5iaW5kKHRoaXMsIGZ1bmN0aW9uIGhvbGREZWxheUZuKCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXYsICckbWQuaG9sZCcpO1xuICAgICAgICB0aGlzLmNhbmNlbCgpOyAvL3dlJ3JlIGRvbmUhXG4gICAgICB9KSwgdGhpcy5zdGF0ZS5vcHRpb25zLmRlbGF5LCBmYWxzZSk7XG4gICAgfSxcbiAgICBvbk1vdmU6IGZ1bmN0aW9uKGV2LCBwb2ludGVyKSB7XG4gICAgICAvLyBEb24ndCBzY3JvbGwgd2hpbGUgd2FpdGluZyBmb3IgaG9sZFxuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBkeCA9IHRoaXMuc3RhdGUucG9zLnggLSBwb2ludGVyLng7XG4gICAgICB2YXIgZHkgPSB0aGlzLnN0YXRlLnBvcy55IC0gcG9pbnRlci55O1xuICAgICAgaWYgKE1hdGguc3FydChkeCpkeCArIGR5KmR5KSA+IHRoaXMub3B0aW9ucy5tYXhEaXN0YW5jZSkge1xuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgb25FbmQ6IGZ1bmN0aW9uKGV2LCBwb2ludGVyKSB7XG4gICAgICB0aGlzLm9uQ2FuY2VsKCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgYWRkSGFuZGxlcignZHJhZycsIHtcbiAgICBvcHRpb25zOiB7XG4gICAgICBtaW5EaXN0YW5jZTogNixcbiAgICAgIGhvcml6b250YWw6IHRydWUsXG4gICAgfSxcbiAgICBvblN0YXJ0OiBmdW5jdGlvbihldikge1xuICAgICAgLy8gRm9yIGRyYWcsIHJlcXVpcmUgYSBwYXJlbnQgdG8gYmUgcmVnaXN0ZXJlZCB3aXRoICRtZEdlc3R1cmUucmVnaXN0ZXIoKVxuICAgICAgaWYgKCF0aGlzLnN0YXRlLnJlZ2lzdGVyZWRQYXJlbnQpIHRoaXMuY2FuY2VsKCk7XG4gICAgfSxcbiAgICBvbk1vdmU6IGZ1bmN0aW9uKGV2LCBwb2ludGVyKSB7XG4gICAgICB2YXIgc2hvdWxkU3RhcnREcmFnLCBzaG91bGRDYW5jZWw7XG4gICAgICAvLyBEb24ndCBhbGxvdyB0b3VjaCBldmVudHMgdG8gc2Nyb2xsIHdoaWxlIHdlJ3JlIGRyYWdnaW5nIG9yXG4gICAgICAvLyBkZWNpZGluZyBpZiB0aGlzIHRvdWNobW92ZSBpcyBhIHByb3BlciBkcmFnXG4gICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAoIXRoaXMuc3RhdGUuZHJhZ1BvaW50ZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUub3B0aW9ucy5ob3Jpem9udGFsKSB7XG4gICAgICAgICAgc2hvdWxkU3RhcnREcmFnID0gTWF0aC5hYnMocG9pbnRlci5kaXN0YW5jZVgpID4gdGhpcy5zdGF0ZS5vcHRpb25zLm1pbkRpc3RhbmNlO1xuICAgICAgICAgIHNob3VsZENhbmNlbCA9IE1hdGguYWJzKHBvaW50ZXIuZGlzdGFuY2VZKSA+IHRoaXMuc3RhdGUub3B0aW9ucy5taW5EaXN0YW5jZSAqIDEuNTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaG91bGRTdGFydERyYWcgPSBNYXRoLmFicyhwb2ludGVyLmRpc3RhbmNlWSkgPiB0aGlzLnN0YXRlLm9wdGlvbnMubWluRGlzdGFuY2U7XG4gICAgICAgICAgc2hvdWxkQ2FuY2VsID0gTWF0aC5hYnMocG9pbnRlci5kaXN0YW5jZVgpID4gdGhpcy5zdGF0ZS5vcHRpb25zLm1pbkRpc3RhbmNlICogMS41O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNob3VsZFN0YXJ0RHJhZykge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwb2ludGVyLCBzdGFydGluZyBhdCB0aGlzIHBvaW50IHdoZXJlIHRoZSBkcmFnIHN0YXJ0ZWQuXG4gICAgICAgICAgdGhpcy5zdGF0ZS5kcmFnUG9pbnRlciA9IG1ha2VTdGFydFBvaW50ZXIoZXYpO1xuICAgICAgICAgIHVwZGF0ZVBvaW50ZXJTdGF0ZShldiwgdGhpcy5zdGF0ZS5kcmFnUG9pbnRlcik7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2LCAnJG1kLmRyYWdzdGFydCcsIHRoaXMuc3RhdGUuZHJhZ1BvaW50ZXIpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkQ2FuY2VsKSB7XG4gICAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaERyYWdNb3ZlKGV2KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIE9ubHkgZGlzcGF0Y2ggdGhlc2UgZXZlcnkgZnJhbWU7IGFueSBtb3JlIGlzIHVubmVjZXNzcmF5XG4gICAgZGlzcGF0Y2hEcmFnTW92ZTogJCRyQUYudGhyb3R0bGUoZnVuY3Rpb24oZXYpIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZHJhZyBkaWRuJ3Qgc3RvcCB3aGlsZSB3YWl0aW5nIGZvciB0aGUgbmV4dCBmcmFtZVxuICAgICAgaWYgKHRoaXMuc3RhdGUuaXNSdW5uaW5nKSB7XG4gICAgICAgIHVwZGF0ZVBvaW50ZXJTdGF0ZShldiwgdGhpcy5zdGF0ZS5kcmFnUG9pbnRlcik7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldiwgJyRtZC5kcmFnJywgdGhpcy5zdGF0ZS5kcmFnUG9pbnRlcik7XG4gICAgICB9XG4gICAgfSksXG4gICAgb25FbmQ6IGZ1bmN0aW9uKGV2LCBwb2ludGVyKSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5kcmFnUG9pbnRlcikge1xuICAgICAgICB1cGRhdGVQb2ludGVyU3RhdGUoZXYsIHRoaXMuc3RhdGUuZHJhZ1BvaW50ZXIpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXYsICckbWQuZHJhZ2VuZCcsIHRoaXMuc3RhdGUuZHJhZ1BvaW50ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgYWRkSGFuZGxlcignc3dpcGUnLCB7XG4gICAgb3B0aW9uczoge1xuICAgICAgbWluVmVsb2NpdHk6IDAuNjUsXG4gICAgICBtaW5EaXN0YW5jZTogMTAsXG4gICAgfSxcbiAgICBvbkVuZDogZnVuY3Rpb24oZXYsIHBvaW50ZXIpIHtcbiAgICAgIGlmIChNYXRoLmFicyhwb2ludGVyLnZlbG9jaXR5WCkgPiB0aGlzLnN0YXRlLm9wdGlvbnMubWluVmVsb2NpdHkgJiZcbiAgICAgICAgICBNYXRoLmFicyhwb2ludGVyLmRpc3RhbmNlWCkgPiB0aGlzLnN0YXRlLm9wdGlvbnMubWluRGlzdGFuY2UpIHtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IHBvaW50ZXIuZGlyZWN0aW9uWCA9PSAnbGVmdCcgPyAnJG1kLnN3aXBlbGVmdCcgOiAnJG1kLnN3aXBlcmlnaHQnO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXYsIGV2ZW50VHlwZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB2YXIgc2VsZjtcbiAgcmV0dXJuIHNlbGYgPSB7XG4gICAgaGFuZGxlcjogYWRkSGFuZGxlcixcbiAgICByZWdpc3RlcjogcmVnaXN0ZXJcbiAgfTtcblxuICBmdW5jdGlvbiBhZGRIYW5kbGVyKG5hbWUsIGRlZmluaXRpb24pIHtcbiAgICB2YXIgaGFuZGxlciA9IG5ldyAkJE1kR2VzdHVyZUhhbmRsZXIobmFtZSk7XG4gICAgYW5ndWxhci5leHRlbmQoaGFuZGxlciwgZGVmaW5pdGlvbik7XG4gICAgSEFORExFUlNbbmFtZV0gPSBoYW5kbGVyO1xuICAgIHJldHVybiBzZWxmO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIoZWxlbWVudCwgaGFuZGxlck5hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgaGFuZGxlciA9IEhBTkRMRVJTWyBoYW5kbGVyTmFtZS5yZXBsYWNlKC9eXFwkbWQuLywgJycpIF07XG4gICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byByZWdpc3RlciBlbGVtZW50IHdpdGggaGFuZGxlciAnICsgaGFuZGxlck5hbWUgKyAnLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAnQXZhaWxhYmxlIGhhbmRsZXJzOiAnICsgT2JqZWN0LmtleXMoSEFORExFUlMpLmpvaW4oJywgJykpO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZGxlci5yZWdpc3RlckVsZW1lbnQoZWxlbWVudCwgb3B0aW9ucyk7XG4gIH1cbn1dKVxuLmZhY3RvcnkoJyQkTWRHZXN0dXJlSGFuZGxlcicsIFtcIiQkckFGXCIsIGZ1bmN0aW9uKCQkckFGKSB7XG5cbiAgZnVuY3Rpb24gR2VzdHVyZUhhbmRsZXIobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICB9XG4gIEdlc3R1cmVIYW5kbGVyLnByb3RvdHlwZSA9IHtcbiAgICBvblN0YXJ0OiBhbmd1bGFyLm5vb3AsXG4gICAgb25Nb3ZlOiBhbmd1bGFyLm5vb3AsXG4gICAgb25FbmQ6IGFuZ3VsYXIubm9vcCxcbiAgICBvbkNhbmNlbDogYW5ndWxhci5ub29wLFxuICAgIG9wdGlvbnM6IHt9LFxuXG4gICAgZGlzcGF0Y2hFdmVudDogZGlzcGF0Y2hFdmVudCxcblxuICAgIHN0YXJ0OiBmdW5jdGlvbihldiwgcG9pbnRlcikge1xuICAgICAgaWYgKHRoaXMuc3RhdGUuaXNSdW5uaW5nKSByZXR1cm47XG4gICAgICB2YXIgcGFyZW50VGFyZ2V0ID0gdGhpcy5nZXROZWFyZXN0UGFyZW50KGV2LnRhcmdldCk7XG4gICAgICB2YXIgcGFyZW50VGFyZ2V0T3B0aW9ucyA9IHBhcmVudFRhcmdldCAmJiBwYXJlbnRUYXJnZXQuJG1kR2VzdHVyZVt0aGlzLm5hbWVdIHx8IHt9O1xuXG4gICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICBpc1J1bm5pbmc6IHRydWUsXG4gICAgICAgIG9wdGlvbnM6IGFuZ3VsYXIuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIHBhcmVudFRhcmdldE9wdGlvbnMpLFxuICAgICAgICByZWdpc3RlcmVkUGFyZW50OiBwYXJlbnRUYXJnZXRcbiAgICAgIH07XG4gICAgICB0aGlzLm9uU3RhcnQoZXYsIHBvaW50ZXIpO1xuICAgIH0sXG4gICAgbW92ZTogZnVuY3Rpb24oZXYsIHBvaW50ZXIpIHtcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5pc1J1bm5pbmcpIHJldHVybjtcbiAgICAgIHRoaXMub25Nb3ZlKGV2LCBwb2ludGVyKTtcbiAgICB9LFxuICAgIGVuZDogZnVuY3Rpb24oZXYsIHBvaW50ZXIpIHtcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5pc1J1bm5pbmcpIHJldHVybjtcbiAgICAgIHRoaXMub25FbmQoZXYsIHBvaW50ZXIpO1xuICAgICAgdGhpcy5zdGF0ZS5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICB9LFxuICAgIGNhbmNlbDogZnVuY3Rpb24oZXYsIHBvaW50ZXIpIHtcbiAgICAgIHRoaXMub25DYW5jZWwoZXYsIHBvaW50ZXIpO1xuICAgICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIH0sXG5cbiAgICAvLyBGaW5kIGFuZCByZXR1cm4gdGhlIG5lYXJlc3QgcGFyZW50IGVsZW1lbnQgdGhhdCBoYXMgYmVlbiByZWdpc3RlcmVkIHZpYVxuICAgIC8vICRtZEdlc3R1cmUucmVnaXN0ZXIoZWxlbWVudCwgJ2hhbmRsZXJOYW1lJykuXG4gICAgZ2V0TmVhcmVzdFBhcmVudDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIGN1cnJlbnQgPSBub2RlO1xuICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgICAgaWYgKCAoY3VycmVudC4kbWRHZXN0dXJlIHx8IHt9KVt0aGlzLm5hbWVdICkge1xuICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlZ2lzdGVyRWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgZWxlbWVudFswXS4kbWRHZXN0dXJlID0gZWxlbWVudFswXS4kbWRHZXN0dXJlIHx8IHt9O1xuICAgICAgZWxlbWVudFswXS4kbWRHZXN0dXJlW3RoaXMubmFtZV0gPSBvcHRpb25zIHx8IHt9O1xuICAgICAgZWxlbWVudC5vbignJGRlc3Ryb3knLCBvbkRlc3Ryb3kpO1xuXG4gICAgICByZXR1cm4gb25EZXN0cm95O1xuICAgICAgXG4gICAgICBmdW5jdGlvbiBvbkRlc3Ryb3koKSB7XG4gICAgICAgIGRlbGV0ZSBlbGVtZW50WzBdLiRtZEdlc3R1cmVbc2VsZi5uYW1lXTtcbiAgICAgICAgZWxlbWVudC5vZmYoJyRkZXN0cm95Jywgb25EZXN0cm95KTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xuXG4gIHZhciBjdXN0b21FdmVudE9wdGlvbnMgPSB7XG4gICAgYnViYmxlczogdHJ1ZSxcbiAgICBjYW5jZWxhYmxlOiB0cnVlXG4gIH07XG4gIC8qXG4gICAqIE5PVEU6IGRpc3BhdGNoRXZlbnQgaXMgdmVyeSBwZXJmb3JtYW5jZSBzZW5zaXRpdmUuIFxuICAgKi9cbiAgZnVuY3Rpb24gZGlzcGF0Y2hFdmVudChzcmNFdmVudCwgZXZlbnRUeXBlLCBldmVudFBvaW50ZXIsIC8qb3JpZ2luYWwgRE9NRXZlbnQgKi9ldikge1xuICAgIGV2ZW50UG9pbnRlciA9IGV2ZW50UG9pbnRlciB8fCBwb2ludGVyO1xuICAgIHZhciBldmVudE9iajtcblxuICAgIGlmIChldmVudFR5cGUgPT09ICdjbGljaycpIHtcbiAgICAgIGV2ZW50T2JqID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG4gICAgICBldmVudE9iai5pbml0TW91c2VFdmVudChcbiAgICAgICAgJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCBldi5kZXRhaWwsXG4gICAgICAgIGV2LnNjcmVlblgsIGV2LnNjcmVlblksIGV2LmNsaWVudFgsIGV2LmNsaWVudFksIFxuICAgICAgICBldi5jdHJsS2V5LCBldi5hbHRLZXksIGV2LnNoaWZ0S2V5LCBldi5tZXRhS2V5LFxuICAgICAgICBldi5idXR0b24sIGV2LnJlbGF0ZWRUYXJnZXQgfHwgbnVsbFxuICAgICAgKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBldmVudE9iaiA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgZXZlbnRPYmouaW5pdEN1c3RvbUV2ZW50KGV2ZW50VHlwZSwgdHJ1ZSwgdHJ1ZSwge30pO1xuICAgIH1cbiAgICBldmVudE9iai4kbWF0ZXJpYWwgPSB0cnVlO1xuICAgIGV2ZW50T2JqLnBvaW50ZXIgPSBldmVudFBvaW50ZXI7XG4gICAgZXZlbnRPYmouc3JjRXZlbnQgPSBzcmNFdmVudDtcbiAgICBldmVudFBvaW50ZXIudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXZlbnRPYmopO1xuICB9XG5cbiAgcmV0dXJuIEdlc3R1cmVIYW5kbGVyO1xufV0pO1xuXG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29yZScpXG4gIC5wcm92aWRlcignJCRpbnRlcmltRWxlbWVudCcsIEludGVyaW1FbGVtZW50UHJvdmlkZXIpO1xuXG4vKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICQkaW50ZXJpbUVsZW1lbnRcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29yZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEZhY3RvcnkgdGhhdCBjb250cnVjdHMgYCQkaW50ZXJpbUVsZW1lbnQuJHNlcnZpY2VgIHNlcnZpY2VzLlxuICogVXNlZCBpbnRlcm5hbGx5IGluIG1hdGVyaWFsIGRlc2lnbiBmb3IgZWxlbWVudHMgdGhhdCBhcHBlYXIgb24gc2NyZWVuIHRlbXBvcmFyaWx5LlxuICogVGhlIHNlcnZpY2UgcHJvdmlkZXMgYSBwcm9taXNlLWxpa2UgQVBJIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSB0ZW1wb3JhcnlcbiAqIGVsZW1lbnRzLlxuICpcbiAqIGBgYGpzXG4gKiBhcHAuc2VydmljZSgnJG1kVG9hc3QnLCBmdW5jdGlvbigkJGludGVyaW1FbGVtZW50KSB7XG4gKiAgIHZhciAkbWRUb2FzdCA9ICQkaW50ZXJpbUVsZW1lbnQodG9hc3REZWZhdWx0T3B0aW9ucyk7XG4gKiAgIHJldHVybiAkbWRUb2FzdDtcbiAqIH0pO1xuICogYGBgXG4gKiBAcGFyYW0ge29iamVjdD19IGRlZmF1bHRPcHRpb25zIE9wdGlvbnMgdXNlZCBieSBkZWZhdWx0IGZvciB0aGUgYHNob3dgIG1ldGhvZCBvbiB0aGUgc2VydmljZS5cbiAqXG4gKiBAcmV0dXJucyB7JCRpbnRlcmltRWxlbWVudC4kc2VydmljZX1cbiAqXG4gKi9cblxuZnVuY3Rpb24gSW50ZXJpbUVsZW1lbnRQcm92aWRlcigpIHtcbiAgY3JlYXRlSW50ZXJpbUVsZW1lbnRQcm92aWRlci4kZ2V0ID0gSW50ZXJpbUVsZW1lbnRGYWN0b3J5O1xuICBJbnRlcmltRWxlbWVudEZhY3RvcnkuJGluamVjdCA9IFtcIiRkb2N1bWVudFwiLCBcIiRxXCIsIFwiJHJvb3RTY29wZVwiLCBcIiR0aW1lb3V0XCIsIFwiJHJvb3RFbGVtZW50XCIsIFwiJGFuaW1hdGVcIiwgXCIkaW50ZXJwb2xhdGVcIiwgXCIkbWRDb21waWxlclwiLCBcIiRtZFRoZW1pbmdcIl07XG4gIHJldHVybiBjcmVhdGVJbnRlcmltRWxlbWVudFByb3ZpZGVyO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IHByb3ZpZGVyIHdoaWNoIGFsbG93cyBjb25maWd1cmF0aW9uIG9mIGEgbmV3IGludGVyaW1FbGVtZW50XG4gICAqIHNlcnZpY2UuIEFsbG93cyBjb25maWd1cmF0aW9uIG9mIGRlZmF1bHQgb3B0aW9ucyAmIG1ldGhvZHMgZm9yIG9wdGlvbnMsXG4gICAqIGFzIHdlbGwgYXMgY29uZmlndXJhdGlvbiBvZiAncHJlc2V0JyBtZXRob2RzIChlZyBkaWFsb2cuYmFzaWMoKTogYmFzaWMgaXMgYSBwcmVzZXQgbWV0aG9kKVxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlSW50ZXJpbUVsZW1lbnRQcm92aWRlcihpbnRlcmltRmFjdG9yeU5hbWUpIHtcbiAgICB2YXIgRVhQT1NFRF9NRVRIT0RTID0gWydvbkhpZGUnLCAnb25TaG93JywgJ29uUmVtb3ZlJ107XG4gICAgdmFyIHByb3ZpZGVyQ29uZmlnID0ge1xuICAgICAgcHJlc2V0czoge31cbiAgICB9O1xuICAgIHZhciBwcm92aWRlciA9IHtcbiAgICAgIHNldERlZmF1bHRzOiBzZXREZWZhdWx0cyxcbiAgICAgIGFkZFByZXNldDogYWRkUHJlc2V0LFxuICAgICAgJGdldDogZmFjdG9yeVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBhbGwgaW50ZXJpbSBlbGVtZW50cyB3aWxsIGNvbWUgd2l0aCB0aGUgJ2J1aWxkJyBwcmVzZXRcbiAgICAgKi9cbiAgICBwcm92aWRlci5hZGRQcmVzZXQoJ2J1aWxkJywge1xuICAgICAgbWV0aG9kczogWydjb250cm9sbGVyJywgJ2NvbnRyb2xsZXJBcycsICdyZXNvbHZlJyxcbiAgICAgICAgJ3RlbXBsYXRlJywgJ3RlbXBsYXRlVXJsJywgJ3RoZW1hYmxlJywgJ3RyYW5zZm9ybVRlbXBsYXRlJywgJ3BhcmVudCddXG4gICAgfSk7XG5cbiAgICBmYWN0b3J5LiRpbmplY3QgPSBbXCIkJGludGVyaW1FbGVtZW50XCIsIFwiJGFuaW1hdGVcIiwgXCIkaW5qZWN0b3JcIl07XG4gICAgcmV0dXJuIHByb3ZpZGVyO1xuXG4gICAgLyoqXG4gICAgICogU2F2ZSB0aGUgY29uZmlndXJlZCBkZWZhdWx0cyB0byBiZSB1c2VkIHdoZW4gdGhlIGZhY3RvcnkgaXMgaW5zdGFudGlhdGVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0RGVmYXVsdHMoZGVmaW5pdGlvbikge1xuICAgICAgcHJvdmlkZXJDb25maWcub3B0aW9uc0ZhY3RvcnkgPSBkZWZpbml0aW9uLm9wdGlvbnM7XG4gICAgICBwcm92aWRlckNvbmZpZy5tZXRob2RzID0gKGRlZmluaXRpb24ubWV0aG9kcyB8fCBbXSkuY29uY2F0KEVYUE9TRURfTUVUSE9EUyk7XG4gICAgICByZXR1cm4gcHJvdmlkZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2F2ZSB0aGUgY29uZmlndXJlZCBwcmVzZXQgdG8gYmUgdXNlZCB3aGVuIHRoZSBmYWN0b3J5IGlzIGluc3RhbnRpYXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZFByZXNldChuYW1lLCBkZWZpbml0aW9uKSB7XG4gICAgICBkZWZpbml0aW9uID0gZGVmaW5pdGlvbiB8fCB7fTtcbiAgICAgIGRlZmluaXRpb24ubWV0aG9kcyA9IGRlZmluaXRpb24ubWV0aG9kcyB8fCBbXTtcbiAgICAgIGRlZmluaXRpb24ub3B0aW9ucyA9IGRlZmluaXRpb24ub3B0aW9ucyB8fCBmdW5jdGlvbigpIHsgcmV0dXJuIHt9OyB9O1xuXG4gICAgICBpZiAoL15jYW5jZWx8aGlkZXxzaG93JC8udGVzdChuYW1lKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcmVzZXQgJ1wiICsgbmFtZSArIFwiJyBpbiBcIiArIGludGVyaW1GYWN0b3J5TmFtZSArIFwiIGlzIHJlc2VydmVkIVwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbml0aW9uLm1ldGhvZHMuaW5kZXhPZignX29wdGlvbnMnKSA+IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCAnX29wdGlvbnMnIGluIFwiICsgaW50ZXJpbUZhY3RvcnlOYW1lICsgXCIgaXMgcmVzZXJ2ZWQhXCIpO1xuICAgICAgfVxuICAgICAgcHJvdmlkZXJDb25maWcucHJlc2V0c1tuYW1lXSA9IHtcbiAgICAgICAgbWV0aG9kczogZGVmaW5pdGlvbi5tZXRob2RzLmNvbmNhdChFWFBPU0VEX01FVEhPRFMpLFxuICAgICAgICBvcHRpb25zRmFjdG9yeTogZGVmaW5pdGlvbi5vcHRpb25zLFxuICAgICAgICBhcmdPcHRpb246IGRlZmluaXRpb24uYXJnT3B0aW9uXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHByb3ZpZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGZhY3RvcnkgdGhhdCBoYXMgdGhlIGdpdmVuIG1ldGhvZHMgJiBkZWZhdWx0cyBpbXBsZW1lbnRpbmcgaW50ZXJpbUVsZW1lbnRcbiAgICAgKi9cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBmYWN0b3J5KCQkaW50ZXJpbUVsZW1lbnQsICRhbmltYXRlLCAkaW5qZWN0b3IpIHtcbiAgICAgIHZhciBkZWZhdWx0TWV0aG9kcztcbiAgICAgIHZhciBkZWZhdWx0T3B0aW9ucztcbiAgICAgIHZhciBpbnRlcmltRWxlbWVudFNlcnZpY2UgPSAkJGludGVyaW1FbGVtZW50KCk7XG5cbiAgICAgIC8qXG4gICAgICAgKiBwdWJsaWNTZXJ2aWNlIGlzIHdoYXQgdGhlIGRldmVsb3BlciB3aWxsIGJlIHVzaW5nLlxuICAgICAgICogSXQgaGFzIG1ldGhvZHMgaGlkZSgpLCBjYW5jZWwoKSwgc2hvdygpLCBidWlsZCgpLCBhbmQgYW55IG90aGVyXG4gICAgICAgKiBwcmVzZXRzIHdoaWNoIHdlcmUgc2V0IGR1cmluZyB0aGUgY29uZmlnIHBoYXNlLlxuICAgICAgICovXG4gICAgICB2YXIgcHVibGljU2VydmljZSA9IHtcbiAgICAgICAgaGlkZTogaW50ZXJpbUVsZW1lbnRTZXJ2aWNlLmhpZGUsXG4gICAgICAgIGNhbmNlbDogaW50ZXJpbUVsZW1lbnRTZXJ2aWNlLmNhbmNlbCxcbiAgICAgICAgc2hvdzogc2hvd0ludGVyaW1FbGVtZW50XG4gICAgICB9O1xuXG4gICAgICBkZWZhdWx0TWV0aG9kcyA9IHByb3ZpZGVyQ29uZmlnLm1ldGhvZHMgfHwgW107XG4gICAgICAvLyBUaGlzIG11c3QgYmUgaW52b2tlZCBhZnRlciB0aGUgcHVibGljU2VydmljZSBpcyBpbml0aWFsaXplZFxuICAgICAgZGVmYXVsdE9wdGlvbnMgPSBpbnZva2VGYWN0b3J5KHByb3ZpZGVyQ29uZmlnLm9wdGlvbnNGYWN0b3J5LCB7fSk7XG5cbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChwcm92aWRlckNvbmZpZy5wcmVzZXRzLCBmdW5jdGlvbihkZWZpbml0aW9uLCBuYW1lKSB7XG4gICAgICAgIHZhciBwcmVzZXREZWZhdWx0cyA9IGludm9rZUZhY3RvcnkoZGVmaW5pdGlvbi5vcHRpb25zRmFjdG9yeSwge30pO1xuICAgICAgICB2YXIgcHJlc2V0TWV0aG9kcyA9IChkZWZpbml0aW9uLm1ldGhvZHMgfHwgW10pLmNvbmNhdChkZWZhdWx0TWV0aG9kcyk7XG5cbiAgICAgICAgLy8gRXZlcnkgaW50ZXJpbUVsZW1lbnQgYnVpbHQgd2l0aCBhIHByZXNldCBoYXMgYSBmaWVsZCBjYWxsZWQgYCR0eXBlYCxcbiAgICAgICAgLy8gd2hpY2ggbWF0Y2hlcyB0aGUgbmFtZSBvZiB0aGUgcHJlc2V0LlxuICAgICAgICAvLyBFZyBpbiBwcmVzZXQgJ2NvbmZpcm0nLCBvcHRpb25zLiR0eXBlID09PSAnY29uZmlybSdcbiAgICAgICAgYW5ndWxhci5leHRlbmQocHJlc2V0RGVmYXVsdHMsIHsgJHR5cGU6IG5hbWUgfSk7XG5cbiAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGEgcHJlc2V0IGNsYXNzIHdoaWNoIGhhcyBzZXR0ZXIgbWV0aG9kcyBmb3IgZXZlcnlcbiAgICAgICAgLy8gbWV0aG9kIGdpdmVuIGluIHRoZSBgLmFkZFByZXNldCgpYCBmdW5jdGlvbiwgYXMgd2VsbCBhcyBldmVyeVxuICAgICAgICAvLyBtZXRob2QgZ2l2ZW4gaW4gdGhlIGAuc2V0RGVmYXVsdHMoKWAgZnVuY3Rpb24uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEBleGFtcGxlXG4gICAgICAgIC8vIC5zZXREZWZhdWx0cyh7XG4gICAgICAgIC8vICAgbWV0aG9kczogWydoYXNCYWNrZHJvcCcsICdjbGlja091dHNpZGVUb0Nsb3NlJywgJ2VzY2FwZVRvQ2xvc2UnLCAndGFyZ2V0RXZlbnQnXSxcbiAgICAgICAgLy8gICBvcHRpb25zOiBkaWFsb2dEZWZhdWx0T3B0aW9uc1xuICAgICAgICAvLyB9KVxuICAgICAgICAvLyAuYWRkUHJlc2V0KCdhbGVydCcsIHtcbiAgICAgICAgLy8gICBtZXRob2RzOiBbJ3RpdGxlJywgJ29rJ10sXG4gICAgICAgIC8vICAgb3B0aW9uczogYWxlcnREaWFsb2dPcHRpb25zXG4gICAgICAgIC8vIH0pXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFNldCB2YWx1ZXMgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIG9wdGlvbnMgd2hlbiBpbnRlcmltRWxlbW50LnNob3coKSBpcyBjYWxsZWQuXG4gICAgICAgIGZ1bmN0aW9uIFByZXNldChvcHRzKSB7XG4gICAgICAgICAgdGhpcy5fb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBwcmVzZXREZWZhdWx0cywgb3B0cyk7XG4gICAgICAgIH1cbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHByZXNldE1ldGhvZHMsIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICBQcmVzZXQucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBzaG9ydGN1dCBtZXRob2QgZm9yIG9uZS1saW5lYXIgbWV0aG9kc1xuICAgICAgICBpZiAoZGVmaW5pdGlvbi5hcmdPcHRpb24pIHtcbiAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9ICdzaG93JyArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xuICAgICAgICAgIHB1YmxpY1NlcnZpY2VbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICAgIHZhciBjb25maWcgPSBwdWJsaWNTZXJ2aWNlW25hbWVdKGFyZyk7XG4gICAgICAgICAgICByZXR1cm4gcHVibGljU2VydmljZS5zaG93KGNvbmZpZyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVnICRtZERpYWxvZy5hbGVydCgpIHdpbGwgcmV0dXJuIGEgbmV3IGFsZXJ0IHByZXNldFxuICAgICAgICBwdWJsaWNTZXJ2aWNlW25hbWVdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgLy8gSWYgYXJnT3B0aW9uIGlzIHN1cHBsaWVkLCBlZyBgYXJnT3B0aW9uOiAnY29udGVudCdgLCB0aGVuIHdlIGFzc3VtZVxuICAgICAgICAgIC8vIGlmIHRoZSBhcmd1bWVudCBpcyBub3QgYW4gb3B0aW9ucyBvYmplY3QgdGhlbiBpdCBpcyB0aGUgYGFyZ09wdGlvbmAgb3B0aW9uLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gQGV4YW1wbGUgYCRtZFRvYXN0LnNpbXBsZSgnaGVsbG8nKWAgLy8gc2V0cyBvcHRpb25zLmNvbnRlbnQgdG8gaGVsbG9cbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIGFyZ09wdGlvbiA9PT0gJ2NvbnRlbnQnXG4gICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggJiYgZGVmaW5pdGlvbi5hcmdPcHRpb24gJiYgIWFuZ3VsYXIuaXNPYmplY3QoYXJnKSAmJlxuICAgICAgICAgICAgICAhYW5ndWxhci5pc0FycmF5KGFyZykpIHtcbiAgICAgICAgICAgIHJldHVybiAobmV3IFByZXNldCgpKVtkZWZpbml0aW9uLmFyZ09wdGlvbl0oYXJnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcmVzZXQoYXJnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcHVibGljU2VydmljZTtcblxuICAgICAgZnVuY3Rpb24gc2hvd0ludGVyaW1FbGVtZW50KG9wdHMpIHtcbiAgICAgICAgLy8gb3B0cyBpcyBlaXRoZXIgYSBwcmVzZXQgd2hpY2ggc3RvcmVzIGl0cyBvcHRpb25zIG9uIGFuIF9vcHRpb25zIGZpZWxkLFxuICAgICAgICAvLyBvciBqdXN0IGFuIG9iamVjdCBtYWRlIHVwIG9mIG9wdGlvbnNcbiAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5fb3B0aW9ucykgb3B0cyA9IG9wdHMuX29wdGlvbnM7XG4gICAgICAgIHJldHVybiBpbnRlcmltRWxlbWVudFNlcnZpY2Uuc2hvdyhcbiAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdHMpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGVscGVyIHRvIGNhbGwgJGluamVjdG9yLmludm9rZSB3aXRoIGEgbG9jYWwgb2YgdGhlIGZhY3RvcnkgbmFtZSBmb3JcbiAgICAgICAqIHRoaXMgcHJvdmlkZXIuXG4gICAgICAgKiBJZiBhbiAkbWREaWFsb2cgaXMgcHJvdmlkaW5nIG9wdGlvbnMgZm9yIGEgZGlhbG9nIGFuZCB0cmllcyB0byBpbmplY3RcbiAgICAgICAqICRtZERpYWxvZywgYSBjaXJjdWxhciBkZXBlbmRlbmN5IGVycm9yIHdpbGwgaGFwcGVuLlxuICAgICAgICogV2UgZ2V0IGFyb3VuZCB0aGF0IGJ5IG1hbnVhbGx5IGluamVjdGluZyAkbWREaWFsb2cgYXMgYSBsb2NhbC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gaW52b2tlRmFjdG9yeShmYWN0b3J5LCBkZWZhdWx0VmFsKSB7XG4gICAgICAgIHZhciBsb2NhbHMgPSB7fTtcbiAgICAgICAgbG9jYWxzW2ludGVyaW1GYWN0b3J5TmFtZV0gPSBwdWJsaWNTZXJ2aWNlO1xuICAgICAgICByZXR1cm4gJGluamVjdG9yLmludm9rZShmYWN0b3J5IHx8IGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVmYXVsdFZhbDsgfSwge30sIGxvY2Fscyk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBJbnRlcmltRWxlbWVudEZhY3RvcnkoJGRvY3VtZW50LCAkcSwgJHJvb3RTY29wZSwgJHRpbWVvdXQsICRyb290RWxlbWVudCwgJGFuaW1hdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW50ZXJwb2xhdGUsICRtZENvbXBpbGVyLCAkbWRUaGVtaW5nICkge1xuICAgIHZhciBzdGFydFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpLFxuICAgICAgICBlbmRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksXG4gICAgICAgIHVzZXNTdGFuZGFyZFN5bWJvbHMgPSAoKHN0YXJ0U3ltYm9sID09PSAne3snKSAmJiAoZW5kU3ltYm9sID09PSAnfX0nKSksXG4gICAgICAgIHByb2Nlc3NUZW1wbGF0ZSAgPSB1c2VzU3RhbmRhcmRTeW1ib2xzID8gYW5ndWxhci5pZGVudGl0eSA6IHJlcGxhY2VJbnRlcnBvbGF0aW9uU3ltYm9scztcblxuICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVJbnRlcmltRWxlbWVudFNlcnZpY2UoKSB7XG4gICAgICAvKlxuICAgICAgICogQG5nZG9jIHNlcnZpY2VcbiAgICAgICAqIEBuYW1lICQkaW50ZXJpbUVsZW1lbnQuJHNlcnZpY2VcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEEgc2VydmljZSB1c2VkIHRvIGNvbnRyb2wgaW5zZXJ0aW5nIGFuZCByZW1vdmluZyBhbiBlbGVtZW50IGludG8gdGhlIERPTS5cbiAgICAgICAqXG4gICAgICAgKi9cbiAgICAgIHZhciBzdGFjayA9IFtdO1xuICAgICAgdmFyIHNlcnZpY2U7XG4gICAgICByZXR1cm4gc2VydmljZSA9IHtcbiAgICAgICAgc2hvdzogc2hvdyxcbiAgICAgICAgaGlkZTogaGlkZSxcbiAgICAgICAgY2FuY2VsOiBjYW5jZWxcbiAgICAgIH07XG5cbiAgICAgIC8qXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkJGludGVyaW1FbGVtZW50LiRzZXJ2aWNlI3Nob3dcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBZGRzIHRoZSBgJGludGVyaW1FbGVtZW50YCB0byB0aGUgRE9NIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgb3IgcmVqZWN0ZWRcbiAgICAgICAqIHdpdGggaGlkZSBvciBjYW5jZWwsIHJlc3BlY3RpdmVseS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyp9IG9wdGlvbnMgaXMgaGFzaE1hcCBvZiBzZXR0aW5nc1xuICAgICAgICogQHJldHVybnMgYSBQcm9taXNlXG4gICAgICAgKlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBzaG93KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgIHNlcnZpY2UuY2FuY2VsKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW50ZXJpbUVsZW1lbnQgPSBuZXcgSW50ZXJpbUVsZW1lbnQob3B0aW9ucyk7XG5cbiAgICAgICAgc3RhY2sucHVzaChpbnRlcmltRWxlbWVudCk7XG4gICAgICAgIHJldHVybiBpbnRlcmltRWxlbWVudC5zaG93KCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gaW50ZXJpbUVsZW1lbnQuZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkJGludGVyaW1FbGVtZW50LiRzZXJ2aWNlI2hpZGVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZW1vdmVzIHRoZSBgJGludGVyaW1FbGVtZW50YCBmcm9tIHRoZSBET00gYW5kIHJlc29sdmVzIHRoZSBwcm9taXNlIHJldHVybmVkIGZyb20gYHNob3dgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsqfSByZXNvbHZlUGFyYW0gRGF0YSB0byByZXNvbHZlIHRoZSBwcm9taXNlIHdpdGhcbiAgICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgYWZ0ZXIgdGhlIGVsZW1lbnQgaGFzIGJlZW4gcmVtb3ZlZC5cbiAgICAgICAqXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGhpZGUocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIGludGVyaW1FbGVtZW50ID0gc3RhY2suc2hpZnQoKTtcbiAgICAgICAgaW50ZXJpbUVsZW1lbnQgJiYgaW50ZXJpbUVsZW1lbnQucmVtb3ZlKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBpbnRlcmltRWxlbWVudC5kZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGludGVyaW1FbGVtZW50ID8gaW50ZXJpbUVsZW1lbnQuZGVmZXJyZWQucHJvbWlzZSA6ICRxLndoZW4ocmVzcG9uc2UpO1xuICAgICAgfVxuXG4gICAgICAvKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJCRpbnRlcmltRWxlbWVudC4kc2VydmljZSNjYW5jZWxcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZW1vdmVzIHRoZSBgJGludGVyaW1FbGVtZW50YCBmcm9tIHRoZSBET00gYW5kIHJlamVjdHMgdGhlIHByb21pc2UgcmV0dXJuZWQgZnJvbSBgc2hvd2BcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyp9IHJlYXNvbiBEYXRhIHRvIHJlamVjdCB0aGUgcHJvbWlzZSB3aXRoXG4gICAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgd2lsbCBiZSByZWplY3RlZCBhZnRlciB0aGUgZWxlbWVudCBoYXMgYmVlbiByZW1vdmVkLlxuICAgICAgICpcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gY2FuY2VsKHJlYXNvbikge1xuICAgICAgICB2YXIgaW50ZXJpbUVsZW1lbnQgPSBzdGFjay5zaGlmdCgpO1xuICAgICAgICBpbnRlcmltRWxlbWVudCAmJiBpbnRlcmltRWxlbWVudC5yZW1vdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGludGVyaW1FbGVtZW50LmRlZmVycmVkLnJlamVjdChyZWFzb24pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gaW50ZXJpbUVsZW1lbnQgPyBpbnRlcmltRWxlbWVudC5kZWZlcnJlZC5wcm9taXNlIDogJHEucmVqZWN0KHJlYXNvbik7XG4gICAgICB9XG5cblxuICAgICAgLypcbiAgICAgICAqIEludGVybmFsIEludGVyaW0gRWxlbWVudCBPYmplY3RcbiAgICAgICAqIFVzZWQgaW50ZXJuYWxseSB0byBtYW5hZ2UgdGhlIERPTSBlbGVtZW50IGFuZCByZWxhdGVkIGRhdGFcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gSW50ZXJpbUVsZW1lbnQob3B0aW9ucykge1xuICAgICAgICB2YXIgc2VsZjtcbiAgICAgICAgdmFyIGhpZGVUaW1lb3V0LCBlbGVtZW50O1xuXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe1xuICAgICAgICAgIHNjb3BlOiBvcHRpb25zLnNjb3BlIHx8ICRyb290U2NvcGUuJG5ldyhvcHRpb25zLmlzb2xhdGVTY29wZSksXG4gICAgICAgICAgb25TaG93OiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuICRhbmltYXRlLmVudGVyKGVsZW1lbnQsIG9wdGlvbnMucGFyZW50KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uUmVtb3ZlOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgLy8gRWxlbWVudCBjb3VsZCBiZSB1bmRlZmluZWQgaWYgYSBuZXcgZWxlbWVudCBpcyBzaG93biBiZWZvcmVcbiAgICAgICAgICAgIC8vIHRoZSBvbGQgb25lIGZpbmlzaGVzIGNvbXBpbGluZy5cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50ICYmICRhbmltYXRlLmxlYXZlKGVsZW1lbnQpIHx8ICRxLndoZW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9IHByb2Nlc3NUZW1wbGF0ZShvcHRpb25zLnRlbXBsYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWxmID0ge1xuICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgICAgZGVmZXJyZWQ6ICRxLmRlZmVyKCksXG4gICAgICAgICAgc2hvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJG1kQ29tcGlsZXIuY29tcGlsZShvcHRpb25zKS50aGVuKGZ1bmN0aW9uKGNvbXBpbGVEYXRhKSB7XG4gICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGNvbXBpbGVEYXRhLmxvY2Fscywgc2VsZi5vcHRpb25zKTtcblxuICAgICAgICAgICAgICAvLyBTZWFyY2ggZm9yIHBhcmVudCBhdCBpbnNlcnRpb24gdGltZSwgaWYgbm90IHNwZWNpZmllZFxuICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyhvcHRpb25zLnBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnBhcmVudCA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnRbMF0ucXVlcnlTZWxlY3RvcihvcHRpb25zLnBhcmVudCkpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFvcHRpb25zLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucGFyZW50ID0gJHJvb3RFbGVtZW50LmZpbmQoJ2JvZHknKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMucGFyZW50Lmxlbmd0aCkgb3B0aW9ucy5wYXJlbnQgPSAkcm9vdEVsZW1lbnQ7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBlbGVtZW50ID0gY29tcGlsZURhdGEubGluayhvcHRpb25zLnNjb3BlKTtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGhlbWFibGUpICRtZFRoZW1pbmcoZWxlbWVudCk7XG4gICAgICAgICAgICAgIHZhciByZXQgPSBvcHRpb25zLm9uU2hvdyhvcHRpb25zLnNjb3BlLCBlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgcmV0dXJuICRxLndoZW4ocmV0KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAvLyBJc3N1ZSBvbkNvbXBsZXRlIGNhbGxiYWNrIHdoZW4gdGhlIGBzaG93KClgIGZpbmlzaGVzXG4gICAgICAgICAgICAgICAgICAob3B0aW9ucy5vbkNvbXBsZXRlIHx8IGFuZ3VsYXIubm9vcCkob3B0aW9ucy5zY29wZSwgZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICBzdGFydEhpZGVUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgZnVuY3Rpb24gc3RhcnRIaWRlVGltZW91dCgpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5oaWRlRGVsYXkpIHtcbiAgICAgICAgICAgICAgICAgIGhpZGVUaW1lb3V0ID0gJHRpbWVvdXQoc2VydmljZS5jYW5jZWwsIG9wdGlvbnMuaGlkZURlbGF5KSA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNhbmNlbFRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGhpZGVUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbChoaWRlVGltZW91dCk7XG4gICAgICAgICAgICAgIGhpZGVUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuY2FuY2VsVGltZW91dCgpO1xuICAgICAgICAgICAgdmFyIHJldCA9IG9wdGlvbnMub25SZW1vdmUob3B0aW9ucy5zY29wZSwgZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gJHEud2hlbihyZXQpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMuc2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLypcbiAgICAgKiBSZXBsYWNlIGB7e2AgYW5kIGB9fWAgaW4gYSBzdHJpbmcgKHVzdWFsbHkgYSB0ZW1wbGF0ZSkgd2l0aCB0aGUgYWN0dWFsIHN0YXJ0LS9lbmRTeW1ib2xzIHVzZWRcbiAgICAgKiBmb3IgaW50ZXJwb2xhdGlvbi4gVGhpcyBhbGxvd3MgcHJlLWRlZmluZWQgdGVtcGxhdGVzIChmb3IgY29tcG9uZW50cyBzdWNoIGFzIGRpYWxvZywgdG9hc3QgZXRjKVxuICAgICAqIHRvIGNvbnRpbnVlIHRvIHdvcmsgaW4gYXBwcyB0aGF0IHVzZSBjdXN0b20gaW50ZXJwb2xhdGlvbiBzdGFydC0vZW5kU3ltYm9scy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IGluIHdoaWNoIHRvIHJlcGxhY2UgYHt7YCAvIGB9fWBcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgbW9kaWZpZWQgc3RyaW5nIHVzaW5nIHRoZSBhY3R1YWwgaW50ZXJwb2xhdGlvbiBzdGFydC0vZW5kU3ltYm9sc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlcGxhY2VJbnRlcnBvbGF0aW9uU3ltYm9scyh0ZXh0KSB7XG4gICAgICBpZiAoIXRleHQgfHwgIWFuZ3VsYXIuaXNTdHJpbmcodGV4dCkpIHJldHVybiB0ZXh0O1xuICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvXFx7XFx7L2csIHN0YXJ0U3ltYm9sKS5yZXBsYWNlKC99fS9nLCBlbmRTeW1ib2wpO1xuICAgIH1cbiAgfVxuXG59XG5cbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogQG5nZG9jIG1vZHVsZVxuICAgKiBAbmFtZSBtYXRlcmlhbC5jb3JlLmNvbXBvbmVudFJlZ2lzdHJ5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBBIGNvbXBvbmVudCBpbnN0YW5jZSByZWdpc3RyYXRpb24gc2VydmljZS5cbiAgICogTm90ZTogY3VycmVudGx5IHRoaXMgYXMgYSBwcml2YXRlIHNlcnZpY2UgaW4gdGhlIFNpZGVOYXYgY29tcG9uZW50LlxuICAgKi9cbiAgYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvcmUnKVxuICAgIC5mYWN0b3J5KCckbWRDb21wb25lbnRSZWdpc3RyeScsIENvbXBvbmVudFJlZ2lzdHJ5KTtcblxuICAvKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbmdkb2MgZmFjdG9yeVxuICAgKiBAbmFtZSBDb21wb25lbnRSZWdpc3RyeVxuICAgKiBAbW9kdWxlIG1hdGVyaWFsLmNvcmUuY29tcG9uZW50UmVnaXN0cnlcbiAgICpcbiAgICovXG4gIGZ1bmN0aW9uIENvbXBvbmVudFJlZ2lzdHJ5KCRsb2csICRxKSB7XG5cbiAgICB2YXIgc2VsZjtcbiAgICB2YXIgaW5zdGFuY2VzID0gWyBdO1xuICAgIHZhciBwZW5kaW5ncyA9IHsgfTtcblxuICAgIHJldHVybiBzZWxmID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIHByaW50IGFuIGVycm9yIHdoZW4gYW4gaW5zdGFuY2UgZm9yIGEgaGFuZGxlIGlzbid0IGZvdW5kLlxuICAgICAgICovXG4gICAgICBub3RGb3VuZEVycm9yOiBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgJGxvZy5lcnJvcignTm8gaW5zdGFuY2UgZm91bmQgZm9yIGhhbmRsZScsIGhhbmRsZSk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm4gYWxsIHJlZ2lzdGVyZWQgaW5zdGFuY2VzIGFzIGFuIGFycmF5LlxuICAgICAgICovXG4gICAgICBnZXRJbnN0YW5jZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaW5zdGFuY2VzO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgYSByZWdpc3RlcmVkIGluc3RhbmNlLlxuICAgICAgICogQHBhcmFtIGhhbmRsZSB0aGUgU3RyaW5nIGhhbmRsZSB0byBsb29rIHVwIGZvciBhIHJlZ2lzdGVyZWQgaW5zdGFuY2UuXG4gICAgICAgKi9cbiAgICAgIGdldDogZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgIGlmICggIWlzVmFsaWRJRChoYW5kbGUpICkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgdmFyIGksIGosIGluc3RhbmNlO1xuICAgICAgICBmb3IoaSA9IDAsIGogPSBpbnN0YW5jZXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgaW5zdGFuY2UgPSBpbnN0YW5jZXNbaV07XG4gICAgICAgICAgaWYoaW5zdGFuY2UuJCRtZEhhbmRsZSA9PT0gaGFuZGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBSZWdpc3RlciBhbiBpbnN0YW5jZS5cbiAgICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgaW5zdGFuY2UgdG8gcmVnaXN0ZXJcbiAgICAgICAqIEBwYXJhbSBoYW5kbGUgdGhlIGhhbmRsZSB0byBpZGVudGlmeSB0aGUgaW5zdGFuY2UgdW5kZXIuXG4gICAgICAgKi9cbiAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbihpbnN0YW5jZSwgaGFuZGxlKSB7XG4gICAgICAgIGlmICggIWhhbmRsZSApIHJldHVybiBhbmd1bGFyLm5vb3A7XG5cbiAgICAgICAgaW5zdGFuY2UuJCRtZEhhbmRsZSA9IGhhbmRsZTtcbiAgICAgICAgaW5zdGFuY2VzLnB1c2goaW5zdGFuY2UpO1xuICAgICAgICByZXNvbHZlV2hlbigpO1xuXG4gICAgICAgIHJldHVybiBkZXJlZ2lzdGVyO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmUgcmVnaXN0cmF0aW9uIGZvciBhbiBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGVyZWdpc3RlcigpIHtcbiAgICAgICAgICB2YXIgaW5kZXggPSBpbnN0YW5jZXMuaW5kZXhPZihpbnN0YW5jZSk7XG4gICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgaW5zdGFuY2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZXMgZm9yIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVXaGVuKCkge1xuICAgICAgICAgIHZhciBkZmQgPSBwZW5kaW5nc1toYW5kbGVdO1xuICAgICAgICAgIGlmICggZGZkICkge1xuICAgICAgICAgICAgZGZkLnJlc29sdmUoIGluc3RhbmNlICk7XG4gICAgICAgICAgICBkZWxldGUgcGVuZGluZ3NbaGFuZGxlXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQXN5bmMgYWNjZXNzb3IgdG8gcmVnaXN0ZXJlZCBjb21wb25lbnQgaW5zdGFuY2VcbiAgICAgICAqIElmIG5vdCBhdmFpbGFibGUgdGhlbiBhIHByb21pc2UgaXMgY3JlYXRlZCB0byBub3RpZnlcbiAgICAgICAqIGFsbCBsaXN0ZW5lcnMgd2hlbiB0aGUgaW5zdGFuY2UgaXMgcmVnaXN0ZXJlZC5cbiAgICAgICAqL1xuICAgICAgd2hlbiA6IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICBpZiAoIGlzVmFsaWRJRChoYW5kbGUpICkge1xuICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgdmFyIGluc3RhbmNlID0gc2VsZi5nZXQoaGFuZGxlKTtcblxuICAgICAgICAgIGlmICggaW5zdGFuY2UgKSAge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSggaW5zdGFuY2UgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGVuZGluZ3NbaGFuZGxlXSA9IGRlZmVycmVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoXCJJbnZhbGlkIGBtZC1jb21wb25lbnQtaWRgIHZhbHVlLlwiKTtcbiAgICAgIH1cblxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBpc1ZhbGlkSUQoaGFuZGxlKXtcbiAgICAgIHJldHVybiBoYW5kbGUgJiYgKGhhbmRsZSAhPT0gXCJcIik7XG4gICAgfVxuXG4gIH1cbiAgQ29tcG9uZW50UmVnaXN0cnkuJGluamVjdCA9IFtcIiRsb2dcIiwgXCIkcVwiXTtcblxuXG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29yZScpXG4gIC5mYWN0b3J5KCckbWRJbmtSaXBwbGUnLCBJbmtSaXBwbGVTZXJ2aWNlKVxuICAuZGlyZWN0aXZlKCdtZElua1JpcHBsZScsIElua1JpcHBsZURpcmVjdGl2ZSlcbiAgLmRpcmVjdGl2ZSgnbWROb0luaycsIGF0dHJOb0RpcmVjdGl2ZSgpKVxuICAuZGlyZWN0aXZlKCdtZE5vQmFyJywgYXR0ck5vRGlyZWN0aXZlKCkpXG4gIC5kaXJlY3RpdmUoJ21kTm9TdHJldGNoJywgYXR0ck5vRGlyZWN0aXZlKCkpO1xuXG5mdW5jdGlvbiBJbmtSaXBwbGVEaXJlY3RpdmUoJG1kSW5rUmlwcGxlKSB7XG4gIHJldHVybiB7XG4gICAgY29udHJvbGxlcjogYW5ndWxhci5ub29wLFxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgaWYgKGF0dHIuaGFzT3duUHJvcGVydHkoJ21kSW5rUmlwcGxlQ2hlY2tib3gnKSkge1xuICAgICAgICAkbWRJbmtSaXBwbGUuYXR0YWNoQ2hlY2tib3hCZWhhdmlvcihzY29wZSwgZWxlbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbWRJbmtSaXBwbGUuYXR0YWNoQnV0dG9uQmVoYXZpb3Ioc2NvcGUsIGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbklua1JpcHBsZURpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJG1kSW5rUmlwcGxlXCJdO1xuXG5mdW5jdGlvbiBJbmtSaXBwbGVTZXJ2aWNlKCR3aW5kb3csICR0aW1lb3V0KSB7XG5cbiAgcmV0dXJuIHtcbiAgICBhdHRhY2hCdXR0b25CZWhhdmlvcjogYXR0YWNoQnV0dG9uQmVoYXZpb3IsXG4gICAgYXR0YWNoQ2hlY2tib3hCZWhhdmlvcjogYXR0YWNoQ2hlY2tib3hCZWhhdmlvcixcbiAgICBhdHRhY2hUYWJCZWhhdmlvcjogYXR0YWNoVGFiQmVoYXZpb3IsXG4gICAgYXR0YWNoOiBhdHRhY2hcbiAgfTtcblxuICBmdW5jdGlvbiBhdHRhY2hCdXR0b25CZWhhdmlvcihzY29wZSwgZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHJldHVybiBhdHRhY2goc2NvcGUsIGVsZW1lbnQsIGFuZ3VsYXIuZXh0ZW5kKHtcbiAgICAgIGlzRkFCOiBlbGVtZW50Lmhhc0NsYXNzKCdtZC1mYWInKSxcbiAgICAgIGlzTWVudUl0ZW06IGVsZW1lbnQuaGFzQ2xhc3MoJ21kLW1lbnUtaXRlbScpLFxuICAgICAgY2VudGVyOiBmYWxzZSxcbiAgICAgIGRpbUJhY2tncm91bmQ6IHRydWVcbiAgICB9LCBvcHRpb25zKSk7XG4gIH1cblxuICBmdW5jdGlvbiBhdHRhY2hDaGVja2JveEJlaGF2aW9yKHNjb3BlLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGF0dGFjaChzY29wZSwgZWxlbWVudCwgYW5ndWxhci5leHRlbmQoe1xuICAgICAgY2VudGVyOiB0cnVlLFxuICAgICAgZGltQmFja2dyb3VuZDogZmFsc2UsXG4gICAgICBmaXRSaXBwbGU6IHRydWVcbiAgICB9LCBvcHRpb25zKSk7XG4gIH1cblxuICBmdW5jdGlvbiBhdHRhY2hUYWJCZWhhdmlvcihzY29wZSwgZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHJldHVybiBhdHRhY2goc2NvcGUsIGVsZW1lbnQsIGFuZ3VsYXIuZXh0ZW5kKHtcbiAgICAgIGNlbnRlcjogZmFsc2UsXG4gICAgICBkaW1CYWNrZ3JvdW5kOiB0cnVlLFxuICAgICAgb3V0bGluZTogdHJ1ZVxuICAgIH0sIG9wdGlvbnMpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGF0dGFjaChzY29wZSwgZWxlbWVudCwgb3B0aW9ucykge1xuICAgIGlmIChlbGVtZW50LmNvbnRyb2xsZXIoJ21kTm9JbmsnKSkgcmV0dXJuIGFuZ3VsYXIubm9vcDtcblxuICAgIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7XG4gICAgICBjb2xvckVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICBtb3VzZWRvd246IHRydWUsXG4gICAgICBob3ZlcjogdHJ1ZSxcbiAgICAgIGZvY3VzOiB0cnVlLFxuICAgICAgY2VudGVyOiBmYWxzZSxcbiAgICAgIG1vdXNlZG93blBhdXNlVGltZTogMTUwLFxuICAgICAgZGltQmFja2dyb3VuZDogZmFsc2UsXG4gICAgICBvdXRsaW5lOiBmYWxzZSxcbiAgICAgIGlzRkFCOiBmYWxzZSxcbiAgICAgIGlzTWVudUl0ZW06IGZhbHNlLFxuICAgICAgZml0UmlwcGxlOiBmYWxzZVxuICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgdmFyIHJpcHBsZVNpemUsXG4gICAgICAgIGNvbnRyb2xsZXIgPSBlbGVtZW50LmNvbnRyb2xsZXIoJ21kSW5rUmlwcGxlJykgfHwge30sXG4gICAgICAgIGNvdW50ZXIgPSAwLFxuICAgICAgICByaXBwbGVzID0gW10sXG4gICAgICAgIHN0YXRlcyA9IFtdLFxuICAgICAgICBpc0FjdGl2ZUV4cHIgPSBlbGVtZW50LmF0dHIoJ21kLWhpZ2hsaWdodCcpLFxuICAgICAgICBpc0FjdGl2ZSA9IGZhbHNlLFxuICAgICAgICBpc0hlbGQgPSBmYWxzZSxcbiAgICAgICAgbm9kZSA9IGVsZW1lbnRbMF0sXG4gICAgICAgIHJpcHBsZVNpemVTZXR0aW5nID0gZWxlbWVudC5hdHRyKCdtZC1yaXBwbGUtc2l6ZScpLFxuICAgICAgICBjb2xvciA9IHBhcnNlQ29sb3IoZWxlbWVudC5hdHRyKCdtZC1pbmstcmlwcGxlJykpIHx8IHBhcnNlQ29sb3IoJHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG9wdGlvbnMuY29sb3JFbGVtZW50WzBdKS5jb2xvciB8fCAncmdiKDAsIDAsIDApJyk7XG5cbiAgICBzd2l0Y2ggKHJpcHBsZVNpemVTZXR0aW5nKSB7XG4gICAgICBjYXNlICdmdWxsJzpcbiAgICAgICAgb3B0aW9ucy5pc0ZBQiA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGFydGlhbCc6XG4gICAgICAgIG9wdGlvbnMuaXNGQUIgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gZXhwb3NlIG9uSW5wdXQgZm9yIHJpcHBsZSB0ZXN0aW5nXG4gICAgaWYgKG9wdGlvbnMubW91c2Vkb3duKSB7XG4gICAgICBlbGVtZW50Lm9uKCckbWQucHJlc3Nkb3duJywgb25QcmVzc0Rvd24pXG4gICAgICAgIC5vbignJG1kLnByZXNzdXAnLCBvblByZXNzVXApO1xuICAgIH1cblxuICAgIGNvbnRyb2xsZXIuY3JlYXRlUmlwcGxlID0gY3JlYXRlUmlwcGxlO1xuXG4gICAgaWYgKGlzQWN0aXZlRXhwcikge1xuICAgICAgc2NvcGUuJHdhdGNoKGlzQWN0aXZlRXhwciwgZnVuY3Rpb24gd2F0Y2hBY3RpdmUobmV3VmFsdWUpIHtcbiAgICAgICAgaXNBY3RpdmUgPSBuZXdWYWx1ZTtcbiAgICAgICAgaWYgKGlzQWN0aXZlICYmICFyaXBwbGVzLmxlbmd0aCkge1xuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsgY3JlYXRlUmlwcGxlKDAsIDApOyB9LCAwLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJpcHBsZXMsIHVwZGF0ZUVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUHVibGlzaCBzZWxmLWRldGFjaCBtZXRob2QgaWYgZGVzaXJlZC4uLlxuICAgIHJldHVybiBmdW5jdGlvbiBkZXRhY2goKSB7XG4gICAgICBlbGVtZW50Lm9mZignJG1kLnByZXNzZG93bicsIG9uUHJlc3NEb3duKVxuICAgICAgICAub2ZmKCckbWQucHJlc3N1cCcsIG9uUHJlc3NVcCk7XG4gICAgICBnZXRSaXBwbGVDb250YWluZXIoKS5yZW1vdmUoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY3VycmVudCByaXBwbGUgY29udGFpbmVyXG4gICAgICogSWYgdGhlcmUgaXMgbm8gcmlwcGxlIGNvbnRhaW5lciwgaXQgY3JlYXRlcyBvbmUgYW5kIHJldHVybnMgaXRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHthbmd1bGFyLmVsZW1lbnR9IHJpcHBsZSBjb250YWluZXIgZWxlbWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFJpcHBsZUNvbnRhaW5lcigpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50LmRhdGEoJyRtZFJpcHBsZUNvbnRhaW5lcicpO1xuICAgICAgaWYgKGNvbnRhaW5lcikgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICAgIGNvbnRhaW5lciA9IGFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cIm1kLXJpcHBsZS1jb250YWluZXJcIj4nKTtcbiAgICAgIGVsZW1lbnQuYXBwZW5kKGNvbnRhaW5lcik7XG4gICAgICBlbGVtZW50LmRhdGEoJyRtZFJpcHBsZUNvbnRhaW5lcicsIGNvbnRhaW5lcik7XG4gICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQ29sb3IoY29sb3IpIHtcbiAgICAgIGlmICghY29sb3IpIHJldHVybjtcbiAgICAgIGlmIChjb2xvci5pbmRleE9mKCdyZ2JhJykgPT09IDApIHJldHVybiBjb2xvci5yZXBsYWNlKC9cXGQ/XFwuP1xcZCpcXHMqXFwpXFxzKiQvLCAnMC4xKScpO1xuICAgICAgaWYgKGNvbG9yLmluZGV4T2YoJ3JnYicpICA9PT0gMCkgcmV0dXJuIHJnYlRvUkdCQShjb2xvcik7XG4gICAgICBpZiAoY29sb3IuaW5kZXhPZignIycpICAgID09PSAwKSByZXR1cm4gaGV4VG9SR0JBKGNvbG9yKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBDb252ZXJ0cyBhIGhleCB2YWx1ZSB0byBhbiByZ2JhIHN0cmluZ1xuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBoZXggdmFsdWUgKDMgb3IgNiBkaWdpdHMpIHRvIGJlIGNvbnZlcnRlZFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHJnYmEgY29sb3Igd2l0aCAwLjEgYWxwaGFcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gaGV4VG9SR0JBKGNvbG9yKSB7XG4gICAgICAgIHZhciBoZXggPSBjb2xvci5jaGFyQXQoMCkgPT09ICcjJyA/IGNvbG9yLnN1YnN0cigxKSA6IGNvbG9yLFxuICAgICAgICAgIGRpZyA9IGhleC5sZW5ndGggLyAzLFxuICAgICAgICAgIHJlZCA9IGhleC5zdWJzdHIoMCwgZGlnKSxcbiAgICAgICAgICBncm4gPSBoZXguc3Vic3RyKGRpZywgZGlnKSxcbiAgICAgICAgICBibHUgPSBoZXguc3Vic3RyKGRpZyAqIDIpO1xuICAgICAgICBpZiAoZGlnID09PSAxKSB7XG4gICAgICAgICAgcmVkICs9IHJlZDtcbiAgICAgICAgICBncm4gKz0gZ3JuO1xuICAgICAgICAgIGJsdSArPSBibHU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdyZ2JhKCcgKyBwYXJzZUludChyZWQsIDE2KSArICcsJyArIHBhcnNlSW50KGdybiwgMTYpICsgJywnICsgcGFyc2VJbnQoYmx1LCAxNikgKyAnLDAuMSknO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENvbnZlcnRzIHJnYiB2YWx1ZSB0byByZ2JhIHN0cmluZ1xuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZ2IgY29sb3Igc3RyaW5nXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge3N0cmluZ30gcmdiYSBjb2xvciB3aXRoIDAuMSBhbHBoYVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZ2JUb1JHQkEoY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yLnJlcGxhY2UoJyknLCAnLCAwLjEpJykucmVwbGFjZSgnKCcsICdhKCcpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudChlbGVtLCB3YWl0KSB7XG4gICAgICByaXBwbGVzLnNwbGljZShyaXBwbGVzLmluZGV4T2YoZWxlbSksIDEpO1xuICAgICAgaWYgKHJpcHBsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGdldFJpcHBsZUNvbnRhaW5lcigpLmNzcyh7IGJhY2tncm91bmRDb2xvcjogJycgfSk7XG4gICAgICB9XG4gICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7IGVsZW0ucmVtb3ZlKCk7IH0sIHdhaXQsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVFbGVtZW50KGVsZW0pIHtcbiAgICAgIHZhciBpbmRleCA9IHJpcHBsZXMuaW5kZXhPZihlbGVtKSxcbiAgICAgICAgICBzdGF0ZSA9IHN0YXRlc1tpbmRleF0gfHwge30sXG4gICAgICAgICAgZWxlbUlzQWN0aXZlID0gcmlwcGxlcy5sZW5ndGggPiAxID8gZmFsc2UgOiBpc0FjdGl2ZSxcbiAgICAgICAgICBlbGVtSXNIZWxkICAgPSByaXBwbGVzLmxlbmd0aCA+IDEgPyBmYWxzZSA6IGlzSGVsZDtcbiAgICAgIGlmIChlbGVtSXNBY3RpdmUgfHwgc3RhdGUuYW5pbWF0aW5nIHx8IGVsZW1Jc0hlbGQpIHtcbiAgICAgICAgZWxlbS5hZGRDbGFzcygnbWQtcmlwcGxlLXZpc2libGUnKTtcbiAgICAgIH0gZWxzZSBpZiAoZWxlbSkge1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtZC1yaXBwbGUtdmlzaWJsZScpO1xuICAgICAgICBpZiAob3B0aW9ucy5vdXRsaW5lKSB7XG4gICAgICAgICAgZWxlbS5jc3Moe1xuICAgICAgICAgICAgd2lkdGg6IHJpcHBsZVNpemUgKyAncHgnLFxuICAgICAgICAgICAgaGVpZ2h0OiByaXBwbGVTaXplICsgJ3B4JyxcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6IChyaXBwbGVTaXplICogLTEpICsgJ3B4JyxcbiAgICAgICAgICAgIG1hcmdpblRvcDogKHJpcHBsZVNpemUgKiAtMSkgKyAncHgnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlRWxlbWVudChlbGVtLCBvcHRpb25zLm91dGxpbmUgPyA0NTAgOiA2NTApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByaXBwbGUgYXQgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVmdCBjdXJzb3IgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9wIGN1cnNvciBwb3NpdGlvblxuICAgICAqXG4gICAgICogQHJldHVybnMge2FuZ3VsYXIuZWxlbWVudH0gdGhlIGdlbmVyYXRlZCByaXBwbGUgZWxlbWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVJpcHBsZShsZWZ0LCB0b3ApIHtcblxuICAgICAgY29sb3IgPSBwYXJzZUNvbG9yKGVsZW1lbnQuYXR0cignbWQtaW5rLXJpcHBsZScpKSB8fCBwYXJzZUNvbG9yKCR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShvcHRpb25zLmNvbG9yRWxlbWVudFswXSkuY29sb3IgfHwgJ3JnYigwLCAwLCAwKScpO1xuXG4gICAgICB2YXIgY29udGFpbmVyID0gZ2V0UmlwcGxlQ29udGFpbmVyKCksXG4gICAgICAgICAgc2l6ZSA9IGdldFJpcHBsZVNpemUobGVmdCwgdG9wKSxcbiAgICAgICAgICBjc3MgPSBnZXRSaXBwbGVDc3Moc2l6ZSwgbGVmdCwgdG9wKSxcbiAgICAgICAgICBlbGVtID0gZ2V0UmlwcGxlRWxlbWVudChjc3MpLFxuICAgICAgICAgIGluZGV4ID0gcmlwcGxlcy5pbmRleE9mKGVsZW0pLFxuICAgICAgICAgIHN0YXRlID0gc3RhdGVzW2luZGV4XSB8fCB7fTtcblxuICAgICAgcmlwcGxlU2l6ZSA9IHNpemU7XG5cbiAgICAgIHN0YXRlLmFuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGltQmFja2dyb3VuZCkge1xuICAgICAgICAgIGNvbnRhaW5lci5jc3MoeyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsZW0uYWRkQ2xhc3MoJ21kLXJpcHBsZS1wbGFjZWQgbWQtcmlwcGxlLXNjYWxlZCcpO1xuICAgICAgICBpZiAob3B0aW9ucy5vdXRsaW5lKSB7XG4gICAgICAgICAgZWxlbS5jc3Moe1xuICAgICAgICAgICAgYm9yZGVyV2lkdGg6IChzaXplICogMC41KSArICdweCcsXG4gICAgICAgICAgICBtYXJnaW5MZWZ0OiAoc2l6ZSAqIC0wLjUpICsgJ3B4JyxcbiAgICAgICAgICAgIG1hcmdpblRvcDogKHNpemUgKiAtMC41KSArICdweCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtLmNzcyh7IGxlZnQ6ICc1MCUnLCB0b3A6ICc1MCUnIH0pO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUVsZW1lbnQoZWxlbSk7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzdGF0ZS5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB1cGRhdGVFbGVtZW50KGVsZW0pO1xuICAgICAgICB9LCAob3B0aW9ucy5vdXRsaW5lID8gNDUwIDogMjI1KSwgZmFsc2UpO1xuICAgICAgfSwgMCwgZmFsc2UpO1xuXG4gICAgICByZXR1cm4gZWxlbTtcblxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIHRoZSByaXBwbGUgZWxlbWVudCB3aXRoIHRoZSBwcm92aWRlZCBjc3NcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge29iamVjdH0gY3NzIHByb3BlcnRpZXMgdG8gYmUgYXBwbGllZFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHthbmd1bGFyLmVsZW1lbnR9IHRoZSBnZW5lcmF0ZWQgcmlwcGxlIGVsZW1lbnRcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZ2V0UmlwcGxlRWxlbWVudChjc3MpIHtcbiAgICAgICAgdmFyIGVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJtZC1yaXBwbGVcIiBkYXRhLWNvdW50ZXI9XCInICsgY291bnRlcisrICsgJ1wiPicpO1xuICAgICAgICByaXBwbGVzLnVuc2hpZnQoZWxlbSk7XG4gICAgICAgIHN0YXRlcy51bnNoaWZ0KHsgYW5pbWF0aW5nOiB0cnVlIH0pO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kKGVsZW0pO1xuICAgICAgICBjc3MgJiYgZWxlbS5jc3MoY3NzKTtcbiAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2FsY3VsYXRlIHRoZSByaXBwbGUgc2l6ZVxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IGNhbGN1bGF0ZWQgcmlwcGxlIGRpYW1ldGVyXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGdldFJpcHBsZVNpemUobGVmdCwgdG9wKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IGNvbnRhaW5lci5wcm9wKCdvZmZzZXRXaWR0aCcpLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY29udGFpbmVyLnByb3AoJ29mZnNldEhlaWdodCcpLFxuICAgICAgICAgICAgbXVsdGlwbGllciwgc2l6ZSwgcmVjdDtcbiAgICAgICAgaWYgKG9wdGlvbnMuaXNNZW51SXRlbSkge1xuICAgICAgICAgIHNpemUgPSBNYXRoLnNxcnQoTWF0aC5wb3cod2lkdGgsIDIpICsgTWF0aC5wb3coaGVpZ2h0LCAyKSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5vdXRsaW5lKSB7XG4gICAgICAgICAgcmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgbGVmdCAtPSByZWN0LmxlZnQ7XG4gICAgICAgICAgdG9wIC09IHJlY3QudG9wO1xuICAgICAgICAgIHdpZHRoID0gTWF0aC5tYXgobGVmdCwgd2lkdGggLSBsZWZ0KTtcbiAgICAgICAgICBoZWlnaHQgPSBNYXRoLm1heCh0b3AsIGhlaWdodCAtIHRvcCk7XG4gICAgICAgICAgc2l6ZSA9IDIgKiBNYXRoLnNxcnQoTWF0aC5wb3cod2lkdGgsIDIpICsgTWF0aC5wb3coaGVpZ2h0LCAyKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbXVsdGlwbGllciA9IG9wdGlvbnMuaXNGQUIgPyAxLjEgOiAwLjg7XG4gICAgICAgICAgc2l6ZSA9IE1hdGguc3FydChNYXRoLnBvdyh3aWR0aCwgMikgKyBNYXRoLnBvdyhoZWlnaHQsIDIpKSAqIG11bHRpcGxpZXI7XG4gICAgICAgICAgaWYgKG9wdGlvbnMuZml0UmlwcGxlKSB7XG4gICAgICAgICAgICBzaXplID0gTWF0aC5taW4oaGVpZ2h0LCB3aWR0aCwgc2l6ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdlbmVyYXRlcyB0aGUgcmlwcGxlIGNzc1xuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aGUgZGlhbWV0ZXIgb2YgdGhlIHJpcHBsZVxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHRoZSBsZWZ0IGN1cnNvciBvZmZzZXRcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aGUgdG9wIGN1cnNvciBvZmZzZXRcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyB7e2JhY2tncm91bmRDb2xvcjogKiwgd2lkdGg6IHN0cmluZywgaGVpZ2h0OiBzdHJpbmcsIG1hcmdpbkxlZnQ6IHN0cmluZywgbWFyZ2luVG9wOiBzdHJpbmd9fVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBnZXRSaXBwbGVDc3Moc2l6ZSwgbGVmdCwgdG9wKSB7XG4gICAgICAgIHZhciByZWN0LFxuICAgICAgICAgICAgY3NzID0ge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHJnYmFUb1JHQihjb2xvciksXG4gICAgICAgICAgICAgIGJvcmRlckNvbG9yOiByZ2JhVG9SR0IoY29sb3IpLFxuICAgICAgICAgICAgICB3aWR0aDogc2l6ZSArICdweCcsXG4gICAgICAgICAgICAgIGhlaWdodDogc2l6ZSArICdweCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgaWYgKG9wdGlvbnMub3V0bGluZSkge1xuICAgICAgICAgIGNzcy53aWR0aCA9IDA7XG4gICAgICAgICAgY3NzLmhlaWdodCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3NzLm1hcmdpbkxlZnQgPSBjc3MubWFyZ2luVG9wID0gKHNpemUgKiAtMC41KSArICdweCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5jZW50ZXIpIHtcbiAgICAgICAgICBjc3MubGVmdCA9IGNzcy50b3AgPSAnNTAlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICBjc3MubGVmdCA9IE1hdGgucm91bmQoKGxlZnQgLSByZWN0LmxlZnQpIC8gY29udGFpbmVyLnByb3AoJ29mZnNldFdpZHRoJykgKiAxMDApICsgJyUnO1xuICAgICAgICAgIGNzcy50b3AgPSBNYXRoLnJvdW5kKCh0b3AgLSByZWN0LnRvcCkgLyBjb250YWluZXIucHJvcCgnb2Zmc2V0SGVpZ2h0JykgKiAxMDApICsgJyUnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNzcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydHMgcmdiYSBzdHJpbmcgdG8gcmdiLCByZW1vdmluZyB0aGUgYWxwaGEgdmFsdWVcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJnYmEgY29sb3JcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gcmdiIGNvbG9yXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiByZ2JhVG9SR0IoY29sb3IpIHtcbiAgICAgICAgICByZXR1cm4gY29sb3IucmVwbGFjZSgncmdiYScsICdyZ2InKS5yZXBsYWNlKC8sW15cXClcXCxdK1xcKS8sICcpJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHVzZXIgaW5wdXQgc3RhcnQgYW5kIHN0b3AgZXZlbnRzXG4gICAgICpcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvblByZXNzRG93bihldikge1xuICAgICAgaWYgKCFpc1JpcHBsZUFsbG93ZWQoKSkgcmV0dXJuO1xuXG4gICAgICB2YXIgcmlwcGxlID0gY3JlYXRlUmlwcGxlKGV2LnBvaW50ZXIueCwgZXYucG9pbnRlci55KTtcbiAgICAgIGlzSGVsZCA9IHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uUHJlc3NVcChldikge1xuICAgICAgaXNIZWxkID0gZmFsc2U7XG4gICAgICB2YXIgcmlwcGxlID0gcmlwcGxlc1sgcmlwcGxlcy5sZW5ndGggLSAxIF07XG4gICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7IHVwZGF0ZUVsZW1lbnQocmlwcGxlKTsgfSwgMCwgZmFsc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhlIHJpcHBsZSBpcyBhbGxvd2VkXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgcmlwcGxlIGlzIGFsbG93ZWQsIGZhbHNlIGlmIG5vdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzUmlwcGxlQWxsb3dlZCgpIHtcbiAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICB2YXIgZ3JhbmRwYXJlbnQgPSBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGU7XG4gICAgICB2YXIgYW5jZXN0b3IgPSBncmFuZHBhcmVudCAmJiBncmFuZHBhcmVudC5wYXJlbnROb2RlO1xuICAgICAgcmV0dXJuICFpc0Rpc2FibGVkKG5vZGUpICYmICFpc0Rpc2FibGVkKHBhcmVudCkgJiYgIWlzRGlzYWJsZWQoZ3JhbmRwYXJlbnQpICYmICFpc0Rpc2FibGVkKGFuY2VzdG9yKTtcbiAgICAgIGZ1bmN0aW9uIGlzRGlzYWJsZWQgKGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIGVsZW0gJiYgZWxlbS5oYXNBdHRyaWJ1dGUgJiYgZWxlbS5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cbn1cbklua1JpcHBsZVNlcnZpY2UuJGluamVjdCA9IFtcIiR3aW5kb3dcIiwgXCIkdGltZW91dFwiXTtcblxuLyoqXG4gKiBub2luay9ub2Jhci9ub3N0cmV0Y2ggZGlyZWN0aXZlOiBtYWtlIGFueSBlbGVtZW50IHRoYXQgaGFzIG9uZSBvZlxuICogdGhlc2UgYXR0cmlidXRlcyBiZSBnaXZlbiBhIGNvbnRyb2xsZXIsIHNvIHRoYXQgb3RoZXIgZGlyZWN0aXZlcyBjYW5cbiAqIGByZXF1aXJlOmAgdGhlc2UgYW5kIHNlZSBpZiB0aGVyZSBpcyBhIGBubzx4eHg+YCBwYXJlbnQgYXR0cmlidXRlLlxuICpcbiAqIEB1c2FnZVxuICogPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqIDxwYXJlbnQgbWQtbm8taW5rPlxuICogICA8Y2hpbGQgZGV0ZWN0LW5vPlxuICogICA8L2NoaWxkPlxuICogPC9wYXJlbnQ+XG4gKiA8L2hsanM+XG4gKlxuICogPGhsanMgbGFuZz1cImpzXCI+XG4gKiBteUFwcC5kaXJlY3RpdmUoJ2RldGVjdE5vJywgZnVuY3Rpb24oKSB7XG4gKiAgIHJldHVybiB7XG4gKiAgICAgcmVxdWlyZTogWydeP21kTm9JbmsnLCBeP21kTm9CYXInXSxcbiAqICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAqICAgICAgIHZhciBub2lua0N0cmwgPSBjdHJsc1swXTtcbiAqICAgICAgIHZhciBub2JhckN0cmwgPSBjdHJsc1sxXTtcbiAqICAgICAgIGlmIChub0lua0N0cmwpIHtcbiAqICAgICAgICAgYWxlcnQoXCJ0aGUgbWQtbm8taW5rIGZsYWcgaGFzIGJlZW4gc3BlY2lmaWVkIG9uIGFuIGFuY2VzdG9yIVwiKTtcbiAqICAgICAgIH1cbiAqICAgICAgIGlmIChub2JhckN0cmwpIHtcbiAqICAgICAgICAgYWxlcnQoXCJ0aGUgbWQtbm8tYmFyIGZsYWcgaGFzIGJlZW4gc3BlY2lmaWVkIG9uIGFuIGFuY2VzdG9yIVwiKTtcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiAgIH07XG4gKiB9KTtcbiAqIDwvaGxqcz5cbiAqL1xuZnVuY3Rpb24gYXR0ck5vRGlyZWN0aXZlKCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xsZXI6IGFuZ3VsYXIubm9vcFxuICAgIH07XG4gIH07XG59XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29yZS50aGVtaW5nLnBhbGV0dGUnLCBbXSlcbi5jb25zdGFudCgnJG1kQ29sb3JQYWxldHRlJywge1xuICAncmVkJzoge1xuICAgICc1MCc6ICcjZmZlYmVlJyxcbiAgICAnMTAwJzogJyNmZmNkZDInLFxuICAgICcyMDAnOiAnI2VmOWE5YScsXG4gICAgJzMwMCc6ICcjZTU3MzczJyxcbiAgICAnNDAwJzogJyNlZjUzNTAnLFxuICAgICc1MDAnOiAnI2Y0NDMzNicsXG4gICAgJzYwMCc6ICcjZTUzOTM1JyxcbiAgICAnNzAwJzogJyNkMzJmMmYnLFxuICAgICc4MDAnOiAnI2M2MjgyOCcsXG4gICAgJzkwMCc6ICcjYjcxYzFjJyxcbiAgICAnQTEwMCc6ICcjZmY4YTgwJyxcbiAgICAnQTIwMCc6ICcjZmY1MjUyJyxcbiAgICAnQTQwMCc6ICcjZmYxNzQ0JyxcbiAgICAnQTcwMCc6ICcjZDUwMDAwJyxcbiAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnbGlnaHQnLFxuICAgICdjb250cmFzdERhcmtDb2xvcnMnOiAnNTAgMTAwIDIwMCAzMDAgNDAwIEExMDAnLFxuICAgICdjb250cmFzdFN0cm9uZ0xpZ2h0Q29sb3JzJzogJzUwMCA2MDAgNzAwIEEyMDAgQTQwMCBBNzAwJ1xuICB9LFxuICAncGluayc6IHtcbiAgICAnNTAnOiAnI2ZjZTRlYycsXG4gICAgJzEwMCc6ICcjZjhiYmQwJyxcbiAgICAnMjAwJzogJyNmNDhmYjEnLFxuICAgICczMDAnOiAnI2YwNjI5MicsXG4gICAgJzQwMCc6ICcjZWM0MDdhJyxcbiAgICAnNTAwJzogJyNlOTFlNjMnLFxuICAgICc2MDAnOiAnI2Q4MWI2MCcsXG4gICAgJzcwMCc6ICcjYzIxODViJyxcbiAgICAnODAwJzogJyNhZDE0NTcnLFxuICAgICc5MDAnOiAnIzg4MGU0ZicsXG4gICAgJ0ExMDAnOiAnI2ZmODBhYicsXG4gICAgJ0EyMDAnOiAnI2ZmNDA4MScsXG4gICAgJ0E0MDAnOiAnI2Y1MDA1NycsXG4gICAgJ0E3MDAnOiAnI2M1MTE2MicsXG4gICAgJ2NvbnRyYXN0RGVmYXVsdENvbG9yJzogJ2xpZ2h0JyxcbiAgICAnY29udHJhc3REYXJrQ29sb3JzJzogJzUwIDEwMCAyMDAgMzAwIDQwMCBBMTAwJyxcbiAgICAnY29udHJhc3RTdHJvbmdMaWdodENvbG9ycyc6ICc1MDAgNjAwIEEyMDAgQTQwMCBBNzAwJ1xuICB9LFxuICAncHVycGxlJzoge1xuICAgICc1MCc6ICcjZjNlNWY1JyxcbiAgICAnMTAwJzogJyNlMWJlZTcnLFxuICAgICcyMDAnOiAnI2NlOTNkOCcsXG4gICAgJzMwMCc6ICcjYmE2OGM4JyxcbiAgICAnNDAwJzogJyNhYjQ3YmMnLFxuICAgICc1MDAnOiAnIzljMjdiMCcsXG4gICAgJzYwMCc6ICcjOGUyNGFhJyxcbiAgICAnNzAwJzogJyM3YjFmYTInLFxuICAgICc4MDAnOiAnIzZhMWI5YScsXG4gICAgJzkwMCc6ICcjNGExNDhjJyxcbiAgICAnQTEwMCc6ICcjZWE4MGZjJyxcbiAgICAnQTIwMCc6ICcjZTA0MGZiJyxcbiAgICAnQTQwMCc6ICcjZDUwMGY5JyxcbiAgICAnQTcwMCc6ICcjYWEwMGZmJyxcbiAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnbGlnaHQnLFxuICAgICdjb250cmFzdERhcmtDb2xvcnMnOiAnNTAgMTAwIDIwMCBBMTAwJyxcbiAgICAnY29udHJhc3RTdHJvbmdMaWdodENvbG9ycyc6ICczMDAgNDAwIEEyMDAgQTQwMCBBNzAwJ1xuICB9LFxuICAnZGVlcC1wdXJwbGUnOiB7XG4gICAgJzUwJzogJyNlZGU3ZjYnLFxuICAgICcxMDAnOiAnI2QxYzRlOScsXG4gICAgJzIwMCc6ICcjYjM5ZGRiJyxcbiAgICAnMzAwJzogJyM5NTc1Y2QnLFxuICAgICc0MDAnOiAnIzdlNTdjMicsXG4gICAgJzUwMCc6ICcjNjczYWI3JyxcbiAgICAnNjAwJzogJyM1ZTM1YjEnLFxuICAgICc3MDAnOiAnIzUxMmRhOCcsXG4gICAgJzgwMCc6ICcjNDUyN2EwJyxcbiAgICAnOTAwJzogJyMzMTFiOTInLFxuICAgICdBMTAwJzogJyNiMzg4ZmYnLFxuICAgICdBMjAwJzogJyM3YzRkZmYnLFxuICAgICdBNDAwJzogJyM2NTFmZmYnLFxuICAgICdBNzAwJzogJyM2MjAwZWEnLFxuICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsXG4gICAgJ2NvbnRyYXN0RGFya0NvbG9ycyc6ICc1MCAxMDAgMjAwIEExMDAnLFxuICAgICdjb250cmFzdFN0cm9uZ0xpZ2h0Q29sb3JzJzogJzMwMCA0MDAgQTIwMCdcbiAgfSxcbiAgJ2luZGlnbyc6IHtcbiAgICAnNTAnOiAnI2U4ZWFmNicsXG4gICAgJzEwMCc6ICcjYzVjYWU5JyxcbiAgICAnMjAwJzogJyM5ZmE4ZGEnLFxuICAgICczMDAnOiAnIzc5ODZjYicsXG4gICAgJzQwMCc6ICcjNWM2YmMwJyxcbiAgICAnNTAwJzogJyMzZjUxYjUnLFxuICAgICc2MDAnOiAnIzM5NDlhYicsXG4gICAgJzcwMCc6ICcjMzAzZjlmJyxcbiAgICAnODAwJzogJyMyODM1OTMnLFxuICAgICc5MDAnOiAnIzFhMjM3ZScsXG4gICAgJ0ExMDAnOiAnIzhjOWVmZicsXG4gICAgJ0EyMDAnOiAnIzUzNmRmZScsXG4gICAgJ0E0MDAnOiAnIzNkNWFmZScsXG4gICAgJ0E3MDAnOiAnIzMwNGZmZScsXG4gICAgJ2NvbnRyYXN0RGVmYXVsdENvbG9yJzogJ2xpZ2h0JyxcbiAgICAnY29udHJhc3REYXJrQ29sb3JzJzogJzUwIDEwMCAyMDAgQTEwMCcsXG4gICAgJ2NvbnRyYXN0U3Ryb25nTGlnaHRDb2xvcnMnOiAnMzAwIDQwMCBBMjAwIEE0MDAnXG4gIH0sXG4gICdibHVlJzoge1xuICAgICc1MCc6ICcjZTNmMmZkJyxcbiAgICAnMTAwJzogJyNiYmRlZmInLFxuICAgICcyMDAnOiAnIzkwY2FmOScsXG4gICAgJzMwMCc6ICcjNjRiNWY2JyxcbiAgICAnNDAwJzogJyM0MmE1ZjUnLFxuICAgICc1MDAnOiAnIzIxOTZmMycsXG4gICAgJzYwMCc6ICcjMWU4OGU1JyxcbiAgICAnNzAwJzogJyMxOTc2ZDInLFxuICAgICc4MDAnOiAnIzE1NjVjMCcsXG4gICAgJzkwMCc6ICcjMGQ0N2ExJyxcbiAgICAnQTEwMCc6ICcjODJiMWZmJyxcbiAgICAnQTIwMCc6ICcjNDQ4YWZmJyxcbiAgICAnQTQwMCc6ICcjMjk3OWZmJyxcbiAgICAnQTcwMCc6ICcjMjk2MmZmJyxcbiAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnbGlnaHQnLFxuICAgICdjb250cmFzdERhcmtDb2xvcnMnOiAnMTAwIDIwMCAzMDAgNDAwIEExMDAnLFxuICAgICdjb250cmFzdFN0cm9uZ0xpZ2h0Q29sb3JzJzogJzUwMCA2MDAgNzAwIEEyMDAgQTQwMCBBNzAwJ1xuICB9LFxuICAnbGlnaHQtYmx1ZSc6IHtcbiAgICAnNTAnOiAnI2UxZjVmZScsXG4gICAgJzEwMCc6ICcjYjNlNWZjJyxcbiAgICAnMjAwJzogJyM4MWQ0ZmEnLFxuICAgICczMDAnOiAnIzRmYzNmNycsXG4gICAgJzQwMCc6ICcjMjliNmY2JyxcbiAgICAnNTAwJzogJyMwM2E5ZjQnLFxuICAgICc2MDAnOiAnIzAzOWJlNScsXG4gICAgJzcwMCc6ICcjMDI4OGQxJyxcbiAgICAnODAwJzogJyMwMjc3YmQnLFxuICAgICc5MDAnOiAnIzAxNTc5YicsXG4gICAgJ0ExMDAnOiAnIzgwZDhmZicsXG4gICAgJ0EyMDAnOiAnIzQwYzRmZicsXG4gICAgJ0E0MDAnOiAnIzAwYjBmZicsXG4gICAgJ0E3MDAnOiAnIzAwOTFlYScsXG4gICAgJ2NvbnRyYXN0RGVmYXVsdENvbG9yJzogJ2RhcmsnLFxuICAgICdjb250cmFzdExpZ2h0Q29sb3JzJzogJzUwMCA2MDAgNzAwIDgwMCA5MDAgQTcwMCcsXG4gICAgJ2NvbnRyYXN0U3Ryb25nTGlnaHRDb2xvcnMnOiAnNTAwIDYwMCA3MDAgODAwIEE3MDAnXG4gIH0sXG4gICdjeWFuJzoge1xuICAgICc1MCc6ICcjZTBmN2ZhJyxcbiAgICAnMTAwJzogJyNiMmViZjInLFxuICAgICcyMDAnOiAnIzgwZGVlYScsXG4gICAgJzMwMCc6ICcjNGRkMGUxJyxcbiAgICAnNDAwJzogJyMyNmM2ZGEnLFxuICAgICc1MDAnOiAnIzAwYmNkNCcsXG4gICAgJzYwMCc6ICcjMDBhY2MxJyxcbiAgICAnNzAwJzogJyMwMDk3YTcnLFxuICAgICc4MDAnOiAnIzAwODM4ZicsXG4gICAgJzkwMCc6ICcjMDA2MDY0JyxcbiAgICAnQTEwMCc6ICcjODRmZmZmJyxcbiAgICAnQTIwMCc6ICcjMThmZmZmJyxcbiAgICAnQTQwMCc6ICcjMDBlNWZmJyxcbiAgICAnQTcwMCc6ICcjMDBiOGQ0JyxcbiAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnZGFyaycsXG4gICAgJ2NvbnRyYXN0TGlnaHRDb2xvcnMnOiAnNTAwIDYwMCA3MDAgODAwIDkwMCcsXG4gICAgJ2NvbnRyYXN0U3Ryb25nTGlnaHRDb2xvcnMnOiAnNTAwIDYwMCA3MDAgODAwJ1xuICB9LFxuICAndGVhbCc6IHtcbiAgICAnNTAnOiAnI2UwZjJmMScsXG4gICAgJzEwMCc6ICcjYjJkZmRiJyxcbiAgICAnMjAwJzogJyM4MGNiYzQnLFxuICAgICczMDAnOiAnIzRkYjZhYycsXG4gICAgJzQwMCc6ICcjMjZhNjlhJyxcbiAgICAnNTAwJzogJyMwMDk2ODgnLFxuICAgICc2MDAnOiAnIzAwODk3YicsXG4gICAgJzcwMCc6ICcjMDA3OTZiJyxcbiAgICAnODAwJzogJyMwMDY5NWMnLFxuICAgICc5MDAnOiAnIzAwNGQ0MCcsXG4gICAgJ0ExMDAnOiAnI2E3ZmZlYicsXG4gICAgJ0EyMDAnOiAnIzY0ZmZkYScsXG4gICAgJ0E0MDAnOiAnIzFkZTliNicsXG4gICAgJ0E3MDAnOiAnIzAwYmZhNScsXG4gICAgJ2NvbnRyYXN0RGVmYXVsdENvbG9yJzogJ2RhcmsnLFxuICAgICdjb250cmFzdExpZ2h0Q29sb3JzJzogJzUwMCA2MDAgNzAwIDgwMCA5MDAnLFxuICAgICdjb250cmFzdFN0cm9uZ0xpZ2h0Q29sb3JzJzogJzUwMCA2MDAgNzAwJ1xuICB9LFxuICAnZ3JlZW4nOiB7XG4gICAgJzUwJzogJyNlOGY1ZTknLFxuICAgICcxMDAnOiAnI2M4ZTZjOScsXG4gICAgJzIwMCc6ICcjYTVkNmE3JyxcbiAgICAnMzAwJzogJyM4MWM3ODQnLFxuICAgICc0MDAnOiAnIzY2YmI2YScsXG4gICAgJzUwMCc6ICcjNGNhZjUwJyxcbiAgICAnNjAwJzogJyM0M2EwNDcnLFxuICAgICc3MDAnOiAnIzM4OGUzYycsXG4gICAgJzgwMCc6ICcjMmU3ZDMyJyxcbiAgICAnOTAwJzogJyMxYjVlMjAnLFxuICAgICdBMTAwJzogJyNiOWY2Y2EnLFxuICAgICdBMjAwJzogJyM2OWYwYWUnLFxuICAgICdBNDAwJzogJyMwMGU2NzYnLFxuICAgICdBNzAwJzogJyMwMGM4NTMnLFxuICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdkYXJrJyxcbiAgICAnY29udHJhc3RMaWdodENvbG9ycyc6ICc1MDAgNjAwIDcwMCA4MDAgOTAwJyxcbiAgICAnY29udHJhc3RTdHJvbmdMaWdodENvbG9ycyc6ICc1MDAgNjAwIDcwMCdcbiAgfSxcbiAgJ2xpZ2h0LWdyZWVuJzoge1xuICAgICc1MCc6ICcjZjFmOGU5JyxcbiAgICAnMTAwJzogJyNkY2VkYzgnLFxuICAgICcyMDAnOiAnI2M1ZTFhNScsXG4gICAgJzMwMCc6ICcjYWVkNTgxJyxcbiAgICAnNDAwJzogJyM5Y2NjNjUnLFxuICAgICc1MDAnOiAnIzhiYzM0YScsXG4gICAgJzYwMCc6ICcjN2NiMzQyJyxcbiAgICAnNzAwJzogJyM2ODlmMzgnLFxuICAgICc4MDAnOiAnIzU1OGIyZicsXG4gICAgJzkwMCc6ICcjMzM2OTFlJyxcbiAgICAnQTEwMCc6ICcjY2NmZjkwJyxcbiAgICAnQTIwMCc6ICcjYjJmZjU5JyxcbiAgICAnQTQwMCc6ICcjNzZmZjAzJyxcbiAgICAnQTcwMCc6ICcjNjRkZDE3JyxcbiAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnZGFyaycsXG4gICAgJ2NvbnRyYXN0TGlnaHRDb2xvcnMnOiAnODAwIDkwMCcsXG4gICAgJ2NvbnRyYXN0U3Ryb25nTGlnaHRDb2xvcnMnOiAnODAwIDkwMCdcbiAgfSxcbiAgJ2xpbWUnOiB7XG4gICAgJzUwJzogJyNmOWZiZTcnLFxuICAgICcxMDAnOiAnI2YwZjRjMycsXG4gICAgJzIwMCc6ICcjZTZlZTljJyxcbiAgICAnMzAwJzogJyNkY2U3NzUnLFxuICAgICc0MDAnOiAnI2Q0ZTE1NycsXG4gICAgJzUwMCc6ICcjY2RkYzM5JyxcbiAgICAnNjAwJzogJyNjMGNhMzMnLFxuICAgICc3MDAnOiAnI2FmYjQyYicsXG4gICAgJzgwMCc6ICcjOWU5ZDI0JyxcbiAgICAnOTAwJzogJyM4Mjc3MTcnLFxuICAgICdBMTAwJzogJyNmNGZmODEnLFxuICAgICdBMjAwJzogJyNlZWZmNDEnLFxuICAgICdBNDAwJzogJyNjNmZmMDAnLFxuICAgICdBNzAwJzogJyNhZWVhMDAnLFxuICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdkYXJrJyxcbiAgICAnY29udHJhc3RMaWdodENvbG9ycyc6ICc5MDAnLFxuICAgICdjb250cmFzdFN0cm9uZ0xpZ2h0Q29sb3JzJzogJzkwMCdcbiAgfSxcbiAgJ3llbGxvdyc6IHtcbiAgICAnNTAnOiAnI2ZmZmRlNycsXG4gICAgJzEwMCc6ICcjZmZmOWM0JyxcbiAgICAnMjAwJzogJyNmZmY1OWQnLFxuICAgICczMDAnOiAnI2ZmZjE3NicsXG4gICAgJzQwMCc6ICcjZmZlZTU4JyxcbiAgICAnNTAwJzogJyNmZmViM2InLFxuICAgICc2MDAnOiAnI2ZkZDgzNScsXG4gICAgJzcwMCc6ICcjZmJjMDJkJyxcbiAgICAnODAwJzogJyNmOWE4MjUnLFxuICAgICc5MDAnOiAnI2Y1N2YxNycsXG4gICAgJ0ExMDAnOiAnI2ZmZmY4ZCcsXG4gICAgJ0EyMDAnOiAnI2ZmZmYwMCcsXG4gICAgJ0E0MDAnOiAnI2ZmZWEwMCcsXG4gICAgJ0E3MDAnOiAnI2ZmZDYwMCcsXG4gICAgJ2NvbnRyYXN0RGVmYXVsdENvbG9yJzogJ2RhcmsnXG4gIH0sXG4gICdhbWJlcic6IHtcbiAgICAnNTAnOiAnI2ZmZjhlMScsXG4gICAgJzEwMCc6ICcjZmZlY2IzJyxcbiAgICAnMjAwJzogJyNmZmUwODInLFxuICAgICczMDAnOiAnI2ZmZDU0ZicsXG4gICAgJzQwMCc6ICcjZmZjYTI4JyxcbiAgICAnNTAwJzogJyNmZmMxMDcnLFxuICAgICc2MDAnOiAnI2ZmYjMwMCcsXG4gICAgJzcwMCc6ICcjZmZhMDAwJyxcbiAgICAnODAwJzogJyNmZjhmMDAnLFxuICAgICc5MDAnOiAnI2ZmNmYwMCcsXG4gICAgJ0ExMDAnOiAnI2ZmZTU3ZicsXG4gICAgJ0EyMDAnOiAnI2ZmZDc0MCcsXG4gICAgJ0E0MDAnOiAnI2ZmYzQwMCcsXG4gICAgJ0E3MDAnOiAnI2ZmYWIwMCcsXG4gICAgJ2NvbnRyYXN0RGVmYXVsdENvbG9yJzogJ2RhcmsnXG4gIH0sXG4gICdvcmFuZ2UnOiB7XG4gICAgJzUwJzogJyNmZmYzZTAnLFxuICAgICcxMDAnOiAnI2ZmZTBiMicsXG4gICAgJzIwMCc6ICcjZmZjYzgwJyxcbiAgICAnMzAwJzogJyNmZmI3NGQnLFxuICAgICc0MDAnOiAnI2ZmYTcyNicsXG4gICAgJzUwMCc6ICcjZmY5ODAwJyxcbiAgICAnNjAwJzogJyNmYjhjMDAnLFxuICAgICc3MDAnOiAnI2Y1N2MwMCcsXG4gICAgJzgwMCc6ICcjZWY2YzAwJyxcbiAgICAnOTAwJzogJyNlNjUxMDAnLFxuICAgICdBMTAwJzogJyNmZmQxODAnLFxuICAgICdBMjAwJzogJyNmZmFiNDAnLFxuICAgICdBNDAwJzogJyNmZjkxMDAnLFxuICAgICdBNzAwJzogJyNmZjZkMDAnLFxuICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdkYXJrJyxcbiAgICAnY29udHJhc3RMaWdodENvbG9ycyc6ICc4MDAgOTAwJyxcbiAgICAnY29udHJhc3RTdHJvbmdMaWdodENvbG9ycyc6ICc4MDAgOTAwJ1xuICB9LFxuICAnZGVlcC1vcmFuZ2UnOiB7XG4gICAgJzUwJzogJyNmYmU5ZTcnLFxuICAgICcxMDAnOiAnI2ZmY2NiYycsXG4gICAgJzIwMCc6ICcjZmZhYjkxJyxcbiAgICAnMzAwJzogJyNmZjhhNjUnLFxuICAgICc0MDAnOiAnI2ZmNzA0MycsXG4gICAgJzUwMCc6ICcjZmY1NzIyJyxcbiAgICAnNjAwJzogJyNmNDUxMWUnLFxuICAgICc3MDAnOiAnI2U2NGExOScsXG4gICAgJzgwMCc6ICcjZDg0MzE1JyxcbiAgICAnOTAwJzogJyNiZjM2MGMnLFxuICAgICdBMTAwJzogJyNmZjllODAnLFxuICAgICdBMjAwJzogJyNmZjZlNDAnLFxuICAgICdBNDAwJzogJyNmZjNkMDAnLFxuICAgICdBNzAwJzogJyNkZDJjMDAnLFxuICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsXG4gICAgJ2NvbnRyYXN0RGFya0NvbG9ycyc6ICc1MCAxMDAgMjAwIDMwMCA0MDAgQTEwMCBBMjAwJyxcbiAgICAnY29udHJhc3RTdHJvbmdMaWdodENvbG9ycyc6ICc1MDAgNjAwIDcwMCA4MDAgOTAwIEE0MDAgQTcwMCdcbiAgfSxcbiAgJ2Jyb3duJzoge1xuICAgICc1MCc6ICcjZWZlYmU5JyxcbiAgICAnMTAwJzogJyNkN2NjYzgnLFxuICAgICcyMDAnOiAnI2JjYWFhNCcsXG4gICAgJzMwMCc6ICcjYTE4ODdmJyxcbiAgICAnNDAwJzogJyM4ZDZlNjMnLFxuICAgICc1MDAnOiAnIzc5NTU0OCcsXG4gICAgJzYwMCc6ICcjNmQ0YzQxJyxcbiAgICAnNzAwJzogJyM1ZDQwMzcnLFxuICAgICc4MDAnOiAnIzRlMzQyZScsXG4gICAgJzkwMCc6ICcjM2UyNzIzJyxcbiAgICAnQTEwMCc6ICcjZDdjY2M4JyxcbiAgICAnQTIwMCc6ICcjYmNhYWE0JyxcbiAgICAnQTQwMCc6ICcjOGQ2ZTYzJyxcbiAgICAnQTcwMCc6ICcjNWQ0MDM3JyxcbiAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnbGlnaHQnLFxuICAgICdjb250cmFzdERhcmtDb2xvcnMnOiAnNTAgMTAwIDIwMCcsXG4gICAgJ2NvbnRyYXN0U3Ryb25nTGlnaHRDb2xvcnMnOiAnMzAwIDQwMCdcbiAgfSxcbiAgJ2dyZXknOiB7XG4gICAgJzAnOiAnI2ZmZmZmZicsXG4gICAgJzUwJzogJyNmYWZhZmEnLFxuICAgICcxMDAnOiAnI2Y1ZjVmNScsXG4gICAgJzIwMCc6ICcjZWVlZWVlJyxcbiAgICAnMzAwJzogJyNlMGUwZTAnLFxuICAgICc0MDAnOiAnI2JkYmRiZCcsXG4gICAgJzUwMCc6ICcjOWU5ZTllJyxcbiAgICAnNjAwJzogJyM3NTc1NzUnLFxuICAgICc3MDAnOiAnIzYxNjE2MScsXG4gICAgJzgwMCc6ICcjNDI0MjQyJyxcbiAgICAnOTAwJzogJyMyMTIxMjEnLFxuICAgICcxMDAwJzogJyMwMDAwMDAnLFxuICAgICdBMTAwJzogJyNmZmZmZmYnLFxuICAgICdBMjAwJzogJyNlZWVlZWUnLFxuICAgICdBNDAwJzogJyNiZGJkYmQnLFxuICAgICdBNzAwJzogJyM2MTYxNjEnLFxuICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdkYXJrJyxcbiAgICAnY29udHJhc3RMaWdodENvbG9ycyc6ICc2MDAgNzAwIDgwMCA5MDAnXG4gIH0sXG4gICdibHVlLWdyZXknOiB7XG4gICAgJzUwJzogJyNlY2VmZjEnLFxuICAgICcxMDAnOiAnI2NmZDhkYycsXG4gICAgJzIwMCc6ICcjYjBiZWM1JyxcbiAgICAnMzAwJzogJyM5MGE0YWUnLFxuICAgICc0MDAnOiAnIzc4OTA5YycsXG4gICAgJzUwMCc6ICcjNjA3ZDhiJyxcbiAgICAnNjAwJzogJyM1NDZlN2EnLFxuICAgICc3MDAnOiAnIzQ1NWE2NCcsXG4gICAgJzgwMCc6ICcjMzc0NzRmJyxcbiAgICAnOTAwJzogJyMyNjMyMzgnLFxuICAgICdBMTAwJzogJyNjZmQ4ZGMnLFxuICAgICdBMjAwJzogJyNiMGJlYzUnLFxuICAgICdBNDAwJzogJyM3ODkwOWMnLFxuICAgICdBNzAwJzogJyM0NTVhNjQnLFxuICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsXG4gICAgJ2NvbnRyYXN0RGFya0NvbG9ycyc6ICc1MCAxMDAgMjAwIDMwMCcsXG4gICAgJ2NvbnRyYXN0U3Ryb25nTGlnaHRDb2xvcnMnOiAnNDAwIDUwMCdcbiAgfVxufSk7XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29yZS50aGVtaW5nJywgWydtYXRlcmlhbC5jb3JlLnRoZW1pbmcucGFsZXR0ZSddKVxuICAuZGlyZWN0aXZlKCdtZFRoZW1lJywgVGhlbWluZ0RpcmVjdGl2ZSlcbiAgLmRpcmVjdGl2ZSgnbWRUaGVtYWJsZScsIFRoZW1hYmxlRGlyZWN0aXZlKVxuICAucHJvdmlkZXIoJyRtZFRoZW1pbmcnLCBUaGVtaW5nUHJvdmlkZXIpXG4gIC5ydW4oZ2VuZXJhdGVUaGVtZXMpO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJG1kVGhlbWluZ1Byb3ZpZGVyXG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvcmVcbiAqXG4gKiBAZGVzY3JpcHRpb24gUHJvdmlkZXIgdG8gY29uZmlndXJlIHRoZSBgJG1kVGhlbWluZ2Agc2VydmljZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRtZFRoZW1pbmdQcm92aWRlciNzZXREZWZhdWx0VGhlbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZU5hbWUgRGVmYXVsdCB0aGVtZSBuYW1lIHRvIGJlIGFwcGxpZWQgdG8gZWxlbWVudHMuIERlZmF1bHQgdmFsdWUgaXMgYGRlZmF1bHRgLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJG1kVGhlbWluZ1Byb3ZpZGVyI2Fsd2F5c1dhdGNoVGhlbWVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gd2F0Y2ggV2hldGhlciBvciBub3QgdG8gYWx3YXlzIHdhdGNoIHRoZW1lcyBmb3IgY2hhbmdlcyBhbmQgcmUtYXBwbHlcbiAqIGNsYXNzZXMgd2hlbiB0aGV5IGNoYW5nZS4gRGVmYXVsdCBpcyBgZmFsc2VgLiBFbmFibGluZyBjYW4gcmVkdWNlIHBlcmZvcm1hbmNlLlxuICovXG5cbi8vIEluIG1lbW9yeSBzdG9yYWdlIG9mIGRlZmluZWQgdGhlbWVzIGFuZCBjb2xvciBwYWxldHRlcyAoYm90aCBsb2FkZWQgYnkgQ1NTLCBhbmQgdXNlciBzcGVjaWZpZWQpXG52YXIgUEFMRVRURVM7XG52YXIgVEhFTUVTO1xudmFyIHRoZW1pbmdQcm92aWRlcjtcbnZhciBnZW5lcmF0aW9uSXNEb25lO1xuXG52YXIgREFSS19GT1JFR1JPVU5EID0ge1xuICBuYW1lOiAnZGFyaycsXG4gICcxJzogJ3JnYmEoMCwwLDAsMC44NyknLFxuICAnMic6ICdyZ2JhKDAsMCwwLDAuNTQpJyxcbiAgJzMnOiAncmdiYSgwLDAsMCwwLjI2KScsXG4gICc0JzogJ3JnYmEoMCwwLDAsMC4xMiknXG59O1xudmFyIExJR0hUX0ZPUkVHUk9VTkQgPSB7XG4gIG5hbWU6ICdsaWdodCcsXG4gICcxJzogJ3JnYmEoMjU1LDI1NSwyNTUsMS4wKScsXG4gICcyJzogJ3JnYmEoMjU1LDI1NSwyNTUsMC43KScsXG4gICczJzogJ3JnYmEoMjU1LDI1NSwyNTUsMC4zKScsXG4gICc0JzogJ3JnYmEoMjU1LDI1NSwyNTUsMC4xMiknXG59O1xuXG52YXIgREFSS19TSEFET1cgPSAnMXB4IDFweCAwcHggcmdiYSgwLDAsMCwwLjQpLCAtMXB4IC0xcHggMHB4IHJnYmEoMCwwLDAsMC40KSc7XG52YXIgTElHSFRfU0hBRE9XID0gJyc7XG5cbnZhciBEQVJLX0NPTlRSQVNUX0NPTE9SID0gY29sb3JUb1JnYmFBcnJheSgncmdiYSgwLDAsMCwwLjg3KScpO1xudmFyIExJR0hUX0NPTlRSQVNUX0NPTE9SID0gY29sb3JUb1JnYmFBcnJheSgncmdiYSgyNTUsMjU1LDI1NSwwLjg3Jyk7XG52YXIgU1RST05HX0xJR0hUX0NPTlRSQVNUX0NPTE9SID0gY29sb3JUb1JnYmFBcnJheSgncmdiKDI1NSwyNTUsMjU1KScpO1xuXG52YXIgVEhFTUVfQ09MT1JfVFlQRVMgPSBbJ3ByaW1hcnknLCAnYWNjZW50JywgJ3dhcm4nLCAnYmFja2dyb3VuZCddO1xudmFyIERFRkFVTFRfQ09MT1JfVFlQRSA9ICdwcmltYXJ5JztcblxuLy8gQSBjb2xvciBpbiBhIHRoZW1lIHdpbGwgdXNlIHRoZXNlIGh1ZXMgYnkgZGVmYXVsdCwgaWYgbm90IHNwZWNpZmllZCBieSB1c2VyLlxudmFyIExJR0hUX0RFRkFVTFRfSFVFUyA9IHtcbiAgJ2FjY2VudCc6IHtcbiAgICAnZGVmYXVsdCc6ICdBMjAwJyxcbiAgICAnaHVlLTEnOiAnQTEwMCcsXG4gICAgJ2h1ZS0yJzogJ0E0MDAnLFxuICAgICdodWUtMyc6ICdBNzAwJ1xuICB9XG59O1xudmFyIERBUktfREVGQVVMVF9IVUVTID0ge1xuICAnYmFja2dyb3VuZCc6IHtcbiAgICAnZGVmYXVsdCc6ICc1MDAnLFxuICAgICdodWUtMSc6ICczMDAnLFxuICAgICdodWUtMic6ICc2MDAnLFxuICAgICdodWUtMyc6ICc4MDAnXG4gIH1cbn07XG5USEVNRV9DT0xPUl9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uKGNvbG9yVHlwZSkge1xuICAvLyBDb2xvciB0eXBlcyB3aXRoIHVuc3BlY2lmaWVkIGRlZmF1bHQgaHVlcyB3aWxsIHVzZSB0aGVzZSBkZWZhdWx0IGh1ZSB2YWx1ZXNcbiAgdmFyIGRlZmF1bHREZWZhdWx0SHVlcyA9IHtcbiAgICAnZGVmYXVsdCc6ICc1MDAnLFxuICAgICdodWUtMSc6ICczMDAnLFxuICAgICdodWUtMic6ICc4MDAnLFxuICAgICdodWUtMyc6ICdBMTAwJ1xuICB9O1xuICBpZiAoIUxJR0hUX0RFRkFVTFRfSFVFU1tjb2xvclR5cGVdKSBMSUdIVF9ERUZBVUxUX0hVRVNbY29sb3JUeXBlXSA9IGRlZmF1bHREZWZhdWx0SHVlcztcbiAgaWYgKCFEQVJLX0RFRkFVTFRfSFVFU1tjb2xvclR5cGVdKSBEQVJLX0RFRkFVTFRfSFVFU1tjb2xvclR5cGVdID0gZGVmYXVsdERlZmF1bHRIdWVzO1xufSk7XG5cbnZhciBWQUxJRF9IVUVfVkFMVUVTID0gW1xuICAnNTAnLCAnMTAwJywgJzIwMCcsICczMDAnLCAnNDAwJywgJzUwMCcsICc2MDAnLFxuICAnNzAwJywgJzgwMCcsICc5MDAnLCAnQTEwMCcsICdBMjAwJywgJ0E0MDAnLCAnQTcwMCdcbl07XG5cbmZ1bmN0aW9uIFRoZW1pbmdQcm92aWRlcigkbWRDb2xvclBhbGV0dGUpIHtcbiAgUEFMRVRURVMgPSB7fTtcbiAgVEhFTUVTID0ge307XG4gIHZhciBkZWZhdWx0VGhlbWUgPSAnZGVmYXVsdCc7XG4gIHZhciBhbHdheXNXYXRjaFRoZW1lID0gZmFsc2U7XG5cbiAgLy8gTG9hZCBKUyBEZWZpbmVkIFBhbGV0dGVzXG4gIGFuZ3VsYXIuZXh0ZW5kKFBBTEVUVEVTLCAkbWRDb2xvclBhbGV0dGUpO1xuXG4gIC8vIERlZmF1bHQgdGhlbWUgZGVmaW5lZCBpbiBjb3JlLmpzXG5cbiAgVGhlbWluZ1NlcnZpY2UuJGluamVjdCA9IFtcIiRyb290U2NvcGVcIiwgXCIkbG9nXCJdO1xuICByZXR1cm4gdGhlbWluZ1Byb3ZpZGVyID0ge1xuICAgIGRlZmluZVBhbGV0dGU6IGRlZmluZVBhbGV0dGUsXG4gICAgZXh0ZW5kUGFsZXR0ZTogZXh0ZW5kUGFsZXR0ZSxcbiAgICB0aGVtZTogcmVnaXN0ZXJUaGVtZSxcblxuICAgIHNldERlZmF1bHRUaGVtZTogZnVuY3Rpb24odGhlbWUpIHtcbiAgICAgIGRlZmF1bHRUaGVtZSA9IHRoZW1lO1xuICAgIH0sXG4gICAgYWx3YXlzV2F0Y2hUaGVtZTogZnVuY3Rpb24oYWx3YXlzV2F0Y2gpIHtcbiAgICAgIGFsd2F5c1dhdGNoVGhlbWUgPSBhbHdheXNXYXRjaDtcbiAgICB9LFxuICAgICRnZXQ6IFRoZW1pbmdTZXJ2aWNlLFxuICAgIF9MSUdIVF9ERUZBVUxUX0hVRVM6IExJR0hUX0RFRkFVTFRfSFVFUyxcbiAgICBfREFSS19ERUZBVUxUX0hVRVM6IERBUktfREVGQVVMVF9IVUVTLFxuICAgIF9QQUxFVFRFUzogUEFMRVRURVMsXG4gICAgX1RIRU1FUzogVEhFTUVTLFxuICAgIF9wYXJzZVJ1bGVzOiBwYXJzZVJ1bGVzLFxuICAgIF9yZ2JhOiByZ2JhXG4gIH07XG5cbiAgLy8gRXhhbXBsZTogJG1kVGhlbWluZ1Byb3ZpZGVyLmRlZmluZVBhbGV0dGUoJ25lb25SZWQnLCB7IDUwOiAnI2Y1ZmFmYScsIC4uLiB9KTtcbiAgZnVuY3Rpb24gZGVmaW5lUGFsZXR0ZShuYW1lLCBtYXApIHtcbiAgICBtYXAgPSBtYXAgfHwge307XG4gICAgUEFMRVRURVNbbmFtZV0gPSBjaGVja1BhbGV0dGVWYWxpZChuYW1lLCBtYXApO1xuICAgIHJldHVybiB0aGVtaW5nUHJvdmlkZXI7XG4gIH1cblxuICAvLyBSZXR1cm5zIGFuIG5ldyBvYmplY3Qgd2hpY2ggaXMgYSBjb3B5IG9mIGEgZ2l2ZW4gcGFsZXR0ZSBgbmFtZWAgd2l0aCB2YXJpYWJsZXMgZnJvbVxuICAvLyBgbWFwYCBvdmVyd3JpdHRlblxuICAvLyBFeGFtcGxlOiB2YXIgbmVvblJlZE1hcCA9ICRtZFRoZW1pbmdQcm92aWRlci5leHRlbmRQYWxldHRlKCdyZWQnLCB7IDUwOiAnI2Y1ZmFmYWZhJyB9KTtcbiAgZnVuY3Rpb24gZXh0ZW5kUGFsZXR0ZShuYW1lLCBtYXApIHtcbiAgICByZXR1cm4gY2hlY2tQYWxldHRlVmFsaWQobmFtZSwgIGFuZ3VsYXIuZXh0ZW5kKHt9LCBQQUxFVFRFU1tuYW1lXSB8fCB7fSwgbWFwKSApO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgcGFsZXR0ZSBoYXMgYWxsIHJlcXVpcmVkIGh1ZXNcbiAgZnVuY3Rpb24gY2hlY2tQYWxldHRlVmFsaWQobmFtZSwgbWFwKSB7XG4gICAgdmFyIG1pc3NpbmdDb2xvcnMgPSBWQUxJRF9IVUVfVkFMVUVTLmZpbHRlcihmdW5jdGlvbihmaWVsZCkge1xuICAgICAgcmV0dXJuICFtYXBbZmllbGRdO1xuICAgIH0pO1xuICAgIGlmIChtaXNzaW5nQ29sb3JzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjb2xvcnMgJTEgaW4gcGFsZXR0ZSAlMiFcIlxuICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCclMScsIG1pc3NpbmdDb2xvcnMuam9pbignLCAnKSlcbiAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgnJTInLCBuYW1lKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcDtcbiAgfVxuXG4gIC8vIFJlZ2lzdGVyIGEgdGhlbWUgKHdoaWNoIGlzIGEgY29sbGVjdGlvbiBvZiBjb2xvciBwYWxldHRlcyB0byB1c2Ugd2l0aCB2YXJpb3VzIHN0YXRlc1xuICAvLyBpZS4gd2FybiwgYWNjZW50LCBwcmltYXJ5IClcbiAgLy8gT3B0aW9uYWxseSBpbmhlcml0IGZyb20gYW4gZXhpc3RpbmcgdGhlbWVcbiAgLy8gJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdjdXN0b20tdGhlbWUnKS5wcmltYXJ5UGFsZXR0ZSgncmVkJyk7XG4gIGZ1bmN0aW9uIHJlZ2lzdGVyVGhlbWUobmFtZSwgaW5oZXJpdEZyb20pIHtcbiAgICBpbmhlcml0RnJvbSA9IGluaGVyaXRGcm9tIHx8ICdkZWZhdWx0JztcbiAgICBpZiAoVEhFTUVTW25hbWVdKSByZXR1cm4gVEhFTUVTW25hbWVdO1xuXG4gICAgdmFyIHBhcmVudFRoZW1lID0gdHlwZW9mIGluaGVyaXRGcm9tID09PSAnc3RyaW5nJyA/IFRIRU1FU1tpbmhlcml0RnJvbV0gOiBpbmhlcml0RnJvbTtcbiAgICB2YXIgdGhlbWUgPSBuZXcgVGhlbWUobmFtZSk7XG5cbiAgICBpZiAocGFyZW50VGhlbWUpIHtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChwYXJlbnRUaGVtZS5jb2xvcnMsIGZ1bmN0aW9uKGNvbG9yLCBjb2xvclR5cGUpIHtcbiAgICAgICAgdGhlbWUuY29sb3JzW2NvbG9yVHlwZV0gPSB7XG4gICAgICAgICAgbmFtZTogY29sb3IubmFtZSxcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgYSBDT1BZIG9mIHRoZSBodWVzIGlzIGdpdmVuIHRvIHRoZSBjaGlsZCBjb2xvcixcbiAgICAgICAgICAvLyBub3QgdGhlIHNhbWUgcmVmZXJlbmNlLlxuICAgICAgICAgIGh1ZXM6IGFuZ3VsYXIuZXh0ZW5kKHt9LCBjb2xvci5odWVzKVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICAgIFRIRU1FU1tuYW1lXSA9IHRoZW1lO1xuXG4gICAgcmV0dXJuIHRoZW1lO1xuICB9XG5cbiAgZnVuY3Rpb24gVGhlbWUobmFtZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLm5hbWUgPSBuYW1lO1xuICAgIHNlbGYuY29sb3JzID0ge307XG5cbiAgICBzZWxmLmRhcmsgPSBzZXREYXJrO1xuICAgIHNldERhcmsoZmFsc2UpO1xuXG4gICAgZnVuY3Rpb24gc2V0RGFyayhpc0RhcmspIHtcbiAgICAgIGlzRGFyayA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDAgPyB0cnVlIDogISFpc0Rhcms7XG5cbiAgICAgIC8vIElmIG5vIGNoYW5nZSwgYWJvcnRcbiAgICAgIGlmIChpc0RhcmsgPT09IHNlbGYuaXNEYXJrKSByZXR1cm47XG5cbiAgICAgIHNlbGYuaXNEYXJrID0gaXNEYXJrO1xuXG4gICAgICBzZWxmLmZvcmVncm91bmRQYWxldHRlID0gc2VsZi5pc0RhcmsgPyBMSUdIVF9GT1JFR1JPVU5EIDogREFSS19GT1JFR1JPVU5EO1xuICAgICAgc2VsZi5mb3JlZ3JvdW5kU2hhZG93ID0gc2VsZi5pc0RhcmsgPyBEQVJLX1NIQURPVyA6IExJR0hUX1NIQURPVztcbiAgICAgIFxuICAgICAgLy8gTGlnaHQgYW5kIGRhcmsgdGhlbWVzIGhhdmUgZGlmZmVyZW50IGRlZmF1bHQgaHVlcy5cbiAgICAgIC8vIEdvIHRocm91Z2ggZWFjaCBleGlzdGluZyBjb2xvciB0eXBlIGZvciB0aGlzIHRoZW1lLCBhbmQgZm9yIGV2ZXJ5XG4gICAgICAvLyBodWUgdmFsdWUgdGhhdCBpcyBzdGlsbCB0aGUgZGVmYXVsdCBodWUgdmFsdWUgZnJvbSB0aGUgcHJldmlvdXMgbGlnaHQvZGFyayBzZXR0aW5nLFxuICAgICAgLy8gc2V0IGl0IHRvIHRoZSBkZWZhdWx0IGh1ZSB2YWx1ZSBmcm9tIHRoZSBuZXcgbGlnaHQvZGFyayBzZXR0aW5nLlxuICAgICAgdmFyIG5ld0RlZmF1bHRIdWVzID0gc2VsZi5pc0RhcmsgPyBEQVJLX0RFRkFVTFRfSFVFUyA6IExJR0hUX0RFRkFVTFRfSFVFUztcbiAgICAgIHZhciBvbGREZWZhdWx0SHVlcyA9IHNlbGYuaXNEYXJrID8gTElHSFRfREVGQVVMVF9IVUVTIDogREFSS19ERUZBVUxUX0hVRVM7XG4gICAgICBhbmd1bGFyLmZvckVhY2gobmV3RGVmYXVsdEh1ZXMsIGZ1bmN0aW9uKG5ld0RlZmF1bHRzLCBjb2xvclR5cGUpIHtcbiAgICAgICAgdmFyIGNvbG9yID0gc2VsZi5jb2xvcnNbY29sb3JUeXBlXTtcbiAgICAgICAgdmFyIG9sZERlZmF1bHRzID0gb2xkRGVmYXVsdEh1ZXNbY29sb3JUeXBlXTtcbiAgICAgICAgaWYgKGNvbG9yKSB7XG4gICAgICAgICAgZm9yICh2YXIgaHVlTmFtZSBpbiBjb2xvci5odWVzKSB7XG4gICAgICAgICAgICBpZiAoY29sb3IuaHVlc1todWVOYW1lXSA9PT0gb2xkRGVmYXVsdHNbaHVlTmFtZV0pIHtcbiAgICAgICAgICAgICAgY29sb3IuaHVlc1todWVOYW1lXSA9IG5ld0RlZmF1bHRzW2h1ZU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIFRIRU1FX0NPTE9SX1RZUEVTLmZvckVhY2goZnVuY3Rpb24oY29sb3JUeXBlKSB7XG4gICAgICB2YXIgZGVmYXVsdEh1ZXMgPSAoc2VsZi5pc0RhcmsgPyBEQVJLX0RFRkFVTFRfSFVFUyA6IExJR0hUX0RFRkFVTFRfSFVFUylbY29sb3JUeXBlXTtcbiAgICAgIHNlbGZbY29sb3JUeXBlICsgJ1BhbGV0dGUnXSA9IGZ1bmN0aW9uIHNldFBhbGV0dGVUeXBlKHBhbGV0dGVOYW1lLCBodWVzKSB7XG4gICAgICAgIHZhciBjb2xvciA9IHNlbGYuY29sb3JzW2NvbG9yVHlwZV0gPSB7XG4gICAgICAgICAgbmFtZTogcGFsZXR0ZU5hbWUsXG4gICAgICAgICAgaHVlczogYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRIdWVzLCBodWVzKVxuICAgICAgICB9O1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGNvbG9yLmh1ZXMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgIGlmICghZGVmYXVsdEh1ZXNbbmFtZV0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaHVlIG5hbWUgJyUxJyBpbiB0aGVtZSAlMidzICUzIGNvbG9yICU0LiBBdmFpbGFibGUgaHVlIG5hbWVzOiAlNFwiXG4gICAgICAgICAgICAgIC5yZXBsYWNlKCclMScsIG5hbWUpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKCclMicsIHNlbGYubmFtZSlcbiAgICAgICAgICAgICAgLnJlcGxhY2UoJyUzJywgcGFsZXR0ZU5hbWUpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKCclNCcsIE9iamVjdC5rZXlzKGRlZmF1bHRIdWVzKS5qb2luKCcsICcpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3Qua2V5cyhjb2xvci5odWVzKS5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgcmV0dXJuIGNvbG9yLmh1ZXNba2V5XTtcbiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbihodWVWYWx1ZSkge1xuICAgICAgICAgIGlmIChWQUxJRF9IVUVfVkFMVUVTLmluZGV4T2YoaHVlVmFsdWUpID09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGh1ZSB2YWx1ZSAnJTEnIGluIHRoZW1lICUyJ3MgJTMgY29sb3IgJTQuIEF2YWlsYWJsZSBodWUgdmFsdWVzOiAlNVwiXG4gICAgICAgICAgICAgIC5yZXBsYWNlKCclMScsIGh1ZVZhbHVlKVxuICAgICAgICAgICAgICAucmVwbGFjZSgnJTInLCBzZWxmLm5hbWUpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKCclMycsIGNvbG9yVHlwZSlcbiAgICAgICAgICAgICAgLnJlcGxhY2UoJyU0JywgcGFsZXR0ZU5hbWUpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKCclNScsIFZBTElEX0hVRV9WQUxVRVMuam9pbignLCAnKSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9O1xuXG4gICAgICBzZWxmW2NvbG9yVHlwZSArICdDb2xvciddID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS53YXJuKCckbWRUaGVtaW5nUHJvdmlkZXJUaGVtZS4nICsgY29sb3JUeXBlICsgJ0NvbG9yKCkgaGFzIGJlZW4gZGVwcmljYXRlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAnVXNlICRtZFRoZW1pbmdQcm92aWRlclRoZW1lLicgKyBjb2xvclR5cGUgKyAnUGFsZXR0ZSgpIGluc3RlYWQuJyk7XG4gICAgICAgIHJldHVybiBzZWxmW2NvbG9yVHlwZSArICdQYWxldHRlJ10uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAqIEBuYW1lICRtZFRoZW1pbmdcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFNlcnZpY2UgdGhhdCBtYWtlcyBhbiBlbGVtZW50IGFwcGx5IHRoZW1pbmcgcmVsYXRlZCBjbGFzc2VzIHRvIGl0c2VsZi5cbiAgICpcbiAgICogYGBganNcbiAgICogYXBwLmRpcmVjdGl2ZSgnbXlGYW5jeURpcmVjdGl2ZScsIGZ1bmN0aW9uKCRtZFRoZW1pbmcpIHtcbiAgICogICByZXR1cm4ge1xuICAgKiAgICAgcmVzdHJpY3Q6ICdlJyxcbiAgICogICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cnMpIHtcbiAgICogICAgICAgJG1kVGhlbWluZyhlbCk7XG4gICAqICAgICB9XG4gICAqICAgfTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBAcGFyYW0ge2VsPX0gZWxlbWVudCB0byBhcHBseSB0aGVtaW5nIHRvXG4gICAqL1xuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gVGhlbWluZ1NlcnZpY2UoJHJvb3RTY29wZSwgJGxvZykge1xuICAgIGFwcGx5VGhlbWUuaW5oZXJpdCA9IGZ1bmN0aW9uKGVsLCBwYXJlbnQpIHtcbiAgICAgIHZhciBjdHJsID0gcGFyZW50LmNvbnRyb2xsZXIoJ21kVGhlbWUnKTtcblxuICAgICAgdmFyIGF0dHJUaGVtZVZhbHVlID0gZWwuYXR0cignbWQtdGhlbWUtd2F0Y2gnKTtcbiAgICAgIGlmICggKGFsd2F5c1dhdGNoVGhlbWUgfHwgYW5ndWxhci5pc0RlZmluZWQoYXR0clRoZW1lVmFsdWUpKSAmJiBhdHRyVGhlbWVWYWx1ZSAhPSAnZmFsc2UnKSB7XG4gICAgICAgIHZhciBkZXJlZ2lzdGVyV2F0Y2ggPSAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gY3RybCAmJiBjdHJsLiRtZFRoZW1lIHx8IGRlZmF1bHRUaGVtZTtcbiAgICAgICAgfSwgY2hhbmdlVGhlbWUpO1xuICAgICAgICBlbC5vbignJGRlc3Ryb3knLCBkZXJlZ2lzdGVyV2F0Y2gpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHRoZW1lID0gY3RybCAmJiBjdHJsLiRtZFRoZW1lIHx8IGRlZmF1bHRUaGVtZTtcbiAgICAgICAgY2hhbmdlVGhlbWUodGhlbWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VUaGVtZSh0aGVtZSkge1xuICAgICAgICBpZiAoIXJlZ2lzdGVyZWQodGhlbWUpKSB7XG4gICAgICAgICAgJGxvZy53YXJuKCdBdHRlbXB0ZWQgdG8gdXNlIHVucmVnaXN0ZXJlZCB0aGVtZSBcXCcnICsgdGhlbWUgKyAnXFwnLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1JlZ2lzdGVyIGl0IHdpdGggJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9sZFRoZW1lID0gZWwuZGF0YSgnJG1kVGhlbWVOYW1lJyk7XG4gICAgICAgIGlmIChvbGRUaGVtZSkgZWwucmVtb3ZlQ2xhc3MoJ21kLScgKyBvbGRUaGVtZSArJy10aGVtZScpO1xuICAgICAgICBlbC5hZGRDbGFzcygnbWQtJyArIHRoZW1lICsgJy10aGVtZScpO1xuICAgICAgICBlbC5kYXRhKCckbWRUaGVtZU5hbWUnLCB0aGVtZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGFwcGx5VGhlbWUucmVnaXN0ZXJlZCA9IHJlZ2lzdGVyZWQ7XG5cbiAgICByZXR1cm4gYXBwbHlUaGVtZTtcblxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyZWQodGhlbWUpIHtcbiAgICAgIGlmICh0aGVtZSA9PT0gdW5kZWZpbmVkIHx8IHRoZW1lID09PSAnJykgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gVEhFTUVTW3RoZW1lXSAhPT0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFwcGx5VGhlbWUoc2NvcGUsIGVsKSB7XG4gICAgICAvLyBBbGxvdyB1cyB0byBiZSBpbnZva2VkIHZpYSBhIGxpbmtpbmcgZnVuY3Rpb24gc2lnbmF0dXJlLlxuICAgICAgaWYgKGVsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZWwgPSBzY29wZTtcbiAgICAgICAgc2NvcGUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAoc2NvcGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzY29wZSA9ICRyb290U2NvcGU7XG4gICAgICB9XG4gICAgICBhcHBseVRoZW1lLmluaGVyaXQoZWwsIGVsKTtcbiAgICB9XG4gIH1cbn1cblRoZW1pbmdQcm92aWRlci4kaW5qZWN0ID0gW1wiJG1kQ29sb3JQYWxldHRlXCJdO1xuXG5mdW5jdGlvbiBUaGVtaW5nRGlyZWN0aXZlKCRtZFRoZW1pbmcsICRpbnRlcnBvbGF0ZSwgJGxvZykge1xuICByZXR1cm4ge1xuICAgIHByaW9yaXR5OiAxMDAsXG4gICAgbGluazoge1xuICAgICAgcHJlOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHJzKSB7XG4gICAgICAgIHZhciBjdHJsID0ge1xuICAgICAgICAgICRzZXRUaGVtZTogZnVuY3Rpb24odGhlbWUpIHtcbiAgICAgICAgICAgIGlmICghJG1kVGhlbWluZy5yZWdpc3RlcmVkKHRoZW1lKSkge1xuICAgICAgICAgICAgICAkbG9nLndhcm4oJ2F0dGVtcHRlZCB0byB1c2UgdW5yZWdpc3RlcmVkIHRoZW1lIFxcJycgKyB0aGVtZSArICdcXCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0cmwuJG1kVGhlbWUgPSB0aGVtZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGVsLmRhdGEoJyRtZFRoZW1lQ29udHJvbGxlcicsIGN0cmwpO1xuICAgICAgICBjdHJsLiRzZXRUaGVtZSgkaW50ZXJwb2xhdGUoYXR0cnMubWRUaGVtZSkoc2NvcGUpKTtcbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ21kVGhlbWUnLCBjdHJsLiRzZXRUaGVtZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuVGhlbWluZ0RpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJG1kVGhlbWluZ1wiLCBcIiRpbnRlcnBvbGF0ZVwiLCBcIiRsb2dcIl07XG5cbmZ1bmN0aW9uIFRoZW1hYmxlRGlyZWN0aXZlKCRtZFRoZW1pbmcpIHtcbiAgcmV0dXJuICRtZFRoZW1pbmc7XG59XG5UaGVtYWJsZURpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJG1kVGhlbWluZ1wiXTtcblxuZnVuY3Rpb24gcGFyc2VSdWxlcyh0aGVtZSwgY29sb3JUeXBlLCBydWxlcykge1xuICBjaGVja1ZhbGlkUGFsZXR0ZSh0aGVtZSwgY29sb3JUeXBlKTtcblxuICBydWxlcyA9IHJ1bGVzLnJlcGxhY2UoL1RIRU1FX05BTUUvZywgdGhlbWUubmFtZSk7XG4gIHZhciBnZW5lcmF0ZWRSdWxlcyA9IFtdO1xuICB2YXIgY29sb3IgPSB0aGVtZS5jb2xvcnNbY29sb3JUeXBlXTtcblxuICB2YXIgdGhlbWVOYW1lUmVnZXggPSBuZXcgUmVnRXhwKCcubWQtJyArIHRoZW1lLm5hbWUgKyAnLXRoZW1lJywgJ2cnKTtcbiAgLy8gTWF0Y2hlcyAne3sgcHJpbWFyeS1jb2xvciB9fScsIGV0Y1xuICB2YXIgaHVlUmVnZXggPSBuZXcgUmVnRXhwKCcoXFwnfFwiKT97e1xcXFxzKignICsgY29sb3JUeXBlICsgJyktKGNvbG9yfGNvbnRyYXN0KS0/KFxcXFxkXFxcXC4/XFxcXGQqKT9cXFxccyp9fShcXFwifFxcJyk/JywnZycpO1xuICB2YXIgc2ltcGxlVmFyaWFibGVSZWdleCA9IC8nP1wiP1xce1xce1xccyooW2EtekEtWl0rKS0oQT9cXGQrfGh1ZVxcLVswLTNdfHNoYWRvdyktPyhcXGRcXC4/XFxkKik/XFxzKlxcfVxcfSc/XCI/L2c7XG4gIHZhciBwYWxldHRlID0gUEFMRVRURVNbY29sb3IubmFtZV07XG5cbiAgLy8gZmluZCBhbmQgcmVwbGFjZSBzaW1wbGUgdmFyaWFibGVzIHdoZXJlIHdlIHVzZSBhIHNwZWNpZmljIGh1ZSwgbm90IGFuZ2VudGlyZSBwYWxldHRlXG4gIC8vIGVnLiBcInt7cHJpbWFyeS0xMDB9fVwiXG4gIC8vXFwoJyArIFRIRU1FX0NPTE9SX1RZUEVTLmpvaW4oJ1xcfCcpICsgJ1xcKSdcbiAgcnVsZXMgPSBydWxlcy5yZXBsYWNlKHNpbXBsZVZhcmlhYmxlUmVnZXgsIGZ1bmN0aW9uKG1hdGNoLCBjb2xvclR5cGUsIGh1ZSwgb3BhY2l0eSkge1xuICAgIGlmIChjb2xvclR5cGUgPT09ICdmb3JlZ3JvdW5kJykge1xuICAgICAgaWYgKGh1ZSA9PSAnc2hhZG93Jykge1xuICAgICAgICByZXR1cm4gdGhlbWUuZm9yZWdyb3VuZFNoYWRvdztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGVtZS5mb3JlZ3JvdW5kUGFsZXR0ZVtodWVdIHx8IHRoZW1lLmZvcmVncm91bmRQYWxldHRlWycxJ107XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChodWUuaW5kZXhPZignaHVlJykgPT09IDApIHtcbiAgICAgIGh1ZSA9IHRoZW1lLmNvbG9yc1tjb2xvclR5cGVdLmh1ZXNbaHVlXTtcbiAgICB9XG4gICAgcmV0dXJuIHJnYmEoIChQQUxFVFRFU1sgdGhlbWUuY29sb3JzW2NvbG9yVHlwZV0ubmFtZSBdW2h1ZV0gfHwgJycpLnZhbHVlLCBvcGFjaXR5ICk7XG4gIH0pO1xuXG4gIC8vIEZvciBlYWNoIHR5cGUsIGdlbmVyYXRlIHJ1bGVzIGZvciBlYWNoIGh1ZSAoaWUuIGRlZmF1bHQsIG1kLWh1ZS0xLCBtZC1odWUtMiwgbWQtaHVlLTMpXG4gIGFuZ3VsYXIuZm9yRWFjaChjb2xvci5odWVzLCBmdW5jdGlvbihodWVWYWx1ZSwgaHVlTmFtZSkge1xuICAgIHZhciBuZXdSdWxlID0gcnVsZXNcbiAgICAgIC5yZXBsYWNlKGh1ZVJlZ2V4LCBmdW5jdGlvbihtYXRjaCwgXywgY29sb3JUeXBlLCBodWVUeXBlLCBvcGFjaXR5KSB7XG4gICAgICAgIHJldHVybiByZ2JhKHBhbGV0dGVbaHVlVmFsdWVdW2h1ZVR5cGUgPT09ICdjb2xvcicgPyAndmFsdWUnIDogJ2NvbnRyYXN0J10sIG9wYWNpdHkpO1xuICAgICAgfSk7XG4gICAgaWYgKGh1ZU5hbWUgIT09ICdkZWZhdWx0Jykge1xuICAgICAgbmV3UnVsZSA9IG5ld1J1bGUucmVwbGFjZSh0aGVtZU5hbWVSZWdleCwgJy5tZC0nICsgdGhlbWUubmFtZSArICctdGhlbWUubWQtJyArIGh1ZU5hbWUpO1xuICAgIH1cbiAgICBnZW5lcmF0ZWRSdWxlcy5wdXNoKG5ld1J1bGUpO1xuICB9KTtcblxuICByZXR1cm4gZ2VuZXJhdGVkUnVsZXMuam9pbignJyk7XG59XG5cbi8vIEdlbmVyYXRlIG91ciB0aGVtZXMgYXQgcnVuIHRpbWUgZ2l2ZW4gdGhlIHN0YXRlIG9mIFRIRU1FUyBhbmQgUEFMRVRURVNcbmZ1bmN0aW9uIGdlbmVyYXRlVGhlbWVzKCRpbmplY3Rvcikge1xuICB2YXIgdGhlbWVDc3MgPSAkaW5qZWN0b3IuaGFzKCckTURfVEhFTUVfQ1NTJykgPyAkaW5qZWN0b3IuZ2V0KCckTURfVEhFTUVfQ1NTJykgOiAnJztcblxuICAvLyBNRF9USEVNRV9DU1MgaXMgYSBzdHJpbmcgZ2VuZXJhdGVkIGJ5IHRoZSBidWlsZCBwcm9jZXNzIHRoYXQgaW5jbHVkZXMgYWxsIHRoZSB0aGVtYWJsZVxuICAvLyBjb21wb25lbnRzIGFzIHRlbXBsYXRlc1xuXG4gIC8vIEV4cG9zZSBjb250cmFzdCBjb2xvcnMgZm9yIHBhbGV0dGVzIHRvIGVuc3VyZSB0aGF0IHRleHQgaXMgYWx3YXlzIHJlYWRhYmxlXG4gIGFuZ3VsYXIuZm9yRWFjaChQQUxFVFRFUywgc2FuaXRpemVQYWxldHRlKTtcblxuICAvLyBCcmVhayB0aGUgQ1NTIGludG8gaW5kaXZpZHVhbCBydWxlc1xuICB2YXIgcnVsZXMgPSB0aGVtZUNzcy5zcGxpdCgvXFx9KD8hKFxcfXwnfFwifDspKS8pXG4gICAgLmZpbHRlcihmdW5jdGlvbihydWxlKSB7IHJldHVybiBydWxlICYmIHJ1bGUubGVuZ3RoOyB9KVxuICAgIC5tYXAoZnVuY3Rpb24ocnVsZSkgeyByZXR1cm4gcnVsZS50cmltKCkgKyAnfSc7IH0pO1xuXG4gIHZhciBydWxlc0J5VHlwZSA9IHt9O1xuICBUSEVNRV9DT0xPUl9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUpIHtcbiAgICBydWxlc0J5VHlwZVt0eXBlXSA9ICcnO1xuICB9KTtcbiAgdmFyIHJ1bGVNYXRjaFJlZ2V4ID0gbmV3IFJlZ0V4cCgnbWQtKCcgKyBUSEVNRV9DT0xPUl9UWVBFUy5qb2luKCd8JykgKyAnKScsICdnJyk7XG5cbiAgLy8gU29ydCB0aGUgcnVsZXMgYmFzZWQgb24gdHlwZSwgYWxsb3dpbmcgdXMgdG8gZG8gY29sb3Igc3Vic3RpdHV0aW9uIG9uIGEgcGVyLXR5cGUgYmFzaXNcbiAgcnVsZXMuZm9yRWFjaChmdW5jdGlvbihydWxlKSB7XG4gICAgdmFyIG1hdGNoID0gcnVsZS5tYXRjaChydWxlTWF0Y2hSZWdleCk7XG4gICAgLy8gRmlyc3Q6IHRlc3QgdGhhdCBpZiB0aGUgcnVsZSBoYXMgJy5tZC1hY2NlbnQnLCBpdCBnb2VzIGludG8gdGhlIGFjY2VudCBzZXQgb2YgcnVsZXNcbiAgICBmb3IgKHZhciBpID0gMCwgdHlwZTsgdHlwZSA9IFRIRU1FX0NPTE9SX1RZUEVTW2ldOyBpKyspIHtcbiAgICAgIGlmIChydWxlLmluZGV4T2YoJy5tZC0nICsgdHlwZSkgPiAtMSkge1xuICAgICAgICByZXR1cm4gcnVsZXNCeVR5cGVbdHlwZV0gKz0gcnVsZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBubyBlZyAnbWQtYWNjZW50JyBjbGFzcyBpcyBmb3VuZCwgdHJ5IHRvIGp1c3QgZmluZCAnYWNjZW50JyBpbiB0aGUgcnVsZSBhbmQgZ3Vlc3MgZnJvbVxuICAgIC8vIHRoZXJlXG4gICAgZm9yIChpID0gMDsgdHlwZSA9IFRIRU1FX0NPTE9SX1RZUEVTW2ldOyBpKyspIHtcbiAgICAgIGlmIChydWxlLmluZGV4T2YodHlwZSkgPiAtMSkge1xuICAgICAgICByZXR1cm4gcnVsZXNCeVR5cGVbdHlwZV0gKz0gcnVsZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IHRvIHRoZSBwcmltYXJ5IGFycmF5XG4gICAgcmV0dXJuIHJ1bGVzQnlUeXBlW0RFRkFVTFRfQ09MT1JfVFlQRV0gKz0gcnVsZTtcbiAgfSk7XG5cbiAgdmFyIHN0eWxlU3RyaW5nID0gJyc7XG5cbiAgLy8gRm9yIGVhY2ggdGhlbWUsIHVzZSB0aGUgY29sb3IgcGFsZXR0ZXMgc3BlY2lmaWVkIGZvciBgcHJpbWFyeWAsIGB3YXJuYCBhbmQgYGFjY2VudGBcbiAgLy8gdG8gZ2VuZXJhdGUgQ1NTIHJ1bGVzLlxuICBhbmd1bGFyLmZvckVhY2goVEhFTUVTLCBmdW5jdGlvbih0aGVtZSkge1xuICAgIFRIRU1FX0NPTE9SX1RZUEVTLmZvckVhY2goZnVuY3Rpb24oY29sb3JUeXBlKSB7XG4gICAgICBzdHlsZVN0cmluZyArPSBwYXJzZVJ1bGVzKHRoZW1lLCBjb2xvclR5cGUsIHJ1bGVzQnlUeXBlW2NvbG9yVHlwZV0gKyAnJyk7XG4gICAgfSk7XG4gICAgaWYgKHRoZW1lLmNvbG9ycy5wcmltYXJ5Lm5hbWUgPT0gdGhlbWUuY29sb3JzLmFjY2VudC5uYW1lKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCIkbWRUaGVtaW5nUHJvdmlkZXI6IFVzaW5nIHRoZSBzYW1lIHBhbGV0dGUgZm9yIHByaW1hcnkgYW5kXCIgK1xuICAgICAgICAgICAgICAgICAgIFwiYWNjZW50LiBUaGlzIHZpb2xhdGVzIHRoZSBtYXRlcmlhbCBkZXNpZ24gc3BlYy5cIik7XG4gICAgfVxuICB9KTtcblxuICAvLyBJbnNlcnQgb3VyIG5ld2x5IG1pbnRlZCBzdHlsZXMgaW50byB0aGUgRE9NXG4gIGlmICghZ2VuZXJhdGlvbklzRG9uZSkge1xuICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGUuaW5uZXJIVE1MID0gc3R5bGVTdHJpbmc7XG4gICAgdmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBoZWFkLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICBnZW5lcmF0aW9uSXNEb25lID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIFRoZSB1c2VyIHNwZWNpZmllcyBhICdkZWZhdWx0JyBjb250cmFzdCBjb2xvciBhcyBlaXRoZXIgbGlnaHQgb3IgZGFyayxcbiAgLy8gdGhlbiBleHBsaWNpdGx5IGxpc3RzIHdoaWNoIGh1ZXMgYXJlIHRoZSBvcHBvc2l0ZSBjb250cmFzdCAoZWcuIEExMDAgaGFzIGRhcmssIEEyMDAgaGFzIGxpZ2h0KVxuICBmdW5jdGlvbiBzYW5pdGl6ZVBhbGV0dGUocGFsZXR0ZSkge1xuICAgIHZhciBkZWZhdWx0Q29udHJhc3QgPSBwYWxldHRlLmNvbnRyYXN0RGVmYXVsdENvbG9yO1xuICAgIHZhciBsaWdodENvbG9ycyA9IHBhbGV0dGUuY29udHJhc3RMaWdodENvbG9ycyB8fCBbXTtcbiAgICB2YXIgc3Ryb25nTGlnaHRDb2xvcnMgPSBwYWxldHRlLmNvbnRyYXN0U3Ryb25nTGlnaHRDb2xvcnMgfHwgW107XG4gICAgdmFyIGRhcmtDb2xvcnMgPSBwYWxldHRlLmNvbnRyYXN0RGFya0NvbG9ycyB8fCBbXTtcblxuICAgIC8vIFRoZXNlIGNvbG9ycyBhcmUgcHJvdmlkZWQgYXMgc3BhY2Utc2VwYXJhdGVkIGxpc3RzXG4gICAgaWYgKHR5cGVvZiBsaWdodENvbG9ycyA9PT0gJ3N0cmluZycpIGxpZ2h0Q29sb3JzID0gbGlnaHRDb2xvcnMuc3BsaXQoJyAnKTtcbiAgICBpZiAodHlwZW9mIHN0cm9uZ0xpZ2h0Q29sb3JzID09PSAnc3RyaW5nJykgc3Ryb25nTGlnaHRDb2xvcnMgPSBzdHJvbmdMaWdodENvbG9ycy5zcGxpdCgnICcpO1xuICAgIGlmICh0eXBlb2YgZGFya0NvbG9ycyA9PT0gJ3N0cmluZycpIGRhcmtDb2xvcnMgPSBkYXJrQ29sb3JzLnNwbGl0KCcgJyk7XG5cbiAgICAvLyBDbGVhbnVwIGFmdGVyIG91cnNlbHZlc1xuICAgIGRlbGV0ZSBwYWxldHRlLmNvbnRyYXN0RGVmYXVsdENvbG9yO1xuICAgIGRlbGV0ZSBwYWxldHRlLmNvbnRyYXN0TGlnaHRDb2xvcnM7XG4gICAgZGVsZXRlIHBhbGV0dGUuY29udHJhc3RTdHJvbmdMaWdodENvbG9ycztcbiAgICBkZWxldGUgcGFsZXR0ZS5jb250cmFzdERhcmtDb2xvcnM7XG5cbiAgICAvLyBDaGFuZ2UgeyAnQTEwMCc6ICcjZmZmZWVlJyB9IHRvIHsgJ0ExMDAnOiB7IHZhbHVlOiAnI2ZmZmVlZScsIGNvbnRyYXN0OkRBUktfQ09OVFJBU1RfQ09MT1IgfVxuICAgIGFuZ3VsYXIuZm9yRWFjaChwYWxldHRlLCBmdW5jdGlvbihodWVWYWx1ZSwgaHVlTmFtZSkge1xuICAgICAgaWYgKGFuZ3VsYXIuaXNPYmplY3QoaHVlVmFsdWUpKSByZXR1cm47IC8vIEFscmVhZHkgY29udmVydGVkXG4gICAgICAvLyBNYXAgZXZlcnl0aGluZyB0byByZ2IgY29sb3JzXG4gICAgICB2YXIgcmdiVmFsdWUgPSBjb2xvclRvUmdiYUFycmF5KGh1ZVZhbHVlKTtcbiAgICAgIGlmICghcmdiVmFsdWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29sb3IgJTEsIGluIHBhbGV0dGUgJTIncyBodWUgJTMsIGlzIGludmFsaWQuIEhleCBvciByZ2IoYSkgY29sb3IgZXhwZWN0ZWQuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCclMScsIGh1ZVZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJyUyJywgcGFsZXR0ZS5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJyUzJywgaHVlTmFtZSkpO1xuICAgICAgfVxuXG4gICAgICBwYWxldHRlW2h1ZU5hbWVdID0ge1xuICAgICAgICB2YWx1ZTogcmdiVmFsdWUsXG4gICAgICAgIGNvbnRyYXN0OiBnZXRDb250cmFzdENvbG9yKClcbiAgICAgIH07XG4gICAgICBmdW5jdGlvbiBnZXRDb250cmFzdENvbG9yKCkge1xuICAgICAgICBpZiAoZGVmYXVsdENvbnRyYXN0ID09PSAnbGlnaHQnKSB7XG4gICAgICAgICAgaWYgKGRhcmtDb2xvcnMuaW5kZXhPZihodWVOYW1lKSA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gREFSS19DT05UUkFTVF9DT0xPUjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN0cm9uZ0xpZ2h0Q29sb3JzLmluZGV4T2YoaHVlTmFtZSkgPiAtMSA/IFNUUk9OR19MSUdIVF9DT05UUkFTVF9DT0xPUiBcbiAgICAgICAgICAgICAgOiBMSUdIVF9DT05UUkFTVF9DT0xPUjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGxpZ2h0Q29sb3JzLmluZGV4T2YoaHVlTmFtZSkgPiAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cm9uZ0xpZ2h0Q29sb3JzLmluZGV4T2YoaHVlTmFtZSkgPiAtMSA/IFNUUk9OR19MSUdIVF9DT05UUkFTVF9DT0xPUiBcbiAgICAgICAgICAgICAgOiBMSUdIVF9DT05UUkFTVF9DT0xPUjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIERBUktfQ09OVFJBU1RfQ09MT1I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxufVxuZ2VuZXJhdGVUaGVtZXMuJGluamVjdCA9IFtcIiRpbmplY3RvclwiXTtcblxuZnVuY3Rpb24gY2hlY2tWYWxpZFBhbGV0dGUodGhlbWUsIGNvbG9yVHlwZSkge1xuICAvLyBJZiB0aGVtZSBhdHRlbXB0cyB0byB1c2UgYSBwYWxldHRlIHRoYXQgZG9lc250IGV4aXN0LCB0aHJvdyBlcnJvclxuICBpZiAoIVBBTEVUVEVTWyAodGhlbWUuY29sb3JzW2NvbG9yVHlwZV0gfHwge30pLm5hbWUgXSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiWW91IHN1cHBsaWVkIGFuIGludmFsaWQgY29sb3IgcGFsZXR0ZSBmb3IgdGhlbWUgJTEncyAlMiBwYWxldHRlLiBBdmFpbGFibGUgcGFsZXR0ZXM6ICUzXCJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJyUxJywgdGhlbWUubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJyUyJywgY29sb3JUeXBlKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgnJTMnLCBPYmplY3Qua2V5cyhQQUxFVFRFUykuam9pbignLCAnKSlcbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbG9yVG9SZ2JhQXJyYXkoY2xyKSB7XG4gIGlmIChhbmd1bGFyLmlzQXJyYXkoY2xyKSAmJiBjbHIubGVuZ3RoID09IDMpIHJldHVybiBjbHI7XG4gIGlmICgvXnJnYi8udGVzdChjbHIpKSB7XG4gICAgcmV0dXJuIGNsci5yZXBsYWNlKC8oXlxccypyZ2JhP1xcKHxcXClcXHMqJCkvZywgJycpLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKHZhbHVlLCBpKSB7XG4gICAgICByZXR1cm4gaSA9PSAzID8gcGFyc2VGbG9hdCh2YWx1ZSwgMTApIDogcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICB9KTtcbiAgfVxuICBpZiAoY2xyLmNoYXJBdCgwKSA9PSAnIycpIGNsciA9IGNsci5zdWJzdHJpbmcoMSk7XG4gIGlmICghL14oW2EtZkEtRjAtOV17M30pezEsMn0kL2cudGVzdChjbHIpKSByZXR1cm47XG5cbiAgdmFyIGRpZyA9IGNsci5sZW5ndGggLyAzO1xuICB2YXIgcmVkID0gY2xyLnN1YnN0cigwLCBkaWcpO1xuICB2YXIgZ3JuID0gY2xyLnN1YnN0cihkaWcsIGRpZyk7XG4gIHZhciBibHUgPSBjbHIuc3Vic3RyKGRpZyAqIDIpO1xuICBpZiAoZGlnID09PSAxKSB7XG4gICAgcmVkICs9IHJlZDtcbiAgICBncm4gKz0gZ3JuO1xuICAgIGJsdSArPSBibHU7XG4gIH1cbiAgcmV0dXJuIFtwYXJzZUludChyZWQsIDE2KSwgcGFyc2VJbnQoZ3JuLCAxNiksIHBhcnNlSW50KGJsdSwgMTYpXTtcbn1cblxuZnVuY3Rpb24gcmdiYShyZ2JBcnJheSwgb3BhY2l0eSkge1xuICBpZiAocmdiQXJyYXkubGVuZ3RoID09IDQpIHtcbiAgICByZ2JBcnJheSA9IGFuZ3VsYXIuY29weShyZ2JBcnJheSk7XG4gICAgb3BhY2l0eSA/IHJnYkFycmF5LnBvcCgpIDogb3BhY2l0eSA9IHJnYkFycmF5LnBvcCgpO1xuICB9XG4gIHJldHVybiBvcGFjaXR5ICYmICh0eXBlb2Ygb3BhY2l0eSA9PSAnbnVtYmVyJyB8fCAodHlwZW9mIG9wYWNpdHkgPT0gJ3N0cmluZycgJiYgb3BhY2l0eS5sZW5ndGgpKSA/XG4gICAgJ3JnYmEoJyArIHJnYkFycmF5LmpvaW4oJywnKSArICcsJyArIG9wYWNpdHkgKyAnKScgOlxuICAgICdyZ2IoJyArIHJnYkFycmF5LmpvaW4oJywnKSArICcpJztcbn1cblxufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxuLypcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMuYmFja2Ryb3BcbiAqIEBkZXNjcmlwdGlvbiBCYWNrZHJvcFxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbWRCYWNrZHJvcFxuICogQG1vZHVsZSBtYXRlcmlhbC5jb21wb25lbnRzLmJhY2tkcm9wXG4gKlxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIGA8bWQtYmFja2Ryb3A+YCBpcyBhIGJhY2tkcm9wIGVsZW1lbnQgdXNlZCBieSBvdGhlciBjb3BvbmVudHMsIHN1Y2ggYXMgZGlhbG9nIGFuZCBib3R0b20gc2hlZXQuXG4gKiBBcHBseSBjbGFzcyBgb3BhcXVlYCB0byBtYWtlIHRoZSBiYWNrZHJvcCB1c2UgdGhlIHRoZW1lIGJhY2tkcm9wIGNvbG9yLlxuICpcbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy5iYWNrZHJvcCcsIFtcbiAgJ21hdGVyaWFsLmNvcmUnXG5dKVxuICAuZGlyZWN0aXZlKCdtZEJhY2tkcm9wJywgQmFja2Ryb3BEaXJlY3RpdmUpO1xuXG5mdW5jdGlvbiBCYWNrZHJvcERpcmVjdGl2ZSgkbWRUaGVtaW5nKSB7XG4gIHJldHVybiAkbWRUaGVtaW5nO1xufVxuQmFja2Ryb3BEaXJlY3RpdmUuJGluamVjdCA9IFtcIiRtZFRoZW1pbmdcIl07XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMuYm90dG9tU2hlZXRcbiAqIEBkZXNjcmlwdGlvblxuICogQm90dG9tU2hlZXRcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMuYm90dG9tU2hlZXQnLCBbXG4gICdtYXRlcmlhbC5jb3JlJyxcbiAgJ21hdGVyaWFsLmNvbXBvbmVudHMuYmFja2Ryb3AnXG5dKVxuICAuZGlyZWN0aXZlKCdtZEJvdHRvbVNoZWV0JywgTWRCb3R0b21TaGVldERpcmVjdGl2ZSlcbiAgLnByb3ZpZGVyKCckbWRCb3R0b21TaGVldCcsIE1kQm90dG9tU2hlZXRQcm92aWRlcik7XG5cbmZ1bmN0aW9uIE1kQm90dG9tU2hlZXREaXJlY3RpdmUoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJ1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbWRCb3R0b21TaGVldFxuICogQG1vZHVsZSBtYXRlcmlhbC5jb21wb25lbnRzLmJvdHRvbVNoZWV0XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgJG1kQm90dG9tU2hlZXRgIG9wZW5zIGEgYm90dG9tIHNoZWV0IG92ZXIgdGhlIGFwcCBhbmQgcHJvdmlkZXMgYSBzaW1wbGUgcHJvbWlzZSBBUEkuXG4gKlxuICogIyMjIFJlc3RyaWN0aW9uc1xuICpcbiAqIC0gVGhlIGJvdHRvbSBzaGVldCdzIHRlbXBsYXRlIG11c3QgaGF2ZSBhbiBvdXRlciBgPG1kLWJvdHRvbS1zaGVldD5gIGVsZW1lbnQuXG4gKiAtIEFkZCB0aGUgYG1kLWdyaWRgIGNsYXNzIHRvIHRoZSBib3R0b20gc2hlZXQgZm9yIGEgZ3JpZCBsYXlvdXQuXG4gKiAtIEFkZCB0aGUgYG1kLWxpc3RgIGNsYXNzIHRvIHRoZSBib3R0b20gc2hlZXQgZm9yIGEgbGlzdCBsYXlvdXQuXG4gKlxuICogQHVzYWdlXG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogPGRpdiBuZy1jb250cm9sbGVyPVwiTXlDb250cm9sbGVyXCI+XG4gKiAgIDxtZC1idXR0b24gbmctY2xpY2s9XCJvcGVuQm90dG9tU2hlZXQoKVwiPlxuICogICAgIE9wZW4gYSBCb3R0b20gU2hlZXQhXG4gKiAgIDwvbWQtYnV0dG9uPlxuICogPC9kaXY+XG4gKiA8L2hsanM+XG4gKiA8aGxqcyBsYW5nPVwianNcIj5cbiAqIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyduZ01hdGVyaWFsJ10pO1xuICogYXBwLmNvbnRyb2xsZXIoJ015Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgJG1kQm90dG9tU2hlZXQpIHtcbiAqICAgJHNjb3BlLm9wZW5Cb3R0b21TaGVldCA9IGZ1bmN0aW9uKCkge1xuICogICAgICRtZEJvdHRvbVNoZWV0LnNob3coe1xuICogICAgICAgdGVtcGxhdGU6ICc8bWQtYm90dG9tLXNoZWV0PkhlbGxvITwvbWQtYm90dG9tLXNoZWV0PidcbiAqICAgICB9KTtcbiAqICAgfTtcbiAqIH0pO1xuICogPC9obGpzPlxuICovXG5cbiAvKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRtZEJvdHRvbVNoZWV0I3Nob3dcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNob3cgYSBib3R0b20gc2hlZXQgd2l0aCB0aGUgc3BlY2lmaWVkIG9wdGlvbnMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgQW4gb3B0aW9ucyBvYmplY3QsIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBgdGVtcGxhdGVVcmxgIC0gYHtzdHJpbmc9fWA6IFRoZSB1cmwgb2YgYW4gaHRtbCB0ZW1wbGF0ZSBmaWxlIHRoYXQgd2lsbFxuICogICBiZSB1c2VkIGFzIHRoZSBjb250ZW50IG9mIHRoZSBib3R0b20gc2hlZXQuIFJlc3RyaWN0aW9uczogdGhlIHRlbXBsYXRlIG11c3RcbiAqICAgaGF2ZSBhbiBvdXRlciBgbWQtYm90dG9tLXNoZWV0YCBlbGVtZW50LlxuICogICAtIGB0ZW1wbGF0ZWAgLSBge3N0cmluZz19YDogU2FtZSBhcyB0ZW1wbGF0ZVVybCwgZXhjZXB0IHRoaXMgaXMgYW4gYWN0dWFsXG4gKiAgIHRlbXBsYXRlIHN0cmluZy5cbiAqICAgLSBgY29udHJvbGxlcmAgLSBge3N0cmluZz19YDogVGhlIGNvbnRyb2xsZXIgdG8gYXNzb2NpYXRlIHdpdGggdGhpcyBib3R0b20gc2hlZXQuXG4gKiAgIC0gYGxvY2Fsc2AgLSBge3N0cmluZz19YDogQW4gb2JqZWN0IGNvbnRhaW5pbmcga2V5L3ZhbHVlIHBhaXJzLiBUaGUga2V5cyB3aWxsXG4gKiAgIGJlIHVzZWQgYXMgbmFtZXMgb2YgdmFsdWVzIHRvIGluamVjdCBpbnRvIHRoZSBjb250cm9sbGVyLiBGb3IgZXhhbXBsZSxcbiAqICAgYGxvY2Fsczoge3RocmVlOiAzfWAgd291bGQgaW5qZWN0IGB0aHJlZWAgaW50byB0aGUgY29udHJvbGxlciB3aXRoIHRoZSB2YWx1ZVxuICogICBvZiAzLlxuICogICAtIGB0YXJnZXRFdmVudGAgLSBge0RPTUNsaWNrRXZlbnQ9fWA6IEEgY2xpY2sncyBldmVudCBvYmplY3QuIFdoZW4gcGFzc2VkIGluIGFzIGFuIG9wdGlvbixcbiAqICAgdGhlIGxvY2F0aW9uIG9mIHRoZSBjbGljayB3aWxsIGJlIHVzZWQgYXMgdGhlIHN0YXJ0aW5nIHBvaW50IGZvciB0aGUgb3BlbmluZyBhbmltYXRpb25cbiAqICAgb2YgdGhlIHRoZSBkaWFsb2cuXG4gKiAgIC0gYHJlc29sdmVgIC0gYHtvYmplY3Q9fWA6IFNpbWlsYXIgdG8gbG9jYWxzLCBleGNlcHQgaXQgdGFrZXMgcHJvbWlzZXMgYXMgdmFsdWVzXG4gKiAgIGFuZCB0aGUgYm90dG9tIHNoZWV0IHdpbGwgbm90IG9wZW4gdW50aWwgdGhlIHByb21pc2VzIHJlc29sdmUuXG4gKiAgIC0gYGNvbnRyb2xsZXJBc2AgLSBge3N0cmluZz19YDogQW4gYWxpYXMgdG8gYXNzaWduIHRoZSBjb250cm9sbGVyIHRvIG9uIHRoZSBzY29wZS5cbiAqICAgLSBgcGFyZW50YCAtIGB7ZWxlbWVudD19YDogVGhlIGVsZW1lbnQgdG8gYXBwZW5kIHRoZSBib3R0b20gc2hlZXQgdG8uIERlZmF1bHRzIHRvIGFwcGVuZGluZ1xuICogICAgIHRvIHRoZSByb290IGVsZW1lbnQgb2YgdGhlIGFwcGxpY2F0aW9uLlxuICogICAtIGBkaXNhYmxlUGFyZW50U2Nyb2xsYCAtIGB7Ym9vbGVhbj19YDogV2hldGhlciB0byBkaXNhYmxlIHNjcm9sbGluZyB3aGlsZSB0aGUgYm90dG9tIHNoZWV0IGlzIG9wZW4uXG4gKiAgICAgRGVmYXVsdCB0cnVlLlxuICpcbiAqIEByZXR1cm5zIHtwcm9taXNlfSBBIHByb21pc2UgdGhhdCBjYW4gYmUgcmVzb2x2ZWQgd2l0aCBgJG1kQm90dG9tU2hlZXQuaGlkZSgpYCBvclxuICogcmVqZWN0ZWQgd2l0aCBgJG1kQm90dG9tU2hlZXQuY2FuY2VsKClgLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJG1kQm90dG9tU2hlZXQjaGlkZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSGlkZSB0aGUgZXhpc3RpbmcgYm90dG9tIHNoZWV0IGFuZCByZXNvbHZlIHRoZSBwcm9taXNlIHJldHVybmVkIGZyb21cbiAqIGAkbWRCb3R0b21TaGVldC5zaG93KClgLlxuICpcbiAqIEBwYXJhbSB7Kj19IHJlc3BvbnNlIEFuIGFyZ3VtZW50IGZvciB0aGUgcmVzb2x2ZWQgcHJvbWlzZS5cbiAqXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkbWRCb3R0b21TaGVldCNjYW5jZWxcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEhpZGUgdGhlIGV4aXN0aW5nIGJvdHRvbSBzaGVldCBhbmQgcmVqZWN0IHRoZSBwcm9taXNlIHJldHVybmVkIGZyb21cbiAqIGAkbWRCb3R0b21TaGVldC5zaG93KClgLlxuICpcbiAqIEBwYXJhbSB7Kj19IHJlc3BvbnNlIEFuIGFyZ3VtZW50IGZvciB0aGUgcmVqZWN0ZWQgcHJvbWlzZS5cbiAqXG4gKi9cblxuZnVuY3Rpb24gTWRCb3R0b21TaGVldFByb3ZpZGVyKCQkaW50ZXJpbUVsZW1lbnRQcm92aWRlcikge1xuICAvLyBob3cgZmFzdCB3ZSBuZWVkIHRvIGZsaWNrIGRvd24gdG8gY2xvc2UgdGhlIHNoZWV0LCBwaXhlbHMvbXNcbiAgdmFyIENMT1NJTkdfVkVMT0NJVFkgPSAwLjU7XG4gIHZhciBQQURESU5HID0gODA7IC8vIHNhbWUgYXMgY3NzXG5cbiAgYm90dG9tU2hlZXREZWZhdWx0cy4kaW5qZWN0ID0gW1wiJGFuaW1hdGVcIiwgXCIkbWRDb25zdGFudFwiLCBcIiR0aW1lb3V0XCIsIFwiJCRyQUZcIiwgXCIkY29tcGlsZVwiLCBcIiRtZFRoZW1pbmdcIiwgXCIkbWRCb3R0b21TaGVldFwiLCBcIiRyb290RWxlbWVudFwiLCBcIiRyb290U2NvcGVcIiwgXCIkbWRHZXN0dXJlXCJdO1xuICByZXR1cm4gJCRpbnRlcmltRWxlbWVudFByb3ZpZGVyKCckbWRCb3R0b21TaGVldCcpXG4gICAgLnNldERlZmF1bHRzKHtcbiAgICAgIG1ldGhvZHM6IFsnZGlzYWJsZVBhcmVudFNjcm9sbCcsICdlc2NhcGVUb0Nsb3NlJywgJ3RhcmdldEV2ZW50J10sXG4gICAgICBvcHRpb25zOiBib3R0b21TaGVldERlZmF1bHRzXG4gICAgfSk7XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGJvdHRvbVNoZWV0RGVmYXVsdHMoJGFuaW1hdGUsICRtZENvbnN0YW50LCAkdGltZW91dCwgJCRyQUYsICRjb21waWxlLCAkbWRUaGVtaW5nLCAkbWRCb3R0b21TaGVldCwgJHJvb3RFbGVtZW50LCAkcm9vdFNjb3BlLCAkbWRHZXN0dXJlKSB7XG4gICAgdmFyIGJhY2tkcm9wO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRoZW1hYmxlOiB0cnVlLFxuICAgICAgdGFyZ2V0RXZlbnQ6IG51bGwsXG4gICAgICBvblNob3c6IG9uU2hvdyxcbiAgICAgIG9uUmVtb3ZlOiBvblJlbW92ZSxcbiAgICAgIGVzY2FwZVRvQ2xvc2U6IHRydWUsXG4gICAgICBkaXNhYmxlUGFyZW50U2Nyb2xsOiB0cnVlXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG9uU2hvdyhzY29wZSwgZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgLy8gQWRkIGEgYmFja2Ryb3AgdGhhdCB3aWxsIGNsb3NlIG9uIGNsaWNrXG4gICAgICBiYWNrZHJvcCA9ICRjb21waWxlKCc8bWQtYmFja2Ryb3AgY2xhc3M9XCJtZC1vcGFxdWUgbWQtYm90dG9tLXNoZWV0LWJhY2tkcm9wXCI+Jykoc2NvcGUpO1xuICAgICAgYmFja2Ryb3Aub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICR0aW1lb3V0KCRtZEJvdHRvbVNoZWV0LmNhbmNlbCk7XG4gICAgICB9KTtcblxuICAgICAgJG1kVGhlbWluZy5pbmhlcml0KGJhY2tkcm9wLCBvcHRpb25zLnBhcmVudCk7XG5cbiAgICAgICRhbmltYXRlLmVudGVyKGJhY2tkcm9wLCBvcHRpb25zLnBhcmVudCwgbnVsbCk7XG5cbiAgICAgIHZhciBib3R0b21TaGVldCA9IG5ldyBCb3R0b21TaGVldChlbGVtZW50LCBvcHRpb25zLnBhcmVudCk7XG4gICAgICBvcHRpb25zLmJvdHRvbVNoZWV0ID0gYm90dG9tU2hlZXQ7XG5cbiAgICAgIC8vIEdpdmUgdXAgZm9jdXMgb24gY2FsbGluZyBpdGVtXG4gICAgICBvcHRpb25zLnRhcmdldEV2ZW50ICYmIGFuZ3VsYXIuZWxlbWVudChvcHRpb25zLnRhcmdldEV2ZW50LnRhcmdldCkuYmx1cigpO1xuICAgICAgJG1kVGhlbWluZy5pbmhlcml0KGJvdHRvbVNoZWV0LmVsZW1lbnQsIG9wdGlvbnMucGFyZW50KTtcblxuICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZVBhcmVudFNjcm9sbCkge1xuICAgICAgICBvcHRpb25zLmxhc3RPdmVyZmxvdyA9IG9wdGlvbnMucGFyZW50LmNzcygnb3ZlcmZsb3cnKTtcbiAgICAgICAgb3B0aW9ucy5wYXJlbnQuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICRhbmltYXRlLmVudGVyKGJvdHRvbVNoZWV0LmVsZW1lbnQsIG9wdGlvbnMucGFyZW50KVxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgZm9jdXNhYmxlID0gYW5ndWxhci5lbGVtZW50KFxuICAgICAgICAgICAgZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdidXR0b24nKSB8fFxuICAgICAgICAgICAgZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdhJykgfHxcbiAgICAgICAgICAgIGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignW25nLWNsaWNrXScpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBmb2N1c2FibGUuZm9jdXMoKTtcblxuICAgICAgICAgIGlmIChvcHRpb25zLmVzY2FwZVRvQ2xvc2UpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucm9vdEVsZW1lbnRLZXl1cENhbGxiYWNrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAkbWRDb25zdGFudC5LRVlfQ09ERS5FU0NBUEUpIHtcbiAgICAgICAgICAgICAgICAkdGltZW91dCgkbWRCb3R0b21TaGVldC5jYW5jZWwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJHJvb3RFbGVtZW50Lm9uKCdrZXl1cCcsIG9wdGlvbnMucm9vdEVsZW1lbnRLZXl1cENhbGxiYWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25SZW1vdmUoc2NvcGUsIGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBib3R0b21TaGVldCA9IG9wdGlvbnMuYm90dG9tU2hlZXQ7XG5cblxuICAgICAgJGFuaW1hdGUubGVhdmUoYmFja2Ryb3ApO1xuICAgICAgcmV0dXJuICRhbmltYXRlLmxlYXZlKGJvdHRvbVNoZWV0LmVsZW1lbnQpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmRpc2FibGVQYXJlbnRTY3JvbGwpIHtcbiAgICAgICAgICBvcHRpb25zLnBhcmVudC5jc3MoJ292ZXJmbG93Jywgb3B0aW9ucy5sYXN0T3ZlcmZsb3cpO1xuICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmxhc3RPdmVyZmxvdztcbiAgICAgICAgfVxuXG4gICAgICAgIGJvdHRvbVNoZWV0LmNsZWFudXAoKTtcblxuICAgICAgICAvLyBSZXN0b3JlIGZvY3VzXG4gICAgICAgIG9wdGlvbnMudGFyZ2V0RXZlbnQgJiYgYW5ndWxhci5lbGVtZW50KG9wdGlvbnMudGFyZ2V0RXZlbnQudGFyZ2V0KS5mb2N1cygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQm90dG9tU2hlZXQgY2xhc3MgdG8gYXBwbHkgYm90dG9tLXNoZWV0IGJlaGF2aW9yIHRvIGFuIGVsZW1lbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCb3R0b21TaGVldChlbGVtZW50LCBwYXJlbnQpIHtcbiAgICAgIHZhciBkZXJlZ2lzdGVyID0gJG1kR2VzdHVyZS5yZWdpc3RlcihwYXJlbnQsICdkcmFnJywgeyBob3Jpem9udGFsOiBmYWxzZSB9KTtcbiAgICAgIHBhcmVudC5vbignJG1kLmRyYWdzdGFydCcsIG9uRHJhZ1N0YXJ0KVxuICAgICAgICAub24oJyRtZC5kcmFnJywgb25EcmFnKVxuICAgICAgICAub24oJyRtZC5kcmFnZW5kJywgb25EcmFnRW5kKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgICAgICBkZXJlZ2lzdGVyKCk7XG4gICAgICAgICAgcGFyZW50Lm9mZignJG1kLmRyYWdzdGFydCcsIG9uRHJhZ1N0YXJ0KVxuICAgICAgICAgICAgLm9mZignJG1kLmRyYWcnLCBvbkRyYWcpXG4gICAgICAgICAgICAub2ZmKCckbWQuZHJhZ2VuZCcsIG9uRHJhZ0VuZCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KGV2KSB7XG4gICAgICAgIC8vIERpc2FibGUgdHJhbnNpdGlvbnMgb24gdHJhbnNmb3JtIHNvIHRoYXQgaXQgZmVlbHMgZmFzdFxuICAgICAgICBlbGVtZW50LmNzcygkbWRDb25zdGFudC5DU1MuVFJBTlNJVElPTl9EVVJBVElPTiwgJzBtcycpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbkRyYWcoZXYpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IGV2LnBvaW50ZXIuZGlzdGFuY2VZO1xuICAgICAgICBpZiAodHJhbnNmb3JtIDwgNSkge1xuICAgICAgICAgIC8vIFNsb3cgZG93biBkcmFnIHdoZW4gdHJ5aW5nIHRvIGRyYWcgdXAsIGFuZCBzdG9wIGFmdGVyIFBBRERJTkdcbiAgICAgICAgICB0cmFuc2Zvcm0gPSBNYXRoLm1heCgtUEFERElORywgdHJhbnNmb3JtIC8gMik7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC5jc3MoJG1kQ29uc3RhbnQuQ1NTLlRSQU5TRk9STSwgJ3RyYW5zbGF0ZTNkKDAsJyArIChQQURESU5HICsgdHJhbnNmb3JtKSArICdweCwwKScpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbkRyYWdFbmQoZXYpIHtcbiAgICAgICAgaWYgKGV2LnBvaW50ZXIuZGlzdGFuY2VZID4gMCAmJlxuICAgICAgICAgICAgKGV2LnBvaW50ZXIuZGlzdGFuY2VZID4gMjAgfHwgTWF0aC5hYnMoZXYucG9pbnRlci52ZWxvY2l0eVkpID4gQ0xPU0lOR19WRUxPQ0lUWSkpIHtcbiAgICAgICAgICB2YXIgZGlzdGFuY2VSZW1haW5pbmcgPSBlbGVtZW50LnByb3AoJ29mZnNldEhlaWdodCcpIC0gZXYucG9pbnRlci5kaXN0YW5jZVk7XG4gICAgICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IE1hdGgubWluKGRpc3RhbmNlUmVtYWluaW5nIC8gZXYucG9pbnRlci52ZWxvY2l0eVkgKiAwLjc1LCA1MDApO1xuICAgICAgICAgIGVsZW1lbnQuY3NzKCRtZENvbnN0YW50LkNTUy5UUkFOU0lUSU9OX0RVUkFUSU9OLCB0cmFuc2l0aW9uRHVyYXRpb24gKyAnbXMnKTtcbiAgICAgICAgICAkdGltZW91dCgkbWRCb3R0b21TaGVldC5jYW5jZWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQuY3NzKCRtZENvbnN0YW50LkNTUy5UUkFOU0lUSU9OX0RVUkFUSU9OLCAnJyk7XG4gICAgICAgICAgZWxlbWVudC5jc3MoJG1kQ29uc3RhbnQuQ1NTLlRSQU5TRk9STSwgJycpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxufVxuTWRCb3R0b21TaGVldFByb3ZpZGVyLiRpbmplY3QgPSBbXCIkJGludGVyaW1FbGVtZW50UHJvdmlkZXJcIl07XG5cbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbWF0ZXJpYWwuY29tcG9uZW50cy5idXR0b25cbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEJ1dHRvblxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy5idXR0b24nLCBbXG4gICdtYXRlcmlhbC5jb3JlJ1xuXSlcbiAgLmRpcmVjdGl2ZSgnbWRCdXR0b24nLCBNZEJ1dHRvbkRpcmVjdGl2ZSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbWRCdXR0b25cbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5idXR0b25cbiAqXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogYDxtZC1idXR0b24+YCBpcyBhIGJ1dHRvbiBkaXJlY3RpdmUgd2l0aCBvcHRpb25hbCBpbmsgcmlwcGxlcyAoZGVmYXVsdCBlbmFibGVkKS5cbiAqXG4gKiBJZiB5b3Ugc3VwcGx5IGEgYGhyZWZgIG9yIGBuZy1ocmVmYCBhdHRyaWJ1dGUsIGl0IHdpbGwgYmVjb21lIGFuIGA8YT5gIGVsZW1lbnQuIE90aGVyd2lzZSwgaXQgd2lsbFxuICogYmVjb21lIGEgYDxidXR0b24+YCBlbGVtZW50LlxuICpcbiAqIEFzIHBlciB0aGUgW21hdGVyaWFsIGRlc2lnbiBzcGVjXShodHRwOi8vd3d3Lmdvb2dsZS5jb20vZGVzaWduL3NwZWMvc3R5bGUvY29sb3IuaHRtbCNjb2xvci11aS1jb2xvci1hcHBsaWNhdGlvbilcbiAqIHRoZSBGQUIgYnV0dG9uIGlzIGluIHRoZSBhY2NlbnQgY29sb3IgYnkgZGVmYXVsdC4gVGhlIHByaW1hcnkgY29sb3IgcGFsZXR0ZSBtYXkgYmUgdXNlZCB3aXRoXG4gKiB0aGUgYG1kLXByaW1hcnlgIGNsYXNzLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG1kLW5vLWluayBJZiBwcmVzZW50LCBkaXNhYmxlIHJpcHBsZSBpbmsgZWZmZWN0cy5cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nLWRpc2FibGVkIEVuL0Rpc2FibGUgYmFzZWQgb24gdGhlIGV4cHJlc3Npb25cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWQtcmlwcGxlLXNpemUgT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJpcHBsZSBzaXplIGxvZ2ljLiBPcHRpb25zOiBgZnVsbGAsIGBwYXJ0aWFsYCwgYGF1dG9gXG4gKiBAcGFyYW0ge3N0cmluZz19IGFyaWEtbGFiZWwgQWRkcyBhbHRlcm5hdGl2ZSB0ZXh0IHRvIGJ1dHRvbiBmb3IgYWNjZXNzaWJpbGl0eSwgdXNlZnVsIGZvciBpY29uIGJ1dHRvbnMuXG4gKiBJZiBubyBkZWZhdWx0IHRleHQgaXMgZm91bmQsIGEgd2FybmluZyB3aWxsIGJlIGxvZ2dlZC5cbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiAgPG1kLWJ1dHRvbj5cbiAqICAgIEJ1dHRvblxuICogIDwvbWQtYnV0dG9uPlxuICogIDxtZC1idXR0b24gaHJlZj1cImh0dHA6Ly9nb29nbGUuY29tXCIgY2xhc3M9XCJtZC1idXR0b24tY29sb3JlZFwiPlxuICogICAgSSdtIGEgbGlua1xuICogIDwvbWQtYnV0dG9uPlxuICogIDxtZC1idXR0b24gbmctZGlzYWJsZWQ9XCJ0cnVlXCIgY2xhc3M9XCJtZC1jb2xvcmVkXCI+XG4gKiAgICBJJ20gYSBkaXNhYmxlZCBidXR0b25cbiAqICA8L21kLWJ1dHRvbj5cbiAqIDwvaGxqcz5cbiAqL1xuZnVuY3Rpb24gTWRCdXR0b25EaXJlY3RpdmUoJG1kSW5rUmlwcGxlLCAkbWRUaGVtaW5nLCAkbWRBcmlhKSB7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZTogZ2V0VGVtcGxhdGUsXG4gICAgbGluazogcG9zdExpbmtcbiAgfTtcblxuICBmdW5jdGlvbiBpc0FuY2hvcihhdHRyKSB7XG4gICAgcmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHIuaHJlZikgfHwgYW5ndWxhci5pc0RlZmluZWQoYXR0ci5uZ0hyZWYpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRUZW1wbGF0ZShlbGVtZW50LCBhdHRyKSB7XG4gICAgcmV0dXJuIGlzQW5jaG9yKGF0dHIpID9cbiAgICAgICAgICAgJzxhIGNsYXNzPVwibWQtYnV0dG9uXCIgbmctdHJhbnNjbHVkZT48L2E+JyA6XG4gICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwibWQtYnV0dG9uXCIgbmctdHJhbnNjbHVkZT48L2J1dHRvbj4nO1xuICB9XG5cbiAgZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICB2YXIgbm9kZSA9IGVsZW1lbnRbMF07XG4gICAgJG1kVGhlbWluZyhlbGVtZW50KTtcbiAgICAkbWRJbmtSaXBwbGUuYXR0YWNoQnV0dG9uQmVoYXZpb3Ioc2NvcGUsIGVsZW1lbnQpO1xuXG4gICAgdmFyIGVsZW1lbnRIYXNUZXh0ID0gbm9kZS50ZXh0Q29udGVudC50cmltKCk7XG4gICAgaWYgKCFlbGVtZW50SGFzVGV4dCkge1xuICAgICAgJG1kQXJpYS5leHBlY3QoZWxlbWVudCwgJ2FyaWEtbGFiZWwnKTtcbiAgICB9XG5cbiAgICAvLyBGb3IgYW5jaG9yIGVsZW1lbnRzLCB3ZSBoYXZlIHRvIHNldCB0YWJpbmRleCBtYW51YWxseSB3aGVuIHRoZSBcbiAgICAvLyBlbGVtZW50IGlzIGRpc2FibGVkXG4gICAgaWYgKGlzQW5jaG9yKGF0dHIpICYmIGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHIubmdEaXNhYmxlZCkgKSB7XG4gICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0Rpc2FibGVkLCBmdW5jdGlvbihpc0Rpc2FibGVkKSB7XG4gICAgICAgIGVsZW1lbnQuYXR0cigndGFiaW5kZXgnLCBpc0Rpc2FibGVkID8gLTEgOiAwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG59XG5NZEJ1dHRvbkRpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJG1kSW5rUmlwcGxlXCIsIFwiJG1kVGhlbWluZ1wiLCBcIiRtZEFyaWFcIl07XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMuY2FyZFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ2FyZCBjb21wb25lbnRzLlxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy5jYXJkJywgW1xuICAnbWF0ZXJpYWwuY29yZSdcbl0pXG4gIC5kaXJlY3RpdmUoJ21kQ2FyZCcsIG1kQ2FyZERpcmVjdGl2ZSk7XG5cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG1kQ2FyZFxuICogQG1vZHVsZSBtYXRlcmlhbC5jb21wb25lbnRzLmNhcmRcbiAqXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGA8bWQtY2FyZD5gIGRpcmVjdGl2ZSBpcyBhIGNvbnRhaW5lciBlbGVtZW50IHVzZWQgd2l0aGluIGA8bWQtY29udGVudD5gIGNvbnRhaW5lcnMuXG4gKlxuICogQ2FyZHMgaGF2ZSBjb25zdGFudCB3aWR0aCBhbmQgdmFyaWFibGUgaGVpZ2h0czsgd2hlcmUgdGhlIG1heGltdW0gaGVpZ2h0IGlzIGxpbWl0ZWQgdG8gd2hhdCBjYW5cbiAqIGZpdCB3aXRoaW4gYSBzaW5nbGUgdmlldyBvbiBhIHBsYXRmb3JtLCBidXQgaXQgY2FuIHRlbXBvcmFyaWx5IGV4cGFuZCBhcyBuZWVkZWRcbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiA8bWQtY2FyZD5cbiAqICA8aW1nIHNyYz1cImltZy93YXNoZWRvdXQucG5nXCIgY2xhc3M9XCJtZC1jYXJkLWltYWdlXCI+XG4gKiAgPGgyPlBhcmFjb3NtPC9oMj5cbiAqICA8cD5cbiAqICAgIFRoZSB0aXRsZXMgb2YgV2FzaGVkIE91dCdzIGJyZWFrdGhyb3VnaCBzb25nIGFuZCB0aGUgZmlyc3Qgc2luZ2xlIGZyb20gUGFyYWNvc20gc2hhcmUgdGhlICogdHdvIG1vc3QgaW1wb3J0YW50IHdvcmRzIGluIEVybmVzdCBHcmVlbmUncyBtdXNpY2FsIGxhbmd1YWdlOiBmZWVsIGl0LiBJdCdzIGEgc2ltcGxlIHJlcXVlc3QsIGFzIHdlbGwuLi5cbiAqICA8L3A+XG4gKiA8L21kLWNhcmQ+XG4gKiA8L2hsanM+XG4gKlxuICovXG5mdW5jdGlvbiBtZENhcmREaXJlY3RpdmUoJG1kVGhlbWluZykge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIpIHtcbiAgICAgICRtZFRoZW1pbmcoJGVsZW1lbnQpO1xuICAgIH1cbiAgfTtcbn1cbm1kQ2FyZERpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJG1kVGhlbWluZ1wiXTtcbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbWF0ZXJpYWwuY29tcG9uZW50cy5jaGVja2JveFxuICogQGRlc2NyaXB0aW9uIENoZWNrYm94IG1vZHVsZSFcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMuY2hlY2tib3gnLCBbXG4gICdtYXRlcmlhbC5jb3JlJ1xuXSlcbiAgLmRpcmVjdGl2ZSgnbWRDaGVja2JveCcsIE1kQ2hlY2tib3hEaXJlY3RpdmUpO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG1kQ2hlY2tib3hcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5jaGVja2JveFxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBjaGVja2JveCBkaXJlY3RpdmUgaXMgdXNlZCBsaWtlIHRoZSBub3JtYWwgW2FuZ3VsYXIgY2hlY2tib3hdKGh0dHBzOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy9pbnB1dC9pbnB1dCU1QmNoZWNrYm94JTVEKS5cbiAqXG4gKiBBcyBwZXIgdGhlIFttYXRlcmlhbCBkZXNpZ24gc3BlY10oaHR0cDovL3d3dy5nb29nbGUuY29tL2Rlc2lnbi9zcGVjL3N0eWxlL2NvbG9yLmh0bWwjY29sb3ItdWktY29sb3ItYXBwbGljYXRpb24pXG4gKiB0aGUgY2hlY2tib3ggaXMgaW4gdGhlIGFjY2VudCBjb2xvciBieSBkZWZhdWx0LiBUaGUgcHJpbWFyeSBjb2xvciBwYWxldHRlIG1heSBiZSB1c2VkIHdpdGhcbiAqIHRoZSBgbWQtcHJpbWFyeWAgY2xhc3MuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nLW1vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nLXRydWUtdmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBleHByZXNzaW9uIHNob3VsZCBiZSBzZXQgd2hlbiBzZWxlY3RlZC5cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nLWZhbHNlLXZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgc2V0IHdoZW4gbm90IHNlbGVjdGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZy1jaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlciBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICogQHBhcmFtIHtib29sZWFuPX0gbWQtbm8taW5rIFVzZSBvZiBhdHRyaWJ1dGUgaW5kaWNhdGVzIHVzZSBvZiByaXBwbGUgaW5rIGVmZmVjdHNcbiAqIEBwYXJhbSB7c3RyaW5nPX0gYXJpYS1sYWJlbCBBZGRzIGxhYmVsIHRvIGNoZWNrYm94IGZvciBhY2Nlc3NpYmlsaXR5LlxuICogRGVmYXVsdHMgdG8gY2hlY2tib3gncyB0ZXh0LiBJZiBubyBkZWZhdWx0IHRleHQgaXMgZm91bmQsIGEgd2FybmluZyB3aWxsIGJlIGxvZ2dlZC5cbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiA8bWQtY2hlY2tib3ggbmctbW9kZWw9XCJpc0NoZWNrZWRcIiBhcmlhLWxhYmVsPVwiRmluaXNoZWQ/XCI+XG4gKiAgIEZpbmlzaGVkID9cbiAqIDwvbWQtY2hlY2tib3g+XG4gKlxuICogPG1kLWNoZWNrYm94IG1kLW5vLWluayBuZy1tb2RlbD1cImhhc0lua1wiIGFyaWEtbGFiZWw9XCJObyBJbmsgRWZmZWN0c1wiPlxuICogICBObyBJbmsgRWZmZWN0c1xuICogPC9tZC1jaGVja2JveD5cbiAqXG4gKiA8bWQtY2hlY2tib3ggbmctZGlzYWJsZWQ9XCJ0cnVlXCIgbmctbW9kZWw9XCJpc0Rpc2FibGVkXCIgYXJpYS1sYWJlbD1cIkRpc2FibGVkXCI+XG4gKiAgIERpc2FibGVkXG4gKiA8L21kLWNoZWNrYm94PlxuICpcbiAqIDwvaGxqcz5cbiAqXG4gKi9cbmZ1bmN0aW9uIE1kQ2hlY2tib3hEaXJlY3RpdmUoaW5wdXREaXJlY3RpdmUsICRtZElua1JpcHBsZSwgJG1kQXJpYSwgJG1kQ29uc3RhbnQsICRtZFRoZW1pbmcsICRtZFV0aWwpIHtcbiAgaW5wdXREaXJlY3RpdmUgPSBpbnB1dERpcmVjdGl2ZVswXTtcbiAgdmFyIENIRUNLRURfQ1NTID0gJ21kLWNoZWNrZWQnO1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgdGVtcGxhdGU6IFxuICAgICAgJzxkaXYgY2xhc3M9XCJtZC1jb250YWluZXJcIiBtZC1pbmstcmlwcGxlIG1kLWluay1yaXBwbGUtY2hlY2tib3g+JyArXG4gICAgICAgICc8ZGl2IGNsYXNzPVwibWQtaWNvblwiPjwvZGl2PicgK1xuICAgICAgJzwvZGl2PicgK1xuICAgICAgJzxkaXYgbmctdHJhbnNjbHVkZSBjbGFzcz1cIm1kLWxhYmVsXCI+PC9kaXY+JyxcbiAgICBjb21waWxlOiBjb21waWxlXG4gIH07XG5cbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAvLyBQcml2YXRlIE1ldGhvZHNcbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gIGZ1bmN0aW9uIGNvbXBpbGUgKHRFbGVtZW50LCB0QXR0cnMpIHtcblxuICAgIHRBdHRycy50eXBlID0gJ2NoZWNrYm94JztcbiAgICB0QXR0cnMudGFiSW5kZXggPSAwO1xuICAgIHRFbGVtZW50LmF0dHIoJ3JvbGUnLCB0QXR0cnMudHlwZSk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG5nTW9kZWxDdHJsKSB7XG4gICAgICBuZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsIHx8ICRtZFV0aWwuZmFrZU5nTW9kZWwoKTtcbiAgICAgIHZhciBjaGVja2VkID0gZmFsc2U7XG4gICAgICAkbWRUaGVtaW5nKGVsZW1lbnQpO1xuXG4gICAgICAkbWRBcmlhLmV4cGVjdFdpdGhUZXh0KGVsZW1lbnQsICdhcmlhLWxhYmVsJyk7XG5cbiAgICAgIC8vIFJldXNlIHRoZSBvcmlnaW5hbCBpbnB1dFt0eXBlPWNoZWNrYm94XSBkaXJlY3RpdmUgZnJvbSBBbmd1bGFyIGNvcmUuXG4gICAgICAvLyBUaGlzIGlzIGEgYml0IGhhY2t5IGFzIHdlIG5lZWQgb3VyIG93biBldmVudCBsaXN0ZW5lciBhbmQgb3duIHJlbmRlclxuICAgICAgLy8gZnVuY3Rpb24uXG4gICAgICBpbnB1dERpcmVjdGl2ZS5saW5rLnByZShzY29wZSwge1xuICAgICAgICBvbjogYW5ndWxhci5ub29wLFxuICAgICAgICAwOiB7fVxuICAgICAgfSwgYXR0ciwgW25nTW9kZWxDdHJsXSk7XG5cbiAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgbGlzdGVuZXIpXG4gICAgICAgIC5vbigna2V5cHJlc3MnLCBrZXlwcmVzc0hhbmRsZXIpO1xuICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IHJlbmRlcjtcblxuICAgICAgZnVuY3Rpb24ga2V5cHJlc3NIYW5kbGVyKGV2KSB7XG4gICAgICAgIGlmKGV2LndoaWNoID09PSAkbWRDb25zdGFudC5LRVlfQ09ERS5TUEFDRSkge1xuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgbGlzdGVuZXIoZXYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBsaXN0ZW5lcihldikge1xuICAgICAgICBpZiAoZWxlbWVudFswXS5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHJldHVybjtcblxuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2hlY2tlZCA9ICFjaGVja2VkO1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoY2hlY2tlZCwgZXYgJiYgZXYudHlwZSk7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICBjaGVja2VkID0gbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZTtcbiAgICAgICAgaWYoY2hlY2tlZCkge1xuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoQ0hFQ0tFRF9DU1MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoQ0hFQ0tFRF9DU1MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuTWRDaGVja2JveERpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiaW5wdXREaXJlY3RpdmVcIiwgXCIkbWRJbmtSaXBwbGVcIiwgXCIkbWRBcmlhXCIsIFwiJG1kQ29uc3RhbnRcIiwgXCIkbWRUaGVtaW5nXCIsIFwiJG1kVXRpbFwiXTtcblxufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBtYXRlcmlhbC5jb21wb25lbnRzLmNvbnRlbnRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNjcm9sbGFibGUgY29udGVudFxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy5jb250ZW50JywgW1xuICAnbWF0ZXJpYWwuY29yZSdcbl0pXG4gIC5kaXJlY3RpdmUoJ21kQ29udGVudCcsIG1kQ29udGVudERpcmVjdGl2ZSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbWRDb250ZW50XG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvbXBvbmVudHMuY29udGVudFxuICpcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYDxtZC1jb250ZW50PmAgZGlyZWN0aXZlIGlzIGEgY29udGFpbmVyIGVsZW1lbnQgdXNlZnVsIGZvciBzY3JvbGxhYmxlIGNvbnRlbnRcbiAqXG4gKiAjIyMgUmVzdHJpY3Rpb25zXG4gKlxuICogLSBBZGQgdGhlIGBtZC1wYWRkaW5nYCBjbGFzcyB0byBtYWtlIHRoZSBjb250ZW50IHBhZGRlZC5cbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiAgPG1kLWNvbnRlbnQgY2xhc3M9XCJtZC1wYWRkaW5nXCI+XG4gKiAgICAgIExvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBuZSBxdW9kIG5vdnVtIG1laS5cbiAqICA8L21kLWNvbnRlbnQ+XG4gKiA8L2hsanM+XG4gKlxuICovXG5cbmZ1bmN0aW9uIG1kQ29udGVudERpcmVjdGl2ZSgkbWRUaGVtaW5nKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICckZWxlbWVudCcsIENvbnRlbnRDb250cm9sbGVyXSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgdmFyIG5vZGUgPSBlbGVtZW50WzBdO1xuXG4gICAgICAkbWRUaGVtaW5nKGVsZW1lbnQpO1xuICAgICAgc2NvcGUuJGJyb2FkY2FzdCgnJG1kQ29udGVudExvYWRlZCcsIGVsZW1lbnQpO1xuXG4gICAgICBpb3NTY3JvbGxGaXgoZWxlbWVudFswXSk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIENvbnRlbnRDb250cm9sbGVyKCRzY29wZSwgJGVsZW1lbnQpIHtcbiAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gIH1cbn1cbm1kQ29udGVudERpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJG1kVGhlbWluZ1wiXTtcblxuZnVuY3Rpb24gaW9zU2Nyb2xsRml4KG5vZGUpIHtcbiAgLy8gSU9TIEZJWDpcbiAgLy8gSWYgd2Ugc2Nyb2xsIHdoZXJlIHRoZXJlIGlzIG5vIG1vcmUgcm9vbSBmb3IgdGhlIHdlYnZpZXcgdG8gc2Nyb2xsLFxuICAvLyBieSBkZWZhdWx0IHRoZSB3ZWJ2aWV3IGl0c2VsZiB3aWxsIHNjcm9sbCB1cCBhbmQgZG93biwgdGhpcyBsb29rcyByZWFsbHlcbiAgLy8gYmFkLiAgU28gaWYgd2UgYXJlIHNjcm9sbGluZyB0byB0aGUgdmVyeSB0b3Agb3IgYm90dG9tLCBhZGQvc3VidHJhY3Qgb25lXG4gIGFuZ3VsYXIuZWxlbWVudChub2RlKS5vbignJG1kLnByZXNzZG93bicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgLy8gT25seSB0b3VjaCBldmVudHNcbiAgICBpZiAoZXYucG9pbnRlci50eXBlICE9PSAndCcpIHJldHVybjtcbiAgICAvLyBEb24ndCBsZXQgYSBjaGlsZCBjb250ZW50J3MgdG91Y2hzdGFydCBydWluIGl0IGZvciB1cy5cbiAgICBpZiAoZXYuJG1hdGVyaWFsU2Nyb2xsRml4ZWQpIHJldHVybjtcbiAgICBldi4kbWF0ZXJpYWxTY3JvbGxGaXhlZCA9IHRydWU7XG5cbiAgICBpZiAobm9kZS5zY3JvbGxUb3AgPT09IDApIHtcbiAgICAgIG5vZGUuc2Nyb2xsVG9wID0gMTtcbiAgICB9IGVsc2UgaWYgKG5vZGUuc2Nyb2xsSGVpZ2h0ID09PSBub2RlLnNjcm9sbFRvcCArIG5vZGUub2Zmc2V0SGVpZ2h0KSB7XG4gICAgICBub2RlLnNjcm9sbFRvcCAtPSAxO1xuICAgIH1cbiAgfSk7XG59XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMuZGlhbG9nXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb21wb25lbnRzLmRpYWxvZycsIFtcbiAgJ21hdGVyaWFsLmNvcmUnLFxuICAnbWF0ZXJpYWwuY29tcG9uZW50cy5iYWNrZHJvcCdcbl0pXG4gIC5kaXJlY3RpdmUoJ21kRGlhbG9nJywgTWREaWFsb2dEaXJlY3RpdmUpXG4gIC5wcm92aWRlcignJG1kRGlhbG9nJywgTWREaWFsb2dQcm92aWRlcik7XG5cbmZ1bmN0aW9uIE1kRGlhbG9nRGlyZWN0aXZlKCQkckFGLCAkbWRUaGVtaW5nKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgJG1kVGhlbWluZyhlbGVtZW50KTtcbiAgICAgICQkckFGKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY29udGVudCA9IGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignbWQtY29udGVudCcpO1xuICAgICAgICBpZiAoY29udGVudCAmJiBjb250ZW50LnNjcm9sbEhlaWdodCA+IGNvbnRlbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnbWQtY29udGVudC1vdmVyZmxvdycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5NZERpYWxvZ0RpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJCRyQUZcIiwgXCIkbWRUaGVtaW5nXCJdO1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbWREaWFsb2dcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5kaWFsb2dcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIGAkbWREaWFsb2dgIG9wZW5zIGEgZGlhbG9nIG92ZXIgdGhlIGFwcCBhbmQgcHJvdmlkZXMgYSBzaW1wbGUgcHJvbWlzZSBBUEkuXG4gKlxuICogIyMjIFJlc3RyaWN0aW9uc1xuICpcbiAqIC0gVGhlIGRpYWxvZyBpcyBhbHdheXMgZ2l2ZW4gYW4gaXNvbGF0ZSBzY29wZS5cbiAqIC0gVGhlIGRpYWxvZydzIHRlbXBsYXRlIG11c3QgaGF2ZSBhbiBvdXRlciBgPG1kLWRpYWxvZz5gIGVsZW1lbnQuXG4gKiAgIEluc2lkZSwgdXNlIGFuIGA8bWQtY29udGVudD5gIGVsZW1lbnQgZm9yIHRoZSBkaWFsb2cncyBjb250ZW50LCBhbmQgdXNlXG4gKiAgIGFuIGVsZW1lbnQgd2l0aCBjbGFzcyBgbWQtYWN0aW9uc2AgZm9yIHRoZSBkaWFsb2cncyBhY3Rpb25zLlxuICpcbiAqIEB1c2FnZVxuICogIyMjIyBIVE1MXG4gKlxuICogPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqIDxkaXYgIG5nLWFwcD1cImRlbW9BcHBcIiBuZy1jb250cm9sbGVyPVwiRW1wbG95ZWVDb250cm9sbGVyXCI+XG4gKiAgIDxtZC1idXR0b24gbmctY2xpY2s9XCJzaG93QWxlcnQoKVwiIGNsYXNzPVwibWQtcmFpc2VkIG1kLXdhcm5cIj5cbiAqICAgICBFbXBsb3llZSBBbGVydCFcbiAqICAgPC9tZC1idXR0b24+XG4gKiAgIDxtZC1idXR0b24gbmctY2xpY2s9XCJjbG9zZUFsZXJ0KClcIiBuZy1kaXNhYmxlZD1cIiFoYXNBbGVydCgpXCIgY2xhc3M9XCJtZC1yYWlzZWRcIj5cbiAqICAgICBDbG9zZSBBbGVydFxuICogICA8L21kLWJ1dHRvbj5cbiAqICAgPG1kLWJ1dHRvbiBuZy1jbGljaz1cInNob3dHcmVldGluZygkZXZlbnQpXCIgY2xhc3M9XCJtZC1yYWlzZWQgbWQtcHJpbWFyeVwiID5cbiAqICAgICBHcmVldCBFbXBsb3llZVxuICogICA8L21kLWJ1dHRvbj5cbiAqIDwvZGl2PlxuICogPC9obGpzPlxuICpcbiAqICMjIyMgSmF2YVNjcmlwdFxuICpcbiAqIDxobGpzIGxhbmc9XCJqc1wiPlxuICogKGZ1bmN0aW9uKGFuZ3VsYXIsIHVuZGVmaW5lZCl7XG4gKiAgIFwidXNlIHN0cmljdFwiO1xuICpcbiAqICAgYW5ndWxhclxuICogICAgIC5tb2R1bGUoJ2RlbW9BcHAnLCBbJ25nTWF0ZXJpYWwnXSlcbiAqICAgICAuY29udHJvbGxlcignRW1wbG95ZWVDb250cm9sbGVyJywgRW1wbG95ZWVFZGl0b3IpXG4gKiAgICAgLmNvbnRyb2xsZXIoJ0dyZWV0aW5nQ29udHJvbGxlcicsIEdyZWV0aW5nQ29udHJvbGxlcik7XG4gKlxuICogICAvLyBGaWN0aXRpb3VzIEVtcGxveWVlIEVkaXRvciB0byBzaG93IGhvdyB0byB1c2Ugc2ltcGxlIGFuZCBjb21wbGV4IGRpYWxvZ3MuXG4gKlxuICogICBmdW5jdGlvbiBFbXBsb3llZUVkaXRvcigkc2NvcGUsICRtZERpYWxvZykge1xuICogICAgIHZhciBhbGVydDtcbiAqXG4gKiAgICAgJHNjb3BlLnNob3dBbGVydCA9IHNob3dBbGVydDtcbiAqICAgICAkc2NvcGUuY2xvc2VBbGVydCA9IGNsb3NlQWxlcnQ7XG4gKiAgICAgJHNjb3BlLnNob3dHcmVldGluZyA9IHNob3dDdXN0b21HcmVldGluZztcbiAqXG4gKiAgICAgJHNjb3BlLmhhc0FsZXJ0ID0gZnVuY3Rpb24oKSB7IHJldHVybiAhIWFsZXJ0IH07XG4gKiAgICAgJHNjb3BlLnVzZXJOYW1lID0gJHNjb3BlLnVzZXJOYW1lIHx8ICdCb2JieSc7XG4gKlxuICogICAgIC8vIERpYWxvZyAjMSAtIFNob3cgc2ltcGxlIGFsZXJ0IGRpYWxvZyBhbmQgY2FjaGVcbiAqICAgICAvLyByZWZlcmVuY2UgdG8gZGlhbG9nIGluc3RhbmNlXG4gKlxuICogICAgIGZ1bmN0aW9uIHNob3dBbGVydCgpIHtcbiAqICAgICAgIGFsZXJ0ID0gJG1kRGlhbG9nLmFsZXJ0KClcbiAqICAgICAgICAgLnRpdGxlKCdBdHRlbnRpb24sICcgKyAkc2NvcGUudXNlck5hbWUpXG4gKiAgICAgICAgIC5jb250ZW50KCdUaGlzIGlzIGFuIGV4YW1wbGUgb2YgaG93IGVhc3kgZGlhbG9ncyBjYW4gYmUhJylcbiAqICAgICAgICAgLm9rKCdDbG9zZScpO1xuICpcbiAqICAgICAgICRtZERpYWxvZ1xuICogICAgICAgICAgIC5zaG93KCBhbGVydCApXG4gKiAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICBhbGVydCA9IHVuZGVmaW5lZDtcbiAqICAgICAgICAgICB9KTtcbiAqICAgICB9XG4gKlxuICogICAgIC8vIENsb3NlIHRoZSBzcGVjaWZpZWQgZGlhbG9nIGluc3RhbmNlIGFuZCByZXNvbHZlIHdpdGggJ2ZpbmlzaGVkJyBmbGFnXG4gKiAgICAgLy8gTm9ybWFsbHkgdGhpcyBpcyBub3QgbmVlZGVkLCBqdXN0IHVzZSAnJG1kRGlhbG9nLmhpZGUoKScgdG8gY2xvc2VcbiAqICAgICAvLyB0aGUgbW9zdCByZWNlbnQgZGlhbG9nIHBvcHVwLlxuICpcbiAqICAgICBmdW5jdGlvbiBjbG9zZUFsZXJ0KCkge1xuICogICAgICAgJG1kRGlhbG9nLmhpZGUoIGFsZXJ0LCBcImZpbmlzaGVkXCIgKTtcbiAqICAgICAgIGFsZXJ0ID0gdW5kZWZpbmVkO1xuICogICAgIH1cbiAqXG4gKiAgICAgLy8gRGlhbG9nICMyIC0gRGVtb25zdHJhdGUgbW9yZSBjb21wbGV4IGRpYWxvZ3MgY29uc3RydWN0aW9uIGFuZCBwb3B1cC5cbiAqXG4gKiAgICAgZnVuY3Rpb24gc2hvd0N1c3RvbUdyZWV0aW5nKCRldmVudCkge1xuICogICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gKiAgICAgICAgICAgdGFyZ2V0RXZlbnQ6ICRldmVudCxcbiAqICAgICAgICAgICB0ZW1wbGF0ZTpcbiAqICAgICAgICAgICAgICc8bWQtZGlhbG9nPicgK1xuICpcbiAqICAgICAgICAgICAgICcgIDxtZC1jb250ZW50PkhlbGxvIHt7IGVtcGxveWVlIH19ITwvbWQtY29udGVudD4nICtcbiAqXG4gKiAgICAgICAgICAgICAnICA8ZGl2IGNsYXNzPVwibWQtYWN0aW9uc1wiPicgK1xuICogICAgICAgICAgICAgJyAgICA8bWQtYnV0dG9uIG5nLWNsaWNrPVwiY2xvc2VEaWFsb2coKVwiPicgK1xuICogICAgICAgICAgICAgJyAgICAgIENsb3NlIEdyZWV0aW5nJyArXG4gKlxuICogICAgICAgICAgICAgJyAgICA8L21kLWJ1dHRvbj4nICtcbiAqICAgICAgICAgICAgICcgIDwvZGl2PicgK1xuICogICAgICAgICAgICAgJzwvbWQtZGlhbG9nPicsXG4gKiAgICAgICAgICAgY29udHJvbGxlcjogJ0dyZWV0aW5nQ29udHJvbGxlcicsXG4gKiAgICAgICAgICAgb25Db21wbGV0ZTogYWZ0ZXJTaG93QW5pbWF0aW9uLFxuICogICAgICAgICAgIGxvY2FsczogeyBlbXBsb3llZTogJHNjb3BlLnVzZXJOYW1lIH1cbiAqICAgICAgICAgfSk7XG4gKlxuICogICAgICAgICAvLyBXaGVuIHRoZSAnZW50ZXInIGFuaW1hdGlvbiBmaW5pc2hlcy4uLlxuICpcbiAqICAgICAgICAgZnVuY3Rpb24gYWZ0ZXJTaG93QW5pbWF0aW9uKHNjb3BlLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gKiAgICAgICAgICAgIC8vIHBvc3Qtc2hvdyBjb2RlIGhlcmU6IERPTSBlbGVtZW50IGZvY3VzLCBldGMuXG4gKiAgICAgICAgIH1cbiAqICAgICB9XG4gKiAgIH1cbiAqXG4gKiAgIC8vIEdyZWV0aW5nIGNvbnRyb2xsZXIgdXNlZCB3aXRoIHRoZSBtb3JlIGNvbXBsZXggJ3Nob3dDdXN0b21HcmVldGluZygpJyBjdXN0b20gZGlhbG9nXG4gKlxuICogICBmdW5jdGlvbiBHcmVldGluZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGVtcGxveWVlKSB7XG4gKiAgICAgLy8gQXNzaWduZWQgZnJvbSBjb25zdHJ1Y3Rpb24gPGNvZGU+bG9jYWxzPC9jb2RlPiBvcHRpb25zLi4uXG4gKiAgICAgJHNjb3BlLmVtcGxveWVlID0gZW1wbG95ZWU7XG4gKlxuICogICAgICRzY29wZS5jbG9zZURpYWxvZyA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgLy8gRWFzaWx5IGhpZGVzIG1vc3QgcmVjZW50IGRpYWxvZyBzaG93bi4uLlxuICogICAgICAgLy8gbm8gc3BlY2lmaWMgaW5zdGFuY2UgcmVmZXJlbmNlIGlzIG5lZWRlZC5cbiAqICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gKiAgICAgfTtcbiAqICAgfVxuICpcbiAqIH0pKGFuZ3VsYXIpO1xuICogPC9obGpzPlxuICovXG5cbiAvKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRtZERpYWxvZyNhbGVydFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQnVpbGRzIGEgcHJlY29uZmlndXJlZCBkaWFsb2cgd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UuXG4gKlxuICogQHJldHVybnMge29ian0gYW4gYCRtZERpYWxvZ1ByZXNldGAgd2l0aCB0aGUgY2hhaW5hYmxlIGNvbmZpZ3VyYXRpb24gbWV0aG9kczpcbiAqXG4gKiAtICRtZERpYWxvZ1ByZXNldCN0aXRsZShzdHJpbmcpIC0gc2V0cyB0aXRsZSB0byBzdHJpbmdcbiAqIC0gJG1kRGlhbG9nUHJlc2V0I2NvbnRlbnQoc3RyaW5nKSAtIHNldHMgY29udGVudCAvIG1lc3NhZ2UgdG8gc3RyaW5nXG4gKiAtICRtZERpYWxvZ1ByZXNldCNvayhzdHJpbmcpIC0gc2V0cyBva2F5IGJ1dHRvbiB0ZXh0IHRvIHN0cmluZ1xuICpcbiAqL1xuXG4gLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkbWREaWFsb2cjY29uZmlybVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQnVpbGRzIGEgcHJlY29uZmlndXJlZCBkaWFsb2cgd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UuIFlvdSBjYW4gY2FsbCBzaG93IGFuZCB0aGUgcHJvbWlzZSByZXR1cm5lZFxuICogd2lsbCBiZSByZXNvbHZlZCBvbmx5IGlmIHRoZSB1c2VyIGNsaWNrcyB0aGUgY29uZmlybSBhY3Rpb24gb24gdGhlIGRpYWxvZy5cbiAqXG4gKiBAcmV0dXJucyB7b2JqfSBhbiBgJG1kRGlhbG9nUHJlc2V0YCB3aXRoIHRoZSBjaGFpbmFibGUgY29uZmlndXJhdGlvbiBtZXRob2RzOlxuICpcbiAqIEFkZGl0aW9uYWxseSwgaXQgc3VwcG9ydHMgdGhlIGZvbGxvd2luZyBtZXRob2RzOlxuICpcbiAqIC0gJG1kRGlhbG9nUHJlc2V0I3RpdGxlKHN0cmluZykgLSBzZXRzIHRpdGxlIHRvIHN0cmluZ1xuICogLSAkbWREaWFsb2dQcmVzZXQjY29udGVudChzdHJpbmcpIC0gc2V0cyBjb250ZW50IC8gbWVzc2FnZSB0byBzdHJpbmdcbiAqIC0gJG1kRGlhbG9nUHJlc2V0I29rKHN0cmluZykgLSBzZXRzIG9rYXkgYnV0dG9uIHRleHQgdG8gc3RyaW5nXG4gKiAtICRtZERpYWxvZ1ByZXNldCNjYW5jZWwoc3RyaW5nKSAtIHNldHMgY2FuY2VsIGJ1dHRvbiB0ZXh0IHRvIHN0cmluZ1xuICpcbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRtZERpYWxvZyNzaG93XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTaG93IGEgZGlhbG9nIHdpdGggdGhlIHNwZWNpZmllZCBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zT3JQcmVzZXQgRWl0aGVyIHByb3ZpZGUgYW4gYCRtZERpYWxvZ1ByZXNldGAgcmV0dXJuZWQgZnJvbSBgYWxlcnQoKWAsIGFuZFxuICogYGNvbmZpcm0oKWAsIG9yIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogICAtIGB0ZW1wbGF0ZVVybGAgLSBge3N0cmluZz19YDogVGhlIHVybCBvZiBhIHRlbXBsYXRlIHRoYXQgd2lsbCBiZSB1c2VkIGFzIHRoZSBjb250ZW50XG4gKiAgIG9mIHRoZSBkaWFsb2cuXG4gKiAgIC0gYHRlbXBsYXRlYCAtIGB7c3RyaW5nPX1gOiBTYW1lIGFzIHRlbXBsYXRlVXJsLCBleGNlcHQgdGhpcyBpcyBhbiBhY3R1YWwgdGVtcGxhdGUgc3RyaW5nLlxuICogICAtIGB0YXJnZXRFdmVudGAgLSBge0RPTUNsaWNrRXZlbnQ9fWA6IEEgY2xpY2sncyBldmVudCBvYmplY3QuIFdoZW4gcGFzc2VkIGluIGFzIGFuIG9wdGlvbixcbiAqICAgICB0aGUgbG9jYXRpb24gb2YgdGhlIGNsaWNrIHdpbGwgYmUgdXNlZCBhcyB0aGUgc3RhcnRpbmcgcG9pbnQgZm9yIHRoZSBvcGVuaW5nIGFuaW1hdGlvblxuICogICAgIG9mIHRoZSB0aGUgZGlhbG9nLlxuICogICAtIGBkaXNhYmxlUGFyZW50U2Nyb2xsYCAtIGB7Ym9vbGVhbj19YDogV2hldGhlciB0byBkaXNhYmxlIHNjcm9sbGluZyB3aGlsZSB0aGUgZGlhbG9nIGlzIG9wZW4uXG4gKiAgICAgRGVmYXVsdCB0cnVlLlxuICogICAtIGBoYXNCYWNrZHJvcGAgLSBge2Jvb2xlYW49fWA6IFdoZXRoZXIgdGhlcmUgc2hvdWxkIGJlIGFuIG9wYXF1ZSBiYWNrZHJvcCBiZWhpbmQgdGhlIGRpYWxvZy5cbiAqICAgICBEZWZhdWx0IHRydWUuXG4gKiAgIC0gYGNsaWNrT3V0c2lkZVRvQ2xvc2VgIC0gYHtib29sZWFuPX1gOiBXaGV0aGVyIHRoZSB1c2VyIGNhbiBjbGljayBvdXRzaWRlIHRoZSBkaWFsb2cgdG9cbiAqICAgICBjbG9zZSBpdC4gRGVmYXVsdCB0cnVlLlxuICogICAtIGBlc2NhcGVUb0Nsb3NlYCAtIGB7Ym9vbGVhbj19YDogV2hldGhlciB0aGUgdXNlciBjYW4gcHJlc3MgZXNjYXBlIHRvIGNsb3NlIHRoZSBkaWFsb2cuXG4gKiAgICAgRGVmYXVsdCB0cnVlLlxuICogICAtIGBjb250cm9sbGVyYCAtIGB7c3RyaW5nPX1gOiBUaGUgY29udHJvbGxlciB0byBhc3NvY2lhdGUgd2l0aCB0aGUgZGlhbG9nLiBUaGUgY29udHJvbGxlclxuICogICAgIHdpbGwgYmUgaW5qZWN0ZWQgd2l0aCB0aGUgbG9jYWwgYCRoaWRlRGlhbG9nYCwgd2hpY2ggaXMgYSBmdW5jdGlvbiB1c2VkIHRvIGhpZGUgdGhlIGRpYWxvZy5cbiAqICAgLSBgbG9jYWxzYCAtIGB7b2JqZWN0PX1gOiBBbiBvYmplY3QgY29udGFpbmluZyBrZXkvdmFsdWUgcGFpcnMuIFRoZSBrZXlzIHdpbGwgYmUgdXNlZCBhcyBuYW1lc1xuICogICAgIG9mIHZhbHVlcyB0byBpbmplY3QgaW50byB0aGUgY29udHJvbGxlci4gRm9yIGV4YW1wbGUsIGBsb2NhbHM6IHt0aHJlZTogM31gIHdvdWxkIGluamVjdFxuICogICAgIGB0aHJlZWAgaW50byB0aGUgY29udHJvbGxlciwgd2l0aCB0aGUgdmFsdWUgMy4gSWYgYGJpbmRUb0NvbnRyb2xsZXJgIGlzIHRydWUsIHRoZXkgd2lsbCBiZVxuICogICAgIGNvcGllZCB0byB0aGUgY29udHJvbGxlciBpbnN0ZWFkLlxuICogICAtIGBiaW5kVG9Db250cm9sbGVyYCAtIGBib29sYDogYmluZCB0aGUgbG9jYWxzIHRvIHRoZSBjb250cm9sbGVyLCBpbnN0ZWFkIG9mIHBhc3NpbmcgdGhlbSBpblxuICogICAtIGByZXNvbHZlYCAtIGB7b2JqZWN0PX1gOiBTaW1pbGFyIHRvIGxvY2FscywgZXhjZXB0IGl0IHRha2VzIHByb21pc2VzIGFzIHZhbHVlcywgYW5kIHRoZVxuICogICAgIGRpYWxvZyB3aWxsIG5vdCBvcGVuIHVudGlsIGFsbCBvZiB0aGUgcHJvbWlzZXMgcmVzb2x2ZS5cbiAqICAgLSBgY29udHJvbGxlckFzYCAtIGB7c3RyaW5nPX1gOiBBbiBhbGlhcyB0byBhc3NpZ24gdGhlIGNvbnRyb2xsZXIgdG8gb24gdGhlIHNjb3BlLlxuICogICAtIGBwYXJlbnRgIC0gYHtlbGVtZW50PX1gOiBUaGUgZWxlbWVudCB0byBhcHBlbmQgdGhlIGRpYWxvZyB0by4gRGVmYXVsdHMgdG8gYXBwZW5kaW5nXG4gKiAgICAgdG8gdGhlIHJvb3QgZWxlbWVudCBvZiB0aGUgYXBwbGljYXRpb24uXG4gKiAgIC0gYG9uQ29tcGxldGVgIGB7ZnVuY3Rpb249fWA6IENhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gYW5ub3VuY2Ugd2hlbiB0aGUgc2hvdygpIGFjdGlvbiBpc1xuICogICAgIGZpbmlzaGVkLlxuICpcbiAqIEByZXR1cm5zIHtwcm9taXNlfSBBIHByb21pc2UgdGhhdCBjYW4gYmUgcmVzb2x2ZWQgd2l0aCBgJG1kRGlhbG9nLmhpZGUoKWAgb3JcbiAqIHJlamVjdGVkIHdpdGggYG1kRGlhbG9nLmNhbmNlbCgpYC5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRtZERpYWxvZyNoaWRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIaWRlIGFuIGV4aXN0aW5nIGRpYWxvZyBhbmQgcmVzb2x2ZSB0aGUgcHJvbWlzZSByZXR1cm5lZCBmcm9tIGAkbWREaWFsb2cuc2hvdygpYC5cbiAqXG4gKiBAcGFyYW0geyo9fSByZXNwb25zZSBBbiBhcmd1bWVudCBmb3IgdGhlIHJlc29sdmVkIHByb21pc2UuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkbWREaWFsb2cjY2FuY2VsXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIaWRlIGFuIGV4aXN0aW5nIGRpYWxvZyBhbmQgcmVqZWN0IHRoZSBwcm9taXNlIHJldHVybmVkIGZyb20gYCRtZERpYWxvZy5zaG93KClgLlxuICpcbiAqIEBwYXJhbSB7Kj19IHJlc3BvbnNlIEFuIGFyZ3VtZW50IGZvciB0aGUgcmVqZWN0ZWQgcHJvbWlzZS5cbiAqL1xuXG5mdW5jdGlvbiBNZERpYWxvZ1Byb3ZpZGVyKCQkaW50ZXJpbUVsZW1lbnRQcm92aWRlcikge1xuXG4gIHZhciBhbGVydERpYWxvZ01ldGhvZHMgPSBbJ3RpdGxlJywgJ2NvbnRlbnQnLCAnYXJpYUxhYmVsJywgJ29rJ107XG5cbiAgYWR2YW5jZWREaWFsb2dPcHRpb25zLiRpbmplY3QgPSBbXCIkbWREaWFsb2dcIl07XG4gIGRpYWxvZ0RlZmF1bHRPcHRpb25zLiRpbmplY3QgPSBbXCIkdGltZW91dFwiLCBcIiRyb290RWxlbWVudFwiLCBcIiRjb21waWxlXCIsIFwiJGFuaW1hdGVcIiwgXCIkbWRBcmlhXCIsIFwiJGRvY3VtZW50XCIsIFwiJG1kVXRpbFwiLCBcIiRtZENvbnN0YW50XCIsIFwiJG1kVGhlbWluZ1wiLCBcIiQkckFGXCIsIFwiJHFcIiwgXCIkbWREaWFsb2dcIl07XG4gIHJldHVybiAkJGludGVyaW1FbGVtZW50UHJvdmlkZXIoJyRtZERpYWxvZycpXG4gICAgLnNldERlZmF1bHRzKHtcbiAgICAgIG1ldGhvZHM6IFsnZGlzYWJsZVBhcmVudFNjcm9sbCcsICdoYXNCYWNrZHJvcCcsICdjbGlja091dHNpZGVUb0Nsb3NlJywgJ2VzY2FwZVRvQ2xvc2UnLCAndGFyZ2V0RXZlbnQnXSxcbiAgICAgIG9wdGlvbnM6IGRpYWxvZ0RlZmF1bHRPcHRpb25zXG4gICAgfSlcbiAgICAuYWRkUHJlc2V0KCdhbGVydCcsIHtcbiAgICAgIG1ldGhvZHM6IFsndGl0bGUnLCAnY29udGVudCcsICdhcmlhTGFiZWwnLCAnb2snXSxcbiAgICAgIG9wdGlvbnM6IGFkdmFuY2VkRGlhbG9nT3B0aW9uc1xuICAgIH0pXG4gICAgLmFkZFByZXNldCgnY29uZmlybScsIHtcbiAgICAgIG1ldGhvZHM6IFsndGl0bGUnLCAnY29udGVudCcsICdhcmlhTGFiZWwnLCAnb2snLCAnY2FuY2VsJ10sXG4gICAgICBvcHRpb25zOiBhZHZhbmNlZERpYWxvZ09wdGlvbnNcbiAgICB9KTtcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gYWR2YW5jZWREaWFsb2dPcHRpb25zKCRtZERpYWxvZykge1xuICAgIHJldHVybiB7XG4gICAgICB0ZW1wbGF0ZTogW1xuICAgICAgICAnPG1kLWRpYWxvZyBhcmlhLWxhYmVsPVwie3sgZGlhbG9nLmFyaWFMYWJlbCB9fVwiPicsXG4gICAgICAgICAgJzxtZC1jb250ZW50PicsXG4gICAgICAgICAgICAnPGgyPnt7IGRpYWxvZy50aXRsZSB9fTwvaDI+JyxcbiAgICAgICAgICAgICc8cD57eyBkaWFsb2cuY29udGVudCB9fTwvcD4nLFxuICAgICAgICAgICc8L21kLWNvbnRlbnQ+JyxcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1kLWFjdGlvbnNcIj4nLFxuICAgICAgICAgICAgJzxtZC1idXR0b24gbmctaWY9XCJkaWFsb2cuJHR5cGUgPT0gXFwnY29uZmlybVxcJ1wiIG5nLWNsaWNrPVwiZGlhbG9nLmFib3J0KClcIj4nLFxuICAgICAgICAgICAgICAne3sgZGlhbG9nLmNhbmNlbCB9fScsXG4gICAgICAgICAgICAnPC9tZC1idXR0b24+JyxcbiAgICAgICAgICAgICc8bWQtYnV0dG9uIG5nLWNsaWNrPVwiZGlhbG9nLmhpZGUoKVwiIGNsYXNzPVwibWQtcHJpbWFyeVwiPicsXG4gICAgICAgICAgICAgICd7eyBkaWFsb2cub2sgfX0nLFxuICAgICAgICAgICAgJzwvbWQtYnV0dG9uPicsXG4gICAgICAgICAgJzwvZGl2PicsXG4gICAgICAgICc8L21kLWRpYWxvZz4nXG4gICAgICBdLmpvaW4oJycpLFxuICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gbWREaWFsb2dDdHJsKCkge1xuICAgICAgICB0aGlzLmhpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkbWREaWFsb2cuaGlkZSh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRtZERpYWxvZy5jYW5jZWwoKTtcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyQXM6ICdkaWFsb2cnLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gZGlhbG9nRGVmYXVsdE9wdGlvbnMoJHRpbWVvdXQsICRyb290RWxlbWVudCwgJGNvbXBpbGUsICRhbmltYXRlLCAkbWRBcmlhLCAkZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZFV0aWwsICRtZENvbnN0YW50LCAkbWRUaGVtaW5nLCAkJHJBRiwgJHEsICRtZERpYWxvZykge1xuICAgIHJldHVybiB7XG4gICAgICBoYXNCYWNrZHJvcDogdHJ1ZSxcbiAgICAgIGlzb2xhdGVTY29wZTogdHJ1ZSxcbiAgICAgIG9uU2hvdzogb25TaG93LFxuICAgICAgb25SZW1vdmU6IG9uUmVtb3ZlLFxuICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgIGVzY2FwZVRvQ2xvc2U6IHRydWUsXG4gICAgICB0YXJnZXRFdmVudDogbnVsbCxcbiAgICAgIGRpc2FibGVQYXJlbnRTY3JvbGw6IHRydWUsXG4gICAgICB0cmFuc2Zvcm1UZW1wbGF0ZTogZnVuY3Rpb24odGVtcGxhdGUpIHtcbiAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwibWQtZGlhbG9nLWNvbnRhaW5lclwiPicgKyB0ZW1wbGF0ZSArICc8L2Rpdj4nO1xuICAgICAgfVxuICAgIH07XG5cblxuICAgIC8vIE9uIHNob3cgbWV0aG9kIGZvciBkaWFsb2dzXG4gICAgZnVuY3Rpb24gb25TaG93KHNjb3BlLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAvLyBJbmNhc2UgdGhlIHVzZXIgcHJvdmlkZXMgYSByYXcgZG9tIGVsZW1lbnQsIGFsd2F5cyB3cmFwIGl0IGluIGpxTGl0ZVxuICAgICAgb3B0aW9ucy5wYXJlbnQgPSBhbmd1bGFyLmVsZW1lbnQob3B0aW9ucy5wYXJlbnQpO1xuXG4gICAgICBvcHRpb25zLnBvcEluVGFyZ2V0ID0gYW5ndWxhci5lbGVtZW50KChvcHRpb25zLnRhcmdldEV2ZW50IHx8IHt9KS50YXJnZXQpO1xuICAgICAgdmFyIGNsb3NlQnV0dG9uID0gZmluZENsb3NlQnV0dG9uKCk7XG5cbiAgICAgIGNvbmZpZ3VyZUFyaWEoZWxlbWVudC5maW5kKCdtZC1kaWFsb2cnKSk7XG5cbiAgICAgIGlmIChvcHRpb25zLmhhc0JhY2tkcm9wKSB7XG4gICAgICAgIHZhciBwYXJlbnRPZmZzZXQgPSBvcHRpb25zLnBhcmVudC5wcm9wKCdzY3JvbGxUb3AnKTtcbiAgICAgICAgb3B0aW9ucy5iYWNrZHJvcCA9IGFuZ3VsYXIuZWxlbWVudCgnPG1kLWJhY2tkcm9wIGNsYXNzPVwibWQtZGlhbG9nLWJhY2tkcm9wIG1kLW9wYXF1ZVwiPicpO1xuICAgICAgICAkbWRUaGVtaW5nLmluaGVyaXQob3B0aW9ucy5iYWNrZHJvcCwgb3B0aW9ucy5wYXJlbnQpO1xuICAgICAgICAkYW5pbWF0ZS5lbnRlcihvcHRpb25zLmJhY2tkcm9wLCBvcHRpb25zLnBhcmVudCk7XG4gICAgICAgIGVsZW1lbnQuY3NzKCd0b3AnLCBwYXJlbnRPZmZzZXQgKydweCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5kaXNhYmxlUGFyZW50U2Nyb2xsKSB7XG4gICAgICAgIG9wdGlvbnMubGFzdE92ZXJmbG93ID0gb3B0aW9ucy5wYXJlbnQuY3NzKCdvdmVyZmxvdycpO1xuICAgICAgICBvcHRpb25zLnBhcmVudC5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGlhbG9nUG9wSW4oXG4gICAgICAgIGVsZW1lbnQsXG4gICAgICAgIG9wdGlvbnMucGFyZW50LFxuICAgICAgICBvcHRpb25zLnBvcEluVGFyZ2V0ICYmIG9wdGlvbnMucG9wSW5UYXJnZXQubGVuZ3RoICYmIG9wdGlvbnMucG9wSW5UYXJnZXRcbiAgICAgIClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAob3B0aW9ucy5lc2NhcGVUb0Nsb3NlKSB7XG4gICAgICAgICAgb3B0aW9ucy5yb290RWxlbWVudEtleXVwQ2FsbGJhY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAkbWRDb25zdGFudC5LRVlfQ09ERS5FU0NBUEUpIHtcbiAgICAgICAgICAgICAgJHRpbWVvdXQoJG1kRGlhbG9nLmNhbmNlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICAkcm9vdEVsZW1lbnQub24oJ2tleXVwJywgb3B0aW9ucy5yb290RWxlbWVudEtleXVwQ2FsbGJhY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuY2xpY2tPdXRzaWRlVG9DbG9zZSkge1xuICAgICAgICAgIG9wdGlvbnMuZGlhbG9nQ2xpY2tPdXRzaWRlQ2FsbGJhY2sgPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgLy8gT25seSBjbG9zZSBpZiB3ZSBjbGljayB0aGUgZmxleCBjb250YWluZXIgb3V0c2lkZSB0aGUgYmFja2Ryb3BcbiAgICAgICAgICAgIGlmIChldi50YXJnZXQgPT09IGVsZW1lbnRbMF0pIHtcbiAgICAgICAgICAgICAgJHRpbWVvdXQoJG1kRGlhbG9nLmNhbmNlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIG9wdGlvbnMuZGlhbG9nQ2xpY2tPdXRzaWRlQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGNsb3NlQnV0dG9uLmZvY3VzKCk7XG4gICAgICB9KTtcblxuXG4gICAgICBmdW5jdGlvbiBmaW5kQ2xvc2VCdXR0b24oKSB7XG4gICAgICAgIC8vSWYgbm8gZWxlbWVudCB3aXRoIGNsYXNzIGRpYWxvZy1jbG9zZSwgdHJ5IHRvIGZpbmQgdGhlIGxhc3RcbiAgICAgICAgLy9idXR0b24gY2hpbGQgaW4gbWQtYWN0aW9ucyBhbmQgYXNzdW1lIGl0IGlzIGEgY2xvc2UgYnV0dG9uXG4gICAgICAgIHZhciBjbG9zZUJ1dHRvbiA9IGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLmRpYWxvZy1jbG9zZScpO1xuICAgICAgICBpZiAoIWNsb3NlQnV0dG9uKSB7XG4gICAgICAgICAgdmFyIGFjdGlvbkJ1dHRvbnMgPSBlbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZC1hY3Rpb25zIGJ1dHRvbicpO1xuICAgICAgICAgIGNsb3NlQnV0dG9uID0gYWN0aW9uQnV0dG9uc1sgYWN0aW9uQnV0dG9ucy5sZW5ndGggLSAxIF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudChjbG9zZUJ1dHRvbik7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyBPbiByZW1vdmUgZnVuY3Rpb24gZm9yIGFsbCBkaWFsb2dzXG4gICAgZnVuY3Rpb24gb25SZW1vdmUoc2NvcGUsIGVsZW1lbnQsIG9wdGlvbnMpIHtcblxuICAgICAgaWYgKG9wdGlvbnMuYmFja2Ryb3ApIHtcbiAgICAgICAgJGFuaW1hdGUubGVhdmUob3B0aW9ucy5iYWNrZHJvcCk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5kaXNhYmxlUGFyZW50U2Nyb2xsKSB7XG4gICAgICAgIG9wdGlvbnMucGFyZW50LmNzcygnb3ZlcmZsb3cnLCBvcHRpb25zLmxhc3RPdmVyZmxvdyk7XG4gICAgICAgIGRlbGV0ZSBvcHRpb25zLmxhc3RPdmVyZmxvdztcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLmVzY2FwZVRvQ2xvc2UpIHtcbiAgICAgICAgJHJvb3RFbGVtZW50Lm9mZigna2V5dXAnLCBvcHRpb25zLnJvb3RFbGVtZW50S2V5dXBDYWxsYmFjayk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5jbGlja091dHNpZGVUb0Nsb3NlKSB7XG4gICAgICAgIGVsZW1lbnQub2ZmKCdjbGljaycsIG9wdGlvbnMuZGlhbG9nQ2xpY2tPdXRzaWRlQ2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRpYWxvZ1BvcE91dChcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgb3B0aW9ucy5wYXJlbnQsXG4gICAgICAgIG9wdGlvbnMucG9wSW5UYXJnZXQgJiYgb3B0aW9ucy5wb3BJblRhcmdldC5sZW5ndGggJiYgb3B0aW9ucy5wb3BJblRhcmdldFxuICAgICAgKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBvcHRpb25zLnNjb3BlLiRkZXN0cm95KCk7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIG9wdGlvbnMucG9wSW5UYXJnZXQgJiYgb3B0aW9ucy5wb3BJblRhcmdldC5mb2N1cygpO1xuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbmplY3QgQVJJQS1zcGVjaWZpYyBhdHRyaWJ1dGVzIGFwcHJvcHJpYXRlIGZvciBEaWFsb2dzXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29uZmlndXJlQXJpYShlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LmF0dHIoe1xuICAgICAgICAncm9sZSc6ICdkaWFsb2cnXG4gICAgICB9KTtcblxuICAgICAgdmFyIGRpYWxvZ0NvbnRlbnQgPSBlbGVtZW50LmZpbmQoJ21kLWNvbnRlbnQnKTtcbiAgICAgIGlmIChkaWFsb2dDb250ZW50Lmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGRpYWxvZ0NvbnRlbnQgPSBlbGVtZW50O1xuICAgICAgfVxuICAgICAgJG1kQXJpYS5leHBlY3RBc3luYyhlbGVtZW50LCAnYXJpYS1sYWJlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgd29yZHMgPSBkaWFsb2dDb250ZW50LnRleHQoKS5zcGxpdCgvXFxzKy8pO1xuICAgICAgICBpZiAod29yZHMubGVuZ3RoID4gMykgd29yZHMgPSB3b3Jkcy5zbGljZSgwLDMpLmNvbmNhdCgnLi4uJyk7XG4gICAgICAgIHJldHVybiB3b3Jkcy5qb2luKCcgJyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaWFsb2dQb3BJbihjb250YWluZXIsIHBhcmVudEVsZW1lbnQsIGNsaWNrRWxlbWVudCkge1xuICAgICAgdmFyIGRpYWxvZ0VsID0gY29udGFpbmVyLmZpbmQoJ21kLWRpYWxvZycpO1xuXG4gICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZChjb250YWluZXIpO1xuICAgICAgdHJhbnNmb3JtVG9DbGlja0VsZW1lbnQoZGlhbG9nRWwsIGNsaWNrRWxlbWVudCk7XG5cbiAgICAgICQkckFGKGZ1bmN0aW9uKCkge1xuICAgICAgICBkaWFsb2dFbC5hZGRDbGFzcygndHJhbnNpdGlvbi1pbicpXG4gICAgICAgICAgLmNzcygkbWRDb25zdGFudC5DU1MuVFJBTlNGT1JNLCAnJyk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRpYWxvZ1RyYW5zaXRpb25FbmQoZGlhbG9nRWwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpYWxvZ1BvcE91dChjb250YWluZXIsIHBhcmVudEVsZW1lbnQsIGNsaWNrRWxlbWVudCkge1xuICAgICAgdmFyIGRpYWxvZ0VsID0gY29udGFpbmVyLmZpbmQoJ21kLWRpYWxvZycpO1xuXG4gICAgICBkaWFsb2dFbC5hZGRDbGFzcygndHJhbnNpdGlvbi1vdXQnKS5yZW1vdmVDbGFzcygndHJhbnNpdGlvbi1pbicpO1xuICAgICAgdHJhbnNmb3JtVG9DbGlja0VsZW1lbnQoZGlhbG9nRWwsIGNsaWNrRWxlbWVudCk7XG5cbiAgICAgIHJldHVybiBkaWFsb2dUcmFuc2l0aW9uRW5kKGRpYWxvZ0VsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0cmFuc2Zvcm1Ub0NsaWNrRWxlbWVudChkaWFsb2dFbCwgY2xpY2tFbGVtZW50KSB7XG4gICAgICBpZiAoY2xpY2tFbGVtZW50KSB7XG4gICAgICAgIHZhciBjbGlja1JlY3QgPSBjbGlja0VsZW1lbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBkaWFsb2dSZWN0ID0gZGlhbG9nRWxbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgdmFyIHNjYWxlWCA9IE1hdGgubWluKDAuNSwgY2xpY2tSZWN0LndpZHRoIC8gZGlhbG9nUmVjdC53aWR0aCk7XG4gICAgICAgIHZhciBzY2FsZVkgPSBNYXRoLm1pbigwLjUsIGNsaWNrUmVjdC5oZWlnaHQgLyBkaWFsb2dSZWN0LmhlaWdodCk7XG5cbiAgICAgICAgZGlhbG9nRWwuY3NzKCRtZENvbnN0YW50LkNTUy5UUkFOU0ZPUk0sICd0cmFuc2xhdGUzZCgnICtcbiAgICAgICAgICAoLWRpYWxvZ1JlY3QubGVmdCArIGNsaWNrUmVjdC5sZWZ0ICsgY2xpY2tSZWN0LndpZHRoLzIgLSBkaWFsb2dSZWN0LndpZHRoLzIpICsgJ3B4LCcgK1xuICAgICAgICAgICgtZGlhbG9nUmVjdC50b3AgKyBjbGlja1JlY3QudG9wICsgY2xpY2tSZWN0LmhlaWdodC8yIC0gZGlhbG9nUmVjdC5oZWlnaHQvMikgKyAncHgsJyArXG4gICAgICAgICAgJzApIHNjYWxlKCcgKyBzY2FsZVggKyAnLCcgKyBzY2FsZVkgKyAnKSdcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaWFsb2dUcmFuc2l0aW9uRW5kKGRpYWxvZ0VsKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgZGlhbG9nRWwub24oJG1kQ29uc3RhbnQuQ1NTLlRSQU5TSVRJT05FTkQsIGZpbmlzaGVkKTtcbiAgICAgIGZ1bmN0aW9uIGZpbmlzaGVkKGV2KSB7XG4gICAgICAgIC8vTWFrZSBzdXJlIHRoaXMgdHJhbnNpdGlvbmVuZCBkaWRuJ3QgYnViYmxlIHVwIGZyb20gYSBjaGlsZFxuICAgICAgICBpZiAoZXYudGFyZ2V0ID09PSBkaWFsb2dFbFswXSkge1xuICAgICAgICAgIGRpYWxvZ0VsLm9mZigkbWRDb25zdGFudC5DU1MuVFJBTlNJVElPTkVORCwgZmluaXNoZWQpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG4gIH1cbn1cbk1kRGlhbG9nUHJvdmlkZXIuJGluamVjdCA9IFtcIiQkaW50ZXJpbUVsZW1lbnRQcm92aWRlclwiXTtcblxufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBtYXRlcmlhbC5jb21wb25lbnRzLmRpdmlkZXJcbiAqIEBkZXNjcmlwdGlvbiBEaXZpZGVyIG1vZHVsZSFcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMuZGl2aWRlcicsIFtcbiAgJ21hdGVyaWFsLmNvcmUnXG5dKVxuICAuZGlyZWN0aXZlKCdtZERpdmlkZXInLCBNZERpdmlkZXJEaXJlY3RpdmUpO1xuXG5mdW5jdGlvbiBNZERpdmlkZXJDb250cm9sbGVyKCl7fVxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG1kRGl2aWRlclxuICogQG1vZHVsZSBtYXRlcmlhbC5jb21wb25lbnRzLmRpdmlkZXJcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEaXZpZGVycyBncm91cCBhbmQgc2VwYXJhdGUgY29udGVudCB3aXRoaW4gbGlzdHMgYW5kIHBhZ2UgbGF5b3V0cyB1c2luZyBzdHJvbmcgdmlzdWFsIGFuZCBzcGF0aWFsIGRpc3RpbmN0aW9ucy4gVGhpcyBkaXZpZGVyIGlzIGEgdGhpbiBydWxlLCBsaWdodHdlaWdodCBlbm91Z2ggdG8gbm90IGRpc3RyYWN0IHRoZSB1c2VyIGZyb20gY29udGVudC5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBtZC1pbnNldCBBZGQgdGhpcyBhdHRyaWJ1dGUgdG8gYWN0aXZhdGUgdGhlIGluc2V0IGRpdmlkZXIgc3R5bGUuXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiA8bWQtZGl2aWRlcj48L21kLWRpdmlkZXI+XG4gKlxuICogPG1kLWRpdmlkZXIgbWQtaW5zZXQ+PC9tZC1kaXZpZGVyPlxuICogPC9obGpzPlxuICpcbiAqL1xuZnVuY3Rpb24gTWREaXZpZGVyRGlyZWN0aXZlKCRtZFRoZW1pbmcpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIGxpbms6ICRtZFRoZW1pbmcsXG4gICAgY29udHJvbGxlcjogW01kRGl2aWRlckNvbnRyb2xsZXJdXG4gIH07XG59XG5NZERpdmlkZXJEaXJlY3RpdmUuJGluamVjdCA9IFtcIiRtZFRoZW1pbmdcIl07XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbWF0ZXJpYWwuY29tcG9uZW50cy5pY29uXG4gKiBAZGVzY3JpcHRpb25cbiAqIEljb25cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMuaWNvbicsIFtcbiAgJ21hdGVyaWFsLmNvcmUnXG5dKVxuICAuZGlyZWN0aXZlKCdtZEljb24nLCBtZEljb25EaXJlY3RpdmUpO1xuXG4vKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbWRJY29uXG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvbXBvbmVudHMuaWNvblxuICpcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYDxtZC1pY29uPmAgZGlyZWN0aXZlIGlzIGFuIGVsZW1lbnQgdXNlZnVsIGZvciBTVkcgaWNvbnNcbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiAgPG1kLWljb24gaWNvbj1cIi9pbWcvaWNvbnMvaWNfYWNjZXNzX3RpbWVfMjRweC5zdmdcIj5cbiAqICA8L21kLWljb24+XG4gKiA8L2hsanM+XG4gKlxuICovXG5mdW5jdGlvbiBtZEljb25EaXJlY3RpdmUoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICB0ZW1wbGF0ZTogJzxvYmplY3QgY2xhc3M9XCJtZC1pY29uXCI+PC9vYmplY3Q+JyxcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XG4gICAgICB2YXIgb2JqZWN0ID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0uY2hpbGRyZW5bMF0pO1xuICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoYXR0ci5pY29uKSkge1xuICAgICAgICBvYmplY3QuYXR0cignZGF0YScsIGF0dHIuaWNvbik7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpIHtcblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBtYXRlcmlhbC5jb21wb25lbnRzLmlucHV0XG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMuaW5wdXQnLCBbXG4gICdtYXRlcmlhbC5jb3JlJ1xuXSlcbiAgLmRpcmVjdGl2ZSgnbWRJbnB1dENvbnRhaW5lcicsIG1kSW5wdXRDb250YWluZXJEaXJlY3RpdmUpXG4gIC5kaXJlY3RpdmUoJ2xhYmVsJywgbGFiZWxEaXJlY3RpdmUpXG4gIC5kaXJlY3RpdmUoJ2lucHV0JywgaW5wdXRUZXh0YXJlYURpcmVjdGl2ZSlcbiAgLmRpcmVjdGl2ZSgndGV4dGFyZWEnLCBpbnB1dFRleHRhcmVhRGlyZWN0aXZlKVxuICAuZGlyZWN0aXZlKCdtZE1heGxlbmd0aCcsIG1kTWF4bGVuZ3RoRGlyZWN0aXZlKVxuICAuZGlyZWN0aXZlKCdwbGFjZWhvbGRlcicsIHBsYWNlaG9sZGVyRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBtZElucHV0Q29udGFpbmVyXG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvbXBvbmVudHMuaW5wdXRcbiAqXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogYDxtZC1pbnB1dC1jb250YWluZXI+YCBpcyB0aGUgcGFyZW50IG9mIGFueSBpbnB1dCBvciB0ZXh0YXJlYSBlbGVtZW50LlxuICpcbiAqIElucHV0IGFuZCB0ZXh0YXJlYSBlbGVtZW50cyB3aWxsIG5vdCBiZWhhdmUgcHJvcGVybHkgdW5sZXNzIHRoZSBtZC1pbnB1dC1jb250YWluZXIgXG4gKiBwYXJlbnQgaXMgcHJvdmlkZWQuXG4gKlxuICogQHBhcmFtIG1kLWlzLWVycm9yIHtleHByZXNzaW9uPX0gV2hlbiB0aGUgZ2l2ZW4gZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZSwgdGhlIGlucHV0IGNvbnRhaW5lciB3aWxsIGdvIGludG8gZXJyb3Igc3RhdGUuIERlZmF1bHRzIHRvIGVycm9yaW5nIGlmIHRoZSBpbnB1dCBoYXMgYmVlbiB0b3VjaGVkIGFuZCBpcyBpbnZhbGlkLlxuICpcbiAqIEB1c2FnZVxuICogPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqXG4gKiA8bWQtaW5wdXQtY29udGFpbmVyPlxuICogICA8bGFiZWw+VXNlcm5hbWU8L2xhYmVsPlxuICogICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVzZXIubmFtZVwiPlxuICogPC9tZC1pbnB1dC1jb250YWluZXI+XG4gKlxuICogPG1kLWlucHV0LWNvbnRhaW5lcj5cbiAqICAgPGxhYmVsPkRlc2NyaXB0aW9uPC9sYWJlbD5cbiAqICAgPHRleHRhcmVhIG5nLW1vZGVsPVwidXNlci5kZXNjcmlwdGlvblwiPjwvdGV4dGFyZWE+XG4gKiA8L21kLWlucHV0LWNvbnRhaW5lcj5cbiAqXG4gKiA8L2hsanM+XG4gKi9cbmZ1bmN0aW9uIG1kSW5wdXRDb250YWluZXJEaXJlY3RpdmUoJG1kVGhlbWluZywgJHBhcnNlKSB7XG4gIENvbnRhaW5lckN0cmwuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRlbGVtZW50XCIsIFwiJGF0dHJzXCJdO1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgbGluazogcG9zdExpbmssXG4gICAgY29udHJvbGxlcjogQ29udGFpbmVyQ3RybFxuICB9O1xuXG4gIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgJG1kVGhlbWluZyhlbGVtZW50KTtcbiAgfVxuICBmdW5jdGlvbiBDb250YWluZXJDdHJsKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHNlbGYuaXNFcnJvckdldHRlciA9ICRhdHRycy5tZElzRXJyb3IgJiYgJHBhcnNlKCRhdHRycy5tZElzRXJyb3IpO1xuXG4gICAgc2VsZi5lbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgc2VsZi5zZXRGb2N1c2VkID0gZnVuY3Rpb24oaXNGb2N1c2VkKSB7XG4gICAgICAkZWxlbWVudC50b2dnbGVDbGFzcygnbWQtaW5wdXQtZm9jdXNlZCcsICEhaXNGb2N1c2VkKTtcbiAgICB9O1xuICAgIHNlbGYuc2V0SGFzVmFsdWUgPSBmdW5jdGlvbihoYXNWYWx1ZSkge1xuICAgICAgJGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ21kLWlucHV0LWhhcy12YWx1ZScsICEhaGFzVmFsdWUpO1xuICAgIH07XG4gICAgc2VsZi5zZXRJbnZhbGlkID0gZnVuY3Rpb24oaXNJbnZhbGlkKSB7XG4gICAgICAkZWxlbWVudC50b2dnbGVDbGFzcygnbWQtaW5wdXQtaW52YWxpZCcsICEhaXNJbnZhbGlkKTtcbiAgICB9O1xuICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc2VsZi5sYWJlbCAmJiBzZWxmLmlucHV0O1xuICAgIH0sIGZ1bmN0aW9uKGhhc0xhYmVsQW5kSW5wdXQpIHtcbiAgICAgIGlmIChoYXNMYWJlbEFuZElucHV0ICYmICFzZWxmLmxhYmVsLmF0dHIoJ2ZvcicpKSB7XG4gICAgICAgIHNlbGYubGFiZWwuYXR0cignZm9yJywgc2VsZi5pbnB1dC5hdHRyKCdpZCcpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxubWRJbnB1dENvbnRhaW5lckRpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJG1kVGhlbWluZ1wiLCBcIiRwYXJzZVwiXTtcblxuZnVuY3Rpb24gbGFiZWxEaXJlY3RpdmUoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXF1aXJlOiAnXj9tZElucHV0Q29udGFpbmVyJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY29udGFpbmVyQ3RybCkge1xuICAgICAgaWYgKCFjb250YWluZXJDdHJsKSByZXR1cm47XG5cbiAgICAgIGNvbnRhaW5lckN0cmwubGFiZWwgPSBlbGVtZW50O1xuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjb250YWluZXJDdHJsLmxhYmVsID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBpbnB1dFxuICogQHJlc3RyaWN0IEVcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5pbnB1dFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTXVzdCBiZSBwbGFjZWQgYXMgYSBjaGlsZCBvZiBhbiBgPG1kLWlucHV0LWNvbnRhaW5lcj5gLiBcbiAqXG4gKiBCZWhhdmVzIGxpa2UgdGhlIFtBbmd1bGFySlMgaW5wdXQgZGlyZWN0aXZlXShodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcvZGlyZWN0aXZlL2lucHV0KS5cbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiA8bWQtaW5wdXQtY29udGFpbmVyPlxuICogICA8bGFiZWw+Q29sb3I8L2xhYmVsPlxuICogICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbG9yXCIgcmVxdWlyZWQgbWQtbWF4bGVuZ3RoPVwiMTBcIj5cbiAqIDwvbWQtaW5wdXQtY29udGFpbmVyPlxuICogPC9obGpzPlxuICogPGgzPldpdGggRXJyb3JzICh1c2VzIFtuZ01lc3NhZ2VzXShodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmdNZXNzYWdlcykpPC9oMz5cbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cbiAqICAgPG1kLWlucHV0LWNvbnRhaW5lcj5cbiAqICAgICA8bGFiZWw+TGFzdCBOYW1lPC9sYWJlbD5cbiAqICAgICA8aW5wdXQgbmFtZT1cImxhc3ROYW1lXCIgbmctbW9kZWw9XCJsYXN0TmFtZVwiIHJlcXVpcmVkIG1kLW1heGxlbmd0aD1cIjEwXCIgbWlubGVuZ3RoPVwiNFwiPlxuICogICAgIDxkaXYgbmctbWVzc2FnZXM9XCJ1c2VyRm9ybS5sYXN0TmFtZS4kZXJyb3JcIiBuZy1zaG93PVwidXNlckZvcm0uYmlvLiRkaXJ0eVwiPlxuICogICAgICAgPGRpdiBuZy1tZXNzYWdlPVwicmVxdWlyZWRcIj5UaGlzIGlzIHJlcXVpcmVkITwvZGl2PlxuICogICAgICAgPGRpdiBuZy1tZXNzYWdlPVwibWQtbWF4bGVuZ3RoXCI+VGhhdCdzIHRvbyBsb25nITwvZGl2PlxuICogICAgICAgPGRpdiBuZy1tZXNzYWdlPVwibWlubGVuZ3RoXCI+VGhhdCdzIHRvbyBzaG9ydCE8L2Rpdj5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9tZC1pbnB1dC1jb250YWluZXI+XG4gKiA8L2Zvcm0+XG4gKiA8L2hsanM+XG4gKlxuICogQHBhcmFtIHtudW1iZXI9fSBtZC1tYXhsZW5ndGggVGhlIG1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgYWxsb3dlZCBpbiB0aGlzIGlucHV0LiBJZiB0aGlzIGlzIHNwZWNpZmllZCwgYSBjaGFyYWN0ZXIgY291bnRlciB3aWxsIGJlIHNob3duIHVuZGVybmVhdGggdGhlIGlucHV0LlxuICovXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHRleHRhcmVhXG4gKiBAcmVzdHJpY3QgRVxuICogQG1vZHVsZSBtYXRlcmlhbC5jb21wb25lbnRzLmlucHV0XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBNdXN0IGJlIHBsYWNlZCBhcyBhIGNoaWxkIG9mIGFuIGA8bWQtaW5wdXQtY29udGFpbmVyPmAuIFxuICpcbiAqIEJlaGF2ZXMgbGlrZSB0aGUgW0FuZ3VsYXJKUyBpbnB1dCBkaXJlY3RpdmVdKGh0dHBzOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy9kaXJlY3RpdmUvdGV4dGFyZWEpLlxuICpcbiAqIEB1c2FnZVxuICogPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqIDxtZC1pbnB1dC1jb250YWluZXI+XG4gKiAgIDxsYWJlbD5EZXNjcmlwdGlvbjwvbGFiZWw+XG4gKiAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cImRlc2NyaXB0aW9uXCIgcmVxdWlyZWQgbWlubGVuZ3RoPVwiMTVcIiBtZC1tYXhsZW5ndGg9XCIyMFwiPjwvdGV4dGFyZWE+XG4gKiA8L21kLWlucHV0LWNvbnRhaW5lcj5cbiAqIDwvaGxqcz5cbiAqIDxoMz5XaXRoIEVycm9ycyAodXNlcyBbbmdNZXNzYWdlc10oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nTWVzc2FnZXMpKTwvaDM+XG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XG4gKiAgIDxtZC1pbnB1dC1jb250YWluZXI+XG4gKiAgICAgPGxhYmVsPkJpb2dyYXBoeTwvbGFiZWw+XG4gKiAgICAgPHRleHRhcmVhIG5hbWU9XCJiaW9cIiBuZy1tb2RlbD1cImJpb2dyYXBoeVwiIHJlcXVpcmVkIG1kLW1heGxlbmd0aD1cIjE1MFwiPjwvdGV4dGFyZWE+XG4gKiAgICAgPGRpdiBuZy1tZXNzYWdlcz1cInVzZXJGb3JtLmJpby4kZXJyb3JcIiBuZy1zaG93PVwidXNlckZvcm0uYmlvLiRkaXJ0eVwiPlxuICogICAgICAgPGRpdiBuZy1tZXNzYWdlPVwicmVxdWlyZWRcIj5UaGlzIGlzIHJlcXVpcmVkITwvZGl2PlxuICogICAgICAgPGRpdiBuZy1tZXNzYWdlPVwibWQtbWF4bGVuZ3RoXCI+VGhhdCdzIHRvbyBsb25nITwvZGl2PlxuICogICAgIDwvZGl2PlxuICogICA8L21kLWlucHV0LWNvbnRhaW5lcj5cbiAqIDwvZm9ybT5cbiAqIDwvaGxqcz5cbiAqXG4gKiBAcGFyYW0ge251bWJlcj19IG1kLW1heGxlbmd0aCBUaGUgbWF4aW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBhbGxvd2VkIGluIHRoaXMgaW5wdXQuIElmIHRoaXMgaXMgc3BlY2lmaWVkLCBhIGNoYXJhY3RlciBjb3VudGVyIHdpbGwgYmUgc2hvd24gdW5kZXJuZWF0aCB0aGUgaW5wdXQuXG4gKi9cbmZ1bmN0aW9uIGlucHV0VGV4dGFyZWFEaXJlY3RpdmUoJG1kVXRpbCwgJHdpbmRvdywgJGNvbXBpbGUsICRhbmltYXRlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXF1aXJlOiBbJ14/bWRJbnB1dENvbnRhaW5lcicsICc/bmdNb2RlbCddLFxuICAgIGxpbms6IHBvc3RMaW5rXG4gIH07XG4gIFxuICBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcblxuICAgIHZhciBjb250YWluZXJDdHJsID0gY3RybHNbMF07XG4gICAgdmFyIG5nTW9kZWxDdHJsID0gY3RybHNbMV0gfHwgJG1kVXRpbC5mYWtlTmdNb2RlbCgpO1xuICAgIHZhciBpc1JlYWRvbmx5ID0gYW5ndWxhci5pc0RlZmluZWQoYXR0ci5yZWFkb25seSk7XG5cbiAgICBpZiAoICFjb250YWluZXJDdHJsICkgcmV0dXJuO1xuICAgIGlmIChjb250YWluZXJDdHJsLmlucHV0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCI8bWQtaW5wdXQtY29udGFpbmVyPiBjYW4gb25seSBoYXZlICpvbmUqIDxpbnB1dD4gb3IgPHRleHRhcmVhPiBjaGlsZCBlbGVtZW50IVwiKTtcbiAgICB9XG4gICAgY29udGFpbmVyQ3RybC5pbnB1dCA9IGVsZW1lbnQ7XG5cbiAgICBlbGVtZW50LmFkZENsYXNzKCdtZC1pbnB1dCcpO1xuICAgIGlmICghZWxlbWVudC5hdHRyKCdpZCcpKSB7XG4gICAgICBlbGVtZW50LmF0dHIoJ2lkJywgJ2lucHV0XycgKyAkbWRVdGlsLm5leHRVaWQoKSk7XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGV4dGFyZWEnKSB7XG4gICAgICBzZXR1cFRleHRhcmVhKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmdNb2RlbFBpcGVsaW5lQ2hlY2tWYWx1ZShhcmcpIHtcbiAgICAgIGNvbnRhaW5lckN0cmwuc2V0SGFzVmFsdWUoIW5nTW9kZWxDdHJsLiRpc0VtcHR5KGFyZykpO1xuICAgICAgcmV0dXJuIGFyZztcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5wdXRDaGVja1ZhbHVlKCkge1xuICAgICAgLy8gQW4gaW5wdXQncyB2YWx1ZSBjb3VudHMgaWYgaXRzIGxlbmd0aCA+IDAsXG4gICAgICAvLyBvciBpZiB0aGUgaW5wdXQncyB2YWxpZGl0eSBzdGF0ZSBzYXlzIGl0IGhhcyBiYWQgaW5wdXQgKGVnIHN0cmluZyBpbiBhIG51bWJlciBpbnB1dClcbiAgICAgIGNvbnRhaW5lckN0cmwuc2V0SGFzVmFsdWUoZWxlbWVudC52YWwoKS5sZW5ndGggPiAwIHx8IChlbGVtZW50WzBdLnZhbGlkaXR5fHx7fSkuYmFkSW5wdXQpO1xuICAgIH1cblxuXG4gICAgdmFyIGlzRXJyb3JHZXR0ZXIgPSBjb250YWluZXJDdHJsLmlzRXJyb3JHZXR0ZXIgfHwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmdNb2RlbEN0cmwuJGludmFsaWQgJiYgbmdNb2RlbEN0cmwuJHRvdWNoZWQ7XG4gICAgfTtcbiAgICBzY29wZS4kd2F0Y2goaXNFcnJvckdldHRlciwgY29udGFpbmVyQ3RybC5zZXRJbnZhbGlkKTtcbiAgICAgIFxuICAgIG5nTW9kZWxDdHJsLiRwYXJzZXJzLnB1c2gobmdNb2RlbFBpcGVsaW5lQ2hlY2tWYWx1ZSk7XG4gICAgbmdNb2RlbEN0cmwuJGZvcm1hdHRlcnMucHVzaChuZ01vZGVsUGlwZWxpbmVDaGVja1ZhbHVlKTtcblxuICAgIGVsZW1lbnQub24oJ2lucHV0JywgaW5wdXRDaGVja1ZhbHVlKTtcblxuICAgIGlmICghaXNSZWFkb25seSkge1xuICAgICAgZWxlbWVudFxuICAgICAgICAub24oJ2ZvY3VzJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICBjb250YWluZXJDdHJsLnNldEZvY3VzZWQodHJ1ZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignYmx1cicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgY29udGFpbmVyQ3RybC5zZXRGb2N1c2VkKGZhbHNlKTtcbiAgICAgICAgICBpbnB1dENoZWNrVmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgY29udGFpbmVyQ3RybC5zZXRGb2N1c2VkKGZhbHNlKTtcbiAgICAgIGNvbnRhaW5lckN0cmwuc2V0SGFzVmFsdWUoZmFsc2UpO1xuICAgICAgY29udGFpbmVyQ3RybC5pbnB1dCA9IG51bGw7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBzZXR1cFRleHRhcmVhKCkge1xuICAgICAgdmFyIG5vZGUgPSBlbGVtZW50WzBdO1xuICAgICAgdmFyIG9uQ2hhbmdlVGV4dGFyZWEgPSAkbWRVdGlsLmRlYm91bmNlKGdyb3dUZXh0YXJlYSwgMSk7XG5cbiAgICAgIGZ1bmN0aW9uIHBpcGVsaW5lTGlzdGVuZXIodmFsdWUpIHtcbiAgICAgICAgb25DaGFuZ2VUZXh0YXJlYSgpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZ01vZGVsQ3RybCkge1xuICAgICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKHBpcGVsaW5lTGlzdGVuZXIpO1xuICAgICAgICBuZ01vZGVsQ3RybC4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKHBpcGVsaW5lTGlzdGVuZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb25DaGFuZ2VUZXh0YXJlYSgpO1xuICAgICAgfVxuICAgICAgZWxlbWVudC5vbigna2V5ZG93biBpbnB1dCcsIG9uQ2hhbmdlVGV4dGFyZWEpO1xuICAgICAgZWxlbWVudC5vbignc2Nyb2xsJywgb25TY3JvbGwpO1xuICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLm9uKCdyZXNpemUnLCBvbkNoYW5nZVRleHRhcmVhKTtcblxuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykub2ZmKCdyZXNpemUnLCBvbkNoYW5nZVRleHRhcmVhKTtcbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBncm93VGV4dGFyZWEoKSB7XG4gICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCI7XG4gICAgICAgIHZhciBsaW5lID0gbm9kZS5zY3JvbGxIZWlnaHQgLSBub2RlLm9mZnNldEhlaWdodDtcbiAgICAgICAgbm9kZS5zY3JvbGxUb3AgPSAwO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gbm9kZS5vZmZzZXRIZWlnaHQgKyAobGluZSA+IDAgPyBsaW5lIDogMCk7XG4gICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25TY3JvbGwoZSkge1xuICAgICAgICBub2RlLnNjcm9sbFRvcCA9IDA7XG4gICAgICAgIC8vIGZvciBzbW9vdGggbmV3IGxpbmUgYWRkaW5nXG4gICAgICAgIHZhciBsaW5lID0gbm9kZS5zY3JvbGxIZWlnaHQgLSBub2RlLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIGhlaWdodCA9IG5vZGUub2Zmc2V0SGVpZ2h0ICsgbGluZTtcbiAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuaW5wdXRUZXh0YXJlYURpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJG1kVXRpbFwiLCBcIiR3aW5kb3dcIiwgXCIkY29tcGlsZVwiLCBcIiRhbmltYXRlXCJdO1xuXG5mdW5jdGlvbiBtZE1heGxlbmd0aERpcmVjdGl2ZSgkYW5pbWF0ZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ15tZElucHV0Q29udGFpbmVyJ10sXG4gICAgbGluazogcG9zdExpbmtcbiAgfTtcblxuICBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAgICB2YXIgbWF4bGVuZ3RoO1xuICAgIHZhciBuZ01vZGVsQ3RybCA9IGN0cmxzWzBdO1xuICAgIHZhciBjb250YWluZXJDdHJsID0gY3RybHNbMV07XG4gICAgdmFyIGNoYXJDb3VudEVsID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwibWQtY2hhci1jb3VudGVyXCI+Jyk7XG5cbiAgICAvLyBTdG9wIG1vZGVsIGZyb20gdHJpbW1pbmcuIFRoaXMgbWFrZXMgaXQgc28gd2hpdGVzcGFjZSBcbiAgICAvLyBvdmVyIHRoZSBtYXhsZW5ndGggc3RpbGwgY291bnRzIGFzIGludmFsaWQuXG4gICAgYXR0ci4kc2V0KCduZ1RyaW0nLCAnZmFsc2UnKTtcbiAgICBjb250YWluZXJDdHJsLmVsZW1lbnQuYXBwZW5kKGNoYXJDb3VudEVsKTtcblxuICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2gocmVuZGVyQ2hhckNvdW50KTtcbiAgICBuZ01vZGVsQ3RybC4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKHJlbmRlckNoYXJDb3VudCk7XG4gICAgZWxlbWVudC5vbignaW5wdXQga2V5ZG93bicsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIHJlbmRlckNoYXJDb3VudCgpOyAvL21ha2Ugc3VyZSBpdCdzIGNhbGxlZCB3aXRoIG5vIGFyZ3NcbiAgICB9KTtcblxuICAgIHNjb3BlLiR3YXRjaChhdHRyLm1kTWF4bGVuZ3RoLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgbWF4bGVuZ3RoID0gdmFsdWU7XG4gICAgICBpZiAoYW5ndWxhci5pc051bWJlcih2YWx1ZSkgJiYgdmFsdWUgPiAwKSB7XG4gICAgICAgIGlmICghY2hhckNvdW50RWwucGFyZW50KCkubGVuZ3RoKSB7XG4gICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2hhckNvdW50RWwsIGNvbnRhaW5lckN0cmwuZWxlbWVudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGNvbnRhaW5lckN0cmwuZWxlbWVudFswXS5sYXN0RWxlbWVudENoaWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyQ2hhckNvdW50KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkYW5pbWF0ZS5sZWF2ZShjaGFyQ291bnRFbCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBuZ01vZGVsQ3RybC4kdmFsaWRhdG9yc1snbWQtbWF4bGVuZ3RoJ10gPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgIGlmICghYW5ndWxhci5pc051bWJlcihtYXhsZW5ndGgpIHx8IG1heGxlbmd0aCA8IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gKCBtb2RlbFZhbHVlIHx8IGVsZW1lbnQudmFsKCkgfHwgdmlld1ZhbHVlIHx8ICcnICkubGVuZ3RoIDw9IG1heGxlbmd0aDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVuZGVyQ2hhckNvdW50KHZhbHVlKSB7XG4gICAgICBjaGFyQ291bnRFbC50ZXh0KCAoIGVsZW1lbnQudmFsKCkgfHwgdmFsdWUgfHwgJycgKS5sZW5ndGggKyAnLycgKyBtYXhsZW5ndGggKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbm1kTWF4bGVuZ3RoRGlyZWN0aXZlLiRpbmplY3QgPSBbXCIkYW5pbWF0ZVwiXTtcblxuZnVuY3Rpb24gcGxhY2Vob2xkZXJEaXJlY3RpdmUoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnXl4/bWRJbnB1dENvbnRhaW5lcicsXG4gICAgbGluazogcG9zdExpbmtcbiAgfTtcblxuICBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgaW5wdXRDb250YWluZXIpIHtcbiAgICBpZiAoIWlucHV0Q29udGFpbmVyKSByZXR1cm47XG5cbiAgICB2YXIgcGxhY2Vob2xkZXJUZXh0ID0gYXR0ci5wbGFjZWhvbGRlcjtcbiAgICBlbGVtZW50LnJlbW92ZUF0dHIoJ3BsYWNlaG9sZGVyJyk7XG5cbiAgICBpbnB1dENvbnRhaW5lci5lbGVtZW50LmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1kLXBsYWNlaG9sZGVyXCI+JyArIHBsYWNlaG9sZGVyVGV4dCArICc8L2Rpdj4nKTtcbiAgfVxufVxuXG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMubGlzdFxuICogQGRlc2NyaXB0aW9uXG4gKiBMaXN0IG1vZHVsZVxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy5saXN0JywgW1xuICAnbWF0ZXJpYWwuY29yZSdcbl0pXG4gIC5kaXJlY3RpdmUoJ21kTGlzdCcsIG1kTGlzdERpcmVjdGl2ZSlcbiAgLmRpcmVjdGl2ZSgnbWRJdGVtJywgbWRJdGVtRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBtZExpc3RcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5saXN0XG4gKlxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgPG1kLWxpc3Q+YCBkaXJlY3RpdmUgaXMgYSBsaXN0IGNvbnRhaW5lciBmb3IgMS4ubiBgPG1kLWl0ZW0+YCB0YWdzLlxuICpcbiAqIEB1c2FnZVxuICogPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqIDxtZC1saXN0PlxuICogICA8bWQtaXRlbSBuZy1yZXBlYXQ9XCJpdGVtIGluIHRvZG9zXCI+XG4gKiAgICAgPG1kLWl0ZW0tY29udGVudD5cbiAqICAgICAgIDxkaXYgY2xhc3M9XCJtZC10aWxlLWxlZnRcIj5cbiAqICAgICAgICAgPGltZyBuZy1zcmM9XCJ7e2l0ZW0uZmFjZX19XCIgY2xhc3M9XCJmYWNlXCIgYWx0PVwie3tpdGVtLndob319XCI+XG4gKiAgICAgICA8L2Rpdj5cbiAqICAgICAgIDxkaXYgY2xhc3M9XCJtZC10aWxlLWNvbnRlbnRcIj5cbiAqICAgICAgICAgPGgzPnt7aXRlbS53aGF0fX08L2gzPlxuICogICAgICAgICA8aDQ+e3tpdGVtLndob319PC9oND5cbiAqICAgICAgICAgPHA+XG4gKiAgICAgICAgICAge3tpdGVtLm5vdGVzfX1cbiAqICAgICAgICAgPC9wPlxuICogICAgICAgPC9kaXY+XG4gKiAgICAgPC9tZC1pdGVtLWNvbnRlbnQ+XG4gKiAgIDwvbWQtaXRlbT5cbiAqIDwvbWQtbGlzdD5cbiAqIDwvaGxqcz5cbiAqXG4gKi9cbmZ1bmN0aW9uIG1kTGlzdERpcmVjdGl2ZSgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyKSB7XG4gICAgICAkZWxlbWVudC5hdHRyKHtcbiAgICAgICAgJ3JvbGUnIDogJ2xpc3QnXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbWRJdGVtXG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvbXBvbmVudHMubGlzdFxuICpcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYDxtZC1pdGVtPmAgZGlyZWN0aXZlIGlzIGEgY29udGFpbmVyIGludGVuZGVkIGZvciByb3cgaXRlbXMgaW4gYSBgPG1kLWxpc3Q+YCBjb250YWluZXIuXG4gKlxuICogQHVzYWdlXG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogIDxtZC1saXN0PlxuICogICAgPG1kLWl0ZW0+XG4gKiAgICAgICAgICAgIEl0ZW0gY29udGVudCBpbiBsaXN0XG4gKiAgICA8L21kLWl0ZW0+XG4gKiAgPC9tZC1saXN0PlxuICogPC9obGpzPlxuICpcbiAqL1xuZnVuY3Rpb24gbWRJdGVtRGlyZWN0aXZlKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIpIHtcbiAgICAgICRlbGVtZW50LmF0dHIoe1xuICAgICAgICAncm9sZScgOiAnbGlzdGl0ZW0nXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMucHJvZ3Jlc3NDaXJjdWxhclxuICogQGRlc2NyaXB0aW9uIENpcmN1bGFyIFByb2dyZXNzIG1vZHVsZSFcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMucHJvZ3Jlc3NDaXJjdWxhcicsIFtcbiAgJ21hdGVyaWFsLmNvcmUnXG5dKVxuICAuZGlyZWN0aXZlKCdtZFByb2dyZXNzQ2lyY3VsYXInLCBNZFByb2dyZXNzQ2lyY3VsYXJEaXJlY3RpdmUpO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG1kUHJvZ3Jlc3NDaXJjdWxhclxuICogQG1vZHVsZSBtYXRlcmlhbC5jb21wb25lbnRzLnByb2dyZXNzQ2lyY3VsYXJcbiAqIEByZXN0cmljdCBFXG4gKlxuKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBjaXJjdWxhciBwcm9ncmVzcyBkaXJlY3RpdmUgaXMgdXNlZCB0byBtYWtlIGxvYWRpbmcgY29udGVudCBpbiB5b3VyIGFwcCBhcyBkZWxpZ2h0ZnVsIGFuZCBwYWlubGVzcyBhcyBwb3NzaWJsZSBieSBtaW5pbWl6aW5nIHRoZSBhbW91bnQgb2YgdmlzdWFsIGNoYW5nZSBhIHVzZXIgc2VlcyBiZWZvcmUgdGhleSBjYW4gdmlldyBhbmQgaW50ZXJhY3Qgd2l0aCBjb250ZW50LlxuICpcbiAqIEZvciBvcGVyYXRpb25zIHdoZXJlIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBvcGVyYXRpb24gY29tcGxldGVkIGNhbiBiZSBkZXRlcm1pbmVkLCB1c2UgYSBkZXRlcm1pbmF0ZSBpbmRpY2F0b3IuIFRoZXkgZ2l2ZSB1c2VycyBhIHF1aWNrIHNlbnNlIG9mIGhvdyBsb25nIGFuIG9wZXJhdGlvbiB3aWxsIHRha2UuXG4gKlxuICogRm9yIG9wZXJhdGlvbnMgd2hlcmUgdGhlIHVzZXIgaXMgYXNrZWQgdG8gd2FpdCBhIG1vbWVudCB3aGlsZSBzb21ldGhpbmcgZmluaXNoZXMgdXAsIGFuZCBpdOKAmXMgbm90IG5lY2Vzc2FyeSB0byBleHBvc2Ugd2hhdCdzIGhhcHBlbmluZyBiZWhpbmQgdGhlIHNjZW5lcyBhbmQgaG93IGxvbmcgaXQgd2lsbCB0YWtlLCB1c2UgYW4gaW5kZXRlcm1pbmF0ZSBpbmRpY2F0b3IuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1kLW1vZGUgU2VsZWN0IGZyb20gb25lIG9mIHR3byBtb2RlczogZGV0ZXJtaW5hdGUgYW5kIGluZGV0ZXJtaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IHZhbHVlIEluIGRldGVybWluYXRlIG1vZGUsIHRoaXMgbnVtYmVyIHJlcHJlc2VudHMgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIGNpcmN1bGFyIHByb2dyZXNzLiBEZWZhdWx0OiAwXG4gKiBAcGFyYW0ge251bWJlcj19IG1kLWRpYW1ldGVyIFRoaXMgc3BlY2lmaWVzIHRoZSBkaWFtdGVyIG9mIHRoZSBjaXJjdWxhciBwcm9ncmVzcy4gRGVmYXVsdDogNDhcbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiA8bWQtcHJvZ3Jlc3MtY2lyY3VsYXIgbWQtbW9kZT1cImRldGVybWluYXRlXCIgdmFsdWU9XCIuLi5cIj48L21kLXByb2dyZXNzLWNpcmN1bGFyPlxuICpcbiAqIDxtZC1wcm9ncmVzcy1jaXJjdWxhciBtZC1tb2RlPVwiZGV0ZXJtaW5hdGVcIiBuZy12YWx1ZT1cIi4uLlwiPjwvbWQtcHJvZ3Jlc3MtY2lyY3VsYXI+XG4gKlxuICogPG1kLXByb2dyZXNzLWNpcmN1bGFyIG1kLW1vZGU9XCJkZXRlcm1pbmF0ZVwiIHZhbHVlPVwiLi4uXCIgbWQtZGlhbWV0ZXI9XCIxMDBcIj48L21kLXByb2dyZXNzLWNpcmN1bGFyPlxuICpcbiAqIDxtZC1wcm9ncmVzcy1jaXJjdWxhciBtZC1tb2RlPVwiaW5kZXRlcm1pbmF0ZVwiPjwvbWQtcHJvZ3Jlc3MtY2lyY3VsYXI+XG4gKiA8L2hsanM+XG4gKi9cbmZ1bmN0aW9uIE1kUHJvZ3Jlc3NDaXJjdWxhckRpcmVjdGl2ZSgkJHJBRiwgJG1kQ29uc3RhbnQsICRtZFRoZW1pbmcpIHtcbiAgdmFyIGZpbGxSb3RhdGlvbnMgPSBuZXcgQXJyYXkoMTAxKSxcbiAgICBmaXhSb3RhdGlvbnMgPSBuZXcgQXJyYXkoMTAxKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IDEwMTsgaSsrKSB7XG4gICAgdmFyIHBlcmNlbnQgPSBpIC8gMTAwO1xuICAgIHZhciByb3RhdGlvbiA9IE1hdGguZmxvb3IocGVyY2VudCAqIDE4MCk7XG5cbiAgICBmaWxsUm90YXRpb25zW2ldID0gJ3JvdGF0ZSgnICsgcm90YXRpb24udG9TdHJpbmcoKSArICdkZWcpJztcbiAgICBmaXhSb3RhdGlvbnNbaV0gPSAncm90YXRlKCcgKyAocm90YXRpb24gKiAyKS50b1N0cmluZygpICsgJ2RlZyknO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHRlbXBsYXRlOlxuICAgICAgICAnPGRpdiBjbGFzcz1cIm1kLXNwaW5uZXItd3JhcHBlclwiPicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibWQtaW5uZXJcIj4nICtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibWQtZ2FwXCI+PC9kaXY+JyArXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1kLWxlZnRcIj4nICtcbiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJtZC1oYWxmLWNpcmNsZVwiPjwvZGl2PicgK1xuICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJtZC1yaWdodFwiPicgK1xuICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1kLWhhbGYtY2lyY2xlXCI+PC9kaXY+JyArXG4gICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAnPC9kaXY+JyxcbiAgICBjb21waWxlOiBjb21waWxlXG4gIH07XG5cbiAgZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCB0cmFuc2NsdWRlKSB7XG4gICAgdEVsZW1lbnQuYXR0cignYXJpYS12YWx1ZW1pbicsIDApO1xuICAgIHRFbGVtZW50LmF0dHIoJ2FyaWEtdmFsdWVtYXgnLCAxMDApO1xuICAgIHRFbGVtZW50LmF0dHIoJ3JvbGUnLCAncHJvZ3Jlc3NiYXInKTtcblxuICAgIHJldHVybiBwb3N0TGluaztcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgJG1kVGhlbWluZyhlbGVtZW50KTtcbiAgICB2YXIgY2lyY2xlID0gZWxlbWVudFswXSxcbiAgICAgIGZpbGwgPSBjaXJjbGUucXVlcnlTZWxlY3RvckFsbCgnLm1kLWZpbGwsIC5tZC1tYXNrLm1kLWZ1bGwnKSxcbiAgICAgIGZpeCA9IGNpcmNsZS5xdWVyeVNlbGVjdG9yQWxsKCcubWQtZmlsbC5tZC1maXgnKSxcbiAgICAgIGksIGNsYW1wZWQsIGZpbGxSb3RhdGlvbiwgZml4Um90YXRpb247XG5cbiAgICB2YXIgZGlhbWV0ZXIgPSBhdHRyLm1kRGlhbWV0ZXIgfHwgNDg7XG4gICAgdmFyIHNjYWxlID0gZGlhbWV0ZXIvNDg7XG5cbiAgICBjaXJjbGUuc3R5bGVbJG1kQ29uc3RhbnQuQ1NTLlRSQU5TRk9STV0gPSAnc2NhbGUoJyArIHNjYWxlLnRvU3RyaW5nKCkgKyAnKSc7XG5cbiAgICBhdHRyLiRvYnNlcnZlKCd2YWx1ZScsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBjbGFtcGVkID0gY2xhbXAodmFsdWUpO1xuICAgICAgZmlsbFJvdGF0aW9uID0gZmlsbFJvdGF0aW9uc1tjbGFtcGVkXTtcbiAgICAgIGZpeFJvdGF0aW9uID0gZml4Um90YXRpb25zW2NsYW1wZWRdO1xuXG4gICAgICBlbGVtZW50LmF0dHIoJ2FyaWEtdmFsdWVub3cnLCBjbGFtcGVkKTtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IGZpbGwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmlsbFtpXS5zdHlsZVskbWRDb25zdGFudC5DU1MuVFJBTlNGT1JNXSA9IGZpbGxSb3RhdGlvbjtcbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gMDsgaSA8IGZpeC5sZW5ndGg7IGkrKykge1xuICAgICAgICBmaXhbaV0uc3R5bGVbJG1kQ29uc3RhbnQuQ1NTLlRSQU5TRk9STV0gPSBmaXhSb3RhdGlvbjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsYW1wKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID4gMTAwKSB7XG4gICAgICByZXR1cm4gMTAwO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSA8IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiBNYXRoLmNlaWwodmFsdWUgfHwgMCk7XG4gIH1cbn1cbk1kUHJvZ3Jlc3NDaXJjdWxhckRpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJCRyQUZcIiwgXCIkbWRDb25zdGFudFwiLCBcIiRtZFRoZW1pbmdcIl07XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbWF0ZXJpYWwuY29tcG9uZW50cy5wcm9ncmVzc0xpbmVhclxuICogQGRlc2NyaXB0aW9uIExpbmVhciBQcm9ncmVzcyBtb2R1bGUhXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb21wb25lbnRzLnByb2dyZXNzTGluZWFyJywgW1xuICAnbWF0ZXJpYWwuY29yZSdcbl0pXG4gIC5kaXJlY3RpdmUoJ21kUHJvZ3Jlc3NMaW5lYXInLCBNZFByb2dyZXNzTGluZWFyRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBtZFByb2dyZXNzTGluZWFyXG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvbXBvbmVudHMucHJvZ3Jlc3NMaW5lYXJcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgbGluZWFyIHByb2dyZXNzIGRpcmVjdGl2ZSBpcyB1c2VkIHRvIG1ha2UgbG9hZGluZyBjb250ZW50IGluIHlvdXIgYXBwIGFzIGRlbGlnaHRmdWwgYW5kIHBhaW5sZXNzIGFzIHBvc3NpYmxlIGJ5IG1pbmltaXppbmcgdGhlIGFtb3VudCBvZiB2aXN1YWwgY2hhbmdlIGEgdXNlciBzZWVzIGJlZm9yZSB0aGV5IGNhbiB2aWV3IGFuZCBpbnRlcmFjdCB3aXRoIGNvbnRlbnQuIEVhY2ggb3BlcmF0aW9uIHNob3VsZCBvbmx5IGJlIHJlcHJlc2VudGVkIGJ5IG9uZSBhY3Rpdml0eSBpbmRpY2F0b3LigJRmb3IgZXhhbXBsZSwgb25lIHJlZnJlc2ggb3BlcmF0aW9uIHNob3VsZCBub3QgZGlzcGxheSBib3RoIGEgcmVmcmVzaCBiYXIgYW5kIGFuIGFjdGl2aXR5IGNpcmNsZS5cbiAqXG4gKiBGb3Igb3BlcmF0aW9ucyB3aGVyZSB0aGUgcGVyY2VudGFnZSBvZiB0aGUgb3BlcmF0aW9uIGNvbXBsZXRlZCBjYW4gYmUgZGV0ZXJtaW5lZCwgdXNlIGEgZGV0ZXJtaW5hdGUgaW5kaWNhdG9yLiBUaGV5IGdpdmUgdXNlcnMgYSBxdWljayBzZW5zZSBvZiBob3cgbG9uZyBhbiBvcGVyYXRpb24gd2lsbCB0YWtlLlxuICpcbiAqIEZvciBvcGVyYXRpb25zIHdoZXJlIHRoZSB1c2VyIGlzIGFza2VkIHRvIHdhaXQgYSBtb21lbnQgd2hpbGUgc29tZXRoaW5nIGZpbmlzaGVzIHVwLCBhbmQgaXTigJlzIG5vdCBuZWNlc3NhcnkgdG8gZXhwb3NlIHdoYXQncyBoYXBwZW5pbmcgYmVoaW5kIHRoZSBzY2VuZXMgYW5kIGhvdyBsb25nIGl0IHdpbGwgdGFrZSwgdXNlIGFuIGluZGV0ZXJtaW5hdGUgaW5kaWNhdG9yLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZC1tb2RlIFNlbGVjdCBmcm9tIG9uZSBvZiBmb3VyIG1vZGVzOiBkZXRlcm1pbmF0ZSwgaW5kZXRlcm1pbmF0ZSwgYnVmZmVyIG9yIHF1ZXJ5LlxuICogQHBhcmFtIHtudW1iZXI9fSB2YWx1ZSBJbiBkZXRlcm1pbmF0ZSBhbmQgYnVmZmVyIG1vZGVzLCB0aGlzIG51bWJlciByZXByZXNlbnRzIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBwcmltYXJ5IHByb2dyZXNzIGJhci4gRGVmYXVsdDogMFxuICogQHBhcmFtIHtudW1iZXI9fSBtZC1idWZmZXItdmFsdWUgSW4gdGhlIGJ1ZmZlciBtb2RlLCB0aGlzIG51bWJlciByZXByZXNlbnRzIHRoZSBwcmVjZW50YWdlIG9mIHRoZSBzZWNvbmRhcnkgcHJvZ3Jlc3MgYmFyLiBEZWZhdWx0OiAwXG4gKlxuICogQHVzYWdlXG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogPG1kLXByb2dyZXNzLWxpbmVhciBtZC1tb2RlPVwiZGV0ZXJtaW5hdGVcIiB2YWx1ZT1cIi4uLlwiPjwvbWQtcHJvZ3Jlc3MtbGluZWFyPlxuICpcbiAqIDxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImRldGVybWluYXRlXCIgbmctdmFsdWU9XCIuLi5cIj48L21kLXByb2dyZXNzLWxpbmVhcj5cbiAqXG4gKiA8bWQtcHJvZ3Jlc3MtbGluZWFyIG1kLW1vZGU9XCJpbmRldGVybWluYXRlXCI+PC9tZC1wcm9ncmVzcy1saW5lYXI+XG4gKlxuICogPG1kLXByb2dyZXNzLWxpbmVhciBtZC1tb2RlPVwiYnVmZmVyXCIgdmFsdWU9XCIuLi5cIiBtZC1idWZmZXItdmFsdWU9XCIuLi5cIj48L21kLXByb2dyZXNzLWxpbmVhcj5cbiAqXG4gKiA8bWQtcHJvZ3Jlc3MtbGluZWFyIG1kLW1vZGU9XCJxdWVyeVwiPjwvbWQtcHJvZ3Jlc3MtbGluZWFyPlxuICogPC9obGpzPlxuICovXG5mdW5jdGlvbiBNZFByb2dyZXNzTGluZWFyRGlyZWN0aXZlKCQkckFGLCAkbWRDb25zdGFudCwgJG1kVGhlbWluZykge1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJtZC1jb250YWluZXJcIj4nICtcbiAgICAgICc8ZGl2IGNsYXNzPVwibWQtZGFzaGVkXCI+PC9kaXY+JyArXG4gICAgICAnPGRpdiBjbGFzcz1cIm1kLWJhciBtZC1iYXIxXCI+PC9kaXY+JyArXG4gICAgICAnPGRpdiBjbGFzcz1cIm1kLWJhciBtZC1iYXIyXCI+PC9kaXY+JyArXG4gICAgICAnPC9kaXY+JyxcbiAgICBjb21waWxlOiBjb21waWxlXG4gIH07XG4gIFxuICBmdW5jdGlvbiBjb21waWxlKHRFbGVtZW50LCB0QXR0cnMsIHRyYW5zY2x1ZGUpIHtcbiAgICB0RWxlbWVudC5hdHRyKCdhcmlhLXZhbHVlbWluJywgMCk7XG4gICAgdEVsZW1lbnQuYXR0cignYXJpYS12YWx1ZW1heCcsIDEwMCk7XG4gICAgdEVsZW1lbnQuYXR0cigncm9sZScsICdwcm9ncmVzc2JhcicpO1xuXG4gICAgcmV0dXJuIHBvc3RMaW5rO1xuICB9XG4gIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgJG1kVGhlbWluZyhlbGVtZW50KTtcbiAgICB2YXIgYmFyMVN0eWxlID0gZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcubWQtYmFyMScpLnN0eWxlLFxuICAgICAgYmFyMlN0eWxlID0gZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcubWQtYmFyMicpLnN0eWxlLFxuICAgICAgY29udGFpbmVyID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLm1kLWNvbnRhaW5lcicpKTtcblxuICAgIGF0dHIuJG9ic2VydmUoJ3ZhbHVlJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChhdHRyLm1kTW9kZSA9PSAncXVlcnknKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNsYW1wZWQgPSBjbGFtcCh2YWx1ZSk7XG4gICAgICBlbGVtZW50LmF0dHIoJ2FyaWEtdmFsdWVub3cnLCBjbGFtcGVkKTtcbiAgICAgIGJhcjJTdHlsZVskbWRDb25zdGFudC5DU1MuVFJBTlNGT1JNXSA9IHRyYW5zZm9ybXNbY2xhbXBlZF07XG4gICAgfSk7XG5cbiAgICBhdHRyLiRvYnNlcnZlKCdtZEJ1ZmZlclZhbHVlJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGJhcjFTdHlsZVskbWRDb25zdGFudC5DU1MuVFJBTlNGT1JNXSA9IHRyYW5zZm9ybXNbY2xhbXAodmFsdWUpXTtcbiAgICB9KTtcblxuICAgICQkckFGKGZ1bmN0aW9uKCkge1xuICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdtZC1yZWFkeScpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xhbXAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPiAxMDApIHtcbiAgICAgIHJldHVybiAxMDA7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIE1hdGguY2VpbCh2YWx1ZSB8fCAwKTtcbiAgfVxufVxuTWRQcm9ncmVzc0xpbmVhckRpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJCRyQUZcIiwgXCIkbWRDb25zdGFudFwiLCBcIiRtZFRoZW1pbmdcIl07XG5cblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuLy8gUHJpdmF0ZSBNZXRob2RzXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG52YXIgdHJhbnNmb3JtcyA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheSgxMDEpO1xuICBmb3IodmFyIGkgPSAwOyBpIDwgMTAxOyBpKyspe1xuICAgIHZhbHVlc1tpXSA9IG1ha2VUcmFuc2Zvcm0oaSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIG1ha2VUcmFuc2Zvcm0odmFsdWUpe1xuICAgIHZhciBzY2FsZSA9IHZhbHVlLzEwMDtcbiAgICB2YXIgdHJhbnNsYXRlWCA9ICh2YWx1ZS0xMDApLzI7XG4gICAgcmV0dXJuICd0cmFuc2xhdGVYKCcgKyB0cmFuc2xhdGVYLnRvU3RyaW5nKCkgKyAnJSkgc2NhbGUoJyArIHNjYWxlLnRvU3RyaW5nKCkgKyAnLCAxKSc7XG4gIH1cbn0pKCk7XG5cbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBtYXRlcmlhbC5jb21wb25lbnRzLnJhZGlvQnV0dG9uXG4gKiBAZGVzY3JpcHRpb24gcmFkaW9CdXR0b24gbW9kdWxlIVxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy5yYWRpb0J1dHRvbicsIFtcbiAgJ21hdGVyaWFsLmNvcmUnXG5dKVxuICAuZGlyZWN0aXZlKCdtZFJhZGlvR3JvdXAnLCBtZFJhZGlvR3JvdXBEaXJlY3RpdmUpXG4gIC5kaXJlY3RpdmUoJ21kUmFkaW9CdXR0b24nLCBtZFJhZGlvQnV0dG9uRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvbXBvbmVudHMucmFkaW9CdXR0b25cbiAqIEBuYW1lIG1kUmFkaW9Hcm91cFxuICpcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYDxtZC1yYWRpby1ncm91cD5gIGRpcmVjdGl2ZSBpZGVudGlmaWVzIGEgZ3JvdXBpbmdcbiAqIGNvbnRhaW5lciBmb3IgdGhlIDEuLm4gZ3JvdXBlZCByYWRpbyBidXR0b25zOyBzcGVjaWZpZWQgdXNpbmcgbmVzdGVkXG4gKiBgPG1kLXJhZGlvLWJ1dHRvbj5gIHRhZ3MuXG4gKlxuICogQXMgcGVyIHRoZSBbbWF0ZXJpYWwgZGVzaWduIHNwZWNdKGh0dHA6Ly93d3cuZ29vZ2xlLmNvbS9kZXNpZ24vc3BlYy9zdHlsZS9jb2xvci5odG1sI2NvbG9yLXVpLWNvbG9yLWFwcGxpY2F0aW9uKVxuICogdGhlIHJhZGlvIGJ1dHRvbiBpcyBpbiB0aGUgYWNjZW50IGNvbG9yIGJ5IGRlZmF1bHQuIFRoZSBwcmltYXJ5IGNvbG9yIHBhbGV0dGUgbWF5IGJlIHVzZWQgd2l0aFxuICogdGhlIGBtZC1wcmltYXJ5YCBjbGFzcy5cbiAqXG4gKiBOb3RlOiBgPG1kLXJhZGlvLWdyb3VwPmAgYW5kIGA8bWQtcmFkaW8tYnV0dG9uPmAgaGFuZGxlIHRhYmluZGV4IGRpZmZlcmVudGx5XG4gKiB0aGFuIHRoZSBuYXRpdmUgYDxpbnB1dCB0eXBlPSdyYWRpbyc+YCBjb250cm9scy4gV2hlcmVhcyB0aGUgbmF0aXZlIGNvbnRyb2xzXG4gKiBmb3JjZSB0aGUgdXNlciB0byB0YWIgdGhyb3VnaCBhbGwgdGhlIHJhZGlvIGJ1dHRvbnMsIGA8bWQtcmFkaW8tZ3JvdXA+YFxuICogaXMgZm9jdXNhYmxlLCBhbmQgYnkgZGVmYXVsdCB0aGUgYDxtZC1yYWRpby1idXR0b24+YHMgYXJlIG5vdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmctbW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICogQHBhcmFtIHtib29sZWFuPX0gbWQtbm8taW5rIFVzZSBvZiBhdHRyaWJ1dGUgaW5kaWNhdGVzIGZsYWcgdG8gZGlzYWJsZSBpbmsgcmlwcGxlIGVmZmVjdHMuXG4gKlxuICogQHVzYWdlXG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogPG1kLXJhZGlvLWdyb3VwIG5nLW1vZGVsPVwic2VsZWN0ZWRcIj5cbiAqXG4gKiAgIDxtZC1yYWRpby1idXR0b25cbiAqICAgICAgICBuZy1yZXBlYXQ9XCJkIGluIGNvbG9yT3B0aW9uc1wiXG4gKiAgICAgICAgbmctdmFsdWU9XCJkLnZhbHVlXCIgYXJpYS1sYWJlbD1cInt7IGQubGFiZWwgfX1cIj5cbiAqXG4gKiAgICAgICAgICB7eyBkLmxhYmVsIH19XG4gKlxuICogICA8L21kLXJhZGlvLWJ1dHRvbj5cbiAqXG4gKiA8L21kLXJhZGlvLWdyb3VwPlxuICogPC9obGpzPlxuICpcbiAqL1xuZnVuY3Rpb24gbWRSYWRpb0dyb3VwRGlyZWN0aXZlKCRtZFV0aWwsICRtZENvbnN0YW50LCAkbWRUaGVtaW5nKSB7XG4gIFJhZGlvR3JvdXBDb250cm9sbGVyLnByb3RvdHlwZSA9IGNyZWF0ZVJhZGlvR3JvdXBDb250cm9sbGVyUHJvdG8oKTtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgY29udHJvbGxlcjogWyckZWxlbWVudCcsIFJhZGlvR3JvdXBDb250cm9sbGVyXSxcbiAgICByZXF1aXJlOiBbJ21kUmFkaW9Hcm91cCcsICc/bmdNb2RlbCddLFxuICAgIGxpbms6IHsgcHJlOiBsaW5rUmFkaW9Hcm91cCB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbGlua1JhZGlvR3JvdXAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG4gICAgJG1kVGhlbWluZyhlbGVtZW50KTtcbiAgICB2YXIgcmdDdHJsID0gY3RybHNbMF07XG4gICAgdmFyIG5nTW9kZWxDdHJsID0gY3RybHNbMV0gfHwgJG1kVXRpbC5mYWtlTmdNb2RlbCgpO1xuXG4gICAgZnVuY3Rpb24ga2V5ZG93bkxpc3RlbmVyKGV2KSB7XG4gICAgICBzd2l0Y2goZXYua2V5Q29kZSkge1xuICAgICAgICBjYXNlICRtZENvbnN0YW50LktFWV9DT0RFLkxFRlRfQVJST1c6XG4gICAgICAgIGNhc2UgJG1kQ29uc3RhbnQuS0VZX0NPREUuVVBfQVJST1c6XG4gICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByZ0N0cmwuc2VsZWN0UHJldmlvdXMoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICRtZENvbnN0YW50LktFWV9DT0RFLlJJR0hUX0FSUk9XOlxuICAgICAgICBjYXNlICRtZENvbnN0YW50LktFWV9DT0RFLkRPV05fQVJST1c6XG4gICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByZ0N0cmwuc2VsZWN0TmV4dCgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJG1kQ29uc3RhbnQuS0VZX0NPREUuRU5URVI6XG4gICAgICAgICAgdmFyIGZvcm0gPSBhbmd1bGFyLmVsZW1lbnQoJG1kVXRpbC5nZXRDbG9zZXN0KGVsZW1lbnRbMF0sICdmb3JtJykpO1xuICAgICAgICAgIGlmIChmb3JtLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvcm0udHJpZ2dlckhhbmRsZXIoJ3N1Ym1pdCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZ0N0cmwuaW5pdChuZ01vZGVsQ3RybCk7XG5cbiAgICBlbGVtZW50LmF0dHIoe1xuICAgICAgICAgICAgICAncm9sZSc6ICdyYWRpb2dyb3VwJyxcbiAgICAgICAgICAgICAgJ3RhYkluZGV4JzogZWxlbWVudC5hdHRyKCd0YWJpbmRleCcpIHx8ICcwJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbigna2V5ZG93bicsIGtleWRvd25MaXN0ZW5lcik7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIFJhZGlvR3JvdXBDb250cm9sbGVyKCRlbGVtZW50KSB7XG4gICAgdGhpcy5fcmFkaW9CdXR0b25SZW5kZXJGbnMgPSBbXTtcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVSYWRpb0dyb3VwQ29udHJvbGxlclByb3RvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbml0OiBmdW5jdGlvbihuZ01vZGVsQ3RybCkge1xuICAgICAgICB0aGlzLl9uZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsO1xuICAgICAgICB0aGlzLl9uZ01vZGVsQ3RybC4kcmVuZGVyID0gYW5ndWxhci5iaW5kKHRoaXMsIHRoaXMucmVuZGVyKTtcbiAgICAgIH0sXG4gICAgICBhZGQ6IGZ1bmN0aW9uKHJiUmVuZGVyKSB7XG4gICAgICAgIHRoaXMuX3JhZGlvQnV0dG9uUmVuZGVyRm5zLnB1c2gocmJSZW5kZXIpO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24ocmJSZW5kZXIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fcmFkaW9CdXR0b25SZW5kZXJGbnMuaW5kZXhPZihyYlJlbmRlcik7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICB0aGlzLl9yYWRpb0J1dHRvblJlbmRlckZucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fcmFkaW9CdXR0b25SZW5kZXJGbnMuZm9yRWFjaChmdW5jdGlvbihyYlJlbmRlcikge1xuICAgICAgICAgIHJiUmVuZGVyKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHNldFZpZXdWYWx1ZTogZnVuY3Rpb24odmFsdWUsIGV2ZW50VHlwZSkge1xuICAgICAgICB0aGlzLl9uZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlLCBldmVudFR5cGUpO1xuICAgICAgICAvLyB1cGRhdGUgdGhlIG90aGVyIHJhZGlvIGJ1dHRvbnMgYXMgd2VsbFxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfSxcbiAgICAgIGdldFZpZXdWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9uZ01vZGVsQ3RybC4kdmlld1ZhbHVlO1xuICAgICAgfSxcbiAgICAgIHNlbGVjdE5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2hhbmdlU2VsZWN0ZWRCdXR0b24odGhpcy4kZWxlbWVudCwgMSk7XG4gICAgICB9LFxuICAgICAgc2VsZWN0UHJldmlvdXMgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNoYW5nZVNlbGVjdGVkQnV0dG9uKHRoaXMuJGVsZW1lbnQsIC0xKTtcbiAgICAgIH0sXG4gICAgICBzZXRBY3RpdmVEZXNjZW5kYW50OiBmdW5jdGlvbiAocmFkaW9JZCkge1xuICAgICAgICB0aGlzLiRlbGVtZW50LmF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcsIHJhZGlvSWQpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgcmFkaW8gZ3JvdXAncyBzZWxlY3RlZCBidXR0b24gYnkgYSBnaXZlbiBpbmNyZW1lbnQuXG4gICAqIElmIG5vIGJ1dHRvbiBpcyBzZWxlY3RlZCwgc2VsZWN0IHRoZSBmaXJzdCBidXR0b24uXG4gICAqL1xuICBmdW5jdGlvbiBjaGFuZ2VTZWxlY3RlZEJ1dHRvbihwYXJlbnQsIGluY3JlbWVudCkge1xuICAgIC8vIENvZXJjZSBhbGwgY2hpbGQgcmFkaW8gYnV0dG9ucyBpbnRvIGFuIGFycmF5LCB0aGVuIHdyYXAgdGhlbiBpbiBhbiBpdGVyYXRvclxuICAgIHZhciBidXR0b25zID0gJG1kVXRpbC5pdGVyYXRvcihcbiAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHBhcmVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCdtZC1yYWRpby1idXR0b24nKSksXG4gICAgICB0cnVlXG4gICAgKTtcblxuICAgIGlmIChidXR0b25zLmNvdW50KCkpIHtcbiAgICAgIHZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICAgICAgLy8gSWYgZGlzYWJsZWQsIHRoZW4gTk9UIHZhbGlkXG4gICAgICAgIHJldHVybiAhYW5ndWxhci5lbGVtZW50KGJ1dHRvbikuYXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgfTtcbiAgICAgIHZhciBzZWxlY3RlZCA9IHBhcmVudFswXS5xdWVyeVNlbGVjdG9yKCdtZC1yYWRpby1idXR0b24ubWQtY2hlY2tlZCcpO1xuICAgICAgdmFyIHRhcmdldCA9IGJ1dHRvbnNbaW5jcmVtZW50IDwgMCA/ICdwcmV2aW91cycgOiAnbmV4dCddKHNlbGVjdGVkLCB2YWxpZGF0ZSkgfHwgYnV0dG9ucy5maXJzdCgpO1xuICAgICAgLy8gQWN0aXZhdGUgcmFkaW9CdXR0b24ncyBjbGljayBsaXN0ZW5lciAodHJpZ2dlckhhbmRsZXIgd29uJ3QgY3JlYXRlIGEgcmVhbCBjbGljayBldmVudClcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCh0YXJnZXQpLnRyaWdnZXJIYW5kbGVyKCdjbGljaycpO1xuXG5cbiAgICB9XG4gIH1cblxufVxubWRSYWRpb0dyb3VwRGlyZWN0aXZlLiRpbmplY3QgPSBbXCIkbWRVdGlsXCIsIFwiJG1kQ29uc3RhbnRcIiwgXCIkbWRUaGVtaW5nXCJdO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5yYWRpb0J1dHRvblxuICogQG5hbWUgbWRSYWRpb0J1dHRvblxuICpcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYDxtZC1yYWRpby1idXR0b24+YGRpcmVjdGl2ZSBpcyB0aGUgY2hpbGQgZGlyZWN0aXZlIHJlcXVpcmVkIHRvIGJlIHVzZWQgd2l0aGluIGA8bWQtcmFkaW8tZ3JvdXA+YCBlbGVtZW50cy5cbiAqXG4gKiBXaGlsZSBzaW1pbGFyIHRvIHRoZSBgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwiXCIgdmFsdWU9XCJcIj5gIGRpcmVjdGl2ZSxcbiAqIHRoZSBgPG1kLXJhZGlvLWJ1dHRvbj5gIGRpcmVjdGl2ZSBwcm92aWRlcyBpbmsgZWZmZWN0cywgQVJJQSBzdXBwb3J0LCBhbmRcbiAqIHN1cHBvcnRzIHVzZSB3aXRoaW4gbmFtZWQgcmFkaW8gZ3JvdXBzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ1ZhbHVlIEFuZ3VsYXIgZXhwcmVzc2lvbiB3aGljaCBzZXRzIHRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGRcbiAqICAgIGJlIHNldCB3aGVuIHNlbGVjdGVkLipcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIHNlbGVjdGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSBhcmlhTGFiZWwgQWRkcyBsYWJlbCB0byByYWRpbyBidXR0b24gZm9yIGFjY2Vzc2liaWxpdHkuXG4gKiBEZWZhdWx0cyB0byByYWRpbyBidXR0b24ncyB0ZXh0LiBJZiBubyBkZWZhdWx0IHRleHQgaXMgZm91bmQsIGEgd2FybmluZyB3aWxsIGJlIGxvZ2dlZC5cbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKlxuICogPG1kLXJhZGlvLWJ1dHRvbiB2YWx1ZT1cIjFcIiBhcmlhLWxhYmVsPVwiTGFiZWwgMVwiPlxuICogICBMYWJlbCAxXG4gKiA8L21kLXJhZGlvLWJ1dHRvbj5cbiAqXG4gKiA8bWQtcmFkaW8tYnV0dG9uIG5nLW1vZGVsPVwiY29sb3JcIiBuZy12YWx1ZT1cInNwZWNpYWxWYWx1ZVwiIGFyaWEtbGFiZWw9XCJHcmVlblwiPlxuICogICBHcmVlblxuICogPC9tZC1yYWRpby1idXR0b24+XG4gKlxuICogPC9obGpzPlxuICpcbiAqL1xuZnVuY3Rpb24gbWRSYWRpb0J1dHRvbkRpcmVjdGl2ZSgkbWRBcmlhLCAkbWRVdGlsLCAkbWRUaGVtaW5nKSB7XG5cbiAgdmFyIENIRUNLRURfQ1NTID0gJ21kLWNoZWNrZWQnO1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXF1aXJlOiAnXm1kUmFkaW9Hcm91cCcsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJtZC1jb250YWluZXJcIiBtZC1pbmstcmlwcGxlIG1kLWluay1yaXBwbGUtY2hlY2tib3g+JyArXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJtZC1vZmZcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1kLW9uXCI+PC9kaXY+JyArXG4gICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgJzxkaXYgbmctdHJhbnNjbHVkZSBjbGFzcz1cIm1kLWxhYmVsXCI+PC9kaXY+JyxcbiAgICBsaW5rOiBsaW5rXG4gIH07XG5cbiAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgcmdDdHJsKSB7XG4gICAgdmFyIGxhc3RDaGVja2VkO1xuXG4gICAgJG1kVGhlbWluZyhlbGVtZW50KTtcbiAgICBjb25maWd1cmVBcmlhKGVsZW1lbnQsIHNjb3BlKTtcblxuICAgIHJnQ3RybC5hZGQocmVuZGVyKTtcbiAgICBhdHRyLiRvYnNlcnZlKCd2YWx1ZScsIHJlbmRlcik7XG5cbiAgICBlbGVtZW50XG4gICAgICAub24oJ2NsaWNrJywgbGlzdGVuZXIpXG4gICAgICAub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJnQ3RybC5yZW1vdmUocmVuZGVyKTtcbiAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gbGlzdGVuZXIoZXYpIHtcbiAgICAgIGlmIChlbGVtZW50WzBdLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkgcmV0dXJuO1xuXG4gICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJnQ3RybC5zZXRWaWV3VmFsdWUoYXR0ci52YWx1ZSwgZXYgJiYgZXYudHlwZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgY2hlY2tlZCA9IChyZ0N0cmwuZ2V0Vmlld1ZhbHVlKCkgPT0gYXR0ci52YWx1ZSk7XG4gICAgICBpZiAoY2hlY2tlZCA9PT0gbGFzdENoZWNrZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGFzdENoZWNrZWQgPSBjaGVja2VkO1xuICAgICAgZWxlbWVudC5hdHRyKCdhcmlhLWNoZWNrZWQnLCBjaGVja2VkKTtcbiAgICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoQ0hFQ0tFRF9DU1MpO1xuICAgICAgICByZ0N0cmwuc2V0QWN0aXZlRGVzY2VuZGFudChlbGVtZW50LmF0dHIoJ2lkJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhDSEVDS0VEX0NTUyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluamVjdCBBUklBLXNwZWNpZmljIGF0dHJpYnV0ZXMgYXBwcm9wcmlhdGUgZm9yIGVhY2ggcmFkaW8gYnV0dG9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29uZmlndXJlQXJpYSggZWxlbWVudCwgc2NvcGUgKXtcbiAgICAgIHNjb3BlLmFyaWFJZCA9IGJ1aWxkQXJpYUlEKCk7XG5cbiAgICAgIGVsZW1lbnQuYXR0cih7XG4gICAgICAgICdpZCcgOiAgc2NvcGUuYXJpYUlkLFxuICAgICAgICAncm9sZScgOiAncmFkaW8nLFxuICAgICAgICAnYXJpYS1jaGVja2VkJyA6ICdmYWxzZSdcbiAgICAgIH0pO1xuXG4gICAgICAkbWRBcmlhLmV4cGVjdFdpdGhUZXh0KGVsZW1lbnQsICdhcmlhLWxhYmVsJyk7XG5cbiAgICAgIC8qKlxuICAgICAgICogQnVpbGQgYSB1bmlxdWUgSUQgZm9yIGVhY2ggcmFkaW8gYnV0dG9uIHRoYXQgd2lsbCBiZSB1c2VkIHdpdGggYXJpYS1hY3RpdmVkZXNjZW5kYW50LlxuICAgICAgICogUHJlc2VydmUgZXhpc3RpbmcgSUQgaWYgYWxyZWFkeSBzcGVjaWZpZWQuXG4gICAgICAgKiBAcmV0dXJucyB7KnxzdHJpbmd9XG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkQXJpYUlEKCkge1xuICAgICAgICByZXR1cm4gYXR0ci5pZCB8fCAoICdyYWRpbycgKyBcIl9cIiArICRtZFV0aWwubmV4dFVpZCgpICk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5tZFJhZGlvQnV0dG9uRGlyZWN0aXZlLiRpbmplY3QgPSBbXCIkbWRBcmlhXCIsIFwiJG1kVXRpbFwiLCBcIiRtZFRoZW1pbmdcIl07XG5cbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbWF0ZXJpYWwuY29tcG9uZW50cy5zaWRlbmF2XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIFNpZGVuYXYgUVAgY29tcG9uZW50LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy5zaWRlbmF2JywgW1xuICAgICdtYXRlcmlhbC5jb3JlJyxcbiAgICAnbWF0ZXJpYWwuY29tcG9uZW50cy5iYWNrZHJvcCdcbiAgXSlcbiAgLmZhY3RvcnkoJyRtZFNpZGVuYXYnLCBTaWRlbmF2U2VydmljZSApXG4gIC5kaXJlY3RpdmUoJ21kU2lkZW5hdicsIFNpZGVuYXZEaXJlY3RpdmUpXG4gIC5jb250cm9sbGVyKCckbWRTaWRlbmF2Q29udHJvbGxlcicsIFNpZGVuYXZDb250cm9sbGVyKTtcblxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJG1kU2lkZW5hdlxuICogQG1vZHVsZSBtYXRlcmlhbC5jb21wb25lbnRzLnNpZGVuYXZcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIGAkbWRTaWRlbmF2YCBtYWtlcyBpdCBlYXN5IHRvIGludGVyYWN0IHdpdGggbXVsdGlwbGUgc2lkZW5hdnNcbiAqIGluIGFuIGFwcC5cbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJqc1wiPlxuICogLy8gVG9nZ2xlIHRoZSBnaXZlbiBzaWRlbmF2XG4gKiAkbWRTaWRlbmF2KGNvbXBvbmVudElkKS50b2dnbGUoKTtcbiAqIDwvaGxqcz5cbiAqIDxobGpzIGxhbmc9XCJqc1wiPlxuICogLy8gT3BlbiB0aGUgZ2l2ZW4gc2lkZW5hdlxuICogJG1kU2lkZW5hdihjb21wb25lbnRJZCkub3BlbigpO1xuICogPC9obGpzPlxuICogPGhsanMgbGFuZz1cImpzXCI+XG4gKiAvLyBDbG9zZSB0aGUgZ2l2ZW4gc2lkZW5hdlxuICogJG1kU2lkZW5hdihjb21wb25lbnRJZCkuY2xvc2UoKTtcbiAqIDwvaGxqcz5cbiAqIDxobGpzIGxhbmc9XCJqc1wiPlxuICogLy8gRXhwb3NlcyB3aGV0aGVyIGdpdmVuIHNpZGVuYXYgaXMgc2V0IHRvIGJlIG9wZW5cbiAqICRtZFNpZGVuYXYoY29tcG9uZW50SWQpLmlzT3BlbigpO1xuICogPC9obGpzPlxuICogPGhsanMgbGFuZz1cImpzXCI+XG4gKiAvLyBFeHBvc2VzIHdoZXRoZXIgZ2l2ZW4gc2lkZW5hdiBpcyBsb2NrZWQgb3BlblxuICogLy8gSWYgdGhpcyBpcyB0cnVlLCB0aGUgc2lkZW5hdiB3aWxsIGJlIG9wZW4gcmVnYXJkbGVzcyBvZiBpc09wZW4oKVxuICogJG1kU2lkZW5hdihjb21wb25lbnRJZCkuaXNMb2NrZWRPcGVuKCk7XG4gKiA8L2hsanM+XG4gKi9cbmZ1bmN0aW9uIFNpZGVuYXZTZXJ2aWNlKCRtZENvbXBvbmVudFJlZ2lzdHJ5LCAkcSkge1xuICByZXR1cm4gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgdmFyIGVycm9yTXNnID0gXCJTaWRlTmF2ICdcIiArIGhhbmRsZSArIFwiJyBpcyBub3QgYXZhaWxhYmxlIVwiO1xuXG4gICAgLy8gTG9va3VwIHRoZSBjb250cm9sbGVyIGluc3RhbmNlIGZvciB0aGUgc3BlY2lmaWVkIHNpZE5hdiBpbnN0YW5jZVxuICAgIHZhciBpbnN0YW5jZSA9ICRtZENvbXBvbmVudFJlZ2lzdHJ5LmdldChoYW5kbGUpO1xuICAgIGlmKCFpbnN0YW5jZSkge1xuICAgICAgJG1kQ29tcG9uZW50UmVnaXN0cnkubm90Rm91bmRFcnJvcihoYW5kbGUpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpc09wZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaW5zdGFuY2UgJiYgaW5zdGFuY2UuaXNPcGVuKCk7XG4gICAgICB9LFxuICAgICAgaXNMb2NrZWRPcGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlICYmIGluc3RhbmNlLmlzTG9ja2VkT3BlbigpO1xuICAgICAgfSxcbiAgICAgIHRvZ2dsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZSA/IGluc3RhbmNlLnRvZ2dsZSgpIDogJHEucmVqZWN0KGVycm9yTXNnKTtcbiAgICAgIH0sXG4gICAgICBvcGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlID8gaW5zdGFuY2Uub3BlbigpIDogJHEucmVqZWN0KGVycm9yTXNnKTtcbiAgICAgIH0sXG4gICAgICBjbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZSA/IGluc3RhbmNlLmNsb3NlKCkgOiAkcS5yZWplY3QoZXJyb3JNc2cpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5TaWRlbmF2U2VydmljZS4kaW5qZWN0ID0gW1wiJG1kQ29tcG9uZW50UmVnaXN0cnlcIiwgXCIkcVwiXTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBtZFNpZGVuYXZcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5zaWRlbmF2XG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEEgU2lkZW5hdiBjb21wb25lbnQgdGhhdCBjYW4gYmUgb3BlbmVkIGFuZCBjbG9zZWQgcHJvZ3JhbWF0aWNhbGx5LlxuICpcbiAqIEJ5IGRlZmF1bHQsIHVwb24gb3BlbmluZyBpdCB3aWxsIHNsaWRlIG91dCBvbiB0b3Agb2YgdGhlIG1haW4gY29udGVudCBhcmVhLlxuICpcbiAqIEB1c2FnZVxuICogPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqIDxkaXYgbGF5b3V0PVwicm93XCIgbmctY29udHJvbGxlcj1cIk15Q29udHJvbGxlclwiPlxuICogICA8bWQtc2lkZW5hdiBtZC1jb21wb25lbnQtaWQ9XCJsZWZ0XCIgY2xhc3M9XCJtZC1zaWRlbmF2LWxlZnRcIj5cbiAqICAgICBMZWZ0IE5hdiFcbiAqICAgPC9tZC1zaWRlbmF2PlxuICpcbiAqICAgPG1kLWNvbnRlbnQ+XG4gKiAgICAgQ2VudGVyIENvbnRlbnRcbiAqICAgICA8bWQtYnV0dG9uIG5nLWNsaWNrPVwib3BlbkxlZnRNZW51KClcIj5cbiAqICAgICAgIE9wZW4gTGVmdCBNZW51XG4gKiAgICAgPC9tZC1idXR0b24+XG4gKiAgIDwvbWQtY29udGVudD5cbiAqXG4gKiAgIDxtZC1zaWRlbmF2IG1kLWNvbXBvbmVudC1pZD1cInJpZ2h0XCJcbiAqICAgICBtZC1pcy1sb2NrZWQtb3Blbj1cIiRtZWRpYSgnbWluLXdpZHRoOiAzMzNweCcpXCJcbiAqICAgICBjbGFzcz1cIm1kLXNpZGVuYXYtcmlnaHRcIj5cbiAqICAgICBSaWdodCBOYXYhXG4gKiAgIDwvbWQtc2lkZW5hdj5cbiAqIDwvZGl2PlxuICogPC9obGpzPlxuICpcbiAqIDxobGpzIGxhbmc9XCJqc1wiPlxuICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFsnbmdNYXRlcmlhbCddKTtcbiAqIGFwcC5jb250cm9sbGVyKCdNeUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRtZFNpZGVuYXYpIHtcbiAqICAgJHNjb3BlLm9wZW5MZWZ0TWVudSA9IGZ1bmN0aW9uKCkge1xuICogICAgICRtZFNpZGVuYXYoJ2xlZnQnKS50b2dnbGUoKTtcbiAqICAgfTtcbiAqIH0pO1xuICogPC9obGpzPlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG1kLWlzLW9wZW4gQSBtb2RlbCBib3VuZCB0byB3aGV0aGVyIHRoZSBzaWRlbmF2IGlzIG9wZW5lZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWQtY29tcG9uZW50LWlkIGNvbXBvbmVudElkIHRvIHVzZSB3aXRoICRtZFNpZGVuYXYgc2VydmljZS5cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG1kLWlzLWxvY2tlZC1vcGVuIFdoZW4gdGhpcyBleHByZXNzaW9uIGV2YWx1dGVzIHRvIHRydWUsXG4gKiB0aGUgc2lkZW5hdiAnbG9ja3Mgb3Blbic6IGl0IGZhbGxzIGludG8gdGhlIGNvbnRlbnQncyBmbG93IGluc3RlYWRcbiAqIG9mIGFwcGVhcmluZyBvdmVyIGl0LiBUaGlzIG92ZXJyaWRlcyB0aGUgYGlzLW9wZW5gIGF0dHJpYnV0ZS5cbiAqXG4gKiBBICRtZWRpYSgpIGZ1bmN0aW9uIGlzIGV4cG9zZWQgdG8gdGhlIGlzLWxvY2tlZC1vcGVuIGF0dHJpYnV0ZSwgd2hpY2hcbiAqIGNhbiBiZSBnaXZlbiBhIG1lZGlhIHF1ZXJ5IG9yIG9uZSBvZiB0aGUgYHNtYCwgYGd0LXNtYCwgYG1kYCwgYGd0LW1kYCwgYGxnYCBvciBgZ3QtbGdgIHByZXNldHMuXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgIC0gYDxtZC1zaWRlbmF2IG1kLWlzLWxvY2tlZC1vcGVuPVwic2hvdWxkTG9ja09wZW5cIj48L21kLXNpZGVuYXY+YFxuICogICAtIGA8bWQtc2lkZW5hdiBtZC1pcy1sb2NrZWQtb3Blbj1cIiRtZWRpYSgnbWluLXdpZHRoOiAxMDAwcHgnKVwiPjwvbWQtc2lkZW5hdj5gXG4gKiAgIC0gYDxtZC1zaWRlbmF2IG1kLWlzLWxvY2tlZC1vcGVuPVwiJG1lZGlhKCdzbScpXCI+PC9tZC1zaWRlbmF2PmAgKGxvY2tzIG9wZW4gb24gc21hbGwgc2NyZWVucylcbiAqL1xuZnVuY3Rpb24gU2lkZW5hdkRpcmVjdGl2ZSgkdGltZW91dCwgJGFuaW1hdGUsICRwYXJzZSwgJG1kTWVkaWEsICRtZENvbnN0YW50LCAkY29tcGlsZSwgJG1kVGhlbWluZywgJHEsICRkb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgc2NvcGU6IHtcbiAgICAgIGlzT3BlbjogJz0/bWRJc09wZW4nXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiAnJG1kU2lkZW5hdkNvbnRyb2xsZXInLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ21kLWNsb3NlZCcpO1xuICAgICAgZWxlbWVudC5hdHRyKCd0YWJJbmRleCcsICctMScpO1xuICAgICAgcmV0dXJuIHBvc3RMaW5rO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGlyZWN0aXZlIFBvc3QgTGluayBmdW5jdGlvbi4uLlxuICAgKi9cbiAgZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIHNpZGVuYXZDdHJsKSB7XG4gICAgdmFyIHRyaWdnZXJpbmdFbGVtZW50ID0gbnVsbDtcbiAgICB2YXIgcHJvbWlzZSA9ICRxLndoZW4odHJ1ZSk7XG5cbiAgICB2YXIgaXNMb2NrZWRPcGVuUGFyc2VkID0gJHBhcnNlKGF0dHIubWRJc0xvY2tlZE9wZW4pO1xuICAgIHZhciBpc0xvY2tlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGlzTG9ja2VkT3BlblBhcnNlZChzY29wZS4kcGFyZW50LCB7XG4gICAgICAgICRtZWRpYTogJG1kTWVkaWFcbiAgICAgIH0pO1xuICAgIH07XG4gICAgdmFyIGJhY2tkcm9wID0gJGNvbXBpbGUoXG4gICAgICAnPG1kLWJhY2tkcm9wIGNsYXNzPVwibWQtc2lkZW5hdi1iYWNrZHJvcCBtZC1vcGFxdWUgbmctZW50ZXJcIj4nXG4gICAgKShzY29wZSk7XG5cbiAgICBlbGVtZW50Lm9uKCckZGVzdHJveScsIHNpZGVuYXZDdHJsLmRlc3Ryb3kpO1xuICAgICRtZFRoZW1pbmcuaW5oZXJpdChiYWNrZHJvcCwgZWxlbWVudCk7XG5cbiAgICBzY29wZS4kd2F0Y2goaXNMb2NrZWQsIHVwZGF0ZUlzTG9ja2VkKTtcbiAgICBzY29wZS4kd2F0Y2goJ2lzT3BlbicsIHVwZGF0ZUlzT3Blbik7XG5cblxuICAgIC8vIFB1Ymxpc2ggc3BlY2lhbCBhY2Nlc3NvciBmb3IgdGhlIENvbnRyb2xsZXIgaW5zdGFuY2VcbiAgICBzaWRlbmF2Q3RybC4kdG9nZ2xlT3BlbiA9IHRvZ2dsZU9wZW47XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGUgdGhlIERPTSBjbGFzc2VzIHRvIGluZGljYXRlIGBsb2NrZWRgXG4gICAgICogQHBhcmFtIGlzTG9ja2VkXG4gICAgICovXG4gICAgZnVuY3Rpb24gdXBkYXRlSXNMb2NrZWQoaXNMb2NrZWQsIG9sZFZhbHVlKSB7XG4gICAgICBzY29wZS5pc0xvY2tlZE9wZW4gPSBpc0xvY2tlZDtcbiAgICAgIGlmIChpc0xvY2tlZCA9PT0gb2xkVmFsdWUpIHtcbiAgICAgICAgZWxlbWVudC50b2dnbGVDbGFzcygnbWQtbG9ja2VkLW9wZW4nLCAhIWlzTG9ja2VkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRhbmltYXRlW2lzTG9ja2VkID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKGVsZW1lbnQsICdtZC1sb2NrZWQtb3BlbicpO1xuICAgICAgfVxuICAgICAgYmFja2Ryb3AudG9nZ2xlQ2xhc3MoJ21kLWxvY2tlZC1vcGVuJywgISFpc0xvY2tlZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlIHRoZSBTaWRlTmF2IHZpZXcgYW5kIGF0dGFjaC9kZXRhY2ggbGlzdGVuZXJzXG4gICAgICogQHBhcmFtIGlzT3BlblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZUlzT3Blbihpc09wZW4pIHtcbiAgICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudCgpO1xuXG4gICAgICBwYXJlbnRbaXNPcGVuID8gJ29uJyA6ICdvZmYnXSgna2V5ZG93bicsIG9uS2V5RG93bik7XG4gICAgICBiYWNrZHJvcFtpc09wZW4gPyAnb24nIDogJ29mZiddKCdjbGljaycsIGNsb3NlKTtcblxuICAgICAgaWYgKCBpc09wZW4gKSB7XG4gICAgICAgIC8vIENhcHR1cmUgdXBvbiBvcGVuaW5nLi5cbiAgICAgICAgdHJpZ2dlcmluZ0VsZW1lbnQgPSAkZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb21pc2UgPSAkcS5hbGwoW1xuICAgICAgICAkYW5pbWF0ZVtpc09wZW4gPyAnZW50ZXInIDogJ2xlYXZlJ10oYmFja2Ryb3AsIHBhcmVudCksXG4gICAgICAgICRhbmltYXRlW2lzT3BlbiA/ICdyZW1vdmVDbGFzcycgOiAnYWRkQ2xhc3MnXShlbGVtZW50LCAnbWQtY2xvc2VkJykudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBvcGVuZWQsIGFuZCBoYXZlbid0IGNsb3NlZCBhZ2FpbiBiZWZvcmUgdGhlIGFuaW1hdGlvbiBmaW5pc2hlZFxuICAgICAgICAgIGlmIChzY29wZS5pc09wZW4pIHtcbiAgICAgICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICBdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGUgdGhlIHNpZGVOYXYgdmlldyBhbmQgcHVibGlzaCBhIHByb21pc2UgdG8gYmUgcmVzb2x2ZWQgd2hlblxuICAgICAqIHRoZSB2aWV3IGFuaW1hdGlvbiBmaW5pc2hlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpc09wZW5cbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b2dnbGVPcGVuKCBpc09wZW4gKSB7XG4gICAgICBpZiAoc2NvcGUuaXNPcGVuID09IGlzT3BlbiApIHtcblxuICAgICAgICByZXR1cm4gJHEud2hlbih0cnVlKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAvLyBUb2dnbGUgdmFsdWUgdG8gZm9yY2UgYW4gYXN5bmMgYHVwZGF0ZUlzT3BlbigpYCB0byBydW5cbiAgICAgICAgc2NvcGUuaXNPcGVuID0gaXNPcGVuO1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgLy8gV2hlbiB0aGUgY3VycmVudCBgdXBkYXRlSXNPcGVuKClgIGFuaW1hdGlvbiBmaW5pc2hlc1xuICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuXG4gICAgICAgICAgICBpZiAoICFzY29wZS5pc09wZW4gKSB7XG4gICAgICAgICAgICAgIC8vIHJlc2V0IGZvY3VzIHRvIG9yaWdpbmF0aW5nIGVsZW1lbnQgKGlmIGF2YWlsYWJsZSkgdXBvbiBjbG9zZVxuICAgICAgICAgICAgICB0cmlnZ2VyaW5nRWxlbWVudCAmJiB0cmlnZ2VyaW5nRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICB0cmlnZ2VyaW5nRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9LDAsZmFsc2UpO1xuXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF1dG8tY2xvc2Ugc2lkZU5hdiB3aGVuIHRoZSBgZXNjYXBlYCBrZXkgaXMgcHJlc3NlZC5cbiAgICAgKiBAcGFyYW0gZXZ0XG4gICAgICovXG4gICAgZnVuY3Rpb24gb25LZXlEb3duKGV2KSB7XG4gICAgICB2YXIgaXNFc2NhcGUgPSAoZXYua2V5Q29kZSA9PT0gJG1kQ29uc3RhbnQuS0VZX0NPREUuRVNDQVBFKTtcbiAgICAgIHJldHVybiBpc0VzY2FwZSA/IGNsb3NlKGV2KSA6ICRxLndoZW4odHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2l0aCBiYWNrZHJvcCBgY2xpY2tzYCBvciBgZXNjYXBlYCBrZXktcHJlc3MsIGltbWVkaWF0ZWx5XG4gICAgICogYXBwbHkgdGhlIENTUyBjbG9zZSB0cmFuc2l0aW9uLi4uIFRoZW4gbm90aWZ5IHRoZSBjb250cm9sbGVyXG4gICAgICogdG8gY2xvc2UoKSBhbmQgcGVyZm9ybSBpdHMgb3duIGFjdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xvc2UoZXYpIHtcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgcmV0dXJuIHNpZGVuYXZDdHJsLmNsb3NlKCk7XG4gICAgfVxuXG4gIH1cbn1cblNpZGVuYXZEaXJlY3RpdmUuJGluamVjdCA9IFtcIiR0aW1lb3V0XCIsIFwiJGFuaW1hdGVcIiwgXCIkcGFyc2VcIiwgXCIkbWRNZWRpYVwiLCBcIiRtZENvbnN0YW50XCIsIFwiJGNvbXBpbGVcIiwgXCIkbWRUaGVtaW5nXCIsIFwiJHFcIiwgXCIkZG9jdW1lbnRcIl07XG5cbi8qXG4gKiBAcHJpdmF0ZVxuICogQG5nZG9jIGNvbnRyb2xsZXJcbiAqIEBuYW1lIFNpZGVuYXZDb250cm9sbGVyXG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvbXBvbmVudHMuc2lkZW5hdlxuICpcbiAqL1xuZnVuY3Rpb24gU2lkZW5hdkNvbnRyb2xsZXIoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkbWRDb21wb25lbnRSZWdpc3RyeSwgJHEpIHtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgLy8gVXNlIERlZmF1bHQgaW50ZXJuYWwgbWV0aG9kIHVudGlsIG92ZXJyaWRkZW4gYnkgZGlyZWN0aXZlIHBvc3RMaW5rXG5cbiAgc2VsZi4kdG9nZ2xlT3BlbiA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gJHEud2hlbigkc2NvcGUuaXNPcGVuKTsgfTtcbiAgc2VsZi5pc09wZW4gPSBmdW5jdGlvbigpIHsgcmV0dXJuICEhJHNjb3BlLmlzT3BlbjsgfTtcbiAgc2VsZi5pc0xvY2tlZE9wZW4gPSBmdW5jdGlvbigpIHsgcmV0dXJuICEhJHNjb3BlLmlzTG9ja2VkT3BlbjsgfTtcbiAgc2VsZi5vcGVuICAgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHNlbGYuJHRvZ2dsZU9wZW4oIHRydWUgKTsgIH07XG4gIHNlbGYuY2xvc2UgID0gZnVuY3Rpb24oKSB7IHJldHVybiBzZWxmLiR0b2dnbGVPcGVuKCBmYWxzZSApOyB9O1xuICBzZWxmLnRvZ2dsZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2VsZi4kdG9nZ2xlT3BlbiggISRzY29wZS5pc09wZW4gKTsgIH07XG5cbiAgc2VsZi5kZXN0cm95ID0gJG1kQ29tcG9uZW50UmVnaXN0cnkucmVnaXN0ZXIoc2VsZiwgJGF0dHJzLm1kQ29tcG9uZW50SWQpO1xufVxuU2lkZW5hdkNvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRlbGVtZW50XCIsIFwiJGF0dHJzXCIsIFwiJG1kQ29tcG9uZW50UmVnaXN0cnlcIiwgXCIkcVwiXTtcblxuXG5cbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogQG5nZG9jIG1vZHVsZVxuICAgKiBAbmFtZSBtYXRlcmlhbC5jb21wb25lbnRzLnNsaWRlclxuICAgKi9cbiAgYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMuc2xpZGVyJywgW1xuICAgICdtYXRlcmlhbC5jb3JlJ1xuICBdKVxuICAuZGlyZWN0aXZlKCdtZFNsaWRlcicsIFNsaWRlckRpcmVjdGl2ZSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbWRTbGlkZXJcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5zbGlkZXJcbiAqIEByZXN0cmljdCBFXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgPG1kLXNsaWRlcj5gIGNvbXBvbmVudCBhbGxvd3MgdGhlIHVzZXIgdG8gY2hvb3NlIGZyb20gYSByYW5nZSBvZlxuICogdmFsdWVzLlxuICpcbiAqIEFzIHBlciB0aGUgW21hdGVyaWFsIGRlc2lnbiBzcGVjXShodHRwOi8vd3d3Lmdvb2dsZS5jb20vZGVzaWduL3NwZWMvc3R5bGUvY29sb3IuaHRtbCNjb2xvci11aS1jb2xvci1hcHBsaWNhdGlvbilcbiAqIHRoZSBzbGlkZXIgaXMgaW4gdGhlIGFjY2VudCBjb2xvciBieSBkZWZhdWx0LiBUaGUgcHJpbWFyeSBjb2xvciBwYWxldHRlIG1heSBiZSB1c2VkIHdpdGhcbiAqIHRoZSBgbWQtcHJpbWFyeWAgY2xhc3MuXG4gKlxuICogSXQgaGFzIHR3byBtb2RlczogJ25vcm1hbCcgbW9kZSwgd2hlcmUgdGhlIHVzZXIgc2xpZGVzIGJldHdlZW4gYSB3aWRlIHJhbmdlXG4gKiBvZiB2YWx1ZXMsIGFuZCAnZGlzY3JldGUnIG1vZGUsIHdoZXJlIHRoZSB1c2VyIHNsaWRlcyBiZXR3ZWVuIG9ubHkgYSBmZXdcbiAqIHNlbGVjdCB2YWx1ZXMuXG4gKlxuICogVG8gZW5hYmxlIGRpc2NyZXRlIG1vZGUsIGFkZCB0aGUgYG1kLWRpc2NyZXRlYCBhdHRyaWJ1dGUgdG8gYSBzbGlkZXIsXG4gKiBhbmQgdXNlIHRoZSBgc3RlcGAgYXR0cmlidXRlIHRvIGNoYW5nZSB0aGUgZGlzdGFuY2UgYmV0d2VlblxuICogdmFsdWVzIHRoZSB1c2VyIGlzIGFsbG93ZWQgdG8gcGljay5cbiAqXG4gKiBAdXNhZ2VcbiAqIDxoND5Ob3JtYWwgTW9kZTwvaDQ+XG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogPG1kLXNsaWRlciBuZy1tb2RlbD1cIm15VmFsdWVcIiBtaW49XCI1XCIgbWF4PVwiNTAwXCI+XG4gKiA8L21kLXNsaWRlcj5cbiAqIDwvaGxqcz5cbiAqIDxoND5EaXNjcmV0ZSBNb2RlPC9oND5cbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiA8bWQtc2xpZGVyIG1kLWRpc2NyZXRlIG5nLW1vZGVsPVwibXlEaXNjcmV0ZVZhbHVlXCIgc3RlcD1cIjEwXCIgbWluPVwiMTBcIiBtYXg9XCIxMzBcIj5cbiAqIDwvbWQtc2xpZGVyPlxuICogPC9obGpzPlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG1kLWRpc2NyZXRlIFdoZXRoZXIgdG8gZW5hYmxlIGRpc2NyZXRlIG1vZGUuXG4gKiBAcGFyYW0ge251bWJlcj19IHN0ZXAgVGhlIGRpc3RhbmNlIGJldHdlZW4gdmFsdWVzIHRoZSB1c2VyIGlzIGFsbG93ZWQgdG8gcGljay4gRGVmYXVsdCAxLlxuICogQHBhcmFtIHtudW1iZXI9fSBtaW4gVGhlIG1pbmltdW0gdmFsdWUgdGhlIHVzZXIgaXMgYWxsb3dlZCB0byBwaWNrLiBEZWZhdWx0IDAuXG4gKiBAcGFyYW0ge251bWJlcj19IG1heCBUaGUgbWF4aW11bSB2YWx1ZSB0aGUgdXNlciBpcyBhbGxvd2VkIHRvIHBpY2suIERlZmF1bHQgMTAwLlxuICovXG5mdW5jdGlvbiBTbGlkZXJEaXJlY3RpdmUoJCRyQUYsICR3aW5kb3csICRtZEFyaWEsICRtZFV0aWwsICRtZENvbnN0YW50LCAkbWRUaGVtaW5nLCAkbWRHZXN0dXJlLCAkcGFyc2UpIHtcbiAgcmV0dXJuIHtcbiAgICBzY29wZToge30sXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICB0ZW1wbGF0ZTpcbiAgICAgICc8ZGl2IGNsYXNzPVwibWQtdHJhY2stY29udGFpbmVyXCI+JyArXG4gICAgICAnPGRpdiBjbGFzcz1cIm1kLXRyYWNrXCI+PC9kaXY+JyArXG4gICAgICAnPGRpdiBjbGFzcz1cIm1kLXRyYWNrIG1kLXRyYWNrLWZpbGxcIj48L2Rpdj4nICtcbiAgICAgICc8ZGl2IGNsYXNzPVwibWQtdHJhY2stdGlja3NcIj48L2Rpdj4nICtcbiAgICAgICc8L2Rpdj4nICtcbiAgICAgICc8ZGl2IGNsYXNzPVwibWQtdGh1bWItY29udGFpbmVyXCI+JyArXG4gICAgICAnPGRpdiBjbGFzcz1cIm1kLXRodW1iXCI+PC9kaXY+JyArXG4gICAgICAnPGRpdiBjbGFzcz1cIm1kLWZvY3VzLXRodW1iXCI+PC9kaXY+JyArXG4gICAgICAnPGRpdiBjbGFzcz1cIm1kLWZvY3VzLXJpbmdcIj48L2Rpdj4nICtcbiAgICAgICc8ZGl2IGNsYXNzPVwibWQtc2lnblwiPicgK1xuICAgICAgJzxzcGFuIGNsYXNzPVwibWQtdGh1bWItdGV4dFwiPjwvc3Bhbj4nICtcbiAgICAgICc8L2Rpdj4nICtcbiAgICAgICc8ZGl2IGNsYXNzPVwibWQtZGlzYWJsZWQtdGh1bWJcIj48L2Rpdj4nICtcbiAgICAgICc8L2Rpdj4nLFxuICAgIGxpbms6IHBvc3RMaW5rXG4gIH07XG5cbiAgZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG5nTW9kZWxDdHJsKSB7XG4gICAgJG1kVGhlbWluZyhlbGVtZW50KTtcbiAgICBuZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsIHx8IHtcbiAgICAgIC8vIE1vY2sgbmdNb2RlbENvbnRyb2xsZXIgaWYgaXQgZG9lc24ndCBleGlzdCB0byBnaXZlIHVzXG4gICAgICAvLyB0aGUgbWluaW11bSBmdW5jdGlvbmFsaXR5IG5lZWRlZFxuICAgICAgJHNldFZpZXdWYWx1ZTogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMuJHZpZXdWYWx1ZSA9IHZhbDtcbiAgICAgICAgdGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGNiKSB7IGNiKCk7IH0pO1xuICAgICAgfSxcbiAgICAgICRwYXJzZXJzOiBbXSxcbiAgICAgICRmb3JtYXR0ZXJzOiBbXSxcbiAgICAgICR2aWV3Q2hhbmdlTGlzdGVuZXJzOiBbXVxuICAgIH07XG5cbiAgICB2YXIgaXNEaXNhYmxlZFBhcnNlZCA9IGF0dHIubmdEaXNhYmxlZCAmJiAkcGFyc2UoYXR0ci5uZ0Rpc2FibGVkKTtcbiAgICB2YXIgaXNEaXNhYmxlZEdldHRlciA9IGlzRGlzYWJsZWRQYXJzZWQgPyBcbiAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNEaXNhYmxlZFBhcnNlZChzY29wZS4kcGFyZW50KTsgfSA6XG4gICAgICBhbmd1bGFyLm5vb3A7XG4gICAgdmFyIHRodW1iID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLm1kLXRodW1iJykpO1xuICAgIHZhciB0aHVtYlRleHQgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcubWQtdGh1bWItdGV4dCcpKTtcbiAgICB2YXIgdGh1bWJDb250YWluZXIgPSB0aHVtYi5wYXJlbnQoKTtcbiAgICB2YXIgdHJhY2tDb250YWluZXIgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcubWQtdHJhY2stY29udGFpbmVyJykpO1xuICAgIHZhciBhY3RpdmVUcmFjayA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5tZC10cmFjay1maWxsJykpO1xuICAgIHZhciB0aWNrQ29udGFpbmVyID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLm1kLXRyYWNrLXRpY2tzJykpO1xuICAgIHZhciB0aHJvdHRsZWRSZWZyZXNoRGltZW5zaW9ucyA9ICRtZFV0aWwudGhyb3R0bGUocmVmcmVzaFNsaWRlckRpbWVuc2lvbnMsIDUwMDApO1xuXG4gICAgLy8gRGVmYXVsdCB2YWx1ZXMsIG92ZXJyaWRhYmxlIGJ5IGF0dHJzXG4gICAgYXR0ci5taW4gPyBhdHRyLiRvYnNlcnZlKCdtaW4nLCB1cGRhdGVNaW4pIDogdXBkYXRlTWluKDApO1xuICAgIGF0dHIubWF4ID8gYXR0ci4kb2JzZXJ2ZSgnbWF4JywgdXBkYXRlTWF4KSA6IHVwZGF0ZU1heCgxMDApO1xuICAgIGF0dHIuc3RlcCA/IGF0dHIuJG9ic2VydmUoJ3N0ZXAnLCB1cGRhdGVTdGVwKSA6IHVwZGF0ZVN0ZXAoMSk7XG5cbiAgICAvLyBXZSBoYXZlIHRvIG1hbnVhbGx5IHN0b3AgdGhlICR3YXRjaCBvbiBuZ0Rpc2FibGVkIGJlY2F1c2UgaXQgZXhpc3RzXG4gICAgLy8gb24gdGhlIHBhcmVudCBzY29wZSwgYW5kIHdvbid0IGJlIGF1dG9tYXRpY2FsbHkgZGVzdHJveWVkIHdoZW5cbiAgICAvLyB0aGUgY29tcG9uZW50IGlzIGRlc3Ryb3llZC5cbiAgICB2YXIgc3RvcERpc2FibGVkV2F0Y2ggPSBhbmd1bGFyLm5vb3A7XG4gICAgaWYgKGF0dHIubmdEaXNhYmxlZCkge1xuICAgICAgc3RvcERpc2FibGVkV2F0Y2ggPSBzY29wZS4kcGFyZW50LiR3YXRjaChhdHRyLm5nRGlzYWJsZWQsIHVwZGF0ZUFyaWFEaXNhYmxlZCk7XG4gICAgfVxuXG4gICAgJG1kQXJpYS5leHBlY3QoZWxlbWVudCwgJ2FyaWEtbGFiZWwnKTtcblxuICAgICRtZEdlc3R1cmUucmVnaXN0ZXIoZWxlbWVudCwgJ2RyYWcnKTtcbiAgICBlbGVtZW50XG4gICAgICAuYXR0cih7XG4gICAgICAgIHRhYkluZGV4OiAwLFxuICAgICAgICByb2xlOiAnc2xpZGVyJ1xuICAgICAgfSlcbiAgICAgIC5vbigna2V5ZG93bicsIGtleWRvd25MaXN0ZW5lcilcbiAgICAgIC5vbignJG1kLnByZXNzZG93bicsIG9uUHJlc3NEb3duKVxuICAgICAgLm9uKCckbWQucHJlc3N1cCcsIG9uUHJlc3NVcClcbiAgICAgIC5vbignJG1kLmRyYWdzdGFydCcsIG9uRHJhZ1N0YXJ0KVxuICAgICAgLm9uKCckbWQuZHJhZycsIG9uRHJhZylcbiAgICAgIC5vbignJG1kLmRyYWdlbmQnLCBvbkRyYWdFbmQpO1xuXG4gICAgLy8gT24gcmVzaXplLCByZWNhbGN1bGF0ZSB0aGUgc2xpZGVyJ3MgZGltZW5zaW9ucyBhbmQgcmUtcmVuZGVyXG4gICAgZnVuY3Rpb24gdXBkYXRlQWxsKCkge1xuICAgICAgcmVmcmVzaFNsaWRlckRpbWVuc2lvbnMoKTtcbiAgICAgIG5nTW9kZWxSZW5kZXIoKTtcbiAgICAgIHJlZHJhd1RpY2tzKCk7XG4gICAgfVxuICAgIHNldFRpbWVvdXQodXBkYXRlQWxsKTtcblxuICAgIHZhciBkZWJvdW5jZWRVcGRhdGVBbGwgPSAkJHJBRi50aHJvdHRsZSh1cGRhdGVBbGwpO1xuICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5vbigncmVzaXplJywgZGVib3VuY2VkVXBkYXRlQWxsKTtcblxuICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5vZmYoJ3Jlc2l6ZScsIGRlYm91bmNlZFVwZGF0ZUFsbCk7XG4gICAgICBzdG9wRGlzYWJsZWRXYXRjaCgpO1xuICAgIH0pO1xuXG4gICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IG5nTW9kZWxSZW5kZXI7XG4gICAgbmdNb2RlbEN0cmwuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChuZ01vZGVsUmVuZGVyKTtcbiAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKG1pbk1heFZhbGlkYXRvcik7XG4gICAgbmdNb2RlbEN0cmwuJGZvcm1hdHRlcnMucHVzaChzdGVwVmFsaWRhdG9yKTtcblxuICAgIC8qKlxuICAgICAqIEF0dHJpYnV0ZXNcbiAgICAgKi9cbiAgICB2YXIgbWluO1xuICAgIHZhciBtYXg7XG4gICAgdmFyIHN0ZXA7XG4gICAgZnVuY3Rpb24gdXBkYXRlTWluKHZhbHVlKSB7XG4gICAgICBtaW4gPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgIGVsZW1lbnQuYXR0cignYXJpYS12YWx1ZW1pbicsIHZhbHVlKTtcbiAgICAgIHVwZGF0ZUFsbCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVNYXgodmFsdWUpIHtcbiAgICAgIG1heCA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgZWxlbWVudC5hdHRyKCdhcmlhLXZhbHVlbWF4JywgdmFsdWUpO1xuICAgICAgdXBkYXRlQWxsKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVN0ZXAodmFsdWUpIHtcbiAgICAgIHN0ZXAgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgIHJlZHJhd1RpY2tzKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZUFyaWFEaXNhYmxlZChpc0Rpc2FibGVkKSB7XG4gICAgICBlbGVtZW50LmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAhIWlzRGlzYWJsZWQpO1xuICAgIH1cblxuICAgIC8vIERyYXcgdGhlIHRpY2tzIHdpdGggY2FudmFzLlxuICAgIC8vIFRoZSBhbHRlcm5hdGl2ZSB0byBkcmF3aW5nIHRpY2tzIHdpdGggY2FudmFzIGlzIHRvIGRyYXcgb25lIGVsZW1lbnQgZm9yIGVhY2ggdGljayxcbiAgICAvLyB3aGljaCBjb3VsZCBxdWlja2x5IGJlY29tZSBhIHBlcmZvcm1hbmNlIGJvdHRsZW5lY2suXG4gICAgdmFyIHRpY2tDYW52YXMsIHRpY2tDdHg7XG4gICAgZnVuY3Rpb24gcmVkcmF3VGlja3MoKSB7XG4gICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKGF0dHIubWREaXNjcmV0ZSkpIHJldHVybjtcblxuICAgICAgdmFyIG51bVN0ZXBzID0gTWF0aC5mbG9vciggKG1heCAtIG1pbikgLyBzdGVwICk7XG4gICAgICBpZiAoIXRpY2tDYW52YXMpIHtcbiAgICAgICAgdmFyIHRyYWNrVGlja3NTdHlsZSA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aWNrQ29udGFpbmVyWzBdKTtcbiAgICAgICAgdGlja0NhbnZhcyA9IGFuZ3VsYXIuZWxlbWVudCgnPGNhbnZhcyBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO1wiPicpO1xuICAgICAgICB0aWNrQ3R4ID0gdGlja0NhbnZhc1swXS5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICB0aWNrQ3R4LmZpbGxTdHlsZSA9IHRyYWNrVGlja3NTdHlsZS5iYWNrZ3JvdW5kQ29sb3IgfHwgJ2JsYWNrJztcbiAgICAgICAgdGlja0NvbnRhaW5lci5hcHBlbmQodGlja0NhbnZhcyk7XG4gICAgICB9XG4gICAgICB2YXIgZGltZW5zaW9ucyA9IGdldFNsaWRlckRpbWVuc2lvbnMoKTtcbiAgICAgIHRpY2tDYW52YXNbMF0ud2lkdGggPSBkaW1lbnNpb25zLndpZHRoO1xuICAgICAgdGlja0NhbnZhc1swXS5oZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodDtcblxuICAgICAgdmFyIGRpc3RhbmNlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gbnVtU3RlcHM7IGkrKykge1xuICAgICAgICBkaXN0YW5jZSA9IE1hdGguZmxvb3IoZGltZW5zaW9ucy53aWR0aCAqIChpIC8gbnVtU3RlcHMpKTtcbiAgICAgICAgdGlja0N0eC5maWxsUmVjdChkaXN0YW5jZSAtIDEsIDAsIDIsIGRpbWVuc2lvbnMuaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFJlZnJlc2hpbmcgRGltZW5zaW9uc1xuICAgICAqL1xuICAgIHZhciBzbGlkZXJEaW1lbnNpb25zID0ge307XG4gICAgcmVmcmVzaFNsaWRlckRpbWVuc2lvbnMoKTtcbiAgICBmdW5jdGlvbiByZWZyZXNoU2xpZGVyRGltZW5zaW9ucygpIHtcbiAgICAgIHNsaWRlckRpbWVuc2lvbnMgPSB0cmFja0NvbnRhaW5lclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U2xpZGVyRGltZW5zaW9ucygpIHtcbiAgICAgIHRocm90dGxlZFJlZnJlc2hEaW1lbnNpb25zKCk7XG4gICAgICByZXR1cm4gc2xpZGVyRGltZW5zaW9ucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBsZWZ0L3JpZ2h0IGFycm93IGxpc3RlbmVyXG4gICAgICovXG4gICAgZnVuY3Rpb24ga2V5ZG93bkxpc3RlbmVyKGV2KSB7XG4gICAgICBpZihlbGVtZW50WzBdLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGFuZ2VBbW91bnQ7XG4gICAgICBpZiAoZXYua2V5Q29kZSA9PT0gJG1kQ29uc3RhbnQuS0VZX0NPREUuTEVGVF9BUlJPVykge1xuICAgICAgICBjaGFuZ2VBbW91bnQgPSAtc3RlcDtcbiAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gJG1kQ29uc3RhbnQuS0VZX0NPREUuUklHSFRfQVJST1cpIHtcbiAgICAgICAgY2hhbmdlQW1vdW50ID0gc3RlcDtcbiAgICAgIH1cbiAgICAgIGlmIChjaGFuZ2VBbW91bnQpIHtcbiAgICAgICAgaWYgKGV2Lm1ldGFLZXkgfHwgZXYuY3RybEtleSB8fCBldi5hbHRLZXkpIHtcbiAgICAgICAgICBjaGFuZ2VBbW91bnQgKj0gNDtcbiAgICAgICAgfVxuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgc2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRNb2RlbFZhbHVlKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgKyBjaGFuZ2VBbW91bnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBuZ01vZGVsIHNldHRlcnMgYW5kIHZhbGlkYXRvcnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXRNb2RlbFZhbHVlKHZhbHVlKSB7XG4gICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKCBtaW5NYXhWYWxpZGF0b3Ioc3RlcFZhbGlkYXRvcih2YWx1ZSkpICk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5nTW9kZWxSZW5kZXIoKSB7XG4gICAgICBpZiAoaXNOYU4obmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSkpIHtcbiAgICAgICAgbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSA9IG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGVyY2VudCA9IChuZ01vZGVsQ3RybC4kdmlld1ZhbHVlIC0gbWluKSAvIChtYXggLSBtaW4pO1xuICAgICAgc2NvcGUubW9kZWxWYWx1ZSA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XG4gICAgICBlbGVtZW50LmF0dHIoJ2FyaWEtdmFsdWVub3cnLCBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlKTtcbiAgICAgIHNldFNsaWRlclBlcmNlbnQocGVyY2VudCk7XG4gICAgICB0aHVtYlRleHQudGV4dCggbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1pbk1heFZhbGlkYXRvcih2YWx1ZSkge1xuICAgICAgaWYgKGFuZ3VsYXIuaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgdmFsdWUpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc3RlcFZhbGlkYXRvcih2YWx1ZSkge1xuICAgICAgaWYgKGFuZ3VsYXIuaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlIC8gc3RlcCkgKiBzdGVwO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBwZXJjZW50IDAtMVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldFNsaWRlclBlcmNlbnQocGVyY2VudCkge1xuICAgICAgYWN0aXZlVHJhY2suY3NzKCd3aWR0aCcsIChwZXJjZW50ICogMTAwKSArICclJyk7XG4gICAgICB0aHVtYkNvbnRhaW5lci5jc3MoXG4gICAgICAgICRtZENvbnN0YW50LkNTUy5UUkFOU0ZPUk0sXG4gICAgICAgICd0cmFuc2xhdGUzZCgnICsgKHBlcmNlbnQgKiAxMDApICsgJyUsMCwwKSdcbiAgICAgICk7XG4gICAgICBlbGVtZW50LnRvZ2dsZUNsYXNzKCdtZC1taW4nLCBwZXJjZW50ID09PSAwKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFNsaWRlIGxpc3RlbmVyc1xuICAgICAqL1xuICAgIHZhciBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgdmFyIGlzRGlzY3JldGUgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRyLm1kRGlzY3JldGUpO1xuXG4gICAgZnVuY3Rpb24gb25QcmVzc0Rvd24oZXYpIHtcbiAgICAgIGlmIChpc0Rpc2FibGVkR2V0dGVyKCkpIHJldHVybjtcblxuICAgICAgZWxlbWVudC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICBlbGVtZW50WzBdLmZvY3VzKCk7XG4gICAgICByZWZyZXNoU2xpZGVyRGltZW5zaW9ucygpO1xuXG4gICAgICB2YXIgZXhhY3RWYWwgPSBwZXJjZW50VG9WYWx1ZSggcG9zaXRpb25Ub1BlcmNlbnQoIGV2LnBvaW50ZXIueCApKTtcbiAgICAgIHZhciBjbG9zZXN0VmFsID0gbWluTWF4VmFsaWRhdG9yKCBzdGVwVmFsaWRhdG9yKGV4YWN0VmFsKSApO1xuICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRNb2RlbFZhbHVlKCBjbG9zZXN0VmFsICk7XG4gICAgICAgIHNldFNsaWRlclBlcmNlbnQoIHZhbHVlVG9QZXJjZW50KGNsb3Nlc3RWYWwpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblByZXNzVXAoZXYpIHtcbiAgICAgIGlmIChpc0Rpc2FibGVkR2V0dGVyKCkpIHJldHVybjtcblxuICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnZHJhZ2dpbmcgYWN0aXZlJyk7XG5cbiAgICAgIHZhciBleGFjdFZhbCA9IHBlcmNlbnRUb1ZhbHVlKCBwb3NpdGlvblRvUGVyY2VudCggZXYucG9pbnRlci54ICkpO1xuICAgICAgdmFyIGNsb3Nlc3RWYWwgPSBtaW5NYXhWYWxpZGF0b3IoIHN0ZXBWYWxpZGF0b3IoZXhhY3RWYWwpICk7XG4gICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldE1vZGVsVmFsdWUoY2xvc2VzdFZhbCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25EcmFnU3RhcnQoZXYpIHtcbiAgICAgIGlmIChpc0Rpc2FibGVkR2V0dGVyKCkpIHJldHVybjtcbiAgICAgIGlzRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgICBzZXRTbGlkZXJGcm9tRXZlbnQoZXYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkRyYWcoZXYpIHtcbiAgICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuO1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBzZXRTbGlkZXJGcm9tRXZlbnQoZXYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkRyYWdFbmQoZXYpIHtcbiAgICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuO1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2xpZGVyRnJvbUV2ZW50KGV2KSB7XG4gICAgICAvLyBXaGlsZSBwYW5uaW5nIGRpc2NyZXRlLCB1cGRhdGUgb25seSB0aGVcbiAgICAgIC8vIHZpc3VhbCBwb3NpdGlvbmluZyBidXQgbm90IHRoZSBtb2RlbCB2YWx1ZS5cbiAgICAgIGlmICggaXNEaXNjcmV0ZSApIGFkanVzdFRodW1iUG9zaXRpb24oIGV2LnBvaW50ZXIueCApO1xuICAgICAgZWxzZSAgICAgICAgICAgICAgZG9TbGlkZSggZXYucG9pbnRlci54ICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2xpZGUgdGhlIFVJIGJ5IGNoYW5naW5nIHRoZSBtb2RlbCB2YWx1ZVxuICAgICAqIEBwYXJhbSB4XG4gICAgICovXG4gICAgZnVuY3Rpb24gZG9TbGlkZSggeCApIHtcbiAgICAgIHNjb3BlLiRldmFsQXN5bmMoIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRNb2RlbFZhbHVlKCBwZXJjZW50VG9WYWx1ZSggcG9zaXRpb25Ub1BlcmNlbnQoeCkgKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTbGlkZSB0aGUgVUkgd2l0aG91dCBjaGFuZ2luZyB0aGUgbW9kZWwgKHdoaWxlIGRyYWdnaW5nL3Bhbm5pbmcpXG4gICAgICogQHBhcmFtIHhcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGp1c3RUaHVtYlBvc2l0aW9uKCB4ICkge1xuICAgICAgdmFyIGV4YWN0VmFsID0gcGVyY2VudFRvVmFsdWUoIHBvc2l0aW9uVG9QZXJjZW50KCB4ICkpO1xuICAgICAgdmFyIGNsb3Nlc3RWYWwgPSBtaW5NYXhWYWxpZGF0b3IoIHN0ZXBWYWxpZGF0b3IoZXhhY3RWYWwpICk7XG4gICAgICBzZXRTbGlkZXJQZXJjZW50KCBwb3NpdGlvblRvUGVyY2VudCh4KSApO1xuICAgICAgdGh1bWJUZXh0LnRleHQoIGNsb3Nlc3RWYWwgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IGhvcml6b250YWwgcG9zaXRpb24gb24gc2xpZGVyIHRvIHBlcmNlbnRhZ2UgdmFsdWUgb2Ygb2Zmc2V0IGZyb20gYmVnaW5uaW5nLi4uXG4gICAgICogQHBhcmFtIHhcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBvc2l0aW9uVG9QZXJjZW50KCB4ICkge1xuICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsICh4IC0gc2xpZGVyRGltZW5zaW9ucy5sZWZ0KSAvIChzbGlkZXJEaW1lbnNpb25zLndpZHRoKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgcGVyY2VudGFnZSBvZmZzZXQgb24gc2xpZGUgdG8gZXF1aXZhbGVudCBtb2RlbCB2YWx1ZVxuICAgICAqIEBwYXJhbSBwZXJjZW50XG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICovXG4gICAgZnVuY3Rpb24gcGVyY2VudFRvVmFsdWUoIHBlcmNlbnQgKSB7XG4gICAgICByZXR1cm4gKG1pbiArIHBlcmNlbnQgKiAobWF4IC0gbWluKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmFsdWVUb1BlcmNlbnQoIHZhbCApIHtcbiAgICAgIHJldHVybiAodmFsIC0gbWluKS8obWF4IC0gbWluKTtcbiAgICB9XG4gIH1cbn1cblNsaWRlckRpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJCRyQUZcIiwgXCIkd2luZG93XCIsIFwiJG1kQXJpYVwiLCBcIiRtZFV0aWxcIiwgXCIkbWRDb25zdGFudFwiLCBcIiRtZFRoZW1pbmdcIiwgXCIkbWRHZXN0dXJlXCIsIFwiJHBhcnNlXCJdO1xuXG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbWF0ZXJpYWwuY29tcG9uZW50cy5zdGlja3lcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFN0aWNreSBlZmZlY3RzIGZvciBtZFxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb21wb25lbnRzLnN0aWNreScsIFtcbiAgJ21hdGVyaWFsLmNvcmUnLFxuICAnbWF0ZXJpYWwuY29tcG9uZW50cy5jb250ZW50J1xuXSlcbiAgLmZhY3RvcnkoJyRtZFN0aWNreScsIE1kU3RpY2t5KTtcblxuLypcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbWRTdGlja3lcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5zdGlja3lcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgJG1kU3RpY2t5YHNlcnZpY2UgcHJvdmlkZXMgYSBtaXhpbiB0byBtYWtlIGVsZW1lbnRzIHN0aWNreS5cbiAqXG4gKiBAcmV0dXJucyBBIGAkbWRTdGlja3lgIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhyZWUgYXJndW1lbnRzOlxuICogICAtIGBzY29wZWBcbiAqICAgLSBgZWxlbWVudGA6IFRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSAnc3RpY2t5J1xuICogICAtIGBlbGVtZW50Q2xvbmVgOiBBIGNsb25lIG9mIHRoZSBlbGVtZW50LCB0aGF0IHdpbGwgYmUgc2hvd25cbiAqICAgICB3aGVuIHRoZSB1c2VyIHN0YXJ0cyBzY3JvbGxpbmcgcGFzdCB0aGUgb3JpZ2luYWwgZWxlbWVudC5cbiAqICAgICBJZiBub3QgcHJvdmlkZWQsIGl0IHdpbGwgdXNlIHRoZSByZXN1bHQgb2YgYGVsZW1lbnQuY2xvbmUoKWAuXG4gKi9cblxuZnVuY3Rpb24gTWRTdGlja3koJGRvY3VtZW50LCAkbWRDb25zdGFudCwgJGNvbXBpbGUsICQkckFGLCAkbWRVdGlsKSB7XG5cbiAgdmFyIGJyb3dzZXJTdGlja3lTdXBwb3J0ID0gY2hlY2tTdGlja3lTdXBwb3J0KCk7XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhbiBlbGVtZW50IGFzIHN0aWNreSwgdXNlZCBpbnRlcm5hbGx5IGJ5IGRpcmVjdGl2ZXMgdG8gcmVnaXN0ZXIgdGhlbXNlbHZlc1xuICAgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uIHJlZ2lzdGVyU3RpY2t5RWxlbWVudChzY29wZSwgZWxlbWVudCwgc3RpY2t5Q2xvbmUpIHtcbiAgICB2YXIgY29udGVudEN0cmwgPSBlbGVtZW50LmNvbnRyb2xsZXIoJ21kQ29udGVudCcpO1xuICAgIGlmICghY29udGVudEN0cmwpIHJldHVybjtcblxuICAgIGlmIChicm93c2VyU3RpY2t5U3VwcG9ydCkge1xuICAgICAgZWxlbWVudC5jc3Moe1xuICAgICAgICBwb3NpdGlvbjogYnJvd3NlclN0aWNreVN1cHBvcnQsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgJ3otaW5kZXgnOiAyXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyICQkc3RpY2t5ID0gY29udGVudEN0cmwuJGVsZW1lbnQuZGF0YSgnJCRzdGlja3knKTtcbiAgICAgIGlmICghJCRzdGlja3kpIHtcbiAgICAgICAgJCRzdGlja3kgPSBzZXR1cFN0aWNreShjb250ZW50Q3RybCk7XG4gICAgICAgIGNvbnRlbnRDdHJsLiRlbGVtZW50LmRhdGEoJyQkc3RpY2t5JywgJCRzdGlja3kpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGVyZWdpc3RlciA9ICQkc3RpY2t5LmFkZChlbGVtZW50LCBzdGlja3lDbG9uZSB8fCBlbGVtZW50LmNsb25lKCkpO1xuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGRlcmVnaXN0ZXIpO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBzZXR1cFN0aWNreShjb250ZW50Q3RybCkge1xuICAgIHZhciBjb250ZW50RWwgPSBjb250ZW50Q3RybC4kZWxlbWVudDtcblxuICAgIC8vIFJlZnJlc2ggZWxlbWVudHMgaXMgdmVyeSBleHBlbnNpdmUsIHNvIHdlIHVzZSB0aGUgZGVib3VuY2VkXG4gICAgLy8gdmVyc2lvbiB3aGVuIHBvc3NpYmxlLlxuICAgIHZhciBkZWJvdW5jZWRSZWZyZXNoRWxlbWVudHMgPSAkJHJBRi50aHJvdHRsZShyZWZyZXNoRWxlbWVudHMpO1xuXG4gICAgLy8gc2V0dXBBdWdtZW50ZWRTY3JvbGxFdmVudHMgZ2l2ZXMgdXMgYCRzY3JvbGxzdGFydGAgYW5kIGAkc2Nyb2xsYCxcbiAgICAvLyBtb3JlIHJlbGlhYmxlIHRoYW4gYHNjcm9sbGAgb24gYW5kcm9pZC5cbiAgICBzZXR1cEF1Z21lbnRlZFNjcm9sbEV2ZW50cyhjb250ZW50RWwpO1xuICAgIGNvbnRlbnRFbC5vbignJHNjcm9sbHN0YXJ0JywgZGVib3VuY2VkUmVmcmVzaEVsZW1lbnRzKTtcbiAgICBjb250ZW50RWwub24oJyRzY3JvbGwnLCBvblNjcm9sbCk7XG5cbiAgICB2YXIgc2VsZjtcbiAgICB2YXIgc3RpY2t5QmFzZW9mZnNldCA9IGNvbnRlbnRFbC5wcm9wKCdvZmZzZXRUb3AnKTtcbiAgICByZXR1cm4gc2VsZiA9IHtcbiAgICAgIHByZXY6IG51bGwsXG4gICAgICBjdXJyZW50OiBudWxsLCAvL3RoZSBjdXJyZW50bHkgc3RpY2tpZWQgaXRlbVxuICAgICAgbmV4dDogbnVsbCxcbiAgICAgIGl0ZW1zOiBbXSxcbiAgICAgIGFkZDogYWRkLFxuICAgICAgcmVmcmVzaEVsZW1lbnRzOiByZWZyZXNoRWxlbWVudHNcbiAgICB9O1xuXG4gICAgLyoqKioqKioqKioqKioqKlxuICAgICAqIFB1YmxpY1xuICAgICAqKioqKioqKioqKioqKiovXG4gICAgLy8gQWRkIGFuIGVsZW1lbnQgYW5kIGl0cyBzdGlja3kgY2xvbmUgdG8gdGhpcyBjb250ZW50J3Mgc3RpY2t5IGNvbGxlY3Rpb25cbiAgICBmdW5jdGlvbiBhZGQoZWxlbWVudCwgc3RpY2t5Q2xvbmUpIHtcbiAgICAgIHN0aWNreUNsb25lLmFkZENsYXNzKCdtZC1zdGlja3ktY2xvbmUnKTtcbiAgICAgIHN0aWNreUNsb25lLmNzcygndG9wJywgc3RpY2t5QmFzZW9mZnNldCArICdweCcpO1xuXG4gICAgICB2YXIgaXRlbSA9IHtcbiAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgY2xvbmU6IHN0aWNreUNsb25lXG4gICAgICB9O1xuICAgICAgc2VsZi5pdGVtcy5wdXNoKGl0ZW0pO1xuXG4gICAgICBjb250ZW50RWwucGFyZW50KCkucHJlcGVuZChpdGVtLmNsb25lKTtcblxuICAgICAgZGVib3VuY2VkUmVmcmVzaEVsZW1lbnRzKCk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgIHNlbGYuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICAgIGlmIChpdGVtLmVsZW1lbnRbMF0gPT09IGVsZW1lbnRbMF0pIHtcbiAgICAgICAgICAgIHNlbGYuaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIGl0ZW0uY2xvbmUucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZGVib3VuY2VkUmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZnJlc2hFbGVtZW50cygpIHtcbiAgICAgIC8vIFNvcnQgb3VyIGNvbGxlY3Rpb24gb2YgZWxlbWVudHMgYnkgdGhlaXIgY3VycmVudCBwb3NpdGlvbiBpbiB0aGUgRE9NLlxuICAgICAgLy8gV2UgbmVlZCB0byBkbyB0aGlzIGJlY2F1c2Ugb3VyIGVsZW1lbnRzJyBvcmRlciBvZiBiZWluZyBhZGRlZCBtYXkgbm90XG4gICAgICAvLyBiZSB0aGUgc2FtZSBhcyB0aGVpciBvcmRlciBvZiBkaXNwbGF5LlxuICAgICAgc2VsZi5pdGVtcy5mb3JFYWNoKHJlZnJlc2hQb3NpdGlvbik7XG4gICAgICBzZWxmLml0ZW1zID0gc2VsZi5pdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEudG9wIDwgYi50b3AgPyAtMSA6IDE7XG4gICAgICB9KTtcblxuICAgICAgLy8gRmluZCB3aGljaCBpdGVtIGluIHRoZSBsaXN0IHNob3VsZCBiZSBhY3RpdmUsIFxuICAgICAgLy8gYmFzZWQgdXBvbiB0aGUgY29udGVudCdzIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXG4gICAgICB2YXIgaXRlbTtcbiAgICAgIHZhciBjdXJyZW50U2Nyb2xsVG9wID0gY29udGVudEVsLnByb3AoJ3Njcm9sbFRvcCcpO1xuICAgICAgZm9yICh2YXIgaSA9IHNlbGYuaXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKGN1cnJlbnRTY3JvbGxUb3AgPiBzZWxmLml0ZW1zW2ldLnRvcCkge1xuICAgICAgICAgIGl0ZW0gPSBzZWxmLml0ZW1zW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZXRDdXJyZW50SXRlbShpdGVtKTtcbiAgICB9XG5cblxuICAgIC8qKioqKioqKioqKioqKipcbiAgICAgKiBQcml2YXRlXG4gICAgICoqKioqKioqKioqKioqKi9cblxuICAgIC8vIEZpbmQgdGhlIGB0b3BgIG9mIGFuIGl0ZW0gcmVsYXRpdmUgdG8gdGhlIGNvbnRlbnQgZWxlbWVudCxcbiAgICAvLyBhbmQgYWxzbyB0aGUgaGVpZ2h0LlxuICAgIGZ1bmN0aW9uIHJlZnJlc2hQb3NpdGlvbihpdGVtKSB7XG4gICAgICAvLyBGaW5kIHRoZSB0b3Agb2YgYW4gaXRlbSBieSBhZGRpbmcgdG8gdGhlIG9mZnNldEhlaWdodCB1bnRpbCB3ZSByZWFjaCB0aGUgXG4gICAgICAvLyBjb250ZW50IGVsZW1lbnQuXG4gICAgICB2YXIgY3VycmVudCA9IGl0ZW0uZWxlbWVudFswXTtcbiAgICAgIGl0ZW0udG9wID0gMDtcbiAgICAgIGl0ZW0ubGVmdCA9IDA7XG4gICAgICB3aGlsZSAoY3VycmVudCAmJiBjdXJyZW50ICE9PSBjb250ZW50RWxbMF0pIHtcbiAgICAgICAgaXRlbS50b3AgKz0gY3VycmVudC5vZmZzZXRUb3A7XG4gICAgICAgIGl0ZW0ubGVmdCArPSBjdXJyZW50Lm9mZnNldExlZnQ7XG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm9mZnNldFBhcmVudDtcbiAgICAgIH1cbiAgICAgIGl0ZW0uaGVpZ2h0ID0gaXRlbS5lbGVtZW50LnByb3AoJ29mZnNldEhlaWdodCcpO1xuICAgICAgaXRlbS5jbG9uZS5jc3MoJ21hcmdpbi1sZWZ0JywgaXRlbS5sZWZ0ICsgJ3B4Jyk7XG4gICAgfVxuXG5cbiAgICAvLyBBcyB3ZSBzY3JvbGwsIHB1c2ggaW4gYW5kIHNlbGVjdCB0aGUgY29ycmVjdCBzdGlja3kgZWxlbWVudC5cbiAgICBmdW5jdGlvbiBvblNjcm9sbCgpIHtcbiAgICAgIHZhciBzY3JvbGxUb3AgPSBjb250ZW50RWwucHJvcCgnc2Nyb2xsVG9wJyk7XG4gICAgICB2YXIgaXNTY3JvbGxpbmdEb3duID0gc2Nyb2xsVG9wID4gKG9uU2Nyb2xsLnByZXZTY3JvbGxUb3AgfHwgMCk7XG4gICAgICBvblNjcm9sbC5wcmV2U2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXG4gICAgICAvLyBBdCB0aGUgdG9wP1xuICAgICAgaWYgKHNjcm9sbFRvcCA9PT0gMCkge1xuICAgICAgICBzZXRDdXJyZW50SXRlbShudWxsKTtcblxuICAgICAgLy8gR29pbmcgdG8gbmV4dCBpdGVtP1xuICAgICAgfSBlbHNlIGlmIChpc1Njcm9sbGluZ0Rvd24gJiYgc2VsZi5uZXh0KSB7XG4gICAgICAgIGlmIChzZWxmLm5leHQudG9wIC0gc2Nyb2xsVG9wIDw9IDApIHtcbiAgICAgICAgICAvLyBTdGlja3kgdGhlIG5leHQgaXRlbSBpZiB3ZSd2ZSBzY3JvbGxlZCBwYXN0IGl0cyBwb3NpdGlvbi5cbiAgICAgICAgICBzZXRDdXJyZW50SXRlbShzZWxmLm5leHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY3VycmVudCkge1xuICAgICAgICAgIC8vIFB1c2ggdGhlIGN1cnJlbnQgaXRlbSB1cCB3aGVuIHdlJ3JlIGFsbW9zdCBhdCB0aGUgbmV4dCBpdGVtLlxuICAgICAgICAgIGlmIChzZWxmLm5leHQudG9wIC0gc2Nyb2xsVG9wIDw9IHNlbGYubmV4dC5oZWlnaHQpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0ZShzZWxmLmN1cnJlbnQsIHNlbGYubmV4dC50b3AgLSBzZWxmLm5leHQuaGVpZ2h0IC0gc2Nyb2xsVG9wKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJhbnNsYXRlKHNlbGYuY3VycmVudCwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgLy8gU2Nyb2xsaW5nIHVwIHdpdGggYSBjdXJyZW50IHN0aWNreSBpdGVtP1xuICAgICAgfSBlbHNlIGlmICghaXNTY3JvbGxpbmdEb3duICYmIHNlbGYuY3VycmVudCkge1xuICAgICAgICBpZiAoc2Nyb2xsVG9wIDwgc2VsZi5jdXJyZW50LnRvcCkge1xuICAgICAgICAgIC8vIFN0aWNreSB0aGUgcHJldmlvdXMgaXRlbSBpZiB3ZSd2ZSBzY3JvbGxlZCB1cCBwYXN0XG4gICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIHBvc2l0aW9uIG9mIHRoZSBjdXJyZW50bHkgc3RpY2tpZWQgaXRlbS5cbiAgICAgICAgICBzZXRDdXJyZW50SXRlbShzZWxmLnByZXYpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNjcm9sbGluZyB1cCwgYW5kIGp1c3QgYnVtcGluZyBpbnRvIHRoZSBpdGVtIGFib3ZlIChqdXN0IHNldCB0byBjdXJyZW50KT9cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIG5leHQgaXRlbSBidW1waW5nIGludG8gdGhlIGN1cnJlbnQgaXRlbSwgdHJhbnNsYXRlXG4gICAgICAgIC8vIHRoZSBjdXJyZW50IGl0ZW0gdXAgZnJvbSB0aGUgdG9wIGFzIGl0IHNjcm9sbHMgaW50byB2aWV3LlxuICAgICAgICBpZiAoc2VsZi5jdXJyZW50ICYmIHNlbGYubmV4dCkge1xuICAgICAgICAgIGlmIChzY3JvbGxUb3AgPj0gc2VsZi5uZXh0LnRvcCAtIHNlbGYuY3VycmVudC5oZWlnaHQpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0ZShzZWxmLmN1cnJlbnQsIHNlbGYubmV4dC50b3AgLSBzY3JvbGxUb3AgLSBzZWxmLmN1cnJlbnQuaGVpZ2h0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJhbnNsYXRlKHNlbGYuY3VycmVudCwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgICBcbiAgIGZ1bmN0aW9uIHNldEN1cnJlbnRJdGVtKGl0ZW0pIHtcbiAgICAgaWYgKHNlbGYuY3VycmVudCA9PT0gaXRlbSkgcmV0dXJuO1xuICAgICAvLyBEZWFjdGl2YXRlIGN1cnJlbnRseSBhY3RpdmUgaXRlbVxuICAgICBpZiAoc2VsZi5jdXJyZW50KSB7XG4gICAgICAgdHJhbnNsYXRlKHNlbGYuY3VycmVudCwgbnVsbCk7XG4gICAgICAgc2V0U3RpY2t5U3RhdGUoc2VsZi5jdXJyZW50LCBudWxsKTtcbiAgICAgfVxuXG4gICAgIC8vIEFjdGl2YXRlIG5ldyBpdGVtIGlmIGdpdmVuXG4gICAgIGlmIChpdGVtKSB7XG4gICAgICAgc2V0U3RpY2t5U3RhdGUoaXRlbSwgJ2FjdGl2ZScpO1xuICAgICB9XG5cbiAgICAgc2VsZi5jdXJyZW50ID0gaXRlbTtcbiAgICAgdmFyIGluZGV4ID0gc2VsZi5pdGVtcy5pbmRleE9mKGl0ZW0pO1xuICAgICAvLyBJZiBpbmRleCA9PT0gLTEsIGluZGV4ICsgMSA9IDAuIEl0IHdvcmtzIG91dC5cbiAgICAgc2VsZi5uZXh0ID0gc2VsZi5pdGVtc1tpbmRleCArIDFdO1xuICAgICBzZWxmLnByZXYgPSBzZWxmLml0ZW1zW2luZGV4IC0gMV07XG4gICAgIHNldFN0aWNreVN0YXRlKHNlbGYubmV4dCwgJ25leHQnKTtcbiAgICAgc2V0U3RpY2t5U3RhdGUoc2VsZi5wcmV2LCAncHJldicpO1xuICAgfVxuXG4gICBmdW5jdGlvbiBzZXRTdGlja3lTdGF0ZShpdGVtLCBzdGF0ZSkge1xuICAgICBpZiAoIWl0ZW0gfHwgaXRlbS5zdGF0ZSA9PT0gc3RhdGUpIHJldHVybjtcbiAgICAgaWYgKGl0ZW0uc3RhdGUpIHtcbiAgICAgICBpdGVtLmNsb25lLmF0dHIoJ3N0aWNreS1wcmV2LXN0YXRlJywgaXRlbS5zdGF0ZSk7XG4gICAgICAgaXRlbS5lbGVtZW50LmF0dHIoJ3N0aWNreS1wcmV2LXN0YXRlJywgaXRlbS5zdGF0ZSk7XG4gICAgIH1cbiAgICAgaXRlbS5jbG9uZS5hdHRyKCdzdGlja3ktc3RhdGUnLCBzdGF0ZSk7XG4gICAgIGl0ZW0uZWxlbWVudC5hdHRyKCdzdGlja3ktc3RhdGUnLCBzdGF0ZSk7XG4gICAgIGl0ZW0uc3RhdGUgPSBzdGF0ZTtcbiAgIH1cblxuICAgZnVuY3Rpb24gdHJhbnNsYXRlKGl0ZW0sIGFtb3VudCkge1xuICAgICBpZiAoIWl0ZW0pIHJldHVybjtcbiAgICAgaWYgKGFtb3VudCA9PT0gbnVsbCB8fCBhbW91bnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgIGlmIChpdGVtLnRyYW5zbGF0ZVkpIHtcbiAgICAgICAgIGl0ZW0udHJhbnNsYXRlWSA9IG51bGw7XG4gICAgICAgICBpdGVtLmNsb25lLmNzcygkbWRDb25zdGFudC5DU1MuVFJBTlNGT1JNLCAnJyk7XG4gICAgICAgfVxuICAgICB9IGVsc2Uge1xuICAgICAgIGl0ZW0udHJhbnNsYXRlWSA9IGFtb3VudDtcbiAgICAgICBpdGVtLmNsb25lLmNzcyhcbiAgICAgICAgICRtZENvbnN0YW50LkNTUy5UUkFOU0ZPUk0sIFxuICAgICAgICAgJ3RyYW5zbGF0ZTNkKCcgKyBpdGVtLmxlZnQgKyAncHgsJyArIGFtb3VudCArICdweCwwKSdcbiAgICAgICApO1xuICAgICB9XG4gICB9XG4gIH1cblxuICAvLyBGdW5jdGlvbiB0byBjaGVjayBmb3IgYnJvd3NlciBzdGlja3kgc3VwcG9ydFxuICBmdW5jdGlvbiBjaGVja1N0aWNreVN1cHBvcnQoJGVsKSB7XG4gICAgdmFyIHN0aWNreVByb3A7XG4gICAgdmFyIHRlc3RFbCA9IGFuZ3VsYXIuZWxlbWVudCgnPGRpdj4nKTtcbiAgICAkZG9jdW1lbnRbMF0uYm9keS5hcHBlbmRDaGlsZCh0ZXN0RWxbMF0pO1xuXG4gICAgdmFyIHN0aWNreVByb3BzID0gWydzdGlja3knLCAnLXdlYmtpdC1zdGlja3knXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0aWNreVByb3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICB0ZXN0RWwuY3NzKHtwb3NpdGlvbjogc3RpY2t5UHJvcHNbaV0sIHRvcDogMCwgJ3otaW5kZXgnOiAyfSk7XG4gICAgICBpZiAodGVzdEVsLmNzcygncG9zaXRpb24nKSA9PSBzdGlja3lQcm9wc1tpXSkge1xuICAgICAgICBzdGlja3lQcm9wID0gc3RpY2t5UHJvcHNbaV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICB0ZXN0RWwucmVtb3ZlKCk7XG4gICAgcmV0dXJuIHN0aWNreVByb3A7XG4gIH1cblxuICAvLyBBbmRyb2lkIDQuNCBkb24ndCBhY2N1cmF0ZWx5IGdpdmUgc2Nyb2xsIGV2ZW50cy5cbiAgLy8gVG8gZml4IHRoaXMgcHJvYmxlbSwgd2Ugc2V0dXAgYSBmYWtlIHNjcm9sbCBldmVudC4gV2Ugc2F5OlxuICAvLyA+IElmIGEgc2Nyb2xsIG9yIHRvdWNobW92ZSBldmVudCBoYXMgaGFwcGVuZWQgaW4gdGhlIGxhc3QgREVMQVkgbWlsbGlzZWNvbmRzLCBcbiAgLy8gICB0aGVuIHNlbmQgYSBgJHNjcm9sbGAgZXZlbnQgZXZlcnkgYW5pbWF0aW9uRnJhbWUuXG4gIC8vIEFkZGl0aW9uYWxseSwgd2UgYWRkICRzY3JvbGxzdGFydCBhbmQgJHNjcm9sbGVuZCBldmVudHMuXG4gIGZ1bmN0aW9uIHNldHVwQXVnbWVudGVkU2Nyb2xsRXZlbnRzKGVsZW1lbnQpIHtcbiAgICB2YXIgU0NST0xMX0VORF9ERUxBWSA9IDIwMDtcbiAgICB2YXIgaXNTY3JvbGxpbmc7XG4gICAgdmFyIGxhc3RTY3JvbGxUaW1lO1xuICAgIGVsZW1lbnQub24oJ3Njcm9sbCB0b3VjaG1vdmUnLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghaXNTY3JvbGxpbmcpIHtcbiAgICAgICAgaXNTY3JvbGxpbmcgPSB0cnVlO1xuICAgICAgICAkJHJBRihsb29wU2Nyb2xsRXZlbnQpO1xuICAgICAgICBlbGVtZW50LnRyaWdnZXJIYW5kbGVyKCckc2Nyb2xsc3RhcnQnKTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnQudHJpZ2dlckhhbmRsZXIoJyRzY3JvbGwnKTtcbiAgICAgIGxhc3RTY3JvbGxUaW1lID0gKyRtZFV0aWwubm93KCk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBsb29wU2Nyb2xsRXZlbnQoKSB7XG4gICAgICBpZiAoKyRtZFV0aWwubm93KCkgLSBsYXN0U2Nyb2xsVGltZSA+IFNDUk9MTF9FTkRfREVMQVkpIHtcbiAgICAgICAgaXNTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgZWxlbWVudC50cmlnZ2VySGFuZGxlcignJHNjcm9sbGVuZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC50cmlnZ2VySGFuZGxlcignJHNjcm9sbCcpO1xuICAgICAgICAkJHJBRihsb29wU2Nyb2xsRXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG5NZFN0aWNreS4kaW5qZWN0ID0gW1wiJGRvY3VtZW50XCIsIFwiJG1kQ29uc3RhbnRcIiwgXCIkY29tcGlsZVwiLCBcIiQkckFGXCIsIFwiJG1kVXRpbFwiXTtcbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbWF0ZXJpYWwuY29tcG9uZW50cy5zdWJoZWFkZXJcbiAqIEBkZXNjcmlwdGlvblxuICogU3ViSGVhZGVyIG1vZHVsZVxuICpcbiAqICBTdWJoZWFkZXJzIGFyZSBzcGVjaWFsIGxpc3QgdGlsZXMgdGhhdCBkZWxpbmVhdGUgZGlzdGluY3Qgc2VjdGlvbnMgb2YgYVxuICogIGxpc3Qgb3IgZ3JpZCBsaXN0IGFuZCBhcmUgdHlwaWNhbGx5IHJlbGF0ZWQgdG8gdGhlIGN1cnJlbnQgZmlsdGVyaW5nIG9yXG4gKiAgc29ydGluZyBjcml0ZXJpYS4gU3ViaGVhZGVyIHRpbGVzIGFyZSBlaXRoZXIgZGlzcGxheWVkIGlubGluZSB3aXRoIHRpbGVzIG9yXG4gKiAgY2FuIGJlIGFzc29jaWF0ZWQgd2l0aCBjb250ZW50LCBmb3IgZXhhbXBsZSwgaW4gYW4gYWRqYWNlbnQgY29sdW1uLlxuICpcbiAqICBVcG9uIHNjcm9sbGluZywgc3ViaGVhZGVycyByZW1haW4gcGlubmVkIHRvIHRoZSB0b3Agb2YgdGhlIHNjcmVlbiBhbmQgcmVtYWluXG4gKiAgcGlubmVkIHVudGlsIHB1c2hlZCBvbiBvciBvZmYgc2NyZWVuIGJ5IHRoZSBuZXh0IHN1YmhlYWRlci4gQHNlZSBbTWF0ZXJpYWxcbiAqICBEZXNpZ24gU3BlY2lmaWNhdGlvbnNdKGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vZGVzaWduL3NwZWMvY29tcG9uZW50cy9zdWJoZWFkZXJzLmh0bWwpXG4gKlxuICogID4gVG8gaW1wcm92ZSB0aGUgdmlzdWFsIGdyb3VwaW5nIG9mIGNvbnRlbnQsIHVzZSB0aGUgc3lzdGVtIGNvbG9yIGZvciB5b3VyIHN1YmhlYWRlcnMuXG4gKlxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy5zdWJoZWFkZXInLCBbXG4gICdtYXRlcmlhbC5jb3JlJyxcbiAgJ21hdGVyaWFsLmNvbXBvbmVudHMuc3RpY2t5J1xuXSlcbiAgLmRpcmVjdGl2ZSgnbWRTdWJoZWFkZXInLCBNZFN1YmhlYWRlckRpcmVjdGl2ZSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbWRTdWJoZWFkZXJcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5zdWJoZWFkZXJcbiAqXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGA8bWQtc3ViaGVhZGVyPmAgZGlyZWN0aXZlIGlzIGEgc3ViaGVhZGVyIGZvciBhIHNlY3Rpb25cbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiA8bWQtc3ViaGVhZGVyPk9ubGluZSBGcmllbmRzPC9tZC1zdWJoZWFkZXI+XG4gKiA8L2hsanM+XG4gKi9cblxuZnVuY3Rpb24gTWRTdWJoZWFkZXJEaXJlY3RpdmUoJG1kU3RpY2t5LCAkY29tcGlsZSwgJG1kVGhlbWluZykge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHRlbXBsYXRlOiBcbiAgICAgICc8aDIgY2xhc3M9XCJtZC1zdWJoZWFkZXJcIj4nICtcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwibWQtc3ViaGVhZGVyLWNvbnRlbnRcIj48L3NwYW4+JyArXG4gICAgICAnPC9oMj4nLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIsIHRyYW5zY2x1ZGUpIHtcbiAgICAgIHZhciBvdXRlckhUTUwgPSBlbGVtZW50WzBdLm91dGVySFRNTDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAkbWRUaGVtaW5nKGVsZW1lbnQpO1xuICAgICAgICBmdW5jdGlvbiBnZXRDb250ZW50KGVsKSB7XG4gICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudChlbFswXS5xdWVyeVNlbGVjdG9yKCcubWQtc3ViaGVhZGVyLWNvbnRlbnQnKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcmFuc2NsdWRlIHRoZSB1c2VyLWdpdmVuIGNvbnRlbnRzIG9mIHRoZSBzdWJoZWFkZXJcbiAgICAgICAgLy8gdGhlIGNvbnZlbnRpb25hbCB3YXkuXG4gICAgICAgIHRyYW5zY2x1ZGUoc2NvcGUsIGZ1bmN0aW9uKGNsb25lKSB7XG4gICAgICAgICAgZ2V0Q29udGVudChlbGVtZW50KS5hcHBlbmQoY2xvbmUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgYW5vdGhlciBjbG9uZSwgdGhhdCB1c2VzIHRoZSBvdXRlciBhbmQgaW5uZXIgY29udGVudHNcbiAgICAgICAgLy8gb2YgdGhlIGVsZW1lbnQsIHRoYXQgd2lsbCBiZSAnc3RpY2tpZWQnIGFzIHRoZSB1c2VyIHNjcm9sbHMuXG4gICAgICAgIHRyYW5zY2x1ZGUoc2NvcGUsIGZ1bmN0aW9uKGNsb25lKSB7XG4gICAgICAgICAgdmFyIHN0aWNreUNsb25lID0gJGNvbXBpbGUoYW5ndWxhci5lbGVtZW50KG91dGVySFRNTCkpKHNjb3BlKTtcbiAgICAgICAgICAkbWRUaGVtaW5nKHN0aWNreUNsb25lKTtcbiAgICAgICAgICBnZXRDb250ZW50KHN0aWNreUNsb25lKS5hcHBlbmQoY2xvbmUpO1xuICAgICAgICAgICRtZFN0aWNreShzY29wZSwgZWxlbWVudCwgc3RpY2t5Q2xvbmUpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufVxuTWRTdWJoZWFkZXJEaXJlY3RpdmUuJGluamVjdCA9IFtcIiRtZFN0aWNreVwiLCBcIiRjb21waWxlXCIsIFwiJG1kVGhlbWluZ1wiXTtcbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBtYXRlcmlhbC5jb21wb25lbnRzLnN3aXBlXG4gKiBAZGVzY3JpcHRpb24gU3dpcGUgbW9kdWxlIVxuICovXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5zd2lwZVxuICogQG5hbWUgbWRTd2lwZUxlZnRcbiAqXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIG1kLXN3aXBlLWxlZnQgZGlyZWN0aXZlcyBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIHdoZW4gYW4gZWxlbWVudCBpcyBzd2lwZWRcbiAqIGxlZnQuXG4gKlxuICogQHVzYWdlXG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogPGRpdiBtZC1zd2lwZS1sZWZ0PVwib25Td2lwZUxlZnQoKVwiPlN3aXBlIG1lIGxlZnQhPC9kaXY+XG4gKiA8L2hsanM+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvbXBvbmVudHMuc3dpcGVcbiAqIEBuYW1lIG1kU3dpcGVSaWdodFxuICpcbiAqIEByZXN0cmljdCBBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgbWQtc3dpcGUtcmlnaHQgZGlyZWN0aXZlcyBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIHdoZW4gYW4gZWxlbWVudCBpcyBzd2lwZWRcbiAqIHJpZ2h0LlxuICpcbiAqIEB1c2FnZVxuICogPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqIDxkaXYgbWQtc3dpcGUtcmlnaHQ9XCJvblN3aXBlUmlnaHQoKVwiPlN3aXBlIG1lIHJpZ2h0ITwvZGl2PlxuICogPC9obGpzPlxuICovXG5cbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy5zd2lwZScsW10pO1xuXG5bJ1N3aXBlTGVmdCcsICdTd2lwZVJpZ2h0J10uZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBkaXJlY3RpdmVOYW1lID0gJ21kJyArIG5hbWU7XG4gIHZhciBldmVudE5hbWUgPSAnJG1kLicgKyBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgbW9kdWxlLmRpcmVjdGl2ZShkaXJlY3RpdmVOYW1lLCAvKkBuZ0luamVjdCovIFtcIiRwYXJzZVwiLCBmdW5jdGlvbigkcGFyc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGxpbms6IHBvc3RMaW5rXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICB2YXIgZm4gPSAkcGFyc2UoYXR0cltkaXJlY3RpdmVOYW1lXSk7XG5cbiAgICAgIGVsZW1lbnQub24oZXZlbnROYW1lLCBmdW5jdGlvbihldikge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZm4oc2NvcGUsIHtcbiAgICAgICAgICAgICRldmVudDogZXZcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIH1cbiAgfV0pO1xufSk7XG5cbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMuc3dpdGNoXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMuc3dpdGNoJywgW1xuICAnbWF0ZXJpYWwuY29yZScsXG4gICdtYXRlcmlhbC5jb21wb25lbnRzLmNoZWNrYm94J1xuXSlcbiAgLmRpcmVjdGl2ZSgnbWRTd2l0Y2gnLCBNZFN3aXRjaCk7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy5zd2l0Y2hcbiAqIEBuYW1lIG1kU3dpdGNoXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIFRoZSBzd2l0Y2ggZGlyZWN0aXZlIGlzIHVzZWQgdmVyeSBtdWNoIGxpa2UgdGhlIG5vcm1hbCBbYW5ndWxhciBjaGVja2JveF0oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL2lucHV0L2lucHV0JTVCY2hlY2tib3glNUQpLlxuICpcbiAqIEFzIHBlciB0aGUgW21hdGVyaWFsIGRlc2lnbiBzcGVjXShodHRwOi8vd3d3Lmdvb2dsZS5jb20vZGVzaWduL3NwZWMvc3R5bGUvY29sb3IuaHRtbCNjb2xvci11aS1jb2xvci1hcHBsaWNhdGlvbilcbiAqIHRoZSBzd2l0Y2ggaXMgaW4gdGhlIGFjY2VudCBjb2xvciBieSBkZWZhdWx0LiBUaGUgcHJpbWFyeSBjb2xvciBwYWxldHRlIG1heSBiZSB1c2VkIHdpdGhcbiAqIHRoZSBgbWQtcHJpbWFyeWAgY2xhc3MuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nLW1vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nLXRydWUtdmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBleHByZXNzaW9uIHNob3VsZCBiZSBzZXQgd2hlbiBzZWxlY3RlZC5cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nLWZhbHNlLXZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgc2V0IHdoZW4gbm90IHNlbGVjdGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZy1jaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlciBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICogQHBhcmFtIHtib29sZWFuPX0gbWQtbm8taW5rIFVzZSBvZiBhdHRyaWJ1dGUgaW5kaWNhdGVzIHVzZSBvZiByaXBwbGUgaW5rIGVmZmVjdHMuXG4gKiBAcGFyYW0ge3N0cmluZz19IGFyaWEtbGFiZWwgUHVibGlzaCB0aGUgYnV0dG9uIGxhYmVsIHVzZWQgYnkgc2NyZWVuLXJlYWRlcnMgZm9yIGFjY2Vzc2liaWxpdHkuIERlZmF1bHRzIHRvIHRoZSBzd2l0Y2gncyB0ZXh0LlxuICpcbiAqIEB1c2FnZVxuICogPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqIDxtZC1zd2l0Y2ggbmctbW9kZWw9XCJpc0FjdGl2ZVwiIGFyaWEtbGFiZWw9XCJGaW5pc2hlZD9cIj5cbiAqICAgRmluaXNoZWQgP1xuICogPC9tZC1zd2l0Y2g+XG4gKlxuICogPG1kLXN3aXRjaCBtZC1uby1pbmsgbmctbW9kZWw9XCJoYXNJbmtcIiBhcmlhLWxhYmVsPVwiTm8gSW5rIEVmZmVjdHNcIj5cbiAqICAgTm8gSW5rIEVmZmVjdHNcbiAqIDwvbWQtc3dpdGNoPlxuICpcbiAqIDxtZC1zd2l0Y2ggbmctZGlzYWJsZWQ9XCJ0cnVlXCIgbmctbW9kZWw9XCJpc0Rpc2FibGVkXCIgYXJpYS1sYWJlbD1cIkRpc2FibGVkXCI+XG4gKiAgIERpc2FibGVkXG4gKiA8L21kLXN3aXRjaD5cbiAqXG4gKiA8L2hsanM+XG4gKi9cbmZ1bmN0aW9uIE1kU3dpdGNoKG1kQ2hlY2tib3hEaXJlY3RpdmUsICRtZFRoZW1pbmcsICRtZFV0aWwsICRkb2N1bWVudCwgJG1kQ29uc3RhbnQsICRwYXJzZSwgJCRyQUYsICRtZEdlc3R1cmUpIHtcbiAgdmFyIGNoZWNrYm94RGlyZWN0aXZlID0gbWRDaGVja2JveERpcmVjdGl2ZVswXTtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZTpcbiAgICAgICc8ZGl2IGNsYXNzPVwibWQtY29udGFpbmVyXCI+JyArXG4gICAgICAgICc8ZGl2IGNsYXNzPVwibWQtYmFyXCI+PC9kaXY+JyArXG4gICAgICAgICc8ZGl2IGNsYXNzPVwibWQtdGh1bWItY29udGFpbmVyXCI+JyArXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtZC10aHVtYlwiIG1kLWluay1yaXBwbGUgbWQtaW5rLXJpcHBsZS1jaGVja2JveD48L2Rpdj4nICtcbiAgICAgICAgJzwvZGl2PicrXG4gICAgICAnPC9kaXY+JyArXG4gICAgICAnPGRpdiBuZy10cmFuc2NsdWRlIGNsYXNzPVwibWQtbGFiZWxcIj4nICtcbiAgICAgICc8L2Rpdj4nLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgY29tcGlsZTogY29tcGlsZVxuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbXBpbGUoZWxlbWVudCwgYXR0cikge1xuICAgIHZhciBjaGVja2JveExpbmsgPSBjaGVja2JveERpcmVjdGl2ZS5jb21waWxlKGVsZW1lbnQsIGF0dHIpO1xuICAgIC8vIG5vIHRyYW5zaXRpb24gb24gaW5pdGlhbCBsb2FkXG4gICAgZWxlbWVudC5hZGRDbGFzcygnbWQtZHJhZ2dpbmcnKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG5nTW9kZWwpIHtcbiAgICAgIG5nTW9kZWwgPSBuZ01vZGVsIHx8ICRtZFV0aWwuZmFrZU5nTW9kZWwoKTtcbiAgICAgIHZhciBkaXNhYmxlZEdldHRlciA9ICRwYXJzZShhdHRyLm5nRGlzYWJsZWQpO1xuICAgICAgdmFyIHRodW1iQ29udGFpbmVyID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLm1kLXRodW1iLWNvbnRhaW5lcicpKTtcbiAgICAgIHZhciBzd2l0Y2hDb250YWluZXIgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcubWQtY29udGFpbmVyJykpO1xuXG4gICAgICAvLyBubyB0cmFuc2l0aW9uIG9uIGluaXRpYWwgbG9hZFxuICAgICAgJCRyQUYoZnVuY3Rpb24oKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ21kLWRyYWdnaW5nJyk7XG4gICAgICB9KTtcblxuICAgICAgY2hlY2tib3hMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBuZ01vZGVsKTtcblxuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHIubmdEaXNhYmxlZCkpIHtcbiAgICAgICAgc2NvcGUuJHdhdGNoKGRpc2FibGVkR2V0dGVyLCBmdW5jdGlvbihpc0Rpc2FibGVkKSB7XG4gICAgICAgICAgZWxlbWVudC5hdHRyKCd0YWJpbmRleCcsIGlzRGlzYWJsZWQgPyAtMSA6IDApO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlc2UgZXZlbnRzIGFyZSB0cmlnZ2VyZWQgYnkgc2V0dXAgZHJhZ1xuICAgICAgJG1kR2VzdHVyZS5yZWdpc3Rlcihzd2l0Y2hDb250YWluZXIsICdkcmFnJyk7XG4gICAgICBzd2l0Y2hDb250YWluZXJcbiAgICAgICAgLm9uKCckbWQuZHJhZ3N0YXJ0Jywgb25EcmFnU3RhcnQpXG4gICAgICAgIC5vbignJG1kLmRyYWcnLCBvbkRyYWcpXG4gICAgICAgIC5vbignJG1kLmRyYWdlbmQnLCBvbkRyYWdFbmQpO1xuXG4gICAgICB2YXIgZHJhZztcbiAgICAgIGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KGV2KSB7XG4gICAgICAgIC8vIERvbid0IGdvIGlmIG5nLWRpc2FibGVkPT09dHJ1ZVxuICAgICAgICBpZiAoZGlzYWJsZWRHZXR0ZXIoc2NvcGUpKSByZXR1cm47XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ21kLWRyYWdnaW5nJyk7XG4gICAgICAgIGRyYWcgPSB7XG4gICAgICAgICAgd2lkdGg6IHRodW1iQ29udGFpbmVyLnByb3AoJ29mZnNldFdpZHRoJylcbiAgICAgICAgfTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygndHJhbnNpdGlvbicpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbkRyYWcoZXYpIHtcbiAgICAgICAgaWYgKCFkcmFnKSByZXR1cm47XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBldi5zcmNFdmVudCAmJiBldi5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBwZXJjZW50ID0gZXYucG9pbnRlci5kaXN0YW5jZVggLyBkcmFnLndpZHRoO1xuXG4gICAgICAgIC8vaWYgY2hlY2tlZCwgc3RhcnQgZnJvbSByaWdodC4gZWxzZSwgc3RhcnQgZnJvbSBsZWZ0XG4gICAgICAgIHZhciB0cmFuc2xhdGUgPSBuZ01vZGVsLiR2aWV3VmFsdWUgPyAgMSArIHBlcmNlbnQgOiBwZXJjZW50O1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHN3aXRjaCBzdGF5cyBpbnNpZGUgaXRzIGJvdW5kcywgMC0xJVxuICAgICAgICB0cmFuc2xhdGUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB0cmFuc2xhdGUpKTtcblxuICAgICAgICB0aHVtYkNvbnRhaW5lci5jc3MoJG1kQ29uc3RhbnQuQ1NTLlRSQU5TRk9STSwgJ3RyYW5zbGF0ZTNkKCcgKyAoMTAwKnRyYW5zbGF0ZSkgKyAnJSwwLDApJyk7XG4gICAgICAgIGRyYWcudHJhbnNsYXRlID0gdHJhbnNsYXRlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbkRyYWdFbmQoZXYpIHtcbiAgICAgICAgaWYgKCFkcmFnKSByZXR1cm47XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ21kLWRyYWdnaW5nJyk7XG4gICAgICAgIHRodW1iQ29udGFpbmVyLmNzcygkbWRDb25zdGFudC5DU1MuVFJBTlNGT1JNLCAnJyk7XG5cbiAgICAgICAgLy8gV2UgY2hhbmdlZCBpZiB0aGVyZSBpcyBubyBkaXN0YW5jZSAodGhpcyBpcyBhIGNsaWNrIGEgY2xpY2spLFxuICAgICAgICAvLyBvciBpZiB0aGUgZHJhZyBkaXN0YW5jZSBpcyA+NTAlIG9mIHRoZSB0b3RhbC5cbiAgICAgICAgdmFyIGlzQ2hhbmdlZCA9IG5nTW9kZWwuJHZpZXdWYWx1ZSA/IGRyYWcudHJhbnNsYXRlIDwgMC41IDogZHJhZy50cmFuc2xhdGUgPiAwLjU7XG4gICAgICAgIGlmIChpc0NoYW5nZWQpIHtcbiAgICAgICAgICBhcHBseU1vZGVsVmFsdWUoIW5nTW9kZWwuJHZpZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZHJhZyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGFwcGx5TW9kZWxWYWx1ZShuZXdWYWx1ZSkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKG5ld1ZhbHVlKTtcbiAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICB9O1xuICB9XG5cblxufVxuTWRTd2l0Y2guJGluamVjdCA9IFtcIm1kQ2hlY2tib3hEaXJlY3RpdmVcIiwgXCIkbWRUaGVtaW5nXCIsIFwiJG1kVXRpbFwiLCBcIiRkb2N1bWVudFwiLCBcIiRtZENvbnN0YW50XCIsIFwiJHBhcnNlXCIsIFwiJCRyQUZcIiwgXCIkbWRHZXN0dXJlXCJdO1xuXG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMudGFic1xuICogQGRlc2NyaXB0aW9uXG4gKlxuICogIFRhYnMsIGNyZWF0ZWQgd2l0aCB0aGUgYDxtZC10YWJzPmAgZGlyZWN0aXZlIHByb3ZpZGUgKnRhYmJlZCogbmF2aWdhdGlvbiB3aXRoIGRpZmZlcmVudCBzdHlsZXMuXG4gKiAgVGhlIFRhYnMgY29tcG9uZW50IGNvbnNpc3RzIG9mIGNsaWNrYWJsZSB0YWJzIHRoYXQgYXJlIGFsaWduZWQgaG9yaXpvbnRhbGx5IHNpZGUtYnktc2lkZS5cbiAqXG4gKiAgRmVhdHVyZXMgaW5jbHVkZSBzdXBwb3J0IGZvcjpcbiAqXG4gKiAgLSBzdGF0aWMgb3IgZHluYW1pYyB0YWJzLFxuICogIC0gcmVzcG9uc2l2ZSBkZXNpZ25zLFxuICogIC0gYWNjZXNzaWJpbGl0eSBzdXBwb3J0IChBUklBKSxcbiAqICAtIHRhYiBwYWdpbmF0aW9uLFxuICogIC0gZXh0ZXJuYWwgb3IgaW50ZXJuYWwgdGFiIGNvbnRlbnQsXG4gKiAgLSBmb2N1cyBpbmRpY2F0b3JzIGFuZCBhcnJvdy1rZXkgbmF2aWdhdGlvbnMsXG4gKiAgLSBwcm9ncmFtbWF0aWMgbG9va3VwIGFuZCBhY2Nlc3MgdG8gdGFiIGNvbnRyb2xsZXJzLCBhbmRcbiAqICAtIGR5bmFtaWMgdHJhbnNpdGlvbnMgdGhyb3VnaCBkaWZmZXJlbnQgdGFiIGNvbnRlbnRzLlxuICpcbiAqL1xuLypcbiAqIEBzZWUganMgZm9sZGVyIGZvciB0YWJzIGltcGxlbWVudGF0aW9uXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb21wb25lbnRzLnRhYnMnLCBbXG4gICdtYXRlcmlhbC5jb3JlJ1xuXSk7XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMudGV4dEZpZWxkXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZvcm1cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMudGV4dEZpZWxkJywgW1xuICAnbWF0ZXJpYWwuY29yZSdcbl0pXG4gIC5kaXJlY3RpdmUoJ21kSW5wdXRHcm91cCcsIG1kSW5wdXRHcm91cERpcmVjdGl2ZSlcbiAgLmRpcmVjdGl2ZSgnbWRJbnB1dCcsIG1kSW5wdXREaXJlY3RpdmUpXG4gIC5kaXJlY3RpdmUoJ21kVGV4dEZsb2F0JywgbWRUZXh0RmxvYXREaXJlY3RpdmUpO1xuXG5cbmZ1bmN0aW9uIG1kVGV4dEZsb2F0RGlyZWN0aXZlKCRtZFRoZW1pbmcsICRtZFV0aWwsICRwYXJzZSwgJGxvZykge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBzY29wZSA6IHtcbiAgICAgIGZpZCA6ICdAP21kRmlkJyxcbiAgICAgIGxhYmVsIDogJ0A/JyxcbiAgICAgIHZhbHVlIDogJz1uZ01vZGVsJ1xuICAgIH0sXG4gICAgY29tcGlsZSA6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcblxuICAgICAgJGxvZy53YXJuKCc8bWQtdGV4dC1mbG9hdD4gaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBgPG1kLWlucHV0LWNvbnRhaW5lcj5gIGFuZCBgPGlucHV0PmAuJyArIFxuICAgICAgICAgICAgICAgICdNb3JlIGluZm9ybWF0aW9uIGF0IGh0dHA6Ly9tYXRlcmlhbC5hbmd1bGFyanMub3JnLyMvYXBpL21hdGVyaWFsLmNvbXBvbmVudHMuaW5wdXQvZGlyZWN0aXZlL21kSW5wdXRDb250YWluZXInKTtcblxuICAgICAgaWYgKCBhbmd1bGFyLmlzVW5kZWZpbmVkKGF0dHIubWRGaWQpICkge1xuICAgICAgICBhdHRyLm1kRmlkID0gJG1kVXRpbC5uZXh0VWlkKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHByZSA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgIHZhciBkaXNhYmxlZFBhcnNlZCA9ICRwYXJzZShhdHRycy5uZ0Rpc2FibGVkKTtcbiAgICAgICAgICBzY29wZS5pc0Rpc2FibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZGlzYWJsZWRQYXJzZWQoc2NvcGUuJHBhcmVudCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHNjb3BlLmlucHV0VHlwZSA9IGF0dHJzLnR5cGUgfHwgXCJ0ZXh0XCI7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc3Q6ICRtZFRoZW1pbmdcbiAgICAgIH07XG4gICAgfSxcbiAgICB0ZW1wbGF0ZTpcbiAgICAnPG1kLWlucHV0LWdyb3VwIHRhYmluZGV4PVwiLTFcIj4nICtcbiAgICAnIDxsYWJlbCBmb3I9XCJ7e2ZpZH19XCIgPnt7bGFiZWx9fTwvbGFiZWw+JyArXG4gICAgJyA8bWQtaW5wdXQgaWQ9XCJ7e2ZpZH19XCIgbmctZGlzYWJsZWQ9XCJpc0Rpc2FibGVkKClcIiBuZy1tb2RlbD1cInZhbHVlXCIgdHlwZT1cInt7aW5wdXRUeXBlfX1cIj48L21kLWlucHV0PicgK1xuICAgICc8L21kLWlucHV0LWdyb3VwPidcbiAgfTtcbn1cbm1kVGV4dEZsb2F0RGlyZWN0aXZlLiRpbmplY3QgPSBbXCIkbWRUaGVtaW5nXCIsIFwiJG1kVXRpbFwiLCBcIiRwYXJzZVwiLCBcIiRsb2dcIl07XG5cbmZ1bmN0aW9uIG1kSW5wdXRHcm91cERpcmVjdGl2ZSgkbG9nKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdDRScsXG4gICAgY29udHJvbGxlcjogWyckZWxlbWVudCcsIGZ1bmN0aW9uKCRlbGVtZW50KSB7XG5cbiAgICAgICRsb2cud2FybignPG1kLWlucHV0LWdyb3VwPiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGA8bWQtaW5wdXQtY29udGFpbmVyPmAgYW5kIGA8aW5wdXQ+YC4nICsgXG4gICAgICAgICAgICAgICAgJ01vcmUgaW5mb3JtYXRpb24gYXQgaHR0cDovL21hdGVyaWFsLmFuZ3VsYXJqcy5vcmcvIy9hcGkvbWF0ZXJpYWwuY29tcG9uZW50cy5pbnB1dC9kaXJlY3RpdmUvbWRJbnB1dENvbnRhaW5lcicpO1xuICAgICAgdGhpcy5zZXRGb2N1c2VkID0gZnVuY3Rpb24oaXNGb2N1c2VkKSB7XG4gICAgICAgICRlbGVtZW50LnRvZ2dsZUNsYXNzKCdtZC1pbnB1dC1mb2N1c2VkJywgISFpc0ZvY3VzZWQpO1xuICAgICAgfTtcbiAgICAgIHRoaXMuc2V0SGFzVmFsdWUgPSBmdW5jdGlvbihoYXNWYWx1ZSkge1xuICAgICAgICAkZWxlbWVudC50b2dnbGVDbGFzcygnbWQtaW5wdXQtaGFzLXZhbHVlJywgaGFzVmFsdWUgKTtcbiAgICAgIH07XG4gICAgfV1cbiAgfTtcblxufVxubWRJbnB1dEdyb3VwRGlyZWN0aXZlLiRpbmplY3QgPSBbXCIkbG9nXCJdO1xuXG5mdW5jdGlvbiBtZElucHV0RGlyZWN0aXZlKCRtZFV0aWwsICRsb2cpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdGVtcGxhdGU6ICc8aW5wdXQgPicsXG4gICAgcmVxdWlyZTogWydeP21kSW5wdXRHcm91cCcsICc/bmdNb2RlbCddLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgaWYgKCAhY3RybHNbMF0gKSByZXR1cm47XG5cbiAgICAgICRsb2cud2FybignPG1kLWlucHV0PiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGA8bWQtaW5wdXQtY29udGFpbmVyPmAgYW5kIGA8aW5wdXQ+YC4nICsgXG4gICAgICAgICAgICAgICAgJ01vcmUgaW5mb3JtYXRpb24gYXQgaHR0cDovL21hdGVyaWFsLmFuZ3VsYXJqcy5vcmcvIy9hcGkvbWF0ZXJpYWwuY29tcG9uZW50cy5pbnB1dC9kaXJlY3RpdmUvbWRJbnB1dENvbnRhaW5lcicpO1xuXG4gICAgICB2YXIgaW5wdXRHcm91cEN0cmwgPSBjdHJsc1swXTtcbiAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuXG4gICAgICBzY29wZS4kd2F0Y2goc2NvcGUuaXNEaXNhYmxlZCwgZnVuY3Rpb24oaXNEaXNhYmxlZCkge1xuICAgICAgICBlbGVtZW50LmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAhIWlzRGlzYWJsZWQpO1xuICAgICAgICBlbGVtZW50LmF0dHIoJ3RhYmluZGV4JywgISFpc0Rpc2FibGVkKTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5hdHRyKCd0eXBlJywgYXR0ci50eXBlIHx8IGVsZW1lbnQucGFyZW50KCkuYXR0cigndHlwZScpIHx8IFwidGV4dFwiKTtcblxuICAgICAgLy8gV2hlbiB0aGUgaW5wdXQgdmFsdWUgY2hhbmdlcywgY2hlY2sgaWYgaXQgXCJoYXNcIiBhIHZhbHVlLCBhbmRcbiAgICAgIC8vIHNldCB0aGUgYXBwcm9wcmlhdGUgY2xhc3Mgb24gdGhlIGlucHV0IGdyb3VwXG4gICAgICBpZiAobmdNb2RlbEN0cmwpIHtcbiAgICAgICAgLy9BZGQgYSAkZm9ybWF0dGVyIHNvIHdlIGRvbid0IHVzZSB1cCB0aGUgcmVuZGVyIGZ1bmN0aW9uXG4gICAgICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpbnB1dEdyb3VwQ3RybC5zZXRIYXNWYWx1ZSggaXNOb3RFbXB0eSh2YWx1ZSkgKTtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50XG4gICAgICAgIC5vbignaW5wdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpbnB1dEdyb3VwQ3RybC5zZXRIYXNWYWx1ZSggaXNOb3RFbXB0eSgpICk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignZm9jdXMnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgLy8gV2hlbiB0aGUgaW5wdXQgZm9jdXNlcywgYWRkIHRoZSBmb2N1c2VkIGNsYXNzIHRvIHRoZSBncm91cFxuICAgICAgICAgIGlucHV0R3JvdXBDdHJsLnNldEZvY3VzZWQodHJ1ZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignYmx1cicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAvLyBXaGVuIHRoZSBpbnB1dCBibHVycywgcmVtb3ZlIHRoZSBmb2N1c2VkIGNsYXNzIGZyb20gdGhlIGdyb3VwXG4gICAgICAgICAgaW5wdXRHcm91cEN0cmwuc2V0Rm9jdXNlZChmYWxzZSk7XG4gICAgICAgICAgaW5wdXRHcm91cEN0cmwuc2V0SGFzVmFsdWUoIGlzTm90RW1wdHkoKSApO1xuICAgICAgICB9KTtcblxuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpbnB1dEdyb3VwQ3RybC5zZXRGb2N1c2VkKGZhbHNlKTtcbiAgICAgICAgaW5wdXRHcm91cEN0cmwuc2V0SGFzVmFsdWUoZmFsc2UpO1xuICAgICAgfSk7XG5cblxuICAgICAgZnVuY3Rpb24gaXNOb3RFbXB0eSh2YWx1ZSkge1xuICAgICAgICB2YWx1ZSA9IGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpID8gZWxlbWVudC52YWwoKSA6IHZhbHVlO1xuICAgICAgICByZXR1cm4gKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSAmJiAodmFsdWUhPT1udWxsKSAmJlxuICAgICAgICAgICAgICAgKHZhbHVlLnRvU3RyaW5nKCkudHJpbSgpICE9PSBcIlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxubWRJbnB1dERpcmVjdGl2ZS4kaW5qZWN0ID0gW1wiJG1kVXRpbFwiLCBcIiRsb2dcIl07XG5cbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbWF0ZXJpYWwuY29tcG9uZW50cy50b2FzdFxuICogQGRlc2NyaXB0aW9uXG4gKiBUb2FzdFxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy50b2FzdCcsIFtcbiAgJ21hdGVyaWFsLmNvcmUnLFxuICAnbWF0ZXJpYWwuY29tcG9uZW50cy5idXR0b24nXG5dKVxuICAuZGlyZWN0aXZlKCdtZFRvYXN0JywgTWRUb2FzdERpcmVjdGl2ZSlcbiAgLnByb3ZpZGVyKCckbWRUb2FzdCcsIE1kVG9hc3RQcm92aWRlcik7XG5cbmZ1bmN0aW9uIE1kVG9hc3REaXJlY3RpdmUoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJ1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbWRUb2FzdFxuICogQG1vZHVsZSBtYXRlcmlhbC5jb21wb25lbnRzLnRvYXN0XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgJG1kVG9hc3RgIGlzIGEgc2VydmljZSB0byBidWlsZCBhIHRvYXN0IG5vZmljYXRpb24gb24gYW55IHBvc2l0aW9uXG4gKiBvbiB0aGUgc2NyZWVuIHdpdGggYW4gb3B0aW9uYWwgZHVyYXRpb24sIGFuZCBwcm92aWRlcyBhIHNpbXBsZSBwcm9taXNlIEFQSS5cbiAqXG4gKlxuICogIyMjIFJlc3RyaWN0aW9ucyBvbiBjdXN0b20gdG9hc3RzXG4gKiAtIFRoZSB0b2FzdCdzIHRlbXBsYXRlIG11c3QgaGF2ZSBhbiBvdXRlciBgPG1kLXRvYXN0PmAgZWxlbWVudC5cbiAqIC0gRm9yIGEgdG9hc3QgYWN0aW9uLCB1c2UgZWxlbWVudCB3aXRoIGNsYXNzIGBtZC1hY3Rpb25gLlxuICogLSBBZGQgdGhlIGNsYXNzIGBtZC1jYXBzdWxlYCBmb3IgY3VydmVkIGNvcm5lcnMuXG4gKlxuICogQHVzYWdlXG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogPGRpdiBuZy1jb250cm9sbGVyPVwiTXlDb250cm9sbGVyXCI+XG4gKiAgIDxtZC1idXR0b24gbmctY2xpY2s9XCJvcGVuVG9hc3QoKVwiPlxuICogICAgIE9wZW4gYSBUb2FzdCFcbiAqICAgPC9tZC1idXR0b24+XG4gKiA8L2Rpdj5cbiAqIDwvaGxqcz5cbiAqXG4gKiA8aGxqcyBsYW5nPVwianNcIj5cbiAqIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyduZ01hdGVyaWFsJ10pO1xuICogYXBwLmNvbnRyb2xsZXIoJ015Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgJG1kVG9hc3QpIHtcbiAqICAgJHNjb3BlLm9wZW5Ub2FzdCA9IGZ1bmN0aW9uKCRldmVudCkge1xuICogICAgICRtZFRvYXN0LnNob3coJG1kVG9hc3Quc2ltcGxlKCkuY29udGVudCgnSGVsbG8hJykpO1xuICogICAgIC8vIENvdWxkIGFsc28gZG8gJG1kVG9hc3Quc2hvd1NpbXBsZSgnSGVsbG8nKTtcbiAqICAgfTtcbiAqIH0pO1xuICogPC9obGpzPlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJG1kVG9hc3Qjc2hvd1NpbXBsZVxuICogXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlbmllbmNlIG1ldGhvZCB3aGljaCBidWlsZHMgYW5kIHNob3dzIGEgc2ltcGxlIHRvYXN0LlxuICpcbiAqIEByZXR1cm5zIHtwcm9taXNlfSBBIHByb21pc2UgdGhhdCBjYW4gYmUgcmVzb2x2ZWQgd2l0aCBgJG1kVG9hc3QuaGlkZSgpYCBvclxuICogcmVqZWN0ZWQgd2l0aCBgJG1kVG9hc3QuY2FuY2VsKClgLlxuICpcbiAqL1xuXG4gLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkbWRUb2FzdCNzaW1wbGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEJ1aWxkcyBhIHByZWNvbmZpZ3VyZWQgdG9hc3QuXG4gKlxuICogQHJldHVybnMge29ian0gYSBgJG1kVG9hc3RQcmVzZXRgIHdpdGggdGhlIGNoYWluYWJsZSBjb25maWd1cmF0aW9uIG1ldGhvZHM6XG4gKlxuICogLSAkbWRUb2FzdFByZXNldCNjb250ZW50KHN0cmluZykgLSBzZXRzIHRvYXN0IGNvbnRlbnQgdG8gc3RyaW5nXG4gKiAtICRtZFRvYXN0UHJlc2V0I2FjdGlvbihzdHJpbmcpIC0gYWRkcyBhbiBhY3Rpb24gYnV0dG9uLCB3aGljaCByZXNvbHZlcyB0aGUgcHJvbWlzZSByZXR1cm5lZCBmcm9tIGBzaG93KClgIGlmIGNsaWNrZWQuXG4gKiAtICRtZFRvYXN0UHJlc2V0I2hpZ2hsaWdodEFjdGlvbihib29sZWFuKSAtIHNldHMgYWN0aW9uIGJ1dHRvbiB0byBiZSBoaWdobGlnaHRlZFxuICogLSAkbWRUb2FzdFByZXNldCNjYXBzdWxlKGJvb2xlYW4pIC0gYWRkcyAnbWQtY2Fwc3VsZScgY2xhc3MgdG8gdGhlIHRvYXN0IChjdXJ2ZWQgY29ybmVycylcbiAqL1xuXG4gLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkbWRUb2FzdCNidWlsZFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIGN1c3RvbSBgJG1kVG9hc3RQcmVzZXRgIHRoYXQgeW91IGNhbiBjb25maWd1cmUuXG4gKlxuICogQHJldHVybnMge29ian0gYSBgJG1kVG9hc3RQcmVzZXRgIHdpdGggdGhlIGNoYWluYWJsZSBjb25maWd1cmF0aW9uIG1ldGhvZHMgZm9yIHNob3dzJyBvcHRpb25zIChzZWUgYmVsb3cpLlxuICovXG5cbiAvKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRtZFRvYXN0I3Nob3dcbiAqXG4gKiBAZGVzY3JpcHRpb24gU2hvd3MgdGhlIHRvYXN0LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zT3JQcmVzZXQgRWl0aGVyIHByb3ZpZGUgYW4gYCRtZFRvYXN0UHJlc2V0YCByZXR1cm5lZCBmcm9tIGBzaW1wbGUoKWBcbiAqIGFuZCBgYnVpbGQoKWAsIG9yIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBgdGVtcGxhdGVVcmxgIC0gYHtzdHJpbmc9fWA6IFRoZSB1cmwgb2YgYW4gaHRtbCB0ZW1wbGF0ZSBmaWxlIHRoYXQgd2lsbFxuICogICAgIGJlIHVzZWQgYXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRvYXN0LiBSZXN0cmljdGlvbnM6IHRoZSB0ZW1wbGF0ZSBtdXN0XG4gKiAgICAgaGF2ZSBhbiBvdXRlciBgbWQtdG9hc3RgIGVsZW1lbnQuXG4gKiAgIC0gYHRlbXBsYXRlYCAtIGB7c3RyaW5nPX1gOiBTYW1lIGFzIHRlbXBsYXRlVXJsLCBleGNlcHQgdGhpcyBpcyBhbiBhY3R1YWxcbiAqICAgICB0ZW1wbGF0ZSBzdHJpbmcuXG4gKiAgIC0gYGhpZGVEZWxheWAgLSBge251bWJlcj19YDogSG93IG1hbnkgbWlsbGlzZWNvbmRzIHRoZSB0b2FzdCBzaG91bGQgc3RheVxuICogICAgIGFjdGl2ZSBiZWZvcmUgYXV0b21hdGljYWxseSBjbG9zaW5nLiAgU2V0IHRvIDAgb3IgZmFsc2UgdG8gaGF2ZSB0aGUgdG9hc3Qgc3RheSBvcGVuIHVudGlsXG4gKiAgICAgY2xvc2VkIG1hbnVhbGx5LiBEZWZhdWx0OiAzMDAwLlxuICogICAtIGBwb3NpdGlvbmAgLSBge3N0cmluZz19YDogV2hlcmUgdG8gcGxhY2UgdGhlIHRvYXN0LiBBdmFpbGFibGU6IGFueSBjb21iaW5hdGlvblxuICogICAgIG9mICdib3R0b20nLCAnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnZml0Jy4gRGVmYXVsdDogJ2JvdHRvbSBsZWZ0Jy5cbiAqICAgLSBgY29udHJvbGxlcmAgLSBge3N0cmluZz19YDogVGhlIGNvbnRyb2xsZXIgdG8gYXNzb2NpYXRlIHdpdGggdGhpcyB0b2FzdC5cbiAqICAgICBUaGUgY29udHJvbGxlciB3aWxsIGJlIGluamVjdGVkIHRoZSBsb2NhbCBgJGhpZGVUb2FzdGAsIHdoaWNoIGlzIGEgZnVuY3Rpb25cbiAqICAgICB1c2VkIHRvIGhpZGUgdGhlIHRvYXN0LlxuICogICAtIGBsb2NhbHNgIC0gYHtzdHJpbmc9fWA6IEFuIG9iamVjdCBjb250YWluaW5nIGtleS92YWx1ZSBwYWlycy4gVGhlIGtleXMgd2lsbFxuICogICAgIGJlIHVzZWQgYXMgbmFtZXMgb2YgdmFsdWVzIHRvIGluamVjdCBpbnRvIHRoZSBjb250cm9sbGVyLiBGb3IgZXhhbXBsZSxcbiAqICAgICBgbG9jYWxzOiB7dGhyZWU6IDN9YCB3b3VsZCBpbmplY3QgYHRocmVlYCBpbnRvIHRoZSBjb250cm9sbGVyIHdpdGggdGhlIHZhbHVlXG4gKiAgICAgb2YgMy5cbiAqICAgLSBgcmVzb2x2ZWAgLSBge29iamVjdD19YDogU2ltaWxhciB0byBsb2NhbHMsIGV4Y2VwdCBpdCB0YWtlcyBwcm9taXNlcyBhcyB2YWx1ZXNcbiAqICAgICBhbmQgdGhlIHRvYXN0IHdpbGwgbm90IG9wZW4gdW50aWwgdGhlIHByb21pc2VzIHJlc29sdmUuXG4gKiAgIC0gYGNvbnRyb2xsZXJBc2AgLSBge3N0cmluZz19YDogQW4gYWxpYXMgdG8gYXNzaWduIHRoZSBjb250cm9sbGVyIHRvIG9uIHRoZSBzY29wZS5cbiAqICAgLSBgcGFyZW50YCAtIGB7ZWxlbWVudD19YDogVGhlIGVsZW1lbnQgdG8gYXBwZW5kIHRoZSB0b2FzdCB0by4gRGVmYXVsdHMgdG8gYXBwZW5kaW5nXG4gKiAgICAgdG8gdGhlIHJvb3QgZWxlbWVudCBvZiB0aGUgYXBwbGljYXRpb24uXG4gKlxuICogQHJldHVybnMge3Byb21pc2V9IEEgcHJvbWlzZSB0aGF0IGNhbiBiZSByZXNvbHZlZCB3aXRoIGAkbWRUb2FzdC5oaWRlKClgIG9yXG4gKiByZWplY3RlZCB3aXRoIGAkbWRUb2FzdC5jYW5jZWwoKWAuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkbWRUb2FzdCNoaWRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIaWRlIGFuIGV4aXN0aW5nIHRvYXN0IGFuZCByZXNvbHZlIHRoZSBwcm9taXNlIHJldHVybmVkIGZyb20gYCRtZFRvYXN0LnNob3coKWAuXG4gKlxuICogQHBhcmFtIHsqPX0gcmVzcG9uc2UgQW4gYXJndW1lbnQgZm9yIHRoZSByZXNvbHZlZCBwcm9taXNlLlxuICpcbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRtZFRvYXN0I2NhbmNlbFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSGlkZSB0aGUgZXhpc3RpbmcgdG9hc3QgYW5kIHJlamVjdCB0aGUgcHJvbWlzZSByZXR1cm5lZCBmcm9tXG4gKiBgJG1kVG9hc3Quc2hvdygpYC5cbiAqXG4gKiBAcGFyYW0geyo9fSByZXNwb25zZSBBbiBhcmd1bWVudCBmb3IgdGhlIHJlamVjdGVkIHByb21pc2UuXG4gKlxuICovXG5cbmZ1bmN0aW9uIE1kVG9hc3RQcm92aWRlcigkJGludGVyaW1FbGVtZW50UHJvdmlkZXIpIHtcblxuICB0b2FzdERlZmF1bHRPcHRpb25zLiRpbmplY3QgPSBbXCIkdGltZW91dFwiLCBcIiRhbmltYXRlXCIsIFwiJG1kVGhlbWluZ1wiLCBcIiRtZFRvYXN0XCJdO1xuICByZXR1cm4gJCRpbnRlcmltRWxlbWVudFByb3ZpZGVyKCckbWRUb2FzdCcpXG4gICAgLnNldERlZmF1bHRzKHtcbiAgICAgIG1ldGhvZHM6IFsncG9zaXRpb24nLCAnaGlkZURlbGF5JywgJ2NhcHN1bGUnXSxcbiAgICAgIG9wdGlvbnM6IHRvYXN0RGVmYXVsdE9wdGlvbnNcbiAgICB9KVxuICAgIC5hZGRQcmVzZXQoJ3NpbXBsZScsIHtcbiAgICAgIGFyZ09wdGlvbjogJ2NvbnRlbnQnLFxuICAgICAgbWV0aG9kczogWydjb250ZW50JywgJ2FjdGlvbicsICdoaWdobGlnaHRBY3Rpb24nXSxcbiAgICAgIG9wdGlvbnM6IC8qIEBuZ0luamVjdCAqLyBbXCIkbWRUb2FzdFwiLCBmdW5jdGlvbigkbWRUb2FzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRlbXBsYXRlOiBbXG4gICAgICAgICAgICAnPG1kLXRvYXN0IG5nLWNsYXNzPVwie1xcJ21kLWNhcHN1bGVcXCc6IHRvYXN0LmNhcHN1bGV9XCI+JyxcbiAgICAgICAgICAgICAgJzxzcGFuIGZsZXg+e3sgdG9hc3QuY29udGVudCB9fTwvc3Bhbj4nLFxuICAgICAgICAgICAgICAnPG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWFjdGlvblwiIG5nLWlmPVwidG9hc3QuYWN0aW9uXCIgbmctY2xpY2s9XCJ0b2FzdC5yZXNvbHZlKClcIiBuZy1jbGFzcz1cIntcXCdtZC1oaWdobGlnaHRcXCc6IHRvYXN0LmhpZ2hsaWdodEFjdGlvbn1cIj4nLFxuICAgICAgICAgICAgICAgICd7eyB0b2FzdC5hY3Rpb24gfX0nLFxuICAgICAgICAgICAgICAnPC9tZC1idXR0b24+JyxcbiAgICAgICAgICAgICc8L21kLXRvYXN0PidcbiAgICAgICAgICBdLmpvaW4oJycpLFxuICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uIG1kVG9hc3RDdHJsKCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICRtZFRvYXN0LmhpZGUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICd0b2FzdCcsXG4gICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfV1cbiAgICB9KTtcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gdG9hc3REZWZhdWx0T3B0aW9ucygkdGltZW91dCwgJGFuaW1hdGUsICRtZFRoZW1pbmcsICRtZFRvYXN0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uU2hvdzogb25TaG93LFxuICAgICAgb25SZW1vdmU6IG9uUmVtb3ZlLFxuICAgICAgcG9zaXRpb246ICdib3R0b20gbGVmdCcsXG4gICAgICB0aGVtYWJsZTogdHJ1ZSxcbiAgICAgIGhpZGVEZWxheTogMzAwMFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBvblNob3coc2NvcGUsIGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgIC8vICd0b3AgbGVmdCcgLT4gJ21kLXRvcCBtZC1sZWZ0J1xuICAgICAgZWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLnBvc2l0aW9uLnNwbGl0KCcgJykubWFwKGZ1bmN0aW9uKHBvcykge1xuICAgICAgICByZXR1cm4gJ21kLScgKyBwb3M7XG4gICAgICB9KS5qb2luKCcgJykpO1xuICAgICAgb3B0aW9ucy5wYXJlbnQuYWRkQ2xhc3ModG9hc3RPcGVuQ2xhc3Mob3B0aW9ucy5wb3NpdGlvbikpO1xuXG4gICAgICBvcHRpb25zLm9uU3dpcGUgPSBmdW5jdGlvbihldiwgZ2VzdHVyZSkge1xuICAgICAgICAvL0FkZCBzd2lwZWxlZnQvc3dpcGVyaWdodCBjbGFzcyB0byBlbGVtZW50IHNvIGl0IGNhbiBhbmltYXRlIGNvcnJlY3RseVxuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdtZC0nICsgZXYudHlwZS5yZXBsYWNlKCckbWQuJywnJykpO1xuICAgICAgICAkdGltZW91dCgkbWRUb2FzdC5jYW5jZWwpO1xuICAgICAgfTtcbiAgICAgIGVsZW1lbnQub24oJyRtZC5zd2lwZWxlZnQgJG1kLnN3aXBlcmlnaHQnLCBvcHRpb25zLm9uU3dpcGUpO1xuICAgICAgcmV0dXJuICRhbmltYXRlLmVudGVyKGVsZW1lbnQsIG9wdGlvbnMucGFyZW50KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblJlbW92ZShzY29wZSwgZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgZWxlbWVudC5vZmYoJyRtZC5zd2lwZWxlZnQgJG1kLnN3aXBlcmlnaHQnLCBvcHRpb25zLm9uU3dpcGUpO1xuICAgICAgb3B0aW9ucy5wYXJlbnQucmVtb3ZlQ2xhc3ModG9hc3RPcGVuQ2xhc3Mob3B0aW9ucy5wb3NpdGlvbikpO1xuICAgICAgcmV0dXJuICRhbmltYXRlLmxlYXZlKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvYXN0T3BlbkNsYXNzKHBvc2l0aW9uKSB7XG4gICAgICByZXR1cm4gJ21kLXRvYXN0LW9wZW4tJyArXG4gICAgICAgIChwb3NpdGlvbi5pbmRleE9mKCd0b3AnKSA+IC0xID8gJ3RvcCcgOiAnYm90dG9tJyk7XG4gICAgfVxuICB9XG5cbn1cbk1kVG9hc3RQcm92aWRlci4kaW5qZWN0ID0gW1wiJCRpbnRlcmltRWxlbWVudFByb3ZpZGVyXCJdO1xuXG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMudG9vbGJhclxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy50b29sYmFyJywgW1xuICAnbWF0ZXJpYWwuY29yZScsXG4gICdtYXRlcmlhbC5jb21wb25lbnRzLmNvbnRlbnQnXG5dKVxuICAuZGlyZWN0aXZlKCdtZFRvb2xiYXInLCBtZFRvb2xiYXJEaXJlY3RpdmUpO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG1kVG9vbGJhclxuICogQG1vZHVsZSBtYXRlcmlhbC5jb21wb25lbnRzLnRvb2xiYXJcbiAqIEByZXN0cmljdCBFXG4gKiBAZGVzY3JpcHRpb25cbiAqIGBtZC10b29sYmFyYCBpcyB1c2VkIHRvIHBsYWNlIGEgdG9vbGJhciBpbiB5b3VyIGFwcC5cbiAqXG4gKiBUb29sYmFycyBhcmUgdXN1YWxseSB1c2VkIGFib3ZlIGEgY29udGVudCBhcmVhIHRvIGRpc3BsYXkgdGhlIHRpdGxlIG9mIHRoZVxuICogY3VycmVudCBwYWdlLCBhbmQgc2hvdyByZWxldmFudCBhY3Rpb24gYnV0dG9ucyBmb3IgdGhhdCBwYWdlLlxuICpcbiAqIFlvdSBjYW4gY2hhbmdlIHRoZSBoZWlnaHQgb2YgdGhlIHRvb2xiYXIgYnkgYWRkaW5nIGVpdGhlciB0aGVcbiAqIGBtZC1tZWRpdW0tdGFsbGAgb3IgYG1kLXRhbGxgIGNsYXNzIHRvIHRoZSB0b29sYmFyLlxuICpcbiAqIEB1c2FnZVxuICogPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqIDxkaXYgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWZpbGw+XG4gKiAgIDxtZC10b29sYmFyPlxuICpcbiAqICAgICA8ZGl2IGNsYXNzPVwibWQtdG9vbGJhci10b29sc1wiPlxuICogICAgICAgPHNwYW4+TXkgQXBwJ3MgVGl0bGU8L3NwYW4+XG4gKlxuICogICAgICAgPCEtLSBmaWxsIHVwIHRoZSBzcGFjZSBiZXR3ZWVuIGxlZnQgYW5kIHJpZ2h0IGFyZWEgLS0+XG4gKiAgICAgICA8c3BhbiBmbGV4Pjwvc3Bhbj5cbiAqXG4gKiAgICAgICA8bWQtYnV0dG9uPlxuICogICAgICAgICBSaWdodCBCYXIgQnV0dG9uXG4gKiAgICAgICA8L21kLWJ1dHRvbj5cbiAqICAgICA8L2Rpdj5cbiAqXG4gKiAgIDwvbWQtdG9vbGJhcj5cbiAqICAgPG1kLWNvbnRlbnQ+XG4gKiAgICAgSGVsbG8hXG4gKiAgIDwvbWQtY29udGVudD5cbiAqIDwvZGl2PlxuICogPC9obGpzPlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG1kLXNjcm9sbC1zaHJpbmsgV2hldGhlciB0aGUgaGVhZGVyIHNob3VsZCBzaHJpbmsgYXdheSBhc1xuICogdGhlIHVzZXIgc2Nyb2xscyBkb3duLCBhbmQgcmV2ZWFsIGl0c2VsZiBhcyB0aGUgdXNlciBzY3JvbGxzIHVwLlxuICogTm90ZTogZm9yIHNjcm9sbFNocmluayB0byB3b3JrLCB0aGUgdG9vbGJhciBtdXN0IGJlIGEgc2libGluZyBvZiBhXG4gKiBgbWQtY29udGVudGAgZWxlbWVudCwgcGxhY2VkIGJlZm9yZSBpdC4gU2VlIHRoZSBzY3JvbGwgc2hyaW5rIGRlbW8uXG4gKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyPX0gbWQtc2hyaW5rLXNwZWVkLWZhY3RvciBIb3cgbXVjaCB0byBjaGFuZ2UgdGhlIHNwZWVkIG9mIHRoZSB0b29sYmFyJ3NcbiAqIHNocmlua2luZyBieS4gRm9yIGV4YW1wbGUsIGlmIDAuMjUgaXMgZ2l2ZW4gdGhlbiB0aGUgdG9vbGJhciB3aWxsIHNocmlua1xuICogYXQgb25lIGZvdXJ0aCB0aGUgcmF0ZSBhdCB3aGljaCB0aGUgdXNlciBzY3JvbGxzIGRvd24uIERlZmF1bHQgMC41LlxuICovXG5mdW5jdGlvbiBtZFRvb2xiYXJEaXJlY3RpdmUoJCRyQUYsICRtZENvbnN0YW50LCAkbWRVdGlsLCAkbWRUaGVtaW5nKSB7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIGNvbnRyb2xsZXI6IGFuZ3VsYXIubm9vcCxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgJG1kVGhlbWluZyhlbGVtZW50KTtcblxuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHIubWRTY3JvbGxTaHJpbmspKSB7XG4gICAgICAgIHNldHVwU2Nyb2xsU2hyaW5rKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwU2Nyb2xsU2hyaW5rKCkge1xuICAgICAgICAvLyBDdXJyZW50IFwieVwiIHBvc2l0aW9uIG9mIHNjcm9sbFxuICAgICAgICB2YXIgeSA9IDA7XG4gICAgICAgIC8vIFN0b3JlIHRoZSBsYXN0IHNjcm9sbCB0b3AgcG9zaXRpb25cbiAgICAgICAgdmFyIHByZXZTY3JvbGxUb3AgPSAwO1xuXG4gICAgICAgIHZhciBzaHJpbmtTcGVlZEZhY3RvciA9IGF0dHIubWRTaHJpbmtTcGVlZEZhY3RvciB8fCAwLjU7XG5cbiAgICAgICAgdmFyIHRvb2xiYXJIZWlnaHQ7XG4gICAgICAgIHZhciBjb250ZW50RWxlbWVudDtcblxuICAgICAgICB2YXIgZGVib3VuY2VkQ29udGVudFNjcm9sbCA9ICQkckFGLnRocm90dGxlKG9uQ29udGVudFNjcm9sbCk7XG4gICAgICAgIHZhciBkZWJvdW5jZWRVcGRhdGVIZWlnaHQgPSAkbWRVdGlsLmRlYm91bmNlKHVwZGF0ZVRvb2xiYXJIZWlnaHQsIDUgKiAxMDAwKTtcblxuICAgICAgICAvLyBXYWl0IGZvciAkbWRDb250ZW50TG9hZGVkIGV2ZW50IGZyb20gbWRDb250ZW50IGRpcmVjdGl2ZS5cbiAgICAgICAgLy8gSWYgdGhlIG1kQ29udGVudCBlbGVtZW50IGlzIGEgc2libGluZyBvZiBvdXIgdG9vbGJhciwgaG9vayBpdCB1cFxuICAgICAgICAvLyB0byBzY3JvbGwgZXZlbnRzLlxuICAgICAgICBzY29wZS4kb24oJyRtZENvbnRlbnRMb2FkZWQnLCBvbk1kQ29udGVudExvYWQpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG9uTWRDb250ZW50TG9hZCgkZXZlbnQsIG5ld0NvbnRlbnRFbCkge1xuICAgICAgICAgIC8vIFRvb2xiYXIgYW5kIGNvbnRlbnQgbXVzdCBiZSBzaWJsaW5nc1xuICAgICAgICAgIGlmIChlbGVtZW50LnBhcmVudCgpWzBdID09PSBuZXdDb250ZW50RWwucGFyZW50KClbMF0pIHtcbiAgICAgICAgICAgIC8vIHVuaG9vayBvbGQgY29udGVudCBldmVudCBsaXN0ZW5lciBpZiBleGlzdHNcbiAgICAgICAgICAgIGlmIChjb250ZW50RWxlbWVudCkge1xuICAgICAgICAgICAgICBjb250ZW50RWxlbWVudC5vZmYoJ3Njcm9sbCcsIGRlYm91bmNlZENvbnRlbnRTY3JvbGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXdDb250ZW50RWwub24oJ3Njcm9sbCcsIGRlYm91bmNlZENvbnRlbnRTY3JvbGwpO1xuICAgICAgICAgICAgbmV3Q29udGVudEVsLmF0dHIoJ3Njcm9sbC1zaHJpbmsnLCAndHJ1ZScpO1xuXG4gICAgICAgICAgICBjb250ZW50RWxlbWVudCA9IG5ld0NvbnRlbnRFbDtcbiAgICAgICAgICAgICQkckFGKHVwZGF0ZVRvb2xiYXJIZWlnaHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRvb2xiYXJIZWlnaHQoKSB7XG4gICAgICAgICAgdG9vbGJhckhlaWdodCA9IGVsZW1lbnQucHJvcCgnb2Zmc2V0SGVpZ2h0Jyk7XG4gICAgICAgICAgLy8gQWRkIGEgbmVnYXRpdmUgbWFyZ2luLXRvcCB0aGUgc2l6ZSBvZiB0aGUgdG9vbGJhciB0byB0aGUgY29udGVudCBlbC5cbiAgICAgICAgICAvLyBUaGUgY29udGVudCB3aWxsIHN0YXJ0IHRyYW5zZm9ybWVkIGRvd24gdGhlIHRvb2xiYXJIZWlnaHQgYW1vdW50LFxuICAgICAgICAgIC8vIHNvIGV2ZXJ5dGhpbmcgbG9va3Mgbm9ybWFsLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gQXMgdGhlIHVzZXIgc2Nyb2xscyBkb3duLCB0aGUgY29udGVudCB3aWxsIGJlIHRyYW5zZm9ybWVkIHVwIHNsb3dseVxuICAgICAgICAgIC8vIHRvIHB1dCB0aGUgY29udGVudCB1bmRlcm5lYXRoIHdoZXJlIHRoZSB0b29sYmFyIHdhcy5cbiAgICAgICAgICBjb250ZW50RWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnbWFyZ2luLXRvcCcsXG4gICAgICAgICAgICAoLXRvb2xiYXJIZWlnaHQgKiBzaHJpbmtTcGVlZEZhY3RvcikgKyAncHgnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBvbkNvbnRlbnRTY3JvbGwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9uQ29udGVudFNjcm9sbChlKSB7XG4gICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IGUgPyBlLnRhcmdldC5zY3JvbGxUb3AgOiBwcmV2U2Nyb2xsVG9wO1xuXG4gICAgICAgICAgZGVib3VuY2VkVXBkYXRlSGVpZ2h0KCk7XG5cbiAgICAgICAgICB5ID0gTWF0aC5taW4oXG4gICAgICAgICAgICB0b29sYmFySGVpZ2h0IC8gc2hyaW5rU3BlZWRGYWN0b3IsXG4gICAgICAgICAgICBNYXRoLm1heCgwLCB5ICsgc2Nyb2xsVG9wIC0gcHJldlNjcm9sbFRvcClcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAkbWRDb25zdGFudC5DU1MuVFJBTlNGT1JNLFxuICAgICAgICAgICAgJ3RyYW5zbGF0ZTNkKDAsJyArICgteSAqIHNocmlua1NwZWVkRmFjdG9yKSArICdweCwwKSdcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnRlbnRFbGVtZW50LmNzcyhcbiAgICAgICAgICAgICRtZENvbnN0YW50LkNTUy5UUkFOU0ZPUk0sXG4gICAgICAgICAgICAndHJhbnNsYXRlM2QoMCwnICsgKCh0b29sYmFySGVpZ2h0IC0geSkgKiBzaHJpbmtTcGVlZEZhY3RvcikgKyAncHgsMCknXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHByZXZTY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgfVxuICB9O1xuXG59XG5tZFRvb2xiYXJEaXJlY3RpdmUuJGluamVjdCA9IFtcIiQkckFGXCIsIFwiJG1kQ29uc3RhbnRcIiwgXCIkbWRVdGlsXCIsIFwiJG1kVGhlbWluZ1wiXTtcbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbWF0ZXJpYWwuY29tcG9uZW50cy50b29sdGlwXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb21wb25lbnRzLnRvb2x0aXAnLCBbXG4gICdtYXRlcmlhbC5jb3JlJ1xuXSlcbiAgLmRpcmVjdGl2ZSgnbWRUb29sdGlwJywgTWRUb29sdGlwRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBtZFRvb2x0aXBcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy50b29sdGlwXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRvb2x0aXBzIGFyZSB1c2VkIHRvIGRlc2NyaWJlIGVsZW1lbnRzIHRoYXQgYXJlIGludGVyYWN0aXZlIGFuZCBwcmltYXJpbHkgZ3JhcGhpY2FsIChub3QgdGV4dHVhbCkuXG4gKlxuICogUGxhY2UgYSBgPG1kLXRvb2x0aXA+YCBhcyBhIGNoaWxkIG9mIHRoZSBlbGVtZW50IGl0IGRlc2NyaWJlcy5cbiAqXG4gKiBBIHRvb2x0aXAgd2lsbCBhY3RpdmF0ZSB3aGVuIHRoZSB1c2VyIGZvY3VzZXMsIGhvdmVycyBvdmVyLCBvciB0b3VjaGVzIHRoZSBwYXJlbnQuXG4gKlxuICogQHVzYWdlXG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogPG1kLWljb24gaWNvbj1cIi9pbWcvaWNvbnMvaWNfcGxheV9hcnJvd18yNHB4LnN2Z1wiPlxuICogICA8bWQtdG9vbHRpcD5cbiAqICAgICBQbGF5IE11c2ljXG4gKiAgIDwvbWQtdG9vbHRpcD5cbiAqIDwvbWQtaWNvbj5cbiAqIDwvaGxqcz5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb249fSBtZC12aXNpYmxlIEJvb2xlYW4gYm91bmQgdG8gd2hldGhlciB0aGUgdG9vbHRpcCBpc1xuICogY3VycmVudGx5IHZpc2libGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG1kLWRlbGF5IEhvdyBtYW55IG1pbGxpc2Vjb25kcyB0byB3YWl0IHRvIHNob3cgdGhlIHRvb2x0aXAgYWZ0ZXIgdGhlIHVzZXIgZm9jdXNlcywgaG92ZXJzLCBvciB0b3VjaGVzIHRoZSBwYXJlbnQuIERlZmF1bHRzIHRvIDQwMG1zLlxuICovXG5mdW5jdGlvbiBNZFRvb2x0aXBEaXJlY3RpdmUoJHRpbWVvdXQsICR3aW5kb3csICQkckFGLCAkZG9jdW1lbnQsICRtZFV0aWwsICRtZFRoZW1pbmcsICRyb290RWxlbWVudCkge1xuXG4gIHZhciBUT09MVElQX1NIT1dfREVMQVkgPSA0MDA7XG4gIHZhciBUT09MVElQX1dJTkRPV19FREdFX1NQQUNFID0gODtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZTpcbiAgICAgICc8ZGl2IGNsYXNzPVwibWQtYmFja2dyb3VuZFwiPjwvZGl2PicgK1xuICAgICAgJzxkaXYgY2xhc3M9XCJtZC1jb250ZW50XCIgbmctdHJhbnNjbHVkZT48L2Rpdj4nLFxuICAgIHNjb3BlOiB7XG4gICAgICB2aXNpYmxlOiAnPT9tZFZpc2libGUnLFxuICAgICAgZGVsYXk6ICc9P21kRGVsYXknXG4gICAgfSxcbiAgICBsaW5rOiBwb3N0TGlua1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjb250ZW50Q3RybCkge1xuICAgICRtZFRoZW1pbmcoZWxlbWVudCk7XG4gICAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50KCk7XG5cbiAgICAvLyBMb29rIGZvciB0aGUgbmVhcmVzdCBwYXJlbnQgbWQtY29udGVudCwgc3RvcHBpbmcgYXQgdGhlIHJvb3RFbGVtZW50LlxuICAgIHZhciBjdXJyZW50ID0gZWxlbWVudC5wYXJlbnQoKVswXTtcbiAgICB3aGlsZSAoY3VycmVudCAmJiBjdXJyZW50ICE9PSAkcm9vdEVsZW1lbnRbMF0gJiYgY3VycmVudCAhPT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgaWYgKGN1cnJlbnQudGFnTmFtZSAmJiBjdXJyZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSAnbWQtY29udGVudCcpIGJyZWFrO1xuICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgdmFyIHRvb2x0aXBQYXJlbnQgPSBhbmd1bGFyLmVsZW1lbnQoY3VycmVudCB8fCBkb2N1bWVudC5ib2R5KTtcblxuICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQoYXR0ci5tZERlbGF5KSkge1xuICAgICAgc2NvcGUuZGVsYXkgPSBUT09MVElQX1NIT1dfREVMQVk7XG4gICAgfVxuXG4gICAgLy8gV2Ugd2lsbCByZS1hdHRhY2ggdG9vbHRpcCB3aGVuIHZpc2libGVcbiAgICBlbGVtZW50LmRldGFjaCgpO1xuICAgIGVsZW1lbnQuYXR0cigncm9sZScsICd0b29sdGlwJyk7XG4gICAgZWxlbWVudC5hdHRyKCdpZCcsIGF0dHIuaWQgfHwgKCd0b29sdGlwXycgKyAkbWRVdGlsLm5leHRVaWQoKSkpO1xuXG4gICAgcGFyZW50Lm9uKCdmb2N1cyBtb3VzZWVudGVyIHRvdWNoc3RhcnQnLCBmdW5jdGlvbigpIHtcbiAgICAgIHNldFZpc2libGUodHJ1ZSk7XG4gICAgfSk7XG4gICAgcGFyZW50Lm9uKCdibHVyIG1vdXNlbGVhdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIERvbid0IGhpZGUgdGhlIHRvb2x0aXAgaWYgdGhlIHBhcmVudCBpcyBzdGlsbCBmb2N1c2VkLlxuICAgICAgaWYgKCRkb2N1bWVudFswXS5hY3RpdmVFbGVtZW50ID09PSBwYXJlbnRbMF0pIHJldHVybjtcbiAgICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgc2NvcGUuJHdhdGNoKCd2aXNpYmxlJywgZnVuY3Rpb24oaXNWaXNpYmxlKSB7XG4gICAgICBpZiAoaXNWaXNpYmxlKSBzaG93VG9vbHRpcCgpO1xuICAgICAgZWxzZSBoaWRlVG9vbHRpcCgpO1xuICAgIH0pO1xuXG4gICAgdmFyIGRlYm91bmNlZE9uUmVzaXplID0gJCRyQUYudGhyb3R0bGUoZnVuY3Rpb24gd2luZG93UmVzaXplKCkge1xuICAgICAgLy8gUmVwb3NpdGlvbiBvbiByZXNpemVcbiAgICAgIGlmIChzY29wZS52aXNpYmxlKSBwb3NpdGlvblRvb2x0aXAoKTtcbiAgICB9KTtcbiAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykub24oJ3Jlc2l6ZScsIGRlYm91bmNlZE9uUmVzaXplKTtcblxuICAgIC8vIEJlIHN1cmUgdG8gY29tcGxldGVseSBjbGVhbnVwIHRoZSBlbGVtZW50IG9uIGRlc3Ryb3lcbiAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICBzY29wZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLm9mZigncmVzaXplJywgZGVib3VuY2VkT25SZXNpemUpO1xuICAgIH0pO1xuXG4gICAgLy8gKioqKioqKlxuICAgIC8vIE1ldGhvZHNcbiAgICAvLyAqKioqKioqXG5cbiAgICAvLyBJZiBzZXR0aW5nIHZpc2libGUgdG8gdHJ1ZSwgZGVib3VuY2UgdG8gc2NvcGUuZGVsYXkgbXNcbiAgICAvLyBJZiBzZXR0aW5nIHZpc2libGUgdG8gZmFsc2UgYW5kIG5vIHRpbWVvdXQgaXMgYWN0aXZlLCBpbnN0YW50bHkgaGlkZSB0aGUgdG9vbHRpcC5cbiAgICBmdW5jdGlvbiBzZXRWaXNpYmxlKHZhbHVlKSB7XG4gICAgICBzZXRWaXNpYmxlLnZhbHVlID0gISF2YWx1ZTtcblxuICAgICAgaWYgKCFzZXRWaXNpYmxlLnF1ZXVlZCkge1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBzZXRWaXNpYmxlLnF1ZXVlZCA9IHRydWU7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzY29wZS52aXNpYmxlID0gc2V0VmlzaWJsZS52YWx1ZTtcbiAgICAgICAgICAgIHNldFZpc2libGUucXVldWVkID0gZmFsc2U7XG4gICAgICAgICAgfSwgc2NvcGUuZGVsYXkpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7IHNjb3BlLnZpc2libGUgPSBmYWxzZTsgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93VG9vbHRpcCgpIHtcbiAgICAgIC8vIEluc2VydCB0aGUgZWxlbWVudCBiZWZvcmUgcG9zaXRpb25pbmcgaXQsIHNvIHdlIGNhbiBnZXQgcG9zaXRpb25cbiAgICAgIC8vICh0b29sdGlwIGlzIGhpZGRlbiBieSBkZWZhdWx0KVxuICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnbWQtaGlkZScpO1xuICAgICAgcGFyZW50LmF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknLCBlbGVtZW50LmF0dHIoJ2lkJykpO1xuICAgICAgdG9vbHRpcFBhcmVudC5hcHBlbmQoZWxlbWVudCk7XG5cbiAgICAgIC8vIFdhaXQgdW50aWwgdGhlIGVsZW1lbnQgaGFzIGJlZW4gaW4gdGhlIGRvbSBmb3IgdHdvIGZyYW1lcyBiZWZvcmVcbiAgICAgIC8vIGZhZGluZyBpdCBpbi5cbiAgICAgIC8vIEFkZGl0aW9uYWxseSwgd2UgcG9zaXRpb24gdGhlIHRvb2x0aXAgdHdpY2UgdG8gYXZvaWQgcG9zaXRpb25pbmcgYnVnc1xuICAgICAgcG9zaXRpb25Ub29sdGlwKCk7XG4gICAgICAkJHJBRihmdW5jdGlvbigpIHtcblxuICAgICAgICAkJHJBRihmdW5jdGlvbigpIHtcbiAgICAgICAgICBwb3NpdGlvblRvb2x0aXAoKTtcbiAgICAgICAgICBpZiAoIXNjb3BlLnZpc2libGUpIHJldHVybjtcbiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdtZC1zaG93Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaWRlVG9vbHRpcCgpIHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ21kLXNob3cnKS5hZGRDbGFzcygnbWQtaGlkZScpO1xuICAgICAgcGFyZW50LnJlbW92ZUF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknKTtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoc2NvcGUudmlzaWJsZSkgcmV0dXJuO1xuICAgICAgICBlbGVtZW50LmRldGFjaCgpO1xuICAgICAgfSwgMjAwLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcG9zaXRpb25Ub29sdGlwKCkge1xuICAgICAgdmFyIHRpcFJlY3QgPSAkbWRVdGlsLmVsZW1lbnRSZWN0KGVsZW1lbnQsIHRvb2x0aXBQYXJlbnQpO1xuICAgICAgdmFyIHBhcmVudFJlY3QgPSAkbWRVdGlsLmVsZW1lbnRSZWN0KHBhcmVudCwgdG9vbHRpcFBhcmVudCk7XG5cbiAgICAgIC8vIERlZmF1bHQgdG8gYm90dG9tIHBvc2l0aW9uIGlmIHBvc3NpYmxlXG4gICAgICB2YXIgdGlwRGlyZWN0aW9uID0gJ2JvdHRvbSc7XG4gICAgICB2YXIgbmV3UG9zaXRpb24gPSB7XG4gICAgICAgIGxlZnQ6IHBhcmVudFJlY3QubGVmdCArIHBhcmVudFJlY3Qud2lkdGggLyAyIC0gdGlwUmVjdC53aWR0aCAvIDIsXG4gICAgICAgIHRvcDogcGFyZW50UmVjdC50b3AgKyBwYXJlbnRSZWN0LmhlaWdodFxuICAgICAgfTtcblxuICAgICAgLy8gSWYgZWxlbWVudCBibGVlZHMgb3ZlciBsZWZ0L3JpZ2h0IG9mIHRoZSB3aW5kb3csIHBsYWNlIGl0IG9uIHRoZSBlZGdlIG9mIHRoZSB3aW5kb3cuXG4gICAgICBuZXdQb3NpdGlvbi5sZWZ0ID0gTWF0aC5taW4oXG4gICAgICAgIG5ld1Bvc2l0aW9uLmxlZnQsXG4gICAgICAgIHRvb2x0aXBQYXJlbnQucHJvcCgnc2Nyb2xsV2lkdGgnKSAtIHRpcFJlY3Qud2lkdGggLSBUT09MVElQX1dJTkRPV19FREdFX1NQQUNFXG4gICAgICApO1xuICAgICAgbmV3UG9zaXRpb24ubGVmdCA9IE1hdGgubWF4KG5ld1Bvc2l0aW9uLmxlZnQsIFRPT0xUSVBfV0lORE9XX0VER0VfU1BBQ0UpO1xuXG4gICAgICAvLyBJZiBlbGVtZW50IGJsZWVkcyBvdmVyIHRoZSBib3R0b20gb2YgdGhlIHdpbmRvdywgcGxhY2UgaXQgYWJvdmUgdGhlIHBhcmVudC5cbiAgICAgIGlmIChuZXdQb3NpdGlvbi50b3AgKyB0aXBSZWN0LmhlaWdodCA+IHRvb2x0aXBQYXJlbnQucHJvcCgnc2Nyb2xsSGVpZ2h0JykpIHtcbiAgICAgICAgbmV3UG9zaXRpb24udG9wID0gcGFyZW50UmVjdC50b3AgLSB0aXBSZWN0LmhlaWdodDtcbiAgICAgICAgdGlwRGlyZWN0aW9uID0gJ3RvcCc7XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnQuY3NzKHt0b3A6IG5ld1Bvc2l0aW9uLnRvcCArICdweCcsIGxlZnQ6IG5ld1Bvc2l0aW9uLmxlZnQgKyAncHgnfSk7XG4gICAgICAvLyBUZWxsIHRoZSBDU1MgdGhlIHNpemUgb2YgdGhpcyB0b29sdGlwLCBhcyBhIG11bHRpcGxlIG9mIDMyLlxuICAgICAgZWxlbWVudC5hdHRyKCd3aWR0aC0zMicsIE1hdGguY2VpbCh0aXBSZWN0LndpZHRoIC8gMzIpKTtcbiAgICAgIGVsZW1lbnQuYXR0cignbWQtZGlyZWN0aW9uJywgdGlwRGlyZWN0aW9uKTtcbiAgICB9XG5cbiAgfVxuXG59XG5NZFRvb2x0aXBEaXJlY3RpdmUuJGluamVjdCA9IFtcIiR0aW1lb3V0XCIsIFwiJHdpbmRvd1wiLCBcIiQkckFGXCIsIFwiJGRvY3VtZW50XCIsIFwiJG1kVXRpbFwiLCBcIiRtZFRoZW1pbmdcIiwgXCIkcm9vdEVsZW1lbnRcIl07XG59KSgpO1xuXG4vKiFcbiAqIEFuZ3VsYXIgTWF0ZXJpYWwgRGVzaWduXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9tYXRlcmlhbFxuICogQGxpY2Vuc2UgTUlUXG4gKiB2MC43LjFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG1hdGVyaWFsLmNvbXBvbmVudHMud2hpdGVmcmFtZVxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWF0ZXJpYWwuY29tcG9uZW50cy53aGl0ZWZyYW1lJywgW10pO1xufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDb25kaXRpb25hbGx5IGNvbmZpZ3VyZSBpbmsgYmFyIGFuaW1hdGlvbnMgd2hlbiB0aGVcbiAqIHRhYiBzZWxlY3Rpb24gY2hhbmdlcy4gSWYgYG1kTm9CYXJgIHRoZW4gZG8gbm90IHNob3cgdGhlXG4gKiBiYXIgbm9yIGFuaW1hdGUuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb21wb25lbnRzLnRhYnMnKVxuICAuZGlyZWN0aXZlKCdtZFRhYnNJbmtCYXInLCBNZFRhYklua0RpcmVjdGl2ZSk7XG5cbmZ1bmN0aW9uIE1kVGFiSW5rRGlyZWN0aXZlKCQkckFGKSB7XG5cbiAgdmFyIGxhc3RJbmRleCA9IDA7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6IFsnXj9tZE5vQmFyJywgJ15tZFRhYnMnXSxcbiAgICBsaW5rOiBwb3N0TGlua1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgIHZhciBtZE5vQmFyID0gISFjdHJsc1swXTtcblxuICAgIHZhciB0YWJzQ3RybCA9IGN0cmxzWzFdLFxuICAgICAgICBkZWJvdW5jZWRVcGRhdGVCYXIgPSAkJHJBRi50aHJvdHRsZSh1cGRhdGVCYXIpO1xuXG4gICAgdGFic0N0cmwuaW5rQmFyRWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICBzY29wZS4kb24oJyRtZFRhYnNQYWdpbmF0aW9uQ2hhbmdlZCcsIGRlYm91bmNlZFVwZGF0ZUJhcik7XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVCYXIoKSB7XG4gICAgICB2YXIgc2VsZWN0ZWQgPSB0YWJzQ3RybC5nZXRTZWxlY3RlZEl0ZW0oKTtcbiAgICAgIHZhciBoaWRlSW5rQmFyID0gIXNlbGVjdGVkIHx8IHRhYnNDdHJsLmNvdW50KCkgPCAyIHx8IG1kTm9CYXI7XG5cbiAgICAgIGVsZW1lbnQuY3NzKCdkaXNwbGF5JywgaGlkZUlua0JhciA/ICdub25lJyA6ICdibG9jaycpO1xuXG4gICAgICBpZiAoaGlkZUlua0JhcikgcmV0dXJuO1xuXG4gICAgICBpZiAoc2NvcGUucGFnaW5hdGlvbiAmJiBzY29wZS5wYWdpbmF0aW9uLnRhYkRhdGEpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGFic0N0cmwuZ2V0U2VsZWN0ZWRJbmRleCgpO1xuICAgICAgICB2YXIgZGF0YSA9IHNjb3BlLnBhZ2luYXRpb24udGFiRGF0YS50YWJzW2luZGV4XSB8fCB7IGxlZnQ6IDAsIHJpZ2h0OiAwLCB3aWR0aDogMCB9O1xuICAgICAgICB2YXIgcmlnaHQgPSBlbGVtZW50LnBhcmVudCgpLnByb3AoJ29mZnNldFdpZHRoJykgLSBkYXRhLnJpZ2h0O1xuICAgICAgICB2YXIgY2xhc3NOYW1lcyA9IFsnbWQtdHJhbnNpdGlvbi1sZWZ0JywgJ21kLXRyYW5zaXRpb24tcmlnaHQnLCAnbWQtbm8tdHJhbnNpdGlvbiddO1xuICAgICAgICB2YXIgY2xhc3NJbmRleCA9IGxhc3RJbmRleCA+IGluZGV4ID8gMCA6IGxhc3RJbmRleCA8IGluZGV4ID8gMSA6IDI7XG5cbiAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZXMuam9pbignICcpKVxuICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZXNbY2xhc3NJbmRleF0pXG4gICAgICAgICAgICAuY3NzKHsgbGVmdDogZGF0YS5sZWZ0ICsgJ3B4JywgcmlnaHQ6IHJpZ2h0ICsgJ3B4JyB9KTtcblxuICAgICAgICBsYXN0SW5kZXggPSBpbmRleDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbk1kVGFiSW5rRGlyZWN0aXZlLiRpbmplY3QgPSBbXCIkJHJBRlwiXTtcbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb21wb25lbnRzLnRhYnMnKVxuICAgIC5kaXJlY3RpdmUoJ21kVGFic1BhZ2luYXRpb24nLCBUYWJQYWdpbmF0aW9uRGlyZWN0aXZlKTtcblxuZnVuY3Rpb24gVGFiUGFnaW5hdGlvbkRpcmVjdGl2ZSgkbWRDb25zdGFudCwgJHdpbmRvdywgJCRyQUYsICQkcSwgJHRpbWVvdXQsICRtZE1lZGlhKSB7XG5cbiAgLy8gTXVzdCBtYXRjaCAoMiAqIHdpZHRoIG9mIHBhZ2luYXRvcnMpIGluIHNjc3NcbiAgdmFyIFBBR0lOQVRPUlNfV0lEVEggPSAoOCAqIDQpICogMjtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJ15tZFRhYnMnLFxuICAgIGxpbms6IHBvc3RMaW5rXG4gIH07XG5cbiAgZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIHRhYnNDdHJsKSB7XG5cbiAgICB2YXIgdGFicyA9IGVsZW1lbnRbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21kLXRhYicpO1xuICAgIHZhciBkZWJvdW5jZWRVcGRhdGVQYWdpbmF0aW9uID0gJCRyQUYudGhyb3R0bGUodXBkYXRlUGFnaW5hdGlvbik7XG4gICAgdmFyIHRhYnNQYXJlbnQgPSBlbGVtZW50LmNoaWxkcmVuKCk7XG4gICAgdmFyIGxvY2tlZCA9IGZhbHNlO1xuICAgIHZhciBzdGF0ZSA9IHNjb3BlLnBhZ2luYXRpb24gPSB7XG4gICAgICBwYWdlOiAtMSxcbiAgICAgIGFjdGl2ZTogZmFsc2UsXG4gICAgICBjbGlja05leHQ6IGZ1bmN0aW9uKCkgeyBsb2NrZWQgfHwgdXNlckNoYW5nZVBhZ2UoKzEpOyB9LFxuICAgICAgY2xpY2tQcmV2aW91czogZnVuY3Rpb24oKSB7IGxvY2tlZCB8fCB1c2VyQ2hhbmdlUGFnZSgtMSk7IH1cbiAgICB9O1xuXG4gICAgc2NvcGUuJG9uKCckbWRUYWJzQ2hhbmdlZCcsIGRlYm91bmNlZFVwZGF0ZVBhZ2luYXRpb24pO1xuICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5vbigncmVzaXplJywgZGVib3VuY2VkVXBkYXRlUGFnaW5hdGlvbik7XG5cbiAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykub2ZmKCdyZXNpemUnLCBkZWJvdW5jZWRVcGRhdGVQYWdpbmF0aW9uKTtcbiAgICB9KTtcblxuICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHsgcmV0dXJuIHRhYnNDdHJsLnRhYlRvRm9jdXM7IH0sIG9uVGFiRm9jdXMpO1xuXG4gICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IGZvY3VzIGFuIGVsZW1lbnQgb24gdGhlIG5leHQgcGFnZVxuICAgIC8vIGJlZm9yZSBpdCdzIGluIHZpZXdcbiAgICBmdW5jdGlvbiBvblRhYkZvY3VzKHRhYiwgb2xkVGFiKSB7XG4gICAgICBpZiAoIXRhYikgcmV0dXJuO1xuXG4gICAgICB2YXIgcGFnZUluZGV4ID0gZ2V0UGFnZUZvclRhYih0YWIpO1xuICAgICAgaWYgKCFzdGF0ZS5hY3RpdmUgfHwgcGFnZUluZGV4ID09PSBzdGF0ZS5wYWdlKSB7XG4gICAgICAgIHRhYi5lbGVtZW50LmZvY3VzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBHbyB0byB0aGUgbmV3IHBhZ2UsIHdhaXQgZm9yIHRoZSBwYWdlIHRyYW5zaXRpb24gdG8gZW5kLCB0aGVuIGZvY3VzLlxuICAgICAgICBvbGRUYWIgJiYgb2xkVGFiLmVsZW1lbnQuYmx1cigpO1xuICAgICAgICBzZXRQYWdlKHBhZ2VJbmRleCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBsb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgICB0YWIuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYWxsZWQgd2hlbiBwYWdlIGlzIGNoYW5nZWQgYnkgYSB1c2VyIGFjdGlvbiAoY2xpY2spXG4gICAgZnVuY3Rpb24gdXNlckNoYW5nZVBhZ2UoaW5jcmVtZW50KSB7XG4gICAgICB2YXIgc2l6ZURhdGEgPSBzdGF0ZS50YWJEYXRhO1xuICAgICAgdmFyIG5ld1BhZ2UgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihzaXplRGF0YS5wYWdlcy5sZW5ndGggLSAxLCBzdGF0ZS5wYWdlICsgaW5jcmVtZW50KSk7XG4gICAgICB2YXIgbmV3VGFiSW5kZXggPSBzaXplRGF0YS5wYWdlc1tuZXdQYWdlXVsgaW5jcmVtZW50ID4gMCA/ICdmaXJzdFRhYkluZGV4JyA6ICdsYXN0VGFiSW5kZXgnIF07XG4gICAgICB2YXIgbmV3VGFiID0gdGFic0N0cmwuaXRlbUF0KG5ld1RhYkluZGV4KTtcbiAgICAgIGxvY2tlZCA9IHRydWU7XG4gICAgICBvblRhYkZvY3VzKG5ld1RhYik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlUGFnaW5hdGlvbigpIHtcbiAgICAgIGlmICghZWxlbWVudC5wcm9wKCdvZmZzZXRQYXJlbnQnKSkge1xuICAgICAgICB2YXIgd2F0Y2hlciA9IHdhaXRGb3JWaXNpYmxlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhYnMgPSBlbGVtZW50LmZpbmQoJ21kLXRhYicpO1xuXG4gICAgICBkaXNhYmxlUGFnaW5hdGlvbigpO1xuXG4gICAgICB2YXIgc2l6ZURhdGEgPSBzdGF0ZS50YWJEYXRhID0gY2FsY3VsYXRlVGFiRGF0YSgpO1xuICAgICAgdmFyIG5lZWRQYWdpbmF0aW9uID0gc3RhdGUuYWN0aXZlID0gc2l6ZURhdGEucGFnZXMubGVuZ3RoID4gMTtcblxuICAgICAgaWYgKG5lZWRQYWdpbmF0aW9uKSB7IGVuYWJsZVBhZ2luYXRpb24oKTsgfVxuXG4gICAgICBzY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uICgpIHsgc2NvcGUuJGJyb2FkY2FzdCgnJG1kVGFic1BhZ2luYXRpb25DaGFuZ2VkJyk7IH0pO1xuXG4gICAgICBmdW5jdGlvbiBlbmFibGVQYWdpbmF0aW9uKCkge1xuICAgICAgICB0YWJzUGFyZW50LmNzcygnd2lkdGgnLCAnOTk5OXB4Jyk7XG5cbiAgICAgICAgLy8tLSBhcHBseSBmaWxsZXIgbWFyZ2luc1xuICAgICAgICBhbmd1bGFyLmZvckVhY2goc2l6ZURhdGEudGFicywgZnVuY3Rpb24gKHRhYikge1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCh0YWIuZWxlbWVudCkuY3NzKCdtYXJnaW4tbGVmdCcsIHRhYi5maWxsZXIgKyAncHgnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0UGFnZShnZXRQYWdlRm9yVGFiKHRhYnNDdHJsLmdldFNlbGVjdGVkSXRlbSgpKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRpc2FibGVQYWdpbmF0aW9uKCkge1xuICAgICAgICBzbGlkZVRhYkJ1dHRvbnMoMCk7XG4gICAgICAgIHRhYnNQYXJlbnQuY3NzKCd3aWR0aCcsICcnKTtcbiAgICAgICAgdGFicy5jc3MoJ3dpZHRoJywgJycpO1xuICAgICAgICB0YWJzLmNzcygnbWFyZ2luLWxlZnQnLCAnJyk7XG4gICAgICAgIHN0YXRlLnBhZ2UgPSBudWxsO1xuICAgICAgICBzdGF0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gd2FpdEZvclZpc2libGUoKSB7XG4gICAgICAgIHJldHVybiB3YXRjaGVyIHx8IHNjb3BlLiR3YXRjaChcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50WzBdLm9mZnNldFBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbih3YXRjaGVyKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXRjaGVyKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBkZWJvdW5jZWRVcGRhdGVQYWdpbmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICB3YXRjaGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sIDAsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzbGlkZVRhYkJ1dHRvbnMoeCkge1xuICAgICAgaWYgKHRhYnNDdHJsLnBhZ2luZ09mZnNldCA9PT0geCkge1xuICAgICAgICAvLyBSZXNvbHZlIGluc3RhbnRseSBpZiBubyBjaGFuZ2VcbiAgICAgICAgcmV0dXJuICQkcS53aGVuKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBkZWZlcnJlZCA9ICQkcS5kZWZlcigpO1xuXG4gICAgICB0YWJzQ3RybC4kJHBhZ2luZ09mZnNldCA9IHg7XG4gICAgICB0YWJzUGFyZW50LmNzcygkbWRDb25zdGFudC5DU1MuVFJBTlNGT1JNLCAndHJhbnNsYXRlM2QoJyArIHggKyAncHgsMCwwKScpO1xuICAgICAgdGFic1BhcmVudC5vbigkbWRDb25zdGFudC5DU1MuVFJBTlNJVElPTkVORCwgb25UYWJzUGFyZW50VHJhbnNpdGlvbkVuZCk7XG5cbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICBmdW5jdGlvbiBvblRhYnNQYXJlbnRUcmFuc2l0aW9uRW5kKGV2KSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIGV2ZW50IGRpZG4ndCBidWJibGUgdXAgZnJvbSBhbiBhbmltYXRpb24gaW4gYSBjaGlsZCBlbGVtZW50LlxuICAgICAgICBpZiAoZXYudGFyZ2V0ID09PSB0YWJzUGFyZW50WzBdKSB7XG4gICAgICAgICAgdGFic1BhcmVudC5vZmYoJG1kQ29uc3RhbnQuQ1NTLlRSQU5TSVRJT05FTkQsIG9uVGFic1BhcmVudFRyYW5zaXRpb25FbmQpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3VsZFN0cmV0Y2hUYWJzKCkge1xuICAgICAgc3dpdGNoIChzY29wZS5zdHJldGNoVGFicykge1xuICAgICAgICBjYXNlICduZXZlcic6ICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNhc2UgJ2Fsd2F5cyc6IHJldHVybiB0cnVlO1xuICAgICAgICBkZWZhdWx0OiAgICAgICByZXR1cm4gJG1kTWVkaWEoJ3NtJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlVGFiRGF0YShub0FkanVzdCkge1xuICAgICAgdmFyIGNsaWVudFdpZHRoID0gZWxlbWVudC5wYXJlbnQoKS5wcm9wKCdvZmZzZXRXaWR0aCcpO1xuICAgICAgdmFyIHRhYnNXaWR0aCA9IGNsaWVudFdpZHRoIC0gUEFHSU5BVE9SU19XSURUSCAtIDE7XG4gICAgICB2YXIgJHRhYnMgPSBhbmd1bGFyLmVsZW1lbnQodGFicyk7XG4gICAgICB2YXIgdG90YWxXaWR0aCA9IDA7XG4gICAgICB2YXIgbWF4ID0gMDtcbiAgICAgIHZhciB0YWJEYXRhID0gW107XG4gICAgICB2YXIgcGFnZXMgPSBbXTtcbiAgICAgIHZhciBjdXJyZW50UGFnZTtcblxuICAgICAgJHRhYnMuY3NzKCdtYXgtd2lkdGgnLCAnJyk7XG4gICAgICBhbmd1bGFyLmZvckVhY2godGFicywgZnVuY3Rpb24gKHRhYiwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHRhYldpZHRoID0gTWF0aC5taW4odGFic1dpZHRoLCB0YWIub2Zmc2V0V2lkdGgpO1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICBlbGVtZW50OiB0YWIsXG4gICAgICAgICAgbGVmdDogdG90YWxXaWR0aCxcbiAgICAgICAgICB3aWR0aDogdGFiV2lkdGgsXG4gICAgICAgICAgcmlnaHQ6IHRvdGFsV2lkdGggKyB0YWJXaWR0aCxcbiAgICAgICAgICBmaWxsZXI6IDBcbiAgICAgICAgfTtcblxuICAgICAgICAvLy0tIFRoaXMgY2FsY3VsYXRlcyB0aGUgcGFnZSBmb3IgZWFjaCB0YWIuICBUaGUgZmlyc3QgcGFnZSB3aWxsIHVzZSB0aGUgY2xpZW50V2lkdGgsIHdoaWNoXG4gICAgICAgIC8vICAgZG9lcyBub3QgZmFjdG9yIGluIHRoZSBwYWdpbmF0aW9uIGl0ZW1zLiAgQWZ0ZXIgdGhlIGZpcnN0IHBhZ2UsIHRhYnNXaWR0aCBpcyB1c2VkXG4gICAgICAgIC8vICAgYmVjYXVzZSBhdCB0aGlzIHBvaW50LCB3ZSBrbm93IHRoYXQgdGhlIHBhZ2luYXRpb24gYnV0dG9ucyB3aWxsIGJlIHNob3duLlxuICAgICAgICBkYXRhLnBhZ2UgPSBNYXRoLmNlaWwoZGF0YS5yaWdodCAvICggcGFnZXMubGVuZ3RoID09PSAxICYmIGluZGV4ID09PSB0YWJzLmxlbmd0aCAtIDEgPyBjbGllbnRXaWR0aCA6IHRhYnNXaWR0aCApKSAtIDE7XG5cbiAgICAgICAgaWYgKGRhdGEucGFnZSA+PSBwYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICBkYXRhLmZpbGxlciA9ICh0YWJzV2lkdGggKiBkYXRhLnBhZ2UpIC0gZGF0YS5sZWZ0O1xuICAgICAgICAgIGRhdGEucmlnaHQgKz0gZGF0YS5maWxsZXI7XG4gICAgICAgICAgZGF0YS5sZWZ0ICs9IGRhdGEuZmlsbGVyO1xuICAgICAgICAgIGN1cnJlbnRQYWdlID0ge1xuICAgICAgICAgICAgbGVmdDogZGF0YS5sZWZ0LFxuICAgICAgICAgICAgZmlyc3RUYWJJbmRleDogaW5kZXgsXG4gICAgICAgICAgICBsYXN0VGFiSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgdGFiczogWyBkYXRhIF1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHBhZ2VzLnB1c2goY3VycmVudFBhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRQYWdlLmxhc3RUYWJJbmRleCA9IGluZGV4O1xuICAgICAgICAgIGN1cnJlbnRQYWdlLnRhYnMucHVzaChkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0b3RhbFdpZHRoID0gZGF0YS5yaWdodDtcbiAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCB0YWJXaWR0aCk7XG4gICAgICAgIHRhYkRhdGEucHVzaChkYXRhKTtcbiAgICAgIH0pO1xuICAgICAgJHRhYnMuY3NzKCdtYXgtd2lkdGgnLCB0YWJzV2lkdGggKyAncHgnKTtcblxuICAgICAgaWYgKCFub0FkanVzdCAmJiBzaG91bGRTdHJldGNoVGFicygpKSB7XG4gICAgICAgIHJldHVybiBhZGp1c3RGb3JTdHJldGNoZWRUYWJzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHdpZHRoOiB0b3RhbFdpZHRoLFxuICAgICAgICAgIG1heDogbWF4LFxuICAgICAgICAgIHRhYnM6IHRhYkRhdGEsXG4gICAgICAgICAgcGFnZXM6IHBhZ2VzLFxuICAgICAgICAgIHRhYkVsZW1lbnRzOiB0YWJzXG4gICAgICAgIH07XG4gICAgICB9XG5cblxuICAgICAgZnVuY3Rpb24gYWRqdXN0Rm9yU3RyZXRjaGVkVGFicygpIHtcbiAgICAgICAgdmFyIGNhbnZhc1dpZHRoID0gcGFnZXMubGVuZ3RoID09PSAxID8gY2xpZW50V2lkdGggOiB0YWJzV2lkdGg7XG4gICAgICAgIHZhciB0YWJzUGVyUGFnZSA9IE1hdGgubWluKE1hdGguZmxvb3IoY2FudmFzV2lkdGggLyBtYXgpLCB0YWJzLmxlbmd0aCk7XG4gICAgICAgIHZhciB0YWJXaWR0aCAgICA9IE1hdGguZmxvb3IoY2FudmFzV2lkdGggLyB0YWJzUGVyUGFnZSk7XG4gICAgICAgICR0YWJzLmNzcygnd2lkdGgnLCB0YWJXaWR0aCArICdweCcpO1xuICAgICAgICByZXR1cm4gY2FsY3VsYXRlVGFiRGF0YSh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQYWdlRm9yVGFiKHRhYikge1xuICAgICAgdmFyIHRhYkluZGV4ID0gdGFic0N0cmwuaW5kZXhPZih0YWIpO1xuICAgICAgaWYgKHRhYkluZGV4ID09PSAtMSkgcmV0dXJuIDA7XG5cbiAgICAgIHZhciBzaXplRGF0YSA9IHN0YXRlLnRhYkRhdGE7XG5cbiAgICAgIHJldHVybiBzaXplRGF0YSA/IHNpemVEYXRhLnRhYnNbdGFiSW5kZXhdLnBhZ2UgOiAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFBhZ2UocGFnZSkge1xuICAgICAgaWYgKHBhZ2UgPT09IHN0YXRlLnBhZ2UpIHJldHVybjtcblxuICAgICAgdmFyIGxhc3RQYWdlID0gc3RhdGUudGFiRGF0YS5wYWdlcy5sZW5ndGggLSAxO1xuXG4gICAgICBpZiAocGFnZSA8IDApIHBhZ2UgPSAwO1xuICAgICAgaWYgKHBhZ2UgPiBsYXN0UGFnZSkgcGFnZSA9IGxhc3RQYWdlO1xuXG4gICAgICBzdGF0ZS5oYXNQcmV2ID0gcGFnZSA+IDA7XG4gICAgICBzdGF0ZS5oYXNOZXh0ID0gcGFnZSA8IGxhc3RQYWdlO1xuXG4gICAgICBzdGF0ZS5wYWdlID0gcGFnZTtcblxuICAgICAgc2NvcGUuJGJyb2FkY2FzdCgnJG1kVGFic1BhZ2luYXRpb25DaGFuZ2VkJyk7XG5cbiAgICAgIHJldHVybiBzbGlkZVRhYkJ1dHRvbnMoLXN0YXRlLnRhYkRhdGEucGFnZXNbcGFnZV0ubGVmdCk7XG4gICAgfVxuICB9XG5cbn1cblRhYlBhZ2luYXRpb25EaXJlY3RpdmUuJGluamVjdCA9IFtcIiRtZENvbnN0YW50XCIsIFwiJHdpbmRvd1wiLCBcIiQkckFGXCIsIFwiJCRxXCIsIFwiJHRpbWVvdXRcIiwgXCIkbWRNZWRpYVwiXTtcbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cblxuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMudGFicycpXG4gIC5jb250cm9sbGVyKCckbWRUYWInLCBUYWJJdGVtQ29udHJvbGxlcik7XG5cbmZ1bmN0aW9uIFRhYkl0ZW1Db250cm9sbGVyKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJGNvbXBpbGUsICRhbmltYXRlLCAkbWRVdGlsLCAkcGFyc2UsICR0aW1lb3V0KSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHRhYnNDdHJsID0gJGVsZW1lbnQuY29udHJvbGxlcignbWRUYWJzJyk7XG5cbiAgLy8gUHJvcGVydGllc1xuICBzZWxmLmNvbnRlbnRDb250YWluZXIgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJtZC10YWItY29udGVudCBuZy1oaWRlXCI+Jyk7XG4gIHNlbGYuZWxlbWVudCA9ICRlbGVtZW50O1xuXG4gIC8vIE1ldGhvZHNcbiAgc2VsZi5pc0Rpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgc2VsZi5vbkFkZCA9IG9uQWRkO1xuICBzZWxmLm9uUmVtb3ZlID0gb25SZW1vdmU7XG4gIHNlbGYub25TZWxlY3QgPSBvblNlbGVjdDtcbiAgc2VsZi5vbkRlc2VsZWN0ID0gb25EZXNlbGVjdDtcblxuICB2YXIgZGlzYWJsZWRQYXJzZWQgPSAkcGFyc2UoJGF0dHJzLm5nRGlzYWJsZWQpO1xuICBmdW5jdGlvbiBpc0Rpc2FibGVkKCkge1xuICAgIHJldHVybiBkaXNhYmxlZFBhcnNlZCgkc2NvcGUuJHBhcmVudCk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBBZGQgdGhlIHRhYidzIGNvbnRlbnQgdG8gdGhlIERPTSBjb250YWluZXIgYXJlYSBpbiB0aGUgdGFicyxcbiAgICogQHBhcmFtIGNvbnRlbnRBcmVhIHRoZSBjb250ZW50QXJlYSB0byBhZGQgdGhlIGNvbnRlbnQgb2YgdGhlIHRhYiB0b1xuICAgKi9cbiAgZnVuY3Rpb24gb25BZGQoY29udGVudEFyZWEsIHNob3VsZERpc2Nvbm5lY3RTY29wZSkge1xuICAgIGlmIChzZWxmLmNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICBzZWxmLmNvbnRlbnRDb250YWluZXIuYXBwZW5kKHNlbGYuY29udGVudCk7XG4gICAgICBzZWxmLmNvbnRlbnRTY29wZSA9ICRzY29wZS4kcGFyZW50LiRuZXcoKTtcbiAgICAgIGNvbnRlbnRBcmVhLmFwcGVuZChzZWxmLmNvbnRlbnRDb250YWluZXIpO1xuXG4gICAgICAkY29tcGlsZShzZWxmLmNvbnRlbnRDb250YWluZXIpKHNlbGYuY29udGVudFNjb3BlKTtcbiAgICAgIGlmIChzaG91bGREaXNjb25uZWN0U2NvcGUgPT09IHRydWUpIHtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRtZFV0aWwuZGlzY29ubmVjdFNjb3BlKHNlbGYuY29udGVudFNjb3BlKTtcbiAgICAgICAgfSwgMCwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgICRhbmltYXRlLmxlYXZlKHNlbGYuY29udGVudENvbnRhaW5lcikudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuY29udGVudFNjb3BlICYmIHNlbGYuY29udGVudFNjb3BlLiRkZXN0cm95KCk7XG4gICAgICBzZWxmLmNvbnRlbnRTY29wZSA9IG51bGw7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGVBbmltYXRpb25DbGFzcyhyaWdodFRvTGVmdCkge1xuICAgIHNlbGYuY29udGVudENvbnRhaW5lcltyaWdodFRvTGVmdCA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXSgnbWQtdHJhbnNpdGlvbi1ydGwnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU2VsZWN0KHJpZ2h0VG9MZWZ0KSB7XG4gICAgLy8gUmVzdW1lIHdhdGNoZXJzIGFuZCBldmVudHMgZmlyaW5nIHdoZW4gdGFiIGlzIHNlbGVjdGVkXG4gICAgJG1kVXRpbC5yZWNvbm5lY3RTY29wZShzZWxmLmNvbnRlbnRTY29wZSk7XG5cbiAgICAkZWxlbWVudFxuICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKVxuICAgICAgLmF0dHIoe1xuICAgICAgICAnYXJpYS1zZWxlY3RlZCc6IHRydWUsXG4gICAgICAgICd0YWJJbmRleCc6IDBcbiAgICAgIH0pXG4gICAgICAub24oJyRtZC5zd2lwZWxlZnQgJG1kLnN3aXBlcmlnaHQnLCBvblN3aXBlKTtcblxuICAgIHRvZ2dsZUFuaW1hdGlvbkNsYXNzKHJpZ2h0VG9MZWZ0KTtcbiAgICAkYW5pbWF0ZS5yZW1vdmVDbGFzcyhzZWxmLmNvbnRlbnRDb250YWluZXIsICduZy1oaWRlJyk7XG5cbiAgICAkc2NvcGUub25TZWxlY3QoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRGVzZWxlY3QocmlnaHRUb0xlZnQpIHtcbiAgICAvLyBTdG9wIHdhdGNoZXJzICYgZXZlbnRzIGZyb20gZmlyaW5nIHdoaWxlIHRhYiBpcyBkZXNlbGVjdGVkXG4gICAgJG1kVXRpbC5kaXNjb25uZWN0U2NvcGUoc2VsZi5jb250ZW50U2NvcGUpO1xuXG4gICAgJGVsZW1lbnRcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgIC5hdHRyKHtcbiAgICAgICAgJ2FyaWEtc2VsZWN0ZWQnOiBmYWxzZSxcbiAgICAgICAgJ3RhYkluZGV4JzogLTFcbiAgICAgIH0pXG4gICAgICAub2ZmKCckbWQuc3dpcGVsZWZ0ICRtZC5zd2lwZXJpZ2h0Jywgb25Td2lwZSk7XG5cbiAgICB0b2dnbGVBbmltYXRpb25DbGFzcyhyaWdodFRvTGVmdCk7XG4gICAgJGFuaW1hdGUuYWRkQ2xhc3Moc2VsZi5jb250ZW50Q29udGFpbmVyLCAnbmctaGlkZScpO1xuXG4gICAgJHNjb3BlLm9uRGVzZWxlY3QoKTtcbiAgfVxuXG4gIC8vLy8vIFByaXZhdGUgZnVuY3Rpb25zXG5cbiAgZnVuY3Rpb24gb25Td2lwZShldikge1xuICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoL2xlZnQvLnRlc3QoZXYudHlwZSkpIHtcbiAgICAgICAgdGFic0N0cmwuc2VsZWN0KHRhYnNDdHJsLm5leHQoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWJzQ3RybC5zZWxlY3QodGFic0N0cmwucHJldmlvdXMoKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiBcblxufVxuVGFiSXRlbUNvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRlbGVtZW50XCIsIFwiJGF0dHJzXCIsIFwiJGNvbXBpbGVcIiwgXCIkYW5pbWF0ZVwiLCBcIiRtZFV0aWxcIiwgXCIkcGFyc2VcIiwgXCIkdGltZW91dFwiXTtcblxufSkoKTtcblxuLyohXG4gKiBBbmd1bGFyIE1hdGVyaWFsIERlc2lnblxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWxcbiAqIEBsaWNlbnNlIE1JVFxuICogdjAuNy4xXG4gKi9cbihmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ21hdGVyaWFsLmNvbXBvbmVudHMudGFicycpXG4gIC5kaXJlY3RpdmUoJ21kVGFiJywgTWRUYWJEaXJlY3RpdmUpO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG1kVGFiXG4gKiBAbW9kdWxlIG1hdGVyaWFsLmNvbXBvbmVudHMudGFic1xuICpcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgPG1kLXRhYj5gIGlzIHRoZSBuZXN0ZWQgZGlyZWN0aXZlIHVzZWQgW3dpdGhpbiBgPG1kLXRhYnM+YF0gdG8gc3BlY2lmeSBlYWNoIHRhYiB3aXRoIGEgKipsYWJlbCoqIGFuZCBvcHRpb25hbCAqdmlldyBjb250ZW50Ki5cbiAqXG4gKiBJZiB0aGUgYGxhYmVsYCBhdHRyaWJ1dGUgaXMgbm90IHNwZWNpZmllZCwgdGhlbiBhbiBvcHRpb25hbCBgPG1kLXRhYi1sYWJlbD5gIHRhZyBjYW4gYmUgdXNlZCB0byBzcGVjaWZ5IG1vcmVcbiAqIGNvbXBsZXggdGFiIGhlYWRlciBtYXJrdXAuIElmIG5laXRoZXIgdGhlICoqbGFiZWwqKiBub3IgdGhlICoqbWQtdGFiLWxhYmVsKiogYXJlIHNwZWNpZmllZCwgdGhlbiB0aGUgbmVzdGVkXG4gKiBtYXJrdXAgb2YgdGhlIGA8bWQtdGFiPmAgaXMgdXNlZCBhcyB0aGUgdGFiIGhlYWRlciBtYXJrdXAuXG4gKlxuICogSWYgYSB0YWIgKipsYWJlbCoqIGhhcyBiZWVuIGlkZW50aWZpZWQsIHRoZW4gYW55ICoqbm9uLSoqYDxtZC10YWItbGFiZWw+YCBtYXJrdXBcbiAqIHdpbGwgYmUgY29uc2lkZXJlZCB0YWIgY29udGVudCBhbmQgd2lsbCBiZSB0cmFuc2NsdWRlZCB0byB0aGUgaW50ZXJuYWwgYDxkaXYgY2xhc3M9XCJtZC10YWJzLWNvbnRlbnRcIj5gIGNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIGNvbnRhaW5lciBpcyB1c2VkIGJ5IHRoZSBUYWJzQ29udHJvbGxlciB0byBzaG93L2hpZGUgdGhlIGFjdGl2ZSB0YWIncyBjb250ZW50IHZpZXcuIFRoaXMgc3luY2hyb25pemF0aW9uIGlzXG4gKiBhdXRvbWF0aWNhbGx5IG1hbmFnZWQgYnkgdGhlIGludGVybmFsIFRhYnNDb250cm9sbGVyIHdoZW5ldmVyIHRoZSB0YWIgc2VsZWN0aW9uIGNoYW5nZXMuIFNlbGVjdGlvbiBjaGFuZ2VzIGNhblxuICogYmUgaW5pdGlhdGVkIHZpYSBkYXRhIGJpbmRpbmcgY2hhbmdlcywgcHJvZ3JhbW1hdGljIGludm9jYXRpb24sIG9yIHVzZXIgZ2VzdHVyZXMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmc9fSBsYWJlbCBPcHRpb25hbCBhdHRyaWJ1dGUgdG8gc3BlY2lmeSBhIHNpbXBsZSBzdHJpbmcgYXMgdGhlIHRhYiBsYWJlbFxuICogQHBhcmFtIHtib29sZWFuPX0gbWQtYWN0aXZlIFdoZW4gZXZhbHV0ZWluZyB0byB0cnVlLCBzZWxlY3RzIHRoZSB0YWIuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBkaXNhYmxlZCBJZiBwcmVzZW50LCBkaXNhYmxlZCB0YWIgc2VsZWN0aW9uLlxuICogQHBhcmFtIHtleHByZXNzaW9uPX0gbWQtb24tZGVzZWxlY3QgRXhwcmVzc2lvbiB0byBiZSBldmFsdWF0ZWQgYWZ0ZXIgdGhlIHRhYiBoYXMgYmVlbiBkZS1zZWxlY3RlZC5cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG1kLW9uLXNlbGVjdCBFeHByZXNzaW9uIHRvIGJlIGV2YWx1YXRlZCBhZnRlciB0aGUgdGFiIGhhcyBiZWVuIHNlbGVjdGVkLlxuICpcbiAqXG4gKiBAdXNhZ2VcbiAqXG4gKiA8aGxqcyBsYW5nPVwiaHRtbFwiPlxuICogPG1kLXRhYiBsYWJlbD1cIlwiIGRpc2FibGVkPVwiXCIgbWQtb24tc2VsZWN0PVwiXCIgbWQtb24tZGVzZWxlY3Q9XCJcIiA+XG4gKiAgIDxoMz5NeSBUYWIgY29udGVudDwvaDM+XG4gKiA8L21kLXRhYj5cbiAqXG4gKiA8bWQtdGFiID5cbiAqICAgPG1kLXRhYi1sYWJlbD5cbiAqICAgICA8aDM+TXkgVGFiIGNvbnRlbnQ8L2gzPlxuICogICA8L21kLXRhYi1sYWJlbD5cbiAqICAgPHA+XG4gKiAgICAgU2VkIHV0IHBlcnNwaWNpYXRpcyB1bmRlIG9tbmlzIGlzdGUgbmF0dXMgZXJyb3Igc2l0IHZvbHVwdGF0ZW0gYWNjdXNhbnRpdW0gZG9sb3JlbXF1ZSBsYXVkYW50aXVtLFxuICogICAgIHRvdGFtIHJlbSBhcGVyaWFtLCBlYXF1ZSBpcHNhIHF1YWUgYWIgaWxsbyBpbnZlbnRvcmUgdmVyaXRhdGlzIGV0IHF1YXNpIGFyY2hpdGVjdG8gYmVhdGFlIHZpdGFlXG4gKiAgICAgZGljdGEgc3VudCBleHBsaWNhYm8uIE5lbW8gZW5pbSBpcHNhbSB2b2x1cHRhdGVtIHF1aWEgdm9sdXB0YXMgc2l0IGFzcGVybmF0dXIgYXV0IG9kaXQgYXV0IGZ1Z2l0LFxuICogICAgIHNlZCBxdWlhIGNvbnNlcXV1bnR1ciBtYWduaSBkb2xvcmVzIGVvcyBxdWkgcmF0aW9uZSB2b2x1cHRhdGVtIHNlcXVpIG5lc2NpdW50LlxuICogICA8L3A+XG4gKiA8L21kLXRhYj5cbiAqIDwvaGxqcz5cbiAqXG4gKi9cbmZ1bmN0aW9uIE1kVGFiRGlyZWN0aXZlKCRtZElua1JpcHBsZSwgJGNvbXBpbGUsICRtZFV0aWwsICRtZENvbnN0YW50LCAkdGltZW91dCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogWydtZFRhYicsICdebWRUYWJzJ10sXG4gICAgY29udHJvbGxlcjogJyRtZFRhYicsXG4gICAgc2NvcGU6IHtcbiAgICAgIG9uU2VsZWN0OiAnJm1kT25TZWxlY3QnLFxuICAgICAgb25EZXNlbGVjdDogJyZtZE9uRGVzZWxlY3QnLFxuICAgICAgbGFiZWw6ICdAJ1xuICAgIH0sXG4gICAgY29tcGlsZTogY29tcGlsZVxuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbXBpbGUoZWxlbWVudCwgYXR0cikge1xuICAgIHZhciB0YWJMYWJlbCA9IGVsZW1lbnQuZmluZCgnbWQtdGFiLWxhYmVsJyk7XG5cbiAgICBpZiAodGFiTGFiZWwubGVuZ3RoKSB7XG4gICAgICAvLyBJZiBhIHRhYiBsYWJlbCBlbGVtZW50IGlzIGZvdW5kLCByZW1vdmUgaXQgZm9yIGxhdGVyIHJlLXVzZS5cbiAgICAgIHRhYkxhYmVsLnJlbW92ZSgpO1xuXG4gICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzRGVmaW5lZChhdHRyLmxhYmVsKSkge1xuICAgICAgLy8gT3RoZXJ3aXNlLCB0cnkgdG8gdXNlIGF0dHIubGFiZWwgYXMgdGhlIGxhYmVsXG4gICAgICB0YWJMYWJlbCA9IGFuZ3VsYXIuZWxlbWVudCgnPG1kLXRhYi1sYWJlbD4nKS5odG1sKGF0dHIubGFiZWwpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIG5vdGhpbmcgaXMgZm91bmQsIHVzZSB0aGUgdGFiJ3MgY29udGVudCBhcyB0aGUgbGFiZWxcbiAgICAgIHRhYkxhYmVsID0gYW5ndWxhci5lbGVtZW50KCc8bWQtdGFiLWxhYmVsPicpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGVsZW1lbnQuY29udGVudHMoKS5yZW1vdmUoKSk7XG4gICAgfVxuXG4gICAgLy8gRXZlcnl0aGluZyB0aGF0J3MgbGVmdCBhcyBhIGNoaWxkIGlzIHRoZSB0YWIncyBjb250ZW50LlxuICAgIHZhciB0YWJDb250ZW50ID0gZWxlbWVudC5jb250ZW50cygpLnJlbW92ZSgpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuXG4gICAgICB2YXIgdGFiSXRlbUN0cmwgPSBjdHJsc1swXTsgLy8gQ29udHJvbGxlciBmb3IgVEhJUyB0YWJJdGVtQ3RybFxuICAgICAgdmFyIHRhYnNDdHJsID0gY3RybHNbMV07IC8vIENvbnRyb2xsZXIgZm9yIEFMTCB0YWJzXG5cbiAgICAgICR0aW1lb3V0KGVsZW1lbnQuYWRkQ2xhc3MuYmluZChlbGVtZW50LCAnbWQtdGFiLXRoZW1lZCcpLCAwLCBmYWxzZSk7XG5cbiAgICAgIHNjb3BlLiR3YXRjaChcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBhdHRyLmxhYmVsOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHsgJHRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0YWJzQ3RybC5zY29wZS4kYnJvYWRjYXN0KCckbWRUYWJzQ2hhbmdlZCcpOyB9LCAwLCBmYWxzZSk7IH1cbiAgICAgICk7XG5cbiAgICAgIHRyYW5zY2x1ZGVUYWJDb250ZW50KCk7XG4gICAgICBjb25maWd1cmVBcmlhKCk7XG5cbiAgICAgIHZhciBkZXRhY2hSaXBwbGVGbiA9ICRtZElua1JpcHBsZS5hdHRhY2hUYWJCZWhhdmlvcihzY29wZSwgZWxlbWVudCwge1xuICAgICAgICBjb2xvckVsZW1lbnQ6IHRhYnNDdHJsLmlua0JhckVsZW1lbnRcbiAgICAgIH0pO1xuICAgICAgdGFic0N0cmwuYWRkKHRhYkl0ZW1DdHJsKTtcbiAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZGV0YWNoUmlwcGxlRm4oKTtcbiAgICAgICAgdGFic0N0cmwucmVtb3ZlKHRhYkl0ZW1DdHJsKTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vLS0gd2FpdCBmb3IgaXRlbSB0byBiZSByZW1vdmVkIGZyb20gdGhlIGRvbVxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFic0N0cmwuc2NvcGUuJGJyb2FkY2FzdCgnJG1kVGFic0NoYW5nZWQnKTtcbiAgICAgICAgfSwgMCwgZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQoYXR0ci5uZ0NsaWNrKSkge1xuICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGRlZmF1bHRDbGlja0xpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnQub24oJ2tleWRvd24nLCBrZXlkb3duTGlzdGVuZXIpO1xuXG4gICAgICBpZiAoYW5ndWxhci5pc051bWJlcihzY29wZS4kcGFyZW50LiRpbmRleCkpIHtcbiAgICAgICAgd2F0Y2hOZ1JlcGVhdEluZGV4KCk7XG4gICAgICB9XG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoYXR0ci5tZEFjdGl2ZSkpIHtcbiAgICAgICAgd2F0Y2hBY3RpdmVBdHRyaWJ1dGUoKTtcbiAgICAgIH1cbiAgICAgIHdhdGNoRGlzYWJsZWQoKTtcblxuICAgICAgZnVuY3Rpb24gdHJhbnNjbHVkZVRhYkNvbnRlbnQoKSB7XG4gICAgICAgIC8vIENsb25lIHRoZSBsYWJlbCB3ZSBmb3VuZCBlYXJsaWVyLCBhbmQgJGNvbXBpbGUgYW5kIGFwcGVuZCBpdFxuICAgICAgICB2YXIgbGFiZWwgPSB0YWJMYWJlbC5jbG9uZSgpO1xuICAgICAgICBlbGVtZW50LmFwcGVuZChsYWJlbCk7XG4gICAgICAgICRjb21waWxlKGxhYmVsKShzY29wZS4kcGFyZW50KTtcblxuICAgICAgICAvLyBDbG9uZSB0aGUgY29udGVudCB3ZSBmb3VuZCBlYXJsaWVyLCBhbmQgbWFyayBpdCBmb3IgbGF0ZXIgcGxhY2VtZW50IGludG9cbiAgICAgICAgLy8gdGhlIHByb3BlciBjb250ZW50IGFyZWEuXG4gICAgICAgIHRhYkl0ZW1DdHJsLmNvbnRlbnQgPSB0YWJDb250ZW50LmNsb25lKCk7XG4gICAgICB9XG5cbiAgICAgIC8vZGVmYXVsdENsaWNrTGlzdGVuZXIgaXNuJ3QgYXBwbGllZCBpZiB0aGUgdXNlciBwcm92aWRlcyBhbiBuZ0NsaWNrIGV4cHJlc3Npb24uXG4gICAgICBmdW5jdGlvbiBkZWZhdWx0Q2xpY2tMaXN0ZW5lcigpIHtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRhYnNDdHJsLnNlbGVjdCh0YWJJdGVtQ3RybCk7XG4gICAgICAgICAgdGFic0N0cmwuZm9jdXModGFiSXRlbUN0cmwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGtleWRvd25MaXN0ZW5lcihldikge1xuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PSAkbWRDb25zdGFudC5LRVlfQ09ERS5TUEFDRSB8fCBldi5rZXlDb2RlID09ICRtZENvbnN0YW50LktFWV9DT0RFLkVOVEVSICkge1xuICAgICAgICAgIC8vIEZpcmUgdGhlIGNsaWNrIGhhbmRsZXIgdG8gZG8gbm9ybWFsIHNlbGVjdGlvbiBpZiBzcGFjZSBpcyBwcmVzc2VkXG4gICAgICAgICAgZWxlbWVudC50cmlnZ2VySGFuZGxlcignY2xpY2snKTtcbiAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09ICRtZENvbnN0YW50LktFWV9DT0RFLkxFRlRfQVJST1cpIHtcbiAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGFic0N0cmwuZm9jdXModGFic0N0cmwucHJldmlvdXModGFiSXRlbUN0cmwpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09PSAkbWRDb25zdGFudC5LRVlfQ09ERS5SSUdIVF9BUlJPVykge1xuICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0YWJzQ3RybC5mb2N1cyh0YWJzQ3RybC5uZXh0KHRhYkl0ZW1DdHJsKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGFiSXRlbUN0cmwgaXMgcGFydCBvZiBhbiBuZ1JlcGVhdCwgbW92ZSB0aGUgdGFiSXRlbUN0cmwgaW4gb3VyIGludGVybmFsIGFycmF5XG4gICAgICAvLyB3aGVuIGl0cyAkaW5kZXggY2hhbmdlc1xuICAgICAgZnVuY3Rpb24gd2F0Y2hOZ1JlcGVhdEluZGV4KCkge1xuICAgICAgICAvLyBUaGUgdGFiSXRlbUN0cmwgaGFzIGFuIGlzb2xhdGUgc2NvcGUsIHNvIHdlIHdhdGNoIHRoZSAkaW5kZXggb24gdGhlIHBhcmVudC5cbiAgICAgICAgc2NvcGUuJHdhdGNoKCckcGFyZW50LiRpbmRleCcsIGZ1bmN0aW9uICRpbmRleFdhdGNoQWN0aW9uKG5ld0luZGV4KSB7XG4gICAgICAgICAgdGFic0N0cmwubW92ZSh0YWJJdGVtQ3RybCwgbmV3SW5kZXgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gd2F0Y2hBY3RpdmVBdHRyaWJ1dGUoKSB7XG4gICAgICAgIHZhciB1bndhdGNoID0gc2NvcGUuJHBhcmVudC4kd2F0Y2goJyEhKCcgKyBhdHRyLm1kQWN0aXZlICsgJyknLCBhY3RpdmVXYXRjaEFjdGlvbik7XG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCB1bndhdGNoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmVXYXRjaEFjdGlvbihpc0FjdGl2ZSkge1xuICAgICAgICAgIHZhciBpc1NlbGVjdGVkID0gdGFic0N0cmwuZ2V0U2VsZWN0ZWRJdGVtKCkgPT09IHRhYkl0ZW1DdHJsO1xuXG4gICAgICAgICAgaWYgKGlzQWN0aXZlICYmICFpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICB0YWJzQ3RybC5zZWxlY3QodGFiSXRlbUN0cmwpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQWN0aXZlICYmIGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRhYnNDdHJsLmRlc2VsZWN0KHRhYkl0ZW1DdHJsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gd2F0Y2hEaXNhYmxlZCgpIHtcbiAgICAgICAgc2NvcGUuJHdhdGNoKHRhYkl0ZW1DdHJsLmlzRGlzYWJsZWQsIGRpc2FibGVkV2F0Y2hBY3Rpb24pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGRpc2FibGVkV2F0Y2hBY3Rpb24oaXNEaXNhYmxlZCkge1xuICAgICAgICAgIGVsZW1lbnQuYXR0cignYXJpYS1kaXNhYmxlZCcsIGlzRGlzYWJsZWQpO1xuXG4gICAgICAgICAgLy8gQXV0byBzZWxlY3QgYG5leHRgIHRhYiB3aGVuIGRpc2FibGVkXG4gICAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSAodGFic0N0cmwuZ2V0U2VsZWN0ZWRJdGVtKCkgPT09IHRhYkl0ZW1DdHJsKTtcbiAgICAgICAgICBpZiAoaXNTZWxlY3RlZCAmJiBpc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICB0YWJzQ3RybC5zZWxlY3QodGFic0N0cmwubmV4dCgpIHx8IHRhYnNDdHJsLnByZXZpb3VzKCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNvbmZpZ3VyZUFyaWEoKSB7XG4gICAgICAgIC8vIExpbmsgdG9nZXRoZXIgdGhlIGNvbnRlbnQgYXJlYSBhbmQgdGFiSXRlbUN0cmwgd2l0aCBhbiBpZFxuICAgICAgICB2YXIgdGFiSWQgPSBhdHRyLmlkIHx8ICgndGFiXycgKyAkbWRVdGlsLm5leHRVaWQoKSk7XG5cbiAgICAgICAgZWxlbWVudC5hdHRyKHtcbiAgICAgICAgICBpZDogdGFiSWQsXG4gICAgICAgICAgcm9sZTogJ3RhYicsXG4gICAgICAgICAgdGFiSW5kZXg6IC0xIC8vdGhpcyBpcyBhbHNvIHNldCBvbiBzZWxlY3QvZGVzZWxlY3QgaW4gdGFiSXRlbUN0cmxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gT25seSBzZXR1cCB0aGUgY29udGVudENvbnRhaW5lcidzIGFyaWEgYXR0cmlidXRlcyBpZiB0YWIgY29udGVudCBpcyBwcm92aWRlZFxuICAgICAgICBpZiAodGFiQ29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgdGFiQ29udGVudElkID0gJ2NvbnRlbnRfJyArIHRhYklkO1xuICAgICAgICAgIGlmICghZWxlbWVudC5hdHRyKCdhcmlhLWNvbnRyb2xzJykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYXR0cignYXJpYS1jb250cm9scycsIHRhYkNvbnRlbnRJZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRhYkl0ZW1DdHJsLmNvbnRlbnRDb250YWluZXIuYXR0cih7XG4gICAgICAgICAgICBpZDogdGFiQ29udGVudElkLFxuICAgICAgICAgICAgcm9sZTogJ3RhYnBhbmVsJyxcbiAgICAgICAgICAgICdhcmlhLWxhYmVsbGVkYnknOiB0YWJJZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9O1xuXG4gIH1cblxufVxuTWRUYWJEaXJlY3RpdmUuJGluamVjdCA9IFtcIiRtZElua1JpcHBsZVwiLCBcIiRjb21waWxlXCIsIFwiJG1kVXRpbFwiLCBcIiRtZENvbnN0YW50XCIsIFwiJHRpbWVvdXRcIl07XG5cbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb21wb25lbnRzLnRhYnMnKVxuICAuY29udHJvbGxlcignJG1kVGFicycsIE1kVGFic0NvbnRyb2xsZXIpO1xuXG5mdW5jdGlvbiBNZFRhYnNDb250cm9sbGVyKCRzY29wZSwgJGVsZW1lbnQsICRtZFV0aWwsICR0aW1lb3V0KSB7XG5cbiAgdmFyIHRhYnNMaXN0ID0gJG1kVXRpbC5pdGVyYXRvcihbXSwgZmFsc2UpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgLy8gUHJvcGVydGllc1xuICBzZWxmLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gIHNlbGYuc2NvcGUgPSAkc2NvcGU7XG4gIC8vIFRoZSBzZWN0aW9uIGNvbnRhaW5pbmcgdGhlIHRhYiBjb250ZW50ICRlbGVtZW50c1xuICB2YXIgY29udGVudEFyZWEgPSBzZWxmLmNvbnRlbnRBcmVhID0gYW5ndWxhci5lbGVtZW50KCRlbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5tZC10YWJzLWNvbnRlbnQnKSk7XG5cbiAgLy8gTWV0aG9kcyBmcm9tIGl0ZXJhdG9yXG4gIHZhciBpblJhbmdlID0gc2VsZi5pblJhbmdlID0gdGFic0xpc3QuaW5SYW5nZTtcbiAgdmFyIGluZGV4T2YgPSBzZWxmLmluZGV4T2YgPSB0YWJzTGlzdC5pbmRleE9mO1xuICB2YXIgaXRlbUF0ID0gc2VsZi5pdGVtQXQgPSB0YWJzTGlzdC5pdGVtQXQ7XG4gIHNlbGYuY291bnQgPSB0YWJzTGlzdC5jb3VudDtcblxuICBzZWxmLmdldFNlbGVjdGVkSXRlbSA9IGdldFNlbGVjdGVkSXRlbTtcbiAgc2VsZi5nZXRTZWxlY3RlZEluZGV4ID0gZ2V0U2VsZWN0ZWRJbmRleDtcbiAgc2VsZi5hZGQgPSBhZGQ7XG4gIHNlbGYucmVtb3ZlID0gcmVtb3ZlO1xuICBzZWxmLm1vdmUgPSBtb3ZlO1xuICBzZWxmLnNlbGVjdCA9IHNlbGVjdDtcbiAgc2VsZi5mb2N1cyA9IGZvY3VzO1xuICBzZWxmLmRlc2VsZWN0ID0gZGVzZWxlY3Q7XG5cbiAgc2VsZi5uZXh0ID0gbmV4dDtcbiAgc2VsZi5wcmV2aW91cyA9IHByZXZpb3VzO1xuXG4gICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgZGVzZWxlY3QoZ2V0U2VsZWN0ZWRJdGVtKCkpO1xuICAgIGZvciAodmFyIGkgPSB0YWJzTGlzdC5jb3VudCgpIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHJlbW92ZSh0YWJzTGlzdFtpXSwgdHJ1ZSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBHZXQgdGhlIHNlbGVjdGVkIHRhYlxuICBmdW5jdGlvbiBnZXRTZWxlY3RlZEl0ZW0oKSB7XG4gICAgcmV0dXJuIGl0ZW1BdCgkc2NvcGUuc2VsZWN0ZWRJbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTZWxlY3RlZEluZGV4KCkge1xuICAgIHJldHVybiAkc2NvcGUuc2VsZWN0ZWRJbmRleDtcbiAgfVxuXG4gIC8vIEFkZCBhIG5ldyB0YWIuXG4gIC8vIFJldHVybnMgYSBtZXRob2QgdG8gcmVtb3ZlIHRoZSB0YWIgZnJvbSB0aGUgbGlzdC5cbiAgZnVuY3Rpb24gYWRkKHRhYiwgaW5kZXgpIHtcbiAgICB0YWJzTGlzdC5hZGQodGFiLCBpbmRleCk7XG5cbiAgICAvLyBTZWxlY3QgdGhlIG5ldyB0YWIgaWYgd2UgZG9uJ3QgaGF2ZSBhIHNlbGVjdGVkSW5kZXgsIG9yIGlmIHRoZVxuICAgIC8vIHNlbGVjdGVkSW5kZXggd2UndmUgYmVlbiB3YWl0aW5nIGZvciBpcyB0aGlzIHRhYlxuICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQodGFiLmVsZW1lbnQuYXR0cignbWQtYWN0aXZlJykpICYmICgkc2NvcGUuc2VsZWN0ZWRJbmRleCA9PT0gLTEgfHwgIWFuZ3VsYXIuaXNOdW1iZXIoJHNjb3BlLnNlbGVjdGVkSW5kZXgpIHx8XG4gICAgICAgICRzY29wZS5zZWxlY3RlZEluZGV4ID09PSBzZWxmLmluZGV4T2YodGFiKSkpIHtcbiAgICAgIHRhYi5vbkFkZChzZWxmLmNvbnRlbnRBcmVhLCBmYWxzZSk7XG4gICAgICBzZWxmLnNlbGVjdCh0YWIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YWIub25BZGQoc2VsZi5jb250ZW50QXJlYSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLiRicm9hZGNhc3QoJyRtZFRhYnNDaGFuZ2VkJyk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUodGFiLCBub1Jlc2VsZWN0KSB7XG4gICAgaWYgKCF0YWJzTGlzdC5jb250YWlucyh0YWIpKSByZXR1cm47XG4gICAgaWYgKG5vUmVzZWxlY3QpIHJldHVybjtcbiAgICB2YXIgaXNTZWxlY3RlZEl0ZW0gPSBnZXRTZWxlY3RlZEl0ZW0oKSA9PT0gdGFiLFxuICAgICAgICBuZXdUYWIgPSBwcmV2aW91cygpIHx8IG5leHQoKTtcblxuICAgIGRlc2VsZWN0KHRhYik7XG4gICAgdGFic0xpc3QucmVtb3ZlKHRhYik7XG4gICAgdGFiLm9uUmVtb3ZlKCk7XG5cbiAgICAkc2NvcGUuJGJyb2FkY2FzdCgnJG1kVGFic0NoYW5nZWQnKTtcblxuICAgIGlmIChpc1NlbGVjdGVkSXRlbSkgeyBzZWxlY3QobmV3VGFiKTsgfVxuICB9XG5cbiAgLy8gTW92ZSBhIHRhYiAodXNlZCB3aGVuIG5nLXJlcGVhdCBvcmRlciBjaGFuZ2VzKVxuICBmdW5jdGlvbiBtb3ZlKHRhYiwgdG9JbmRleCkge1xuICAgIHZhciBpc1NlbGVjdGVkID0gZ2V0U2VsZWN0ZWRJdGVtKCkgPT09IHRhYjtcblxuICAgIHRhYnNMaXN0LnJlbW92ZSh0YWIpO1xuICAgIHRhYnNMaXN0LmFkZCh0YWIsIHRvSW5kZXgpO1xuICAgIGlmIChpc1NlbGVjdGVkKSBzZWxlY3QodGFiKTtcblxuICAgICRzY29wZS4kYnJvYWRjYXN0KCckbWRUYWJzQ2hhbmdlZCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2VsZWN0KHRhYiwgcmlnaHRUb0xlZnQpIHtcbiAgICBpZiAoIXRhYiB8fCB0YWIuaXNTZWxlY3RlZCB8fCB0YWIuaXNEaXNhYmxlZCgpKSByZXR1cm47XG4gICAgaWYgKCF0YWJzTGlzdC5jb250YWlucyh0YWIpKSByZXR1cm47XG5cbiAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKHJpZ2h0VG9MZWZ0KSkge1xuICAgICAgcmlnaHRUb0xlZnQgPSBpbmRleE9mKHRhYikgPCAkc2NvcGUuc2VsZWN0ZWRJbmRleDtcbiAgICB9XG4gICAgZGVzZWxlY3QoZ2V0U2VsZWN0ZWRJdGVtKCksIHJpZ2h0VG9MZWZ0KTtcblxuICAgICRzY29wZS5zZWxlY3RlZEluZGV4ID0gaW5kZXhPZih0YWIpO1xuICAgIHRhYi5pc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICB0YWIub25TZWxlY3QocmlnaHRUb0xlZnQpO1xuXG4gICAgJHNjb3BlLiRicm9hZGNhc3QoJyRtZFRhYnNDaGFuZ2VkJyk7XG4gIH1cblxuICBmdW5jdGlvbiBmb2N1cyh0YWIpIHtcbiAgICAvLyB0aGlzIHZhcmlhYmxlIGlzIHdhdGNoZWQgYnkgcGFnaW5hdGlvblxuICAgIHNlbGYudGFiVG9Gb2N1cyA9IHRhYjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc2VsZWN0KHRhYiwgcmlnaHRUb0xlZnQpIHtcbiAgICBpZiAoIXRhYiB8fCAhdGFiLmlzU2VsZWN0ZWQpIHJldHVybjtcbiAgICBpZiAoIXRhYnNMaXN0LmNvbnRhaW5zKHRhYikpIHJldHVybjtcblxuICAgICRzY29wZS5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgdGFiLmlzU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICB0YWIub25EZXNlbGVjdChyaWdodFRvTGVmdCk7XG4gIH1cblxuICBmdW5jdGlvbiBuZXh0KHRhYiwgZmlsdGVyRm4pIHtcbiAgICByZXR1cm4gdGFic0xpc3QubmV4dCh0YWIgfHwgZ2V0U2VsZWN0ZWRJdGVtKCksIGZpbHRlckZuIHx8IGlzVGFiRW5hYmxlZCk7XG4gIH1cbiAgZnVuY3Rpb24gcHJldmlvdXModGFiLCBmaWx0ZXJGbikge1xuICAgIHJldHVybiB0YWJzTGlzdC5wcmV2aW91cyh0YWIgfHwgZ2V0U2VsZWN0ZWRJdGVtKCksIGZpbHRlckZuIHx8IGlzVGFiRW5hYmxlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1RhYkVuYWJsZWQodGFiKSB7XG4gICAgcmV0dXJuIHRhYiAmJiAhdGFiLmlzRGlzYWJsZWQoKTtcbiAgfVxuXG59XG5NZFRhYnNDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkZWxlbWVudFwiLCBcIiRtZFV0aWxcIiwgXCIkdGltZW91dFwiXTtcbn0pKCk7XG5cbi8qIVxuICogQW5ndWxhciBNYXRlcmlhbCBEZXNpZ25cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsXG4gKiBAbGljZW5zZSBNSVRcbiAqIHYwLjcuMVxuICovXG4oZnVuY3Rpb24oKSB7XG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdtYXRlcmlhbC5jb21wb25lbnRzLnRhYnMnKVxuICAuZGlyZWN0aXZlKCdtZFRhYnMnLCBUYWJzRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBtZFRhYnNcbiAqIEBtb2R1bGUgbWF0ZXJpYWwuY29tcG9uZW50cy50YWJzXG4gKlxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgPG1kLXRhYnM+YCBkaXJlY3RpdmUgc2VydmVzIGFzIHRoZSBjb250YWluZXIgZm9yIDEuLm4gYDxtZC10YWI+YCBjaGlsZCBkaXJlY3RpdmVzIHRvIHByb2R1Y2VzIGEgVGFicyBjb21wb25lbnRzLlxuICogSW4gdHVybiwgdGhlIG5lc3RlZCBgPG1kLXRhYj5gIGRpcmVjdGl2ZSBpcyB1c2VkIHRvIHNwZWNpZnkgYSB0YWIgbGFiZWwgZm9yIHRoZSAqKmhlYWRlciBidXR0b24qKiBhbmQgYSBbb3B0aW9uYWxdIHRhYiB2aWV3XG4gKiBjb250ZW50IHRoYXQgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGggZWFjaCB0YWIgYnV0dG9uLlxuICpcbiAqIEJlbG93IGlzIHRoZSBtYXJrdXAgZm9yIGl0cyBzaW1wbGVzdCB1c2FnZTpcbiAqXG4gKiAgPGhsanMgbGFuZz1cImh0bWxcIj5cbiAqICA8bWQtdGFicz5cbiAqICAgIDxtZC10YWIgbGFiZWw9XCJUYWIgIzFcIj48L21kLXRhYj5cbiAqICAgIDxtZC10YWIgbGFiZWw9XCJUYWIgIzJcIj48L21kLXRhYj5cbiAqICAgIDxtZC10YWIgbGFiZWw9XCJUYWIgIzNcIj48L21kLXRhYj5cbiAqICA8bWQtdGFicz5cbiAqICA8L2hsanM+XG4gKlxuICogVGFicyBzdXBwb3J0cyB0aHJlZSAoMykgdXNhZ2Ugc2NlbmFyaW9zOlxuICpcbiAqICAxLiBUYWJzIChidXR0b25zIG9ubHkpXG4gKiAgMi4gVGFicyB3aXRoIGludGVybmFsIHZpZXcgY29udGVudFxuICogIDMuIFRhYnMgd2l0aCBleHRlcm5hbCB2aWV3IGNvbnRlbnRcbiAqXG4gKiAqKlRhYi1vbmx5Kiogc3VwcG9ydCBpcyB1c2VmdWwgd2hlbiB0YWIgYnV0dG9ucyBhcmUgdXNlZCBmb3IgY3VzdG9tIG5hdmlnYXRpb24gcmVnYXJkbGVzcyBvZiBhbnkgb3RoZXIgY29tcG9uZW50cywgY29udGVudCwgb3Igdmlld3MuXG4gKiAqKlRhYnMgd2l0aCBpbnRlcm5hbCB2aWV3cyoqIGFyZSB0aGUgdHJhZGl0aW9uYWwgdXNhZ2VzIHdoZXJlIGVhY2ggdGFiIGhhcyBhc3NvY2lhdGVkIHZpZXcgY29udGVudCBhbmQgdGhlIHZpZXcgc3dpdGNoaW5nIGlzIG1hbmFnZWQgaW50ZXJuYWxseSBieSB0aGUgVGFicyBjb21wb25lbnQuXG4gKiAqKlRhYnMgd2l0aCBleHRlcm5hbCB2aWV3IGNvbnRlbnQqKiBpcyBvZnRlbiB1c2VmdWwgd2hlbiBjb250ZW50IGFzc29jaWF0ZWQgd2l0aCBlYWNoIHRhYiBpcyBpbmRlcGVuZGVudGx5IG1hbmFnZWQgYW5kIGRhdGEtYmluZGluZyBub3RpZmljYXRpb25zIGFubm91bmNlIHRhYiBzZWxlY3Rpb24gY2hhbmdlcy5cbiAqXG4gKiA+IEFzIGEgcGVyZm9ybWFuY2UgYm9udXMsIGlmIHRoZSB0YWIgY29udGVudCBpcyBtYW5hZ2VkIGludGVybmFsbHkgdGhlbiB0aGUgbm9uLWFjdGl2ZSAobm9uLXZpc2libGUpIHRhYiBjb250ZW50cyBhcmUgdGVtcG9yYXJpbHkgZGlzY29ubmVjdGVkIGZyb20gdGhlIGAkc2NvcGUuJGRpZ2VzdCgpYCBwcm9jZXNzZXM7IHdoaWNoIHJlc3RyaWN0cyBhbmQgb3B0aW1pemVzIERPTSB1cGRhdGVzIHRvIG9ubHkgdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFiLlxuICpcbiAqIEFkZGl0aW9uYWwgZmVhdHVyZXMgYWxzbyBpbmNsdWRlOlxuICpcbiAqICogIENvbnRlbnQgY2FuIGluY2x1ZGUgYW55IG1hcmt1cC5cbiAqICogIElmIGEgdGFiIGlzIGRpc2FibGVkIHdoaWxlIGFjdGl2ZS9zZWxlY3RlZCwgdGhlbiB0aGUgbmV4dCB0YWIgd2lsbCBiZSBhdXRvLXNlbGVjdGVkLlxuICogKiAgSWYgdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFiIGlzIHRoZSBsYXN0IHRhYiwgdGhlbiBuZXh0KCkgYWN0aW9uIHdpbGwgc2VsZWN0IHRoZSBmaXJzdCB0YWIuXG4gKiAqICBBbnkgbWFya3VwIChvdGhlciB0aGFuICoqYDxtZC10YWI+YCoqIHRhZ3MpIHdpbGwgYmUgdHJhbnNjbHVkZWQgaW50byB0aGUgdGFiIGhlYWRlciBhcmVhIEJFRk9SRSB0aGUgdGFiIGJ1dHRvbnMuXG4gKlxuICogIyMjIEV4cGxhbmF0aW9uIG9mIHRhYiBzdHJldGNoaW5nXG4gKlxuICogSW5pdGlhbGx5LCB0YWJzIHdpbGwgaGF2ZSBhbiBpbmhlcmVudCBzaXplLiAgVGhpcyBzaXplIHdpbGwgZWl0aGVyIGJlIGRlZmluZWQgYnkgaG93IG11Y2ggc3BhY2UgaXMgbmVlZGVkIHRvIGFjY29tbW9kYXRlIHRoZWlyIHRleHQgb3Igc2V0IGJ5IHRoZSB1c2VyIHRocm91Z2ggQ1NTLiAgQ2FsY3VsYXRpb25zIHdpbGwgYmUgYmFzZWQgb24gdGhpcyBzaXplLlxuICpcbiAqIE9uIG1vYmlsZSBkZXZpY2VzLCB0YWJzIHdpbGwgYmUgZXhwYW5kZWQgdG8gZmlsbCB0aGUgYXZhaWxhYmxlIGhvcml6b250YWwgc3BhY2UuICBXaGVuIHRoaXMgaGFwcGVucywgYWxsIHRhYnMgd2lsbCBiZWNvbWUgdGhlIHNhbWUgc2l6ZS5cbiAqXG4gKiBPbiBkZXNrdG9wcywgYnkgZGVmYXVsdCwgc3RyZXRjaGluZyB3aWxsIG5ldmVyIG9jY3VyLlxuICpcbiAqIFRoaXMgZGVmYXVsdCBiZWhhdmlvciBjYW4gYmUgb3ZlcnJpZGRlbiB0aHJvdWdoIHRoZSBgbWQtc3RyZXRjaC10YWJzYCBhdHRyaWJ1dGUuICBIZXJlIGlzIGEgdGFibGUgc2hvd2luZyB3aGVuIHN0cmV0Y2hpbmcgd2lsbCBvY2N1cjpcbiAqXG4gKiBgbWQtc3RyZXRjaC10YWJzYCB8IG1vYmlsZSAgICB8IGRlc2t0b3BcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLXwtLS0tLS0tLVxuICogYGF1dG9gICAgICAgICAgICAgfCBzdHJldGNoZWQgfCAtLS1cbiAqIGBhbHdheXNgICAgICAgICAgIHwgc3RyZXRjaGVkIHwgc3RyZXRjaGVkXG4gKiBgbmV2ZXJgICAgICAgICAgICB8IC0tLSAgICAgICB8IC0tLVxuICpcbiAqIEBwYXJhbSB7aW50ZWdlcj19IG1kLXNlbGVjdGVkIEluZGV4IG9mIHRoZSBhY3RpdmUvc2VsZWN0ZWQgdGFiXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBtZC1uby1pbmsgSWYgcHJlc2VudCwgZGlzYWJsZXMgaW5rIHJpcHBsZSBlZmZlY3RzLlxuICogQHBhcmFtIHtib29sZWFuPX0gbWQtbm8tYmFyIElmIHByZXNlbnQsIGRpc2FibGVzIHRoZSBzZWxlY3Rpb24gaW5rIGJhci5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gIG1kLWFsaWduLXRhYnMgQXR0cmlidXRlIHRvIGluZGljYXRlIHBvc2l0aW9uIG9mIHRhYiBidXR0b25zOiBgYm90dG9tYCBvciBgdG9wYDsgZGVmYXVsdCBpcyBgdG9wYFxuICogQHBhcmFtIHtzdHJpbmc9fSBtZC1zdHJldGNoLXRhYnMgQXR0cmlidXRlIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRvIHN0cmV0Y2ggdGFiczogYGF1dG9gLCBgYWx3YXlzYCwgb3IgYG5ldmVyYDsgZGVmYXVsdCBpcyBgYXV0b2BcbiAqXG4gKiBAdXNhZ2VcbiAqIDxobGpzIGxhbmc9XCJodG1sXCI+XG4gKiA8bWQtdGFicyBtZC1zZWxlY3RlZD1cInNlbGVjdGVkSW5kZXhcIiA+XG4gKiAgIDxpbWcgbmctc3JjPVwiaW1nL2FuZ3VsYXIucG5nXCIgY2xhc3M9XCJjZW50ZXJlZFwiPlxuICpcbiAqICAgPG1kLXRhYlxuICogICAgICBuZy1yZXBlYXQ9XCJ0YWIgaW4gdGFicyB8IG9yZGVyQnk6cHJlZGljYXRlOnJldmVyc2VkXCJcbiAqICAgICAgbWQtb24tc2VsZWN0PVwib25UYWJTZWxlY3RlZCh0YWIpXCJcbiAqICAgICAgbWQtb24tZGVzZWxlY3Q9XCJhbm5vdW5jZURlc2VsZWN0ZWQodGFiKVwiXG4gKiAgICAgIGRpc2FibGVkPVwidGFiLmRpc2FibGVkXCIgPlxuICpcbiAqICAgICAgIDxtZC10YWItbGFiZWw+XG4gKiAgICAgICAgICAge3t0YWIudGl0bGV9fVxuICogICAgICAgICAgIDxpbWcgc3JjPVwiaW1nL3JlbW92ZVRhYi5wbmdcIlxuICogICAgICAgICAgICAgICAgbmctY2xpY2s9XCJyZW1vdmVUYWIodGFiKVwiXG4gKiAgICAgICAgICAgICAgICBjbGFzcz1cImRlbGV0ZVwiID5cbiAqICAgICAgIDwvbWQtdGFiLWxhYmVsPlxuICpcbiAqICAgICAgIHt7dGFiLmNvbnRlbnR9fVxuICpcbiAqICAgPC9tZC10YWI+XG4gKlxuICogPC9tZC10YWJzPlxuICogPC9obGpzPlxuICpcbiAqL1xuZnVuY3Rpb24gVGFic0RpcmVjdGl2ZSgkbWRUaGVtaW5nKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICBjb250cm9sbGVyOiAnJG1kVGFicycsXG4gICAgcmVxdWlyZTogJ21kVGFicycsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICBzY29wZToge1xuICAgICAgc2VsZWN0ZWRJbmRleDogJz0/bWRTZWxlY3RlZCdcbiAgICB9LFxuICAgIHRlbXBsYXRlOlxuICAgICAgJzxzZWN0aW9uIGNsYXNzPVwibWQtaGVhZGVyXCIgJyArXG4gICAgICAgICduZy1jbGFzcz1cIntcXCdtZC1wYWdpbmF0aW5nXFwnOiBwYWdpbmF0aW9uLmFjdGl2ZX1cIj4nICtcblxuICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cIm1kLXBhZ2luYXRvciBtZC1wcmV2XCIgJyArXG4gICAgICAgICAgJ25nLWlmPVwicGFnaW5hdGlvbi5hY3RpdmUgJiYgcGFnaW5hdGlvbi5oYXNQcmV2XCIgJyArXG4gICAgICAgICAgJ25nLWNsaWNrPVwicGFnaW5hdGlvbi5jbGlja1ByZXZpb3VzKClcIiAnICtcbiAgICAgICAgICAnYXJpYS1oaWRkZW49XCJ0cnVlXCI+JyArXG4gICAgICAgICc8L2J1dHRvbj4nICtcblxuICAgICAgICAvLyBvdmVyZmxvdzogaGlkZGVuIGNvbnRhaW5lciB3aGVuIHBhZ2luYXRpbmdcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJtZC1oZWFkZXItaXRlbXMtY29udGFpbmVyXCIgbWQtdGFicy1wYWdpbmF0aW9uPicgK1xuICAgICAgICAgIC8vIGZsZXggY29udGFpbmVyIGZvciA8bWQtdGFiPiBlbGVtZW50c1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibWQtaGVhZGVyLWl0ZW1zXCI+JyArXG4gICAgICAgICAgICAnPG1kLXRhYnMtaW5rLWJhcj48L21kLXRhYnMtaW5rLWJhcj4nICtcbiAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICc8L2Rpdj4nICtcblxuICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cIm1kLXBhZ2luYXRvciBtZC1uZXh0XCIgJyArXG4gICAgICAgICAgJ25nLWlmPVwicGFnaW5hdGlvbi5hY3RpdmUgJiYgcGFnaW5hdGlvbi5oYXNOZXh0XCIgJyArXG4gICAgICAgICAgJ25nLWNsaWNrPVwicGFnaW5hdGlvbi5jbGlja05leHQoKVwiICcgK1xuICAgICAgICAgICdhcmlhLWhpZGRlbj1cInRydWVcIj4nICtcbiAgICAgICAgJzwvYnV0dG9uPicgK1xuXG4gICAgICAnPC9zZWN0aW9uPicgK1xuICAgICAgJzxzZWN0aW9uIGNsYXNzPVwibWQtdGFicy1jb250ZW50XCI+PC9zZWN0aW9uPicsXG4gICAgbGluazogcG9zdExpbmtcbiAgfTtcblxuICBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgdGFic0N0cmwsIHRyYW5zY2x1ZGUpIHtcblxuICAgIHNjb3BlLnN0cmV0Y2hUYWJzID0gYXR0ci5oYXNPd25Qcm9wZXJ0eSgnbWRTdHJldGNoVGFicycpID8gYXR0ci5tZFN0cmV0Y2hUYWJzIHx8ICdhbHdheXMnIDogJ2F1dG8nO1xuXG4gICAgJG1kVGhlbWluZyhlbGVtZW50KTtcbiAgICBjb25maWd1cmVBcmlhKCk7XG4gICAgd2F0Y2hTZWxlY3RlZCgpO1xuXG4gICAgdHJhbnNjbHVkZShzY29wZS4kcGFyZW50LCBmdW5jdGlvbihjbG9uZSkge1xuICAgICAgYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLm1kLWhlYWRlci1pdGVtcycpKS5hcHBlbmQoY2xvbmUpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gY29uZmlndXJlQXJpYSgpIHtcbiAgICAgIGVsZW1lbnQuYXR0cigncm9sZScsICd0YWJsaXN0Jyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2F0Y2hTZWxlY3RlZCgpIHtcbiAgICAgIHNjb3BlLiR3YXRjaCgnc2VsZWN0ZWRJbmRleCcsIGZ1bmN0aW9uIHdhdGNoU2VsZWN0ZWRJbmRleChuZXdJbmRleCwgb2xkSW5kZXgpIHtcbiAgICAgICAgaWYgKG9sZEluZGV4ID09IG5ld0luZGV4KSByZXR1cm47XG4gICAgICAgIHZhciByaWdodFRvTGVmdCA9IG9sZEluZGV4ID4gbmV3SW5kZXg7XG4gICAgICAgIHRhYnNDdHJsLmRlc2VsZWN0KHRhYnNDdHJsLml0ZW1BdChvbGRJbmRleCksIHJpZ2h0VG9MZWZ0KTtcblxuICAgICAgICBpZiAodGFic0N0cmwuaW5SYW5nZShuZXdJbmRleCkpIHtcbiAgICAgICAgICB2YXIgbmV3VGFiID0gdGFic0N0cmwuaXRlbUF0KG5ld0luZGV4KTtcbiAgICAgICAgICB3aGlsZSAobmV3VGFiICYmIG5ld1RhYi5pc0Rpc2FibGVkKCkpIHtcbiAgICAgICAgICAgIG5ld1RhYiA9IG5ld0luZGV4ID4gb2xkSW5kZXggXG4gICAgICAgICAgICAgICAgPyB0YWJzQ3RybC5uZXh0KG5ld1RhYilcbiAgICAgICAgICAgICAgICA6IHRhYnNDdHJsLnByZXZpb3VzKG5ld1RhYik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRhYnNDdHJsLnNlbGVjdChuZXdUYWIsIHJpZ2h0VG9MZWZ0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5UYWJzRGlyZWN0aXZlLiRpbmplY3QgPSBbXCIkbWRUaGVtaW5nXCJdO1xufSkoKTtcblxuYW5ndWxhci5tb2R1bGUoXCJtYXRlcmlhbC5jb3JlXCIpLmNvbnN0YW50KFwiJE1EX1RIRU1FX0NTU1wiLCBcIm1kLWJhY2tkcm9wLm1kLW9wYXF1ZS5tZC1USEVNRV9OQU1FLXRoZW1lIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e2ZvcmVncm91bmQtNC0wLjV9fSc7IH1tZC1ib3R0b20tc2hlZXQubWQtVEhFTUVfTkFNRS10aGVtZSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tiYWNrZ3JvdW5kLTUwfX0nOyAgYm9yZGVyLXRvcC1jb2xvcjogJ3t7YmFja2dyb3VuZC0zMDB9fSc7IH0gIG1kLWJvdHRvbS1zaGVldC5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWxpc3QgbWQtaXRlbSB7ICAgIGNvbG9yOiAne3tmb3JlZ3JvdW5kLTF9fSc7IH0gIG1kLWJvdHRvbS1zaGVldC5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1zdWJoZWFkZXIgeyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tiYWNrZ3JvdW5kLTUwfX0nOyB9ICBtZC1ib3R0b20tc2hlZXQubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtc3ViaGVhZGVyIHsgICAgY29sb3I6ICd7e2ZvcmVncm91bmQtMX19JzsgfW1kLXRvb2xiYXIgLm1kLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWZhYiB7ICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgfS5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZSB7ICBib3JkZXItcmFkaXVzOiAzcHg7IH0gIC5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoW2Rpc2FibGVkXSk6aG92ZXIsIC5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoW2Rpc2FibGVkXSk6Zm9jdXMgeyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tiYWNrZ3JvdW5kLTUwMC0wLjJ9fSc7IH0gIC5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1wcmltYXJ5IHsgICAgY29sb3I6ICd7e3ByaW1hcnktY29sb3J9fSc7IH0gICAgLm1kLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXByaW1hcnkubWQtcmFpc2VkLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtcHJpbWFyeS5tZC1mYWIgeyAgICAgIGNvbG9yOiAne3twcmltYXJ5LWNvbnRyYXN0fX0nOyAgICAgIGJhY2tncm91bmQtY29sb3I6ICd7e3ByaW1hcnktY29sb3J9fSc7IH0gICAgICAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtcHJpbWFyeS5tZC1yYWlzZWQ6bm90KFtkaXNhYmxlZF0pOmhvdmVyLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtcHJpbWFyeS5tZC1yYWlzZWQ6bm90KFtkaXNhYmxlZF0pOmZvY3VzLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtcHJpbWFyeS5tZC1mYWI6bm90KFtkaXNhYmxlZF0pOmhvdmVyLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtcHJpbWFyeS5tZC1mYWI6bm90KFtkaXNhYmxlZF0pOmZvY3VzIHsgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICd7e3ByaW1hcnktNjAwfX0nOyB9ICAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtZmFiIHsgICAgYm9yZGVyLXJhZGl1czogNTAlOyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAne3thY2NlbnQtY29sb3J9fSc7ICAgIGNvbG9yOiAne3thY2NlbnQtY29udHJhc3R9fSc7IH0gICAgLm1kLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWZhYjpub3QoW2Rpc2FibGVkXSk6aG92ZXIsIC5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1mYWI6bm90KFtkaXNhYmxlZF0pOmZvY3VzIHsgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAne3thY2NlbnQtQTcwMH19JzsgfSAgLm1kLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXJhaXNlZCB7ICAgIGNvbG9yOiAne3tiYWNrZ3JvdW5kLWNvbnRyYXN0fX0nOyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tiYWNrZ3JvdW5kLTUwfX0nOyB9ICAgIC5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1yYWlzZWQ6bm90KFtkaXNhYmxlZF0pOmhvdmVyLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtcmFpc2VkOm5vdChbZGlzYWJsZWRdKTpmb2N1cyB7ICAgICAgYmFja2dyb3VuZC1jb2xvcjogJ3t7YmFja2dyb3VuZC0yMDB9fSc7IH0gIC5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZS5tZC13YXJuIHsgICAgY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7IH0gICAgLm1kLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXdhcm4ubWQtcmFpc2VkLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2Fybi5tZC1mYWIgeyAgICAgIGNvbG9yOiAne3t3YXJuLWNvbnRyYXN0fX0nOyAgICAgIGJhY2tncm91bmQtY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7IH0gICAgICAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2Fybi5tZC1yYWlzZWQ6bm90KFtkaXNhYmxlZF0pOmhvdmVyLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2Fybi5tZC1yYWlzZWQ6bm90KFtkaXNhYmxlZF0pOmZvY3VzLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2Fybi5tZC1mYWI6bm90KFtkaXNhYmxlZF0pOmhvdmVyLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2Fybi5tZC1mYWI6bm90KFtkaXNhYmxlZF0pOmZvY3VzIHsgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICd7e3dhcm4tNzAwfX0nOyB9ICAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtYWNjZW50IHsgICAgY29sb3I6ICd7e2FjY2VudC1jb2xvcn19JzsgfSAgICAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtYWNjZW50Lm1kLXJhaXNlZCwgLm1kLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudC5tZC1mYWIgeyAgICAgIGNvbG9yOiAne3thY2NlbnQtY29udHJhc3R9fSc7ICAgICAgYmFja2dyb3VuZC1jb2xvcjogJ3t7YWNjZW50LWNvbG9yfX0nOyB9ICAgICAgLm1kLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudC5tZC1yYWlzZWQ6bm90KFtkaXNhYmxlZF0pOmhvdmVyLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtYWNjZW50Lm1kLXJhaXNlZDpub3QoW2Rpc2FibGVkXSk6Zm9jdXMsIC5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1hY2NlbnQubWQtZmFiOm5vdChbZGlzYWJsZWRdKTpob3ZlciwgLm1kLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudC5tZC1mYWI6bm90KFtkaXNhYmxlZF0pOmZvY3VzIHsgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICd7e2FjY2VudC03MDB9fSc7IH0gIC5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZVtkaXNhYmxlZF0sIC5tZC1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1yYWlzZWRbZGlzYWJsZWRdLCAubWQtYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtZmFiW2Rpc2FibGVkXSB7ICAgIGNvbG9yOiAne3tmb3JlZ3JvdW5kLTN9fSc7ICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOyB9bWQtY2FyZC5tZC1USEVNRV9OQU1FLXRoZW1lIHsgIGJvcmRlci1yYWRpdXM6IDJweDsgfSAgbWQtY2FyZC5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1jYXJkLWltYWdlIHsgICAgYm9yZGVyLXJhZGl1czogMnB4IDJweCAwIDA7IH1tZC1jaGVja2JveC5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1yaXBwbGUgeyAgY29sb3I6ICd7e2FjY2VudC02MDB9fSc7IH1tZC1jaGVja2JveC5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWNoZWNrZWQgLm1kLXJpcHBsZSB7ICBjb2xvcjogJ3t7YmFja2dyb3VuZC02MDB9fSc7IH1tZC1jaGVja2JveC5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1pY29uIHsgIGJvcmRlci1jb2xvcjogJ3t7Zm9yZWdyb3VuZC0yfX0nOyB9bWQtY2hlY2tib3gubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1jaGVja2VkIC5tZC1pY29uIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e2FjY2VudC1jb2xvci0wLjg3fX0nOyB9bWQtY2hlY2tib3gubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1jaGVja2VkIC5tZC1pY29uOmFmdGVyIHsgIGJvcmRlci1jb2xvcjogJ3t7YmFja2dyb3VuZC0yMDB9fSc7IH1tZC1jaGVja2JveC5tZC1USEVNRV9OQU1FLXRoZW1lOm5vdChbZGlzYWJsZWRdKS5tZC1wcmltYXJ5IC5tZC1yaXBwbGUgeyAgY29sb3I6ICd7e3ByaW1hcnktNjAwfX0nOyB9bWQtY2hlY2tib3gubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoW2Rpc2FibGVkXSkubWQtcHJpbWFyeS5tZC1jaGVja2VkIC5tZC1yaXBwbGUgeyAgY29sb3I6ICd7e2JhY2tncm91bmQtNjAwfX0nOyB9bWQtY2hlY2tib3gubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoW2Rpc2FibGVkXSkubWQtcHJpbWFyeSAubWQtaWNvbiB7ICBib3JkZXItY29sb3I6ICd7e2ZvcmVncm91bmQtMn19JzsgfW1kLWNoZWNrYm94Lm1kLVRIRU1FX05BTUUtdGhlbWU6bm90KFtkaXNhYmxlZF0pLm1kLXByaW1hcnkubWQtY2hlY2tlZCAubWQtaWNvbiB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3twcmltYXJ5LWNvbG9yLTAuODd9fSc7IH1tZC1jaGVja2JveC5tZC1USEVNRV9OQU1FLXRoZW1lOm5vdChbZGlzYWJsZWRdKS5tZC1wcmltYXJ5Lm1kLWNoZWNrZWQgLm1kLWljb246YWZ0ZXIgeyAgYm9yZGVyLWNvbG9yOiAne3tiYWNrZ3JvdW5kLTIwMH19JzsgfW1kLWNoZWNrYm94Lm1kLVRIRU1FX05BTUUtdGhlbWU6bm90KFtkaXNhYmxlZF0pLm1kLXdhcm4gLm1kLXJpcHBsZSB7ICBjb2xvcjogJ3t7d2Fybi02MDB9fSc7IH1tZC1jaGVja2JveC5tZC1USEVNRV9OQU1FLXRoZW1lOm5vdChbZGlzYWJsZWRdKS5tZC13YXJuIC5tZC1pY29uIHsgIGJvcmRlci1jb2xvcjogJ3t7Zm9yZWdyb3VuZC0yfX0nOyB9bWQtY2hlY2tib3gubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoW2Rpc2FibGVkXSkubWQtd2Fybi5tZC1jaGVja2VkIC5tZC1pY29uIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e3dhcm4tY29sb3ItMC44N319JzsgfW1kLWNoZWNrYm94Lm1kLVRIRU1FX05BTUUtdGhlbWU6bm90KFtkaXNhYmxlZF0pLm1kLXdhcm4ubWQtY2hlY2tlZCAubWQtaWNvbjphZnRlciB7ICBib3JkZXItY29sb3I6ICd7e2JhY2tncm91bmQtMjAwfX0nOyB9bWQtY2hlY2tib3gubWQtVEhFTUVfTkFNRS10aGVtZVtkaXNhYmxlZF0gLm1kLWljb24geyAgYm9yZGVyLWNvbG9yOiAne3tmb3JlZ3JvdW5kLTN9fSc7IH1tZC1jaGVja2JveC5tZC1USEVNRV9OQU1FLXRoZW1lW2Rpc2FibGVkXS5tZC1jaGVja2VkIC5tZC1pY29uIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e2ZvcmVncm91bmQtM319JzsgfW1kLWNvbnRlbnQubWQtVEhFTUVfTkFNRS10aGVtZSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tiYWNrZ3JvdW5kLWh1ZS0zfX0nOyB9bWQtZGlhbG9nLm1kLVRIRU1FX05BTUUtdGhlbWUgeyAgYm9yZGVyLXJhZGl1czogNHB4OyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7YmFja2dyb3VuZC1odWUtM319JzsgfSAgbWQtZGlhbG9nLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtY29udGVudC1vdmVyZmxvdyAubWQtYWN0aW9ucyB7ICAgIGJvcmRlci10b3AtY29sb3I6ICd7e2ZvcmVncm91bmQtNH19JzsgfW1kLWRpdmlkZXIubWQtVEhFTUVfTkFNRS10aGVtZSB7ICBib3JkZXItdG9wLWNvbG9yOiAne3tmb3JlZ3JvdW5kLTR9fSc7IH1tZC1pbnB1dC1jb250YWluZXIubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtaW5wdXQgeyAgY29sb3I6ICd7e2ZvcmVncm91bmQtMX19JzsgIGJvcmRlci1jb2xvcjogJ3t7Zm9yZWdyb3VuZC00fX0nOyAgdGV4dC1zaGFkb3c6ICd7e2ZvcmVncm91bmQtc2hhZG93fX0nOyB9ICBtZC1pbnB1dC1jb250YWluZXIubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtaW5wdXQ6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIsIG1kLWlucHV0LWNvbnRhaW5lci5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1pbnB1dDo6LW1vei1wbGFjZWhvbGRlciwgbWQtaW5wdXQtY29udGFpbmVyLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLWlucHV0Oi1tb3otcGxhY2Vob2xkZXIsIG1kLWlucHV0LWNvbnRhaW5lci5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1pbnB1dDotbXMtaW5wdXQtcGxhY2Vob2xkZXIgeyAgICBjb2xvcjogJ3t7Zm9yZWdyb3VuZC0zfX0nOyB9bWQtaW5wdXQtY29udGFpbmVyLm1kLVRIRU1FX05BTUUtdGhlbWUgbGFiZWwsIG1kLWlucHV0LWNvbnRhaW5lci5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1wbGFjZWhvbGRlciB7ICB0ZXh0LXNoYWRvdzogJ3t7Zm9yZWdyb3VuZC1zaGFkb3d9fSc7ICBjb2xvcjogJ3t7Zm9yZWdyb3VuZC0zfX0nOyB9bWQtaW5wdXQtY29udGFpbmVyLm1kLVRIRU1FX05BTUUtdGhlbWU6bm90KC5tZC1pbnB1dC1pbnZhbGlkKS5tZC1pbnB1dC1oYXMtdmFsdWUgbGFiZWwgeyAgY29sb3I6ICd7e2ZvcmVncm91bmQtMn19JzsgfW1kLWlucHV0LWNvbnRhaW5lci5tZC1USEVNRV9OQU1FLXRoZW1lOm5vdCgubWQtaW5wdXQtaW52YWxpZCkubWQtaW5wdXQtZm9jdXNlZCAubWQtaW5wdXQgeyAgYm9yZGVyLWNvbG9yOiAne3twcmltYXJ5LTUwMH19JzsgfW1kLWlucHV0LWNvbnRhaW5lci5tZC1USEVNRV9OQU1FLXRoZW1lOm5vdCgubWQtaW5wdXQtaW52YWxpZCkubWQtaW5wdXQtZm9jdXNlZCBsYWJlbCB7ICBjb2xvcjogJ3t7cHJpbWFyeS01MDB9fSc7IH1tZC1pbnB1dC1jb250YWluZXIubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoLm1kLWlucHV0LWludmFsaWQpLm1kLWlucHV0LWZvY3VzZWQubWQtYWNjZW50IC5tZC1pbnB1dCB7ICBib3JkZXItY29sb3I6ICd7e2FjY2VudC01MDB9fSc7IH1tZC1pbnB1dC1jb250YWluZXIubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoLm1kLWlucHV0LWludmFsaWQpLm1kLWlucHV0LWZvY3VzZWQubWQtYWNjZW50IGxhYmVsIHsgIGNvbG9yOiAne3thY2NlbnQtNTAwfX0nOyB9bWQtaW5wdXQtY29udGFpbmVyLm1kLVRIRU1FX05BTUUtdGhlbWU6bm90KC5tZC1pbnB1dC1pbnZhbGlkKS5tZC1pbnB1dC1mb2N1c2VkLm1kLXdhcm4gLm1kLWlucHV0IHsgIGJvcmRlci1jb2xvcjogJ3t7d2Fybi01MDB9fSc7IH1tZC1pbnB1dC1jb250YWluZXIubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoLm1kLWlucHV0LWludmFsaWQpLm1kLWlucHV0LWZvY3VzZWQubWQtd2FybiBsYWJlbCB7ICBjb2xvcjogJ3t7d2Fybi01MDB9fSc7IH1tZC1pbnB1dC1jb250YWluZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1pbnB1dC1pbnZhbGlkIC5tZC1pbnB1dCB7ICBib3JkZXItY29sb3I6ICd7e3dhcm4tNTAwfX0nOyB9bWQtaW5wdXQtY29udGFpbmVyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtaW5wdXQtaW52YWxpZCBsYWJlbCB7ICBjb2xvcjogJ3t7d2Fybi01MDB9fSc7IH1tZC1pbnB1dC1jb250YWluZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1pbnB1dC1pbnZhbGlkIG5nLW1lc3NhZ2UsIG1kLWlucHV0LWNvbnRhaW5lci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWlucHV0LWludmFsaWQgZGF0YS1uZy1tZXNzYWdlLCBtZC1pbnB1dC1jb250YWluZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1pbnB1dC1pbnZhbGlkIHgtbmctbWVzc2FnZSwgbWQtaW5wdXQtY29udGFpbmVyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtaW5wdXQtaW52YWxpZCBbbmctbWVzc2FnZV0sIG1kLWlucHV0LWNvbnRhaW5lci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWlucHV0LWludmFsaWQgW2RhdGEtbmctbWVzc2FnZV0sIG1kLWlucHV0LWNvbnRhaW5lci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWlucHV0LWludmFsaWQgW3gtbmctbWVzc2FnZV0sIG1kLWlucHV0LWNvbnRhaW5lci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWlucHV0LWludmFsaWQgLm1kLWNoYXItY291bnRlciB7ICBjb2xvcjogJ3t7d2Fybi01MDB9fSc7IH1tZC1pbnB1dC1jb250YWluZXIubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtaW5wdXRbZGlzYWJsZWRdIHsgIGJvcmRlci1ib3R0b20tY29sb3I6IHRyYW5zcGFyZW50OyAgY29sb3I6ICd7e2ZvcmVncm91bmQtM319JzsgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgJ3t7Zm9yZWdyb3VuZC00fX0nIDAlLCAne3tmb3JlZ3JvdW5kLTR9fScgMzMlLCB0cmFuc3BhcmVudCAwJSk7IH1tZC1wcm9ncmVzcy1jaXJjdWxhci5tZC1USEVNRV9OQU1FLXRoZW1lIHsgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyB9ICBtZC1wcm9ncmVzcy1jaXJjdWxhci5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1pbm5lciAubWQtZ2FwIHsgICAgYm9yZGVyLXRvcC1jb2xvcjogJ3t7cHJpbWFyeS1jb2xvcn19JzsgICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogJ3t7cHJpbWFyeS1jb2xvcn19JzsgfSAgbWQtcHJvZ3Jlc3MtY2lyY3VsYXIubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtaW5uZXIgLm1kLWxlZnQgLm1kLWhhbGYtY2lyY2xlLCBtZC1wcm9ncmVzcy1jaXJjdWxhci5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1pbm5lciAubWQtcmlnaHQgLm1kLWhhbGYtY2lyY2xlIHsgICAgYm9yZGVyLXRvcC1jb2xvcjogJ3t7cHJpbWFyeS1jb2xvcn19JzsgfSAgbWQtcHJvZ3Jlc3MtY2lyY3VsYXIubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtaW5uZXIgLm1kLXJpZ2h0IC5tZC1oYWxmLWNpcmNsZSB7ICAgIGJvcmRlci1yaWdodC1jb2xvcjogJ3t7cHJpbWFyeS1jb2xvcn19JzsgfSAgbWQtcHJvZ3Jlc3MtY2lyY3VsYXIubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtaW5uZXIgLm1kLWxlZnQgLm1kLWhhbGYtY2lyY2xlIHsgICAgYm9yZGVyLWxlZnQtY29sb3I6ICd7e3ByaW1hcnktY29sb3J9fSc7IH0gIG1kLXByb2dyZXNzLWNpcmN1bGFyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2FybiAubWQtaW5uZXIgLm1kLWdhcCB7ICAgIGJvcmRlci10b3AtY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7ICAgIGJvcmRlci1ib3R0b20tY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7IH0gIG1kLXByb2dyZXNzLWNpcmN1bGFyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2FybiAubWQtaW5uZXIgLm1kLWxlZnQgLm1kLWhhbGYtY2lyY2xlLCBtZC1wcm9ncmVzcy1jaXJjdWxhci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXdhcm4gLm1kLWlubmVyIC5tZC1yaWdodCAubWQtaGFsZi1jaXJjbGUgeyAgICBib3JkZXItdG9wLWNvbG9yOiAne3t3YXJuLWNvbG9yfX0nOyB9ICBtZC1wcm9ncmVzcy1jaXJjdWxhci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXdhcm4gLm1kLWlubmVyIC5tZC1yaWdodCAubWQtaGFsZi1jaXJjbGUgeyAgICBib3JkZXItcmlnaHQtY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7IH0gIG1kLXByb2dyZXNzLWNpcmN1bGFyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2FybiAubWQtaW5uZXIgLm1kLWxlZnQgLm1kLWhhbGYtY2lyY2xlIHsgICAgYm9yZGVyLWxlZnQtY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7IH0gIG1kLXByb2dyZXNzLWNpcmN1bGFyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtYWNjZW50IC5tZC1pbm5lciAubWQtZ2FwIHsgICAgYm9yZGVyLXRvcC1jb2xvcjogJ3t7YWNjZW50LWNvbG9yfX0nOyAgICBib3JkZXItYm90dG9tLWNvbG9yOiAne3thY2NlbnQtY29sb3J9fSc7IH0gIG1kLXByb2dyZXNzLWNpcmN1bGFyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtYWNjZW50IC5tZC1pbm5lciAubWQtbGVmdCAubWQtaGFsZi1jaXJjbGUsIG1kLXByb2dyZXNzLWNpcmN1bGFyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtYWNjZW50IC5tZC1pbm5lciAubWQtcmlnaHQgLm1kLWhhbGYtY2lyY2xlIHsgICAgYm9yZGVyLXRvcC1jb2xvcjogJ3t7YWNjZW50LWNvbG9yfX0nOyB9ICBtZC1wcm9ncmVzcy1jaXJjdWxhci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudCAubWQtaW5uZXIgLm1kLXJpZ2h0IC5tZC1oYWxmLWNpcmNsZSB7ICAgIGJvcmRlci1yaWdodC1jb2xvcjogJ3t7YWNjZW50LWNvbG9yfX0nOyB9ICBtZC1wcm9ncmVzcy1jaXJjdWxhci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudCAubWQtaW5uZXIgLm1kLWxlZnQgLm1kLWhhbGYtY2lyY2xlIHsgICAgYm9yZGVyLWxlZnQtY29sb3I6ICd7e2FjY2VudC1jb2xvcn19JzsgfW1kLXByb2dyZXNzLWxpbmVhci5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1jb250YWluZXIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7cHJpbWFyeS0xMDB9fSc7IH1tZC1wcm9ncmVzcy1saW5lYXIubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtYmFyIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e3ByaW1hcnktY29sb3J9fSc7IH1tZC1wcm9ncmVzcy1saW5lYXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC13YXJuIC5tZC1jb250YWluZXIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7d2Fybi0xMDB9fSc7IH1tZC1wcm9ncmVzcy1saW5lYXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC13YXJuIC5tZC1iYXIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7d2Fybi1jb2xvcn19JzsgfW1kLXByb2dyZXNzLWxpbmVhci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudCAubWQtY29udGFpbmVyIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e2FjY2VudC0xMDB9fSc7IH1tZC1wcm9ncmVzcy1saW5lYXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1hY2NlbnQgLm1kLWJhciB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3thY2NlbnQtY29sb3J9fSc7IH1tZC1wcm9ncmVzcy1saW5lYXIubWQtVEhFTUVfTkFNRS10aGVtZVttZC1tb2RlPWJ1ZmZlcl0ubWQtd2FybiAubWQtYmFyMSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3t3YXJuLTEwMH19JzsgfW1kLXByb2dyZXNzLWxpbmVhci5tZC1USEVNRV9OQU1FLXRoZW1lW21kLW1vZGU9YnVmZmVyXS5tZC13YXJuIC5tZC1kYXNoZWQ6YmVmb3JlIHsgIGJhY2tncm91bmQ6IHJhZGlhbC1ncmFkaWVudCgne3t3YXJuLTEwMH19JyAwJSwgJ3t7d2Fybi0xMDB9fScgMTYlLCB0cmFuc3BhcmVudCA0MiUpOyB9bWQtcHJvZ3Jlc3MtbGluZWFyLm1kLVRIRU1FX05BTUUtdGhlbWVbbWQtbW9kZT1idWZmZXJdLm1kLWFjY2VudCAubWQtYmFyMSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3thY2NlbnQtMTAwfX0nOyB9bWQtcHJvZ3Jlc3MtbGluZWFyLm1kLVRIRU1FX05BTUUtdGhlbWVbbWQtbW9kZT1idWZmZXJdLm1kLWFjY2VudCAubWQtZGFzaGVkOmJlZm9yZSB7ICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoJ3t7YWNjZW50LTEwMH19JyAwJSwgJ3t7YWNjZW50LTEwMH19JyAxNiUsIHRyYW5zcGFyZW50IDQyJSk7IH1tZC1yYWRpby1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtb2ZmIHsgIGJvcmRlci1jb2xvcjogJ3t7Zm9yZWdyb3VuZC0yfX0nOyB9bWQtcmFkaW8tYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLW9uIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e2FjY2VudC1jb2xvci0wLjg3fX0nOyB9bWQtcmFkaW8tYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtY2hlY2tlZCAubWQtb2ZmIHsgIGJvcmRlci1jb2xvcjogJ3t7YWNjZW50LWNvbG9yLTAuODd9fSc7IH1tZC1yYWRpby1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1jaGVja2VkIC5tZC1pbmstcmlwcGxlIHsgIGNvbG9yOiAne3thY2NlbnQtY29sb3ItMC44N319JzsgfW1kLXJhZGlvLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1jb250YWluZXIgLm1kLXJpcHBsZSB7ICBjb2xvcjogJ3t7YWNjZW50LTYwMH19JzsgfW1kLXJhZGlvLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lOm5vdChbZGlzYWJsZWRdKS5tZC1wcmltYXJ5IC5tZC1vbiB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3twcmltYXJ5LWNvbG9yLTAuODd9fSc7IH1tZC1yYWRpby1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoW2Rpc2FibGVkXSkubWQtcHJpbWFyeS5tZC1jaGVja2VkIC5tZC1vZmYgeyAgYm9yZGVyLWNvbG9yOiAne3twcmltYXJ5LWNvbG9yLTAuODd9fSc7IH1tZC1yYWRpby1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoW2Rpc2FibGVkXSkubWQtcHJpbWFyeS5tZC1jaGVja2VkIC5tZC1pbmstcmlwcGxlIHsgIGNvbG9yOiAne3twcmltYXJ5LWNvbG9yLTAuODd9fSc7IH1tZC1yYWRpby1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZTpub3QoW2Rpc2FibGVkXSkubWQtcHJpbWFyeSAubWQtY29udGFpbmVyIC5tZC1yaXBwbGUgeyAgY29sb3I6ICd7e3ByaW1hcnktNjAwfX0nOyB9bWQtcmFkaW8tYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWU6bm90KFtkaXNhYmxlZF0pLm1kLXdhcm4gLm1kLW9uIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e3dhcm4tY29sb3ItMC44N319JzsgfW1kLXJhZGlvLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lOm5vdChbZGlzYWJsZWRdKS5tZC13YXJuLm1kLWNoZWNrZWQgLm1kLW9mZiB7ICBib3JkZXItY29sb3I6ICd7e3dhcm4tY29sb3ItMC44N319JzsgfW1kLXJhZGlvLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lOm5vdChbZGlzYWJsZWRdKS5tZC13YXJuLm1kLWNoZWNrZWQgLm1kLWluay1yaXBwbGUgeyAgY29sb3I6ICd7e3dhcm4tY29sb3ItMC44N319JzsgfW1kLXJhZGlvLWJ1dHRvbi5tZC1USEVNRV9OQU1FLXRoZW1lOm5vdChbZGlzYWJsZWRdKS5tZC13YXJuIC5tZC1jb250YWluZXIgLm1kLXJpcHBsZSB7ICBjb2xvcjogJ3t7d2Fybi02MDB9fSc7IH1tZC1yYWRpby1idXR0b24ubWQtVEhFTUVfTkFNRS10aGVtZVtkaXNhYmxlZF0gLm1kLWNvbnRhaW5lciAubWQtb2ZmIHsgIGJvcmRlci1jb2xvcjogJ3t7Zm9yZWdyb3VuZC0zfX0nOyB9bWQtcmFkaW8tYnV0dG9uLm1kLVRIRU1FX05BTUUtdGhlbWVbZGlzYWJsZWRdIC5tZC1jb250YWluZXIgLm1kLW9uIHsgIGJvcmRlci1jb2xvcjogJ3t7Zm9yZWdyb3VuZC0zfX0nOyB9bWQtcmFkaW8tZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZTpmb2N1czpub3QoOmVtcHR5KSB7ICBib3JkZXItY29sb3I6ICd7e2ZvcmVncm91bmQtMX19JzsgfW1kLXNpZGVuYXYubWQtVEhFTUVfTkFNRS10aGVtZSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tiYWNrZ3JvdW5kLWh1ZS0zfX0nOyB9bWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLXRyYWNrIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e2ZvcmVncm91bmQtM319JzsgfW1kLXNsaWRlci5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC10cmFjay10aWNrcyB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tmb3JlZ3JvdW5kLTR9fSc7IH1tZC1zbGlkZXIubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtZm9jdXMtdGh1bWIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7Zm9yZWdyb3VuZC0yfX0nOyB9bWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLWZvY3VzLXJpbmcgeyAgYm9yZGVyLWNvbG9yOiAne3tmb3JlZ3JvdW5kLTR9fSc7IH1tZC1zbGlkZXIubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtZGlzYWJsZWQtdGh1bWIgeyAgYm9yZGVyLWNvbG9yOiAne3tiYWNrZ3JvdW5kLWh1ZS0zfX0nOyB9bWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtbWluIC5tZC10aHVtYjphZnRlciB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tiYWNrZ3JvdW5kLWh1ZS0zfX0nOyB9bWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLXRyYWNrLm1kLXRyYWNrLWZpbGwgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7cHJpbWFyeS1jb2xvcn19JzsgfW1kLXNsaWRlci5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC10aHVtYjphZnRlciB7ICBib3JkZXItY29sb3I6ICd7e3ByaW1hcnktY29sb3J9fSc7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3twcmltYXJ5LWNvbG9yfX0nOyB9bWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLXNpZ24geyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7cHJpbWFyeS1jb2xvcn19JzsgfSAgbWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLXNpZ246YWZ0ZXIgeyAgICBib3JkZXItdG9wLWNvbG9yOiAne3twcmltYXJ5LWNvbG9yfX0nOyB9bWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLXRodW1iLXRleHQgeyAgY29sb3I6ICd7e3ByaW1hcnktY29udHJhc3R9fSc7IH1tZC1zbGlkZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC13YXJuIC5tZC10cmFjay1maWxsIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7IH1tZC1zbGlkZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC13YXJuIC5tZC10aHVtYjphZnRlciB7ICBib3JkZXItY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3t3YXJuLWNvbG9yfX0nOyB9bWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2FybiAubWQtc2lnbiB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3t3YXJuLWNvbG9yfX0nOyB9ICBtZC1zbGlkZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC13YXJuIC5tZC1zaWduOmFmdGVyIHsgICAgYm9yZGVyLXRvcC1jb2xvcjogJ3t7d2Fybi1jb2xvcn19JzsgfW1kLXNsaWRlci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXdhcm4gLm1kLXRodW1iLXRleHQgeyAgY29sb3I6ICd7e3dhcm4tY29udHJhc3R9fSc7IH1tZC1zbGlkZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1wcmltYXJ5IC5tZC10cmFjay1maWxsIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e3ByaW1hcnktY29sb3J9fSc7IH1tZC1zbGlkZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1wcmltYXJ5IC5tZC10aHVtYjphZnRlciB7ICBib3JkZXItY29sb3I6ICd7e3ByaW1hcnktY29sb3J9fSc7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3twcmltYXJ5LWNvbG9yfX0nOyB9bWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtcHJpbWFyeSAubWQtc2lnbiB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3twcmltYXJ5LWNvbG9yfX0nOyB9ICBtZC1zbGlkZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1wcmltYXJ5IC5tZC1zaWduOmFmdGVyIHsgICAgYm9yZGVyLXRvcC1jb2xvcjogJ3t7cHJpbWFyeS1jb2xvcn19JzsgfW1kLXNsaWRlci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXByaW1hcnkgLm1kLXRodW1iLXRleHQgeyAgY29sb3I6ICd7e3ByaW1hcnktY29udHJhc3R9fSc7IH1tZC1zbGlkZXIubWQtVEhFTUVfTkFNRS10aGVtZVtkaXNhYmxlZF0gLm1kLXRodW1iOmFmdGVyIHsgIGJvcmRlci1jb2xvcjogJ3t7Zm9yZWdyb3VuZC0zfX0nOyB9bWQtc2xpZGVyLm1kLVRIRU1FX05BTUUtdGhlbWVbZGlzYWJsZWRdOm5vdCgubWQtbWluKSAubWQtdGh1bWI6YWZ0ZXIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7Zm9yZWdyb3VuZC0zfX0nOyB9Lm1kLXN1YmhlYWRlci5tZC1USEVNRV9OQU1FLXRoZW1lIHsgIGNvbG9yOiAne3sgZm9yZWdyb3VuZC0yLTAuMjMgfX0nOyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7YmFja2dyb3VuZC1odWUtM319JzsgfSAgLm1kLXN1YmhlYWRlci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXByaW1hcnkgeyAgICBjb2xvcjogJ3t7cHJpbWFyeS1jb2xvcn19JzsgfSAgLm1kLXN1YmhlYWRlci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudCB7ICAgIGNvbG9yOiAne3thY2NlbnQtY29sb3J9fSc7IH0gIC5tZC1zdWJoZWFkZXIubWQtVEhFTUVfTkFNRS10aGVtZS5tZC13YXJuIHsgICAgY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7IH1tZC1zd2l0Y2gubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtdGh1bWIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7YmFja2dyb3VuZC01MH19JzsgfW1kLXN3aXRjaC5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1iYXIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7YmFja2dyb3VuZC01MDB9fSc7IH1tZC1zd2l0Y2gubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1jaGVja2VkIC5tZC10aHVtYiB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3thY2NlbnQtY29sb3J9fSc7IH1tZC1zd2l0Y2gubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1jaGVja2VkIC5tZC1iYXIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7YWNjZW50LWNvbG9yLTAuNX19JzsgfW1kLXN3aXRjaC5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWNoZWNrZWQubWQtcHJpbWFyeSAubWQtdGh1bWIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7cHJpbWFyeS1jb2xvcn19JzsgfW1kLXN3aXRjaC5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWNoZWNrZWQubWQtcHJpbWFyeSAubWQtYmFyIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e3ByaW1hcnktY29sb3ItMC41fX0nOyB9bWQtc3dpdGNoLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtY2hlY2tlZC5tZC13YXJuIC5tZC10aHVtYiB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3t3YXJuLWNvbG9yfX0nOyB9bWQtc3dpdGNoLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtY2hlY2tlZC5tZC13YXJuIC5tZC1iYXIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7d2Fybi1jb2xvci0wLjV9fSc7IH1tZC1zd2l0Y2gubWQtVEhFTUVfTkFNRS10aGVtZVtkaXNhYmxlZF0gLm1kLXRodW1iIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e2JhY2tncm91bmQtNDAwfX0nOyB9bWQtc3dpdGNoLm1kLVRIRU1FX05BTUUtdGhlbWVbZGlzYWJsZWRdIC5tZC1iYXIgeyAgYmFja2dyb3VuZC1jb2xvcjogJ3t7Zm9yZWdyb3VuZC00fX0nOyB9bWQtc3dpdGNoLm1kLVRIRU1FX05BTUUtdGhlbWU6Zm9jdXMgLm1kLWxhYmVsOm5vdCg6ZW1wdHkpIHsgIGJvcmRlci1jb2xvcjogJ3t7Zm9yZWdyb3VuZC0xfX0nOyAgYm9yZGVyLXN0eWxlOiBkb3R0ZWQ7IH1tZC10YWJzLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLWhlYWRlciB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3twcmltYXJ5LWNvbG9yfX0nOyB9bWQtdGFicy5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudCAubWQtaGVhZGVyIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e2FjY2VudC1jb2xvcn19JzsgfW1kLXRhYnMubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1hY2NlbnQgbWQtdGFiOm5vdChbZGlzYWJsZWRdKSB7ICBjb2xvcjogJ3t7YWNjZW50LTEwMH19JzsgfSAgbWQtdGFicy5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudCBtZC10YWI6bm90KFtkaXNhYmxlZF0pLmFjdGl2ZSB7ICAgIGNvbG9yOiAne3thY2NlbnQtY29udHJhc3R9fSc7IH1tZC10YWJzLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2FybiAubWQtaGVhZGVyIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e3dhcm4tY29sb3J9fSc7IH1tZC10YWJzLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtd2FybiBtZC10YWI6bm90KFtkaXNhYmxlZF0pIHsgIGNvbG9yOiAne3t3YXJuLTEwMH19JzsgfSAgbWQtdGFicy5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXdhcm4gbWQtdGFiOm5vdChbZGlzYWJsZWRdKS5hY3RpdmUgeyAgICBjb2xvcjogJ3t7d2Fybi1jb250cmFzdH19JzsgfW1kLXRhYnMubWQtVEhFTUVfTkFNRS10aGVtZSBtZC10YWJzLWluay1iYXIgeyAgY29sb3I6ICd7e3ByaW1hcnktY29udHJhc3R9fSc7ICBiYWNrZ3JvdW5kOiAne3twcmltYXJ5LWNvbnRyYXN0fX0nOyB9bWQtdGFicy5tZC1USEVNRV9OQU1FLXRoZW1lIG1kLXRhYiB7ICBjb2xvcjogJ3t7cHJpbWFyeS0xMDB9fSc7IH0gIG1kLXRhYnMubWQtVEhFTUVfTkFNRS10aGVtZSBtZC10YWIuYWN0aXZlIHsgICAgY29sb3I6ICd7e3ByaW1hcnktY29udHJhc3R9fSc7IH0gIG1kLXRhYnMubWQtVEhFTUVfTkFNRS10aGVtZSBtZC10YWJbZGlzYWJsZWRdIHsgICAgY29sb3I6ICd7e2ZvcmVncm91bmQtNH19JzsgfSAgbWQtdGFicy5tZC1USEVNRV9OQU1FLXRoZW1lIG1kLXRhYjpmb2N1cyB7ICAgIGNvbG9yOiAne3twcmltYXJ5LWNvbnRyYXN0fX0nOyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAne3twcmltYXJ5LWNvbnRyYXN0LTAuMX19JzsgfSAgbWQtdGFicy5tZC1USEVNRV9OQU1FLXRoZW1lIG1kLXRhYiAubWQtcmlwcGxlLWNvbnRhaW5lciB7ICAgIGNvbG9yOiAne3twcmltYXJ5LWNvbnRyYXN0fX0nOyB9bWQtaW5wdXQtZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZSBpbnB1dCwgbWQtaW5wdXQtZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZSB0ZXh0YXJlYSB7ICB0ZXh0LXNoYWRvdzogJ3t7Zm9yZWdyb3VuZC1zaGFkb3d9fSc7IH0gIG1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUgaW5wdXQ6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIsIG1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUgaW5wdXQ6Oi1tb3otcGxhY2Vob2xkZXIsIG1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUgaW5wdXQ6LW1vei1wbGFjZWhvbGRlciwgbWQtaW5wdXQtZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZSBpbnB1dDotbXMtaW5wdXQtcGxhY2Vob2xkZXIsIG1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUgdGV4dGFyZWE6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIsIG1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUgdGV4dGFyZWE6Oi1tb3otcGxhY2Vob2xkZXIsIG1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUgdGV4dGFyZWE6LW1vei1wbGFjZWhvbGRlciwgbWQtaW5wdXQtZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZSB0ZXh0YXJlYTotbXMtaW5wdXQtcGxhY2Vob2xkZXIgeyAgICBjb2xvcjogJ3t7Zm9yZWdyb3VuZC0zfX0nOyB9bWQtaW5wdXQtZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZSBsYWJlbCB7ICB0ZXh0LXNoYWRvdzogJ3t7Zm9yZWdyb3VuZC1zaGFkb3d9fSc7ICBjb2xvcjogJ3t7Zm9yZWdyb3VuZC0zfX0nOyB9bWQtaW5wdXQtZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZSBpbnB1dCwgbWQtaW5wdXQtZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZSB0ZXh0YXJlYSB7ICBjb2xvcjogJ3t7Zm9yZWdyb3VuZC0xfX0nOyAgYm9yZGVyLWNvbG9yOiAne3tmb3JlZ3JvdW5kLTR9fSc7IH1tZC1pbnB1dC1ncm91cC5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWlucHV0LWZvY3VzZWQgaW5wdXQsIG1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtaW5wdXQtZm9jdXNlZCB0ZXh0YXJlYSB7ICBib3JkZXItY29sb3I6ICd7e3ByaW1hcnktNTAwfX0nOyB9bWQtaW5wdXQtZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1pbnB1dC1mb2N1c2VkIGxhYmVsIHsgIGNvbG9yOiAne3twcmltYXJ5LTUwMH19JzsgfW1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtaW5wdXQtZm9jdXNlZC5tZC1hY2NlbnQgaW5wdXQsIG1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtaW5wdXQtZm9jdXNlZC5tZC1hY2NlbnQgdGV4dGFyZWEgeyAgYm9yZGVyLWNvbG9yOiAne3thY2NlbnQtNTAwfX0nOyB9bWQtaW5wdXQtZ3JvdXAubWQtVEhFTUVfTkFNRS10aGVtZS5tZC1pbnB1dC1mb2N1c2VkLm1kLWFjY2VudCBsYWJlbCB7ICBjb2xvcjogJ3t7YWNjZW50LTUwMH19JzsgfW1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUubWQtaW5wdXQtaGFzLXZhbHVlOm5vdCgubWQtaW5wdXQtZm9jdXNlZCkgbGFiZWwgeyAgY29sb3I6ICd7e2ZvcmVncm91bmQtMn19JzsgfW1kLWlucHV0LWdyb3VwLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLWlucHV0W2Rpc2FibGVkXSB7ICBib3JkZXItYm90dG9tLWNvbG9yOiAne3tmb3JlZ3JvdW5kLTR9fSc7ICBjb2xvcjogJ3t7Zm9yZWdyb3VuZC0zfX0nOyB9bWQtdG9hc3QubWQtVEhFTUVfTkFNRS10aGVtZSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tmb3JlZ3JvdW5kLTF9fSc7ICBjb2xvcjogJ3t7YmFja2dyb3VuZC01MH19JzsgfSAgbWQtdG9hc3QubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtYnV0dG9uIHsgICAgY29sb3I6ICd7e2JhY2tncm91bmQtNTB9fSc7IH0gICAgbWQtdG9hc3QubWQtVEhFTUVfTkFNRS10aGVtZSAubWQtYnV0dG9uLm1kLWhpZ2hsaWdodCB7ICAgICAgY29sb3I6ICd7e3ByaW1hcnktQTIwMH19JzsgfSAgICAgIG1kLXRvYXN0Lm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLWJ1dHRvbi5tZC1oaWdobGlnaHQubWQtYWNjZW50IHsgICAgICAgIGNvbG9yOiAne3thY2NlbnQtQTIwMH19JzsgfSAgICAgIG1kLXRvYXN0Lm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLWJ1dHRvbi5tZC1oaWdobGlnaHQubWQtd2FybiB7ICAgICAgICBjb2xvcjogJ3t7d2Fybi1BMjAwfX0nOyB9bWQtdG9vbGJhci5tZC1USEVNRV9OQU1FLXRoZW1lIHsgIGJhY2tncm91bmQtY29sb3I6ICd7e3ByaW1hcnktY29sb3J9fSc7ICBjb2xvcjogJ3t7cHJpbWFyeS1jb250cmFzdH19JzsgfSAgbWQtdG9vbGJhci5tZC1USEVNRV9OQU1FLXRoZW1lIC5tZC1idXR0b24geyAgICBjb2xvcjogJ3t7cHJpbWFyeS1jb250cmFzdH19JzsgfSAgbWQtdG9vbGJhci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLWFjY2VudCB7ICAgIGJhY2tncm91bmQtY29sb3I6ICd7e2FjY2VudC1jb2xvcn19JzsgICAgY29sb3I6ICd7e2FjY2VudC1jb250cmFzdH19JzsgfSAgbWQtdG9vbGJhci5tZC1USEVNRV9OQU1FLXRoZW1lLm1kLXdhcm4geyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAne3t3YXJuLWNvbG9yfX0nOyAgICBjb2xvcjogJ3t7d2Fybi1jb250cmFzdH19JzsgfW1kLXRvb2x0aXAubWQtVEhFTUVfTkFNRS10aGVtZSB7ICBjb2xvcjogJ3t7YmFja2dyb3VuZC1BMTAwfX0nOyB9ICBtZC10b29sdGlwLm1kLVRIRU1FX05BTUUtdGhlbWUgLm1kLWJhY2tncm91bmQgeyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAne3tmb3JlZ3JvdW5kLTJ9fSc7IH1cIik7IiwiLyoqXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuMy4xM1xuICogKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiAqIExpY2Vuc2U6IE1JVFxuICovXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7J3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoaXMgb2JqZWN0IHByb3ZpZGVzIGEgdXRpbGl0eSBmb3IgcHJvZHVjaW5nIHJpY2ggRXJyb3IgbWVzc2FnZXMgd2l0aGluXG4gKiBBbmd1bGFyLiBJdCBjYW4gYmUgY2FsbGVkIGFzIGZvbGxvd3M6XG4gKlxuICogdmFyIGV4YW1wbGVNaW5FcnIgPSBtaW5FcnIoJ2V4YW1wbGUnKTtcbiAqIHRocm93IGV4YW1wbGVNaW5FcnIoJ29uZScsICdUaGlzIHswfSBpcyB7MX0nLCBmb28sIGJhcik7XG4gKlxuICogVGhlIGFib3ZlIGNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgbWluRXJyIGluIHRoZSBleGFtcGxlIG5hbWVzcGFjZS4gVGhlXG4gKiByZXN1bHRpbmcgZXJyb3Igd2lsbCBoYXZlIGEgbmFtZXNwYWNlZCBlcnJvciBjb2RlIG9mIGV4YW1wbGUub25lLiAgVGhlXG4gKiByZXN1bHRpbmcgZXJyb3Igd2lsbCByZXBsYWNlIHswfSB3aXRoIHRoZSB2YWx1ZSBvZiBmb28sIGFuZCB7MX0gd2l0aCB0aGVcbiAqIHZhbHVlIG9mIGJhci4gVGhlIG9iamVjdCBpcyBub3QgcmVzdHJpY3RlZCBpbiB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBpdCBjYW5cbiAqIHRha2UuXG4gKlxuICogSWYgZmV3ZXIgYXJndW1lbnRzIGFyZSBzcGVjaWZpZWQgdGhhbiBuZWNlc3NhcnkgZm9yIGludGVycG9sYXRpb24sIHRoZSBleHRyYVxuICogaW50ZXJwb2xhdGlvbiBtYXJrZXJzIHdpbGwgYmUgcHJlc2VydmVkIGluIHRoZSBmaW5hbCBzdHJpbmcuXG4gKlxuICogU2luY2UgZGF0YSB3aWxsIGJlIHBhcnNlZCBzdGF0aWNhbGx5IGR1cmluZyBhIGJ1aWxkIHN0ZXAsIHNvbWUgcmVzdHJpY3Rpb25zXG4gKiBhcmUgYXBwbGllZCB3aXRoIHJlc3BlY3QgdG8gaG93IG1pbkVyciBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYW5kIGNhbGxlZC5cbiAqIEluc3RhbmNlcyBzaG91bGQgaGF2ZSBuYW1lcyBvZiB0aGUgZm9ybSBuYW1lc3BhY2VNaW5FcnIgZm9yIGEgbWluRXJyIGNyZWF0ZWRcbiAqIHVzaW5nIG1pbkVycignbmFtZXNwYWNlJykgLiBFcnJvciBjb2RlcywgbmFtZXNwYWNlcyBhbmQgdGVtcGxhdGUgc3RyaW5nc1xuICogc2hvdWxkIGFsbCBiZSBzdGF0aWMgc3RyaW5ncywgbm90IHZhcmlhYmxlcyBvciBnZW5lcmFsIGV4cHJlc3Npb25zLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGUgVGhlIG5hbWVzcGFjZSB0byB1c2UgZm9yIHRoZSBuZXcgbWluRXJyIGluc3RhbmNlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gRXJyb3JDb25zdHJ1Y3RvciBDdXN0b20gZXJyb3IgY29uc3RydWN0b3IgdG8gYmUgaW5zdGFudGlhdGVkIHdoZW4gcmV0dXJuaW5nXG4gKiAgIGVycm9yIGZyb20gcmV0dXJuZWQgZnVuY3Rpb24sIGZvciBjYXNlcyB3aGVuIGEgcGFydGljdWxhciB0eXBlIG9mIGVycm9yIGlzIHVzZWZ1bC5cbiAqIEByZXR1cm5zIHtmdW5jdGlvbihjb2RlOnN0cmluZywgdGVtcGxhdGU6c3RyaW5nLCAuLi50ZW1wbGF0ZUFyZ3MpOiBFcnJvcn0gbWluRXJyIGluc3RhbmNlXG4gKi9cblxuZnVuY3Rpb24gbWluRXJyKG1vZHVsZSwgRXJyb3JDb25zdHJ1Y3Rvcikge1xuICBFcnJvckNvbnN0cnVjdG9yID0gRXJyb3JDb25zdHJ1Y3RvciB8fCBFcnJvcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb2RlID0gYXJndW1lbnRzWzBdLFxuICAgICAgcHJlZml4ID0gJ1snICsgKG1vZHVsZSA/IG1vZHVsZSArICc6JyA6ICcnKSArIGNvZGUgKyAnXSAnLFxuICAgICAgdGVtcGxhdGUgPSBhcmd1bWVudHNbMV0sXG4gICAgICB0ZW1wbGF0ZUFyZ3MgPSBhcmd1bWVudHMsXG5cbiAgICAgIG1lc3NhZ2UsIGk7XG5cbiAgICBtZXNzYWdlID0gcHJlZml4ICsgdGVtcGxhdGUucmVwbGFjZSgvXFx7XFxkK1xcfS9nLCBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgdmFyIGluZGV4ID0gK21hdGNoLnNsaWNlKDEsIC0xKSwgYXJnO1xuXG4gICAgICBpZiAoaW5kZXggKyAyIDwgdGVtcGxhdGVBcmdzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdG9EZWJ1Z1N0cmluZyh0ZW1wbGF0ZUFyZ3NbaW5kZXggKyAyXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG5cbiAgICBtZXNzYWdlID0gbWVzc2FnZSArICdcXG5odHRwOi8vZXJyb3JzLmFuZ3VsYXJqcy5vcmcvMS4zLjEzLycgK1xuICAgICAgKG1vZHVsZSA/IG1vZHVsZSArICcvJyA6ICcnKSArIGNvZGU7XG4gICAgZm9yIChpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAoaSA9PSAyID8gJz8nIDogJyYnKSArICdwJyArIChpIC0gMikgKyAnPScgK1xuICAgICAgICBlbmNvZGVVUklDb21wb25lbnQodG9EZWJ1Z1N0cmluZyhhcmd1bWVudHNbaV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvckNvbnN0cnVjdG9yKG1lc3NhZ2UpO1xuICB9O1xufVxuXG4vKiBXZSBuZWVkIHRvIHRlbGwganNoaW50IHdoYXQgdmFyaWFibGVzIGFyZSBiZWluZyBleHBvcnRlZCAqL1xuLyogZ2xvYmFsIGFuZ3VsYXI6IHRydWUsXG4gIG1zaWU6IHRydWUsXG4gIGpxTGl0ZTogdHJ1ZSxcbiAgalF1ZXJ5OiB0cnVlLFxuICBzbGljZTogdHJ1ZSxcbiAgc3BsaWNlOiB0cnVlLFxuICBwdXNoOiB0cnVlLFxuICB0b1N0cmluZzogdHJ1ZSxcbiAgbmdNaW5FcnI6IHRydWUsXG4gIGFuZ3VsYXJNb2R1bGU6IHRydWUsXG4gIHVpZDogdHJ1ZSxcbiAgUkVHRVhfU1RSSU5HX1JFR0VYUDogdHJ1ZSxcbiAgVkFMSURJVFlfU1RBVEVfUFJPUEVSVFk6IHRydWUsXG5cbiAgbG93ZXJjYXNlOiB0cnVlLFxuICB1cHBlcmNhc2U6IHRydWUsXG4gIG1hbnVhbExvd2VyY2FzZTogdHJ1ZSxcbiAgbWFudWFsVXBwZXJjYXNlOiB0cnVlLFxuICBub2RlTmFtZV86IHRydWUsXG4gIGlzQXJyYXlMaWtlOiB0cnVlLFxuICBmb3JFYWNoOiB0cnVlLFxuICBzb3J0ZWRLZXlzOiB0cnVlLFxuICBmb3JFYWNoU29ydGVkOiB0cnVlLFxuICByZXZlcnNlUGFyYW1zOiB0cnVlLFxuICBuZXh0VWlkOiB0cnVlLFxuICBzZXRIYXNoS2V5OiB0cnVlLFxuICBleHRlbmQ6IHRydWUsXG4gIGludDogdHJ1ZSxcbiAgaW5oZXJpdDogdHJ1ZSxcbiAgbm9vcDogdHJ1ZSxcbiAgaWRlbnRpdHk6IHRydWUsXG4gIHZhbHVlRm46IHRydWUsXG4gIGlzVW5kZWZpbmVkOiB0cnVlLFxuICBpc0RlZmluZWQ6IHRydWUsXG4gIGlzT2JqZWN0OiB0cnVlLFxuICBpc1N0cmluZzogdHJ1ZSxcbiAgaXNOdW1iZXI6IHRydWUsXG4gIGlzRGF0ZTogdHJ1ZSxcbiAgaXNBcnJheTogdHJ1ZSxcbiAgaXNGdW5jdGlvbjogdHJ1ZSxcbiAgaXNSZWdFeHA6IHRydWUsXG4gIGlzV2luZG93OiB0cnVlLFxuICBpc1Njb3BlOiB0cnVlLFxuICBpc0ZpbGU6IHRydWUsXG4gIGlzRm9ybURhdGE6IHRydWUsXG4gIGlzQmxvYjogdHJ1ZSxcbiAgaXNCb29sZWFuOiB0cnVlLFxuICBpc1Byb21pc2VMaWtlOiB0cnVlLFxuICB0cmltOiB0cnVlLFxuICBlc2NhcGVGb3JSZWdleHA6IHRydWUsXG4gIGlzRWxlbWVudDogdHJ1ZSxcbiAgbWFrZU1hcDogdHJ1ZSxcbiAgaW5jbHVkZXM6IHRydWUsXG4gIGFycmF5UmVtb3ZlOiB0cnVlLFxuICBjb3B5OiB0cnVlLFxuICBzaGFsbG93Q29weTogdHJ1ZSxcbiAgZXF1YWxzOiB0cnVlLFxuICBjc3A6IHRydWUsXG4gIGNvbmNhdDogdHJ1ZSxcbiAgc2xpY2VBcmdzOiB0cnVlLFxuICBiaW5kOiB0cnVlLFxuICB0b0pzb25SZXBsYWNlcjogdHJ1ZSxcbiAgdG9Kc29uOiB0cnVlLFxuICBmcm9tSnNvbjogdHJ1ZSxcbiAgc3RhcnRpbmdUYWc6IHRydWUsXG4gIHRyeURlY29kZVVSSUNvbXBvbmVudDogdHJ1ZSxcbiAgcGFyc2VLZXlWYWx1ZTogdHJ1ZSxcbiAgdG9LZXlWYWx1ZTogdHJ1ZSxcbiAgZW5jb2RlVXJpU2VnbWVudDogdHJ1ZSxcbiAgZW5jb2RlVXJpUXVlcnk6IHRydWUsXG4gIGFuZ3VsYXJJbml0OiB0cnVlLFxuICBib290c3RyYXA6IHRydWUsXG4gIGdldFRlc3RhYmlsaXR5OiB0cnVlLFxuICBzbmFrZV9jYXNlOiB0cnVlLFxuICBiaW5kSlF1ZXJ5OiB0cnVlLFxuICBhc3NlcnRBcmc6IHRydWUsXG4gIGFzc2VydEFyZ0ZuOiB0cnVlLFxuICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eTogdHJ1ZSxcbiAgZ2V0dGVyOiB0cnVlLFxuICBnZXRCbG9ja05vZGVzOiB0cnVlLFxuICBoYXNPd25Qcm9wZXJ0eTogdHJ1ZSxcbiAgY3JlYXRlTWFwOiB0cnVlLFxuXG4gIE5PREVfVFlQRV9FTEVNRU5UOiB0cnVlLFxuICBOT0RFX1RZUEVfVEVYVDogdHJ1ZSxcbiAgTk9ERV9UWVBFX0NPTU1FTlQ6IHRydWUsXG4gIE5PREVfVFlQRV9ET0NVTUVOVDogdHJ1ZSxcbiAgTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UOiB0cnVlLFxuKi9cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbmdcbiAqIEBtb2R1bGUgbmdcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqICMgbmcgKGNvcmUgbW9kdWxlKVxuICogVGhlIG5nIG1vZHVsZSBpcyBsb2FkZWQgYnkgZGVmYXVsdCB3aGVuIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiBpcyBzdGFydGVkLiBUaGUgbW9kdWxlIGl0c2VsZlxuICogY29udGFpbnMgdGhlIGVzc2VudGlhbCBjb21wb25lbnRzIGZvciBhbiBBbmd1bGFySlMgYXBwbGljYXRpb24gdG8gZnVuY3Rpb24uIFRoZSB0YWJsZSBiZWxvd1xuICogbGlzdHMgYSBoaWdoIGxldmVsIGJyZWFrZG93biBvZiBlYWNoIG9mIHRoZSBzZXJ2aWNlcy9mYWN0b3JpZXMsIGZpbHRlcnMsIGRpcmVjdGl2ZXMgYW5kIHRlc3RpbmdcbiAqIGNvbXBvbmVudHMgYXZhaWxhYmxlIHdpdGhpbiB0aGlzIGNvcmUgbW9kdWxlLlxuICpcbiAqIDxkaXYgZG9jLW1vZHVsZS1jb21wb25lbnRzPVwibmdcIj48L2Rpdj5cbiAqL1xuXG52YXIgUkVHRVhfU1RSSU5HX1JFR0VYUCA9IC9eXFwvKC4rKVxcLyhbYS16XSopJC87XG5cbi8vIFRoZSBuYW1lIG9mIGEgZm9ybSBjb250cm9sJ3MgVmFsaWRpdHlTdGF0ZSBwcm9wZXJ0eS5cbi8vIFRoaXMgaXMgdXNlZCBzbyB0aGF0IGl0J3MgcG9zc2libGUgZm9yIGludGVybmFsIHRlc3RzIHRvIGNyZWF0ZSBtb2NrIFZhbGlkaXR5U3RhdGVzLlxudmFyIFZBTElESVRZX1NUQVRFX1BST1BFUlRZID0gJ3ZhbGlkaXR5JztcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIubG93ZXJjYXNlXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvbiBDb252ZXJ0cyB0aGUgc3BlY2lmaWVkIHN0cmluZyB0byBsb3dlcmNhc2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZyB0byBiZSBjb252ZXJ0ZWQgdG8gbG93ZXJjYXNlLlxuICogQHJldHVybnMge3N0cmluZ30gTG93ZXJjYXNlZCBzdHJpbmcuXG4gKi9cbnZhciBsb3dlcmNhc2UgPSBmdW5jdGlvbihzdHJpbmcpIHtyZXR1cm4gaXNTdHJpbmcoc3RyaW5nKSA/IHN0cmluZy50b0xvd2VyQ2FzZSgpIDogc3RyaW5nO307XG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci51cHBlcmNhc2VcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uIENvbnZlcnRzIHRoZSBzcGVjaWZpZWQgc3RyaW5nIHRvIHVwcGVyY2FzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU3RyaW5nIHRvIGJlIGNvbnZlcnRlZCB0byB1cHBlcmNhc2UuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBVcHBlcmNhc2VkIHN0cmluZy5cbiAqL1xudmFyIHVwcGVyY2FzZSA9IGZ1bmN0aW9uKHN0cmluZykge3JldHVybiBpc1N0cmluZyhzdHJpbmcpID8gc3RyaW5nLnRvVXBwZXJDYXNlKCkgOiBzdHJpbmc7fTtcblxuXG52YXIgbWFudWFsTG93ZXJjYXNlID0gZnVuY3Rpb24ocykge1xuICAvKiBqc2hpbnQgYml0d2lzZTogZmFsc2UgKi9cbiAgcmV0dXJuIGlzU3RyaW5nKHMpXG4gICAgICA/IHMucmVwbGFjZSgvW0EtWl0vZywgZnVuY3Rpb24oY2gpIHtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaC5jaGFyQ29kZUF0KDApIHwgMzIpO30pXG4gICAgICA6IHM7XG59O1xudmFyIG1hbnVhbFVwcGVyY2FzZSA9IGZ1bmN0aW9uKHMpIHtcbiAgLyoganNoaW50IGJpdHdpc2U6IGZhbHNlICovXG4gIHJldHVybiBpc1N0cmluZyhzKVxuICAgICAgPyBzLnJlcGxhY2UoL1thLXpdL2csIGZ1bmN0aW9uKGNoKSB7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2guY2hhckNvZGVBdCgwKSAmIH4zMik7fSlcbiAgICAgIDogcztcbn07XG5cblxuLy8gU3RyaW5nI3RvTG93ZXJDYXNlIGFuZCBTdHJpbmcjdG9VcHBlckNhc2UgZG9uJ3QgcHJvZHVjZSBjb3JyZWN0IHJlc3VsdHMgaW4gYnJvd3NlcnMgd2l0aCBUdXJraXNoXG4vLyBsb2NhbGUsIGZvciB0aGlzIHJlYXNvbiB3ZSBuZWVkIHRvIGRldGVjdCB0aGlzIGNhc2UgYW5kIHJlZGVmaW5lIGxvd2VyY2FzZS91cHBlcmNhc2UgbWV0aG9kc1xuLy8gd2l0aCBjb3JyZWN0IGJ1dCBzbG93ZXIgYWx0ZXJuYXRpdmVzLlxuaWYgKCdpJyAhPT0gJ0knLnRvTG93ZXJDYXNlKCkpIHtcbiAgbG93ZXJjYXNlID0gbWFudWFsTG93ZXJjYXNlO1xuICB1cHBlcmNhc2UgPSBtYW51YWxVcHBlcmNhc2U7XG59XG5cblxudmFyXG4gICAgbXNpZSwgICAgICAgICAgICAgLy8gaG9sZHMgbWFqb3IgdmVyc2lvbiBudW1iZXIgZm9yIElFLCBvciBOYU4gaWYgVUEgaXMgbm90IElFLlxuICAgIGpxTGl0ZSwgICAgICAgICAgIC8vIGRlbGF5IGJpbmRpbmcgc2luY2UgalF1ZXJ5IGNvdWxkIGJlIGxvYWRlZCBhZnRlciB1cy5cbiAgICBqUXVlcnksICAgICAgICAgICAvLyBkZWxheSBiaW5kaW5nXG4gICAgc2xpY2UgICAgICAgICAgICAgPSBbXS5zbGljZSxcbiAgICBzcGxpY2UgICAgICAgICAgICA9IFtdLnNwbGljZSxcbiAgICBwdXNoICAgICAgICAgICAgICA9IFtdLnB1c2gsXG4gICAgdG9TdHJpbmcgICAgICAgICAgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLFxuICAgIG5nTWluRXJyICAgICAgICAgID0gbWluRXJyKCduZycpLFxuXG4gICAgLyoqIEBuYW1lIGFuZ3VsYXIgKi9cbiAgICBhbmd1bGFyICAgICAgICAgICA9IHdpbmRvdy5hbmd1bGFyIHx8ICh3aW5kb3cuYW5ndWxhciA9IHt9KSxcbiAgICBhbmd1bGFyTW9kdWxlLFxuICAgIHVpZCAgICAgICAgICAgICAgID0gMDtcblxuLyoqXG4gKiBkb2N1bWVudE1vZGUgaXMgYW4gSUUtb25seSBwcm9wZXJ0eVxuICogaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2NjMTk2OTg4KHY9dnMuODUpLmFzcHhcbiAqL1xubXNpZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcblxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGBvYmpgIGlzIGFuIGFycmF5IG9yIGFycmF5LWxpa2Ugb2JqZWN0IChOb2RlTGlzdCwgQXJndW1lbnRzLFxuICogICAgICAgICAgICAgICAgICAgU3RyaW5nIC4uLilcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2Uob2JqKSB7XG4gIGlmIChvYmogPT0gbnVsbCB8fCBpc1dpbmRvdyhvYmopKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGxlbmd0aCA9IG9iai5sZW5ndGg7XG5cbiAgaWYgKG9iai5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQgJiYgbGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gaXNTdHJpbmcob2JqKSB8fCBpc0FycmF5KG9iaikgfHwgbGVuZ3RoID09PSAwIHx8XG4gICAgICAgICB0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJyAmJiBsZW5ndGggPiAwICYmIChsZW5ndGggLSAxKSBpbiBvYmo7XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmZvckVhY2hcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBJbnZva2VzIHRoZSBgaXRlcmF0b3JgIGZ1bmN0aW9uIG9uY2UgZm9yIGVhY2ggaXRlbSBpbiBgb2JqYCBjb2xsZWN0aW9uLCB3aGljaCBjYW4gYmUgZWl0aGVyIGFuXG4gKiBvYmplY3Qgb3IgYW4gYXJyYXkuIFRoZSBgaXRlcmF0b3JgIGZ1bmN0aW9uIGlzIGludm9rZWQgd2l0aCBgaXRlcmF0b3IodmFsdWUsIGtleSwgb2JqKWAsIHdoZXJlIGB2YWx1ZWBcbiAqIGlzIHRoZSB2YWx1ZSBvZiBhbiBvYmplY3QgcHJvcGVydHkgb3IgYW4gYXJyYXkgZWxlbWVudCwgYGtleWAgaXMgdGhlIG9iamVjdCBwcm9wZXJ0eSBrZXkgb3JcbiAqIGFycmF5IGVsZW1lbnQgaW5kZXggYW5kIG9iaiBpcyB0aGUgYG9iamAgaXRzZWxmLiBTcGVjaWZ5aW5nIGEgYGNvbnRleHRgIGZvciB0aGUgZnVuY3Rpb24gaXMgb3B0aW9uYWwuXG4gKlxuICogSXQgaXMgd29ydGggbm90aW5nIHRoYXQgYC5mb3JFYWNoYCBkb2VzIG5vdCBpdGVyYXRlIG92ZXIgaW5oZXJpdGVkIHByb3BlcnRpZXMgYmVjYXVzZSBpdCBmaWx0ZXJzXG4gKiB1c2luZyB0aGUgYGhhc093blByb3BlcnR5YCBtZXRob2QuXG4gKlxuICogVW5saWtlIEVTMjYyJ3NcbiAqIFtBcnJheS5wcm90b3R5cGUuZm9yRWFjaF0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjQuNC4xOCksXG4gKiBQcm92aWRpbmcgJ3VuZGVmaW5lZCcgb3IgJ251bGwnIHZhbHVlcyBmb3IgYG9iamAgd2lsbCBub3QgdGhyb3cgYSBUeXBlRXJyb3IsIGJ1dCByYXRoZXIganVzdFxuICogcmV0dXJuIHRoZSB2YWx1ZSBwcm92aWRlZC5cbiAqXG4gICBgYGBqc1xuICAgICB2YXIgdmFsdWVzID0ge25hbWU6ICdtaXNrbycsIGdlbmRlcjogJ21hbGUnfTtcbiAgICAgdmFyIGxvZyA9IFtdO1xuICAgICBhbmd1bGFyLmZvckVhY2godmFsdWVzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgdGhpcy5wdXNoKGtleSArICc6ICcgKyB2YWx1ZSk7XG4gICAgIH0sIGxvZyk7XG4gICAgIGV4cGVjdChsb2cpLnRvRXF1YWwoWyduYW1lOiBtaXNrbycsICdnZW5kZXI6IG1hbGUnXSk7XG4gICBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIE9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRvciBJdGVyYXRvciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gY29udGV4dCBPYmplY3QgdG8gYmVjb21lIGNvbnRleHQgKGB0aGlzYCkgZm9yIHRoZSBpdGVyYXRvciBmdW5jdGlvbi5cbiAqIEByZXR1cm5zIHtPYmplY3R8QXJyYXl9IFJlZmVyZW5jZSB0byBgb2JqYC5cbiAqL1xuXG5mdW5jdGlvbiBmb3JFYWNoKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgdmFyIGtleSwgbGVuZ3RoO1xuICBpZiAob2JqKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24ob2JqKSkge1xuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIC8vIE5lZWQgdG8gY2hlY2sgaWYgaGFzT3duUHJvcGVydHkgZXhpc3RzLFxuICAgICAgICAvLyBhcyBvbiBJRTggdGhlIHJlc3VsdCBvZiBxdWVyeVNlbGVjdG9yQWxsIGlzIGFuIG9iamVjdCB3aXRob3V0IGEgaGFzT3duUHJvcGVydHkgZnVuY3Rpb25cbiAgICAgICAgaWYgKGtleSAhPSAncHJvdG90eXBlJyAmJiBrZXkgIT0gJ2xlbmd0aCcgJiYga2V5ICE9ICduYW1lJyAmJiAoIW9iai5oYXNPd25Qcm9wZXJ0eSB8fCBvYmouaGFzT3duUHJvcGVydHkoa2V5KSkpIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqKSB8fCBpc0FycmF5TGlrZShvYmopKSB7XG4gICAgICB2YXIgaXNQcmltaXRpdmUgPSB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JztcbiAgICAgIGZvciAoa2V5ID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsga2V5IDwgbGVuZ3RoOyBrZXkrKykge1xuICAgICAgICBpZiAoaXNQcmltaXRpdmUgfHwga2V5IGluIG9iaikge1xuICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob2JqLmZvckVhY2ggJiYgb2JqLmZvckVhY2ggIT09IGZvckVhY2gpIHtcbiAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQsIG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gc29ydGVkS2V5cyhvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikuc29ydCgpO1xufVxuXG5mdW5jdGlvbiBmb3JFYWNoU29ydGVkKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgdmFyIGtleXMgPSBzb3J0ZWRLZXlzKG9iaik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleXNbaV1dLCBrZXlzW2ldKTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn1cblxuXG4vKipcbiAqIHdoZW4gdXNpbmcgZm9yRWFjaCB0aGUgcGFyYW1zIGFyZSB2YWx1ZSwga2V5LCBidXQgaXQgaXMgb2Z0ZW4gdXNlZnVsIHRvIGhhdmUga2V5LCB2YWx1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCAqKX0gaXRlcmF0b3JGblxuICogQHJldHVybnMge2Z1bmN0aW9uKCosIHN0cmluZyl9XG4gKi9cbmZ1bmN0aW9uIHJldmVyc2VQYXJhbXMoaXRlcmF0b3JGbikge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGtleSkgeyBpdGVyYXRvckZuKGtleSwgdmFsdWUpOyB9O1xufVxuXG4vKipcbiAqIEEgY29uc2lzdGVudCB3YXkgb2YgY3JlYXRpbmcgdW5pcXVlIElEcyBpbiBhbmd1bGFyLlxuICpcbiAqIFVzaW5nIHNpbXBsZSBudW1iZXJzIGFsbG93cyB1cyB0byBnZW5lcmF0ZSAyOC42IG1pbGxpb24gdW5pcXVlIGlkcyBwZXIgc2Vjb25kIGZvciAxMCB5ZWFycyBiZWZvcmVcbiAqIHdlIGhpdCBudW1iZXIgcHJlY2lzaW9uIGlzc3VlcyBpbiBKYXZhU2NyaXB0LlxuICpcbiAqIE1hdGgucG93KDIsNTMpIC8gNjAgLyA2MCAvIDI0IC8gMzY1IC8gMTAgPSAyOC42TVxuICpcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGFuIHVuaXF1ZSBhbHBoYS1udW1lcmljIHN0cmluZ1xuICovXG5mdW5jdGlvbiBuZXh0VWlkKCkge1xuICByZXR1cm4gKyt1aWQ7XG59XG5cblxuLyoqXG4gKiBTZXQgb3IgY2xlYXIgdGhlIGhhc2hrZXkgZm9yIGFuIG9iamVjdC5cbiAqIEBwYXJhbSBvYmogb2JqZWN0XG4gKiBAcGFyYW0gaCB0aGUgaGFzaGtleSAoIXRydXRoeSB0byBkZWxldGUgdGhlIGhhc2hrZXkpXG4gKi9cbmZ1bmN0aW9uIHNldEhhc2hLZXkob2JqLCBoKSB7XG4gIGlmIChoKSB7XG4gICAgb2JqLiQkaGFzaEtleSA9IGg7XG4gIH0gZWxzZSB7XG4gICAgZGVsZXRlIG9iai4kJGhhc2hLZXk7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZXh0ZW5kXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRXh0ZW5kcyB0aGUgZGVzdGluYXRpb24gb2JqZWN0IGBkc3RgIGJ5IGNvcHlpbmcgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBmcm9tIHRoZSBgc3JjYCBvYmplY3QocylcbiAqIHRvIGBkc3RgLiBZb3UgY2FuIHNwZWNpZnkgbXVsdGlwbGUgYHNyY2Agb2JqZWN0cy4gSWYgeW91IHdhbnQgdG8gcHJlc2VydmUgb3JpZ2luYWwgb2JqZWN0cywgeW91IGNhbiBkbyBzb1xuICogYnkgcGFzc2luZyBhbiBlbXB0eSBvYmplY3QgYXMgdGhlIHRhcmdldDogYHZhciBvYmplY3QgPSBhbmd1bGFyLmV4dGVuZCh7fSwgb2JqZWN0MSwgb2JqZWN0MilgLlxuICogTm90ZTogS2VlcCBpbiBtaW5kIHRoYXQgYGFuZ3VsYXIuZXh0ZW5kYCBkb2VzIG5vdCBzdXBwb3J0IHJlY3Vyc2l2ZSBtZXJnZSAoZGVlcCBjb3B5KS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZHN0IERlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBzcmMgU291cmNlIG9iamVjdChzKS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlZmVyZW5jZSB0byBgZHN0YC5cbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKGRzdCkge1xuICB2YXIgaCA9IGRzdC4kJGhhc2hLZXk7XG5cbiAgZm9yICh2YXIgaSA9IDEsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICB2YXIgb2JqID0gYXJndW1lbnRzW2ldO1xuICAgIGlmIChvYmopIHtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGtleXMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tqXTtcbiAgICAgICAgZHN0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRIYXNoS2V5KGRzdCwgaCk7XG4gIHJldHVybiBkc3Q7XG59XG5cbmZ1bmN0aW9uIGludChzdHIpIHtcbiAgcmV0dXJuIHBhcnNlSW50KHN0ciwgMTApO1xufVxuXG5cbmZ1bmN0aW9uIGluaGVyaXQocGFyZW50LCBleHRyYSkge1xuICByZXR1cm4gZXh0ZW5kKE9iamVjdC5jcmVhdGUocGFyZW50KSwgZXh0cmEpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5ub29wXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIG5vIG9wZXJhdGlvbnMuIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWZ1bCB3aGVuIHdyaXRpbmcgY29kZSBpbiB0aGVcbiAqIGZ1bmN0aW9uYWwgc3R5bGUuXG4gICBgYGBqc1xuICAgICBmdW5jdGlvbiBmb28oY2FsbGJhY2spIHtcbiAgICAgICB2YXIgcmVzdWx0ID0gY2FsY3VsYXRlUmVzdWx0KCk7XG4gICAgICAgKGNhbGxiYWNrIHx8IGFuZ3VsYXIubm9vcCkocmVzdWx0KTtcbiAgICAgfVxuICAgYGBgXG4gKi9cbmZ1bmN0aW9uIG5vb3AoKSB7fVxubm9vcC4kaW5qZWN0ID0gW107XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaWRlbnRpdHlcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBpdHMgZmlyc3QgYXJndW1lbnQuIFRoaXMgZnVuY3Rpb24gaXMgdXNlZnVsIHdoZW4gd3JpdGluZyBjb2RlIGluIHRoZVxuICogZnVuY3Rpb25hbCBzdHlsZS5cbiAqXG4gICBgYGBqc1xuICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1lcih0cmFuc2Zvcm1hdGlvbkZuLCB2YWx1ZSkge1xuICAgICAgIHJldHVybiAodHJhbnNmb3JtYXRpb25GbiB8fCBhbmd1bGFyLmlkZW50aXR5KSh2YWx1ZSk7XG4gICAgIH07XG4gICBgYGBcbiAgKiBAcGFyYW0geyp9IHZhbHVlIHRvIGJlIHJldHVybmVkLlxuICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgcGFzc2VkIGluLlxuICovXG5mdW5jdGlvbiBpZGVudGl0eSgkKSB7cmV0dXJuICQ7fVxuaWRlbnRpdHkuJGluamVjdCA9IFtdO1xuXG5cbmZ1bmN0aW9uIHZhbHVlRm4odmFsdWUpIHtyZXR1cm4gZnVuY3Rpb24oKSB7cmV0dXJuIHZhbHVlO307fVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc1VuZGVmaW5lZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgdW5kZWZpbmVkLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyB1bmRlZmluZWQuXG4gKi9cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCc7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzRGVmaW5lZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgZGVmaW5lZC5cbiAqL1xuZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCc7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzT2JqZWN0XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgT2JqZWN0YC4gVW5saWtlIGB0eXBlb2ZgIGluIEphdmFTY3JpcHQsIGBudWxsYHMgYXJlIG5vdFxuICogY29uc2lkZXJlZCB0byBiZSBvYmplY3RzLiBOb3RlIHRoYXQgSmF2YVNjcmlwdCBhcnJheXMgYXJlIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBPYmplY3RgIGJ1dCBub3QgYG51bGxgLlxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBodHRwOi8vanNwZXJmLmNvbS9pc29iamVjdDRcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNTdHJpbmdcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGEgYFN0cmluZ2AuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYFN0cmluZ2AuXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZyc7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzTnVtYmVyXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIGBOdW1iZXJgLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBOdW1iZXJgLlxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWx1ZSkge3JldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInO31cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc0RhdGVcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIGEgdmFsdWUgaXMgYSBkYXRlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBEYXRlYC5cbiAqL1xuZnVuY3Rpb24gaXNEYXRlKHZhbHVlKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzQXJyYXlcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGFuIGBBcnJheWAuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBBcnJheWAuXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNGdW5jdGlvblxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgRnVuY3Rpb25gLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBGdW5jdGlvbmAuXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO31cblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgYSB2YWx1ZSBpcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBSZWdFeHBgLlxuICovXG5mdW5jdGlvbiBpc1JlZ0V4cCh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIGBvYmpgIGlzIGEgd2luZG93IG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBvYmogT2JqZWN0IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqYCBpcyBhIHdpbmRvdyBvYmouXG4gKi9cbmZ1bmN0aW9uIGlzV2luZG93KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai53aW5kb3cgPT09IG9iajtcbn1cblxuXG5mdW5jdGlvbiBpc1Njb3BlKG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai4kZXZhbEFzeW5jICYmIG9iai4kd2F0Y2g7XG59XG5cblxuZnVuY3Rpb24gaXNGaWxlKG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBGaWxlXSc7XG59XG5cblxuZnVuY3Rpb24gaXNGb3JtRGF0YShvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgRm9ybURhdGFdJztcbn1cblxuXG5mdW5jdGlvbiBpc0Jsb2Iob2JqKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuXG5mdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nO1xufVxuXG5cbmZ1bmN0aW9uIGlzUHJvbWlzZUxpa2Uob2JqKSB7XG4gIHJldHVybiBvYmogJiYgaXNGdW5jdGlvbihvYmoudGhlbik7XG59XG5cblxudmFyIHRyaW0gPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gaXNTdHJpbmcodmFsdWUpID8gdmFsdWUudHJpbSgpIDogdmFsdWU7XG59O1xuXG4vLyBDb3BpZWQgZnJvbTpcbi8vIGh0dHA6Ly9kb2NzLmNsb3N1cmUtbGlicmFyeS5nb29nbGVjb2RlLmNvbS9naXQvbG9jYWxfY2xvc3VyZV9nb29nX3N0cmluZ19zdHJpbmcuanMuc291cmNlLmh0bWwjbGluZTEwMjFcbi8vIFByZXJlcTogcyBpcyBhIHN0cmluZy5cbnZhciBlc2NhcGVGb3JSZWdleHAgPSBmdW5jdGlvbihzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoLyhbLSgpXFxbXFxde30rPyouJFxcXnwsOiM8IVxcXFxdKS9nLCAnXFxcXCQxJykuXG4gICAgICAgICAgIHJlcGxhY2UoL1xceDA4L2csICdcXFxceDA4Jyk7XG59O1xuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzRWxlbWVudFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBET00gZWxlbWVudCAob3Igd3JhcHBlZCBqUXVlcnkgZWxlbWVudCkuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgRE9NIGVsZW1lbnQgKG9yIHdyYXBwZWQgalF1ZXJ5IGVsZW1lbnQpLlxuICovXG5mdW5jdGlvbiBpc0VsZW1lbnQobm9kZSkge1xuICByZXR1cm4gISEobm9kZSAmJlxuICAgIChub2RlLm5vZGVOYW1lICAvLyB3ZSBhcmUgYSBkaXJlY3QgZWxlbWVudFxuICAgIHx8IChub2RlLnByb3AgJiYgbm9kZS5hdHRyICYmIG5vZGUuZmluZCkpKTsgIC8vIHdlIGhhdmUgYW4gb24gYW5kIGZpbmQgbWV0aG9kIHBhcnQgb2YgalF1ZXJ5IEFQSVxufVxuXG4vKipcbiAqIEBwYXJhbSBzdHIgJ2tleTEsa2V5MiwuLi4nXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBpbiB0aGUgZm9ybSBvZiB7a2V5MTp0cnVlLCBrZXkyOnRydWUsIC4uLn1cbiAqL1xuZnVuY3Rpb24gbWFrZU1hcChzdHIpIHtcbiAgdmFyIG9iaiA9IHt9LCBpdGVtcyA9IHN0ci5zcGxpdChcIixcIiksIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKylcbiAgICBvYmpbaXRlbXNbaV1dID0gdHJ1ZTtcbiAgcmV0dXJuIG9iajtcbn1cblxuXG5mdW5jdGlvbiBub2RlTmFtZV8oZWxlbWVudCkge1xuICByZXR1cm4gbG93ZXJjYXNlKGVsZW1lbnQubm9kZU5hbWUgfHwgKGVsZW1lbnRbMF0gJiYgZWxlbWVudFswXS5ub2RlTmFtZSkpO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlcyhhcnJheSwgb2JqKSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGFycmF5LCBvYmopICE9IC0xO1xufVxuXG5mdW5jdGlvbiBhcnJheVJlbW92ZShhcnJheSwgdmFsdWUpIHtcbiAgdmFyIGluZGV4ID0gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XG4gIGlmIChpbmRleCA+PSAwKVxuICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuY29weVxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgYHNvdXJjZWAsIHdoaWNoIHNob3VsZCBiZSBhbiBvYmplY3Qgb3IgYW4gYXJyYXkuXG4gKlxuICogKiBJZiBubyBkZXN0aW5hdGlvbiBpcyBzdXBwbGllZCwgYSBjb3B5IG9mIHRoZSBvYmplY3Qgb3IgYXJyYXkgaXMgY3JlYXRlZC5cbiAqICogSWYgYSBkZXN0aW5hdGlvbiBpcyBwcm92aWRlZCwgYWxsIG9mIGl0cyBlbGVtZW50cyAoZm9yIGFycmF5cykgb3IgcHJvcGVydGllcyAoZm9yIG9iamVjdHMpXG4gKiAgIGFyZSBkZWxldGVkIGFuZCB0aGVuIGFsbCBlbGVtZW50cy9wcm9wZXJ0aWVzIGZyb20gdGhlIHNvdXJjZSBhcmUgY29waWVkIHRvIGl0LlxuICogKiBJZiBgc291cmNlYCBpcyBub3QgYW4gb2JqZWN0IG9yIGFycmF5IChpbmMuIGBudWxsYCBhbmQgYHVuZGVmaW5lZGApLCBgc291cmNlYCBpcyByZXR1cm5lZC5cbiAqICogSWYgYHNvdXJjZWAgaXMgaWRlbnRpY2FsIHRvICdkZXN0aW5hdGlvbicgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duLlxuICpcbiAqIEBwYXJhbSB7Kn0gc291cmNlIFRoZSBzb3VyY2UgdGhhdCB3aWxsIGJlIHVzZWQgdG8gbWFrZSBhIGNvcHkuXG4gKiAgICAgICAgICAgICAgICAgICBDYW4gYmUgYW55IHR5cGUsIGluY2x1ZGluZyBwcmltaXRpdmVzLCBgbnVsbGAsIGFuZCBgdW5kZWZpbmVkYC5cbiAqIEBwYXJhbSB7KE9iamVjdHxBcnJheSk9fSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBpbnRvIHdoaWNoIHRoZSBzb3VyY2UgaXMgY29waWVkLiBJZlxuICogICAgIHByb3ZpZGVkLCBtdXN0IGJlIG9mIHRoZSBzYW1lIHR5cGUgYXMgYHNvdXJjZWAuXG4gKiBAcmV0dXJucyB7Kn0gVGhlIGNvcHkgb3IgdXBkYXRlZCBgZGVzdGluYXRpb25gLCBpZiBgZGVzdGluYXRpb25gIHdhcyBzcGVjaWZpZWQuXG4gKlxuICogQGV4YW1wbGVcbiA8ZXhhbXBsZSBtb2R1bGU9XCJjb3B5RXhhbXBsZVwiPlxuIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiA8Zm9ybSBub3ZhbGlkYXRlIGNsYXNzPVwic2ltcGxlLWZvcm1cIj5cbiBOYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVzZXIubmFtZVwiIC8+PGJyIC8+XG4gRS1tYWlsOiA8aW5wdXQgdHlwZT1cImVtYWlsXCIgbmctbW9kZWw9XCJ1c2VyLmVtYWlsXCIgLz48YnIgLz5cbiBHZW5kZXI6IDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cInVzZXIuZ2VuZGVyXCIgdmFsdWU9XCJtYWxlXCIgLz5tYWxlXG4gPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwidXNlci5nZW5kZXJcIiB2YWx1ZT1cImZlbWFsZVwiIC8+ZmVtYWxlPGJyIC8+XG4gPGJ1dHRvbiBuZy1jbGljaz1cInJlc2V0KClcIj5SRVNFVDwvYnV0dG9uPlxuIDxidXR0b24gbmctY2xpY2s9XCJ1cGRhdGUodXNlcilcIj5TQVZFPC9idXR0b24+XG4gPC9mb3JtPlxuIDxwcmU+Zm9ybSA9IHt7dXNlciB8IGpzb259fTwvcHJlPlxuIDxwcmU+bWFzdGVyID0ge3ttYXN0ZXIgfCBqc29ufX08L3ByZT5cbiA8L2Rpdj5cblxuIDxzY3JpcHQ+XG4gIGFuZ3VsYXIubW9kdWxlKCdjb3B5RXhhbXBsZScsIFtdKVxuICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAkc2NvcGUubWFzdGVyPSB7fTtcblxuICAgICAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgLy8gRXhhbXBsZSB3aXRoIDEgYXJndW1lbnRcbiAgICAgICAgJHNjb3BlLm1hc3Rlcj0gYW5ndWxhci5jb3B5KHVzZXIpO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIEV4YW1wbGUgd2l0aCAyIGFyZ3VtZW50c1xuICAgICAgICBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hc3RlciwgJHNjb3BlLnVzZXIpO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnJlc2V0KCk7XG4gICAgfV0pO1xuIDwvc2NyaXB0PlxuIDwvZmlsZT5cbiA8L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uIGNvcHkoc291cmNlLCBkZXN0aW5hdGlvbiwgc3RhY2tTb3VyY2UsIHN0YWNrRGVzdCkge1xuICBpZiAoaXNXaW5kb3coc291cmNlKSB8fCBpc1Njb3BlKHNvdXJjZSkpIHtcbiAgICB0aHJvdyBuZ01pbkVycignY3B3cycsXG4gICAgICBcIkNhbid0IGNvcHkhIE1ha2luZyBjb3BpZXMgb2YgV2luZG93IG9yIFNjb3BlIGluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLlwiKTtcbiAgfVxuXG4gIGlmICghZGVzdGluYXRpb24pIHtcbiAgICBkZXN0aW5hdGlvbiA9IHNvdXJjZTtcbiAgICBpZiAoc291cmNlKSB7XG4gICAgICBpZiAoaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICAgIGRlc3RpbmF0aW9uID0gY29weShzb3VyY2UsIFtdLCBzdGFja1NvdXJjZSwgc3RhY2tEZXN0KTtcbiAgICAgIH0gZWxzZSBpZiAoaXNEYXRlKHNvdXJjZSkpIHtcbiAgICAgICAgZGVzdGluYXRpb24gPSBuZXcgRGF0ZShzb3VyY2UuZ2V0VGltZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNSZWdFeHAoc291cmNlKSkge1xuICAgICAgICBkZXN0aW5hdGlvbiA9IG5ldyBSZWdFeHAoc291cmNlLnNvdXJjZSwgc291cmNlLnRvU3RyaW5nKCkubWF0Y2goL1teXFwvXSokLylbMF0pO1xuICAgICAgICBkZXN0aW5hdGlvbi5sYXN0SW5kZXggPSBzb3VyY2UubGFzdEluZGV4O1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChzb3VyY2UpKSB7XG4gICAgICAgIHZhciBlbXB0eU9iamVjdCA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHNvdXJjZSkpO1xuICAgICAgICBkZXN0aW5hdGlvbiA9IGNvcHkoc291cmNlLCBlbXB0eU9iamVjdCwgc3RhY2tTb3VyY2UsIHN0YWNrRGVzdCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChzb3VyY2UgPT09IGRlc3RpbmF0aW9uKSB0aHJvdyBuZ01pbkVycignY3BpJyxcbiAgICAgIFwiQ2FuJ3QgY29weSEgU291cmNlIGFuZCBkZXN0aW5hdGlvbiBhcmUgaWRlbnRpY2FsLlwiKTtcblxuICAgIHN0YWNrU291cmNlID0gc3RhY2tTb3VyY2UgfHwgW107XG4gICAgc3RhY2tEZXN0ID0gc3RhY2tEZXN0IHx8IFtdO1xuXG4gICAgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHZhciBpbmRleCA9IHN0YWNrU291cmNlLmluZGV4T2Yoc291cmNlKTtcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHJldHVybiBzdGFja0Rlc3RbaW5kZXhdO1xuXG4gICAgICBzdGFja1NvdXJjZS5wdXNoKHNvdXJjZSk7XG4gICAgICBzdGFja0Rlc3QucHVzaChkZXN0aW5hdGlvbik7XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICBkZXN0aW5hdGlvbi5sZW5ndGggPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0ID0gY29weShzb3VyY2VbaV0sIG51bGwsIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpO1xuICAgICAgICBpZiAoaXNPYmplY3Qoc291cmNlW2ldKSkge1xuICAgICAgICAgIHN0YWNrU291cmNlLnB1c2goc291cmNlW2ldKTtcbiAgICAgICAgICBzdGFja0Rlc3QucHVzaChyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGRlc3RpbmF0aW9uLnB1c2gocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGggPSBkZXN0aW5hdGlvbi4kJGhhc2hLZXk7XG4gICAgICBpZiAoaXNBcnJheShkZXN0aW5hdGlvbikpIHtcbiAgICAgICAgZGVzdGluYXRpb24ubGVuZ3RoID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvckVhY2goZGVzdGluYXRpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICBkZWxldGUgZGVzdGluYXRpb25ba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIHJlc3VsdCA9IGNvcHkoc291cmNlW2tleV0sIG51bGwsIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpO1xuICAgICAgICAgIGlmIChpc09iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgICAgIHN0YWNrU291cmNlLnB1c2goc291cmNlW2tleV0pO1xuICAgICAgICAgICAgc3RhY2tEZXN0LnB1c2gocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzdGluYXRpb25ba2V5XSA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2V0SGFzaEtleShkZXN0aW5hdGlvbixoKTtcbiAgICB9XG5cbiAgfVxuICByZXR1cm4gZGVzdGluYXRpb247XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHNoYWxsb3cgY29weSBvZiBhbiBvYmplY3QsIGFuIGFycmF5IG9yIGEgcHJpbWl0aXZlLlxuICpcbiAqIEFzc3VtZXMgdGhhdCB0aGVyZSBhcmUgbm8gcHJvdG8gcHJvcGVydGllcyBmb3Igb2JqZWN0cy5cbiAqL1xuZnVuY3Rpb24gc2hhbGxvd0NvcHkoc3JjLCBkc3QpIHtcbiAgaWYgKGlzQXJyYXkoc3JjKSkge1xuICAgIGRzdCA9IGRzdCB8fCBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHNyYy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBkc3RbaV0gPSBzcmNbaV07XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNyYykpIHtcbiAgICBkc3QgPSBkc3QgfHwge307XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XG4gICAgICBpZiAoIShrZXkuY2hhckF0KDApID09PSAnJCcgJiYga2V5LmNoYXJBdCgxKSA9PT0gJyQnKSkge1xuICAgICAgICBkc3Rba2V5XSA9IHNyY1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkc3QgfHwgc3JjO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmVxdWFsc1xuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgdHdvIG9iamVjdHMgb3IgdHdvIHZhbHVlcyBhcmUgZXF1aXZhbGVudC4gU3VwcG9ydHMgdmFsdWUgdHlwZXMsIHJlZ3VsYXJcbiAqIGV4cHJlc3Npb25zLCBhcnJheXMgYW5kIG9iamVjdHMuXG4gKlxuICogVHdvIG9iamVjdHMgb3IgdmFsdWVzIGFyZSBjb25zaWRlcmVkIGVxdWl2YWxlbnQgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBmb2xsb3dpbmcgaXMgdHJ1ZTpcbiAqXG4gKiAqIEJvdGggb2JqZWN0cyBvciB2YWx1ZXMgcGFzcyBgPT09YCBjb21wYXJpc29uLlxuICogKiBCb3RoIG9iamVjdHMgb3IgdmFsdWVzIGFyZSBvZiB0aGUgc2FtZSB0eXBlIGFuZCBhbGwgb2YgdGhlaXIgcHJvcGVydGllcyBhcmUgZXF1YWwgYnlcbiAqICAgY29tcGFyaW5nIHRoZW0gd2l0aCBgYW5ndWxhci5lcXVhbHNgLlxuICogKiBCb3RoIHZhbHVlcyBhcmUgTmFOLiAoSW4gSmF2YVNjcmlwdCwgTmFOID09IE5hTiA9PiBmYWxzZS4gQnV0IHdlIGNvbnNpZGVyIHR3byBOYU4gYXMgZXF1YWwpXG4gKiAqIEJvdGggdmFsdWVzIHJlcHJlc2VudCB0aGUgc2FtZSByZWd1bGFyIGV4cHJlc3Npb24gKEluIEphdmFTY3JpcHQsXG4gKiAgIC9hYmMvID09IC9hYmMvID0+IGZhbHNlLiBCdXQgd2UgY29uc2lkZXIgdHdvIHJlZ3VsYXIgZXhwcmVzc2lvbnMgYXMgZXF1YWwgd2hlbiB0aGVpciB0ZXh0dWFsXG4gKiAgIHJlcHJlc2VudGF0aW9uIG1hdGNoZXMpLlxuICpcbiAqIER1cmluZyBhIHByb3BlcnR5IGNvbXBhcmlzb24sIHByb3BlcnRpZXMgb2YgYGZ1bmN0aW9uYCB0eXBlIGFuZCBwcm9wZXJ0aWVzIHdpdGggbmFtZXNcbiAqIHRoYXQgYmVnaW4gd2l0aCBgJGAgYXJlIGlnbm9yZWQuXG4gKlxuICogU2NvcGUgYW5kIERPTVdpbmRvdyBvYmplY3RzIGFyZSBiZWluZyBjb21wYXJlZCBvbmx5IGJ5IGlkZW50aWZ5IChgPT09YCkuXG4gKlxuICogQHBhcmFtIHsqfSBvMSBPYmplY3Qgb3IgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gbzIgT2JqZWN0IG9yIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBhcmd1bWVudHMgYXJlIGVxdWFsLlxuICovXG5mdW5jdGlvbiBlcXVhbHMobzEsIG8yKSB7XG4gIGlmIChvMSA9PT0gbzIpIHJldHVybiB0cnVlO1xuICBpZiAobzEgPT09IG51bGwgfHwgbzIgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgaWYgKG8xICE9PSBvMSAmJiBvMiAhPT0gbzIpIHJldHVybiB0cnVlOyAvLyBOYU4gPT09IE5hTlxuICB2YXIgdDEgPSB0eXBlb2YgbzEsIHQyID0gdHlwZW9mIG8yLCBsZW5ndGgsIGtleSwga2V5U2V0O1xuICBpZiAodDEgPT0gdDIpIHtcbiAgICBpZiAodDEgPT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChpc0FycmF5KG8xKSkge1xuICAgICAgICBpZiAoIWlzQXJyYXkobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICgobGVuZ3RoID0gbzEubGVuZ3RoKSA9PSBvMi5sZW5ndGgpIHtcbiAgICAgICAgICBmb3IgKGtleSA9IDA7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgICAgIGlmICghZXF1YWxzKG8xW2tleV0sIG8yW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzRGF0ZShvMSkpIHtcbiAgICAgICAgaWYgKCFpc0RhdGUobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcXVhbHMobzEuZ2V0VGltZSgpLCBvMi5nZXRUaW1lKCkpO1xuICAgICAgfSBlbHNlIGlmIChpc1JlZ0V4cChvMSkgJiYgaXNSZWdFeHAobzIpKSB7XG4gICAgICAgIHJldHVybiBvMS50b1N0cmluZygpID09IG8yLnRvU3RyaW5nKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNTY29wZShvMSkgfHwgaXNTY29wZShvMikgfHwgaXNXaW5kb3cobzEpIHx8IGlzV2luZG93KG8yKSB8fCBpc0FycmF5KG8yKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBrZXlTZXQgPSB7fTtcbiAgICAgICAgZm9yIChrZXkgaW4gbzEpIHtcbiAgICAgICAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyQnIHx8IGlzRnVuY3Rpb24obzFba2V5XSkpIGNvbnRpbnVlO1xuICAgICAgICAgIGlmICghZXF1YWxzKG8xW2tleV0sIG8yW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAga2V5U2V0W2tleV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoa2V5IGluIG8yKSB7XG4gICAgICAgICAgaWYgKCFrZXlTZXQuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxuICAgICAgICAgICAgICBrZXkuY2hhckF0KDApICE9PSAnJCcgJiZcbiAgICAgICAgICAgICAgbzJba2V5XSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICFpc0Z1bmN0aW9uKG8yW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxudmFyIGNzcCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoaXNEZWZpbmVkKGNzcC5pc0FjdGl2ZV8pKSByZXR1cm4gY3NwLmlzQWN0aXZlXztcblxuICB2YXIgYWN0aXZlID0gISEoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25nLWNzcF0nKSB8fFxuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbmctY3NwXScpKTtcblxuICBpZiAoIWFjdGl2ZSkge1xuICAgIHRyeSB7XG4gICAgICAvKiBqc2hpbnQgLVcwMzEsIC1XMDU0ICovXG4gICAgICBuZXcgRnVuY3Rpb24oJycpO1xuICAgICAgLyoganNoaW50ICtXMDMxLCArVzA1NCAqL1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChjc3AuaXNBY3RpdmVfID0gYWN0aXZlKTtcbn07XG5cblxuXG5mdW5jdGlvbiBjb25jYXQoYXJyYXkxLCBhcnJheTIsIGluZGV4KSB7XG4gIHJldHVybiBhcnJheTEuY29uY2F0KHNsaWNlLmNhbGwoYXJyYXkyLCBpbmRleCkpO1xufVxuXG5mdW5jdGlvbiBzbGljZUFyZ3MoYXJncywgc3RhcnRJbmRleCkge1xuICByZXR1cm4gc2xpY2UuY2FsbChhcmdzLCBzdGFydEluZGV4IHx8IDApO1xufVxuXG5cbi8qIGpzaGludCAtVzEwMSAqL1xuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuYmluZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBjYWxscyBmdW5jdGlvbiBgZm5gIGJvdW5kIHRvIGBzZWxmYCAoYHNlbGZgIGJlY29tZXMgdGhlIGB0aGlzYCBmb3JcbiAqIGBmbmApLiBZb3UgY2FuIHN1cHBseSBvcHRpb25hbCBgYXJnc2AgdGhhdCBhcmUgcHJlYm91bmQgdG8gdGhlIGZ1bmN0aW9uLiBUaGlzIGZlYXR1cmUgaXMgYWxzb1xuICoga25vd24gYXMgW3BhcnRpYWwgYXBwbGljYXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFydGlhbF9hcHBsaWNhdGlvbiksIGFzXG4gKiBkaXN0aW5ndWlzaGVkIGZyb20gW2Z1bmN0aW9uIGN1cnJ5aW5nXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0N1cnJ5aW5nI0NvbnRyYXN0X3dpdGhfcGFydGlhbF9mdW5jdGlvbl9hcHBsaWNhdGlvbikuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNlbGYgQ29udGV4dCB3aGljaCBgZm5gIHNob3VsZCBiZSBldmFsdWF0ZWQgaW4uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuIEZ1bmN0aW9uIHRvIGJlIGJvdW5kLlxuICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIGFyZ3VtZW50cyB0byBiZSBwcmVib3VuZCB0byB0aGUgYGZuYCBmdW5jdGlvbiBjYWxsLlxuICogQHJldHVybnMge2Z1bmN0aW9uKCl9IEZ1bmN0aW9uIHRoYXQgd3JhcHMgdGhlIGBmbmAgd2l0aCBhbGwgdGhlIHNwZWNpZmllZCBiaW5kaW5ncy5cbiAqL1xuLyoganNoaW50ICtXMTAxICovXG5mdW5jdGlvbiBiaW5kKHNlbGYsIGZuKSB7XG4gIHZhciBjdXJyeUFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IHNsaWNlQXJncyhhcmd1bWVudHMsIDIpIDogW107XG4gIGlmIChpc0Z1bmN0aW9uKGZuKSAmJiAhKGZuIGluc3RhbmNlb2YgUmVnRXhwKSkge1xuICAgIHJldHVybiBjdXJyeUFyZ3MubGVuZ3RoXG4gICAgICA/IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgICA/IGZuLmFwcGx5KHNlbGYsIGNvbmNhdChjdXJyeUFyZ3MsIGFyZ3VtZW50cywgMCkpXG4gICAgICAgICAgICA6IGZuLmFwcGx5KHNlbGYsIGN1cnJ5QXJncyk7XG4gICAgICAgIH1cbiAgICAgIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICAgICAgID8gZm4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBmbi5jYWxsKHNlbGYpO1xuICAgICAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIGluIElFLCBuYXRpdmUgbWV0aG9kcyBhcmUgbm90IGZ1bmN0aW9ucyBzbyB0aGV5IGNhbm5vdCBiZSBib3VuZCAobm90ZTogdGhleSBkb24ndCBuZWVkIHRvIGJlKVxuICAgIHJldHVybiBmbjtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHRvSnNvblJlcGxhY2VyKGtleSwgdmFsdWUpIHtcbiAgdmFyIHZhbCA9IHZhbHVlO1xuXG4gIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXkuY2hhckF0KDApID09PSAnJCcgJiYga2V5LmNoYXJBdCgxKSA9PT0gJyQnKSB7XG4gICAgdmFsID0gdW5kZWZpbmVkO1xuICB9IGVsc2UgaWYgKGlzV2luZG93KHZhbHVlKSkge1xuICAgIHZhbCA9ICckV0lORE9XJztcbiAgfSBlbHNlIGlmICh2YWx1ZSAmJiAgZG9jdW1lbnQgPT09IHZhbHVlKSB7XG4gICAgdmFsID0gJyRET0NVTUVOVCc7XG4gIH0gZWxzZSBpZiAoaXNTY29wZSh2YWx1ZSkpIHtcbiAgICB2YWwgPSAnJFNDT1BFJztcbiAgfVxuXG4gIHJldHVybiB2YWw7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIudG9Kc29uXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU2VyaWFsaXplcyBpbnB1dCBpbnRvIGEgSlNPTi1mb3JtYXR0ZWQgc3RyaW5nLiBQcm9wZXJ0aWVzIHdpdGggbGVhZGluZyAkJCBjaGFyYWN0ZXJzIHdpbGwgYmVcbiAqIHN0cmlwcGVkIHNpbmNlIGFuZ3VsYXIgdXNlcyB0aGlzIG5vdGF0aW9uIGludGVybmFsbHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl8RGF0ZXxzdHJpbmd8bnVtYmVyfSBvYmogSW5wdXQgdG8gYmUgc2VyaWFsaXplZCBpbnRvIEpTT04uXG4gKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyPX0gcHJldHR5IElmIHNldCB0byB0cnVlLCB0aGUgSlNPTiBvdXRwdXQgd2lsbCBjb250YWluIG5ld2xpbmVzIGFuZCB3aGl0ZXNwYWNlLlxuICogICAgSWYgc2V0IHRvIGFuIGludGVnZXIsIHRoZSBKU09OIG91dHB1dCB3aWxsIGNvbnRhaW4gdGhhdCBtYW55IHNwYWNlcyBwZXIgaW5kZW50YXRpb24gKHRoZSBkZWZhdWx0IGlzIDIpLlxuICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IEpTT04taWZpZWQgc3RyaW5nIHJlcHJlc2VudGluZyBgb2JqYC5cbiAqL1xuZnVuY3Rpb24gdG9Kc29uKG9iaiwgcHJldHR5KSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKCFpc051bWJlcihwcmV0dHkpKSB7XG4gICAgcHJldHR5ID0gcHJldHR5ID8gMiA6IG51bGw7XG4gIH1cbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgdG9Kc29uUmVwbGFjZXIsIHByZXR0eSk7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZnJvbUpzb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXNlcmlhbGl6ZXMgYSBKU09OIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ganNvbiBKU09OIHN0cmluZyB0byBkZXNlcmlhbGl6ZS5cbiAqIEByZXR1cm5zIHtPYmplY3R8QXJyYXl8c3RyaW5nfG51bWJlcn0gRGVzZXJpYWxpemVkIEpTT04gc3RyaW5nLlxuICovXG5mdW5jdGlvbiBmcm9tSnNvbihqc29uKSB7XG4gIHJldHVybiBpc1N0cmluZyhqc29uKVxuICAgICAgPyBKU09OLnBhcnNlKGpzb24pXG4gICAgICA6IGpzb247XG59XG5cblxuLyoqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0aW5nVGFnKGVsZW1lbnQpIHtcbiAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KS5jbG9uZSgpO1xuICB0cnkge1xuICAgIC8vIHR1cm5zIG91dCBJRSBkb2VzIG5vdCBsZXQgeW91IHNldCAuaHRtbCgpIG9uIGVsZW1lbnRzIHdoaWNoXG4gICAgLy8gYXJlIG5vdCBhbGxvd2VkIHRvIGhhdmUgY2hpbGRyZW4uIFNvIHdlIGp1c3QgaWdub3JlIGl0LlxuICAgIGVsZW1lbnQuZW1wdHkoKTtcbiAgfSBjYXRjaCAoZSkge31cbiAgdmFyIGVsZW1IdG1sID0ganFMaXRlKCc8ZGl2PicpLmFwcGVuZChlbGVtZW50KS5odG1sKCk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGVsZW1lbnRbMF0ubm9kZVR5cGUgPT09IE5PREVfVFlQRV9URVhUID8gbG93ZXJjYXNlKGVsZW1IdG1sKSA6XG4gICAgICAgIGVsZW1IdG1sLlxuICAgICAgICAgIG1hdGNoKC9eKDxbXj5dKz4pLylbMV0uXG4gICAgICAgICAgcmVwbGFjZSgvXjwoW1xcd1xcLV0rKS8sIGZ1bmN0aW9uKG1hdGNoLCBub2RlTmFtZSkgeyByZXR1cm4gJzwnICsgbG93ZXJjYXNlKG5vZGVOYW1lKTsgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbG93ZXJjYXNlKGVsZW1IdG1sKTtcbiAgfVxuXG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIFRyaWVzIHRvIGRlY29kZSB0aGUgVVJJIGNvbXBvbmVudCB3aXRob3V0IHRocm93aW5nIGFuIGV4Y2VwdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHN0ciB2YWx1ZSBwb3RlbnRpYWwgVVJJIGNvbXBvbmVudCB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgY2FuIGJlIGRlY29kZWRcbiAqIHdpdGggdGhlIGRlY29kZVVSSUNvbXBvbmVudCBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJZ25vcmUgYW55IGludmFsaWQgdXJpIGNvbXBvbmVudFxuICB9XG59XG5cblxuLyoqXG4gKiBQYXJzZXMgYW4gZXNjYXBlZCB1cmwgcXVlcnkgc3RyaW5nIGludG8ga2V5LXZhbHVlIHBhaXJzLlxuICogQHJldHVybnMge09iamVjdC48c3RyaW5nLGJvb2xlYW58QXJyYXk+fVxuICovXG5mdW5jdGlvbiBwYXJzZUtleVZhbHVlKC8qKnN0cmluZyova2V5VmFsdWUpIHtcbiAgdmFyIG9iaiA9IHt9LCBrZXlfdmFsdWUsIGtleTtcbiAgZm9yRWFjaCgoa2V5VmFsdWUgfHwgXCJcIikuc3BsaXQoJyYnKSwgZnVuY3Rpb24oa2V5VmFsdWUpIHtcbiAgICBpZiAoa2V5VmFsdWUpIHtcbiAgICAgIGtleV92YWx1ZSA9IGtleVZhbHVlLnJlcGxhY2UoL1xcKy9nLCclMjAnKS5zcGxpdCgnPScpO1xuICAgICAga2V5ID0gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KGtleV92YWx1ZVswXSk7XG4gICAgICBpZiAoaXNEZWZpbmVkKGtleSkpIHtcbiAgICAgICAgdmFyIHZhbCA9IGlzRGVmaW5lZChrZXlfdmFsdWVbMV0pID8gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KGtleV92YWx1ZVsxXSkgOiB0cnVlO1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmpba2V5XSkpIHtcbiAgICAgICAgICBvYmpba2V5XS5wdXNoKHZhbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2JqW2tleV0gPSBbb2JqW2tleV0sdmFsXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHRvS2V5VmFsdWUob2JqKSB7XG4gIHZhciBwYXJ0cyA9IFtdO1xuICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24oYXJyYXlWYWx1ZSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSwgdHJ1ZSkgK1xuICAgICAgICAgICAgICAgICAgIChhcnJheVZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeShhcnJheVZhbHVlLCB0cnVlKSkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSwgdHJ1ZSkgK1xuICAgICAgICAgICAgICAgKHZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeSh2YWx1ZSwgdHJ1ZSkpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcGFydHMubGVuZ3RoID8gcGFydHMuam9pbignJicpIDogJyc7XG59XG5cblxuLyoqXG4gKiBXZSBuZWVkIG91ciBjdXN0b20gbWV0aG9kIGJlY2F1c2UgZW5jb2RlVVJJQ29tcG9uZW50IGlzIHRvbyBhZ2dyZXNzaXZlIGFuZCBkb2Vzbid0IGZvbGxvd1xuICogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMzk4Ni50eHQgd2l0aCByZWdhcmRzIHRvIHRoZSBjaGFyYWN0ZXIgc2V0IChwY2hhcikgYWxsb3dlZCBpbiBwYXRoXG4gKiBzZWdtZW50czpcbiAqICAgIHNlZ21lbnQgICAgICAgPSAqcGNoYXJcbiAqICAgIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gXCI6XCIgLyBcIkBcIlxuICogICAgcGN0LWVuY29kZWQgICA9IFwiJVwiIEhFWERJRyBIRVhESUdcbiAqICAgIHVucmVzZXJ2ZWQgICAgPSBBTFBIQSAvIERJR0lUIC8gXCItXCIgLyBcIi5cIiAvIFwiX1wiIC8gXCJ+XCJcbiAqICAgIHN1Yi1kZWxpbXMgICAgPSBcIiFcIiAvIFwiJFwiIC8gXCImXCIgLyBcIidcIiAvIFwiKFwiIC8gXCIpXCJcbiAqICAgICAgICAgICAgICAgICAgICAgLyBcIipcIiAvIFwiK1wiIC8gXCIsXCIgLyBcIjtcIiAvIFwiPVwiXG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVyaVNlZ21lbnQodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVcmlRdWVyeSh2YWwsIHRydWUpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyNi9naSwgJyYnKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lM0QvZ2ksICc9JykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTJCL2dpLCAnKycpO1xufVxuXG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgZm9yIGVuY29kaW5nICprZXkqIG9yICp2YWx1ZSogcGFydHMgb2YgcXVlcnkgY29tcG9uZW50LiBXZSBuZWVkIGEgY3VzdG9tXG4gKiBtZXRob2QgYmVjYXVzZSBlbmNvZGVVUklDb21wb25lbnQgaXMgdG9vIGFnZ3Jlc3NpdmUgYW5kIGVuY29kZXMgc3R1ZmYgdGhhdCBkb2Vzbid0IGhhdmUgdG8gYmVcbiAqIGVuY29kZWQgcGVyIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODY6XG4gKiAgICBxdWVyeSAgICAgICA9ICooIHBjaGFyIC8gXCIvXCIgLyBcIj9cIiApXG4gKiAgICBwY2hhciAgICAgICAgID0gdW5yZXNlcnZlZCAvIHBjdC1lbmNvZGVkIC8gc3ViLWRlbGltcyAvIFwiOlwiIC8gXCJAXCJcbiAqICAgIHVucmVzZXJ2ZWQgICAgPSBBTFBIQSAvIERJR0lUIC8gXCItXCIgLyBcIi5cIiAvIFwiX1wiIC8gXCJ+XCJcbiAqICAgIHBjdC1lbmNvZGVkICAgPSBcIiVcIiBIRVhESUcgSEVYRElHXG4gKiAgICBzdWItZGVsaW1zICAgID0gXCIhXCIgLyBcIiRcIiAvIFwiJlwiIC8gXCInXCIgLyBcIihcIiAvIFwiKVwiXG4gKiAgICAgICAgICAgICAgICAgICAgIC8gXCIqXCIgLyBcIitcIiAvIFwiLFwiIC8gXCI7XCIgLyBcIj1cIlxuICovXG5mdW5jdGlvbiBlbmNvZGVVcmlRdWVyeSh2YWwsIHBjdEVuY29kZVNwYWNlcykge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTQwL2dpLCAnQCcpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNCL2dpLCAnOycpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyMC9nLCAocGN0RW5jb2RlU3BhY2VzID8gJyUyMCcgOiAnKycpKTtcbn1cblxudmFyIG5nQXR0clByZWZpeGVzID0gWyduZy0nLCAnZGF0YS1uZy0nLCAnbmc6JywgJ3gtbmctJ107XG5cbmZ1bmN0aW9uIGdldE5nQXR0cmlidXRlKGVsZW1lbnQsIG5nQXR0cikge1xuICB2YXIgYXR0ciwgaSwgaWkgPSBuZ0F0dHJQcmVmaXhlcy5sZW5ndGg7XG4gIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XG4gIGZvciAoaSA9IDA7IGkgPCBpaTsgKytpKSB7XG4gICAgYXR0ciA9IG5nQXR0clByZWZpeGVzW2ldICsgbmdBdHRyO1xuICAgIGlmIChpc1N0cmluZyhhdHRyID0gZWxlbWVudC5hdHRyKGF0dHIpKSkge1xuICAgICAgcmV0dXJuIGF0dHI7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQXBwXG4gKiBAbW9kdWxlIG5nXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2FuZ3VsYXIuTW9kdWxlfSBuZ0FwcCBhbiBvcHRpb25hbCBhcHBsaWNhdGlvblxuICogICB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlfSBuYW1lIHRvIGxvYWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBuZ1N0cmljdERpIGlmIHRoaXMgYXR0cmlidXRlIGlzIHByZXNlbnQgb24gdGhlIGFwcCBlbGVtZW50LCB0aGUgaW5qZWN0b3Igd2lsbCBiZVxuICogICBjcmVhdGVkIGluIFwic3RyaWN0LWRpXCIgbW9kZS4gVGhpcyBtZWFucyB0aGF0IHRoZSBhcHBsaWNhdGlvbiB3aWxsIGZhaWwgdG8gaW52b2tlIGZ1bmN0aW9ucyB3aGljaFxuICogICBkbyBub3QgdXNlIGV4cGxpY2l0IGZ1bmN0aW9uIGFubm90YXRpb24gKGFuZCBhcmUgdGh1cyB1bnN1aXRhYmxlIGZvciBtaW5pZmljYXRpb24pLCBhcyBkZXNjcmliZWRcbiAqICAgaW4ge0BsaW5rIGd1aWRlL2RpIHRoZSBEZXBlbmRlbmN5IEluamVjdGlvbiBndWlkZX0sIGFuZCB1c2VmdWwgZGVidWdnaW5nIGluZm8gd2lsbCBhc3Npc3QgaW5cbiAqICAgdHJhY2tpbmcgZG93biB0aGUgcm9vdCBvZiB0aGVzZSBidWdzLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFVzZSB0aGlzIGRpcmVjdGl2ZSB0byAqKmF1dG8tYm9vdHN0cmFwKiogYW4gQW5ndWxhckpTIGFwcGxpY2F0aW9uLiBUaGUgYG5nQXBwYCBkaXJlY3RpdmVcbiAqIGRlc2lnbmF0ZXMgdGhlICoqcm9vdCBlbGVtZW50Kiogb2YgdGhlIGFwcGxpY2F0aW9uIGFuZCBpcyB0eXBpY2FsbHkgcGxhY2VkIG5lYXIgdGhlIHJvb3QgZWxlbWVudFxuICogb2YgdGhlIHBhZ2UgLSBlLmcuIG9uIHRoZSBgPGJvZHk+YCBvciBgPGh0bWw+YCB0YWdzLlxuICpcbiAqIE9ubHkgb25lIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiBjYW4gYmUgYXV0by1ib290c3RyYXBwZWQgcGVyIEhUTUwgZG9jdW1lbnQuIFRoZSBmaXJzdCBgbmdBcHBgXG4gKiBmb3VuZCBpbiB0aGUgZG9jdW1lbnQgd2lsbCBiZSB1c2VkIHRvIGRlZmluZSB0aGUgcm9vdCBlbGVtZW50IHRvIGF1dG8tYm9vdHN0cmFwIGFzIGFuXG4gKiBhcHBsaWNhdGlvbi4gVG8gcnVuIG11bHRpcGxlIGFwcGxpY2F0aW9ucyBpbiBhbiBIVE1MIGRvY3VtZW50IHlvdSBtdXN0IG1hbnVhbGx5IGJvb3RzdHJhcCB0aGVtIHVzaW5nXG4gKiB7QGxpbmsgYW5ndWxhci5ib290c3RyYXB9IGluc3RlYWQuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbnMgY2Fubm90IGJlIG5lc3RlZCB3aXRoaW4gZWFjaCBvdGhlci5cbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgYW4gKipBbmd1bGFySlMgbW9kdWxlKiogdG8gYmUgdXNlZCBhcyB0aGUgcm9vdCBtb2R1bGUgZm9yIHRoZSBhcHBsaWNhdGlvbi4gIFRoaXNcbiAqIG1vZHVsZSB3aWxsIGJlIGxvYWRlZCBpbnRvIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3J9IHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGJvb3RzdHJhcHBlZC4gSXRcbiAqIHNob3VsZCBjb250YWluIHRoZSBhcHBsaWNhdGlvbiBjb2RlIG5lZWRlZCBvciBoYXZlIGRlcGVuZGVuY2llcyBvbiBvdGhlciBtb2R1bGVzIHRoYXQgd2lsbFxuICogY29udGFpbiB0aGUgY29kZS4gU2VlIHtAbGluayBhbmd1bGFyLm1vZHVsZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogSW4gdGhlIGV4YW1wbGUgYmVsb3cgaWYgdGhlIGBuZ0FwcGAgZGlyZWN0aXZlIHdlcmUgbm90IHBsYWNlZCBvbiB0aGUgYGh0bWxgIGVsZW1lbnQgdGhlbiB0aGVcbiAqIGRvY3VtZW50IHdvdWxkIG5vdCBiZSBjb21waWxlZCwgdGhlIGBBcHBDb250cm9sbGVyYCB3b3VsZCBub3QgYmUgaW5zdGFudGlhdGVkIGFuZCB0aGUgYHt7IGErYiB9fWBcbiAqIHdvdWxkIG5vdCBiZSByZXNvbHZlZCB0byBgM2AuXG4gKlxuICogYG5nQXBwYCBpcyB0aGUgZWFzaWVzdCwgYW5kIG1vc3QgY29tbW9uIHdheSB0byBib290c3RyYXAgYW4gYXBwbGljYXRpb24uXG4gKlxuIDxleGFtcGxlIG1vZHVsZT1cIm5nQXBwRGVtb1wiPlxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgIDxkaXYgbmctY29udHJvbGxlcj1cIm5nQXBwRGVtb0NvbnRyb2xsZXJcIj5cbiAgICAgSSBjYW4gYWRkOiB7e2F9fSArIHt7Yn19ID0gIHt7IGErYiB9fVxuICAgPC9kaXY+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICBhbmd1bGFyLm1vZHVsZSgnbmdBcHBEZW1vJywgW10pLmNvbnRyb2xsZXIoJ25nQXBwRGVtb0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgJHNjb3BlLmEgPSAxO1xuICAgICAkc2NvcGUuYiA9IDI7XG4gICB9KTtcbiAgIDwvZmlsZT5cbiA8L2V4YW1wbGU+XG4gKlxuICogVXNpbmcgYG5nU3RyaWN0RGlgLCB5b3Ugd291bGQgc2VlIHNvbWV0aGluZyBsaWtlIHRoaXM6XG4gKlxuIDxleGFtcGxlIG5nLWFwcC1pbmNsdWRlZD1cInRydWVcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICA8ZGl2IG5nLWFwcD1cIm5nQXBwU3RyaWN0RGVtb1wiIG5nLXN0cmljdC1kaT5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJHb29kQ29udHJvbGxlcjFcIj5cbiAgICAgICAgICAgSSBjYW4gYWRkOiB7e2F9fSArIHt7Yn19ID0gIHt7IGErYiB9fVxuXG4gICAgICAgICAgIDxwPlRoaXMgcmVuZGVycyBiZWNhdXNlIHRoZSBjb250cm9sbGVyIGRvZXMgbm90IGZhaWwgdG9cbiAgICAgICAgICAgICAgaW5zdGFudGlhdGUsIGJ5IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gc3R5bGUgKHNlZVxuICAgICAgICAgICAgICBzY3JpcHQuanMgZm9yIGRldGFpbHMpXG4gICAgICAgICAgIDwvcD5cbiAgICAgICA8L2Rpdj5cblxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkdvb2RDb250cm9sbGVyMlwiPlxuICAgICAgICAgICBOYW1lOiA8aW5wdXQgbmctbW9kZWw9XCJuYW1lXCI+PGJyIC8+XG4gICAgICAgICAgIEhlbGxvLCB7e25hbWV9fSFcblxuICAgICAgICAgICA8cD5UaGlzIHJlbmRlcnMgYmVjYXVzZSB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBmYWlsIHRvXG4gICAgICAgICAgICAgIGluc3RhbnRpYXRlLCBieSB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9uIHN0eWxlXG4gICAgICAgICAgICAgIChzZWUgc2NyaXB0LmpzIGZvciBkZXRhaWxzKVxuICAgICAgICAgICA8L3A+XG4gICAgICAgPC9kaXY+XG5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJCYWRDb250cm9sbGVyXCI+XG4gICAgICAgICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cblxuICAgICAgICAgICA8cD5UaGUgY29udHJvbGxlciBjb3VsZCBub3QgYmUgaW5zdGFudGlhdGVkLCBkdWUgdG8gcmVseWluZ1xuICAgICAgICAgICAgICBvbiBhdXRvbWF0aWMgZnVuY3Rpb24gYW5ub3RhdGlvbnMgKHdoaWNoIGFyZSBkaXNhYmxlZCBpblxuICAgICAgICAgICAgICBzdHJpY3QgbW9kZSkuIEFzIHN1Y2gsIHRoZSBjb250ZW50IG9mIHRoaXMgc2VjdGlvbiBpcyBub3RcbiAgICAgICAgICAgICAgaW50ZXJwb2xhdGVkLCBhbmQgdGhlcmUgc2hvdWxkIGJlIGFuIGVycm9yIGluIHlvdXIgd2ViIGNvbnNvbGUuXG4gICAgICAgICAgIDwvcD5cbiAgICAgICA8L2Rpdj5cbiAgIDwvZGl2PlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgYW5ndWxhci5tb2R1bGUoJ25nQXBwU3RyaWN0RGVtbycsIFtdKVxuICAgICAvLyBCYWRDb250cm9sbGVyIHdpbGwgZmFpbCB0byBpbnN0YW50aWF0ZSwgZHVlIHRvIHJlbHlpbmcgb24gYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb24sXG4gICAgIC8vIHJhdGhlciB0aGFuIGFuIGV4cGxpY2l0IGFubm90YXRpb25cbiAgICAgLmNvbnRyb2xsZXIoJ0JhZENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAkc2NvcGUuYSA9IDE7XG4gICAgICAgJHNjb3BlLmIgPSAyO1xuICAgICB9KVxuICAgICAvLyBVbmxpa2UgQmFkQ29udHJvbGxlciwgR29vZENvbnRyb2xsZXIxIGFuZCBHb29kQ29udHJvbGxlcjIgd2lsbCBub3QgZmFpbCB0byBiZSBpbnN0YW50aWF0ZWQsXG4gICAgIC8vIGR1ZSB0byB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9ucyB1c2luZyB0aGUgYXJyYXkgc3R5bGUgYW5kICRpbmplY3QgcHJvcGVydHksIHJlc3BlY3RpdmVseS5cbiAgICAgLmNvbnRyb2xsZXIoJ0dvb2RDb250cm9sbGVyMScsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgJHNjb3BlLmEgPSAxO1xuICAgICAgICRzY29wZS5iID0gMjtcbiAgICAgfV0pXG4gICAgIC5jb250cm9sbGVyKCdHb29kQ29udHJvbGxlcjInLCBHb29kQ29udHJvbGxlcjIpO1xuICAgICBmdW5jdGlvbiBHb29kQ29udHJvbGxlcjIoJHNjb3BlKSB7XG4gICAgICAgJHNjb3BlLm5hbWUgPSBcIldvcmxkXCI7XG4gICAgIH1cbiAgICAgR29vZENvbnRyb2xsZXIyLiRpbmplY3QgPSBbJyRzY29wZSddO1xuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgZGl2W25nLWNvbnRyb2xsZXJdIHtcbiAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgIGJvcmRlcjogMXB4IHNvbGlkO1xuICAgICAgIHBhZGRpbmc6IC41ZW07XG4gICB9XG4gICBkaXZbbmctY29udHJvbGxlcl49R29vZF0ge1xuICAgICAgIGJvcmRlci1jb2xvcjogI2Q2ZTljNjtcbiAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGZmMGQ4O1xuICAgICAgIGNvbG9yOiAjM2M3NjNkO1xuICAgfVxuICAgZGl2W25nLWNvbnRyb2xsZXJePUJhZF0ge1xuICAgICAgIGJvcmRlci1jb2xvcjogI2ViY2NkMTtcbiAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJkZWRlO1xuICAgICAgIGNvbG9yOiAjYTk0NDQyO1xuICAgICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICB9XG4gICA8L2ZpbGU+XG4gPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiBhbmd1bGFySW5pdChlbGVtZW50LCBib290c3RyYXApIHtcbiAgdmFyIGFwcEVsZW1lbnQsXG4gICAgICBtb2R1bGUsXG4gICAgICBjb25maWcgPSB7fTtcblxuICAvLyBUaGUgZWxlbWVudCBgZWxlbWVudGAgaGFzIHByaW9yaXR5IG92ZXIgYW55IG90aGVyIGVsZW1lbnRcbiAgZm9yRWFjaChuZ0F0dHJQcmVmaXhlcywgZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgdmFyIG5hbWUgPSBwcmVmaXggKyAnYXBwJztcblxuICAgIGlmICghYXBwRWxlbWVudCAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgYXBwRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICBtb2R1bGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG4gIH0pO1xuICBmb3JFYWNoKG5nQXR0clByZWZpeGVzLCBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgbmFtZSA9IHByZWZpeCArICdhcHAnO1xuICAgIHZhciBjYW5kaWRhdGU7XG5cbiAgICBpZiAoIWFwcEVsZW1lbnQgJiYgKGNhbmRpZGF0ZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignWycgKyBuYW1lLnJlcGxhY2UoJzonLCAnXFxcXDonKSArICddJykpKSB7XG4gICAgICBhcHBFbGVtZW50ID0gY2FuZGlkYXRlO1xuICAgICAgbW9kdWxlID0gY2FuZGlkYXRlLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG4gIH0pO1xuICBpZiAoYXBwRWxlbWVudCkge1xuICAgIGNvbmZpZy5zdHJpY3REaSA9IGdldE5nQXR0cmlidXRlKGFwcEVsZW1lbnQsIFwic3RyaWN0LWRpXCIpICE9PSBudWxsO1xuICAgIGJvb3RzdHJhcChhcHBFbGVtZW50LCBtb2R1bGUgPyBbbW9kdWxlXSA6IFtdLCBjb25maWcpO1xuICB9XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmJvb3RzdHJhcFxuICogQG1vZHVsZSBuZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgdGhpcyBmdW5jdGlvbiB0byBtYW51YWxseSBzdGFydCB1cCBhbmd1bGFyIGFwcGxpY2F0aW9uLlxuICpcbiAqIFNlZToge0BsaW5rIGd1aWRlL2Jvb3RzdHJhcCBCb290c3RyYXB9XG4gKlxuICogTm90ZSB0aGF0IFByb3RyYWN0b3IgYmFzZWQgZW5kLXRvLWVuZCB0ZXN0cyBjYW5ub3QgdXNlIHRoaXMgZnVuY3Rpb24gdG8gYm9vdHN0cmFwIG1hbnVhbGx5LlxuICogVGhleSBtdXN0IHVzZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQXBwIG5nQXBwfS5cbiAqXG4gKiBBbmd1bGFyIHdpbGwgZGV0ZWN0IGlmIGl0IGhhcyBiZWVuIGxvYWRlZCBpbnRvIHRoZSBicm93c2VyIG1vcmUgdGhhbiBvbmNlIGFuZCBvbmx5IGFsbG93IHRoZVxuICogZmlyc3QgbG9hZGVkIHNjcmlwdCB0byBiZSBib290c3RyYXBwZWQgYW5kIHdpbGwgcmVwb3J0IGEgd2FybmluZyB0byB0aGUgYnJvd3NlciBjb25zb2xlIGZvclxuICogZWFjaCBvZiB0aGUgc3Vic2VxdWVudCBzY3JpcHRzLiBUaGlzIHByZXZlbnRzIHN0cmFuZ2UgcmVzdWx0cyBpbiBhcHBsaWNhdGlvbnMsIHdoZXJlIG90aGVyd2lzZVxuICogbXVsdGlwbGUgaW5zdGFuY2VzIG9mIEFuZ3VsYXIgdHJ5IHRvIHdvcmsgb24gdGhlIERPTS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8IWRvY3R5cGUgaHRtbD5cbiAqIDxodG1sPlxuICogPGJvZHk+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJXZWxjb21lQ29udHJvbGxlclwiPlxuICogICB7e2dyZWV0aW5nfX1cbiAqIDwvZGl2PlxuICpcbiAqIDxzY3JpcHQgc3JjPVwiYW5ndWxhci5qc1wiPjwvc2NyaXB0PlxuICogPHNjcmlwdD5cbiAqICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdkZW1vJywgW10pXG4gKiAgIC5jb250cm9sbGVyKCdXZWxjb21lQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgJHNjb3BlLmdyZWV0aW5nID0gJ1dlbGNvbWUhJztcbiAqICAgfSk7XG4gKiAgIGFuZ3VsYXIuYm9vdHN0cmFwKGRvY3VtZW50LCBbJ2RlbW8nXSk7XG4gKiA8L3NjcmlwdD5cbiAqIDwvYm9keT5cbiAqIDwvaHRtbD5cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCBET00gZWxlbWVudCB3aGljaCBpcyB0aGUgcm9vdCBvZiBhbmd1bGFyIGFwcGxpY2F0aW9uLlxuICogQHBhcmFtIHtBcnJheTxTdHJpbmd8RnVuY3Rpb258QXJyYXk+PX0gbW9kdWxlcyBhbiBhcnJheSBvZiBtb2R1bGVzIHRvIGxvYWQgaW50byB0aGUgYXBwbGljYXRpb24uXG4gKiAgICAgRWFjaCBpdGVtIGluIHRoZSBhcnJheSBzaG91bGQgYmUgdGhlIG5hbWUgb2YgYSBwcmVkZWZpbmVkIG1vZHVsZSBvciBhIChESSBhbm5vdGF0ZWQpXG4gKiAgICAgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgYnkgdGhlIGluamVjdG9yIGFzIGEgYGNvbmZpZ2AgYmxvY2suXG4gKiAgICAgU2VlOiB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlc31cbiAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIGFuIG9iamVjdCBmb3IgZGVmaW5pbmcgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgYXBwbGljYXRpb24uIFRoZVxuICogICAgIGZvbGxvd2luZyBrZXlzIGFyZSBzdXBwb3J0ZWQ6XG4gKlxuICogKiBgc3RyaWN0RGlgIC0gZGlzYWJsZSBhdXRvbWF0aWMgZnVuY3Rpb24gYW5ub3RhdGlvbiBmb3IgdGhlIGFwcGxpY2F0aW9uLiBUaGlzIGlzIG1lYW50IHRvXG4gKiAgIGFzc2lzdCBpbiBmaW5kaW5nIGJ1Z3Mgd2hpY2ggYnJlYWsgbWluaWZpZWQgY29kZS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqXG4gKiBAcmV0dXJucyB7YXV0by4kaW5qZWN0b3J9IFJldHVybnMgdGhlIG5ld2x5IGNyZWF0ZWQgaW5qZWN0b3IgZm9yIHRoaXMgYXBwLlxuICovXG5mdW5jdGlvbiBib290c3RyYXAoZWxlbWVudCwgbW9kdWxlcywgY29uZmlnKSB7XG4gIGlmICghaXNPYmplY3QoY29uZmlnKSkgY29uZmlnID0ge307XG4gIHZhciBkZWZhdWx0Q29uZmlnID0ge1xuICAgIHN0cmljdERpOiBmYWxzZVxuICB9O1xuICBjb25maWcgPSBleHRlbmQoZGVmYXVsdENvbmZpZywgY29uZmlnKTtcbiAgdmFyIGRvQm9vdHN0cmFwID0gZnVuY3Rpb24oKSB7XG4gICAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KTtcblxuICAgIGlmIChlbGVtZW50LmluamVjdG9yKCkpIHtcbiAgICAgIHZhciB0YWcgPSAoZWxlbWVudFswXSA9PT0gZG9jdW1lbnQpID8gJ2RvY3VtZW50JyA6IHN0YXJ0aW5nVGFnKGVsZW1lbnQpO1xuICAgICAgLy9FbmNvZGUgYW5nbGUgYnJhY2tldHMgdG8gcHJldmVudCBpbnB1dCBmcm9tIGJlaW5nIHNhbml0aXplZCB0byBlbXB0eSBzdHJpbmcgIzg2ODNcbiAgICAgIHRocm93IG5nTWluRXJyKFxuICAgICAgICAgICdidHN0cnBkJyxcbiAgICAgICAgICBcIkFwcCBBbHJlYWR5IEJvb3RzdHJhcHBlZCB3aXRoIHRoaXMgRWxlbWVudCAnezB9J1wiLFxuICAgICAgICAgIHRhZy5yZXBsYWNlKC88LywnJmx0OycpLnJlcGxhY2UoLz4vLCcmZ3Q7JykpO1xuICAgIH1cblxuICAgIG1vZHVsZXMgPSBtb2R1bGVzIHx8IFtdO1xuICAgIG1vZHVsZXMudW5zaGlmdChbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcbiAgICAgICRwcm92aWRlLnZhbHVlKCckcm9vdEVsZW1lbnQnLCBlbGVtZW50KTtcbiAgICB9XSk7XG5cbiAgICBpZiAoY29uZmlnLmRlYnVnSW5mb0VuYWJsZWQpIHtcbiAgICAgIC8vIFB1c2hpbmcgc28gdGhhdCB0aGlzIG92ZXJyaWRlcyBgZGVidWdJbmZvRW5hYmxlZGAgc2V0dGluZyBkZWZpbmVkIGluIHVzZXIncyBgbW9kdWxlc2AuXG4gICAgICBtb2R1bGVzLnB1c2goWyckY29tcGlsZVByb3ZpZGVyJywgZnVuY3Rpb24oJGNvbXBpbGVQcm92aWRlcikge1xuICAgICAgICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQodHJ1ZSk7XG4gICAgICB9XSk7XG4gICAgfVxuXG4gICAgbW9kdWxlcy51bnNoaWZ0KCduZycpO1xuICAgIHZhciBpbmplY3RvciA9IGNyZWF0ZUluamVjdG9yKG1vZHVsZXMsIGNvbmZpZy5zdHJpY3REaSk7XG4gICAgaW5qZWN0b3IuaW52b2tlKFsnJHJvb3RTY29wZScsICckcm9vdEVsZW1lbnQnLCAnJGNvbXBpbGUnLCAnJGluamVjdG9yJyxcbiAgICAgICBmdW5jdGlvbiBib290c3RyYXBBcHBseShzY29wZSwgZWxlbWVudCwgY29tcGlsZSwgaW5qZWN0b3IpIHtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQuZGF0YSgnJGluamVjdG9yJywgaW5qZWN0b3IpO1xuICAgICAgICAgIGNvbXBpbGUoZWxlbWVudCkoc2NvcGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1dXG4gICAgKTtcbiAgICByZXR1cm4gaW5qZWN0b3I7XG4gIH07XG5cbiAgdmFyIE5HX0VOQUJMRV9ERUJVR19JTkZPID0gL15OR19FTkFCTEVfREVCVUdfSU5GTyEvO1xuICB2YXIgTkdfREVGRVJfQk9PVFNUUkFQID0gL15OR19ERUZFUl9CT09UU1RSQVAhLztcblxuICBpZiAod2luZG93ICYmIE5HX0VOQUJMRV9ERUJVR19JTkZPLnRlc3Qod2luZG93Lm5hbWUpKSB7XG4gICAgY29uZmlnLmRlYnVnSW5mb0VuYWJsZWQgPSB0cnVlO1xuICAgIHdpbmRvdy5uYW1lID0gd2luZG93Lm5hbWUucmVwbGFjZShOR19FTkFCTEVfREVCVUdfSU5GTywgJycpO1xuICB9XG5cbiAgaWYgKHdpbmRvdyAmJiAhTkdfREVGRVJfQk9PVFNUUkFQLnRlc3Qod2luZG93Lm5hbWUpKSB7XG4gICAgcmV0dXJuIGRvQm9vdHN0cmFwKCk7XG4gIH1cblxuICB3aW5kb3cubmFtZSA9IHdpbmRvdy5uYW1lLnJlcGxhY2UoTkdfREVGRVJfQk9PVFNUUkFQLCAnJyk7XG4gIGFuZ3VsYXIucmVzdW1lQm9vdHN0cmFwID0gZnVuY3Rpb24oZXh0cmFNb2R1bGVzKSB7XG4gICAgZm9yRWFjaChleHRyYU1vZHVsZXMsIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgbW9kdWxlcy5wdXNoKG1vZHVsZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvQm9vdHN0cmFwKCk7XG4gIH07XG5cbiAgaWYgKGlzRnVuY3Rpb24oYW5ndWxhci5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCkpIHtcbiAgICBhbmd1bGFyLnJlc3VtZURlZmVycmVkQm9vdHN0cmFwKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIucmVsb2FkV2l0aERlYnVnSW5mb1xuICogQG1vZHVsZSBuZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgdGhpcyBmdW5jdGlvbiB0byByZWxvYWQgdGhlIGN1cnJlbnQgYXBwbGljYXRpb24gd2l0aCBkZWJ1ZyBpbmZvcm1hdGlvbiB0dXJuZWQgb24uXG4gKiBUaGlzIHRha2VzIHByZWNlZGVuY2Ugb3ZlciBhIGNhbGwgdG8gYCRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZChmYWxzZSlgLlxuICpcbiAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkZWJ1Z0luZm9FbmFibGVkfSBmb3IgbW9yZS5cbiAqL1xuZnVuY3Rpb24gcmVsb2FkV2l0aERlYnVnSW5mbygpIHtcbiAgd2luZG93Lm5hbWUgPSAnTkdfRU5BQkxFX0RFQlVHX0lORk8hJyArIHdpbmRvdy5uYW1lO1xuICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG59XG5cbi8qKlxuICogQG5hbWUgYW5ndWxhci5nZXRUZXN0YWJpbGl0eVxuICogQG1vZHVsZSBuZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIHRlc3RhYmlsaXR5IHNlcnZpY2UgZm9yIHRoZSBpbnN0YW5jZSBvZiBBbmd1bGFyIG9uIHRoZSBnaXZlblxuICogZWxlbWVudC5cbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCBET00gZWxlbWVudCB3aGljaCBpcyB0aGUgcm9vdCBvZiBhbmd1bGFyIGFwcGxpY2F0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRUZXN0YWJpbGl0eShyb290RWxlbWVudCkge1xuICB2YXIgaW5qZWN0b3IgPSBhbmd1bGFyLmVsZW1lbnQocm9vdEVsZW1lbnQpLmluamVjdG9yKCk7XG4gIGlmICghaW5qZWN0b3IpIHtcbiAgICB0aHJvdyBuZ01pbkVycigndGVzdCcsXG4gICAgICAnbm8gaW5qZWN0b3IgZm91bmQgZm9yIGVsZW1lbnQgYXJndW1lbnQgdG8gZ2V0VGVzdGFiaWxpdHknKTtcbiAgfVxuICByZXR1cm4gaW5qZWN0b3IuZ2V0KCckJHRlc3RhYmlsaXR5Jyk7XG59XG5cbnZhciBTTkFLRV9DQVNFX1JFR0VYUCA9IC9bQS1aXS9nO1xuZnVuY3Rpb24gc25ha2VfY2FzZShuYW1lLCBzZXBhcmF0b3IpIHtcbiAgc2VwYXJhdG9yID0gc2VwYXJhdG9yIHx8ICdfJztcbiAgcmV0dXJuIG5hbWUucmVwbGFjZShTTkFLRV9DQVNFX1JFR0VYUCwgZnVuY3Rpb24obGV0dGVyLCBwb3MpIHtcbiAgICByZXR1cm4gKHBvcyA/IHNlcGFyYXRvciA6ICcnKSArIGxldHRlci50b0xvd2VyQ2FzZSgpO1xuICB9KTtcbn1cblxudmFyIGJpbmRKUXVlcnlGaXJlZCA9IGZhbHNlO1xudmFyIHNraXBEZXN0cm95T25OZXh0SlF1ZXJ5Q2xlYW5EYXRhO1xuZnVuY3Rpb24gYmluZEpRdWVyeSgpIHtcbiAgdmFyIG9yaWdpbmFsQ2xlYW5EYXRhO1xuXG4gIGlmIChiaW5kSlF1ZXJ5RmlyZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBiaW5kIHRvIGpRdWVyeSBpZiBwcmVzZW50O1xuICBqUXVlcnkgPSB3aW5kb3cualF1ZXJ5O1xuICAvLyBVc2UgalF1ZXJ5IGlmIGl0IGV4aXN0cyB3aXRoIHByb3BlciBmdW5jdGlvbmFsaXR5LCBvdGhlcndpc2UgZGVmYXVsdCB0byB1cy5cbiAgLy8gQW5ndWxhciAxLjIrIHJlcXVpcmVzIGpRdWVyeSAxLjcrIGZvciBvbigpL29mZigpIHN1cHBvcnQuXG4gIC8vIEFuZ3VsYXIgMS4zKyB0ZWNobmljYWxseSByZXF1aXJlcyBhdCBsZWFzdCBqUXVlcnkgMi4xKyBidXQgaXQgbWF5IHdvcmsgd2l0aCBvbGRlclxuICAvLyB2ZXJzaW9ucy4gSXQgd2lsbCBub3Qgd29yayBmb3Igc3VyZSB3aXRoIGpRdWVyeSA8MS43LCB0aG91Z2guXG4gIGlmIChqUXVlcnkgJiYgalF1ZXJ5LmZuLm9uKSB7XG4gICAganFMaXRlID0galF1ZXJ5O1xuICAgIGV4dGVuZChqUXVlcnkuZm4sIHtcbiAgICAgIHNjb3BlOiBKUUxpdGVQcm90b3R5cGUuc2NvcGUsXG4gICAgICBpc29sYXRlU2NvcGU6IEpRTGl0ZVByb3RvdHlwZS5pc29sYXRlU2NvcGUsXG4gICAgICBjb250cm9sbGVyOiBKUUxpdGVQcm90b3R5cGUuY29udHJvbGxlcixcbiAgICAgIGluamVjdG9yOiBKUUxpdGVQcm90b3R5cGUuaW5qZWN0b3IsXG4gICAgICBpbmhlcml0ZWREYXRhOiBKUUxpdGVQcm90b3R5cGUuaW5oZXJpdGVkRGF0YVxuICAgIH0pO1xuXG4gICAgLy8gQWxsIG5vZGVzIHJlbW92ZWQgZnJvbSB0aGUgRE9NIHZpYSB2YXJpb3VzIGpRdWVyeSBBUElzIGxpa2UgLnJlbW92ZSgpXG4gICAgLy8gYXJlIHBhc3NlZCB0aHJvdWdoIGpRdWVyeS5jbGVhbkRhdGEuIE1vbmtleS1wYXRjaCB0aGlzIG1ldGhvZCB0byBmaXJlXG4gICAgLy8gdGhlICRkZXN0cm95IGV2ZW50IG9uIGFsbCByZW1vdmVkIG5vZGVzLlxuICAgIG9yaWdpbmFsQ2xlYW5EYXRhID0galF1ZXJ5LmNsZWFuRGF0YTtcbiAgICBqUXVlcnkuY2xlYW5EYXRhID0gZnVuY3Rpb24oZWxlbXMpIHtcbiAgICAgIHZhciBldmVudHM7XG4gICAgICBpZiAoIXNraXBEZXN0cm95T25OZXh0SlF1ZXJ5Q2xlYW5EYXRhKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBlbGVtOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKyspIHtcbiAgICAgICAgICBldmVudHMgPSBqUXVlcnkuX2RhdGEoZWxlbSwgXCJldmVudHNcIik7XG4gICAgICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHMuJGRlc3Ryb3kpIHtcbiAgICAgICAgICAgIGpRdWVyeShlbGVtKS50cmlnZ2VySGFuZGxlcignJGRlc3Ryb3knKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNraXBEZXN0cm95T25OZXh0SlF1ZXJ5Q2xlYW5EYXRhID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBvcmlnaW5hbENsZWFuRGF0YShlbGVtcyk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBqcUxpdGUgPSBKUUxpdGU7XG4gIH1cblxuICBhbmd1bGFyLmVsZW1lbnQgPSBqcUxpdGU7XG5cbiAgLy8gUHJldmVudCBkb3VibGUtcHJveHlpbmcuXG4gIGJpbmRKUXVlcnlGaXJlZCA9IHRydWU7XG59XG5cbi8qKlxuICogdGhyb3cgZXJyb3IgaWYgdGhlIGFyZ3VtZW50IGlzIGZhbHN5LlxuICovXG5mdW5jdGlvbiBhc3NlcnRBcmcoYXJnLCBuYW1lLCByZWFzb24pIHtcbiAgaWYgKCFhcmcpIHtcbiAgICB0aHJvdyBuZ01pbkVycignYXJlcScsIFwiQXJndW1lbnQgJ3swfScgaXMgezF9XCIsIChuYW1lIHx8ICc/JyksIChyZWFzb24gfHwgXCJyZXF1aXJlZFwiKSk7XG4gIH1cbiAgcmV0dXJuIGFyZztcbn1cblxuZnVuY3Rpb24gYXNzZXJ0QXJnRm4oYXJnLCBuYW1lLCBhY2NlcHRBcnJheUFubm90YXRpb24pIHtcbiAgaWYgKGFjY2VwdEFycmF5QW5ub3RhdGlvbiAmJiBpc0FycmF5KGFyZykpIHtcbiAgICAgIGFyZyA9IGFyZ1thcmcubGVuZ3RoIC0gMV07XG4gIH1cblxuICBhc3NlcnRBcmcoaXNGdW5jdGlvbihhcmcpLCBuYW1lLCAnbm90IGEgZnVuY3Rpb24sIGdvdCAnICtcbiAgICAgIChhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgPyBhcmcuY29uc3RydWN0b3IubmFtZSB8fCAnT2JqZWN0JyA6IHR5cGVvZiBhcmcpKTtcbiAgcmV0dXJuIGFyZztcbn1cblxuLyoqXG4gKiB0aHJvdyBlcnJvciBpZiB0aGUgbmFtZSBnaXZlbiBpcyBoYXNPd25Qcm9wZXJ0eVxuICogQHBhcmFtICB7U3RyaW5nfSBuYW1lICAgIHRoZSBuYW1lIHRvIHRlc3RcbiAqIEBwYXJhbSAge1N0cmluZ30gY29udGV4dCB0aGUgY29udGV4dCBpbiB3aGljaCB0aGUgbmFtZSBpcyB1c2VkLCBzdWNoIGFzIG1vZHVsZSBvciBkaXJlY3RpdmVcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgY29udGV4dCkge1xuICBpZiAobmFtZSA9PT0gJ2hhc093blByb3BlcnR5Jykge1xuICAgIHRocm93IG5nTWluRXJyKCdiYWRuYW1lJywgXCJoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZVwiLCBjb250ZXh0KTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgdmFsdWUgYWNjZXNzaWJsZSBmcm9tIHRoZSBvYmplY3QgYnkgcGF0aC4gQW55IHVuZGVmaW5lZCB0cmF2ZXJzYWxzIGFyZSBpZ25vcmVkXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIHN0YXJ0aW5nIG9iamVjdFxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggcGF0aCB0byB0cmF2ZXJzZVxuICogQHBhcmFtIHtib29sZWFufSBbYmluZEZuVG9TY29wZT10cnVlXVxuICogQHJldHVybnMge09iamVjdH0gdmFsdWUgYXMgYWNjZXNzaWJsZSBieSBwYXRoXG4gKi9cbi8vVE9ETyhtaXNrbyk6IHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmVtb3ZlZFxuZnVuY3Rpb24gZ2V0dGVyKG9iaiwgcGF0aCwgYmluZEZuVG9TY29wZSkge1xuICBpZiAoIXBhdGgpIHJldHVybiBvYmo7XG4gIHZhciBrZXlzID0gcGF0aC5zcGxpdCgnLicpO1xuICB2YXIga2V5O1xuICB2YXIgbGFzdEluc3RhbmNlID0gb2JqO1xuICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGtleSA9IGtleXNbaV07XG4gICAgaWYgKG9iaikge1xuICAgICAgb2JqID0gKGxhc3RJbnN0YW5jZSA9IG9iailba2V5XTtcbiAgICB9XG4gIH1cbiAgaWYgKCFiaW5kRm5Ub1Njb3BlICYmIGlzRnVuY3Rpb24ob2JqKSkge1xuICAgIHJldHVybiBiaW5kKGxhc3RJbnN0YW5jZSwgb2JqKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgRE9NIHNpYmxpbmdzIGJldHdlZW4gdGhlIGZpcnN0IGFuZCBsYXN0IG5vZGUgaW4gdGhlIGdpdmVuIGFycmF5LlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgbGlrZSBvYmplY3RcbiAqIEByZXR1cm5zIHtqcUxpdGV9IGpxTGl0ZSBjb2xsZWN0aW9uIGNvbnRhaW5pbmcgdGhlIG5vZGVzXG4gKi9cbmZ1bmN0aW9uIGdldEJsb2NrTm9kZXMobm9kZXMpIHtcbiAgLy8gVE9ETyhwZXJmKToganVzdCBjaGVjayBpZiBhbGwgaXRlbXMgaW4gYG5vZGVzYCBhcmUgc2libGluZ3MgYW5kIGlmIHRoZXkgYXJlIHJldHVybiB0aGUgb3JpZ2luYWxcbiAgLy8gICAgICAgICAgICAgY29sbGVjdGlvbiwgb3RoZXJ3aXNlIHVwZGF0ZSB0aGUgb3JpZ2luYWwgY29sbGVjdGlvbi5cbiAgdmFyIG5vZGUgPSBub2Rlc1swXTtcbiAgdmFyIGVuZE5vZGUgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcbiAgdmFyIGJsb2NrTm9kZXMgPSBbbm9kZV07XG5cbiAgZG8ge1xuICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIGlmICghbm9kZSkgYnJlYWs7XG4gICAgYmxvY2tOb2Rlcy5wdXNoKG5vZGUpO1xuICB9IHdoaWxlIChub2RlICE9PSBlbmROb2RlKTtcblxuICByZXR1cm4ganFMaXRlKGJsb2NrTm9kZXMpO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgd2l0aG91dCBhIHByb3RvdHlwZS4gVGhpcyBvYmplY3QgaXMgdXNlZnVsIGZvciBsb29rdXAgd2l0aG91dCBoYXZpbmcgdG9cbiAqIGd1YXJkIGFnYWluc3QgcHJvdG90eXBpY2FsbHkgaW5oZXJpdGVkIHByb3BlcnRpZXMgdmlhIGhhc093blByb3BlcnR5LlxuICpcbiAqIFJlbGF0ZWQgbWljcm8tYmVuY2htYXJrczpcbiAqIC0gaHR0cDovL2pzcGVyZi5jb20vb2JqZWN0LWNyZWF0ZTJcbiAqIC0gaHR0cDovL2pzcGVyZi5jb20vcHJvdG8tbWFwLWxvb2t1cC8yXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL2Zvci1pbi12cy1vYmplY3Qta2V5czJcbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBjcmVhdGVNYXAoKSB7XG4gIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuXG52YXIgTk9ERV9UWVBFX0VMRU1FTlQgPSAxO1xudmFyIE5PREVfVFlQRV9URVhUID0gMztcbnZhciBOT0RFX1RZUEVfQ09NTUVOVCA9IDg7XG52YXIgTk9ERV9UWVBFX0RPQ1VNRU5UID0gOTtcbnZhciBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQgPSAxMTtcblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgYW5ndWxhci5Nb2R1bGVcbiAqIEBtb2R1bGUgbmdcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEludGVyZmFjZSBmb3IgY29uZmlndXJpbmcgYW5ndWxhciB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlc30uXG4gKi9cblxuZnVuY3Rpb24gc2V0dXBNb2R1bGVMb2FkZXIod2luZG93KSB7XG5cbiAgdmFyICRpbmplY3Rvck1pbkVyciA9IG1pbkVycignJGluamVjdG9yJyk7XG4gIHZhciBuZ01pbkVyciA9IG1pbkVycignbmcnKTtcblxuICBmdW5jdGlvbiBlbnN1cmUob2JqLCBuYW1lLCBmYWN0b3J5KSB7XG4gICAgcmV0dXJuIG9ialtuYW1lXSB8fCAob2JqW25hbWVdID0gZmFjdG9yeSgpKTtcbiAgfVxuXG4gIHZhciBhbmd1bGFyID0gZW5zdXJlKHdpbmRvdywgJ2FuZ3VsYXInLCBPYmplY3QpO1xuXG4gIC8vIFdlIG5lZWQgdG8gZXhwb3NlIGBhbmd1bGFyLiQkbWluRXJyYCB0byBtb2R1bGVzIHN1Y2ggYXMgYG5nUmVzb3VyY2VgIHRoYXQgcmVmZXJlbmNlIGl0IGR1cmluZyBib290c3RyYXBcbiAgYW5ndWxhci4kJG1pbkVyciA9IGFuZ3VsYXIuJCRtaW5FcnIgfHwgbWluRXJyO1xuXG4gIHJldHVybiBlbnN1cmUoYW5ndWxhciwgJ21vZHVsZScsIGZ1bmN0aW9uKCkge1xuICAgIC8qKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsIGFuZ3VsYXIuTW9kdWxlPn0gKi9cbiAgICB2YXIgbW9kdWxlcyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAgICogQG5hbWUgYW5ndWxhci5tb2R1bGVcbiAgICAgKiBAbW9kdWxlIG5nXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBUaGUgYGFuZ3VsYXIubW9kdWxlYCBpcyBhIGdsb2JhbCBwbGFjZSBmb3IgY3JlYXRpbmcsIHJlZ2lzdGVyaW5nIGFuZCByZXRyaWV2aW5nIEFuZ3VsYXJcbiAgICAgKiBtb2R1bGVzLlxuICAgICAqIEFsbCBtb2R1bGVzIChhbmd1bGFyIGNvcmUgb3IgM3JkIHBhcnR5KSB0aGF0IHNob3VsZCBiZSBhdmFpbGFibGUgdG8gYW4gYXBwbGljYXRpb24gbXVzdCBiZVxuICAgICAqIHJlZ2lzdGVyZWQgdXNpbmcgdGhpcyBtZWNoYW5pc20uXG4gICAgICpcbiAgICAgKiBXaGVuIHBhc3NlZCB0d28gb3IgbW9yZSBhcmd1bWVudHMsIGEgbmV3IG1vZHVsZSBpcyBjcmVhdGVkLiAgSWYgcGFzc2VkIG9ubHkgb25lIGFyZ3VtZW50LCBhblxuICAgICAqIGV4aXN0aW5nIG1vZHVsZSAodGhlIG5hbWUgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBgbW9kdWxlYCkgaXMgcmV0cmlldmVkLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIE1vZHVsZVxuICAgICAqXG4gICAgICogQSBtb2R1bGUgaXMgYSBjb2xsZWN0aW9uIG9mIHNlcnZpY2VzLCBkaXJlY3RpdmVzLCBjb250cm9sbGVycywgZmlsdGVycywgYW5kIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24uXG4gICAgICogYGFuZ3VsYXIubW9kdWxlYCBpcyB1c2VkIHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIENyZWF0ZSBhIG5ldyBtb2R1bGVcbiAgICAgKiB2YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbXlNb2R1bGUnLCBbXSk7XG4gICAgICpcbiAgICAgKiAvLyByZWdpc3RlciBhIG5ldyBzZXJ2aWNlXG4gICAgICogbXlNb2R1bGUudmFsdWUoJ2FwcE5hbWUnLCAnTXlDb29sQXBwJyk7XG4gICAgICpcbiAgICAgKiAvLyBjb25maWd1cmUgZXhpc3Rpbmcgc2VydmljZXMgaW5zaWRlIGluaXRpYWxpemF0aW9uIGJsb2Nrcy5cbiAgICAgKiBteU1vZHVsZS5jb25maWcoWyckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uKCRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICogICAvLyBDb25maWd1cmUgZXhpc3RpbmcgcHJvdmlkZXJzXG4gICAgICogICAkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCchJyk7XG4gICAgICogfV0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhlbiB5b3UgY2FuIGNyZWF0ZSBhbiBpbmplY3RvciBhbmQgbG9hZCB5b3VyIG1vZHVsZXMgbGlrZSB0aGlzOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB2YXIgaW5qZWN0b3IgPSBhbmd1bGFyLmluamVjdG9yKFsnbmcnLCAnbXlNb2R1bGUnXSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEhvd2V2ZXIgaXQncyBtb3JlIGxpa2VseSB0aGF0IHlvdSdsbCBqdXN0IHVzZVxuICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9IG9yXG4gICAgICoge0BsaW5rIGFuZ3VsYXIuYm9vdHN0cmFwfSB0byBzaW1wbGlmeSB0aGlzIHByb2Nlc3MgZm9yIHlvdS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgbW9kdWxlIHRvIGNyZWF0ZSBvciByZXRyaWV2ZS5cbiAgICAgKiBAcGFyYW0geyFBcnJheS48c3RyaW5nPj19IHJlcXVpcmVzIElmIHNwZWNpZmllZCB0aGVuIG5ldyBtb2R1bGUgaXMgYmVpbmcgY3JlYXRlZC4gSWZcbiAgICAgKiAgICAgICAgdW5zcGVjaWZpZWQgdGhlbiB0aGUgbW9kdWxlIGlzIGJlaW5nIHJldHJpZXZlZCBmb3IgZnVydGhlciBjb25maWd1cmF0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb249fSBjb25maWdGbiBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGUgbW9kdWxlLiBTYW1lIGFzXG4gICAgICogICAgICAgIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25maWcgTW9kdWxlI2NvbmZpZygpfS5cbiAgICAgKiBAcmV0dXJucyB7bW9kdWxlfSBuZXcgbW9kdWxlIHdpdGggdGhlIHtAbGluayBhbmd1bGFyLk1vZHVsZX0gYXBpLlxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBtb2R1bGUobmFtZSwgcmVxdWlyZXMsIGNvbmZpZ0ZuKSB7XG4gICAgICB2YXIgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkgPSBmdW5jdGlvbihuYW1lLCBjb250ZXh0KSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnaGFzT3duUHJvcGVydHknKSB7XG4gICAgICAgICAgdGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCAnaGFzT3duUHJvcGVydHkgaXMgbm90IGEgdmFsaWQgezB9IG5hbWUnLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ21vZHVsZScpO1xuICAgICAgaWYgKHJlcXVpcmVzICYmIG1vZHVsZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgbW9kdWxlc1tuYW1lXSA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gZW5zdXJlKG1vZHVsZXMsIG5hbWUsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXJlcXVpcmVzKSB7XG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdub21vZCcsIFwiTW9kdWxlICd7MH0nIGlzIG5vdCBhdmFpbGFibGUhIFlvdSBlaXRoZXIgbWlzc3BlbGxlZCBcIiArXG4gICAgICAgICAgICAgXCJ0aGUgbW9kdWxlIG5hbWUgb3IgZm9yZ290IHRvIGxvYWQgaXQuIElmIHJlZ2lzdGVyaW5nIGEgbW9kdWxlIGVuc3VyZSB0aGF0IHlvdSBcIiArXG4gICAgICAgICAgICAgXCJzcGVjaWZ5IHRoZSBkZXBlbmRlbmNpZXMgYXMgdGhlIHNlY29uZCBhcmd1bWVudC5cIiwgbmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiogQHR5cGUgeyFBcnJheS48QXJyYXkuPCo+Pn0gKi9cbiAgICAgICAgdmFyIGludm9rZVF1ZXVlID0gW107XG5cbiAgICAgICAgLyoqIEB0eXBlIHshQXJyYXkuPEZ1bmN0aW9uPn0gKi9cbiAgICAgICAgdmFyIGNvbmZpZ0Jsb2NrcyA9IFtdO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7IUFycmF5LjxGdW5jdGlvbj59ICovXG4gICAgICAgIHZhciBydW5CbG9ja3MgPSBbXTtcblxuICAgICAgICB2YXIgY29uZmlnID0gaW52b2tlTGF0ZXIoJyRpbmplY3RvcicsICdpbnZva2UnLCAncHVzaCcsIGNvbmZpZ0Jsb2Nrcyk7XG5cbiAgICAgICAgLyoqIEB0eXBlIHthbmd1bGFyLk1vZHVsZX0gKi9cbiAgICAgICAgdmFyIG1vZHVsZUluc3RhbmNlID0ge1xuICAgICAgICAgIC8vIFByaXZhdGUgc3RhdGVcbiAgICAgICAgICBfaW52b2tlUXVldWU6IGludm9rZVF1ZXVlLFxuICAgICAgICAgIF9jb25maWdCbG9ja3M6IGNvbmZpZ0Jsb2NrcyxcbiAgICAgICAgICBfcnVuQmxvY2tzOiBydW5CbG9ja3MsXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNyZXF1aXJlc1xuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIEhvbGRzIHRoZSBsaXN0IG9mIG1vZHVsZXMgd2hpY2ggdGhlIGluamVjdG9yIHdpbGwgbG9hZCBiZWZvcmUgdGhlIGN1cnJlbnQgbW9kdWxlIGlzXG4gICAgICAgICAgICogbG9hZGVkLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHJlcXVpcmVzOiByZXF1aXJlcyxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI25hbWVcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBOYW1lIG9mIHRoZSBtb2R1bGUuXG4gICAgICAgICAgICovXG4gICAgICAgICAgbmFtZTogbmFtZSxcblxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3Byb3ZpZGVyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHNlcnZpY2UgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3ZpZGVyVHlwZSBDb25zdHJ1Y3Rpb24gZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiB0aGVcbiAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZS5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgJHByb3ZpZGUucHJvdmlkZXIoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgcHJvdmlkZXI6IGludm9rZUxhdGVyKCckcHJvdmlkZScsICdwcm92aWRlcicpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2ZhY3RvcnlcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvdmlkZXJGdW5jdGlvbiBGdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIHRoZSBzZXJ2aWNlLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgZmFjdG9yeTogaW52b2tlTGF0ZXIoJyRwcm92aWRlJywgJ2ZhY3RvcnknKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNzZXJ2aWNlXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHNlcnZpY2UgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbnN0cnVjdG9yIEEgY29uc3RydWN0b3IgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGluc3RhbnRpYXRlZC5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjc2VydmljZSAkcHJvdmlkZS5zZXJ2aWNlKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHNlcnZpY2U6IGludm9rZUxhdGVyKCckcHJvdmlkZScsICdzZXJ2aWNlJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjdmFsdWVcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHsqfSBvYmplY3QgU2VydmljZSBpbnN0YW5jZSBvYmplY3QuXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlICRwcm92aWRlLnZhbHVlKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHZhbHVlOiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAndmFsdWUnKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNjb25zdGFudFxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBjb25zdGFudCBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHsqfSBvYmplY3QgQ29uc3RhbnQgdmFsdWUuXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogQmVjYXVzZSB0aGUgY29uc3RhbnQgYXJlIGZpeGVkLCB0aGV5IGdldCBhcHBsaWVkIGJlZm9yZSBvdGhlciBwcm92aWRlIG1ldGhvZHMuXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI2NvbnN0YW50ICRwcm92aWRlLmNvbnN0YW50KCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGNvbnN0YW50OiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAnY29uc3RhbnQnLCAndW5zaGlmdCcpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2FuaW1hdGlvblxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBhbmltYXRpb24gbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFuaW1hdGlvbkZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIGFuXG4gICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiAqKk5PVEUqKjogYW5pbWF0aW9ucyB0YWtlIGVmZmVjdCBvbmx5IGlmIHRoZSAqKm5nQW5pbWF0ZSoqIG1vZHVsZSBpcyBsb2FkZWQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIERlZmluZXMgYW4gYW5pbWF0aW9uIGhvb2sgdGhhdCBjYW4gYmUgbGF0ZXIgdXNlZCB3aXRoXG4gICAgICAgICAgICoge0BsaW5rIG5nQW5pbWF0ZS4kYW5pbWF0ZSAkYW5pbWF0ZX0gc2VydmljZSBhbmQgZGlyZWN0aXZlcyB0aGF0IHVzZSB0aGlzIHNlcnZpY2UuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgICAqIG1vZHVsZS5hbmltYXRpb24oJy5hbmltYXRpb24tbmFtZScsIGZ1bmN0aW9uKCRpbmplY3QxLCAkaW5qZWN0Mikge1xuICAgICAgICAgICAqICAgcmV0dXJuIHtcbiAgICAgICAgICAgKiAgICAgZXZlbnROYW1lIDogZnVuY3Rpb24oZWxlbWVudCwgZG9uZSkge1xuICAgICAgICAgICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAqICAgICAgIC8vb25jZSBjb21wbGV0ZSwgdGhlbiBydW4gZG9uZSgpXG4gICAgICAgICAgICogICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhbmNlbGxhdGlvbkZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgKiAgICAgICAgIC8vY29kZSB0byBjYW5jZWwgdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAqICAgICAgIH1cbiAgICAgICAgICAgKiAgICAgfVxuICAgICAgICAgICAqICAgfVxuICAgICAgICAgICAqIH0pXG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRhbmltYXRlUHJvdmlkZXIjcmVnaXN0ZXIgJGFuaW1hdGVQcm92aWRlci5yZWdpc3RlcigpfSBhbmRcbiAgICAgICAgICAgKiB7QGxpbmsgbmdBbmltYXRlIG5nQW5pbWF0ZSBtb2R1bGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGFuaW1hdGlvbjogaW52b2tlTGF0ZXIoJyRhbmltYXRlUHJvdmlkZXInLCAncmVnaXN0ZXInKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNmaWx0ZXJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRmlsdGVyIG5hbWUuXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmlsdGVyRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2YgZmlsdGVyLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGZpbHRlclByb3ZpZGVyI3JlZ2lzdGVyICRmaWx0ZXJQcm92aWRlci5yZWdpc3RlcigpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBmaWx0ZXI6IGludm9rZUxhdGVyKCckZmlsdGVyUHJvdmlkZXInLCAncmVnaXN0ZXInKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNjb250cm9sbGVyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBDb250cm9sbGVyIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgY29udHJvbGxlcnMgd2hlcmUgdGhlXG4gICAgICAgICAgICogICAga2V5cyBhcmUgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgY29uc3RydWN0b3JzLlxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbnN0cnVjdG9yIENvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogU2VlIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyICRjb250cm9sbGVyUHJvdmlkZXIucmVnaXN0ZXIoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgY29udHJvbGxlcjogaW52b2tlTGF0ZXIoJyRjb250cm9sbGVyUHJvdmlkZXInLCAncmVnaXN0ZXInKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNkaXJlY3RpdmVcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIERpcmVjdGl2ZSBuYW1lLCBvciBhbiBvYmplY3QgbWFwIG9mIGRpcmVjdGl2ZXMgd2hlcmUgdGhlXG4gICAgICAgICAgICogICAga2V5cyBhcmUgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgZmFjdG9yaWVzLlxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGRpcmVjdGl2ZUZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mXG4gICAgICAgICAgICogZGlyZWN0aXZlcy5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlICRjb21waWxlUHJvdmlkZXIuZGlyZWN0aXZlKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGRpcmVjdGl2ZTogaW52b2tlTGF0ZXIoJyRjb21waWxlUHJvdmlkZXInLCAnZGlyZWN0aXZlJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29uZmlnXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmZpZ0ZuIEV4ZWN1dGUgdGhpcyBmdW5jdGlvbiBvbiBtb2R1bGUgbG9hZC4gVXNlZnVsIGZvciBzZXJ2aWNlXG4gICAgICAgICAgICogICAgY29uZmlndXJhdGlvbi5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gcmVnaXN0ZXIgd29yayB3aGljaCBuZWVkcyB0byBiZSBwZXJmb3JtZWQgb24gbW9kdWxlIGxvYWRpbmcuXG4gICAgICAgICAgICogRm9yIG1vcmUgYWJvdXQgaG93IHRvIGNvbmZpZ3VyZSBzZXJ2aWNlcywgc2VlXG4gICAgICAgICAgICoge0BsaW5rIHByb3ZpZGVycyNwcm92aWRlci1yZWNpcGUgUHJvdmlkZXIgUmVjaXBlfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjb25maWc6IGNvbmZpZyxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNydW5cbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW5pdGlhbGl6YXRpb25GbiBFeGVjdXRlIHRoaXMgZnVuY3Rpb24gYWZ0ZXIgaW5qZWN0b3IgY3JlYXRpb24uXG4gICAgICAgICAgICogICAgVXNlZnVsIGZvciBhcHBsaWNhdGlvbiBpbml0aWFsaXphdGlvbi5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gcmVnaXN0ZXIgd29yayB3aGljaCBzaG91bGQgYmUgcGVyZm9ybWVkIHdoZW4gdGhlIGluamVjdG9yIGlzIGRvbmVcbiAgICAgICAgICAgKiBsb2FkaW5nIGFsbCBtb2R1bGVzLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHJ1bjogZnVuY3Rpb24oYmxvY2spIHtcbiAgICAgICAgICAgIHJ1bkJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoY29uZmlnRm4pIHtcbiAgICAgICAgICBjb25maWcoY29uZmlnRm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1vZHVsZUluc3RhbmNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvdmlkZXJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZz19IGluc2VydE1ldGhvZFxuICAgICAgICAgKiBAcmV0dXJucyB7YW5ndWxhci5Nb2R1bGV9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpbnZva2VMYXRlcihwcm92aWRlciwgbWV0aG9kLCBpbnNlcnRNZXRob2QsIHF1ZXVlKSB7XG4gICAgICAgICAgaWYgKCFxdWV1ZSkgcXVldWUgPSBpbnZva2VRdWV1ZTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBxdWV1ZVtpbnNlcnRNZXRob2QgfHwgJ3B1c2gnXShbcHJvdmlkZXIsIG1ldGhvZCwgYXJndW1lbnRzXSk7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlSW5zdGFuY2U7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbn1cblxuLyogZ2xvYmFsOiB0b0RlYnVnU3RyaW5nOiB0cnVlICovXG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZU9iamVjdChvYmopIHtcbiAgdmFyIHNlZW4gPSBbXTtcblxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgIHZhbCA9IHRvSnNvblJlcGxhY2VyKGtleSwgdmFsKTtcbiAgICBpZiAoaXNPYmplY3QodmFsKSkge1xuXG4gICAgICBpZiAoc2Vlbi5pbmRleE9mKHZhbCkgPj0gMCkgcmV0dXJuICc8PGFscmVhZHkgc2Vlbj4+JztcblxuICAgICAgc2Vlbi5wdXNoKHZhbCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0b0RlYnVnU3RyaW5nKG9iaikge1xuICBpZiAodHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBvYmoudG9TdHJpbmcoKS5yZXBsYWNlKC8gXFx7W1xcc1xcU10qJC8sICcnKTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiAndW5kZWZpbmVkJztcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBzZXJpYWxpemVPYmplY3Qob2JqKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG4vKiBnbG9iYWwgYW5ndWxhck1vZHVsZTogdHJ1ZSxcbiAgdmVyc2lvbjogdHJ1ZSxcblxuICAkTG9jYWxlUHJvdmlkZXIsXG4gICRDb21waWxlUHJvdmlkZXIsXG5cbiAgaHRtbEFuY2hvckRpcmVjdGl2ZSxcbiAgaW5wdXREaXJlY3RpdmUsXG4gIGlucHV0RGlyZWN0aXZlLFxuICBmb3JtRGlyZWN0aXZlLFxuICBzY3JpcHREaXJlY3RpdmUsXG4gIHNlbGVjdERpcmVjdGl2ZSxcbiAgc3R5bGVEaXJlY3RpdmUsXG4gIG9wdGlvbkRpcmVjdGl2ZSxcbiAgbmdCaW5kRGlyZWN0aXZlLFxuICBuZ0JpbmRIdG1sRGlyZWN0aXZlLFxuICBuZ0JpbmRUZW1wbGF0ZURpcmVjdGl2ZSxcbiAgbmdDbGFzc0RpcmVjdGl2ZSxcbiAgbmdDbGFzc0V2ZW5EaXJlY3RpdmUsXG4gIG5nQ2xhc3NPZGREaXJlY3RpdmUsXG4gIG5nQ3NwRGlyZWN0aXZlLFxuICBuZ0Nsb2FrRGlyZWN0aXZlLFxuICBuZ0NvbnRyb2xsZXJEaXJlY3RpdmUsXG4gIG5nRm9ybURpcmVjdGl2ZSxcbiAgbmdIaWRlRGlyZWN0aXZlLFxuICBuZ0lmRGlyZWN0aXZlLFxuICBuZ0luY2x1ZGVEaXJlY3RpdmUsXG4gIG5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlLFxuICBuZ0luaXREaXJlY3RpdmUsXG4gIG5nTm9uQmluZGFibGVEaXJlY3RpdmUsXG4gIG5nUGx1cmFsaXplRGlyZWN0aXZlLFxuICBuZ1JlcGVhdERpcmVjdGl2ZSxcbiAgbmdTaG93RGlyZWN0aXZlLFxuICBuZ1N0eWxlRGlyZWN0aXZlLFxuICBuZ1N3aXRjaERpcmVjdGl2ZSxcbiAgbmdTd2l0Y2hXaGVuRGlyZWN0aXZlLFxuICBuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmUsXG4gIG5nT3B0aW9uc0RpcmVjdGl2ZSxcbiAgbmdUcmFuc2NsdWRlRGlyZWN0aXZlLFxuICBuZ01vZGVsRGlyZWN0aXZlLFxuICBuZ0xpc3REaXJlY3RpdmUsXG4gIG5nQ2hhbmdlRGlyZWN0aXZlLFxuICBwYXR0ZXJuRGlyZWN0aXZlLFxuICBwYXR0ZXJuRGlyZWN0aXZlLFxuICByZXF1aXJlZERpcmVjdGl2ZSxcbiAgcmVxdWlyZWREaXJlY3RpdmUsXG4gIG1pbmxlbmd0aERpcmVjdGl2ZSxcbiAgbWlubGVuZ3RoRGlyZWN0aXZlLFxuICBtYXhsZW5ndGhEaXJlY3RpdmUsXG4gIG1heGxlbmd0aERpcmVjdGl2ZSxcbiAgbmdWYWx1ZURpcmVjdGl2ZSxcbiAgbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUsXG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzLFxuICBuZ0V2ZW50RGlyZWN0aXZlcyxcblxuICAkQW5jaG9yU2Nyb2xsUHJvdmlkZXIsXG4gICRBbmltYXRlUHJvdmlkZXIsXG4gICRCcm93c2VyUHJvdmlkZXIsXG4gICRDYWNoZUZhY3RvcnlQcm92aWRlcixcbiAgJENvbnRyb2xsZXJQcm92aWRlcixcbiAgJERvY3VtZW50UHJvdmlkZXIsXG4gICRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsXG4gICRGaWx0ZXJQcm92aWRlcixcbiAgJEludGVycG9sYXRlUHJvdmlkZXIsXG4gICRJbnRlcnZhbFByb3ZpZGVyLFxuICAkSHR0cFByb3ZpZGVyLFxuICAkSHR0cEJhY2tlbmRQcm92aWRlcixcbiAgJExvY2F0aW9uUHJvdmlkZXIsXG4gICRMb2dQcm92aWRlcixcbiAgJFBhcnNlUHJvdmlkZXIsXG4gICRSb290U2NvcGVQcm92aWRlcixcbiAgJFFQcm92aWRlcixcbiAgJCRRUHJvdmlkZXIsXG4gICQkU2FuaXRpemVVcmlQcm92aWRlcixcbiAgJFNjZVByb3ZpZGVyLFxuICAkU2NlRGVsZWdhdGVQcm92aWRlcixcbiAgJFNuaWZmZXJQcm92aWRlcixcbiAgJFRlbXBsYXRlQ2FjaGVQcm92aWRlcixcbiAgJFRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyLFxuICAkJFRlc3RhYmlsaXR5UHJvdmlkZXIsXG4gICRUaW1lb3V0UHJvdmlkZXIsXG4gICQkUkFGUHJvdmlkZXIsXG4gICQkQXN5bmNDYWxsYmFja1Byb3ZpZGVyLFxuICAkV2luZG93UHJvdmlkZXIsXG4gICQkanFMaXRlUHJvdmlkZXJcbiovXG5cblxuLyoqXG4gKiBAbmdkb2Mgb2JqZWN0XG4gKiBAbmFtZSBhbmd1bGFyLnZlcnNpb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBkZXNjcmlwdGlvblxuICogQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgQW5ndWxhckpTIHZlcnNpb24uIFRoaXMgb2JqZWN0IGhhcyB0aGVcbiAqIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqIC0gYGZ1bGxgIOKAkyBge3N0cmluZ31gIOKAkyBGdWxsIHZlcnNpb24gc3RyaW5nLCBzdWNoIGFzIFwiMC45LjE4XCIuXG4gKiAtIGBtYWpvcmAg4oCTIGB7bnVtYmVyfWAg4oCTIE1ham9yIHZlcnNpb24gbnVtYmVyLCBzdWNoIGFzIFwiMFwiLlxuICogLSBgbWlub3JgIOKAkyBge251bWJlcn1gIOKAkyBNaW5vciB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjlcIi5cbiAqIC0gYGRvdGAg4oCTIGB7bnVtYmVyfWAg4oCTIERvdCB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjE4XCIuXG4gKiAtIGBjb2RlTmFtZWAg4oCTIGB7c3RyaW5nfWAg4oCTIENvZGUgbmFtZSBvZiB0aGUgcmVsZWFzZSwgc3VjaCBhcyBcImppZ2dsaW5nLWFybWZhdFwiLlxuICovXG52YXIgdmVyc2lvbiA9IHtcbiAgZnVsbDogJzEuMy4xMycsICAgIC8vIGFsbCBvZiB0aGVzZSBwbGFjZWhvbGRlciBzdHJpbmdzIHdpbGwgYmUgcmVwbGFjZWQgYnkgZ3J1bnQnc1xuICBtYWpvcjogMSwgICAgLy8gcGFja2FnZSB0YXNrXG4gIG1pbm9yOiAzLFxuICBkb3Q6IDEzLFxuICBjb2RlTmFtZTogJ21ldGljdWxvdXMtcmlmZmxlc2h1ZmZsZSdcbn07XG5cblxuZnVuY3Rpb24gcHVibGlzaEV4dGVybmFsQVBJKGFuZ3VsYXIpIHtcbiAgZXh0ZW5kKGFuZ3VsYXIsIHtcbiAgICAnYm9vdHN0cmFwJzogYm9vdHN0cmFwLFxuICAgICdjb3B5JzogY29weSxcbiAgICAnZXh0ZW5kJzogZXh0ZW5kLFxuICAgICdlcXVhbHMnOiBlcXVhbHMsXG4gICAgJ2VsZW1lbnQnOiBqcUxpdGUsXG4gICAgJ2ZvckVhY2gnOiBmb3JFYWNoLFxuICAgICdpbmplY3Rvcic6IGNyZWF0ZUluamVjdG9yLFxuICAgICdub29wJzogbm9vcCxcbiAgICAnYmluZCc6IGJpbmQsXG4gICAgJ3RvSnNvbic6IHRvSnNvbixcbiAgICAnZnJvbUpzb24nOiBmcm9tSnNvbixcbiAgICAnaWRlbnRpdHknOiBpZGVudGl0eSxcbiAgICAnaXNVbmRlZmluZWQnOiBpc1VuZGVmaW5lZCxcbiAgICAnaXNEZWZpbmVkJzogaXNEZWZpbmVkLFxuICAgICdpc1N0cmluZyc6IGlzU3RyaW5nLFxuICAgICdpc0Z1bmN0aW9uJzogaXNGdW5jdGlvbixcbiAgICAnaXNPYmplY3QnOiBpc09iamVjdCxcbiAgICAnaXNOdW1iZXInOiBpc051bWJlcixcbiAgICAnaXNFbGVtZW50JzogaXNFbGVtZW50LFxuICAgICdpc0FycmF5JzogaXNBcnJheSxcbiAgICAndmVyc2lvbic6IHZlcnNpb24sXG4gICAgJ2lzRGF0ZSc6IGlzRGF0ZSxcbiAgICAnbG93ZXJjYXNlJzogbG93ZXJjYXNlLFxuICAgICd1cHBlcmNhc2UnOiB1cHBlcmNhc2UsXG4gICAgJ2NhbGxiYWNrcyc6IHtjb3VudGVyOiAwfSxcbiAgICAnZ2V0VGVzdGFiaWxpdHknOiBnZXRUZXN0YWJpbGl0eSxcbiAgICAnJCRtaW5FcnInOiBtaW5FcnIsXG4gICAgJyQkY3NwJzogY3NwLFxuICAgICdyZWxvYWRXaXRoRGVidWdJbmZvJzogcmVsb2FkV2l0aERlYnVnSW5mb1xuICB9KTtcblxuICBhbmd1bGFyTW9kdWxlID0gc2V0dXBNb2R1bGVMb2FkZXIod2luZG93KTtcbiAgdHJ5IHtcbiAgICBhbmd1bGFyTW9kdWxlKCduZ0xvY2FsZScpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgYW5ndWxhck1vZHVsZSgnbmdMb2NhbGUnLCBbXSkucHJvdmlkZXIoJyRsb2NhbGUnLCAkTG9jYWxlUHJvdmlkZXIpO1xuICB9XG5cbiAgYW5ndWxhck1vZHVsZSgnbmcnLCBbJ25nTG9jYWxlJ10sIFsnJHByb3ZpZGUnLFxuICAgIGZ1bmN0aW9uIG5nTW9kdWxlKCRwcm92aWRlKSB7XG4gICAgICAvLyAkJHNhbml0aXplVXJpUHJvdmlkZXIgbmVlZHMgdG8gYmUgYmVmb3JlICRjb21waWxlUHJvdmlkZXIgYXMgaXQgaXMgdXNlZCBieSBpdC5cbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKHtcbiAgICAgICAgJCRzYW5pdGl6ZVVyaTogJCRTYW5pdGl6ZVVyaVByb3ZpZGVyXG4gICAgICB9KTtcbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKCckY29tcGlsZScsICRDb21waWxlUHJvdmlkZXIpLlxuICAgICAgICBkaXJlY3RpdmUoe1xuICAgICAgICAgICAgYTogaHRtbEFuY2hvckRpcmVjdGl2ZSxcbiAgICAgICAgICAgIGlucHV0OiBpbnB1dERpcmVjdGl2ZSxcbiAgICAgICAgICAgIHRleHRhcmVhOiBpbnB1dERpcmVjdGl2ZSxcbiAgICAgICAgICAgIGZvcm06IGZvcm1EaXJlY3RpdmUsXG4gICAgICAgICAgICBzY3JpcHQ6IHNjcmlwdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIHNlbGVjdDogc2VsZWN0RGlyZWN0aXZlLFxuICAgICAgICAgICAgc3R5bGU6IHN0eWxlRGlyZWN0aXZlLFxuICAgICAgICAgICAgb3B0aW9uOiBvcHRpb25EaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0JpbmQ6IG5nQmluZERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQmluZEh0bWw6IG5nQmluZEh0bWxEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0JpbmRUZW1wbGF0ZTogbmdCaW5kVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0NsYXNzOiBuZ0NsYXNzRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDbGFzc0V2ZW46IG5nQ2xhc3NFdmVuRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDbGFzc09kZDogbmdDbGFzc09kZERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2xvYWs6IG5nQ2xvYWtEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0NvbnRyb2xsZXI6IG5nQ29udHJvbGxlckRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nRm9ybTogbmdGb3JtRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdIaWRlOiBuZ0hpZGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0lmOiBuZ0lmRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdJbmNsdWRlOiBuZ0luY2x1ZGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0luaXQ6IG5nSW5pdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTm9uQmluZGFibGU6IG5nTm9uQmluZGFibGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1BsdXJhbGl6ZTogbmdQbHVyYWxpemVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1JlcGVhdDogbmdSZXBlYXREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1Nob3c6IG5nU2hvd0RpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nU3R5bGU6IG5nU3R5bGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N3aXRjaDogbmdTd2l0Y2hEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N3aXRjaFdoZW46IG5nU3dpdGNoV2hlbkRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nU3dpdGNoRGVmYXVsdDogbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdPcHRpb25zOiBuZ09wdGlvbnNEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1RyYW5zY2x1ZGU6IG5nVHJhbnNjbHVkZURpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTW9kZWw6IG5nTW9kZWxEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0xpc3Q6IG5nTGlzdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2hhbmdlOiBuZ0NoYW5nZURpcmVjdGl2ZSxcbiAgICAgICAgICAgIHBhdHRlcm46IHBhdHRlcm5EaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1BhdHRlcm46IHBhdHRlcm5EaXJlY3RpdmUsXG4gICAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1JlcXVpcmVkOiByZXF1aXJlZERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG1pbmxlbmd0aDogbWlubGVuZ3RoRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdNaW5sZW5ndGg6IG1pbmxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG1heGxlbmd0aDogbWF4bGVuZ3RoRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdNYXhsZW5ndGg6IG1heGxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nVmFsdWU6IG5nVmFsdWVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ01vZGVsT3B0aW9uczogbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmVcbiAgICAgICAgfSkuXG4gICAgICAgIGRpcmVjdGl2ZSh7XG4gICAgICAgICAgbmdJbmNsdWRlOiBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZVxuICAgICAgICB9KS5cbiAgICAgICAgZGlyZWN0aXZlKG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzKS5cbiAgICAgICAgZGlyZWN0aXZlKG5nRXZlbnREaXJlY3RpdmVzKTtcbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKHtcbiAgICAgICAgJGFuY2hvclNjcm9sbDogJEFuY2hvclNjcm9sbFByb3ZpZGVyLFxuICAgICAgICAkYW5pbWF0ZTogJEFuaW1hdGVQcm92aWRlcixcbiAgICAgICAgJGJyb3dzZXI6ICRCcm93c2VyUHJvdmlkZXIsXG4gICAgICAgICRjYWNoZUZhY3Rvcnk6ICRDYWNoZUZhY3RvcnlQcm92aWRlcixcbiAgICAgICAgJGNvbnRyb2xsZXI6ICRDb250cm9sbGVyUHJvdmlkZXIsXG4gICAgICAgICRkb2N1bWVudDogJERvY3VtZW50UHJvdmlkZXIsXG4gICAgICAgICRleGNlcHRpb25IYW5kbGVyOiAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyLFxuICAgICAgICAkZmlsdGVyOiAkRmlsdGVyUHJvdmlkZXIsXG4gICAgICAgICRpbnRlcnBvbGF0ZTogJEludGVycG9sYXRlUHJvdmlkZXIsXG4gICAgICAgICRpbnRlcnZhbDogJEludGVydmFsUHJvdmlkZXIsXG4gICAgICAgICRodHRwOiAkSHR0cFByb3ZpZGVyLFxuICAgICAgICAkaHR0cEJhY2tlbmQ6ICRIdHRwQmFja2VuZFByb3ZpZGVyLFxuICAgICAgICAkbG9jYXRpb246ICRMb2NhdGlvblByb3ZpZGVyLFxuICAgICAgICAkbG9nOiAkTG9nUHJvdmlkZXIsXG4gICAgICAgICRwYXJzZTogJFBhcnNlUHJvdmlkZXIsXG4gICAgICAgICRyb290U2NvcGU6ICRSb290U2NvcGVQcm92aWRlcixcbiAgICAgICAgJHE6ICRRUHJvdmlkZXIsXG4gICAgICAgICQkcTogJCRRUHJvdmlkZXIsXG4gICAgICAgICRzY2U6ICRTY2VQcm92aWRlcixcbiAgICAgICAgJHNjZURlbGVnYXRlOiAkU2NlRGVsZWdhdGVQcm92aWRlcixcbiAgICAgICAgJHNuaWZmZXI6ICRTbmlmZmVyUHJvdmlkZXIsXG4gICAgICAgICR0ZW1wbGF0ZUNhY2hlOiAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyLFxuICAgICAgICAkdGVtcGxhdGVSZXF1ZXN0OiAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIsXG4gICAgICAgICQkdGVzdGFiaWxpdHk6ICQkVGVzdGFiaWxpdHlQcm92aWRlcixcbiAgICAgICAgJHRpbWVvdXQ6ICRUaW1lb3V0UHJvdmlkZXIsXG4gICAgICAgICR3aW5kb3c6ICRXaW5kb3dQcm92aWRlcixcbiAgICAgICAgJCRyQUY6ICQkUkFGUHJvdmlkZXIsXG4gICAgICAgICQkYXN5bmNDYWxsYmFjazogJCRBc3luY0NhbGxiYWNrUHJvdmlkZXIsXG4gICAgICAgICQkanFMaXRlOiAkJGpxTGl0ZVByb3ZpZGVyXG4gICAgICB9KTtcbiAgICB9XG4gIF0pO1xufVxuXG4vKiBnbG9iYWwgSlFMaXRlUHJvdG90eXBlOiB0cnVlLFxuICBhZGRFdmVudExpc3RlbmVyRm46IHRydWUsXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJGbjogdHJ1ZSxcbiAgQk9PTEVBTl9BVFRSOiB0cnVlLFxuICBBTElBU0VEX0FUVFI6IHRydWUsXG4qL1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vL0pRTGl0ZVxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5lbGVtZW50XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogV3JhcHMgYSByYXcgRE9NIGVsZW1lbnQgb3IgSFRNTCBzdHJpbmcgYXMgYSBbalF1ZXJ5XShodHRwOi8vanF1ZXJ5LmNvbSkgZWxlbWVudC5cbiAqXG4gKiBJZiBqUXVlcnkgaXMgYXZhaWxhYmxlLCBgYW5ndWxhci5lbGVtZW50YCBpcyBhbiBhbGlhcyBmb3IgdGhlXG4gKiBbalF1ZXJ5XShodHRwOi8vYXBpLmpxdWVyeS5jb20valF1ZXJ5LykgZnVuY3Rpb24uIElmIGpRdWVyeSBpcyBub3QgYXZhaWxhYmxlLCBgYW5ndWxhci5lbGVtZW50YFxuICogZGVsZWdhdGVzIHRvIEFuZ3VsYXIncyBidWlsdC1pbiBzdWJzZXQgb2YgalF1ZXJ5LCBjYWxsZWQgXCJqUXVlcnkgbGl0ZVwiIG9yIFwianFMaXRlLlwiXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5qcUxpdGUgaXMgYSB0aW55LCBBUEktY29tcGF0aWJsZSBzdWJzZXQgb2YgalF1ZXJ5IHRoYXQgYWxsb3dzXG4gKiBBbmd1bGFyIHRvIG1hbmlwdWxhdGUgdGhlIERPTSBpbiBhIGNyb3NzLWJyb3dzZXIgY29tcGF0aWJsZSB3YXkuICoqanFMaXRlKiogaW1wbGVtZW50cyBvbmx5IHRoZSBtb3N0XG4gKiBjb21tb25seSBuZWVkZWQgZnVuY3Rpb25hbGl0eSB3aXRoIHRoZSBnb2FsIG9mIGhhdmluZyBhIHZlcnkgc21hbGwgZm9vdHByaW50LjwvZGl2PlxuICpcbiAqIFRvIHVzZSBqUXVlcnksIHNpbXBseSBsb2FkIGl0IGJlZm9yZSBgRE9NQ29udGVudExvYWRlZGAgZXZlbnQgZmlyZWQuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0XCI+KipOb3RlOioqIGFsbCBlbGVtZW50IHJlZmVyZW5jZXMgaW4gQW5ndWxhciBhcmUgYWx3YXlzIHdyYXBwZWQgd2l0aCBqUXVlcnkgb3JcbiAqIGpxTGl0ZTsgdGhleSBhcmUgbmV2ZXIgcmF3IERPTSByZWZlcmVuY2VzLjwvZGl2PlxuICpcbiAqICMjIEFuZ3VsYXIncyBqcUxpdGVcbiAqIGpxTGl0ZSBwcm92aWRlcyBvbmx5IHRoZSBmb2xsb3dpbmcgalF1ZXJ5IG1ldGhvZHM6XG4gKlxuICogLSBbYGFkZENsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYWRkQ2xhc3MvKVxuICogLSBbYGFmdGVyKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYWZ0ZXIvKVxuICogLSBbYGFwcGVuZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FwcGVuZC8pXG4gKiAtIFtgYXR0cigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2F0dHIvKSAtIERvZXMgbm90IHN1cHBvcnQgZnVuY3Rpb25zIGFzIHBhcmFtZXRlcnNcbiAqIC0gW2BiaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYmluZC8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzLCBzZWxlY3RvcnMgb3IgZXZlbnREYXRhXG4gKiAtIFtgY2hpbGRyZW4oKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jaGlsZHJlbi8pIC0gRG9lcyBub3Qgc3VwcG9ydCBzZWxlY3RvcnNcbiAqIC0gW2BjbG9uZSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2Nsb25lLylcbiAqIC0gW2Bjb250ZW50cygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2NvbnRlbnRzLylcbiAqIC0gW2Bjc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jc3MvKSAtIE9ubHkgcmV0cmlldmVzIGlubGluZS1zdHlsZXMsIGRvZXMgbm90IGNhbGwgYGdldENvbXB1dGVkU3R5bGUoKWBcbiAqIC0gW2BkYXRhKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZGF0YS8pXG4gKiAtIFtgZGV0YWNoKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZGV0YWNoLylcbiAqIC0gW2BlbXB0eSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2VtcHR5LylcbiAqIC0gW2BlcSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2VxLylcbiAqIC0gW2BmaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZmluZC8pIC0gTGltaXRlZCB0byBsb29rdXBzIGJ5IHRhZyBuYW1lXG4gKiAtIFtgaGFzQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9oYXNDbGFzcy8pXG4gKiAtIFtgaHRtbCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2h0bWwvKVxuICogLSBbYG5leHQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9uZXh0LykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xuICogLSBbYG9uKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vb24vKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcywgc2VsZWN0b3JzIG9yIGV2ZW50RGF0YVxuICogLSBbYG9mZigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29mZi8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzIG9yIHNlbGVjdG9yc1xuICogLSBbYG9uZSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29uZS8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzIG9yIHNlbGVjdG9yc1xuICogLSBbYHBhcmVudCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3BhcmVudC8pIC0gRG9lcyBub3Qgc3VwcG9ydCBzZWxlY3RvcnNcbiAqIC0gW2BwcmVwZW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcHJlcGVuZC8pXG4gKiAtIFtgcHJvcCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3Byb3AvKVxuICogLSBbYHJlYWR5KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVhZHkvKVxuICogLSBbYHJlbW92ZSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZS8pXG4gKiAtIFtgcmVtb3ZlQXR0cigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZUF0dHIvKVxuICogLSBbYHJlbW92ZUNsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlQ2xhc3MvKVxuICogLSBbYHJlbW92ZURhdGEoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmVEYXRhLylcbiAqIC0gW2ByZXBsYWNlV2l0aCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlcGxhY2VXaXRoLylcbiAqIC0gW2B0ZXh0KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vdGV4dC8pXG4gKiAtIFtgdG9nZ2xlQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90b2dnbGVDbGFzcy8pXG4gKiAtIFtgdHJpZ2dlckhhbmRsZXIoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90cmlnZ2VySGFuZGxlci8pIC0gUGFzc2VzIGEgZHVtbXkgZXZlbnQgb2JqZWN0IHRvIGhhbmRsZXJzLlxuICogLSBbYHVuYmluZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3VuYmluZC8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzXG4gKiAtIFtgdmFsKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vdmFsLylcbiAqIC0gW2B3cmFwKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vd3JhcC8pXG4gKlxuICogIyMgalF1ZXJ5L2pxTGl0ZSBFeHRyYXNcbiAqIEFuZ3VsYXIgYWxzbyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGFkZGl0aW9uYWwgbWV0aG9kcyBhbmQgZXZlbnRzIHRvIGJvdGggalF1ZXJ5IGFuZCBqcUxpdGU6XG4gKlxuICogIyMjIEV2ZW50c1xuICogLSBgJGRlc3Ryb3lgIC0gQW5ndWxhckpTIGludGVyY2VwdHMgYWxsIGpxTGl0ZS9qUXVlcnkncyBET00gZGVzdHJ1Y3Rpb24gYXBpcyBhbmQgZmlyZXMgdGhpcyBldmVudFxuICogICAgb24gYWxsIERPTSBub2RlcyBiZWluZyByZW1vdmVkLiAgVGhpcyBjYW4gYmUgdXNlZCB0byBjbGVhbiB1cCBhbnkgM3JkIHBhcnR5IGJpbmRpbmdzIHRvIHRoZSBET01cbiAqICAgIGVsZW1lbnQgYmVmb3JlIGl0IGlzIHJlbW92ZWQuXG4gKlxuICogIyMjIE1ldGhvZHNcbiAqIC0gYGNvbnRyb2xsZXIobmFtZSlgIC0gcmV0cmlldmVzIHRoZSBjb250cm9sbGVyIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC4gQnkgZGVmYXVsdFxuICogICByZXRyaWV2ZXMgY29udHJvbGxlciBhc3NvY2lhdGVkIHdpdGggdGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZS4gSWYgYG5hbWVgIGlzIHByb3ZpZGVkIGFzXG4gKiAgIGNhbWVsQ2FzZSBkaXJlY3RpdmUgbmFtZSwgdGhlbiB0aGUgY29udHJvbGxlciBmb3IgdGhpcyBkaXJlY3RpdmUgd2lsbCBiZSByZXRyaWV2ZWQgKGUuZy5cbiAqICAgYCduZ01vZGVsJ2ApLlxuICogLSBgaW5qZWN0b3IoKWAgLSByZXRyaWV2ZXMgdGhlIGluamVjdG9yIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC5cbiAqIC0gYHNjb3BlKClgIC0gcmV0cmlldmVzIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0gb2YgdGhlIGN1cnJlbnRcbiAqICAgZWxlbWVudCBvciBpdHMgcGFyZW50LiBSZXF1aXJlcyB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEZWJ1ZyBEYXRhfSB0b1xuICogICBiZSBlbmFibGVkLlxuICogLSBgaXNvbGF0ZVNjb3BlKClgIC0gcmV0cmlldmVzIGFuIGlzb2xhdGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9IGlmIG9uZSBpcyBhdHRhY2hlZCBkaXJlY3RseSB0byB0aGVcbiAqICAgY3VycmVudCBlbGVtZW50LiBUaGlzIGdldHRlciBzaG91bGQgYmUgdXNlZCBvbmx5IG9uIGVsZW1lbnRzIHRoYXQgY29udGFpbiBhIGRpcmVjdGl2ZSB3aGljaCBzdGFydHMgYSBuZXcgaXNvbGF0ZVxuICogICBzY29wZS4gQ2FsbGluZyBgc2NvcGUoKWAgb24gdGhpcyBlbGVtZW50IGFsd2F5cyByZXR1cm5zIHRoZSBvcmlnaW5hbCBub24taXNvbGF0ZSBzY29wZS5cbiAqICAgUmVxdWlyZXMge0BsaW5rIGd1aWRlL3Byb2R1Y3Rpb24jZGlzYWJsaW5nLWRlYnVnLWRhdGEgRGVidWcgRGF0YX0gdG8gYmUgZW5hYmxlZC5cbiAqIC0gYGluaGVyaXRlZERhdGEoKWAgLSBzYW1lIGFzIGBkYXRhKClgLCBidXQgd2Fsa3MgdXAgdGhlIERPTSB1bnRpbCBhIHZhbHVlIGlzIGZvdW5kIG9yIHRoZSB0b3BcbiAqICAgcGFyZW50IGVsZW1lbnQgaXMgcmVhY2hlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xET01FbGVtZW50fSBlbGVtZW50IEhUTUwgc3RyaW5nIG9yIERPTUVsZW1lbnQgdG8gYmUgd3JhcHBlZCBpbnRvIGpRdWVyeS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IGpRdWVyeSBvYmplY3QuXG4gKi9cblxuSlFMaXRlLmV4cGFuZG8gPSAnbmczMzknO1xuXG52YXIganFDYWNoZSA9IEpRTGl0ZS5jYWNoZSA9IHt9LFxuICAgIGpxSWQgPSAxLFxuICAgIGFkZEV2ZW50TGlzdGVuZXJGbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHR5cGUsIGZuKSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGZhbHNlKTtcbiAgICB9LFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHR5cGUsIGZuKSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGZhbHNlKTtcbiAgICB9O1xuXG4vKlxuICogISEhIFRoaXMgaXMgYW4gdW5kb2N1bWVudGVkIFwicHJpdmF0ZVwiIGZ1bmN0aW9uICEhIVxuICovXG5KUUxpdGUuX2RhdGEgPSBmdW5jdGlvbihub2RlKSB7XG4gIC8valF1ZXJ5IGFsd2F5cyByZXR1cm5zIGFuIG9iamVjdCBvbiBjYWNoZSBtaXNzXG4gIHJldHVybiB0aGlzLmNhY2hlW25vZGVbdGhpcy5leHBhbmRvXV0gfHwge307XG59O1xuXG5mdW5jdGlvbiBqcU5leHRJZCgpIHsgcmV0dXJuICsranFJZDsgfVxuXG5cbnZhciBTUEVDSUFMX0NIQVJTX1JFR0VYUCA9IC8oW1xcOlxcLVxcX10rKC4pKS9nO1xudmFyIE1PWl9IQUNLX1JFR0VYUCA9IC9ebW96KFtBLVpdKS87XG52YXIgTU9VU0VfRVZFTlRfTUFQPSB7IG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIiwgbW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIn07XG52YXIganFMaXRlTWluRXJyID0gbWluRXJyKCdqcUxpdGUnKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBzbmFrZV9jYXNlIHRvIGNhbWVsQ2FzZS5cbiAqIEFsc28gdGhlcmUgaXMgc3BlY2lhbCBjYXNlIGZvciBNb3ogcHJlZml4IHN0YXJ0aW5nIHdpdGggdXBwZXIgY2FzZSBsZXR0ZXIuXG4gKiBAcGFyYW0gbmFtZSBOYW1lIHRvIG5vcm1hbGl6ZVxuICovXG5mdW5jdGlvbiBjYW1lbENhc2UobmFtZSkge1xuICByZXR1cm4gbmFtZS5cbiAgICByZXBsYWNlKFNQRUNJQUxfQ0hBUlNfUkVHRVhQLCBmdW5jdGlvbihfLCBzZXBhcmF0b3IsIGxldHRlciwgb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gb2Zmc2V0ID8gbGV0dGVyLnRvVXBwZXJDYXNlKCkgOiBsZXR0ZXI7XG4gICAgfSkuXG4gICAgcmVwbGFjZShNT1pfSEFDS19SRUdFWFAsICdNb3okMScpO1xufVxuXG52YXIgU0lOR0xFX1RBR19SRUdFWFAgPSAvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC87XG52YXIgSFRNTF9SRUdFWFAgPSAvPHwmIz9cXHcrOy87XG52YXIgVEFHX05BTUVfUkVHRVhQID0gLzwoW1xcdzpdKykvO1xudmFyIFhIVE1MX1RBR19SRUdFWFAgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2k7XG5cbnZhciB3cmFwTWFwID0ge1xuICAnb3B0aW9uJzogWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J10sXG5cbiAgJ3RoZWFkJzogWzEsICc8dGFibGU+JywgJzwvdGFibGU+J10sXG4gICdjb2wnOiBbMiwgJzx0YWJsZT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcbiAgJ3RyJzogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gICd0ZCc6IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddLFxuICAnX2RlZmF1bHQnOiBbMCwgXCJcIiwgXCJcIl1cbn07XG5cbndyYXBNYXAub3B0Z3JvdXAgPSB3cmFwTWFwLm9wdGlvbjtcbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuXG5mdW5jdGlvbiBqcUxpdGVJc1RleHROb2RlKGh0bWwpIHtcbiAgcmV0dXJuICFIVE1MX1JFR0VYUC50ZXN0KGh0bWwpO1xufVxuXG5mdW5jdGlvbiBqcUxpdGVBY2NlcHRzRGF0YShub2RlKSB7XG4gIC8vIFRoZSB3aW5kb3cgb2JqZWN0IGNhbiBhY2NlcHQgZGF0YSBidXQgaGFzIG5vIG5vZGVUeXBlXG4gIC8vIE90aGVyd2lzZSB3ZSBhcmUgb25seSBpbnRlcmVzdGVkIGluIGVsZW1lbnRzICgxKSBhbmQgZG9jdW1lbnRzICg5KVxuICB2YXIgbm9kZVR5cGUgPSBub2RlLm5vZGVUeXBlO1xuICByZXR1cm4gbm9kZVR5cGUgPT09IE5PREVfVFlQRV9FTEVNRU5UIHx8ICFub2RlVHlwZSB8fCBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0RPQ1VNRU5UO1xufVxuXG5mdW5jdGlvbiBqcUxpdGVCdWlsZEZyYWdtZW50KGh0bWwsIGNvbnRleHQpIHtcbiAgdmFyIHRtcCwgdGFnLCB3cmFwLFxuICAgICAgZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIG5vZGVzID0gW10sIGk7XG5cbiAgaWYgKGpxTGl0ZUlzVGV4dE5vZGUoaHRtbCkpIHtcbiAgICAvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcbiAgICBub2Rlcy5wdXNoKGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoaHRtbCkpO1xuICB9IGVsc2Uge1xuICAgIC8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2Rlc1xuICAgIHRtcCA9IHRtcCB8fCBmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZXh0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgIHRhZyA9IChUQUdfTkFNRV9SRUdFWFAuZXhlYyhodG1sKSB8fCBbXCJcIiwgXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgd3JhcCA9IHdyYXBNYXBbdGFnXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuICAgIHRtcC5pbm5lckhUTUwgPSB3cmFwWzFdICsgaHRtbC5yZXBsYWNlKFhIVE1MX1RBR19SRUdFWFAsIFwiPCQxPjwvJDI+XCIpICsgd3JhcFsyXTtcblxuICAgIC8vIERlc2NlbmQgdGhyb3VnaCB3cmFwcGVycyB0byB0aGUgcmlnaHQgY29udGVudFxuICAgIGkgPSB3cmFwWzBdO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG4gICAgfVxuXG4gICAgbm9kZXMgPSBjb25jYXQobm9kZXMsIHRtcC5jaGlsZE5vZGVzKTtcblxuICAgIHRtcCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG4gICAgdG1wLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIC8vIFJlbW92ZSB3cmFwcGVyIGZyb20gZnJhZ21lbnRcbiAgZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICBmcmFnbWVudC5pbm5lckhUTUwgPSBcIlwiOyAvLyBDbGVhciBpbm5lciBIVE1MXG4gIGZvckVhY2gobm9kZXMsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGZyYWdtZW50O1xufVxuXG5mdW5jdGlvbiBqcUxpdGVQYXJzZUhUTUwoaHRtbCwgY29udGV4dCkge1xuICBjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcbiAgdmFyIHBhcnNlZDtcblxuICBpZiAoKHBhcnNlZCA9IFNJTkdMRV9UQUdfUkVHRVhQLmV4ZWMoaHRtbCkpKSB7XG4gICAgcmV0dXJuIFtjb250ZXh0LmNyZWF0ZUVsZW1lbnQocGFyc2VkWzFdKV07XG4gIH1cblxuICBpZiAoKHBhcnNlZCA9IGpxTGl0ZUJ1aWxkRnJhZ21lbnQoaHRtbCwgY29udGV4dCkpKSB7XG4gICAgcmV0dXJuIHBhcnNlZC5jaGlsZE5vZGVzO1xuICB9XG5cbiAgcmV0dXJuIFtdO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIEpRTGl0ZShlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSlFMaXRlKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICB2YXIgYXJnSXNTdHJpbmc7XG5cbiAgaWYgKGlzU3RyaW5nKGVsZW1lbnQpKSB7XG4gICAgZWxlbWVudCA9IHRyaW0oZWxlbWVudCk7XG4gICAgYXJnSXNTdHJpbmcgPSB0cnVlO1xuICB9XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBKUUxpdGUpKSB7XG4gICAgaWYgKGFyZ0lzU3RyaW5nICYmIGVsZW1lbnQuY2hhckF0KDApICE9ICc8Jykge1xuICAgICAgdGhyb3cganFMaXRlTWluRXJyKCdub3NlbCcsICdMb29raW5nIHVwIGVsZW1lbnRzIHZpYSBzZWxlY3RvcnMgaXMgbm90IHN1cHBvcnRlZCBieSBqcUxpdGUhIFNlZTogaHR0cDovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvYW5ndWxhci5lbGVtZW50Jyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSlFMaXRlKGVsZW1lbnQpO1xuICB9XG5cbiAgaWYgKGFyZ0lzU3RyaW5nKSB7XG4gICAganFMaXRlQWRkTm9kZXModGhpcywganFMaXRlUGFyc2VIVE1MKGVsZW1lbnQpKTtcbiAgfSBlbHNlIHtcbiAgICBqcUxpdGVBZGROb2Rlcyh0aGlzLCBlbGVtZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVDbG9uZShlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbn1cblxuZnVuY3Rpb24ganFMaXRlRGVhbG9jKGVsZW1lbnQsIG9ubHlEZXNjZW5kYW50cykge1xuICBpZiAoIW9ubHlEZXNjZW5kYW50cykganFMaXRlUmVtb3ZlRGF0YShlbGVtZW50KTtcblxuICBpZiAoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgdmFyIGRlc2NlbmRhbnRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJyk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBkZXNjZW5kYW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGpxTGl0ZVJlbW92ZURhdGEoZGVzY2VuZGFudHNbaV0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVPZmYoZWxlbWVudCwgdHlwZSwgZm4sIHVuc3VwcG9ydGVkKSB7XG4gIGlmIChpc0RlZmluZWQodW5zdXBwb3J0ZWQpKSB0aHJvdyBqcUxpdGVNaW5FcnIoJ29mZmFyZ3MnLCAnanFMaXRlI29mZigpIGRvZXMgbm90IHN1cHBvcnQgdGhlIGBzZWxlY3RvcmAgYXJndW1lbnQnKTtcblxuICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQpO1xuICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5ldmVudHM7XG4gIHZhciBoYW5kbGUgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmhhbmRsZTtcblxuICBpZiAoIWhhbmRsZSkgcmV0dXJuOyAvL25vIGxpc3RlbmVycyByZWdpc3RlcmVkXG5cbiAgaWYgKCF0eXBlKSB7XG4gICAgZm9yICh0eXBlIGluIGV2ZW50cykge1xuICAgICAgaWYgKHR5cGUgIT09ICckZGVzdHJveScpIHtcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lckZuKGVsZW1lbnQsIHR5cGUsIGhhbmRsZSk7XG4gICAgICB9XG4gICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3JFYWNoKHR5cGUuc3BsaXQoJyAnKSwgZnVuY3Rpb24odHlwZSkge1xuICAgICAgaWYgKGlzRGVmaW5lZChmbikpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVyRm5zID0gZXZlbnRzW3R5cGVdO1xuICAgICAgICBhcnJheVJlbW92ZShsaXN0ZW5lckZucyB8fCBbXSwgZm4pO1xuICAgICAgICBpZiAobGlzdGVuZXJGbnMgJiYgbGlzdGVuZXJGbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyRm4oZWxlbWVudCwgdHlwZSwgaGFuZGxlKTtcbiAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlRGF0YShlbGVtZW50LCBuYW1lKSB7XG4gIHZhciBleHBhbmRvSWQgPSBlbGVtZW50Lm5nMzM5O1xuICB2YXIgZXhwYW5kb1N0b3JlID0gZXhwYW5kb0lkICYmIGpxQ2FjaGVbZXhwYW5kb0lkXTtcblxuICBpZiAoZXhwYW5kb1N0b3JlKSB7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGRlbGV0ZSBleHBhbmRvU3RvcmUuZGF0YVtuYW1lXTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXhwYW5kb1N0b3JlLmhhbmRsZSkge1xuICAgICAgaWYgKGV4cGFuZG9TdG9yZS5ldmVudHMuJGRlc3Ryb3kpIHtcbiAgICAgICAgZXhwYW5kb1N0b3JlLmhhbmRsZSh7fSwgJyRkZXN0cm95Jyk7XG4gICAgICB9XG4gICAgICBqcUxpdGVPZmYoZWxlbWVudCk7XG4gICAgfVxuICAgIGRlbGV0ZSBqcUNhY2hlW2V4cGFuZG9JZF07XG4gICAgZWxlbWVudC5uZzMzOSA9IHVuZGVmaW5lZDsgLy8gZG9uJ3QgZGVsZXRlIERPTSBleHBhbmRvcy4gSUUgYW5kIENocm9tZSBkb24ndCBsaWtlIGl0XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwgY3JlYXRlSWZOZWNlc3NhcnkpIHtcbiAgdmFyIGV4cGFuZG9JZCA9IGVsZW1lbnQubmczMzksXG4gICAgICBleHBhbmRvU3RvcmUgPSBleHBhbmRvSWQgJiYganFDYWNoZVtleHBhbmRvSWRdO1xuXG4gIGlmIChjcmVhdGVJZk5lY2Vzc2FyeSAmJiAhZXhwYW5kb1N0b3JlKSB7XG4gICAgZWxlbWVudC5uZzMzOSA9IGV4cGFuZG9JZCA9IGpxTmV4dElkKCk7XG4gICAgZXhwYW5kb1N0b3JlID0ganFDYWNoZVtleHBhbmRvSWRdID0ge2V2ZW50czoge30sIGRhdGE6IHt9LCBoYW5kbGU6IHVuZGVmaW5lZH07XG4gIH1cblxuICByZXR1cm4gZXhwYW5kb1N0b3JlO1xufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZURhdGEoZWxlbWVudCwga2V5LCB2YWx1ZSkge1xuICBpZiAoanFMaXRlQWNjZXB0c0RhdGEoZWxlbWVudCkpIHtcblxuICAgIHZhciBpc1NpbXBsZVNldHRlciA9IGlzRGVmaW5lZCh2YWx1ZSk7XG4gICAgdmFyIGlzU2ltcGxlR2V0dGVyID0gIWlzU2ltcGxlU2V0dGVyICYmIGtleSAmJiAhaXNPYmplY3Qoa2V5KTtcbiAgICB2YXIgbWFzc0dldHRlciA9ICFrZXk7XG4gICAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCAhaXNTaW1wbGVHZXR0ZXIpO1xuICAgIHZhciBkYXRhID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5kYXRhO1xuXG4gICAgaWYgKGlzU2ltcGxlU2V0dGVyKSB7IC8vIGRhdGEoJ2tleScsIHZhbHVlKVxuICAgICAgZGF0YVtrZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtYXNzR2V0dGVyKSB7ICAvLyBkYXRhKClcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNTaW1wbGVHZXR0ZXIpIHsgLy8gZGF0YSgna2V5JylcbiAgICAgICAgICAvLyBkb24ndCBmb3JjZSBjcmVhdGlvbiBvZiBleHBhbmRvU3RvcmUgaWYgaXQgZG9lc24ndCBleGlzdCB5ZXRcbiAgICAgICAgICByZXR1cm4gZGF0YSAmJiBkYXRhW2tleV07XG4gICAgICAgIH0gZWxzZSB7IC8vIG1hc3Mtc2V0dGVyOiBkYXRhKHtrZXkxOiB2YWwxLCBrZXkyOiB2YWwyfSlcbiAgICAgICAgICBleHRlbmQoZGF0YSwga2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVIYXNDbGFzcyhlbGVtZW50LCBzZWxlY3Rvcikge1xuICBpZiAoIWVsZW1lbnQuZ2V0QXR0cmlidXRlKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiAoKFwiIFwiICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArIFwiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLCBcIiBcIikuXG4gICAgICBpbmRleE9mKFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIikgPiAtMSk7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZVJlbW92ZUNsYXNzKGVsZW1lbnQsIGNzc0NsYXNzZXMpIHtcbiAgaWYgKGNzc0NsYXNzZXMgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcbiAgICBmb3JFYWNoKGNzc0NsYXNzZXMuc3BsaXQoJyAnKSwgZnVuY3Rpb24oY3NzQ2xhc3MpIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRyaW0oXG4gICAgICAgICAgKFwiIFwiICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArIFwiIFwiKVxuICAgICAgICAgIC5yZXBsYWNlKC9bXFxuXFx0XS9nLCBcIiBcIilcbiAgICAgICAgICAucmVwbGFjZShcIiBcIiArIHRyaW0oY3NzQ2xhc3MpICsgXCIgXCIsIFwiIFwiKSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlQWRkQ2xhc3MoZWxlbWVudCwgY3NzQ2xhc3Nlcykge1xuICBpZiAoY3NzQ2xhc3NlcyAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSkge1xuICAgIHZhciBleGlzdGluZ0NsYXNzZXMgPSAoJyAnICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArICcgJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcblxcdF0vZywgXCIgXCIpO1xuXG4gICAgZm9yRWFjaChjc3NDbGFzc2VzLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNzc0NsYXNzKSB7XG4gICAgICBjc3NDbGFzcyA9IHRyaW0oY3NzQ2xhc3MpO1xuICAgICAgaWYgKGV4aXN0aW5nQ2xhc3Nlcy5pbmRleE9mKCcgJyArIGNzc0NsYXNzICsgJyAnKSA9PT0gLTEpIHtcbiAgICAgICAgZXhpc3RpbmdDbGFzc2VzICs9IGNzc0NsYXNzICsgJyAnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgdHJpbShleGlzdGluZ0NsYXNzZXMpKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZUFkZE5vZGVzKHJvb3QsIGVsZW1lbnRzKSB7XG4gIC8vIFRISVMgQ09ERSBJUyBWRVJZIEhPVC4gRG9uJ3QgbWFrZSBjaGFuZ2VzIHdpdGhvdXQgYmVuY2htYXJraW5nLlxuXG4gIGlmIChlbGVtZW50cykge1xuXG4gICAgLy8gaWYgYSBOb2RlICh0aGUgbW9zdCBjb21tb24gY2FzZSlcbiAgICBpZiAoZWxlbWVudHMubm9kZVR5cGUpIHtcbiAgICAgIHJvb3Rbcm9vdC5sZW5ndGgrK10gPSBlbGVtZW50cztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuICAgICAgLy8gaWYgYW4gQXJyYXkgb3IgTm9kZUxpc3QgYW5kIG5vdCBhIFdpbmRvd1xuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInICYmIGVsZW1lbnRzLndpbmRvdyAhPT0gZWxlbWVudHMpIHtcbiAgICAgICAgaWYgKGxlbmd0aCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJvb3Rbcm9vdC5sZW5ndGgrK10gPSBlbGVtZW50c1tpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3Rbcm9vdC5sZW5ndGgrK10gPSBlbGVtZW50cztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBqcUxpdGVDb250cm9sbGVyKGVsZW1lbnQsIG5hbWUpIHtcbiAgcmV0dXJuIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgJyQnICsgKG5hbWUgfHwgJ25nQ29udHJvbGxlcicpICsgJ0NvbnRyb2xsZXInKTtcbn1cblxuZnVuY3Rpb24ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xuICAvLyBpZiBlbGVtZW50IGlzIHRoZSBkb2N1bWVudCBvYmplY3Qgd29yayB3aXRoIHRoZSBodG1sIGVsZW1lbnQgaW5zdGVhZFxuICAvLyB0aGlzIG1ha2VzICQoZG9jdW1lbnQpLnNjb3BlKCkgcG9zc2libGVcbiAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT0gTk9ERV9UWVBFX0RPQ1VNRU5UKSB7XG4gICAgZWxlbWVudCA9IGVsZW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICB9XG4gIHZhciBuYW1lcyA9IGlzQXJyYXkobmFtZSkgPyBuYW1lIDogW25hbWVdO1xuXG4gIHdoaWxlIChlbGVtZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgaWYgKCh2YWx1ZSA9IGpxTGl0ZS5kYXRhKGVsZW1lbnQsIG5hbWVzW2ldKSkgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vIElmIGRlYWxpbmcgd2l0aCBhIGRvY3VtZW50IGZyYWdtZW50IG5vZGUgd2l0aCBhIGhvc3QgZWxlbWVudCwgYW5kIG5vIHBhcmVudCwgdXNlIHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBhcyB0aGUgcGFyZW50LiBUaGlzIGVuYWJsZXMgZGlyZWN0aXZlcyB3aXRoaW4gYSBTaGFkb3cgRE9NIG9yIHBvbHlmaWxsZWQgU2hhZG93IERPTVxuICAgIC8vIHRvIGxvb2t1cCBwYXJlbnQgY29udHJvbGxlcnMuXG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UICYmIGVsZW1lbnQuaG9zdCk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlRW1wdHkoZWxlbWVudCkge1xuICBqcUxpdGVEZWFsb2MoZWxlbWVudCwgdHJ1ZSk7XG4gIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlKGVsZW1lbnQsIGtlZXBEYXRhKSB7XG4gIGlmICgha2VlcERhdGEpIGpxTGl0ZURlYWxvYyhlbGVtZW50KTtcbiAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZURvY3VtZW50TG9hZGVkKGFjdGlvbiwgd2luKSB7XG4gIHdpbiA9IHdpbiB8fCB3aW5kb3c7XG4gIGlmICh3aW4uZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgIC8vIEZvcmNlIHRoZSBhY3Rpb24gdG8gYmUgcnVuIGFzeW5jIGZvciBjb25zaXN0ZW50IGJlaGF2aW91clxuICAgIC8vIGZyb20gdGhlIGFjdGlvbidzIHBvaW50IG9mIHZpZXdcbiAgICAvLyBpLmUuIGl0IHdpbGwgZGVmaW5pdGVseSBub3QgYmUgaW4gYSAkYXBwbHlcbiAgICB3aW4uc2V0VGltZW91dChhY3Rpb24pO1xuICB9IGVsc2Uge1xuICAgIC8vIE5vIG5lZWQgdG8gdW5iaW5kIHRoaXMgaGFuZGxlciBhcyBsb2FkIGlzIG9ubHkgZXZlciBjYWxsZWQgb25jZVxuICAgIGpxTGl0ZSh3aW4pLm9uKCdsb2FkJywgYWN0aW9uKTtcbiAgfVxufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEZ1bmN0aW9ucyB3aGljaCBhcmUgZGVjbGFyZWQgZGlyZWN0bHkuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbnZhciBKUUxpdGVQcm90b3R5cGUgPSBKUUxpdGUucHJvdG90eXBlID0ge1xuICByZWFkeTogZnVuY3Rpb24oZm4pIHtcbiAgICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIHRyaWdnZXIoKSB7XG4gICAgICBpZiAoZmlyZWQpIHJldHVybjtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGZuKCk7XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgaWYgZG9jdW1lbnQgaXMgYWxyZWFkeSBsb2FkZWRcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgc2V0VGltZW91dCh0cmlnZ2VyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbignRE9NQ29udGVudExvYWRlZCcsIHRyaWdnZXIpOyAvLyB3b3JrcyBmb3IgbW9kZXJuIGJyb3dzZXJzIGFuZCBJRTlcbiAgICAgIC8vIHdlIGNhbiBub3QgdXNlIGpxTGl0ZSBzaW5jZSB3ZSBhcmUgbm90IGRvbmUgbG9hZGluZyBhbmQgalF1ZXJ5IGNvdWxkIGJlIGxvYWRlZCBsYXRlci5cbiAgICAgIC8vIGpzaGludCAtVzA2NFxuICAgICAgSlFMaXRlKHdpbmRvdykub24oJ2xvYWQnLCB0cmlnZ2VyKTsgLy8gZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCBmb3Igb3RoZXJzXG4gICAgICAvLyBqc2hpbnQgK1cwNjRcbiAgICB9XG4gIH0sXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICBmb3JFYWNoKHRoaXMsIGZ1bmN0aW9uKGUpIHsgdmFsdWUucHVzaCgnJyArIGUpO30pO1xuICAgIHJldHVybiAnWycgKyB2YWx1ZS5qb2luKCcsICcpICsgJ10nO1xuICB9LFxuXG4gIGVxOiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIChpbmRleCA+PSAwKSA/IGpxTGl0ZSh0aGlzW2luZGV4XSkgOiBqcUxpdGUodGhpc1t0aGlzLmxlbmd0aCArIGluZGV4XSk7XG4gIH0sXG5cbiAgbGVuZ3RoOiAwLFxuICBwdXNoOiBwdXNoLFxuICBzb3J0OiBbXS5zb3J0LFxuICBzcGxpY2U6IFtdLnNwbGljZVxufTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBGdW5jdGlvbnMgaXRlcmF0aW5nIGdldHRlci9zZXR0ZXJzLlxuLy8gdGhlc2UgZnVuY3Rpb25zIHJldHVybiBzZWxmIG9uIHNldHRlciBhbmRcbi8vIHZhbHVlIG9uIGdldC5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xudmFyIEJPT0xFQU5fQVRUUiA9IHt9O1xuZm9yRWFjaCgnbXVsdGlwbGUsc2VsZWN0ZWQsY2hlY2tlZCxkaXNhYmxlZCxyZWFkT25seSxyZXF1aXJlZCxvcGVuJy5zcGxpdCgnLCcpLCBmdW5jdGlvbih2YWx1ZSkge1xuICBCT09MRUFOX0FUVFJbbG93ZXJjYXNlKHZhbHVlKV0gPSB2YWx1ZTtcbn0pO1xudmFyIEJPT0xFQU5fRUxFTUVOVFMgPSB7fTtcbmZvckVhY2goJ2lucHV0LHNlbGVjdCxvcHRpb24sdGV4dGFyZWEsYnV0dG9uLGZvcm0sZGV0YWlscycuc3BsaXQoJywnKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgQk9PTEVBTl9FTEVNRU5UU1t2YWx1ZV0gPSB0cnVlO1xufSk7XG52YXIgQUxJQVNFRF9BVFRSID0ge1xuICAnbmdNaW5sZW5ndGgnOiAnbWlubGVuZ3RoJyxcbiAgJ25nTWF4bGVuZ3RoJzogJ21heGxlbmd0aCcsXG4gICduZ01pbic6ICdtaW4nLFxuICAnbmdNYXgnOiAnbWF4JyxcbiAgJ25nUGF0dGVybic6ICdwYXR0ZXJuJ1xufTtcblxuZnVuY3Rpb24gZ2V0Qm9vbGVhbkF0dHJOYW1lKGVsZW1lbnQsIG5hbWUpIHtcbiAgLy8gY2hlY2sgZG9tIGxhc3Qgc2luY2Ugd2Ugd2lsbCBtb3N0IGxpa2VseSBmYWlsIG9uIG5hbWVcbiAgdmFyIGJvb2xlYW5BdHRyID0gQk9PTEVBTl9BVFRSW25hbWUudG9Mb3dlckNhc2UoKV07XG5cbiAgLy8gYm9vbGVhbkF0dHIgaXMgaGVyZSB0d2ljZSB0byBtaW5pbWl6ZSBET00gYWNjZXNzXG4gIHJldHVybiBib29sZWFuQXR0ciAmJiBCT09MRUFOX0VMRU1FTlRTW25vZGVOYW1lXyhlbGVtZW50KV0gJiYgYm9vbGVhbkF0dHI7XG59XG5cbmZ1bmN0aW9uIGdldEFsaWFzZWRBdHRyTmFtZShlbGVtZW50LCBuYW1lKSB7XG4gIHZhciBub2RlTmFtZSA9IGVsZW1lbnQubm9kZU5hbWU7XG4gIHJldHVybiAobm9kZU5hbWUgPT09ICdJTlBVVCcgfHwgbm9kZU5hbWUgPT09ICdURVhUQVJFQScpICYmIEFMSUFTRURfQVRUUltuYW1lXTtcbn1cblxuZm9yRWFjaCh7XG4gIGRhdGE6IGpxTGl0ZURhdGEsXG4gIHJlbW92ZURhdGE6IGpxTGl0ZVJlbW92ZURhdGFcbn0sIGZ1bmN0aW9uKGZuLCBuYW1lKSB7XG4gIEpRTGl0ZVtuYW1lXSA9IGZuO1xufSk7XG5cbmZvckVhY2goe1xuICBkYXRhOiBqcUxpdGVEYXRhLFxuICBpbmhlcml0ZWREYXRhOiBqcUxpdGVJbmhlcml0ZWREYXRhLFxuXG4gIHNjb3BlOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgLy8gQ2FuJ3QgdXNlIGpxTGl0ZURhdGEgaGVyZSBkaXJlY3RseSBzbyB3ZSBzdGF5IGNvbXBhdGlibGUgd2l0aCBqUXVlcnkhXG4gICAgcmV0dXJuIGpxTGl0ZS5kYXRhKGVsZW1lbnQsICckc2NvcGUnKSB8fCBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQucGFyZW50Tm9kZSB8fCBlbGVtZW50LCBbJyRpc29sYXRlU2NvcGUnLCAnJHNjb3BlJ10pO1xuICB9LFxuXG4gIGlzb2xhdGVTY29wZTogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIC8vIENhbid0IHVzZSBqcUxpdGVEYXRhIGhlcmUgZGlyZWN0bHkgc28gd2Ugc3RheSBjb21wYXRpYmxlIHdpdGggalF1ZXJ5IVxuICAgIHJldHVybiBqcUxpdGUuZGF0YShlbGVtZW50LCAnJGlzb2xhdGVTY29wZScpIHx8IGpxTGl0ZS5kYXRhKGVsZW1lbnQsICckaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZScpO1xuICB9LFxuXG4gIGNvbnRyb2xsZXI6IGpxTGl0ZUNvbnRyb2xsZXIsXG5cbiAgaW5qZWN0b3I6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICByZXR1cm4ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCAnJGluamVjdG9yJyk7XG4gIH0sXG5cbiAgcmVtb3ZlQXR0cjogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSkge1xuICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9LFxuXG4gIGhhc0NsYXNzOiBqcUxpdGVIYXNDbGFzcyxcblxuICBjc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IGNhbWVsQ2FzZShuYW1lKTtcblxuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICBlbGVtZW50LnN0eWxlW25hbWVdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbGVtZW50LnN0eWxlW25hbWVdO1xuICAgIH1cbiAgfSxcblxuICBhdHRyOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBsb3dlcmNhc2VkTmFtZSA9IGxvd2VyY2FzZShuYW1lKTtcbiAgICBpZiAoQk9PTEVBTl9BVFRSW2xvd2VyY2FzZWROYW1lXSkge1xuICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKCEhdmFsdWUpIHtcbiAgICAgICAgICBlbGVtZW50W25hbWVdID0gdHJ1ZTtcbiAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCBsb3dlcmNhc2VkTmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudFtuYW1lXSA9IGZhbHNlO1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGxvd2VyY2FzZWROYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChlbGVtZW50W25hbWVdIHx8XG4gICAgICAgICAgICAgICAgIChlbGVtZW50LmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKG5hbWUpIHx8IG5vb3ApLnNwZWNpZmllZClcbiAgICAgICAgICAgICAgID8gbG93ZXJjYXNlZE5hbWVcbiAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgIC8vIHRoZSBleHRyYSBhcmd1bWVudCBcIjJcIiBpcyB0byBnZXQgdGhlIHJpZ2h0IHRoaW5nIGZvciBhLmhyZWYgaW4gSUUsIHNlZSBqUXVlcnkgY29kZVxuICAgICAgLy8gc29tZSBlbGVtZW50cyAoZS5nLiBEb2N1bWVudCkgZG9uJ3QgaGF2ZSBnZXQgYXR0cmlidXRlLCBzbyByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB2YXIgcmV0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUobmFtZSwgMik7XG4gICAgICAvLyBub3JtYWxpemUgbm9uLWV4aXN0aW5nIGF0dHJpYnV0ZXMgdG8gdW5kZWZpbmVkIChhcyBqUXVlcnkpXG4gICAgICByZXR1cm4gcmV0ID09PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xuICAgIH1cbiAgfSxcblxuICBwcm9wOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICBlbGVtZW50W25hbWVdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbGVtZW50W25hbWVdO1xuICAgIH1cbiAgfSxcblxuICB0ZXh0OiAoZnVuY3Rpb24oKSB7XG4gICAgZ2V0VGV4dC4kZHYgPSAnJztcbiAgICByZXR1cm4gZ2V0VGV4dDtcblxuICAgIGZ1bmN0aW9uIGdldFRleHQoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIG5vZGVUeXBlID0gZWxlbWVudC5ub2RlVHlwZTtcbiAgICAgICAgcmV0dXJuIChub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQgfHwgbm9kZVR5cGUgPT09IE5PREVfVFlQRV9URVhUKSA/IGVsZW1lbnQudGV4dENvbnRlbnQgOiAnJztcbiAgICAgIH1cbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgICB9XG4gIH0pKCksXG5cbiAgdmFsOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIGlmIChlbGVtZW50Lm11bHRpcGxlICYmIG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3JFYWNoKGVsZW1lbnQub3B0aW9ucywgZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gob3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA9PT0gMCA/IG51bGwgOiByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICB9LFxuXG4gIGh0bWw6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuaW5uZXJIVE1MO1xuICAgIH1cbiAgICBqcUxpdGVEZWFsb2MoZWxlbWVudCwgdHJ1ZSk7XG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfSxcblxuICBlbXB0eToganFMaXRlRW1wdHlcbn0sIGZ1bmN0aW9uKGZuLCBuYW1lKSB7XG4gIC8qKlxuICAgKiBQcm9wZXJ0aWVzOiB3cml0ZXMgcmV0dXJuIHNlbGVjdGlvbiwgcmVhZHMgcmV0dXJuIGZpcnN0IHZhbHVlXG4gICAqL1xuICBKUUxpdGUucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oYXJnMSwgYXJnMikge1xuICAgIHZhciBpLCBrZXk7XG4gICAgdmFyIG5vZGVDb3VudCA9IHRoaXMubGVuZ3RoO1xuXG4gICAgLy8ganFMaXRlSGFzQ2xhc3MgaGFzIG9ubHkgdHdvIGFyZ3VtZW50cywgYnV0IGlzIGEgZ2V0dGVyLW9ubHkgZm4sIHNvIHdlIG5lZWQgdG8gc3BlY2lhbC1jYXNlIGl0XG4gICAgLy8gaW4gYSB3YXkgdGhhdCBzdXJ2aXZlcyBtaW5pZmljYXRpb24uXG4gICAgLy8ganFMaXRlRW1wdHkgdGFrZXMgbm8gYXJndW1lbnRzIGJ1dCBpcyBhIHNldHRlci5cbiAgICBpZiAoZm4gIT09IGpxTGl0ZUVtcHR5ICYmXG4gICAgICAgICgoKGZuLmxlbmd0aCA9PSAyICYmIChmbiAhPT0ganFMaXRlSGFzQ2xhc3MgJiYgZm4gIT09IGpxTGl0ZUNvbnRyb2xsZXIpKSA/IGFyZzEgOiBhcmcyKSA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgaWYgKGlzT2JqZWN0KGFyZzEpKSB7XG5cbiAgICAgICAgLy8gd2UgYXJlIGEgd3JpdGUsIGJ1dCB0aGUgb2JqZWN0IHByb3BlcnRpZXMgYXJlIHRoZSBrZXkvdmFsdWVzXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlQ291bnQ7IGkrKykge1xuICAgICAgICAgIGlmIChmbiA9PT0ganFMaXRlRGF0YSkge1xuICAgICAgICAgICAgLy8gZGF0YSgpIHRha2VzIHRoZSB3aG9sZSBvYmplY3QgaW4galF1ZXJ5XG4gICAgICAgICAgICBmbih0aGlzW2ldLCBhcmcxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gYXJnMSkge1xuICAgICAgICAgICAgICBmbih0aGlzW2ldLCBrZXksIGFyZzFba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHJldHVybiBzZWxmIGZvciBjaGFpbmluZ1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHdlIGFyZSBhIHJlYWQsIHNvIHJlYWQgdGhlIGZpcnN0IGNoaWxkLlxuICAgICAgICAvLyBUT0RPOiBkbyB3ZSBzdGlsbCBuZWVkIHRoaXM/XG4gICAgICAgIHZhciB2YWx1ZSA9IGZuLiRkdjtcbiAgICAgICAgLy8gT25seSBpZiB3ZSBoYXZlICRkdiBkbyB3ZSBpdGVyYXRlIG92ZXIgYWxsLCBvdGhlcndpc2UgaXQgaXMganVzdCB0aGUgZmlyc3QgZWxlbWVudC5cbiAgICAgICAgdmFyIGpqID0gKHZhbHVlID09PSB1bmRlZmluZWQpID8gTWF0aC5taW4obm9kZUNvdW50LCAxKSA6IG5vZGVDb3VudDtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgdmFyIG5vZGVWYWx1ZSA9IGZuKHRoaXNbal0sIGFyZzEsIGFyZzIpO1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgPyB2YWx1ZSArIG5vZGVWYWx1ZSA6IG5vZGVWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHdlIGFyZSBhIHdyaXRlLCBzbyBhcHBseSB0byBhbGwgY2hpbGRyZW5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlQ291bnQ7IGkrKykge1xuICAgICAgICBmbih0aGlzW2ldLCBhcmcxLCBhcmcyKTtcbiAgICAgIH1cbiAgICAgIC8vIHJldHVybiBzZWxmIGZvciBjaGFpbmluZ1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50SGFuZGxlcihlbGVtZW50LCBldmVudHMpIHtcbiAgdmFyIGV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50LCB0eXBlKSB7XG4gICAgLy8galF1ZXJ5IHNwZWNpZmljIGFwaVxuICAgIGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgfTtcblxuICAgIHZhciBldmVudEZucyA9IGV2ZW50c1t0eXBlIHx8IGV2ZW50LnR5cGVdO1xuICAgIHZhciBldmVudEZuc0xlbmd0aCA9IGV2ZW50Rm5zID8gZXZlbnRGbnMubGVuZ3RoIDogMDtcblxuICAgIGlmICghZXZlbnRGbnNMZW5ndGgpIHJldHVybjtcblxuICAgIGlmIChpc1VuZGVmaW5lZChldmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQpKSB7XG4gICAgICB2YXIgb3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb247XG4gICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTtcblxuICAgICAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICBvcmlnaW5hbFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbi5jYWxsKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9PT0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8gQ29weSBldmVudCBoYW5kbGVycyBpbiBjYXNlIGV2ZW50IGhhbmRsZXJzIGFycmF5IGlzIG1vZGlmaWVkIGR1cmluZyBleGVjdXRpb24uXG4gICAgaWYgKChldmVudEZuc0xlbmd0aCA+IDEpKSB7XG4gICAgICBldmVudEZucyA9IHNoYWxsb3dDb3B5KGV2ZW50Rm5zKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50Rm5zTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkge1xuICAgICAgICBldmVudEZuc1tpXS5jYWxsKGVsZW1lbnQsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gVE9ETzogdGhpcyBpcyBhIGhhY2sgZm9yIGFuZ3VsYXJNb2Nrcy9jbGVhckRhdGFDYWNoZSB0aGF0IG1ha2VzIGl0IHBvc3NpYmxlIHRvIGRlcmVnaXN0ZXIgYWxsXG4gIC8vICAgICAgIGV2ZW50cyBvbiBgZWxlbWVudGBcbiAgZXZlbnRIYW5kbGVyLmVsZW0gPSBlbGVtZW50O1xuICByZXR1cm4gZXZlbnRIYW5kbGVyO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEZ1bmN0aW9ucyBpdGVyYXRpbmcgdHJhdmVyc2FsLlxuLy8gVGhlc2UgZnVuY3Rpb25zIGNoYWluIHJlc3VsdHMgaW50byBhIHNpbmdsZVxuLy8gc2VsZWN0b3IuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZvckVhY2goe1xuICByZW1vdmVEYXRhOiBqcUxpdGVSZW1vdmVEYXRhLFxuXG4gIG9uOiBmdW5jdGlvbiBqcUxpdGVPbihlbGVtZW50LCB0eXBlLCBmbiwgdW5zdXBwb3J0ZWQpIHtcbiAgICBpZiAoaXNEZWZpbmVkKHVuc3VwcG9ydGVkKSkgdGhyb3cganFMaXRlTWluRXJyKCdvbmFyZ3MnLCAnanFMaXRlI29uKCkgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYHNlbGVjdG9yYCBvciBgZXZlbnREYXRhYCBwYXJhbWV0ZXJzJyk7XG5cbiAgICAvLyBEbyBub3QgYWRkIGV2ZW50IGhhbmRsZXJzIHRvIG5vbi1lbGVtZW50cyBiZWNhdXNlIHRoZXkgd2lsbCBub3QgYmUgY2xlYW5lZCB1cC5cbiAgICBpZiAoIWpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCB0cnVlKTtcbiAgICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlLmV2ZW50cztcbiAgICB2YXIgaGFuZGxlID0gZXhwYW5kb1N0b3JlLmhhbmRsZTtcblxuICAgIGlmICghaGFuZGxlKSB7XG4gICAgICBoYW5kbGUgPSBleHBhbmRvU3RvcmUuaGFuZGxlID0gY3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cyk7XG4gICAgfVxuXG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vc3RyaW5nLWluZGV4b2YtdnMtc3BsaXRcbiAgICB2YXIgdHlwZXMgPSB0eXBlLmluZGV4T2YoJyAnKSA+PSAwID8gdHlwZS5zcGxpdCgnICcpIDogW3R5cGVdO1xuICAgIHZhciBpID0gdHlwZXMubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAoIWV2ZW50Rm5zKSB7XG4gICAgICAgIGV2ZW50c1t0eXBlXSA9IFtdO1xuXG4gICAgICAgIGlmICh0eXBlID09PSAnbW91c2VlbnRlcicgfHwgdHlwZSA9PT0gJ21vdXNlbGVhdmUnKSB7XG4gICAgICAgICAgLy8gUmVmZXIgdG8galF1ZXJ5J3MgaW1wbGVtZW50YXRpb24gb2YgbW91c2VlbnRlciAmIG1vdXNlbGVhdmVcbiAgICAgICAgICAvLyBSZWFkIGFib3V0IG1vdXNlZW50ZXIgYW5kIG1vdXNlbGVhdmU6XG4gICAgICAgICAgLy8gaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9qcy9ldmVudHNfbW91c2UuaHRtbCNsaW5rOFxuXG4gICAgICAgICAganFMaXRlT24oZWxlbWVudCwgTU9VU0VfRVZFTlRfTUFQW3R5cGVdLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMsIHJlbGF0ZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0O1xuICAgICAgICAgICAgLy8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuICAgICAgICAgICAgLy8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcbiAgICAgICAgICAgIGlmICghcmVsYXRlZCB8fCAocmVsYXRlZCAhPT0gdGFyZ2V0ICYmICF0YXJnZXQuY29udGFpbnMocmVsYXRlZCkpKSB7XG4gICAgICAgICAgICAgIGhhbmRsZShldmVudCwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodHlwZSAhPT0gJyRkZXN0cm95Jykge1xuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lckZuKGVsZW1lbnQsIHR5cGUsIGhhbmRsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGVdO1xuICAgICAgfVxuICAgICAgZXZlbnRGbnMucHVzaChmbik7XG4gICAgfVxuICB9LFxuXG4gIG9mZjoganFMaXRlT2ZmLFxuXG4gIG9uZTogZnVuY3Rpb24oZWxlbWVudCwgdHlwZSwgZm4pIHtcbiAgICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpO1xuXG4gICAgLy9hZGQgdGhlIGxpc3RlbmVyIHR3aWNlIHNvIHRoYXQgd2hlbiBpdCBpcyBjYWxsZWRcbiAgICAvL3lvdSBjYW4gcmVtb3ZlIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBhbmQgc3RpbGwgYmVcbiAgICAvL2FibGUgdG8gY2FsbCBlbGVtZW50Lm9mZihldiwgZm4pIG5vcm1hbGx5XG4gICAgZWxlbWVudC5vbih0eXBlLCBmdW5jdGlvbiBvbkZuKCkge1xuICAgICAgZWxlbWVudC5vZmYodHlwZSwgZm4pO1xuICAgICAgZWxlbWVudC5vZmYodHlwZSwgb25Gbik7XG4gICAgfSk7XG4gICAgZWxlbWVudC5vbih0eXBlLCBmbik7XG4gIH0sXG5cbiAgcmVwbGFjZVdpdGg6IGZ1bmN0aW9uKGVsZW1lbnQsIHJlcGxhY2VOb2RlKSB7XG4gICAgdmFyIGluZGV4LCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAganFMaXRlRGVhbG9jKGVsZW1lbnQpO1xuICAgIGZvckVhY2gobmV3IEpRTGl0ZShyZXBsYWNlTm9kZSksIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmIChpbmRleCkge1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIGluZGV4Lm5leHRTaWJsaW5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobm9kZSwgZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBpbmRleCA9IG5vZGU7XG4gICAgfSk7XG4gIH0sXG5cbiAgY2hpbGRyZW46IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSBbXTtcbiAgICBmb3JFYWNoKGVsZW1lbnQuY2hpbGROb2RlcywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IE5PREVfVFlQRV9FTEVNRU5UKVxuICAgICAgICBjaGlsZHJlbi5wdXNoKGVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfSxcblxuICBjb250ZW50czogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmNvbnRlbnREb2N1bWVudCB8fCBlbGVtZW50LmNoaWxkTm9kZXMgfHwgW107XG4gIH0sXG5cbiAgYXBwZW5kOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7XG4gICAgdmFyIG5vZGVUeXBlID0gZWxlbWVudC5ub2RlVHlwZTtcbiAgICBpZiAobm9kZVR5cGUgIT09IE5PREVfVFlQRV9FTEVNRU5UICYmIG5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQpIHJldHVybjtcblxuICAgIG5vZGUgPSBuZXcgSlFMaXRlKG5vZGUpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbm9kZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBub2RlW2ldO1xuICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9LFxuXG4gIHByZXBlbmQ6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHtcbiAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQpIHtcbiAgICAgIHZhciBpbmRleCA9IGVsZW1lbnQuZmlyc3RDaGlsZDtcbiAgICAgIGZvckVhY2gobmV3IEpRTGl0ZShub2RlKSwgZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgZWxlbWVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIGluZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICB3cmFwOiBmdW5jdGlvbihlbGVtZW50LCB3cmFwTm9kZSkge1xuICAgIHdyYXBOb2RlID0ganFMaXRlKHdyYXBOb2RlKS5lcSgwKS5jbG9uZSgpWzBdO1xuICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwTm9kZSwgZWxlbWVudCk7XG4gICAgfVxuICAgIHdyYXBOb2RlLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICB9LFxuXG4gIHJlbW92ZToganFMaXRlUmVtb3ZlLFxuXG4gIGRldGFjaDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIGpxTGl0ZVJlbW92ZShlbGVtZW50LCB0cnVlKTtcbiAgfSxcblxuICBhZnRlcjogZnVuY3Rpb24oZWxlbWVudCwgbmV3RWxlbWVudCkge1xuICAgIHZhciBpbmRleCA9IGVsZW1lbnQsIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICBuZXdFbGVtZW50ID0gbmV3IEpRTGl0ZShuZXdFbGVtZW50KTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5ld0VsZW1lbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdmFyIG5vZGUgPSBuZXdFbGVtZW50W2ldO1xuICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCBpbmRleC5uZXh0U2libGluZyk7XG4gICAgICBpbmRleCA9IG5vZGU7XG4gICAgfVxuICB9LFxuXG4gIGFkZENsYXNzOiBqcUxpdGVBZGRDbGFzcyxcbiAgcmVtb3ZlQ2xhc3M6IGpxTGl0ZVJlbW92ZUNsYXNzLFxuXG4gIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBzZWxlY3RvciwgY29uZGl0aW9uKSB7XG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICBmb3JFYWNoKHNlbGVjdG9yLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgY2xhc3NDb25kaXRpb24gPSBjb25kaXRpb247XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChjbGFzc0NvbmRpdGlvbikpIHtcbiAgICAgICAgICBjbGFzc0NvbmRpdGlvbiA9ICFqcUxpdGVIYXNDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIChjbGFzc0NvbmRpdGlvbiA/IGpxTGl0ZUFkZENsYXNzIDoganFMaXRlUmVtb3ZlQ2xhc3MpKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgcGFyZW50OiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICByZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UID8gcGFyZW50IDogbnVsbDtcbiAgfSxcblxuICBuZXh0OiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICB9LFxuXG4gIGZpbmQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgaWYgKGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHNlbGVjdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfSxcblxuICBjbG9uZToganFMaXRlQ2xvbmUsXG5cbiAgdHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIGV2ZW50LCBleHRyYVBhcmFtZXRlcnMpIHtcblxuICAgIHZhciBkdW1teUV2ZW50LCBldmVudEZuc0NvcHksIGhhbmRsZXJBcmdzO1xuICAgIHZhciBldmVudE5hbWUgPSBldmVudC50eXBlIHx8IGV2ZW50O1xuICAgIHZhciBleHBhbmRvU3RvcmUgPSBqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCk7XG4gICAgdmFyIGV2ZW50cyA9IGV4cGFuZG9TdG9yZSAmJiBleHBhbmRvU3RvcmUuZXZlbnRzO1xuICAgIHZhciBldmVudEZucyA9IGV2ZW50cyAmJiBldmVudHNbZXZlbnROYW1lXTtcblxuICAgIGlmIChldmVudEZucykge1xuICAgICAgLy8gQ3JlYXRlIGEgZHVtbXkgZXZlbnQgdG8gcGFzcyB0byB0aGUgaGFuZGxlcnNcbiAgICAgIGR1bW15RXZlbnQgPSB7XG4gICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHsgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsgfSxcbiAgICAgICAgaXNEZWZhdWx0UHJldmVudGVkOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdHJ1ZTsgfSxcbiAgICAgICAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHsgdGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlOyB9LFxuICAgICAgICBpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9PT0gdHJ1ZTsgfSxcbiAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBub29wLFxuICAgICAgICB0eXBlOiBldmVudE5hbWUsXG4gICAgICAgIHRhcmdldDogZWxlbWVudFxuICAgICAgfTtcblxuICAgICAgLy8gSWYgYSBjdXN0b20gZXZlbnQgd2FzIHByb3ZpZGVkIHRoZW4gZXh0ZW5kIG91ciBkdW1teSBldmVudCB3aXRoIGl0XG4gICAgICBpZiAoZXZlbnQudHlwZSkge1xuICAgICAgICBkdW1teUV2ZW50ID0gZXh0ZW5kKGR1bW15RXZlbnQsIGV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29weSBldmVudCBoYW5kbGVycyBpbiBjYXNlIGV2ZW50IGhhbmRsZXJzIGFycmF5IGlzIG1vZGlmaWVkIGR1cmluZyBleGVjdXRpb24uXG4gICAgICBldmVudEZuc0NvcHkgPSBzaGFsbG93Q29weShldmVudEZucyk7XG4gICAgICBoYW5kbGVyQXJncyA9IGV4dHJhUGFyYW1ldGVycyA/IFtkdW1teUV2ZW50XS5jb25jYXQoZXh0cmFQYXJhbWV0ZXJzKSA6IFtkdW1teUV2ZW50XTtcblxuICAgICAgZm9yRWFjaChldmVudEZuc0NvcHksIGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIGlmICghZHVtbXlFdmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgICAgZm4uYXBwbHkoZWxlbWVudCwgaGFuZGxlckFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0sIGZ1bmN0aW9uKGZuLCBuYW1lKSB7XG4gIC8qKlxuICAgKiBjaGFpbmluZyBmdW5jdGlvbnNcbiAgICovXG4gIEpRTGl0ZS5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbihhcmcxLCBhcmcyLCBhcmczKSB7XG4gICAgdmFyIHZhbHVlO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gZm4odGhpc1tpXSwgYXJnMSwgYXJnMiwgYXJnMyk7XG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgLy8gYW55IGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYSB2YWx1ZSBuZWVkcyB0byBiZSB3cmFwcGVkXG4gICAgICAgICAgdmFsdWUgPSBqcUxpdGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBqcUxpdGVBZGROb2Rlcyh2YWx1ZSwgZm4odGhpc1tpXSwgYXJnMSwgYXJnMiwgYXJnMykpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcztcbiAgfTtcblxuICAvLyBiaW5kIGxlZ2FjeSBiaW5kL3VuYmluZCB0byBvbi9vZmZcbiAgSlFMaXRlLnByb3RvdHlwZS5iaW5kID0gSlFMaXRlLnByb3RvdHlwZS5vbjtcbiAgSlFMaXRlLnByb3RvdHlwZS51bmJpbmQgPSBKUUxpdGUucHJvdG90eXBlLm9mZjtcbn0pO1xuXG5cbi8vIFByb3ZpZGVyIGZvciBwcml2YXRlICQkanFMaXRlIHNlcnZpY2VcbmZ1bmN0aW9uICQkanFMaXRlUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uICQkanFMaXRlKCkge1xuICAgIHJldHVybiBleHRlbmQoSlFMaXRlLCB7XG4gICAgICBoYXNDbGFzczogZnVuY3Rpb24obm9kZSwgY2xhc3Nlcykge1xuICAgICAgICBpZiAobm9kZS5hdHRyKSBub2RlID0gbm9kZVswXTtcbiAgICAgICAgcmV0dXJuIGpxTGl0ZUhhc0NsYXNzKG5vZGUsIGNsYXNzZXMpO1xuICAgICAgfSxcbiAgICAgIGFkZENsYXNzOiBmdW5jdGlvbihub2RlLCBjbGFzc2VzKSB7XG4gICAgICAgIGlmIChub2RlLmF0dHIpIG5vZGUgPSBub2RlWzBdO1xuICAgICAgICByZXR1cm4ganFMaXRlQWRkQ2xhc3Mobm9kZSwgY2xhc3Nlcyk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKG5vZGUsIGNsYXNzZXMpIHtcbiAgICAgICAgaWYgKG5vZGUuYXR0cikgbm9kZSA9IG5vZGVbMF07XG4gICAgICAgIHJldHVybiBqcUxpdGVSZW1vdmVDbGFzcyhub2RlLCBjbGFzc2VzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIGhhc2ggb2YgYW4gJ29iaicuXG4gKiBIYXNoIG9mIGE6XG4gKiAgc3RyaW5nIGlzIHN0cmluZ1xuICogIG51bWJlciBpcyBudW1iZXIgYXMgc3RyaW5nXG4gKiAgb2JqZWN0IGlzIGVpdGhlciByZXN1bHQgb2YgY2FsbGluZyAkJGhhc2hLZXkgZnVuY3Rpb24gb24gdGhlIG9iamVjdCBvciB1bmlxdWVseSBnZW5lcmF0ZWQgaWQsXG4gKiAgICAgICAgIHRoYXQgaXMgYWxzbyBhc3NpZ25lZCB0byB0aGUgJCRoYXNoS2V5IHByb3BlcnR5IG9mIHRoZSBvYmplY3QuXG4gKlxuICogQHBhcmFtIG9ialxuICogQHJldHVybnMge3N0cmluZ30gaGFzaCBzdHJpbmcgc3VjaCB0aGF0IHRoZSBzYW1lIGlucHV0IHdpbGwgaGF2ZSB0aGUgc2FtZSBoYXNoIHN0cmluZy5cbiAqICAgICAgICAgVGhlIHJlc3VsdGluZyBzdHJpbmcga2V5IGlzIGluICd0eXBlOmhhc2hLZXknIGZvcm1hdC5cbiAqL1xuZnVuY3Rpb24gaGFzaEtleShvYmosIG5leHRVaWRGbikge1xuICB2YXIga2V5ID0gb2JqICYmIG9iai4kJGhhc2hLZXk7XG5cbiAgaWYgKGtleSkge1xuICAgIGlmICh0eXBlb2Yga2V5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBrZXkgPSBvYmouJCRoYXNoS2V5KCk7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG4gIH1cblxuICB2YXIgb2JqVHlwZSA9IHR5cGVvZiBvYmo7XG4gIGlmIChvYmpUeXBlID09ICdmdW5jdGlvbicgfHwgKG9ialR5cGUgPT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsKSkge1xuICAgIGtleSA9IG9iai4kJGhhc2hLZXkgPSBvYmpUeXBlICsgJzonICsgKG5leHRVaWRGbiB8fCBuZXh0VWlkKSgpO1xuICB9IGVsc2Uge1xuICAgIGtleSA9IG9ialR5cGUgKyAnOicgKyBvYmo7XG4gIH1cblxuICByZXR1cm4ga2V5O1xufVxuXG4vKipcbiAqIEhhc2hNYXAgd2hpY2ggY2FuIHVzZSBvYmplY3RzIGFzIGtleXNcbiAqL1xuZnVuY3Rpb24gSGFzaE1hcChhcnJheSwgaXNvbGF0ZWRVaWQpIHtcbiAgaWYgKGlzb2xhdGVkVWlkKSB7XG4gICAgdmFyIHVpZCA9IDA7XG4gICAgdGhpcy5uZXh0VWlkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKyt1aWQ7XG4gICAgfTtcbiAgfVxuICBmb3JFYWNoKGFycmF5LCB0aGlzLnB1dCwgdGhpcyk7XG59XG5IYXNoTWFwLnByb3RvdHlwZSA9IHtcbiAgLyoqXG4gICAqIFN0b3JlIGtleSB2YWx1ZSBwYWlyXG4gICAqIEBwYXJhbSBrZXkga2V5IHRvIHN0b3JlIGNhbiBiZSBhbnkgdHlwZVxuICAgKiBAcGFyYW0gdmFsdWUgdmFsdWUgdG8gc3RvcmUgY2FuIGJlIGFueSB0eXBlXG4gICAqL1xuICBwdXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzW2hhc2hLZXkoa2V5LCB0aGlzLm5leHRVaWQpXSA9IHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ga2V5XG4gICAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSB2YWx1ZSBmb3IgdGhlIGtleVxuICAgKi9cbiAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gdGhpc1toYXNoS2V5KGtleSwgdGhpcy5uZXh0VWlkKV07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUga2V5L3ZhbHVlIHBhaXJcbiAgICogQHBhcmFtIGtleVxuICAgKi9cbiAgcmVtb3ZlOiBmdW5jdGlvbihrZXkpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzW2tleSA9IGhhc2hLZXkoa2V5LCB0aGlzLm5leHRVaWQpXTtcbiAgICBkZWxldGUgdGhpc1trZXldO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufTtcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBuYW1lIGFuZ3VsYXIuaW5qZWN0b3JcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGFuIGluamVjdG9yIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGZvciByZXRyaWV2aW5nIHNlcnZpY2VzIGFzIHdlbGwgYXMgZm9yXG4gKiBkZXBlbmRlbmN5IGluamVjdGlvbiAoc2VlIHtAbGluayBndWlkZS9kaSBkZXBlbmRlbmN5IGluamVjdGlvbn0pLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZ3xGdW5jdGlvbj59IG1vZHVsZXMgQSBsaXN0IG9mIG1vZHVsZSBmdW5jdGlvbnMgb3IgdGhlaXIgYWxpYXNlcy4gU2VlXG4gKiAgICAge0BsaW5rIGFuZ3VsYXIubW9kdWxlfS4gVGhlIGBuZ2AgbW9kdWxlIG11c3QgYmUgZXhwbGljaXRseSBhZGRlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IFtzdHJpY3REaT1mYWxzZV0gV2hldGhlciB0aGUgaW5qZWN0b3Igc2hvdWxkIGJlIGluIHN0cmljdCBtb2RlLCB3aGljaFxuICogICAgIGRpc2FsbG93cyBhcmd1bWVudCBuYW1lIGFubm90YXRpb24gaW5mZXJlbmNlLlxuICogQHJldHVybnMge2luamVjdG9yfSBJbmplY3RvciBvYmplY3QuIFNlZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cbiAqXG4gKiBAZXhhbXBsZVxuICogVHlwaWNhbCB1c2FnZVxuICogYGBganNcbiAqICAgLy8gY3JlYXRlIGFuIGluamVjdG9yXG4gKiAgIHZhciAkaW5qZWN0b3IgPSBhbmd1bGFyLmluamVjdG9yKFsnbmcnXSk7XG4gKlxuICogICAvLyB1c2UgdGhlIGluamVjdG9yIHRvIGtpY2sgb2ZmIHlvdXIgYXBwbGljYXRpb25cbiAqICAgLy8gdXNlIHRoZSB0eXBlIGluZmVyZW5jZSB0byBhdXRvIGluamVjdCBhcmd1bWVudHMsIG9yIHVzZSBpbXBsaWNpdCBpbmplY3Rpb25cbiAqICAgJGluamVjdG9yLmludm9rZShmdW5jdGlvbigkcm9vdFNjb3BlLCAkY29tcGlsZSwgJGRvY3VtZW50KSB7XG4gKiAgICAgJGNvbXBpbGUoJGRvY3VtZW50KSgkcm9vdFNjb3BlKTtcbiAqICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBTb21ldGltZXMgeW91IHdhbnQgdG8gZ2V0IGFjY2VzcyB0byB0aGUgaW5qZWN0b3Igb2YgYSBjdXJyZW50bHkgcnVubmluZyBBbmd1bGFyIGFwcFxuICogZnJvbSBvdXRzaWRlIEFuZ3VsYXIuIFBlcmhhcHMsIHlvdSB3YW50IHRvIGluamVjdCBhbmQgY29tcGlsZSBzb21lIG1hcmt1cCBhZnRlciB0aGVcbiAqIGFwcGxpY2F0aW9uIGhhcyBiZWVuIGJvb3RzdHJhcHBlZC4gWW91IGNhbiBkbyB0aGlzIHVzaW5nIHRoZSBleHRyYSBgaW5qZWN0b3IoKWAgYWRkZWRcbiAqIHRvIEpRdWVyeS9qcUxpdGUgZWxlbWVudHMuIFNlZSB7QGxpbmsgYW5ndWxhci5lbGVtZW50fS5cbiAqXG4gKiAqVGhpcyBpcyBmYWlybHkgcmFyZSBidXQgY291bGQgYmUgdGhlIGNhc2UgaWYgYSB0aGlyZCBwYXJ0eSBsaWJyYXJ5IGlzIGluamVjdGluZyB0aGVcbiAqIG1hcmt1cC4qXG4gKlxuICogSW4gdGhlIGZvbGxvd2luZyBleGFtcGxlIGEgbmV3IGJsb2NrIG9mIEhUTUwgY29udGFpbmluZyBhIGBuZy1jb250cm9sbGVyYFxuICogZGlyZWN0aXZlIGlzIGFkZGVkIHRvIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50IGJvZHkgYnkgSlF1ZXJ5LiBXZSB0aGVuIGNvbXBpbGUgYW5kIGxpbmtcbiAqIGl0IGludG8gdGhlIGN1cnJlbnQgQW5ndWxhckpTIHNjb3BlLlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgJGRpdiA9ICQoJzxkaXYgbmctY29udHJvbGxlcj1cIk15Q3RybFwiPnt7Y29udGVudC5sYWJlbH19PC9kaXY+Jyk7XG4gKiAkKGRvY3VtZW50LmJvZHkpLmFwcGVuZCgkZGl2KTtcbiAqXG4gKiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmluamVjdG9yKCkuaW52b2tlKGZ1bmN0aW9uKCRjb21waWxlKSB7XG4gKiAgIHZhciBzY29wZSA9IGFuZ3VsYXIuZWxlbWVudCgkZGl2KS5zY29wZSgpO1xuICogICAkY29tcGlsZSgkZGl2KShzY29wZSk7XG4gKiB9KTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBhdXRvXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBJbXBsaWNpdCBtb2R1bGUgd2hpY2ggZ2V0cyBhdXRvbWF0aWNhbGx5IGFkZGVkIHRvIGVhY2gge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uXG4gKi9cblxudmFyIEZOX0FSR1MgPSAvXmZ1bmN0aW9uXFxzKlteXFwoXSpcXChcXHMqKFteXFwpXSopXFwpL207XG52YXIgRk5fQVJHX1NQTElUID0gLywvO1xudmFyIEZOX0FSRyA9IC9eXFxzKihfPykoXFxTKz8pXFwxXFxzKiQvO1xudmFyIFNUUklQX0NPTU1FTlRTID0gLygoXFwvXFwvLiokKXwoXFwvXFwqW1xcc1xcU10qP1xcKlxcLykpL21nO1xudmFyICRpbmplY3Rvck1pbkVyciA9IG1pbkVycignJGluamVjdG9yJyk7XG5cbmZ1bmN0aW9uIGFub25Gbihmbikge1xuICAvLyBGb3IgYW5vbnltb3VzIGZ1bmN0aW9ucywgc2hvd2luZyBhdCB0aGUgdmVyeSBsZWFzdCB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGNhbiBoZWxwIGluXG4gIC8vIGRlYnVnZ2luZy5cbiAgdmFyIGZuVGV4dCA9IGZuLnRvU3RyaW5nKCkucmVwbGFjZShTVFJJUF9DT01NRU5UUywgJycpLFxuICAgICAgYXJncyA9IGZuVGV4dC5tYXRjaChGTl9BUkdTKTtcbiAgaWYgKGFyZ3MpIHtcbiAgICByZXR1cm4gJ2Z1bmN0aW9uKCcgKyAoYXJnc1sxXSB8fCAnJykucmVwbGFjZSgvW1xcc1xcclxcbl0rLywgJyAnKSArICcpJztcbiAgfVxuICByZXR1cm4gJ2ZuJztcbn1cblxuZnVuY3Rpb24gYW5ub3RhdGUoZm4sIHN0cmljdERpLCBuYW1lKSB7XG4gIHZhciAkaW5qZWN0LFxuICAgICAgZm5UZXh0LFxuICAgICAgYXJnRGVjbCxcbiAgICAgIGxhc3Q7XG5cbiAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmICghKCRpbmplY3QgPSBmbi4kaW5qZWN0KSkge1xuICAgICAgJGluamVjdCA9IFtdO1xuICAgICAgaWYgKGZuLmxlbmd0aCkge1xuICAgICAgICBpZiAoc3RyaWN0RGkpIHtcbiAgICAgICAgICBpZiAoIWlzU3RyaW5nKG5hbWUpIHx8ICFuYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gZm4ubmFtZSB8fCBhbm9uRm4oZm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3N0cmljdGRpJyxcbiAgICAgICAgICAgICd7MH0gaXMgbm90IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gYW5kIGNhbm5vdCBiZSBpbnZva2VkIGluIHN0cmljdCBtb2RlJywgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm5UZXh0ID0gZm4udG9TdHJpbmcoKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyk7XG4gICAgICAgIGFyZ0RlY2wgPSBmblRleHQubWF0Y2goRk5fQVJHUyk7XG4gICAgICAgIGZvckVhY2goYXJnRGVjbFsxXS5zcGxpdChGTl9BUkdfU1BMSVQpLCBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICBhcmcucmVwbGFjZShGTl9BUkcsIGZ1bmN0aW9uKGFsbCwgdW5kZXJzY29yZSwgbmFtZSkge1xuICAgICAgICAgICAgJGluamVjdC5wdXNoKG5hbWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGZuLiRpbmplY3QgPSAkaW5qZWN0O1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc0FycmF5KGZuKSkge1xuICAgIGxhc3QgPSBmbi5sZW5ndGggLSAxO1xuICAgIGFzc2VydEFyZ0ZuKGZuW2xhc3RdLCAnZm4nKTtcbiAgICAkaW5qZWN0ID0gZm4uc2xpY2UoMCwgbGFzdCk7XG4gIH0gZWxzZSB7XG4gICAgYXNzZXJ0QXJnRm4oZm4sICdmbicsIHRydWUpO1xuICB9XG4gIHJldHVybiAkaW5qZWN0O1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGluamVjdG9yXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogYCRpbmplY3RvcmAgaXMgdXNlZCB0byByZXRyaWV2ZSBvYmplY3QgaW5zdGFuY2VzIGFzIGRlZmluZWQgYnlcbiAqIHtAbGluayBhdXRvLiRwcm92aWRlIHByb3ZpZGVyfSwgaW5zdGFudGlhdGUgdHlwZXMsIGludm9rZSBtZXRob2RzLFxuICogYW5kIGxvYWQgbW9kdWxlcy5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGFsd2F5cyBob2xkcyB0cnVlOlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciAkaW5qZWN0b3IgPSBhbmd1bGFyLmluamVjdG9yKCk7XG4gKiAgIGV4cGVjdCgkaW5qZWN0b3IuZ2V0KCckaW5qZWN0b3InKSkudG9CZSgkaW5qZWN0b3IpO1xuICogICBleHBlY3QoJGluamVjdG9yLmludm9rZShmdW5jdGlvbigkaW5qZWN0b3IpIHtcbiAqICAgICByZXR1cm4gJGluamVjdG9yO1xuICogICB9KSkudG9CZSgkaW5qZWN0b3IpO1xuICogYGBgXG4gKlxuICogIyBJbmplY3Rpb24gRnVuY3Rpb24gQW5ub3RhdGlvblxuICpcbiAqIEphdmFTY3JpcHQgZG9lcyBub3QgaGF2ZSBhbm5vdGF0aW9ucywgYW5kIGFubm90YXRpb25zIGFyZSBuZWVkZWQgZm9yIGRlcGVuZGVuY3kgaW5qZWN0aW9uLiBUaGVcbiAqIGZvbGxvd2luZyBhcmUgYWxsIHZhbGlkIHdheXMgb2YgYW5ub3RhdGluZyBmdW5jdGlvbiB3aXRoIGluamVjdGlvbiBhcmd1bWVudHMgYW5kIGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIGBgYGpzXG4gKiAgIC8vIGluZmVycmVkIChvbmx5IHdvcmtzIGlmIGNvZGUgbm90IG1pbmlmaWVkL29iZnVzY2F0ZWQpXG4gKiAgICRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oc2VydmljZUEpe30pO1xuICpcbiAqICAgLy8gYW5ub3RhdGVkXG4gKiAgIGZ1bmN0aW9uIGV4cGxpY2l0KHNlcnZpY2VBKSB7fTtcbiAqICAgZXhwbGljaXQuJGluamVjdCA9IFsnc2VydmljZUEnXTtcbiAqICAgJGluamVjdG9yLmludm9rZShleHBsaWNpdCk7XG4gKlxuICogICAvLyBpbmxpbmVcbiAqICAgJGluamVjdG9yLmludm9rZShbJ3NlcnZpY2VBJywgZnVuY3Rpb24oc2VydmljZUEpe31dKTtcbiAqIGBgYFxuICpcbiAqICMjIEluZmVyZW5jZVxuICpcbiAqIEluIEphdmFTY3JpcHQgY2FsbGluZyBgdG9TdHJpbmcoKWAgb24gYSBmdW5jdGlvbiByZXR1cm5zIHRoZSBmdW5jdGlvbiBkZWZpbml0aW9uLiBUaGUgZGVmaW5pdGlvblxuICogY2FuIHRoZW4gYmUgcGFyc2VkIGFuZCB0aGUgZnVuY3Rpb24gYXJndW1lbnRzIGNhbiBiZSBleHRyYWN0ZWQuIFRoaXMgbWV0aG9kIG9mIGRpc2NvdmVyaW5nXG4gKiBhbm5vdGF0aW9ucyBpcyBkaXNhbGxvd2VkIHdoZW4gdGhlIGluamVjdG9yIGlzIGluIHN0cmljdCBtb2RlLlxuICogKk5PVEU6KiBUaGlzIGRvZXMgbm90IHdvcmsgd2l0aCBtaW5pZmljYXRpb24sIGFuZCBvYmZ1c2NhdGlvbiB0b29scyBzaW5jZSB0aGVzZSB0b29scyBjaGFuZ2UgdGhlXG4gKiBhcmd1bWVudCBuYW1lcy5cbiAqXG4gKiAjIyBgJGluamVjdGAgQW5ub3RhdGlvblxuICogQnkgYWRkaW5nIGFuIGAkaW5qZWN0YCBwcm9wZXJ0eSBvbnRvIGEgZnVuY3Rpb24gdGhlIGluamVjdGlvbiBwYXJhbWV0ZXJzIGNhbiBiZSBzcGVjaWZpZWQuXG4gKlxuICogIyMgSW5saW5lXG4gKiBBcyBhbiBhcnJheSBvZiBpbmplY3Rpb24gbmFtZXMsIHdoZXJlIHRoZSBsYXN0IGl0ZW0gaW4gdGhlIGFycmF5IGlzIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2dldFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIGFuIGluc3RhbmNlIG9mIHRoZSBzZXJ2aWNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZSB0byByZXRyaWV2ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsZXIgQW4gb3B0aW9uYWwgc3RyaW5nIHRvIHByb3ZpZGUgdGhlIG9yaWdpbiBvZiB0aGUgZnVuY3Rpb24gY2FsbCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKiBAcmV0dXJuIHsqfSBUaGUgaW5zdGFuY2UuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaW5qZWN0b3IjaW52b2tlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBJbnZva2UgdGhlIG1ldGhvZCBhbmQgc3VwcGx5IHRoZSBtZXRob2QgYXJndW1lbnRzIGZyb20gdGhlIGAkaW5qZWN0b3JgLlxuICpcbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLiBGdW5jdGlvbiBwYXJhbWV0ZXJzIGFyZSBpbmplY3RlZCBhY2NvcmRpbmcgdG8gdGhlXG4gKiAgIHtAbGluayBndWlkZS9kaSAkaW5qZWN0IEFubm90YXRpb259IHJ1bGVzLlxuICogQHBhcmFtIHtPYmplY3Q9fSBzZWxmIFRoZSBgdGhpc2AgZm9yIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gbG9jYWxzIE9wdGlvbmFsIG9iamVjdC4gSWYgcHJlc2V0IHRoZW4gYW55IGFyZ3VtZW50IG5hbWVzIGFyZSByZWFkIGZyb20gdGhpc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0IGZpcnN0LCBiZWZvcmUgdGhlIGAkaW5qZWN0b3JgIGlzIGNvbnN1bHRlZC5cbiAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGludm9rZWQgYGZuYCBmdW5jdGlvbi5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNoYXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFsbG93cyB0aGUgdXNlciB0byBxdWVyeSBpZiB0aGUgcGFydGljdWxhciBzZXJ2aWNlIGV4aXN0cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiBpbmplY3RvciBoYXMgZ2l2ZW4gc2VydmljZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNpbnN0YW50aWF0ZVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgSlMgdHlwZS4gVGhlIG1ldGhvZCB0YWtlcyBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBpbnZva2VzIHRoZSBuZXdcbiAqIG9wZXJhdG9yLCBhbmQgc3VwcGxpZXMgYWxsIG9mIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGFzIHNwZWNpZmllZCBieSB0aGVcbiAqIGNvbnN0cnVjdG9yIGFubm90YXRpb24uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gVHlwZSBBbm5vdGF0ZWQgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge09iamVjdD19IGxvY2FscyBPcHRpb25hbCBvYmplY3QuIElmIHByZXNldCB0aGVuIGFueSBhcmd1bWVudCBuYW1lcyBhcmUgcmVhZCBmcm9tIHRoaXNcbiAqIG9iamVjdCBmaXJzdCwgYmVmb3JlIHRoZSBgJGluamVjdG9yYCBpcyBjb25zdWx0ZWQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBuZXcgaW5zdGFuY2Ugb2YgYFR5cGVgLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2Fubm90YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHNlcnZpY2UgbmFtZXMgd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIHJlcXVlc3RpbmcgZm9yIGluamVjdGlvbi4gVGhpcyBBUEkgaXNcbiAqIHVzZWQgYnkgdGhlIGluamVjdG9yIHRvIGRldGVybWluZSB3aGljaCBzZXJ2aWNlcyBuZWVkIHRvIGJlIGluamVjdGVkIGludG8gdGhlIGZ1bmN0aW9uIHdoZW4gdGhlXG4gKiBmdW5jdGlvbiBpcyBpbnZva2VkLiBUaGVyZSBhcmUgdGhyZWUgd2F5cyBpbiB3aGljaCB0aGUgZnVuY3Rpb24gY2FuIGJlIGFubm90YXRlZCB3aXRoIHRoZSBuZWVkZWRcbiAqIGRlcGVuZGVuY2llcy5cbiAqXG4gKiAjIEFyZ3VtZW50IG5hbWVzXG4gKlxuICogVGhlIHNpbXBsZXN0IGZvcm0gaXMgdG8gZXh0cmFjdCB0aGUgZGVwZW5kZW5jaWVzIGZyb20gdGhlIGFyZ3VtZW50cyBvZiB0aGUgZnVuY3Rpb24uIFRoaXMgaXMgZG9uZVxuICogYnkgY29udmVydGluZyB0aGUgZnVuY3Rpb24gaW50byBhIHN0cmluZyB1c2luZyBgdG9TdHJpbmcoKWAgbWV0aG9kIGFuZCBleHRyYWN0aW5nIHRoZSBhcmd1bWVudFxuICogbmFtZXMuXG4gKiBgYGBqc1xuICogICAvLyBHaXZlblxuICogICBmdW5jdGlvbiBNeUNvbnRyb2xsZXIoJHNjb3BlLCAkcm91dGUpIHtcbiAqICAgICAvLyAuLi5cbiAqICAgfVxuICpcbiAqICAgLy8gVGhlblxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoTXlDb250cm9sbGVyKSkudG9FcXVhbChbJyRzY29wZScsICckcm91dGUnXSk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIGRpc2FsbG93IHRoaXMgbWV0aG9kIGJ5IHVzaW5nIHN0cmljdCBpbmplY3Rpb24gbW9kZS5cbiAqXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIHdpdGggY29kZSBtaW5pZmljYXRpb24gLyBvYmZ1c2NhdGlvbi4gRm9yIHRoaXMgcmVhc29uIHRoZSBmb2xsb3dpbmdcbiAqIGFubm90YXRpb24gc3RyYXRlZ2llcyBhcmUgc3VwcG9ydGVkLlxuICpcbiAqICMgVGhlIGAkaW5qZWN0YCBwcm9wZXJ0eVxuICpcbiAqIElmIGEgZnVuY3Rpb24gaGFzIGFuIGAkaW5qZWN0YCBwcm9wZXJ0eSBhbmQgaXRzIHZhbHVlIGlzIGFuIGFycmF5IG9mIHN0cmluZ3MsIHRoZW4gdGhlIHN0cmluZ3NcbiAqIHJlcHJlc2VudCBuYW1lcyBvZiBzZXJ2aWNlcyB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBmdW5jdGlvbi5cbiAqIGBgYGpzXG4gKiAgIC8vIEdpdmVuXG4gKiAgIHZhciBNeUNvbnRyb2xsZXIgPSBmdW5jdGlvbihvYmZ1c2NhdGVkU2NvcGUsIG9iZnVzY2F0ZWRSb3V0ZSkge1xuICogICAgIC8vIC4uLlxuICogICB9XG4gKiAgIC8vIERlZmluZSBmdW5jdGlvbiBkZXBlbmRlbmNpZXNcbiAqICAgTXlDb250cm9sbGVyWyckaW5qZWN0J10gPSBbJyRzY29wZScsICckcm91dGUnXTtcbiAqXG4gKiAgIC8vIFRoZW5cbiAqICAgZXhwZWN0KGluamVjdG9yLmFubm90YXRlKE15Q29udHJvbGxlcikpLnRvRXF1YWwoWyckc2NvcGUnLCAnJHJvdXRlJ10pO1xuICogYGBgXG4gKlxuICogIyBUaGUgYXJyYXkgbm90YXRpb25cbiAqXG4gKiBJdCBpcyBvZnRlbiBkZXNpcmFibGUgdG8gaW5saW5lIEluamVjdGVkIGZ1bmN0aW9ucyBhbmQgdGhhdCdzIHdoZW4gc2V0dGluZyB0aGUgYCRpbmplY3RgIHByb3BlcnR5XG4gKiBpcyB2ZXJ5IGluY29udmVuaWVudC4gSW4gdGhlc2Ugc2l0dWF0aW9ucyB1c2luZyB0aGUgYXJyYXkgbm90YXRpb24gdG8gc3BlY2lmeSB0aGUgZGVwZW5kZW5jaWVzIGluXG4gKiBhIHdheSB0aGF0IHN1cnZpdmVzIG1pbmlmaWNhdGlvbiBpcyBhIGJldHRlciBjaG9pY2U6XG4gKlxuICogYGBganNcbiAqICAgLy8gV2Ugd2lzaCB0byB3cml0ZSB0aGlzIChub3QgbWluaWZpY2F0aW9uIC8gb2JmdXNjYXRpb24gc2FmZSlcbiAqICAgaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRjb21waWxlLCAkcm9vdFNjb3BlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH0pO1xuICpcbiAqICAgLy8gV2UgYXJlIGZvcmNlZCB0byB3cml0ZSBicmVhayBpbmxpbmluZ1xuICogICB2YXIgdG1wRm4gPSBmdW5jdGlvbihvYmZ1c2NhdGVkQ29tcGlsZSwgb2JmdXNjYXRlZFJvb3RTY29wZSkge1xuICogICAgIC8vIC4uLlxuICogICB9O1xuICogICB0bXBGbi4kaW5qZWN0ID0gWyckY29tcGlsZScsICckcm9vdFNjb3BlJ107XG4gKiAgIGluamVjdG9yLmludm9rZSh0bXBGbik7XG4gKlxuICogICAvLyBUbyBiZXR0ZXIgc3VwcG9ydCBpbmxpbmUgZnVuY3Rpb24gdGhlIGlubGluZSBhbm5vdGF0aW9uIGlzIHN1cHBvcnRlZFxuICogICBpbmplY3Rvci5pbnZva2UoWyckY29tcGlsZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24ob2JmQ29tcGlsZSwgb2JmUm9vdFNjb3BlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH1dKTtcbiAqXG4gKiAgIC8vIFRoZXJlZm9yZVxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoXG4gKiAgICAgIFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKG9iZnVzXyRjb21waWxlLCBvYmZ1c18kcm9vdFNjb3BlKSB7fV0pXG4gKiAgICApLnRvRXF1YWwoWyckY29tcGlsZScsICckcm9vdFNjb3BlJ10pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZm4gRnVuY3Rpb24gZm9yIHdoaWNoIGRlcGVuZGVudCBzZXJ2aWNlIG5hbWVzIG5lZWQgdG9cbiAqIGJlIHJldHJpZXZlZCBhcyBkZXNjcmliZWQgYWJvdmUuXG4gKlxuICogQHBhcmFtIHtib29sZWFuPX0gW3N0cmljdERpPWZhbHNlXSBEaXNhbGxvdyBhcmd1bWVudCBuYW1lIGFubm90YXRpb24gaW5mZXJlbmNlLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheS48c3RyaW5nPn0gVGhlIG5hbWVzIG9mIHRoZSBzZXJ2aWNlcyB3aGljaCB0aGUgZnVuY3Rpb24gcmVxdWlyZXMuXG4gKi9cblxuXG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHByb3ZpZGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGEgbnVtYmVyIG9mIG1ldGhvZHMgZm9yIHJlZ2lzdGVyaW5nIGNvbXBvbmVudHNcbiAqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBNYW55IG9mIHRoZXNlIGZ1bmN0aW9ucyBhcmUgYWxzbyBleHBvc2VkIG9uXG4gKiB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9LlxuICpcbiAqIEFuIEFuZ3VsYXIgKipzZXJ2aWNlKiogaXMgYSBzaW5nbGV0b24gb2JqZWN0IGNyZWF0ZWQgYnkgYSAqKnNlcnZpY2UgZmFjdG9yeSoqLiAgVGhlc2UgKipzZXJ2aWNlXG4gKiBmYWN0b3JpZXMqKiBhcmUgZnVuY3Rpb25zIHdoaWNoLCBpbiB0dXJuLCBhcmUgY3JlYXRlZCBieSBhICoqc2VydmljZSBwcm92aWRlcioqLlxuICogVGhlICoqc2VydmljZSBwcm92aWRlcnMqKiBhcmUgY29uc3RydWN0b3IgZnVuY3Rpb25zLiBXaGVuIGluc3RhbnRpYXRlZCB0aGV5IG11c3QgY29udGFpbiBhXG4gKiBwcm9wZXJ0eSBjYWxsZWQgYCRnZXRgLCB3aGljaCBob2xkcyB0aGUgKipzZXJ2aWNlIGZhY3RvcnkqKiBmdW5jdGlvbi5cbiAqXG4gKiBXaGVuIHlvdSByZXF1ZXN0IGEgc2VydmljZSwgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9IGlzIHJlc3BvbnNpYmxlIGZvciBmaW5kaW5nIHRoZVxuICogY29ycmVjdCAqKnNlcnZpY2UgcHJvdmlkZXIqKiwgaW5zdGFudGlhdGluZyBpdCBhbmQgdGhlbiBjYWxsaW5nIGl0cyBgJGdldGAgKipzZXJ2aWNlIGZhY3RvcnkqKlxuICogZnVuY3Rpb24gdG8gZ2V0IHRoZSBpbnN0YW5jZSBvZiB0aGUgKipzZXJ2aWNlKiouXG4gKlxuICogT2Z0ZW4gc2VydmljZXMgaGF2ZSBubyBjb25maWd1cmF0aW9uIG9wdGlvbnMgYW5kIHRoZXJlIGlzIG5vIG5lZWQgdG8gYWRkIG1ldGhvZHMgdG8gdGhlIHNlcnZpY2VcbiAqIHByb3ZpZGVyLiAgVGhlIHByb3ZpZGVyIHdpbGwgYmUgbm8gbW9yZSB0aGFuIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gd2l0aCBhIGAkZ2V0YCBwcm9wZXJ0eS4gRm9yXG4gKiB0aGVzZSBjYXNlcyB0aGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHMgdG8gcmVnaXN0ZXJcbiAqIHNlcnZpY2VzIHdpdGhvdXQgc3BlY2lmeWluZyBhIHByb3ZpZGVyLlxuICpcbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgcHJvdmlkZXIocHJvdmlkZXIpfSAtIHJlZ2lzdGVycyBhICoqc2VydmljZSBwcm92aWRlcioqIHdpdGggdGhlXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn1cbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjY29uc3RhbnQgY29uc3RhbnQob2JqKX0gLSByZWdpc3RlcnMgYSB2YWx1ZS9vYmplY3QgdGhhdCBjYW4gYmUgYWNjZXNzZWQgYnlcbiAqICAgICBwcm92aWRlcnMgYW5kIHNlcnZpY2VzLlxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSN2YWx1ZSB2YWx1ZShvYmopfSAtIHJlZ2lzdGVycyBhIHZhbHVlL29iamVjdCB0aGF0IGNhbiBvbmx5IGJlIGFjY2Vzc2VkIGJ5XG4gKiAgICAgc2VydmljZXMsIG5vdCBwcm92aWRlcnMuXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2ZhY3RvcnkgZmFjdG9yeShmbil9IC0gcmVnaXN0ZXJzIGEgc2VydmljZSAqKmZhY3RvcnkgZnVuY3Rpb24qKiwgYGZuYCxcbiAqICAgICB0aGF0IHdpbGwgYmUgd3JhcHBlZCBpbiBhICoqc2VydmljZSBwcm92aWRlcioqIG9iamVjdCwgd2hvc2UgYCRnZXRgIHByb3BlcnR5IHdpbGwgY29udGFpbiB0aGVcbiAqICAgICBnaXZlbiBmYWN0b3J5IGZ1bmN0aW9uLlxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlIHNlcnZpY2UoY2xhc3MpfSAtIHJlZ2lzdGVycyBhICoqY29uc3RydWN0b3IgZnVuY3Rpb24qKiwgYGNsYXNzYFxuICogICAgIHRoYXQgd2lsbCBiZSB3cmFwcGVkIGluIGEgKipzZXJ2aWNlIHByb3ZpZGVyKiogb2JqZWN0LCB3aG9zZSBgJGdldGAgcHJvcGVydHkgd2lsbCBpbnN0YW50aWF0ZVxuICogICAgICBhIG5ldyBvYmplY3QgdXNpbmcgdGhlIGdpdmVuIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICpcbiAqIFNlZSB0aGUgaW5kaXZpZHVhbCBtZXRob2RzIGZvciBtb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlcy5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI3Byb3ZpZGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqcHJvdmlkZXIgZnVuY3Rpb24qKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gUHJvdmlkZXIgZnVuY3Rpb25zXG4gKiBhcmUgY29uc3RydWN0b3IgZnVuY3Rpb25zLCB3aG9zZSBpbnN0YW5jZXMgYXJlIHJlc3BvbnNpYmxlIGZvciBcInByb3ZpZGluZ1wiIGEgZmFjdG9yeSBmb3IgYVxuICogc2VydmljZS5cbiAqXG4gKiBTZXJ2aWNlIHByb3ZpZGVyIG5hbWVzIHN0YXJ0IHdpdGggdGhlIG5hbWUgb2YgdGhlIHNlcnZpY2UgdGhleSBwcm92aWRlIGZvbGxvd2VkIGJ5IGBQcm92aWRlcmAuXG4gKiBGb3IgZXhhbXBsZSwgdGhlIHtAbGluayBuZy4kbG9nICRsb2d9IHNlcnZpY2UgaGFzIGEgcHJvdmlkZXIgY2FsbGVkXG4gKiB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyICRsb2dQcm92aWRlcn0uXG4gKlxuICogU2VydmljZSBwcm92aWRlciBvYmplY3RzIGNhbiBoYXZlIGFkZGl0aW9uYWwgbWV0aG9kcyB3aGljaCBhbGxvdyBjb25maWd1cmF0aW9uIG9mIHRoZSBwcm92aWRlclxuICogYW5kIGl0cyBzZXJ2aWNlLiBJbXBvcnRhbnRseSwgeW91IGNhbiBjb25maWd1cmUgd2hhdCBraW5kIG9mIHNlcnZpY2UgaXMgY3JlYXRlZCBieSB0aGUgYCRnZXRgXG4gKiBtZXRob2QsIG9yIGhvdyB0aGF0IHNlcnZpY2Ugd2lsbCBhY3QuIEZvciBleGFtcGxlLCB0aGUge0BsaW5rIG5nLiRsb2dQcm92aWRlciAkbG9nUHJvdmlkZXJ9IGhhcyBhXG4gKiBtZXRob2Qge0BsaW5rIG5nLiRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWQgZGVidWdFbmFibGVkfVxuICogd2hpY2ggbGV0cyB5b3Ugc3BlY2lmeSB3aGV0aGVyIHRoZSB7QGxpbmsgbmcuJGxvZyAkbG9nfSBzZXJ2aWNlIHdpbGwgbG9nIGRlYnVnIG1lc3NhZ2VzIHRvIHRoZVxuICogY29uc29sZSBvciBub3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlLiBOT1RFOiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBhdmFpbGFibGUgdW5kZXIgYG5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb3ZpZGVyJ2Aga2V5LlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKCkpfSBwcm92aWRlciBJZiB0aGUgcHJvdmlkZXIgaXM6XG4gKlxuICogICAtIGBPYmplY3RgOiB0aGVuIGl0IHNob3VsZCBoYXZlIGEgYCRnZXRgIG1ldGhvZC4gVGhlIGAkZ2V0YCBtZXRob2Qgd2lsbCBiZSBpbnZva2VkIHVzaW5nXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSAkaW5qZWN0b3IuaW52b2tlKCl9IHdoZW4gYW4gaW5zdGFuY2UgbmVlZHMgdG8gYmUgY3JlYXRlZC5cbiAqICAgLSBgQ29uc3RydWN0b3JgOiBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBjcmVhdGVkIHVzaW5nXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yI2luc3RhbnRpYXRlICRpbmplY3Rvci5pbnN0YW50aWF0ZSgpfSwgdGhlbiB0cmVhdGVkIGFzIGBvYmplY3RgLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcblxuICogQGV4YW1wbGVcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIGNyZWF0ZSBhIHNpbXBsZSBldmVudCB0cmFja2luZyBzZXJ2aWNlIGFuZCByZWdpc3RlciBpdCB1c2luZ1xuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgJHByb3ZpZGUucHJvdmlkZXIoKX0uXG4gKlxuICogYGBganNcbiAqICAvLyBEZWZpbmUgdGhlIGV2ZW50VHJhY2tlciBwcm92aWRlclxuICogIGZ1bmN0aW9uIEV2ZW50VHJhY2tlclByb3ZpZGVyKCkge1xuICogICAgdmFyIHRyYWNraW5nVXJsID0gJy90cmFjayc7XG4gKlxuICogICAgLy8gQSBwcm92aWRlciBtZXRob2QgZm9yIGNvbmZpZ3VyaW5nIHdoZXJlIHRoZSB0cmFja2VkIGV2ZW50cyBzaG91bGQgYmVlbiBzYXZlZFxuICogICAgdGhpcy5zZXRUcmFja2luZ1VybCA9IGZ1bmN0aW9uKHVybCkge1xuICogICAgICB0cmFja2luZ1VybCA9IHVybDtcbiAqICAgIH07XG4gKlxuICogICAgLy8gVGhlIHNlcnZpY2UgZmFjdG9yeSBmdW5jdGlvblxuICogICAgdGhpcy4kZ2V0ID0gWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gKiAgICAgIHZhciB0cmFja2VkRXZlbnRzID0ge307XG4gKiAgICAgIHJldHVybiB7XG4gKiAgICAgICAgLy8gQ2FsbCB0aGlzIHRvIHRyYWNrIGFuIGV2ZW50XG4gKiAgICAgICAgZXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gKiAgICAgICAgICB2YXIgY291bnQgPSB0cmFja2VkRXZlbnRzW2V2ZW50XSB8fCAwO1xuICogICAgICAgICAgY291bnQgKz0gMTtcbiAqICAgICAgICAgIHRyYWNrZWRFdmVudHNbZXZlbnRdID0gY291bnQ7XG4gKiAgICAgICAgICByZXR1cm4gY291bnQ7XG4gKiAgICAgICAgfSxcbiAqICAgICAgICAvLyBDYWxsIHRoaXMgdG8gc2F2ZSB0aGUgdHJhY2tlZCBldmVudHMgdG8gdGhlIHRyYWNraW5nVXJsXG4gKiAgICAgICAgc2F2ZTogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAkaHR0cC5wb3N0KHRyYWNraW5nVXJsLCB0cmFja2VkRXZlbnRzKTtcbiAqICAgICAgICB9XG4gKiAgICAgIH07XG4gKiAgICB9XTtcbiAqICB9XG4gKlxuICogIGRlc2NyaWJlKCdldmVudFRyYWNrZXInLCBmdW5jdGlvbigpIHtcbiAqICAgIHZhciBwb3N0U3B5O1xuICpcbiAqICAgIGJlZm9yZUVhY2gobW9kdWxlKGZ1bmN0aW9uKCRwcm92aWRlKSB7XG4gKiAgICAgIC8vIFJlZ2lzdGVyIHRoZSBldmVudFRyYWNrZXIgcHJvdmlkZXJcbiAqICAgICAgJHByb3ZpZGUucHJvdmlkZXIoJ2V2ZW50VHJhY2tlcicsIEV2ZW50VHJhY2tlclByb3ZpZGVyKTtcbiAqICAgIH0pKTtcbiAqXG4gKiAgICBiZWZvcmVFYWNoKG1vZHVsZShmdW5jdGlvbihldmVudFRyYWNrZXJQcm92aWRlcikge1xuICogICAgICAvLyBDb25maWd1cmUgZXZlbnRUcmFja2VyIHByb3ZpZGVyXG4gKiAgICAgIGV2ZW50VHJhY2tlclByb3ZpZGVyLnNldFRyYWNraW5nVXJsKCcvY3VzdG9tLXRyYWNrJyk7XG4gKiAgICB9KSk7XG4gKlxuICogICAgaXQoJ3RyYWNrcyBldmVudHMnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyKSB7XG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMSk7XG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMik7XG4gKiAgICB9KSk7XG4gKlxuICogICAgaXQoJ3NhdmVzIHRvIHRoZSB0cmFja2luZyB1cmwnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyLCAkaHR0cCkge1xuICogICAgICBwb3N0U3B5ID0gc3B5T24oJGh0dHAsICdwb3N0Jyk7XG4gKiAgICAgIGV2ZW50VHJhY2tlci5ldmVudCgnbG9naW4nKTtcbiAqICAgICAgZXZlbnRUcmFja2VyLnNhdmUoKTtcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkubW9zdFJlY2VudENhbGwuYXJnc1swXSkubm90LnRvRXF1YWwoJy90cmFjaycpO1xuICogICAgICBleHBlY3QocG9zdFNweS5tb3N0UmVjZW50Q2FsbC5hcmdzWzBdKS50b0VxdWFsKCcvY3VzdG9tLXRyYWNrJyk7XG4gKiAgICAgIGV4cGVjdChwb3N0U3B5Lm1vc3RSZWNlbnRDYWxsLmFyZ3NbMV0pLnRvRXF1YWwoeyAnbG9naW4nOiAxIH0pO1xuICogICAgfSkpO1xuICogIH0pO1xuICogYGBgXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSNmYWN0b3J5XG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqc2VydmljZSBmYWN0b3J5KiosIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHRvIHJldHVybiB0aGUgc2VydmljZSBpbnN0YW5jZS5cbiAqIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHMgcHJvdmlkZXIgY29uc2lzdHMgb2Ygb25seSBhIGAkZ2V0YCBwcm9wZXJ0eSxcbiAqIHdoaWNoIGlzIHRoZSBnaXZlbiBzZXJ2aWNlIGZhY3RvcnkgZnVuY3Rpb24uXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoZ2V0Rm4pfSBpZiB5b3UgZG8gbm90IG5lZWQgdG9cbiAqIGNvbmZpZ3VyZSB5b3VyIHNlcnZpY2UgaW4gYSBwcm92aWRlci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9ICRnZXRGbiBUaGUgJGdldEZuIGZvciB0aGUgaW5zdGFuY2UgY3JlYXRpb24uIEludGVybmFsbHkgdGhpcyBpcyBhIHNob3J0IGhhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBgJHByb3ZpZGUucHJvdmlkZXIobmFtZSwgeyRnZXQ6ICRnZXRGbn0pYC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSBpcyBhbiBleGFtcGxlIG9mIHJlZ2lzdGVyaW5nIGEgc2VydmljZVxuICogYGBganNcbiAqICAgJHByb3ZpZGUuZmFjdG9yeSgncGluZycsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuICogICAgIHJldHVybiBmdW5jdGlvbiBwaW5nKCkge1xuICogICAgICAgcmV0dXJuICRodHRwLnNlbmQoJy9waW5nJyk7XG4gKiAgICAgfTtcbiAqICAgfV0pO1xuICogYGBgXG4gKiBZb3Ugd291bGQgdGhlbiBpbmplY3QgYW5kIHVzZSB0aGlzIHNlcnZpY2UgbGlrZSB0aGlzOlxuICogYGBganNcbiAqICAgc29tZU1vZHVsZS5jb250cm9sbGVyKCdDdHJsJywgWydwaW5nJywgZnVuY3Rpb24ocGluZykge1xuICogICAgIHBpbmcoKTtcbiAqICAgfV0pO1xuICogYGBgXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI3NlcnZpY2VcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipzZXJ2aWNlIGNvbnN0cnVjdG9yKiosIHdoaWNoIHdpbGwgYmUgaW52b2tlZCB3aXRoIGBuZXdgIHRvIGNyZWF0ZSB0aGUgc2VydmljZVxuICogaW5zdGFuY2UuXG4gKiBUaGlzIGlzIHNob3J0IGZvciByZWdpc3RlcmluZyBhIHNlcnZpY2Ugd2hlcmUgaXRzIHByb3ZpZGVyJ3MgYCRnZXRgIHByb3BlcnR5IGlzIHRoZSBzZXJ2aWNlXG4gKiBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgdXNlZCB0byBpbnN0YW50aWF0ZSB0aGUgc2VydmljZSBpbnN0YW5jZS5cbiAqXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfSBpZiB5b3UgZGVmaW5lIHlvdXIgc2VydmljZVxuICogYXMgYSB0eXBlL2NsYXNzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbnN0cnVjdG9yIEEgY2xhc3MgKGNvbnN0cnVjdG9yIGZ1bmN0aW9uKSB0aGF0IHdpbGwgYmUgaW5zdGFudGlhdGVkLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGlzIGFuIGV4YW1wbGUgb2YgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHVzaW5nXG4gKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfS5cbiAqIGBgYGpzXG4gKiAgIHZhciBQaW5nID0gZnVuY3Rpb24oJGh0dHApIHtcbiAqICAgICB0aGlzLiRodHRwID0gJGh0dHA7XG4gKiAgIH07XG4gKlxuICogICBQaW5nLiRpbmplY3QgPSBbJyRodHRwJ107XG4gKlxuICogICBQaW5nLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIHRoaXMuJGh0dHAuZ2V0KCcvcGluZycpO1xuICogICB9O1xuICogICAkcHJvdmlkZS5zZXJ2aWNlKCdwaW5nJywgUGluZyk7XG4gKiBgYGBcbiAqIFlvdSB3b3VsZCB0aGVuIGluamVjdCBhbmQgdXNlIHRoaXMgc2VydmljZSBsaWtlIHRoaXM6XG4gKiBgYGBqc1xuICogICBzb21lTW9kdWxlLmNvbnRyb2xsZXIoJ0N0cmwnLCBbJ3BpbmcnLCBmdW5jdGlvbihwaW5nKSB7XG4gKiAgICAgcGluZy5zZW5kKCk7XG4gKiAgIH1dKTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSN2YWx1ZVxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUmVnaXN0ZXIgYSAqKnZhbHVlIHNlcnZpY2UqKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSwgc3VjaCBhcyBhIHN0cmluZywgYVxuICogbnVtYmVyLCBhbiBhcnJheSwgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24uICBUaGlzIGlzIHNob3J0IGZvciByZWdpc3RlcmluZyBhIHNlcnZpY2Ugd2hlcmUgaXRzXG4gKiBwcm92aWRlcidzIGAkZ2V0YCBwcm9wZXJ0eSBpcyBhIGZhY3RvcnkgZnVuY3Rpb24gdGhhdCB0YWtlcyBubyBhcmd1bWVudHMgYW5kIHJldHVybnMgdGhlICoqdmFsdWVcbiAqIHNlcnZpY2UqKi5cbiAqXG4gKiBWYWx1ZSBzZXJ2aWNlcyBhcmUgc2ltaWxhciB0byBjb25zdGFudCBzZXJ2aWNlcywgZXhjZXB0IHRoYXQgdGhleSBjYW5ub3QgYmUgaW5qZWN0ZWQgaW50byBhXG4gKiBtb2R1bGUgY29uZmlndXJhdGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25maWd9KSBidXQgdGhleSBjYW4gYmUgb3ZlcnJpZGRlbiBieVxuICogYW4gQW5ndWxhclxuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yIGRlY29yYXRvcn0uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlLlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZWdpc3RlcmVkIHByb3ZpZGVyIGluc3RhbmNlXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgYXJlIHNvbWUgZXhhbXBsZXMgb2YgY3JlYXRpbmcgdmFsdWUgc2VydmljZXMuXG4gKiBgYGBqc1xuICogICAkcHJvdmlkZS52YWx1ZSgnQURNSU5fVVNFUicsICdhZG1pbicpO1xuICpcbiAqICAgJHByb3ZpZGUudmFsdWUoJ1JvbGVMb29rdXAnLCB7IGFkbWluOiAwLCB3cml0ZXI6IDEsIHJlYWRlcjogMiB9KTtcbiAqXG4gKiAgICRwcm92aWRlLnZhbHVlKCdoYWxmT2YnLCBmdW5jdGlvbih2YWx1ZSkge1xuICogICAgIHJldHVybiB2YWx1ZSAvIDI7XG4gKiAgIH0pO1xuICogYGBgXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI2NvbnN0YW50XG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqY29uc3RhbnQgc2VydmljZSoqLCBzdWNoIGFzIGEgc3RyaW5nLCBhIG51bWJlciwgYW4gYXJyYXksIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uLFxuICogd2l0aCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIFVubGlrZSB7QGxpbmsgYXV0by4kcHJvdmlkZSN2YWx1ZSB2YWx1ZX0gaXQgY2FuIGJlXG4gKiBpbmplY3RlZCBpbnRvIGEgbW9kdWxlIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb24gKHNlZSB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjY29uZmlnfSkgYW5kIGl0IGNhbm5vdFxuICogYmUgb3ZlcnJpZGRlbiBieSBhbiBBbmd1bGFyIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3J9LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb25zdGFudC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIGNvbnN0YW50IHZhbHVlLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGEgc29tZSBleGFtcGxlcyBvZiBjcmVhdGluZyBjb25zdGFudHM6XG4gKiBgYGBqc1xuICogICAkcHJvdmlkZS5jb25zdGFudCgnU0hBUkRfSEVJR0hUJywgMzA2KTtcbiAqXG4gKiAgICRwcm92aWRlLmNvbnN0YW50KCdNWV9DT0xPVVJTJywgWydyZWQnLCAnYmx1ZScsICdncmV5J10pO1xuICpcbiAqICAgJHByb3ZpZGUuY29uc3RhbnQoJ2RvdWJsZScsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gKiAgICAgcmV0dXJuIHZhbHVlICogMjtcbiAqICAgfSk7XG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJHByb3ZpZGUjZGVjb3JhdG9yXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqc2VydmljZSBkZWNvcmF0b3IqKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gQSBzZXJ2aWNlIGRlY29yYXRvclxuICogaW50ZXJjZXB0cyB0aGUgY3JlYXRpb24gb2YgYSBzZXJ2aWNlLCBhbGxvd2luZyBpdCB0byBvdmVycmlkZSBvciBtb2RpZnkgdGhlIGJlaGF2aW91ciBvZiB0aGVcbiAqIHNlcnZpY2UuIFRoZSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGRlY29yYXRvciBtYXkgYmUgdGhlIG9yaWdpbmFsIHNlcnZpY2UsIG9yIGEgbmV3IHNlcnZpY2VcbiAqIG9iamVjdCB3aGljaCByZXBsYWNlcyBvciB3cmFwcyBhbmQgZGVsZWdhdGVzIHRvIHRoZSBvcmlnaW5hbCBzZXJ2aWNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIGRlY29yYXRlLlxuICogQHBhcmFtIHtmdW5jdGlvbigpfSBkZWNvcmF0b3IgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgc2VydmljZSBuZWVkcyB0byBiZVxuICogICAgaW5zdGFudGlhdGVkIGFuZCBzaG91bGQgcmV0dXJuIHRoZSBkZWNvcmF0ZWQgc2VydmljZSBpbnN0YW5jZS4gVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB1c2luZ1xuICogICAgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgaW5qZWN0b3IuaW52b2tlfSBtZXRob2QgYW5kIGlzIHRoZXJlZm9yZSBmdWxseSBpbmplY3RhYmxlLlxuICogICAgTG9jYWwgaW5qZWN0aW9uIGFyZ3VtZW50czpcbiAqXG4gKiAgICAqIGAkZGVsZWdhdGVgIC0gVGhlIG9yaWdpbmFsIHNlcnZpY2UgaW5zdGFuY2UsIHdoaWNoIGNhbiBiZSBtb25rZXkgcGF0Y2hlZCwgY29uZmlndXJlZCxcbiAqICAgICAgZGVjb3JhdGVkIG9yIGRlbGVnYXRlZCB0by5cbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSB3ZSBkZWNvcmF0ZSB0aGUge0BsaW5rIG5nLiRsb2cgJGxvZ30gc2VydmljZSB0byBjb252ZXJ0IHdhcm5pbmdzIHRvIGVycm9ycyBieSBpbnRlcmNlcHRpbmdcbiAqIGNhbGxzIHRvIHtAbGluayBuZy4kbG9nI2Vycm9yICRsb2cud2FybigpfS5cbiAqIGBgYGpzXG4gKiAgICRwcm92aWRlLmRlY29yYXRvcignJGxvZycsIFsnJGRlbGVnYXRlJywgZnVuY3Rpb24oJGRlbGVnYXRlKSB7XG4gKiAgICAgJGRlbGVnYXRlLndhcm4gPSAkZGVsZWdhdGUuZXJyb3I7XG4gKiAgICAgcmV0dXJuICRkZWxlZ2F0ZTtcbiAqICAgfV0pO1xuICogYGBgXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVJbmplY3Rvcihtb2R1bGVzVG9Mb2FkLCBzdHJpY3REaSkge1xuICBzdHJpY3REaSA9IChzdHJpY3REaSA9PT0gdHJ1ZSk7XG4gIHZhciBJTlNUQU5USUFUSU5HID0ge30sXG4gICAgICBwcm92aWRlclN1ZmZpeCA9ICdQcm92aWRlcicsXG4gICAgICBwYXRoID0gW10sXG4gICAgICBsb2FkZWRNb2R1bGVzID0gbmV3IEhhc2hNYXAoW10sIHRydWUpLFxuICAgICAgcHJvdmlkZXJDYWNoZSA9IHtcbiAgICAgICAgJHByb3ZpZGU6IHtcbiAgICAgICAgICAgIHByb3ZpZGVyOiBzdXBwb3J0T2JqZWN0KHByb3ZpZGVyKSxcbiAgICAgICAgICAgIGZhY3Rvcnk6IHN1cHBvcnRPYmplY3QoZmFjdG9yeSksXG4gICAgICAgICAgICBzZXJ2aWNlOiBzdXBwb3J0T2JqZWN0KHNlcnZpY2UpLFxuICAgICAgICAgICAgdmFsdWU6IHN1cHBvcnRPYmplY3QodmFsdWUpLFxuICAgICAgICAgICAgY29uc3RhbnQ6IHN1cHBvcnRPYmplY3QoY29uc3RhbnQpLFxuICAgICAgICAgICAgZGVjb3JhdG9yOiBkZWNvcmF0b3JcbiAgICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvdmlkZXJJbmplY3RvciA9IChwcm92aWRlckNhY2hlLiRpbmplY3RvciA9XG4gICAgICAgICAgY3JlYXRlSW50ZXJuYWxJbmplY3Rvcihwcm92aWRlckNhY2hlLCBmdW5jdGlvbihzZXJ2aWNlTmFtZSwgY2FsbGVyKSB7XG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyhjYWxsZXIpKSB7XG4gICAgICAgICAgICAgIHBhdGgucHVzaChjYWxsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCd1bnByJywgXCJVbmtub3duIHByb3ZpZGVyOiB7MH1cIiwgcGF0aC5qb2luKCcgPC0gJykpO1xuICAgICAgICAgIH0pKSxcbiAgICAgIGluc3RhbmNlQ2FjaGUgPSB7fSxcbiAgICAgIGluc3RhbmNlSW5qZWN0b3IgPSAoaW5zdGFuY2VDYWNoZS4kaW5qZWN0b3IgPVxuICAgICAgICAgIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoaW5zdGFuY2VDYWNoZSwgZnVuY3Rpb24oc2VydmljZU5hbWUsIGNhbGxlcikge1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoc2VydmljZU5hbWUgKyBwcm92aWRlclN1ZmZpeCwgY2FsbGVyKTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZUluamVjdG9yLmludm9rZShwcm92aWRlci4kZ2V0LCBwcm92aWRlciwgdW5kZWZpbmVkLCBzZXJ2aWNlTmFtZSk7XG4gICAgICAgICAgfSkpO1xuXG5cbiAgZm9yRWFjaChsb2FkTW9kdWxlcyhtb2R1bGVzVG9Mb2FkKSwgZnVuY3Rpb24oZm4pIHsgaW5zdGFuY2VJbmplY3Rvci5pbnZva2UoZm4gfHwgbm9vcCk7IH0pO1xuXG4gIHJldHVybiBpbnN0YW5jZUluamVjdG9yO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyAkcHJvdmlkZXJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZnVuY3Rpb24gc3VwcG9ydE9iamVjdChkZWxlZ2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoaXNPYmplY3Qoa2V5KSkge1xuICAgICAgICBmb3JFYWNoKGtleSwgcmV2ZXJzZVBhcmFtcyhkZWxlZ2F0ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlbGVnYXRlKGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBwcm92aWRlcihuYW1lLCBwcm92aWRlcl8pIHtcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnc2VydmljZScpO1xuICAgIGlmIChpc0Z1bmN0aW9uKHByb3ZpZGVyXykgfHwgaXNBcnJheShwcm92aWRlcl8pKSB7XG4gICAgICBwcm92aWRlcl8gPSBwcm92aWRlckluamVjdG9yLmluc3RhbnRpYXRlKHByb3ZpZGVyXyk7XG4gICAgfVxuICAgIGlmICghcHJvdmlkZXJfLiRnZXQpIHtcbiAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycigncGdldCcsIFwiUHJvdmlkZXIgJ3swfScgbXVzdCBkZWZpbmUgJGdldCBmYWN0b3J5IG1ldGhvZC5cIiwgbmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBwcm92aWRlckNhY2hlW25hbWUgKyBwcm92aWRlclN1ZmZpeF0gPSBwcm92aWRlcl87XG4gIH1cblxuICBmdW5jdGlvbiBlbmZvcmNlUmV0dXJuVmFsdWUobmFtZSwgZmFjdG9yeSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBlbmZvcmNlZFJldHVyblZhbHVlKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKGZhY3RvcnksIHRoaXMpO1xuICAgICAgaWYgKGlzVW5kZWZpbmVkKHJlc3VsdCkpIHtcbiAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCd1bmRlZicsIFwiUHJvdmlkZXIgJ3swfScgbXVzdCByZXR1cm4gYSB2YWx1ZSBmcm9tICRnZXQgZmFjdG9yeSBtZXRob2QuXCIsIG5hbWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gZmFjdG9yeShuYW1lLCBmYWN0b3J5Rm4sIGVuZm9yY2UpIHtcbiAgICByZXR1cm4gcHJvdmlkZXIobmFtZSwge1xuICAgICAgJGdldDogZW5mb3JjZSAhPT0gZmFsc2UgPyBlbmZvcmNlUmV0dXJuVmFsdWUobmFtZSwgZmFjdG9yeUZuKSA6IGZhY3RvcnlGblxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2VydmljZShuYW1lLCBjb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBmYWN0b3J5KG5hbWUsIFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgICByZXR1cm4gJGluamVjdG9yLmluc3RhbnRpYXRlKGNvbnN0cnVjdG9yKTtcbiAgICB9XSk7XG4gIH1cblxuICBmdW5jdGlvbiB2YWx1ZShuYW1lLCB2YWwpIHsgcmV0dXJuIGZhY3RvcnkobmFtZSwgdmFsdWVGbih2YWwpLCBmYWxzZSk7IH1cblxuICBmdW5jdGlvbiBjb25zdGFudChuYW1lLCB2YWx1ZSkge1xuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdjb25zdGFudCcpO1xuICAgIHByb3ZpZGVyQ2FjaGVbbmFtZV0gPSB2YWx1ZTtcbiAgICBpbnN0YW5jZUNhY2hlW25hbWVdID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBkZWNvcmF0b3Ioc2VydmljZU5hbWUsIGRlY29yRm4pIHtcbiAgICB2YXIgb3JpZ1Byb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoc2VydmljZU5hbWUgKyBwcm92aWRlclN1ZmZpeCksXG4gICAgICAgIG9yaWckZ2V0ID0gb3JpZ1Byb3ZpZGVyLiRnZXQ7XG5cbiAgICBvcmlnUHJvdmlkZXIuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9yaWdJbnN0YW5jZSA9IGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKG9yaWckZ2V0LCBvcmlnUHJvdmlkZXIpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKGRlY29yRm4sIG51bGwsIHskZGVsZWdhdGU6IG9yaWdJbnN0YW5jZX0pO1xuICAgIH07XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gTW9kdWxlIExvYWRpbmdcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGZ1bmN0aW9uIGxvYWRNb2R1bGVzKG1vZHVsZXNUb0xvYWQpIHtcbiAgICB2YXIgcnVuQmxvY2tzID0gW10sIG1vZHVsZUZuO1xuICAgIGZvckVhY2gobW9kdWxlc1RvTG9hZCwgZnVuY3Rpb24obW9kdWxlKSB7XG4gICAgICBpZiAobG9hZGVkTW9kdWxlcy5nZXQobW9kdWxlKSkgcmV0dXJuO1xuICAgICAgbG9hZGVkTW9kdWxlcy5wdXQobW9kdWxlLCB0cnVlKTtcblxuICAgICAgZnVuY3Rpb24gcnVuSW52b2tlUXVldWUocXVldWUpIHtcbiAgICAgICAgdmFyIGksIGlpO1xuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHF1ZXVlLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICB2YXIgaW52b2tlQXJncyA9IHF1ZXVlW2ldLFxuICAgICAgICAgICAgICBwcm92aWRlciA9IHByb3ZpZGVySW5qZWN0b3IuZ2V0KGludm9rZUFyZ3NbMF0pO1xuXG4gICAgICAgICAgcHJvdmlkZXJbaW52b2tlQXJnc1sxXV0uYXBwbHkocHJvdmlkZXIsIGludm9rZUFyZ3NbMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChpc1N0cmluZyhtb2R1bGUpKSB7XG4gICAgICAgICAgbW9kdWxlRm4gPSBhbmd1bGFyTW9kdWxlKG1vZHVsZSk7XG4gICAgICAgICAgcnVuQmxvY2tzID0gcnVuQmxvY2tzLmNvbmNhdChsb2FkTW9kdWxlcyhtb2R1bGVGbi5yZXF1aXJlcykpLmNvbmNhdChtb2R1bGVGbi5fcnVuQmxvY2tzKTtcbiAgICAgICAgICBydW5JbnZva2VRdWV1ZShtb2R1bGVGbi5faW52b2tlUXVldWUpO1xuICAgICAgICAgIHJ1bkludm9rZVF1ZXVlKG1vZHVsZUZuLl9jb25maWdCbG9ja3MpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24obW9kdWxlKSkge1xuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2gocHJvdmlkZXJJbmplY3Rvci5pbnZva2UobW9kdWxlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShtb2R1bGUpKSB7XG4gICAgICAgICAgICBydW5CbG9ja3MucHVzaChwcm92aWRlckluamVjdG9yLmludm9rZShtb2R1bGUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhc3NlcnRBcmdGbihtb2R1bGUsICdtb2R1bGUnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoaXNBcnJheShtb2R1bGUpKSB7XG4gICAgICAgICAgbW9kdWxlID0gbW9kdWxlW21vZHVsZS5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5tZXNzYWdlICYmIGUuc3RhY2sgJiYgZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSkgPT0gLTEpIHtcbiAgICAgICAgICAvLyBTYWZhcmkgJiBGRidzIHN0YWNrIHRyYWNlcyBkb24ndCBjb250YWluIGVycm9yLm1lc3NhZ2UgY29udGVudFxuICAgICAgICAgIC8vIHVubGlrZSB0aG9zZSBvZiBDaHJvbWUgYW5kIElFXG4gICAgICAgICAgLy8gU28gaWYgc3RhY2sgZG9lc24ndCBjb250YWluIG1lc3NhZ2UsIHdlIGNyZWF0ZSBhIG5ldyBzdHJpbmcgdGhhdCBjb250YWlucyBib3RoLlxuICAgICAgICAgIC8vIFNpbmNlIGVycm9yLnN0YWNrIGlzIHJlYWQtb25seSBpbiBTYWZhcmksIEknbSBvdmVycmlkaW5nIGUgYW5kIG5vdCBlLnN0YWNrIGhlcmUuXG4gICAgICAgICAgLyoganNoaW50IC1XMDIyICovXG4gICAgICAgICAgZSA9IGUubWVzc2FnZSArICdcXG4nICsgZS5zdGFjaztcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ21vZHVsZXJyJywgXCJGYWlsZWQgdG8gaW5zdGFudGlhdGUgbW9kdWxlIHswfSBkdWUgdG86XFxuezF9XCIsXG4gICAgICAgICAgICAgICAgICBtb2R1bGUsIGUuc3RhY2sgfHwgZS5tZXNzYWdlIHx8IGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBydW5CbG9ja3M7XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gaW50ZXJuYWwgSW5qZWN0b3JcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZnVuY3Rpb24gY3JlYXRlSW50ZXJuYWxJbmplY3RvcihjYWNoZSwgZmFjdG9yeSkge1xuXG4gICAgZnVuY3Rpb24gZ2V0U2VydmljZShzZXJ2aWNlTmFtZSwgY2FsbGVyKSB7XG4gICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoc2VydmljZU5hbWUpKSB7XG4gICAgICAgIGlmIChjYWNoZVtzZXJ2aWNlTmFtZV0gPT09IElOU1RBTlRJQVRJTkcpIHtcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2NkZXAnLCAnQ2lyY3VsYXIgZGVwZW5kZW5jeSBmb3VuZDogezB9JyxcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZU5hbWUgKyAnIDwtICcgKyBwYXRoLmpvaW4oJyA8LSAnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhY2hlW3NlcnZpY2VOYW1lXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcGF0aC51bnNoaWZ0KHNlcnZpY2VOYW1lKTtcbiAgICAgICAgICBjYWNoZVtzZXJ2aWNlTmFtZV0gPSBJTlNUQU5USUFUSU5HO1xuICAgICAgICAgIHJldHVybiBjYWNoZVtzZXJ2aWNlTmFtZV0gPSBmYWN0b3J5KHNlcnZpY2VOYW1lLCBjYWxsZXIpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBpZiAoY2FjaGVbc2VydmljZU5hbWVdID09PSBJTlNUQU5USUFUSU5HKSB7XG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbc2VydmljZU5hbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgcGF0aC5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW52b2tlKGZuLCBzZWxmLCBsb2NhbHMsIHNlcnZpY2VOYW1lKSB7XG4gICAgICBpZiAodHlwZW9mIGxvY2FscyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2VydmljZU5hbWUgPSBsb2NhbHM7XG4gICAgICAgIGxvY2FscyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBhcmdzID0gW10sXG4gICAgICAgICAgJGluamVjdCA9IGNyZWF0ZUluamVjdG9yLiQkYW5ub3RhdGUoZm4sIHN0cmljdERpLCBzZXJ2aWNlTmFtZSksXG4gICAgICAgICAgbGVuZ3RoLCBpLFxuICAgICAgICAgIGtleTtcblxuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gJGluamVjdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBrZXkgPSAkaW5qZWN0W2ldO1xuICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2l0a24nLFxuICAgICAgICAgICAgICAgICAgJ0luY29ycmVjdCBpbmplY3Rpb24gdG9rZW4hIEV4cGVjdGVkIHNlcnZpY2UgbmFtZSBhcyBzdHJpbmcsIGdvdCB7MH0nLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGFyZ3MucHVzaChcbiAgICAgICAgICBsb2NhbHMgJiYgbG9jYWxzLmhhc093blByb3BlcnR5KGtleSlcbiAgICAgICAgICA/IGxvY2Fsc1trZXldXG4gICAgICAgICAgOiBnZXRTZXJ2aWNlKGtleSwgc2VydmljZU5hbWUpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoaXNBcnJheShmbikpIHtcbiAgICAgICAgZm4gPSBmbltsZW5ndGhdO1xuICAgICAgfVxuXG4gICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9hbmd1bGFyanMtaW52b2tlLWFwcGx5LXZzLXN3aXRjaFxuICAgICAgLy8gIzUzODhcbiAgICAgIHJldHVybiBmbi5hcHBseShzZWxmLCBhcmdzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YW50aWF0ZShUeXBlLCBsb2NhbHMsIHNlcnZpY2VOYW1lKSB7XG4gICAgICAvLyBDaGVjayBpZiBUeXBlIGlzIGFubm90YXRlZCBhbmQgdXNlIGp1c3QgdGhlIGdpdmVuIGZ1bmN0aW9uIGF0IG4tMSBhcyBwYXJhbWV0ZXJcbiAgICAgIC8vIGUuZy4gc29tZU1vZHVsZS5mYWN0b3J5KCdncmVldGVyJywgWyckd2luZG93JywgZnVuY3Rpb24ocmVuYW1lZCR3aW5kb3cpIHt9XSk7XG4gICAgICAvLyBPYmplY3QgY3JlYXRpb246IGh0dHA6Ly9qc3BlcmYuY29tL2NyZWF0ZS1jb25zdHJ1Y3Rvci8yXG4gICAgICB2YXIgaW5zdGFuY2UgPSBPYmplY3QuY3JlYXRlKChpc0FycmF5KFR5cGUpID8gVHlwZVtUeXBlLmxlbmd0aCAtIDFdIDogVHlwZSkucHJvdG90eXBlIHx8IG51bGwpO1xuICAgICAgdmFyIHJldHVybmVkVmFsdWUgPSBpbnZva2UoVHlwZSwgaW5zdGFuY2UsIGxvY2Fscywgc2VydmljZU5hbWUpO1xuXG4gICAgICByZXR1cm4gaXNPYmplY3QocmV0dXJuZWRWYWx1ZSkgfHwgaXNGdW5jdGlvbihyZXR1cm5lZFZhbHVlKSA/IHJldHVybmVkVmFsdWUgOiBpbnN0YW5jZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaW52b2tlOiBpbnZva2UsXG4gICAgICBpbnN0YW50aWF0ZTogaW5zdGFudGlhdGUsXG4gICAgICBnZXQ6IGdldFNlcnZpY2UsXG4gICAgICBhbm5vdGF0ZTogY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSxcbiAgICAgIGhhczogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gcHJvdmlkZXJDYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lICsgcHJvdmlkZXJTdWZmaXgpIHx8IGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSA9IGFubm90YXRlO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuY2hvclNjcm9sbFByb3ZpZGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgYCRhbmNob3JTY3JvbGxQcm92aWRlcmAgdG8gZGlzYWJsZSBhdXRvbWF0aWMgc2Nyb2xsaW5nIHdoZW5ldmVyXG4gKiB7QGxpbmsgbmcuJGxvY2F0aW9uI2hhc2ggJGxvY2F0aW9uLmhhc2goKX0gY2hhbmdlcy5cbiAqL1xuZnVuY3Rpb24gJEFuY2hvclNjcm9sbFByb3ZpZGVyKCkge1xuXG4gIHZhciBhdXRvU2Nyb2xsaW5nRW5hYmxlZCA9IHRydWU7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFuY2hvclNjcm9sbFByb3ZpZGVyI2Rpc2FibGVBdXRvU2Nyb2xsaW5nXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBCeSBkZWZhdWx0LCB7QGxpbmsgbmcuJGFuY2hvclNjcm9sbCAkYW5jaG9yU2Nyb2xsKCl9IHdpbGwgYXV0b21hdGljYWxseSBkZXRlY3QgY2hhbmdlcyB0b1xuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uI2hhc2ggJGxvY2F0aW9uLmhhc2goKX0gYW5kIHNjcm9sbCB0byB0aGUgZWxlbWVudCBtYXRjaGluZyB0aGUgbmV3IGhhc2guPGJyIC8+XG4gICAqIFVzZSB0aGlzIG1ldGhvZCB0byBkaXNhYmxlIGF1dG9tYXRpYyBzY3JvbGxpbmcuXG4gICAqXG4gICAqIElmIGF1dG9tYXRpYyBzY3JvbGxpbmcgaXMgZGlzYWJsZWQsIG9uZSBtdXN0IGV4cGxpY2l0bHkgY2FsbFxuICAgKiB7QGxpbmsgbmcuJGFuY2hvclNjcm9sbCAkYW5jaG9yU2Nyb2xsKCl9IGluIG9yZGVyIHRvIHNjcm9sbCB0byB0aGUgZWxlbWVudCByZWxhdGVkIHRvIHRoZVxuICAgKiBjdXJyZW50IGhhc2guXG4gICAqL1xuICB0aGlzLmRpc2FibGVBdXRvU2Nyb2xsaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgYXV0b1Njcm9sbGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIHNlcnZpY2VcbiAgICogQG5hbWUgJGFuY2hvclNjcm9sbFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKiBAcmVxdWlyZXMgJHdpbmRvd1xuICAgKiBAcmVxdWlyZXMgJGxvY2F0aW9uXG4gICAqIEByZXF1aXJlcyAkcm9vdFNjb3BlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBXaGVuIGNhbGxlZCwgaXQgY2hlY2tzIHRoZSBjdXJyZW50IHZhbHVlIG9mIHtAbGluayBuZy4kbG9jYXRpb24jaGFzaCAkbG9jYXRpb24uaGFzaCgpfSBhbmRcbiAgICogc2Nyb2xscyB0byB0aGUgcmVsYXRlZCBlbGVtZW50LCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIHNwZWNpZmllZCBpbiB0aGVcbiAgICogW0h0bWw1IHNwZWNdKGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvT3ZlcnZpZXcuaHRtbCN0aGUtaW5kaWNhdGVkLXBhcnQtb2YtdGhlLWRvY3VtZW50KS5cbiAgICpcbiAgICogSXQgYWxzbyB3YXRjaGVzIHRoZSB7QGxpbmsgbmcuJGxvY2F0aW9uI2hhc2ggJGxvY2F0aW9uLmhhc2goKX0gYW5kIGF1dG9tYXRpY2FsbHkgc2Nyb2xscyB0b1xuICAgKiBtYXRjaCBhbnkgYW5jaG9yIHdoZW5ldmVyIGl0IGNoYW5nZXMuIFRoaXMgY2FuIGJlIGRpc2FibGVkIGJ5IGNhbGxpbmdcbiAgICoge0BsaW5rIG5nLiRhbmNob3JTY3JvbGxQcm92aWRlciNkaXNhYmxlQXV0b1Njcm9sbGluZyAkYW5jaG9yU2Nyb2xsUHJvdmlkZXIuZGlzYWJsZUF1dG9TY3JvbGxpbmcoKX0uXG4gICAqXG4gICAqIEFkZGl0aW9uYWxseSwgeW91IGNhbiB1c2UgaXRzIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsI3lPZmZzZXQgeU9mZnNldH0gcHJvcGVydHkgdG8gc3BlY2lmeSBhXG4gICAqIHZlcnRpY2FsIHNjcm9sbC1vZmZzZXQgKGVpdGhlciBmaXhlZCBvciBkeW5hbWljKS5cbiAgICpcbiAgICogQHByb3BlcnR5IHsobnVtYmVyfGZ1bmN0aW9ufGpxTGl0ZSl9IHlPZmZzZXRcbiAgICogSWYgc2V0LCBzcGVjaWZpZXMgYSB2ZXJ0aWNhbCBzY3JvbGwtb2Zmc2V0LiBUaGlzIGlzIG9mdGVuIHVzZWZ1bCB3aGVuIHRoZXJlIGFyZSBmaXhlZFxuICAgKiBwb3NpdGlvbmVkIGVsZW1lbnRzIGF0IHRoZSB0b3Agb2YgdGhlIHBhZ2UsIHN1Y2ggYXMgbmF2YmFycywgaGVhZGVycyBldGMuXG4gICAqXG4gICAqIGB5T2Zmc2V0YCBjYW4gYmUgc3BlY2lmaWVkIGluIHZhcmlvdXMgd2F5czpcbiAgICogLSAqKm51bWJlcioqOiBBIGZpeGVkIG51bWJlciBvZiBwaXhlbHMgdG8gYmUgdXNlZCBhcyBvZmZzZXQuPGJyIC8+PGJyIC8+XG4gICAqIC0gKipmdW5jdGlvbioqOiBBIGdldHRlciBmdW5jdGlvbiBjYWxsZWQgZXZlcnl0aW1lIGAkYW5jaG9yU2Nyb2xsKClgIGlzIGV4ZWN1dGVkLiBNdXN0IHJldHVyblxuICAgKiAgIGEgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgb2Zmc2V0IChpbiBwaXhlbHMpLjxiciAvPjxiciAvPlxuICAgKiAtICoqanFMaXRlKio6IEEganFMaXRlL2pRdWVyeSBlbGVtZW50IHRvIGJlIHVzZWQgZm9yIHNwZWNpZnlpbmcgdGhlIG9mZnNldC4gVGhlIGRpc3RhbmNlIGZyb21cbiAgICogICB0aGUgdG9wIG9mIHRoZSBwYWdlIHRvIHRoZSBlbGVtZW50J3MgYm90dG9tIHdpbGwgYmUgdXNlZCBhcyBvZmZzZXQuPGJyIC8+XG4gICAqICAgKipOb3RlKio6IFRoZSBlbGVtZW50IHdpbGwgYmUgdGFrZW4gaW50byBhY2NvdW50IG9ubHkgYXMgbG9uZyBhcyBpdHMgYHBvc2l0aW9uYCBpcyBzZXQgdG9cbiAgICogICBgZml4ZWRgLiBUaGlzIG9wdGlvbiBpcyB1c2VmdWwsIHdoZW4gZGVhbGluZyB3aXRoIHJlc3BvbnNpdmUgbmF2YmFycy9oZWFkZXJzIHRoYXQgYWRqdXN0XG4gICAqICAgdGhlaXIgaGVpZ2h0IGFuZC9vciBwb3NpdGlvbmluZyBhY2NvcmRpbmcgdG8gdGhlIHZpZXdwb3J0J3Mgc2l6ZS5cbiAgICpcbiAgICogPGJyIC8+XG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAqIEluIG9yZGVyIGZvciBgeU9mZnNldGAgdG8gd29yayBwcm9wZXJseSwgc2Nyb2xsaW5nIHNob3VsZCB0YWtlIHBsYWNlIG9uIHRoZSBkb2N1bWVudCdzIHJvb3QgYW5kXG4gICAqIG5vdCBzb21lIGNoaWxkIGVsZW1lbnQuXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgICA8ZXhhbXBsZSBtb2R1bGU9XCJhbmNob3JTY3JvbGxFeGFtcGxlXCI+XG4gICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxkaXYgaWQ9XCJzY3JvbGxBcmVhXCIgbmctY29udHJvbGxlcj1cIlNjcm9sbENvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgPGEgbmctY2xpY2s9XCJnb3RvQm90dG9tKClcIj5HbyB0byBib3R0b208L2E+XG4gICAgICAgICAgIDxhIGlkPVwiYm90dG9tXCI+PC9hPiBZb3UncmUgYXQgdGhlIGJvdHRvbSFcbiAgICAgICAgIDwvZGl2PlxuICAgICAgIDwvZmlsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnYW5jaG9yU2Nyb2xsRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignU2Nyb2xsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJyxcbiAgICAgICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sICRhbmNob3JTY3JvbGwpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5nb3RvQm90dG9tID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgbG9jYXRpb24uaGFzaCB0byB0aGUgaWQgb2ZcbiAgICAgICAgICAgICAgICAgLy8gdGhlIGVsZW1lbnQgeW91IHdpc2ggdG8gc2Nyb2xsIHRvLlxuICAgICAgICAgICAgICAgICAkbG9jYXRpb24uaGFzaCgnYm90dG9tJyk7XG5cbiAgICAgICAgICAgICAgICAgLy8gY2FsbCAkYW5jaG9yU2Nyb2xsKClcbiAgICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICB9XSk7XG4gICAgICAgPC9maWxlPlxuICAgICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAgICNzY3JvbGxBcmVhIHtcbiAgICAgICAgICAgaGVpZ2h0OiAyODBweDtcbiAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICB9XG5cbiAgICAgICAgICNib3R0b20ge1xuICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgbWFyZ2luLXRvcDogMjAwMHB4O1xuICAgICAgICAgfVxuICAgICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICAgKlxuICAgKiA8aHIgLz5cbiAgICogVGhlIGV4YW1wbGUgYmVsb3cgaWxsdXN0cmF0ZXMgdGhlIHVzZSBvZiBhIHZlcnRpY2FsIHNjcm9sbC1vZmZzZXQgKHNwZWNpZmllZCBhcyBhIGZpeGVkIHZhbHVlKS5cbiAgICogU2VlIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsI3lPZmZzZXQgJGFuY2hvclNjcm9sbC55T2Zmc2V0fSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgICA8ZXhhbXBsZSBtb2R1bGU9XCJhbmNob3JTY3JvbGxPZmZzZXRFeGFtcGxlXCI+XG4gICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJmaXhlZC1oZWFkZXJcIiBuZy1jb250cm9sbGVyPVwiaGVhZGVyQ3RybFwiPlxuICAgICAgICAgICA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJnb3RvQW5jaG9yKHgpXCIgbmctcmVwZWF0PVwieCBpbiBbMSwyLDMsNCw1XVwiPlxuICAgICAgICAgICAgIEdvIHRvIGFuY2hvciB7e3h9fVxuICAgICAgICAgICA8L2E+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxkaXYgaWQ9XCJhbmNob3J7e3h9fVwiIGNsYXNzPVwiYW5jaG9yXCIgbmctcmVwZWF0PVwieCBpbiBbMSwyLDMsNCw1XVwiPlxuICAgICAgICAgICBBbmNob3Ige3t4fX0gb2YgNVxuICAgICAgICAgPC9kaXY+XG4gICAgICAgPC9maWxlPlxuICAgICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdhbmNob3JTY3JvbGxPZmZzZXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5ydW4oWyckYW5jaG9yU2Nyb2xsJywgZnVuY3Rpb24oJGFuY2hvclNjcm9sbCkge1xuICAgICAgICAgICAgICRhbmNob3JTY3JvbGwueU9mZnNldCA9IDUwOyAgIC8vIGFsd2F5cyBzY3JvbGwgYnkgNTAgZXh0cmEgcGl4ZWxzXG4gICAgICAgICAgIH1dKVxuICAgICAgICAgICAuY29udHJvbGxlcignaGVhZGVyQ3RybCcsIFsnJGFuY2hvclNjcm9sbCcsICckbG9jYXRpb24nLCAnJHNjb3BlJyxcbiAgICAgICAgICAgICBmdW5jdGlvbiAoJGFuY2hvclNjcm9sbCwgJGxvY2F0aW9uLCAkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5nb3RvQW5jaG9yID0gZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgICB2YXIgbmV3SGFzaCA9ICdhbmNob3InICsgeDtcbiAgICAgICAgICAgICAgICAgaWYgKCRsb2NhdGlvbi5oYXNoKCkgIT09IG5ld0hhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlICRsb2NhdGlvbi5oYXNoIHRvIGBuZXdIYXNoYCBhbmRcbiAgICAgICAgICAgICAgICAgICAvLyAkYW5jaG9yU2Nyb2xsIHdpbGwgYXV0b21hdGljYWxseSBzY3JvbGwgdG8gaXRcbiAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24uaGFzaCgnYW5jaG9yJyArIHgpO1xuICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgJGFuY2hvclNjcm9sbCgpIGV4cGxpY2l0bHksXG4gICAgICAgICAgICAgICAgICAgLy8gc2luY2UgJGxvY2F0aW9uLmhhc2ggaGFzbid0IGNoYW5nZWRcbiAgICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICBdKTtcbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgICAgYm9keSB7XG4gICAgICAgICAgIHBhZGRpbmctdG9wOiA1MHB4O1xuICAgICAgICAgfVxuXG4gICAgICAgICAuYW5jaG9yIHtcbiAgICAgICAgICAgYm9yZGVyOiAycHggZGFzaGVkIERhcmtPcmNoaWQ7XG4gICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTBweCAyMDBweCAxMHB4O1xuICAgICAgICAgfVxuXG4gICAgICAgICAuZml4ZWQtaGVhZGVyIHtcbiAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgICAgICBoZWlnaHQ6IDUwcHg7XG4gICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDtcbiAgICAgICAgIH1cblxuICAgICAgICAgLmZpeGVkLWhlYWRlciA+IGEge1xuICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgIG1hcmdpbjogNXB4IDE1cHg7XG4gICAgICAgICB9XG4gICAgICAgPC9maWxlPlxuICAgICA8L2V4YW1wbGU+XG4gICAqL1xuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkd2luZG93LCAkbG9jYXRpb24sICRyb290U2NvcGUpIHtcbiAgICB2YXIgZG9jdW1lbnQgPSAkd2luZG93LmRvY3VtZW50O1xuXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBmaXJzdCBhbmNob3IgZnJvbSBhIE5vZGVMaXN0XG4gICAgLy8gKHVzaW5nIGBBcnJheSNzb21lKClgIGluc3RlYWQgb2YgYGFuZ3VsYXIjZm9yRWFjaCgpYCBzaW5jZSBpdCdzIG1vcmUgcGVyZm9ybWFudFxuICAgIC8vICBhbmQgd29ya2luZyBpbiBhbGwgc3VwcG9ydGVkIGJyb3dzZXJzLilcbiAgICBmdW5jdGlvbiBnZXRGaXJzdEFuY2hvcihsaXN0KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbnVsbDtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwobGlzdCwgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBpZiAobm9kZU5hbWVfKGVsZW1lbnQpID09PSAnYScpIHtcbiAgICAgICAgICByZXN1bHQgPSBlbGVtZW50O1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0WU9mZnNldCgpIHtcblxuICAgICAgdmFyIG9mZnNldCA9IHNjcm9sbC55T2Zmc2V0O1xuXG4gICAgICBpZiAoaXNGdW5jdGlvbihvZmZzZXQpKSB7XG4gICAgICAgIG9mZnNldCA9IG9mZnNldCgpO1xuICAgICAgfSBlbHNlIGlmIChpc0VsZW1lbnQob2Zmc2V0KSkge1xuICAgICAgICB2YXIgZWxlbSA9IG9mZnNldFswXTtcbiAgICAgICAgdmFyIHN0eWxlID0gJHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW0pO1xuICAgICAgICBpZiAoc3R5bGUucG9zaXRpb24gIT09ICdmaXhlZCcpIHtcbiAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFpc051bWJlcihvZmZzZXQpKSB7XG4gICAgICAgIG9mZnNldCA9IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2Nyb2xsVG8oZWxlbSkge1xuICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgZWxlbS5zY3JvbGxJbnRvVmlldygpO1xuXG4gICAgICAgIHZhciBvZmZzZXQgPSBnZXRZT2Zmc2V0KCk7XG5cbiAgICAgICAgaWYgKG9mZnNldCkge1xuICAgICAgICAgIC8vIGBvZmZzZXRgIGlzIHRoZSBudW1iZXIgb2YgcGl4ZWxzIHdlIHNob3VsZCBzY3JvbGwgVVAgaW4gb3JkZXIgdG8gYWxpZ24gYGVsZW1gIHByb3Blcmx5LlxuICAgICAgICAgIC8vIFRoaXMgaXMgdHJ1ZSBPTkxZIGlmIHRoZSBjYWxsIHRvIGBlbGVtLnNjcm9sbEludG9WaWV3KClgIGluaXRpYWxseSBhbGlnbnMgYGVsZW1gIGF0IHRoZVxuICAgICAgICAgIC8vIHRvcCBvZiB0aGUgdmlld3BvcnQuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBJRiB0aGUgbnVtYmVyIG9mIHBpeGVscyBmcm9tIHRoZSB0b3Agb2YgYGVsZW1gIHRvIHRoZSBlbmQgb2YgdGhlIHBhZ2UncyBjb250ZW50IGlzIGxlc3NcbiAgICAgICAgICAvLyB0aGFuIHRoZSBoZWlnaHQgb2YgdGhlIHZpZXdwb3J0LCB0aGVuIGBlbGVtLnNjcm9sbEludG9WaWV3KClgIHdpbGwgYWxpZ24gdGhlIGBlbGVtYCBzb21lXG4gICAgICAgICAgLy8gd2F5IGRvd24gdGhlIHBhZ2UuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBUaGlzIGlzIG9mdGVuIHRoZSBjYXNlIGZvciBlbGVtZW50cyBuZWFyIHRoZSBib3R0b20gb2YgdGhlIHBhZ2UuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBJbiBzdWNoIGNhc2VzIHdlIGRvIG5vdCBuZWVkIHRvIHNjcm9sbCB0aGUgd2hvbGUgYG9mZnNldGAgdXAsIGp1c3QgdGhlIGRpZmZlcmVuY2UgYmV0d2VlblxuICAgICAgICAgIC8vIHRoZSB0b3Agb2YgdGhlIGVsZW1lbnQgYW5kIHRoZSBvZmZzZXQsIHdoaWNoIGlzIGVub3VnaCB0byBhbGlnbiB0aGUgdG9wIG9mIGBlbGVtYCBhdCB0aGVcbiAgICAgICAgICAvLyBkZXNpcmVkIHBvc2l0aW9uLlxuICAgICAgICAgIHZhciBlbGVtVG9wID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgJHdpbmRvdy5zY3JvbGxCeSgwLCBlbGVtVG9wIC0gb2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY3JvbGwoKSB7XG4gICAgICB2YXIgaGFzaCA9ICRsb2NhdGlvbi5oYXNoKCksIGVsbTtcblxuICAgICAgLy8gZW1wdHkgaGFzaCwgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgIGlmICghaGFzaCkgc2Nyb2xsVG8obnVsbCk7XG5cbiAgICAgIC8vIGVsZW1lbnQgd2l0aCBnaXZlbiBpZFxuICAgICAgZWxzZSBpZiAoKGVsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhhc2gpKSkgc2Nyb2xsVG8oZWxtKTtcblxuICAgICAgLy8gZmlyc3QgYW5jaG9yIHdpdGggZ2l2ZW4gbmFtZSA6LURcbiAgICAgIGVsc2UgaWYgKChlbG0gPSBnZXRGaXJzdEFuY2hvcihkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShoYXNoKSkpKSBzY3JvbGxUbyhlbG0pO1xuXG4gICAgICAvLyBubyBlbGVtZW50IGFuZCBoYXNoID09ICd0b3AnLCBzY3JvbGwgdG8gdGhlIHRvcCBvZiB0aGUgcGFnZVxuICAgICAgZWxzZSBpZiAoaGFzaCA9PT0gJ3RvcCcpIHNjcm9sbFRvKG51bGwpO1xuICAgIH1cblxuICAgIC8vIGRvZXMgbm90IHNjcm9sbCB3aGVuIHVzZXIgY2xpY2tzIG9uIGFuY2hvciBsaW5rIHRoYXQgaXMgY3VycmVudGx5IG9uXG4gICAgLy8gKG5vIHVybCBjaGFuZ2UsIG5vICRsb2NhdGlvbi5oYXNoKCkgY2hhbmdlKSwgYnJvd3NlciBuYXRpdmUgZG9lcyBzY3JvbGxcbiAgICBpZiAoYXV0b1Njcm9sbGluZ0VuYWJsZWQpIHtcbiAgICAgICRyb290U2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGF1dG9TY3JvbGxXYXRjaCgpIHtyZXR1cm4gJGxvY2F0aW9uLmhhc2goKTt9LFxuICAgICAgICBmdW5jdGlvbiBhdXRvU2Nyb2xsV2F0Y2hBY3Rpb24obmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgICAvLyBza2lwIHRoZSBpbml0aWFsIHNjcm9sbCBpZiAkbG9jYXRpb24uaGFzaCBpcyBlbXB0eVxuICAgICAgICAgIGlmIChuZXdWYWwgPT09IG9sZFZhbCAmJiBuZXdWYWwgPT09ICcnKSByZXR1cm47XG5cbiAgICAgICAgICBqcUxpdGVEb2N1bWVudExvYWRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhzY3JvbGwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2Nyb2xsO1xuICB9XTtcbn1cblxudmFyICRhbmltYXRlTWluRXJyID0gbWluRXJyKCckYW5pbWF0ZScpO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuaW1hdGVQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiAkYW5pbWF0ZSB0aGF0IGRvZXNuJ3QgcGVyZm9ybSBhbnkgYW5pbWF0aW9ucywgaW5zdGVhZCBqdXN0XG4gKiBzeW5jaHJvbm91c2x5IHBlcmZvcm1zIERPTVxuICogdXBkYXRlcyBhbmQgY2FsbHMgZG9uZSgpIGNhbGxiYWNrcy5cbiAqXG4gKiBJbiBvcmRlciB0byBlbmFibGUgYW5pbWF0aW9ucyB0aGUgbmdBbmltYXRlIG1vZHVsZSBoYXMgdG8gYmUgbG9hZGVkLlxuICpcbiAqIFRvIHNlZSB0aGUgZnVuY3Rpb25hbCBpbXBsZW1lbnRhdGlvbiBjaGVjayBvdXQgc3JjL25nQW5pbWF0ZS9hbmltYXRlLmpzXG4gKi9cbnZhciAkQW5pbWF0ZVByb3ZpZGVyID0gWyckcHJvdmlkZScsIGZ1bmN0aW9uKCRwcm92aWRlKSB7XG5cblxuICB0aGlzLiQkc2VsZWN0b3JzID0ge307XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI3JlZ2lzdGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZWdpc3RlcnMgYSBuZXcgaW5qZWN0YWJsZSBhbmltYXRpb24gZmFjdG9yeSBmdW5jdGlvbi4gVGhlIGZhY3RvcnkgZnVuY3Rpb24gcHJvZHVjZXMgdGhlXG4gICAqIGFuaW1hdGlvbiBvYmplY3Qgd2hpY2ggY29udGFpbnMgY2FsbGJhY2sgZnVuY3Rpb25zIGZvciBlYWNoIGV2ZW50IHRoYXQgaXMgZXhwZWN0ZWQgdG8gYmVcbiAgICogYW5pbWF0ZWQuXG4gICAqXG4gICAqICAgKiBgZXZlbnRGbmA6IGBmdW5jdGlvbihFbGVtZW50LCBkb25lRnVuY3Rpb24pYCBUaGUgZWxlbWVudCB0byBhbmltYXRlLCB0aGUgYGRvbmVGdW5jdGlvbmBcbiAgICogICBtdXN0IGJlIGNhbGxlZCBvbmNlIHRoZSBlbGVtZW50IGFuaW1hdGlvbiBpcyBjb21wbGV0ZS4gSWYgYSBmdW5jdGlvbiBpcyByZXR1cm5lZCB0aGVuIHRoZVxuICAgKiAgIGFuaW1hdGlvbiBzZXJ2aWNlIHdpbGwgdXNlIHRoaXMgZnVuY3Rpb24gdG8gY2FuY2VsIHRoZSBhbmltYXRpb24gd2hlbmV2ZXIgYSBjYW5jZWwgZXZlbnQgaXNcbiAgICogICB0cmlnZ2VyZWQuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqICAgcmV0dXJuIHtcbiAgICAgKiAgICAgZXZlbnRGbiA6IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHtcbiAgICAgKiAgICAgICAvL2NvZGUgdG8gcnVuIHRoZSBhbmltYXRpb25cbiAgICAgKiAgICAgICAvL29uY2UgY29tcGxldGUsIHRoZW4gcnVuIGRvbmUoKVxuICAgICAqICAgICAgIHJldHVybiBmdW5jdGlvbiBjYW5jZWxsYXRpb25GdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICAgIC8vY29kZSB0byBjYW5jZWwgdGhlIGFuaW1hdGlvblxuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGFuaW1hdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeSBUaGUgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcmV0dXJuIHRoZSBhbmltYXRpb25cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuXG4gICAqL1xuICB0aGlzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSwgZmFjdG9yeSkge1xuICAgIHZhciBrZXkgPSBuYW1lICsgJy1hbmltYXRpb24nO1xuICAgIGlmIChuYW1lICYmIG5hbWUuY2hhckF0KDApICE9ICcuJykgdGhyb3cgJGFuaW1hdGVNaW5FcnIoJ25vdGNzZWwnLFxuICAgICAgICBcIkV4cGVjdGluZyBjbGFzcyBzZWxlY3RvciBzdGFydGluZyB3aXRoICcuJyBnb3QgJ3swfScuXCIsIG5hbWUpO1xuICAgIHRoaXMuJCRzZWxlY3RvcnNbbmFtZS5zdWJzdHIoMSldID0ga2V5O1xuICAgICRwcm92aWRlLmZhY3Rvcnkoa2V5LCBmYWN0b3J5KTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI2NsYXNzTmFtZUZpbHRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyBhbmQvb3IgcmV0dXJucyB0aGUgQ1NTIGNsYXNzIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIGNoZWNrZWQgd2hlbiBwZXJmb3JtaW5nXG4gICAqIGFuIGFuaW1hdGlvbi4gVXBvbiBib290c3RyYXAgdGhlIGNsYXNzTmFtZUZpbHRlciB2YWx1ZSBpcyBub3Qgc2V0IGF0IGFsbCBhbmQgd2lsbFxuICAgKiB0aGVyZWZvcmUgZW5hYmxlICRhbmltYXRlIHRvIGF0dGVtcHQgdG8gcGVyZm9ybSBhbiBhbmltYXRpb24gb24gYW55IGVsZW1lbnQuXG4gICAqIFdoZW4gc2V0dGluZyB0aGUgY2xhc3NOYW1lRmlsdGVyIHZhbHVlLCBhbmltYXRpb25zIHdpbGwgb25seSBiZSBwZXJmb3JtZWQgb24gZWxlbWVudHNcbiAgICogdGhhdCBzdWNjZXNzZnVsbHkgbWF0Y2ggdGhlIGZpbHRlciBleHByZXNzaW9uLiBUaGlzIGluIHR1cm4gY2FuIGJvb3N0IHBlcmZvcm1hbmNlXG4gICAqIGZvciBsb3ctcG93ZXJlZCBkZXZpY2VzIGFzIHdlbGwgYXMgYXBwbGljYXRpb25zIGNvbnRhaW5pbmcgYSBsb3Qgb2Ygc3RydWN0dXJhbCBvcGVyYXRpb25zLlxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IGV4cHJlc3Npb24gVGhlIGNsYXNzTmFtZSBleHByZXNzaW9uIHdoaWNoIHdpbGwgYmUgY2hlY2tlZCBhZ2FpbnN0IGFsbCBhbmltYXRpb25zXG4gICAqIEByZXR1cm4ge1JlZ0V4cH0gVGhlIGN1cnJlbnQgQ1NTIGNsYXNzTmFtZSBleHByZXNzaW9uIHZhbHVlLiBJZiBudWxsIHRoZW4gdGhlcmUgaXMgbm8gZXhwcmVzc2lvbiB2YWx1ZVxuICAgKi9cbiAgdGhpcy5jbGFzc05hbWVGaWx0ZXIgPSBmdW5jdGlvbihleHByZXNzaW9uKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHRoaXMuJCRjbGFzc05hbWVGaWx0ZXIgPSAoZXhwcmVzc2lvbiBpbnN0YW5jZW9mIFJlZ0V4cCkgPyBleHByZXNzaW9uIDogbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuJCRjbGFzc05hbWVGaWx0ZXI7XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gWyckJHEnLCAnJCRhc3luY0NhbGxiYWNrJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkJHEsICQkYXN5bmNDYWxsYmFjaywgJHJvb3RTY29wZSkge1xuXG4gICAgdmFyIGN1cnJlbnREZWZlcjtcblxuICAgIGZ1bmN0aW9uIHJ1bkFuaW1hdGlvblBvc3REaWdlc3QoZm4pIHtcbiAgICAgIHZhciBjYW5jZWxGbiwgZGVmZXIgPSAkJHEuZGVmZXIoKTtcbiAgICAgIGRlZmVyLnByb21pc2UuJCRjYW5jZWxGbiA9IGZ1bmN0aW9uIG5nQW5pbWF0ZU1heWJlQ2FuY2VsKCkge1xuICAgICAgICBjYW5jZWxGbiAmJiBjYW5jZWxGbigpO1xuICAgICAgfTtcblxuICAgICAgJHJvb3RTY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24gbmdBbmltYXRlUG9zdERpZ2VzdCgpIHtcbiAgICAgICAgY2FuY2VsRm4gPSBmbihmdW5jdGlvbiBuZ0FuaW1hdGVOb3RpZnlDb21wbGV0ZSgpIHtcbiAgICAgICAgICBkZWZlci5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmVFbGVtZW50Q2xhc3NlcyhlbGVtZW50LCBjbGFzc2VzKSB7XG4gICAgICB2YXIgdG9BZGQgPSBbXSwgdG9SZW1vdmUgPSBbXTtcblxuICAgICAgdmFyIGhhc0NsYXNzZXMgPSBjcmVhdGVNYXAoKTtcbiAgICAgIGZvckVhY2goKGVsZW1lbnQuYXR0cignY2xhc3MnKSB8fCAnJykuc3BsaXQoL1xccysvKSwgZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gICAgICAgIGhhc0NsYXNzZXNbY2xhc3NOYW1lXSA9IHRydWU7XG4gICAgICB9KTtcblxuICAgICAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbihzdGF0dXMsIGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgaGFzQ2xhc3MgPSBoYXNDbGFzc2VzW2NsYXNzTmFtZV07XG5cbiAgICAgICAgLy8gSWYgdGhlIG1vc3QgcmVjZW50IGNsYXNzIG1hbmlwdWxhdGlvbiAodmlhICRhbmltYXRlKSB3YXMgdG8gcmVtb3ZlIHRoZSBjbGFzcywgYW5kIHRoZVxuICAgICAgICAvLyBlbGVtZW50IGN1cnJlbnRseSBoYXMgdGhlIGNsYXNzLCB0aGUgY2xhc3MgaXMgc2NoZWR1bGVkIGZvciByZW1vdmFsLiBPdGhlcndpc2UsIGlmXG4gICAgICAgIC8vIHRoZSBtb3N0IHJlY2VudCBjbGFzcyBtYW5pcHVsYXRpb24gKHZpYSAkYW5pbWF0ZSkgd2FzIHRvIGFkZCB0aGUgY2xhc3MsIGFuZCB0aGVcbiAgICAgICAgLy8gZWxlbWVudCBkb2VzIG5vdCBjdXJyZW50bHkgaGF2ZSB0aGUgY2xhc3MsIHRoZSBjbGFzcyBpcyBzY2hlZHVsZWQgdG8gYmUgYWRkZWQuXG4gICAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlICYmIGhhc0NsYXNzKSB7XG4gICAgICAgICAgdG9SZW1vdmUucHVzaChjbGFzc05hbWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gdHJ1ZSAmJiAhaGFzQ2xhc3MpIHtcbiAgICAgICAgICB0b0FkZC5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gKHRvQWRkLmxlbmd0aCArIHRvUmVtb3ZlLmxlbmd0aCkgPiAwICYmXG4gICAgICAgIFt0b0FkZC5sZW5ndGggPyB0b0FkZCA6IG51bGwsIHRvUmVtb3ZlLmxlbmd0aCA/IHRvUmVtb3ZlIDogbnVsbF07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FjaGVkQ2xhc3NNYW5pcHVsYXRpb24oY2FjaGUsIGNsYXNzZXMsIG9wKSB7XG4gICAgICBmb3IgKHZhciBpPTAsIGlpID0gY2xhc3Nlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc2VzW2ldO1xuICAgICAgICBjYWNoZVtjbGFzc05hbWVdID0gb3A7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXN5bmNQcm9taXNlKCkge1xuICAgICAgLy8gb25seSBzZXJ2ZSBvbmUgaW5zdGFuY2Ugb2YgYSBwcm9taXNlIGluIG9yZGVyIHRvIHNhdmUgQ1BVIGN5Y2xlc1xuICAgICAgaWYgKCFjdXJyZW50RGVmZXIpIHtcbiAgICAgICAgY3VycmVudERlZmVyID0gJCRxLmRlZmVyKCk7XG4gICAgICAgICQkYXN5bmNDYWxsYmFjayhmdW5jdGlvbigpIHtcbiAgICAgICAgICBjdXJyZW50RGVmZXIucmVzb2x2ZSgpO1xuICAgICAgICAgIGN1cnJlbnREZWZlciA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJlbnREZWZlci5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFwcGx5U3R5bGVzKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIHZhciBzdHlsZXMgPSBleHRlbmQob3B0aW9ucy5mcm9tIHx8IHt9LCBvcHRpb25zLnRvIHx8IHt9KTtcbiAgICAgICAgZWxlbWVudC5jc3Moc3R5bGVzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJGFuaW1hdGVcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlICRhbmltYXRlIHNlcnZpY2UgcHJvdmlkZXMgcnVkaW1lbnRhcnkgRE9NIG1hbmlwdWxhdGlvbiBmdW5jdGlvbnMgdG9cbiAgICAgKiBpbnNlcnQsIHJlbW92ZSBhbmQgbW92ZSBlbGVtZW50cyB3aXRoaW4gdGhlIERPTSwgYXMgd2VsbCBhcyBhZGRpbmcgYW5kIHJlbW92aW5nIGNsYXNzZXMuXG4gICAgICogVGhpcyBzZXJ2aWNlIGlzIHRoZSBjb3JlIHNlcnZpY2UgdXNlZCBieSB0aGUgbmdBbmltYXRlICRhbmltYXRvciBzZXJ2aWNlIHdoaWNoIHByb3ZpZGVzXG4gICAgICogaGlnaC1sZXZlbCBhbmltYXRpb24gaG9va3MgZm9yIENTUyBhbmQgSmF2YVNjcmlwdC5cbiAgICAgKlxuICAgICAqICRhbmltYXRlIGlzIGF2YWlsYWJsZSBpbiB0aGUgQW5ndWxhckpTIGNvcmUsIGhvd2V2ZXIsIHRoZSBuZ0FuaW1hdGUgbW9kdWxlIG11c3QgYmUgaW5jbHVkZWRcbiAgICAgKiB0byBlbmFibGUgZnVsbCBvdXQgYW5pbWF0aW9uIHN1cHBvcnQuIE90aGVyd2lzZSwgJGFuaW1hdGUgd2lsbCBvbmx5IHBlcmZvcm0gc2ltcGxlIERPTVxuICAgICAqIG1hbmlwdWxhdGlvbiBvcGVyYXRpb25zLlxuICAgICAqXG4gICAgICogVG8gbGVhcm4gbW9yZSBhYm91dCBlbmFibGluZyBhbmltYXRpb24gc3VwcG9ydCwgY2xpY2sgaGVyZSB0byB2aXNpdCB0aGUge0BsaW5rIG5nQW5pbWF0ZVxuICAgICAqIG5nQW5pbWF0ZSBtb2R1bGUgcGFnZX0gYXMgd2VsbCBhcyB0aGUge0BsaW5rIG5nQW5pbWF0ZS4kYW5pbWF0ZSBuZ0FuaW1hdGUgJGFuaW1hdGUgc2VydmljZVxuICAgICAqIHBhZ2V9LlxuICAgICAqL1xuICAgIHJldHVybiB7XG4gICAgICBhbmltYXRlOiBmdW5jdGlvbihlbGVtZW50LCBmcm9tLCB0bykge1xuICAgICAgICBhcHBseVN0eWxlcyhlbGVtZW50LCB7IGZyb206IGZyb20sIHRvOiB0byB9KTtcbiAgICAgICAgcmV0dXJuIGFzeW5jUHJvbWlzZSgpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjZW50ZXJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gSW5zZXJ0cyB0aGUgZWxlbWVudCBpbnRvIHRoZSBET00gZWl0aGVyIGFmdGVyIHRoZSBgYWZ0ZXJgIGVsZW1lbnQgb3JcbiAgICAgICAqIGFzIHRoZSBmaXJzdCBjaGlsZCB3aXRoaW4gdGhlIGBwYXJlbnRgIGVsZW1lbnQuIFdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhIHByb21pc2VcbiAgICAgICAqIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBhdCBhIGxhdGVyIHRpbWUuXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET01cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCB3aGljaCB3aWxsIGFwcGVuZCB0aGUgZWxlbWVudCBhc1xuICAgICAgICogICBhIGNoaWxkIChpZiB0aGUgYWZ0ZXIgZWxlbWVudCBpcyBub3QgcHJlc2VudClcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gYWZ0ZXIgdGhlIHNpYmxpbmcgZWxlbWVudCB3aGljaCB3aWxsIGFwcGVuZCB0aGUgZWxlbWVudFxuICAgICAgICogICBhZnRlciBpdHNlbGZcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIHN0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxuICAgICAgICovXG4gICAgICBlbnRlcjogZnVuY3Rpb24oZWxlbWVudCwgcGFyZW50LCBhZnRlciwgb3B0aW9ucykge1xuICAgICAgICBhcHBseVN0eWxlcyhlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgYWZ0ZXIgPyBhZnRlci5hZnRlcihlbGVtZW50KVxuICAgICAgICAgICAgICA6IHBhcmVudC5wcmVwZW5kKGVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gYXN5bmNQcm9taXNlKCk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNsZWF2ZVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIERPTS4gV2hlbiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIGEgcHJvbWlzZVxuICAgICAgICogaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGF0IGEgbGF0ZXIgdGltZS5cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgRE9NXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXG4gICAgICAgKi9cbiAgICAgIGxlYXZlOiBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIHJldHVybiBhc3luY1Byb21pc2UoKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICpcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI21vdmVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gTW92ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBwcm92aWRlZCBlbGVtZW50IHdpdGhpbiB0aGUgRE9NIHRvIGJlIHBsYWNlZFxuICAgICAgICogZWl0aGVyIGFmdGVyIHRoZSBgYWZ0ZXJgIGVsZW1lbnQgb3IgaW5zaWRlIG9mIHRoZSBgcGFyZW50YCBlbGVtZW50LiBXaGVuIHRoZSBmdW5jdGlvblxuICAgICAgICogaXMgY2FsbGVkIGEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgYXQgYSBsYXRlciB0aW1lLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIG1vdmVkIGFyb3VuZCB3aXRoaW4gdGhlXG4gICAgICAgKiAgIERPTVxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBwYXJlbnQgdGhlIHBhcmVudCBlbGVtZW50IHdoZXJlIHRoZSBlbGVtZW50IHdpbGwgYmVcbiAgICAgICAqICAgaW5zZXJ0ZWQgaW50byAoaWYgdGhlIGFmdGVyIGVsZW1lbnQgaXMgbm90IHByZXNlbnQpXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGFmdGVyIHRoZSBzaWJsaW5nIGVsZW1lbnQgd2hlcmUgdGhlIGVsZW1lbnQgd2lsbCBiZVxuICAgICAgICogICBwb3NpdGlvbmVkIG5leHQgdG9cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAqL1xuICAgICAgbW92ZTogZnVuY3Rpb24oZWxlbWVudCwgcGFyZW50LCBhZnRlciwgb3B0aW9ucykge1xuICAgICAgICAvLyBEbyBub3QgcmVtb3ZlIGVsZW1lbnQgYmVmb3JlIGluc2VydC4gUmVtb3Zpbmcgd2lsbCBjYXVzZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgICAgLy8gZWxlbWVudCB0byBiZSBkcm9wcGVkLiBJbnNlcnQgd2lsbCBpbXBsaWNpdGx5IGRvIHRoZSByZW1vdmUuXG4gICAgICAgIHJldHVybiB0aGlzLmVudGVyKGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIsIG9wdGlvbnMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjYWRkQ2xhc3NcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gQWRkcyB0aGUgcHJvdmlkZWQgY2xhc3NOYW1lIENTUyBjbGFzcyB2YWx1ZSB0byB0aGUgcHJvdmlkZWQgZWxlbWVudC5cbiAgICAgICAqIFdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhIHByb21pc2UgaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGF0IGEgbGF0ZXIgdGltZS5cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGhhdmUgdGhlIGNsYXNzTmFtZSB2YWx1ZVxuICAgICAgICogICBhZGRlZCB0byBpdFxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSB0aGUgQ1NTIGNsYXNzIHdoaWNoIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAqL1xuICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUsIFtdLCBvcHRpb25zKTtcbiAgICAgIH0sXG5cbiAgICAgICQkYWRkQ2xhc3NJbW1lZGlhdGVseTogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XG4gICAgICAgIGNsYXNzTmFtZSA9ICFpc1N0cmluZyhjbGFzc05hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChpc0FycmF5KGNsYXNzTmFtZSkgPyBjbGFzc05hbWUuam9pbignICcpIDogJycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNsYXNzTmFtZTtcbiAgICAgICAgZm9yRWFjaChlbGVtZW50LCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAganFMaXRlQWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFwcGx5U3R5bGVzKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gYXN5bmNQcm9taXNlKCk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNyZW1vdmVDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmVzIHRoZSBwcm92aWRlZCBjbGFzc05hbWUgQ1NTIGNsYXNzIHZhbHVlIGZyb20gdGhlIHByb3ZpZGVkIGVsZW1lbnQuXG4gICAgICAgKiBXaGVuIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgYSBwcm9taXNlIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBhdCBhIGxhdGVyIHRpbWUuXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBoYXZlIHRoZSBjbGFzc05hbWUgdmFsdWVcbiAgICAgICAqICAgcmVtb3ZlZCBmcm9tIGl0XG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIHRoZSBDU1MgY2xhc3Mgd2hpY2ggd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAqL1xuICAgICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRDbGFzcyhlbGVtZW50LCBbXSwgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICAgIH0sXG5cbiAgICAgICQkcmVtb3ZlQ2xhc3NJbW1lZGlhdGVseTogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XG4gICAgICAgIGNsYXNzTmFtZSA9ICFpc1N0cmluZyhjbGFzc05hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChpc0FycmF5KGNsYXNzTmFtZSkgPyBjbGFzc05hbWUuam9pbignICcpIDogJycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNsYXNzTmFtZTtcbiAgICAgICAgZm9yRWFjaChlbGVtZW50LCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAganFMaXRlUmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFwcGx5U3R5bGVzKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gYXN5bmNQcm9taXNlKCk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNzZXRDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRzIGFuZC9vciByZW1vdmVzIHRoZSBnaXZlbiBDU1MgY2xhc3NlcyB0byBhbmQgZnJvbSB0aGUgZWxlbWVudC5cbiAgICAgICAqIFdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhIHByb21pc2UgaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGF0IGEgbGF0ZXIgdGltZS5cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGhhdmUgaXRzIENTUyBjbGFzc2VzIGNoYW5nZWRcbiAgICAgICAqICAgcmVtb3ZlZCBmcm9tIGl0XG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWRkIHRoZSBDU1MgY2xhc3NlcyB3aGljaCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50XG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVtb3ZlIHRoZSBDU1MgY2xhc3Mgd2hpY2ggd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAqL1xuICAgICAgc2V0Q2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGFkZCwgcmVtb3ZlLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIFNUT1JBR0VfS0VZID0gJyQkYW5pbWF0ZUNsYXNzZXMnO1xuICAgICAgICB2YXIgY3JlYXRlZENhY2hlID0gZmFsc2U7XG4gICAgICAgIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XG5cbiAgICAgICAgdmFyIGNhY2hlID0gZWxlbWVudC5kYXRhKFNUT1JBR0VfS0VZKTtcbiAgICAgICAgaWYgKCFjYWNoZSkge1xuICAgICAgICAgIGNhY2hlID0ge1xuICAgICAgICAgICAgY2xhc3Nlczoge30sXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjcmVhdGVkQ2FjaGUgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMgJiYgY2FjaGUub3B0aW9ucykge1xuICAgICAgICAgIGNhY2hlLm9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZChjYWNoZS5vcHRpb25zIHx8IHt9LCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjbGFzc2VzID0gY2FjaGUuY2xhc3NlcztcblxuICAgICAgICBhZGQgPSBpc0FycmF5KGFkZCkgPyBhZGQgOiBhZGQuc3BsaXQoJyAnKTtcbiAgICAgICAgcmVtb3ZlID0gaXNBcnJheShyZW1vdmUpID8gcmVtb3ZlIDogcmVtb3ZlLnNwbGl0KCcgJyk7XG4gICAgICAgIGNhY2hlZENsYXNzTWFuaXB1bGF0aW9uKGNsYXNzZXMsIGFkZCwgdHJ1ZSk7XG4gICAgICAgIGNhY2hlZENsYXNzTWFuaXB1bGF0aW9uKGNsYXNzZXMsIHJlbW92ZSwgZmFsc2UpO1xuXG4gICAgICAgIGlmIChjcmVhdGVkQ2FjaGUpIHtcbiAgICAgICAgICBjYWNoZS5wcm9taXNlID0gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICB2YXIgY2FjaGUgPSBlbGVtZW50LmRhdGEoU1RPUkFHRV9LRVkpO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVEYXRhKFNUT1JBR0VfS0VZKTtcblxuICAgICAgICAgICAgLy8gaW4gdGhlIGV2ZW50IHRoYXQgdGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBiZWZvcmUgcG9zdERpZ2VzdFxuICAgICAgICAgICAgLy8gaXMgcnVuIHRoZW4gdGhlIGNhY2hlIHdpbGwgYmUgdW5kZWZpbmVkIGFuZCB0aGVyZSB3aWxsIGJlXG4gICAgICAgICAgICAvLyBubyBuZWVkIGFueW1vcmUgdG8gYWRkIG9yIHJlbW92ZSBhbmQgb2YgdGhlIGVsZW1lbnQgY2xhc3Nlc1xuICAgICAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgICAgIHZhciBjbGFzc2VzID0gcmVzb2x2ZUVsZW1lbnRDbGFzc2VzKGVsZW1lbnQsIGNhY2hlLmNsYXNzZXMpO1xuICAgICAgICAgICAgICBpZiAoY2xhc3Nlcykge1xuICAgICAgICAgICAgICAgIHNlbGYuJCRzZXRDbGFzc0ltbWVkaWF0ZWx5KGVsZW1lbnQsIGNsYXNzZXNbMF0sIGNsYXNzZXNbMV0sIGNhY2hlLm9wdGlvbnMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBlbGVtZW50LmRhdGEoU1RPUkFHRV9LRVksIGNhY2hlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWNoZS5wcm9taXNlO1xuICAgICAgfSxcblxuICAgICAgJCRzZXRDbGFzc0ltbWVkaWF0ZWx5OiBmdW5jdGlvbihlbGVtZW50LCBhZGQsIHJlbW92ZSwgb3B0aW9ucykge1xuICAgICAgICBhZGQgJiYgdGhpcy4kJGFkZENsYXNzSW1tZWRpYXRlbHkoZWxlbWVudCwgYWRkKTtcbiAgICAgICAgcmVtb3ZlICYmIHRoaXMuJCRyZW1vdmVDbGFzc0ltbWVkaWF0ZWx5KGVsZW1lbnQsIHJlbW92ZSk7XG4gICAgICAgIGFwcGx5U3R5bGVzKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gYXN5bmNQcm9taXNlKCk7XG4gICAgICB9LFxuXG4gICAgICBlbmFibGVkOiBub29wLFxuICAgICAgY2FuY2VsOiBub29wXG4gICAgfTtcbiAgfV07XG59XTtcblxuZnVuY3Rpb24gJCRBc3luY0NhbGxiYWNrUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJCRyQUYnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbigkJHJBRiwgJHRpbWVvdXQpIHtcbiAgICByZXR1cm4gJCRyQUYuc3VwcG9ydGVkXG4gICAgICA/IGZ1bmN0aW9uKGZuKSB7IHJldHVybiAkJHJBRihmbik7IH1cbiAgICAgIDogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgcmV0dXJuICR0aW1lb3V0KGZuLCAwLCBmYWxzZSk7XG4gICAgICB9O1xuICB9XTtcbn1cblxuLyogZ2xvYmFsIHN0cmlwSGFzaDogdHJ1ZSAqL1xuXG4vKipcbiAqICEgVGhpcyBpcyBhIHByaXZhdGUgdW5kb2N1bWVudGVkIHNlcnZpY2UgIVxuICpcbiAqIEBuYW1lICRicm93c2VyXG4gKiBAcmVxdWlyZXMgJGxvZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIG9iamVjdCBoYXMgdHdvIGdvYWxzOlxuICpcbiAqIC0gaGlkZSBhbGwgdGhlIGdsb2JhbCBzdGF0ZSBpbiB0aGUgYnJvd3NlciBjYXVzZWQgYnkgdGhlIHdpbmRvdyBvYmplY3RcbiAqIC0gYWJzdHJhY3QgYXdheSBhbGwgdGhlIGJyb3dzZXIgc3BlY2lmaWMgZmVhdHVyZXMgYW5kIGluY29uc2lzdGVuY2llc1xuICpcbiAqIEZvciB0ZXN0cyB3ZSBwcm92aWRlIHtAbGluayBuZ01vY2suJGJyb3dzZXIgbW9jayBpbXBsZW1lbnRhdGlvbn0gb2YgdGhlIGAkYnJvd3NlcmBcbiAqIHNlcnZpY2UsIHdoaWNoIGNhbiBiZSB1c2VkIGZvciBjb252ZW5pZW50IHRlc3Rpbmcgb2YgdGhlIGFwcGxpY2F0aW9uIHdpdGhvdXQgdGhlIGludGVyYWN0aW9uIHdpdGhcbiAqIHRoZSByZWFsIGJyb3dzZXIgYXBpcy5cbiAqL1xuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gd2luZG93IFRoZSBnbG9iYWwgd2luZG93IG9iamVjdC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBkb2N1bWVudCBqUXVlcnkgd3JhcHBlZCBkb2N1bWVudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSAkbG9nIHdpbmRvdy5jb25zb2xlIG9yIGFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIGludGVyZmFjZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSAkc25pZmZlciAkc25pZmZlciBzZXJ2aWNlXG4gKi9cbmZ1bmN0aW9uIEJyb3dzZXIod2luZG93LCBkb2N1bWVudCwgJGxvZywgJHNuaWZmZXIpIHtcbiAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgcmF3RG9jdW1lbnQgPSBkb2N1bWVudFswXSxcbiAgICAgIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5LFxuICAgICAgc2V0VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0LFxuICAgICAgY2xlYXJUaW1lb3V0ID0gd2luZG93LmNsZWFyVGltZW91dCxcbiAgICAgIHBlbmRpbmdEZWZlcklkcyA9IHt9O1xuXG4gIHNlbGYuaXNNb2NrID0gZmFsc2U7XG5cbiAgdmFyIG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID0gMDtcbiAgdmFyIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcyA9IFtdO1xuXG4gIC8vIFRPRE8odm9qdGEpOiByZW1vdmUgdGhpcyB0ZW1wb3JhcnkgYXBpXG4gIHNlbGYuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCA9IGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0O1xuICBzZWxmLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPSBmdW5jdGlvbigpIHsgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKzsgfTtcblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIGBmbmAgZnVuY3Rpb24oc3VwcG9ydHMgY3VycnlpbmcpIGFuZCBkZWNyZW1lbnRzIHRoZSBgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzYFxuICAgKiBjb3VudGVyLiBJZiB0aGUgY291bnRlciByZWFjaGVzIDAsIGFsbCB0aGUgYG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrc2AgYXJlIGV4ZWN1dGVkLlxuICAgKi9cbiAgZnVuY3Rpb24gY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoZm4pIHtcbiAgICB0cnkge1xuICAgICAgZm4uYXBwbHkobnVsbCwgc2xpY2VBcmdzKGFyZ3VtZW50cywgMSkpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudC0tO1xuICAgICAgaWYgKG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID09PSAwKSB7XG4gICAgICAgIHdoaWxlIChvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MubGVuZ3RoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wb3AoKSgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICRsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SGFzaCh1cmwpIHtcbiAgICB2YXIgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICAgIHJldHVybiBpbmRleCA9PT0gLTEgPyAnJyA6IHVybC5zdWJzdHIoaW5kZXggKyAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBOb3RlOiB0aGlzIG1ldGhvZCBpcyB1c2VkIG9ubHkgYnkgc2NlbmFyaW8gcnVubmVyXG4gICAqIFRPRE8odm9qdGEpOiBwcmVmaXggdGhpcyBtZXRob2Qgd2l0aCAkJCA/XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2sgRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIG5vIG91dHN0YW5kaW5nIHJlcXVlc3RcbiAgICovXG4gIHNlbGYubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgLy8gZm9yY2UgYnJvd3NlciB0byBleGVjdXRlIGFsbCBwb2xsRm5zIC0gdGhpcyBpcyBuZWVkZWQgc28gdGhhdCBjb29raWVzIGFuZCBvdGhlciBwb2xsZXJzIGZpcmVcbiAgICAvLyBhdCBzb21lIGRldGVybWluaXN0aWMgdGltZSBpbiByZXNwZWN0IHRvIHRoZSB0ZXN0IHJ1bm5lcidzIGFjdGlvbnMuIExlYXZpbmcgdGhpbmdzIHVwIHRvIHRoZVxuICAgIC8vIHJlZ3VsYXIgcG9sbGVyIHdvdWxkIHJlc3VsdCBpbiBmbGFreSB0ZXN0cy5cbiAgICBmb3JFYWNoKHBvbGxGbnMsIGZ1bmN0aW9uKHBvbGxGbikgeyBwb2xsRm4oKTsgfSk7XG5cbiAgICBpZiAob3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gUG9sbCBXYXRjaGVyIEFQSVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICB2YXIgcG9sbEZucyA9IFtdLFxuICAgICAgcG9sbFRpbWVvdXQ7XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2FkZFBvbGxGblxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuIFBvbGwgZnVuY3Rpb24gdG8gYWRkXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBBZGRzIGEgZnVuY3Rpb24gdG8gdGhlIGxpc3Qgb2YgZnVuY3Rpb25zIHRoYXQgcG9sbGVyIHBlcmlvZGljYWxseSBleGVjdXRlcyxcbiAgICogYW5kIHN0YXJ0cyBwb2xsaW5nIGlmIG5vdCBzdGFydGVkIHlldC5cbiAgICpcbiAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IHRoZSBhZGRlZCBmdW5jdGlvblxuICAgKi9cbiAgc2VsZi5hZGRQb2xsRm4gPSBmdW5jdGlvbihmbikge1xuICAgIGlmIChpc1VuZGVmaW5lZChwb2xsVGltZW91dCkpIHN0YXJ0UG9sbGVyKDEwMCwgc2V0VGltZW91dCk7XG4gICAgcG9sbEZucy5wdXNoKGZuKTtcbiAgICByZXR1cm4gZm47XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcnZhbCBIb3cgb2Z0ZW4gc2hvdWxkIGJyb3dzZXIgY2FsbCBwb2xsIGZ1bmN0aW9ucyAobXMpXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gc2V0VGltZW91dCBSZWZlcmVuY2UgdG8gYSByZWFsIG9yIGZha2UgYHNldFRpbWVvdXRgIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ29uZmlndXJlcyB0aGUgcG9sbGVyIHRvIHJ1biBpbiB0aGUgc3BlY2lmaWVkIGludGVydmFscywgdXNpbmcgdGhlIHNwZWNpZmllZFxuICAgKiBzZXRUaW1lb3V0IGZuIGFuZCBraWNrcyBpdCBvZmYuXG4gICAqL1xuICBmdW5jdGlvbiBzdGFydFBvbGxlcihpbnRlcnZhbCwgc2V0VGltZW91dCkge1xuICAgIChmdW5jdGlvbiBjaGVjaygpIHtcbiAgICAgIGZvckVhY2gocG9sbEZucywgZnVuY3Rpb24ocG9sbEZuKSB7IHBvbGxGbigpOyB9KTtcbiAgICAgIHBvbGxUaW1lb3V0ID0gc2V0VGltZW91dChjaGVjaywgaW50ZXJ2YWwpO1xuICAgIH0pKCk7XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBVUkwgQVBJXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgdmFyIGNhY2hlZFN0YXRlLCBsYXN0SGlzdG9yeVN0YXRlLFxuICAgICAgbGFzdEJyb3dzZXJVcmwgPSBsb2NhdGlvbi5ocmVmLFxuICAgICAgYmFzZUVsZW1lbnQgPSBkb2N1bWVudC5maW5kKCdiYXNlJyksXG4gICAgICByZWxvYWRMb2NhdGlvbiA9IG51bGw7XG5cbiAgY2FjaGVTdGF0ZSgpO1xuICBsYXN0SGlzdG9yeVN0YXRlID0gY2FjaGVkU3RhdGU7XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI3VybFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogR0VUVEVSOlxuICAgKiBXaXRob3V0IGFueSBhcmd1bWVudCwgdGhpcyBtZXRob2QganVzdCByZXR1cm5zIGN1cnJlbnQgdmFsdWUgb2YgbG9jYXRpb24uaHJlZi5cbiAgICpcbiAgICogU0VUVEVSOlxuICAgKiBXaXRoIGF0IGxlYXN0IG9uZSBhcmd1bWVudCwgdGhpcyBtZXRob2Qgc2V0cyB1cmwgdG8gbmV3IHZhbHVlLlxuICAgKiBJZiBodG1sNSBoaXN0b3J5IGFwaSBzdXBwb3J0ZWQsIHB1c2hTdGF0ZS9yZXBsYWNlU3RhdGUgaXMgdXNlZCwgb3RoZXJ3aXNlXG4gICAqIGxvY2F0aW9uLmhyZWYvbG9jYXRpb24ucmVwbGFjZSBpcyB1c2VkLlxuICAgKiBSZXR1cm5zIGl0cyBvd24gaW5zdGFuY2UgdG8gYWxsb3cgY2hhaW5pbmdcbiAgICpcbiAgICogTk9URTogdGhpcyBhcGkgaXMgaW50ZW5kZWQgZm9yIHVzZSBvbmx5IGJ5IHRoZSAkbG9jYXRpb24gc2VydmljZS4gUGxlYXNlIHVzZSB0aGVcbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiAkbG9jYXRpb24gc2VydmljZX0gdG8gY2hhbmdlIHVybC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBOZXcgdXJsICh3aGVuIHVzZWQgYXMgc2V0dGVyKVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSByZXBsYWNlIFNob3VsZCBuZXcgdXJsIHJlcGxhY2UgY3VycmVudCBoaXN0b3J5IHJlY29yZD9cbiAgICogQHBhcmFtIHtvYmplY3Q9fSBzdGF0ZSBvYmplY3QgdG8gdXNlIHdpdGggcHVzaFN0YXRlL3JlcGxhY2VTdGF0ZVxuICAgKi9cbiAgc2VsZi51cmwgPSBmdW5jdGlvbih1cmwsIHJlcGxhY2UsIHN0YXRlKSB7XG4gICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzIGBoaXN0b3J5LnN0YXRlYCBpcyBgbnVsbGAgYnkgZGVmYXVsdDsgdHJlYXRpbmcgaXQgc2VwYXJhdGVseVxuICAgIC8vIGZyb20gYHVuZGVmaW5lZGAgd291bGQgY2F1c2UgYCRicm93c2VyLnVybCgnL2ZvbycpYCB0byBjaGFuZ2UgYGhpc3Rvcnkuc3RhdGVgXG4gICAgLy8gdG8gdW5kZWZpbmVkIHZpYSBgcHVzaFN0YXRlYC4gSW5zdGVhZCwgbGV0J3MgY2hhbmdlIGB1bmRlZmluZWRgIHRvIGBudWxsYCBoZXJlLlxuICAgIGlmIChpc1VuZGVmaW5lZChzdGF0ZSkpIHtcbiAgICAgIHN0YXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBBbmRyb2lkIEJyb3dzZXIgQkZDYWNoZSBjYXVzZXMgbG9jYXRpb24sIGhpc3RvcnkgcmVmZXJlbmNlIHRvIGJlY29tZSBzdGFsZS5cbiAgICBpZiAobG9jYXRpb24gIT09IHdpbmRvdy5sb2NhdGlvbikgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgaWYgKGhpc3RvcnkgIT09IHdpbmRvdy5oaXN0b3J5KSBoaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG5cbiAgICAvLyBzZXR0ZXJcbiAgICBpZiAodXJsKSB7XG4gICAgICB2YXIgc2FtZVN0YXRlID0gbGFzdEhpc3RvcnlTdGF0ZSA9PT0gc3RhdGU7XG5cbiAgICAgIC8vIERvbid0IGNoYW5nZSBhbnl0aGluZyBpZiBwcmV2aW91cyBhbmQgY3VycmVudCBVUkxzIGFuZCBzdGF0ZXMgbWF0Y2guIFRoaXMgYWxzbyBwcmV2ZW50c1xuICAgICAgLy8gSUU8MTAgZnJvbSBnZXR0aW5nIGludG8gcmVkaXJlY3QgbG9vcCB3aGVuIGluIExvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsIG1vZGUuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9jb21taXQvZmZiMjcwMVxuICAgICAgaWYgKGxhc3RCcm93c2VyVXJsID09PSB1cmwgJiYgKCEkc25pZmZlci5oaXN0b3J5IHx8IHNhbWVTdGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG4gICAgICB2YXIgc2FtZUJhc2UgPSBsYXN0QnJvd3NlclVybCAmJiBzdHJpcEhhc2gobGFzdEJyb3dzZXJVcmwpID09PSBzdHJpcEhhc2godXJsKTtcbiAgICAgIGxhc3RCcm93c2VyVXJsID0gdXJsO1xuICAgICAgbGFzdEhpc3RvcnlTdGF0ZSA9IHN0YXRlO1xuICAgICAgLy8gRG9uJ3QgdXNlIGhpc3RvcnkgQVBJIGlmIG9ubHkgdGhlIGhhc2ggY2hhbmdlZFxuICAgICAgLy8gZHVlIHRvIGEgYnVnIGluIElFMTAvSUUxMSB3aGljaCBsZWFkc1xuICAgICAgLy8gdG8gbm90IGZpcmluZyBhIGBoYXNoY2hhbmdlYCBub3IgYHBvcHN0YXRlYCBldmVudFxuICAgICAgLy8gaW4gc29tZSBjYXNlcyAoc2VlICM5MTQzKS5cbiAgICAgIGlmICgkc25pZmZlci5oaXN0b3J5ICYmICghc2FtZUJhc2UgfHwgIXNhbWVTdGF0ZSkpIHtcbiAgICAgICAgaGlzdG9yeVtyZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oc3RhdGUsICcnLCB1cmwpO1xuICAgICAgICBjYWNoZVN0YXRlKCk7XG4gICAgICAgIC8vIERvIHRoZSBhc3NpZ25tZW50IGFnYWluIHNvIHRoYXQgdGhvc2UgdHdvIHZhcmlhYmxlcyBhcmUgcmVmZXJlbnRpYWxseSBpZGVudGljYWwuXG4gICAgICAgIGxhc3RIaXN0b3J5U3RhdGUgPSBjYWNoZWRTdGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghc2FtZUJhc2UpIHtcbiAgICAgICAgICByZWxvYWRMb2NhdGlvbiA9IHVybDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UodXJsKTtcbiAgICAgICAgfSBlbHNlIGlmICghc2FtZUJhc2UpIHtcbiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBnZXRIYXNoKHVybCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIC8vIGdldHRlclxuICAgIH0gZWxzZSB7XG4gICAgICAvLyAtIHJlbG9hZExvY2F0aW9uIGlzIG5lZWRlZCBhcyBicm93c2VycyBkb24ndCBhbGxvdyB0byByZWFkIG91dFxuICAgICAgLy8gICB0aGUgbmV3IGxvY2F0aW9uLmhyZWYgaWYgYSByZWxvYWQgaGFwcGVuZWQuXG4gICAgICAvLyAtIHRoZSByZXBsYWNlbWVudCBpcyBhIHdvcmthcm91bmQgZm9yIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQwNzE3MlxuICAgICAgcmV0dXJuIHJlbG9hZExvY2F0aW9uIHx8IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvJTI3L2csXCInXCIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjc3RhdGVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGEgZ2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gaGlzdG9yeS5zdGF0ZSBvciBudWxsIGlmIGhpc3Rvcnkuc3RhdGUgaXMgdW5kZWZpbmVkLlxuICAgKlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBzdGF0ZVxuICAgKi9cbiAgc2VsZi5zdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBjYWNoZWRTdGF0ZTtcbiAgfTtcblxuICB2YXIgdXJsQ2hhbmdlTGlzdGVuZXJzID0gW10sXG4gICAgICB1cmxDaGFuZ2VJbml0ID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UoKSB7XG4gICAgY2FjaGVTdGF0ZSgpO1xuICAgIGZpcmVVcmxDaGFuZ2UoKTtcbiAgfVxuXG4gIC8vIFRoaXMgdmFyaWFibGUgc2hvdWxkIGJlIHVzZWQgKm9ubHkqIGluc2lkZSB0aGUgY2FjaGVTdGF0ZSBmdW5jdGlvbi5cbiAgdmFyIGxhc3RDYWNoZWRTdGF0ZSA9IG51bGw7XG4gIGZ1bmN0aW9uIGNhY2hlU3RhdGUoKSB7XG4gICAgLy8gVGhpcyBzaG91bGQgYmUgdGhlIG9ubHkgcGxhY2UgaW4gJGJyb3dzZXIgd2hlcmUgYGhpc3Rvcnkuc3RhdGVgIGlzIHJlYWQuXG4gICAgY2FjaGVkU3RhdGUgPSB3aW5kb3cuaGlzdG9yeS5zdGF0ZTtcbiAgICBjYWNoZWRTdGF0ZSA9IGlzVW5kZWZpbmVkKGNhY2hlZFN0YXRlKSA/IG51bGwgOiBjYWNoZWRTdGF0ZTtcblxuICAgIC8vIFByZXZlbnQgY2FsbGJhY2tzIGZvIGZpcmUgdHdpY2UgaWYgYm90aCBoYXNoY2hhbmdlICYgcG9wc3RhdGUgd2VyZSBmaXJlZC5cbiAgICBpZiAoZXF1YWxzKGNhY2hlZFN0YXRlLCBsYXN0Q2FjaGVkU3RhdGUpKSB7XG4gICAgICBjYWNoZWRTdGF0ZSA9IGxhc3RDYWNoZWRTdGF0ZTtcbiAgICB9XG4gICAgbGFzdENhY2hlZFN0YXRlID0gY2FjaGVkU3RhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlVXJsQ2hhbmdlKCkge1xuICAgIGlmIChsYXN0QnJvd3NlclVybCA9PT0gc2VsZi51cmwoKSAmJiBsYXN0SGlzdG9yeVN0YXRlID09PSBjYWNoZWRTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxhc3RCcm93c2VyVXJsID0gc2VsZi51cmwoKTtcbiAgICBsYXN0SGlzdG9yeVN0YXRlID0gY2FjaGVkU3RhdGU7XG4gICAgZm9yRWFjaCh1cmxDaGFuZ2VMaXN0ZW5lcnMsIGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgICBsaXN0ZW5lcihzZWxmLnVybCgpLCBjYWNoZWRTdGF0ZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjb25VcmxDaGFuZ2VcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJlZ2lzdGVyIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQsIHdoZW4gdXJsIGNoYW5nZXMuXG4gICAqXG4gICAqIEl0J3Mgb25seSBjYWxsZWQgd2hlbiB0aGUgdXJsIGlzIGNoYW5nZWQgZnJvbSBvdXRzaWRlIG9mIGFuZ3VsYXI6XG4gICAqIC0gdXNlciB0eXBlcyBkaWZmZXJlbnQgdXJsIGludG8gYWRkcmVzcyBiYXJcbiAgICogLSB1c2VyIGNsaWNrcyBvbiBoaXN0b3J5IChmb3J3YXJkL2JhY2spIGJ1dHRvblxuICAgKiAtIHVzZXIgY2xpY2tzIG9uIGEgbGlua1xuICAgKlxuICAgKiBJdCdzIG5vdCBjYWxsZWQgd2hlbiB1cmwgaXMgY2hhbmdlZCBieSAkYnJvd3Nlci51cmwoKSBtZXRob2RcbiAgICpcbiAgICogVGhlIGxpc3RlbmVyIGdldHMgY2FsbGVkIHdpdGggbmV3IHVybCBhcyBwYXJhbWV0ZXIuXG4gICAqXG4gICAqIE5PVEU6IHRoaXMgYXBpIGlzIGludGVuZGVkIGZvciB1c2Ugb25seSBieSB0aGUgJGxvY2F0aW9uIHNlcnZpY2UuIFBsZWFzZSB1c2UgdGhlXG4gICAqIHtAbGluayBuZy4kbG9jYXRpb24gJGxvY2F0aW9uIHNlcnZpY2V9IHRvIG1vbml0b3IgdXJsIGNoYW5nZXMgaW4gYW5ndWxhciBhcHBzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyl9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHVybCBjaGFuZ2VzLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihzdHJpbmcpfSBSZXR1cm5zIHRoZSByZWdpc3RlcmVkIGxpc3RlbmVyIGZuIC0gaGFuZHkgaWYgdGhlIGZuIGlzIGFub255bW91cy5cbiAgICovXG4gIHNlbGYub25VcmxDaGFuZ2UgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIC8vIFRPRE8odm9qdGEpOiByZWZhY3RvciB0byB1c2Ugbm9kZSdzIHN5bnRheCBmb3IgZXZlbnRzXG4gICAgaWYgKCF1cmxDaGFuZ2VJbml0KSB7XG4gICAgICAvLyBXZSBsaXN0ZW4gb24gYm90aCAoaGFzaGNoYW5nZS9wb3BzdGF0ZSkgd2hlbiBhdmFpbGFibGUsIGFzIHNvbWUgYnJvd3NlcnMgKGUuZy4gT3BlcmEpXG4gICAgICAvLyBkb24ndCBmaXJlIHBvcHN0YXRlIHdoZW4gdXNlciBjaGFuZ2UgdGhlIGFkZHJlc3MgYmFyIGFuZCBkb24ndCBmaXJlIGhhc2hjaGFuZ2Ugd2hlbiB1cmxcbiAgICAgIC8vIGNoYW5nZWQgYnkgcHVzaC9yZXBsYWNlU3RhdGVcblxuICAgICAgLy8gaHRtbDUgaGlzdG9yeSBhcGkgLSBwb3BzdGF0ZSBldmVudFxuICAgICAgaWYgKCRzbmlmZmVyLmhpc3RvcnkpIGpxTGl0ZSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGNhY2hlU3RhdGVBbmRGaXJlVXJsQ2hhbmdlKTtcbiAgICAgIC8vIGhhc2hjaGFuZ2UgZXZlbnRcbiAgICAgIGpxTGl0ZSh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UpO1xuXG4gICAgICB1cmxDaGFuZ2VJbml0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB1cmxDaGFuZ2VMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIGNhbGxiYWNrO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciB0aGUgdXJsIGhhcyBjaGFuZ2VkIG91dHNpZGUgb2YgQW5ndWxhci5cbiAgICogTmVlZHMgdG8gYmUgZXhwb3J0ZWQgdG8gYmUgYWJsZSB0byBjaGVjayBmb3IgY2hhbmdlcyB0aGF0IGhhdmUgYmVlbiBkb25lIGluIHN5bmMsXG4gICAqIGFzIGhhc2hjaGFuZ2UvcG9wc3RhdGUgZXZlbnRzIGZpcmUgaW4gYXN5bmMuXG4gICAqL1xuICBzZWxmLiQkY2hlY2tVcmxDaGFuZ2UgPSBmaXJlVXJsQ2hhbmdlO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIE1pc2MgQVBJXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2Jhc2VIcmVmXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXR1cm5zIGN1cnJlbnQgPGJhc2UgaHJlZj5cbiAgICogKGFsd2F5cyByZWxhdGl2ZSAtIHdpdGhvdXQgZG9tYWluKVxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY3VycmVudCBiYXNlIGhyZWZcbiAgICovXG4gIHNlbGYuYmFzZUhyZWYgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaHJlZiA9IGJhc2VFbGVtZW50LmF0dHIoJ2hyZWYnKTtcbiAgICByZXR1cm4gaHJlZiA/IGhyZWYucmVwbGFjZSgvXihodHRwcz9cXDopP1xcL1xcL1teXFwvXSovLCAnJykgOiAnJztcbiAgfTtcblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBDb29raWVzIEFQSVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICB2YXIgbGFzdENvb2tpZXMgPSB7fTtcbiAgdmFyIGxhc3RDb29raWVTdHJpbmcgPSAnJztcbiAgdmFyIGNvb2tpZVBhdGggPSBzZWxmLmJhc2VIcmVmKCk7XG5cbiAgZnVuY3Rpb24gc2FmZURlY29kZVVSSUNvbXBvbmVudChzdHIpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2Nvb2tpZXNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIENvb2tpZSBuYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdmFsdWUgQ29va2llIHZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGUgY29va2llcyBtZXRob2QgcHJvdmlkZXMgYSAncHJpdmF0ZScgbG93IGxldmVsIGFjY2VzcyB0byBicm93c2VyIGNvb2tpZXMuXG4gICAqIEl0IGlzIG5vdCBtZWFudCB0byBiZSB1c2VkIGRpcmVjdGx5LCB1c2UgdGhlICRjb29raWUgc2VydmljZSBpbnN0ZWFkLlxuICAgKlxuICAgKiBUaGUgcmV0dXJuIHZhbHVlcyB2YXJ5IGRlcGVuZGluZyBvbiB0aGUgYXJndW1lbnRzIHRoYXQgdGhlIG1ldGhvZCB3YXMgY2FsbGVkIHdpdGggYXMgZm9sbG93czpcbiAgICpcbiAgICogLSBjb29raWVzKCkgLT4gaGFzaCBvZiBhbGwgY29va2llcywgdGhpcyBpcyBOT1QgYSBjb3B5IG9mIHRoZSBpbnRlcm5hbCBzdGF0ZSwgc28gZG8gbm90IG1vZGlmeVxuICAgKiAgIGl0XG4gICAqIC0gY29va2llcyhuYW1lLCB2YWx1ZSkgLT4gc2V0IG5hbWUgdG8gdmFsdWUsIGlmIHZhbHVlIGlzIHVuZGVmaW5lZCBkZWxldGUgdGhlIGNvb2tpZVxuICAgKiAtIGNvb2tpZXMobmFtZSkgLT4gdGhlIHNhbWUgYXMgKG5hbWUsIHVuZGVmaW5lZCkgPT0gREVMRVRFUyAobm8gb25lIGNhbGxzIGl0IHJpZ2h0IG5vdyB0aGF0XG4gICAqICAgd2F5KVxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBIYXNoIG9mIGFsbCBjb29raWVzIChpZiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyKVxuICAgKi9cbiAgc2VsZi5jb29raWVzID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgY29va2llTGVuZ3RoLCBjb29raWVBcnJheSwgY29va2llLCBpLCBpbmRleDtcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByYXdEb2N1bWVudC5jb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyBcIj07cGF0aD1cIiArIGNvb2tpZVBhdGggK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgICAgY29va2llTGVuZ3RoID0gKHJhd0RvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnO3BhdGg9JyArIGNvb2tpZVBhdGgpLmxlbmd0aCArIDE7XG5cbiAgICAgICAgICAvLyBwZXIgaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMjEwOS50eHQgYnJvd3NlciBtdXN0IGFsbG93IGF0IG1pbmltdW06XG4gICAgICAgICAgLy8gLSAzMDAgY29va2llc1xuICAgICAgICAgIC8vIC0gMjAgY29va2llcyBwZXIgdW5pcXVlIGRvbWFpblxuICAgICAgICAgIC8vIC0gNDA5NiBieXRlcyBwZXIgY29va2llXG4gICAgICAgICAgaWYgKGNvb2tpZUxlbmd0aCA+IDQwOTYpIHtcbiAgICAgICAgICAgICRsb2cud2FybihcIkNvb2tpZSAnXCIgKyBuYW1lICtcbiAgICAgICAgICAgICAgXCInIHBvc3NpYmx5IG5vdCBzZXQgb3Igb3ZlcmZsb3dlZCBiZWNhdXNlIGl0IHdhcyB0b28gbGFyZ2UgKFwiICtcbiAgICAgICAgICAgICAgY29va2llTGVuZ3RoICsgXCIgPiA0MDk2IGJ5dGVzKSFcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyYXdEb2N1bWVudC5jb29raWUgIT09IGxhc3RDb29raWVTdHJpbmcpIHtcbiAgICAgICAgbGFzdENvb2tpZVN0cmluZyA9IHJhd0RvY3VtZW50LmNvb2tpZTtcbiAgICAgICAgY29va2llQXJyYXkgPSBsYXN0Q29va2llU3RyaW5nLnNwbGl0KFwiOyBcIik7XG4gICAgICAgIGxhc3RDb29raWVzID0ge307XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvb2tpZUFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29va2llID0gY29va2llQXJyYXlbaV07XG4gICAgICAgICAgaW5kZXggPSBjb29raWUuaW5kZXhPZignPScpO1xuICAgICAgICAgIGlmIChpbmRleCA+IDApIHsgLy9pZ25vcmUgbmFtZWxlc3MgY29va2llc1xuICAgICAgICAgICAgbmFtZSA9IHNhZmVEZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZygwLCBpbmRleCkpO1xuICAgICAgICAgICAgLy8gdGhlIGZpcnN0IHZhbHVlIHRoYXQgaXMgc2VlbiBmb3IgYSBjb29raWUgaXMgdGhlIG1vc3RcbiAgICAgICAgICAgIC8vIHNwZWNpZmljIG9uZS4gIHZhbHVlcyBmb3IgdGhlIHNhbWUgY29va2llIG5hbWUgdGhhdFxuICAgICAgICAgICAgLy8gZm9sbG93IGFyZSBmb3IgbGVzcyBzcGVjaWZpYyBwYXRocy5cbiAgICAgICAgICAgIGlmIChsYXN0Q29va2llc1tuYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGxhc3RDb29raWVzW25hbWVdID0gc2FmZURlY29kZVVSSUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKGluZGV4ICsgMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGxhc3RDb29raWVzO1xuICAgIH1cbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNkZWZlclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuIEEgZnVuY3Rpb24sIHdobydzIGV4ZWN1dGlvbiBzaG91bGQgYmUgZGVmZXJyZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gW2RlbGF5PTBdIG9mIG1pbGxpc2Vjb25kcyB0byBkZWZlciB0aGUgZnVuY3Rpb24gZXhlY3V0aW9uLlxuICAgKiBAcmV0dXJucyB7Kn0gRGVmZXJJZCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNhbmNlbCB0aGUgdGFzayB2aWEgYCRicm93c2VyLmRlZmVyLmNhbmNlbCgpYC5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEV4ZWN1dGVzIGEgZm4gYXN5bmNocm9ub3VzbHkgdmlhIGBzZXRUaW1lb3V0KGZuLCBkZWxheSlgLlxuICAgKlxuICAgKiBVbmxpa2Ugd2hlbiBjYWxsaW5nIGBzZXRUaW1lb3V0YCBkaXJlY3RseSwgaW4gdGVzdCB0aGlzIGZ1bmN0aW9uIGlzIG1vY2tlZCBhbmQgaW5zdGVhZCBvZiB1c2luZ1xuICAgKiBgc2V0VGltZW91dGAgaW4gdGVzdHMsIHRoZSBmbnMgYXJlIHF1ZXVlZCBpbiBhbiBhcnJheSwgd2hpY2ggY2FuIGJlIHByb2dyYW1tYXRpY2FsbHkgZmx1c2hlZFxuICAgKiB2aWEgYCRicm93c2VyLmRlZmVyLmZsdXNoKClgLlxuICAgKlxuICAgKi9cbiAgc2VsZi5kZWZlciA9IGZ1bmN0aW9uKGZuLCBkZWxheSkge1xuICAgIHZhciB0aW1lb3V0SWQ7XG4gICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKztcbiAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgZGVsZXRlIHBlbmRpbmdEZWZlcklkc1t0aW1lb3V0SWRdO1xuICAgICAgY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoZm4pO1xuICAgIH0sIGRlbGF5IHx8IDApO1xuICAgIHBlbmRpbmdEZWZlcklkc1t0aW1lb3V0SWRdID0gdHJ1ZTtcbiAgICByZXR1cm4gdGltZW91dElkO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyLmNhbmNlbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ2FuY2VscyBhIGRlZmVycmVkIHRhc2sgaWRlbnRpZmllZCB3aXRoIGBkZWZlcklkYC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkZWZlcklkIFRva2VuIHJldHVybmVkIGJ5IHRoZSBgJGJyb3dzZXIuZGVmZXJgIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgaGFzbid0IGV4ZWN1dGVkIHlldCBhbmQgd2FzIHN1Y2Nlc3NmdWxseVxuICAgKiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWQuXG4gICAqL1xuICBzZWxmLmRlZmVyLmNhbmNlbCA9IGZ1bmN0aW9uKGRlZmVySWQpIHtcbiAgICBpZiAocGVuZGluZ0RlZmVySWRzW2RlZmVySWRdKSB7XG4gICAgICBkZWxldGUgcGVuZGluZ0RlZmVySWRzW2RlZmVySWRdO1xuICAgICAgY2xlYXJUaW1lb3V0KGRlZmVySWQpO1xuICAgICAgY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Qobm9vcCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG59XG5cbmZ1bmN0aW9uICRCcm93c2VyUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsICckbG9nJywgJyRzbmlmZmVyJywgJyRkb2N1bWVudCcsXG4gICAgICBmdW5jdGlvbigkd2luZG93LCAkbG9nLCAkc25pZmZlciwgJGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgQnJvd3Nlcigkd2luZG93LCAkZG9jdW1lbnQsICRsb2csICRzbmlmZmVyKTtcbiAgICAgIH1dO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkY2FjaGVGYWN0b3J5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBGYWN0b3J5IHRoYXQgY29uc3RydWN0cyB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0cyBhbmQgZ2l2ZXMgYWNjZXNzIHRvXG4gKiB0aGVtLlxuICpcbiAqIGBgYGpzXG4gKlxuICogIHZhciBjYWNoZSA9ICRjYWNoZUZhY3RvcnkoJ2NhY2hlSWQnKTtcbiAqICBleHBlY3QoJGNhY2hlRmFjdG9yeS5nZXQoJ2NhY2hlSWQnKSkudG9CZShjYWNoZSk7XG4gKiAgZXhwZWN0KCRjYWNoZUZhY3RvcnkuZ2V0KCdub1N1Y2hDYWNoZUlkJykpLm5vdC50b0JlRGVmaW5lZCgpO1xuICpcbiAqICBjYWNoZS5wdXQoXCJrZXlcIiwgXCJ2YWx1ZVwiKTtcbiAqICBjYWNoZS5wdXQoXCJhbm90aGVyIGtleVwiLCBcImFub3RoZXIgdmFsdWVcIik7XG4gKlxuICogIC8vIFdlJ3ZlIHNwZWNpZmllZCBubyBvcHRpb25zIG9uIGNyZWF0aW9uXG4gKiAgZXhwZWN0KGNhY2hlLmluZm8oKSkudG9FcXVhbCh7aWQ6ICdjYWNoZUlkJywgc2l6ZTogMn0pO1xuICpcbiAqIGBgYFxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVJZCBOYW1lIG9yIGlkIG9mIHRoZSBuZXdseSBjcmVhdGVkIGNhY2hlLlxuICogQHBhcmFtIHtvYmplY3Q9fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0IHRoYXQgc3BlY2lmaWVzIHRoZSBjYWNoZSBiZWhhdmlvci4gUHJvcGVydGllczpcbiAqXG4gKiAgIC0gYHtudW1iZXI9fWAgYGNhcGFjaXR5YCDigJQgdHVybnMgdGhlIGNhY2hlIGludG8gTFJVIGNhY2hlLlxuICpcbiAqIEByZXR1cm5zIHtvYmplY3R9IE5ld2x5IGNyZWF0ZWQgY2FjaGUgb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBzZXQgb2YgbWV0aG9kczpcbiAqXG4gKiAtIGB7b2JqZWN0fWAgYGluZm8oKWAg4oCUIFJldHVybnMgaWQsIHNpemUsIGFuZCBvcHRpb25zIG9mIGNhY2hlLlxuICogLSBge3sqfX1gIGBwdXQoe3N0cmluZ30ga2V5LCB7Kn0gdmFsdWUpYCDigJQgUHV0cyBhIG5ldyBrZXktdmFsdWUgcGFpciBpbnRvIHRoZSBjYWNoZSBhbmQgcmV0dXJuc1xuICogICBpdC5cbiAqIC0gYHt7Kn19YCBgZ2V0KHtzdHJpbmd9IGtleSlgIOKAlCBSZXR1cm5zIGNhY2hlZCB2YWx1ZSBmb3IgYGtleWAgb3IgdW5kZWZpbmVkIGZvciBjYWNoZSBtaXNzLlxuICogLSBge3ZvaWR9YCBgcmVtb3ZlKHtzdHJpbmd9IGtleSlgIOKAlCBSZW1vdmVzIGEga2V5LXZhbHVlIHBhaXIgZnJvbSB0aGUgY2FjaGUuXG4gKiAtIGB7dm9pZH1gIGByZW1vdmVBbGwoKWAg4oCUIFJlbW92ZXMgYWxsIGNhY2hlZCB2YWx1ZXMuXG4gKiAtIGB7dm9pZH1gIGBkZXN0cm95KClgIOKAlCBSZW1vdmVzIHJlZmVyZW5jZXMgdG8gdGhpcyBjYWNoZSBmcm9tICRjYWNoZUZhY3RvcnkuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImNhY2hlRXhhbXBsZUFwcFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkNhY2hlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwibmV3Q2FjaGVLZXlcIiBwbGFjZWhvbGRlcj1cIktleVwiPlxuICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwibmV3Q2FjaGVWYWx1ZVwiIHBsYWNlaG9sZGVyPVwiVmFsdWVcIj5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJwdXQobmV3Q2FjaGVLZXksIG5ld0NhY2hlVmFsdWUpXCI+Q2FjaGU8L2J1dHRvbj5cblxuICAgICAgICAgPHAgbmctaWY9XCJrZXlzLmxlbmd0aFwiPkNhY2hlZCBWYWx1ZXM8L3A+XG4gICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cImtleSBpbiBrZXlzXCI+XG4gICAgICAgICAgIDxzcGFuIG5nLWJpbmQ9XCJrZXlcIj48L3NwYW4+XG4gICAgICAgICAgIDxzcGFuPjogPC9zcGFuPlxuICAgICAgICAgICA8YiBuZy1iaW5kPVwiY2FjaGUuZ2V0KGtleSlcIj48L2I+XG4gICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgPHA+Q2FjaGUgSW5mbzwvcD5cbiAgICAgICAgIDxkaXYgbmctcmVwZWF0PVwiKGtleSwgdmFsdWUpIGluIGNhY2hlLmluZm8oKVwiPlxuICAgICAgICAgICA8c3BhbiBuZy1iaW5kPVwia2V5XCI+PC9zcGFuPlxuICAgICAgICAgICA8c3Bhbj46IDwvc3Bhbj5cbiAgICAgICAgICAgPGIgbmctYmluZD1cInZhbHVlXCI+PC9iPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjYWNoZUV4YW1wbGVBcHAnLCBbXSkuXG4gICAgICAgICBjb250cm9sbGVyKCdDYWNoZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckY2FjaGVGYWN0b3J5JywgZnVuY3Rpb24oJHNjb3BlLCAkY2FjaGVGYWN0b3J5KSB7XG4gICAgICAgICAgICRzY29wZS5rZXlzID0gW107XG4gICAgICAgICAgICRzY29wZS5jYWNoZSA9ICRjYWNoZUZhY3RvcnkoJ2NhY2hlSWQnKTtcbiAgICAgICAgICAgJHNjb3BlLnB1dCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICBpZiAoJHNjb3BlLmNhY2hlLmdldChrZXkpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgJHNjb3BlLmNhY2hlLnB1dChrZXksIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWUpO1xuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICBwIHtcbiAgICAgICAgIG1hcmdpbjogMTBweCAwIDNweDtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gJENhY2hlRmFjdG9yeVByb3ZpZGVyKCkge1xuXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYWNoZXMgPSB7fTtcblxuICAgIGZ1bmN0aW9uIGNhY2hlRmFjdG9yeShjYWNoZUlkLCBvcHRpb25zKSB7XG4gICAgICBpZiAoY2FjaGVJZCBpbiBjYWNoZXMpIHtcbiAgICAgICAgdGhyb3cgbWluRXJyKCckY2FjaGVGYWN0b3J5JykoJ2lpZCcsIFwiQ2FjaGVJZCAnezB9JyBpcyBhbHJlYWR5IHRha2VuIVwiLCBjYWNoZUlkKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNpemUgPSAwLFxuICAgICAgICAgIHN0YXRzID0gZXh0ZW5kKHt9LCBvcHRpb25zLCB7aWQ6IGNhY2hlSWR9KSxcbiAgICAgICAgICBkYXRhID0ge30sXG4gICAgICAgICAgY2FwYWNpdHkgPSAob3B0aW9ucyAmJiBvcHRpb25zLmNhcGFjaXR5KSB8fCBOdW1iZXIuTUFYX1ZBTFVFLFxuICAgICAgICAgIGxydUhhc2ggPSB7fSxcbiAgICAgICAgICBmcmVzaEVuZCA9IG51bGwsXG4gICAgICAgICAgc3RhbGVFbmQgPSBudWxsO1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyB0eXBlXG4gICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBIGNhY2hlIG9iamVjdCB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBkYXRhLCBwcmltYXJpbHkgdXNlZCBieVxuICAgICAgICoge0BsaW5rICRodHRwICRodHRwfSBhbmQgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6c2NyaXB0IHNjcmlwdH0gZGlyZWN0aXZlIHRvIGNhY2hlXG4gICAgICAgKiB0ZW1wbGF0ZXMgYW5kIG90aGVyIGRhdGEuXG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICBhbmd1bGFyLm1vZHVsZSgnc3VwZXJDYWNoZScpXG4gICAgICAgKiAgICAuZmFjdG9yeSgnc3VwZXJDYWNoZScsIFsnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRjYWNoZUZhY3RvcnkpIHtcbiAgICAgICAqICAgICAgcmV0dXJuICRjYWNoZUZhY3RvcnkoJ3N1cGVyLWNhY2hlJyk7XG4gICAgICAgKiAgICB9XSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBFeGFtcGxlIHRlc3Q6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICBpdCgnc2hvdWxkIGJlaGF2ZSBsaWtlIGEgY2FjaGUnLCBpbmplY3QoZnVuY3Rpb24oc3VwZXJDYWNoZSkge1xuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2tleScsICd2YWx1ZScpO1xuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2Fub3RoZXIga2V5JywgJ2Fub3RoZXIgdmFsdWUnKTtcbiAgICAgICAqXG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5pbmZvKCkpLnRvRXF1YWwoe1xuICAgICAgICogICAgICBpZDogJ3N1cGVyLWNhY2hlJyxcbiAgICAgICAqICAgICAgc2l6ZTogMlxuICAgICAgICogICAgfSk7XG4gICAgICAgKlxuICAgICAgICogICAgc3VwZXJDYWNoZS5yZW1vdmUoJ2Fub3RoZXIga2V5Jyk7XG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5nZXQoJ2Fub3RoZXIga2V5JykpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAqXG4gICAgICAgKiAgICBzdXBlckNhY2hlLnJlbW92ZUFsbCgpO1xuICAgICAgICogICAgZXhwZWN0KHN1cGVyQ2FjaGUuaW5mbygpKS50b0VxdWFsKHtcbiAgICAgICAqICAgICAgaWQ6ICdzdXBlci1jYWNoZScsXG4gICAgICAgKiAgICAgIHNpemU6IDBcbiAgICAgICAqICAgIH0pO1xuICAgICAgICogIH0pKTtcbiAgICAgICAqIGBgYFxuICAgICAgICovXG4gICAgICByZXR1cm4gY2FjaGVzW2NhY2hlSWRdID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjcHV0XG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBJbnNlcnRzIGEgbmFtZWQgZW50cnkgaW50byB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdCB0byBiZVxuICAgICAgICAgKiByZXRyaWV2ZWQgbGF0ZXIsIGFuZCBpbmNyZW1lbnRpbmcgdGhlIHNpemUgb2YgdGhlIGNhY2hlIGlmIHRoZSBrZXkgd2FzIG5vdCBhbHJlYWR5XG4gICAgICAgICAqIHByZXNlbnQgaW4gdGhlIGNhY2hlLiBJZiBiZWhhdmluZyBsaWtlIGFuIExSVSBjYWNoZSwgaXQgd2lsbCBhbHNvIHJlbW92ZSBzdGFsZVxuICAgICAgICAgKiBlbnRyaWVzIGZyb20gdGhlIHNldC5cbiAgICAgICAgICpcbiAgICAgICAgICogSXQgd2lsbCBub3QgaW5zZXJ0IHVuZGVmaW5lZCB2YWx1ZXMgaW50byB0aGUgY2FjaGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgdGhlIGtleSB1bmRlciB3aGljaCB0aGUgY2FjaGVkIGRhdGEgaXMgc3RvcmVkLlxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIHRoZSB2YWx1ZSB0byBzdG9yZSBhbG9uZ3NpZGUgdGhlIGtleS4gSWYgaXQgaXMgdW5kZWZpbmVkLCB0aGUga2V5XG4gICAgICAgICAqICAgIHdpbGwgbm90IGJlIHN0b3JlZC5cbiAgICAgICAgICogQHJldHVybnMgeyp9IHRoZSB2YWx1ZSBzdG9yZWQuXG4gICAgICAgICAqL1xuICAgICAgICBwdXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICBpZiAoY2FwYWNpdHkgPCBOdW1iZXIuTUFYX1ZBTFVFKSB7XG4gICAgICAgICAgICB2YXIgbHJ1RW50cnkgPSBscnVIYXNoW2tleV0gfHwgKGxydUhhc2hba2V5XSA9IHtrZXk6IGtleX0pO1xuXG4gICAgICAgICAgICByZWZyZXNoKGxydUVudHJ5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSByZXR1cm47XG4gICAgICAgICAgaWYgKCEoa2V5IGluIGRhdGEpKSBzaXplKys7XG4gICAgICAgICAgZGF0YVtrZXldID0gdmFsdWU7XG5cbiAgICAgICAgICBpZiAoc2l6ZSA+IGNhcGFjaXR5KSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShzdGFsZUVuZC5rZXkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI2dldFxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogUmV0cmlldmVzIG5hbWVkIGRhdGEgc3RvcmVkIGluIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgb2YgdGhlIGRhdGEgdG8gYmUgcmV0cmlldmVkXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgc3RvcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICBpZiAoY2FwYWNpdHkgPCBOdW1iZXIuTUFYX1ZBTFVFKSB7XG4gICAgICAgICAgICB2YXIgbHJ1RW50cnkgPSBscnVIYXNoW2tleV07XG5cbiAgICAgICAgICAgIGlmICghbHJ1RW50cnkpIHJldHVybjtcblxuICAgICAgICAgICAgcmVmcmVzaChscnVFbnRyeSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcbiAgICAgICAgfSxcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjcmVtb3ZlXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBSZW1vdmVzIGFuIGVudHJ5IGZyb20gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgdGhlIGtleSBvZiB0aGUgZW50cnkgdG8gYmUgcmVtb3ZlZFxuICAgICAgICAgKi9cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICBpZiAoY2FwYWNpdHkgPCBOdW1iZXIuTUFYX1ZBTFVFKSB7XG4gICAgICAgICAgICB2YXIgbHJ1RW50cnkgPSBscnVIYXNoW2tleV07XG5cbiAgICAgICAgICAgIGlmICghbHJ1RW50cnkpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKGxydUVudHJ5ID09IGZyZXNoRW5kKSBmcmVzaEVuZCA9IGxydUVudHJ5LnA7XG4gICAgICAgICAgICBpZiAobHJ1RW50cnkgPT0gc3RhbGVFbmQpIHN0YWxlRW5kID0gbHJ1RW50cnkubjtcbiAgICAgICAgICAgIGxpbmsobHJ1RW50cnkubixscnVFbnRyeS5wKTtcblxuICAgICAgICAgICAgZGVsZXRlIGxydUhhc2hba2V5XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xuICAgICAgICAgIHNpemUtLTtcbiAgICAgICAgfSxcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjcmVtb3ZlQWxsXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBDbGVhcnMgdGhlIGNhY2hlIG9iamVjdCBvZiBhbnkgZW50cmllcy5cbiAgICAgICAgICovXG4gICAgICAgIHJlbW92ZUFsbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGF0YSA9IHt9O1xuICAgICAgICAgIHNpemUgPSAwO1xuICAgICAgICAgIGxydUhhc2ggPSB7fTtcbiAgICAgICAgICBmcmVzaEVuZCA9IHN0YWxlRW5kID0gbnVsbDtcbiAgICAgICAgfSxcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjZGVzdHJveVxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogRGVzdHJveXMgdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QgZW50aXJlbHksXG4gICAgICAgICAqIHJlbW92aW5nIGl0IGZyb20gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5ICRjYWNoZUZhY3Rvcnl9IHNldC5cbiAgICAgICAgICovXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGRhdGEgPSBudWxsO1xuICAgICAgICAgIHN0YXRzID0gbnVsbDtcbiAgICAgICAgICBscnVIYXNoID0gbnVsbDtcbiAgICAgICAgICBkZWxldGUgY2FjaGVzW2NhY2hlSWRdO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNpbmZvXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBSZXRyaWV2ZSBpbmZvcm1hdGlvbiByZWdhcmRpbmcgYSBwYXJ0aWN1bGFyIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybnMge29iamVjdH0gYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAgICAgKiAgIDx1bD5cbiAgICAgICAgICogICAgIDxsaT4qKmlkKio6IHRoZSBpZCBvZiB0aGUgY2FjaGUgaW5zdGFuY2U8L2xpPlxuICAgICAgICAgKiAgICAgPGxpPioqc2l6ZSoqOiB0aGUgbnVtYmVyIG9mIGVudHJpZXMga2VwdCBpbiB0aGUgY2FjaGUgaW5zdGFuY2U8L2xpPlxuICAgICAgICAgKiAgICAgPGxpPioqLi4uKio6IGFueSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgZnJvbSB0aGUgb3B0aW9ucyBvYmplY3Qgd2hlbiBjcmVhdGluZyB0aGVcbiAgICAgICAgICogICAgICAgY2FjaGUuPC9saT5cbiAgICAgICAgICogICA8L3VsPlxuICAgICAgICAgKi9cbiAgICAgICAgaW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgc3RhdHMsIHtzaXplOiBzaXplfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBtYWtlcyB0aGUgYGVudHJ5YCB0aGUgZnJlc2hFbmQgb2YgdGhlIExSVSBsaW5rZWQgbGlzdFxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZWZyZXNoKGVudHJ5KSB7XG4gICAgICAgIGlmIChlbnRyeSAhPSBmcmVzaEVuZCkge1xuICAgICAgICAgIGlmICghc3RhbGVFbmQpIHtcbiAgICAgICAgICAgIHN0YWxlRW5kID0gZW50cnk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzdGFsZUVuZCA9PSBlbnRyeSkge1xuICAgICAgICAgICAgc3RhbGVFbmQgPSBlbnRyeS5uO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpbmsoZW50cnkubiwgZW50cnkucCk7XG4gICAgICAgICAgbGluayhlbnRyeSwgZnJlc2hFbmQpO1xuICAgICAgICAgIGZyZXNoRW5kID0gZW50cnk7XG4gICAgICAgICAgZnJlc2hFbmQubiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuXG4gICAgICAvKipcbiAgICAgICAqIGJpZGlyZWN0aW9uYWxseSBsaW5rcyB0d28gZW50cmllcyBvZiB0aGUgTFJVIGxpbmtlZCBsaXN0XG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGxpbmsobmV4dEVudHJ5LCBwcmV2RW50cnkpIHtcbiAgICAgICAgaWYgKG5leHRFbnRyeSAhPSBwcmV2RW50cnkpIHtcbiAgICAgICAgICBpZiAobmV4dEVudHJ5KSBuZXh0RW50cnkucCA9IHByZXZFbnRyeTsgLy9wIHN0YW5kcyBmb3IgcHJldmlvdXMsICdwcmV2JyBkaWRuJ3QgbWluaWZ5XG4gICAgICAgICAgaWYgKHByZXZFbnRyeSkgcHJldkVudHJ5Lm4gPSBuZXh0RW50cnk7IC8vbiBzdGFuZHMgZm9yIG5leHQsICduZXh0JyBkaWRuJ3QgbWluaWZ5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5I2luZm9cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEdldCBpbmZvcm1hdGlvbiBhYm91dCBhbGwgdGhlIGNhY2hlcyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IC0ga2V5LXZhbHVlIG1hcCBvZiBgY2FjaGVJZGAgdG8gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGBjYWNoZSNpbmZvYFxuICAgKi9cbiAgICBjYWNoZUZhY3RvcnkuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGluZm8gPSB7fTtcbiAgICAgIGZvckVhY2goY2FjaGVzLCBmdW5jdGlvbihjYWNoZSwgY2FjaGVJZCkge1xuICAgICAgICBpbmZvW2NhY2hlSWRdID0gY2FjaGUuaW5mbygpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNhY2hlRmFjdG9yeSNnZXRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEdldCBhY2Nlc3MgdG8gYSBjYWNoZSBvYmplY3QgYnkgdGhlIGBjYWNoZUlkYCB1c2VkIHdoZW4gaXQgd2FzIGNyZWF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUlkIE5hbWUgb3IgaWQgb2YgYSBjYWNoZSB0byBhY2Nlc3MuXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IENhY2hlIG9iamVjdCBpZGVudGlmaWVkIGJ5IHRoZSBjYWNoZUlkIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoIGNhY2hlLlxuICAgKi9cbiAgICBjYWNoZUZhY3RvcnkuZ2V0ID0gZnVuY3Rpb24oY2FjaGVJZCkge1xuICAgICAgcmV0dXJuIGNhY2hlc1tjYWNoZUlkXTtcbiAgICB9O1xuXG5cbiAgICByZXR1cm4gY2FjaGVGYWN0b3J5O1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkdGVtcGxhdGVDYWNoZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGZpcnN0IHRpbWUgYSB0ZW1wbGF0ZSBpcyB1c2VkLCBpdCBpcyBsb2FkZWQgaW4gdGhlIHRlbXBsYXRlIGNhY2hlIGZvciBxdWljayByZXRyaWV2YWwuIFlvdVxuICogY2FuIGxvYWQgdGVtcGxhdGVzIGRpcmVjdGx5IGludG8gdGhlIGNhY2hlIGluIGEgYHNjcmlwdGAgdGFnLCBvciBieSBjb25zdW1pbmcgdGhlXG4gKiBgJHRlbXBsYXRlQ2FjaGVgIHNlcnZpY2UgZGlyZWN0bHkuXG4gKlxuICogQWRkaW5nIHZpYSB0aGUgYHNjcmlwdGAgdGFnOlxuICpcbiAqIGBgYGh0bWxcbiAqICAgPHNjcmlwdCB0eXBlPVwidGV4dC9uZy10ZW1wbGF0ZVwiIGlkPVwidGVtcGxhdGVJZC5odG1sXCI+XG4gKiAgICAgPHA+VGhpcyBpcyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGU8L3A+XG4gKiAgIDwvc2NyaXB0PlxuICogYGBgXG4gKlxuICogKipOb3RlOioqIHRoZSBgc2NyaXB0YCB0YWcgY29udGFpbmluZyB0aGUgdGVtcGxhdGUgZG9lcyBub3QgbmVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYGhlYWRgIG9mXG4gKiB0aGUgZG9jdW1lbnQsIGJ1dCBpdCBtdXN0IGJlIGEgZGVzY2VuZGVudCBvZiB0aGUge0BsaW5rIG5nLiRyb290RWxlbWVudCAkcm9vdEVsZW1lbnR9IChJRSxcbiAqIGVsZW1lbnQgd2l0aCBuZy1hcHAgYXR0cmlidXRlKSwgb3RoZXJ3aXNlIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlIGlnbm9yZWQuXG4gKlxuICogQWRkaW5nIHZpYSB0aGUgJHRlbXBsYXRlQ2FjaGUgc2VydmljZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIG15QXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJywgW10pO1xuICogbXlBcHAucnVuKGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gKiAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgndGVtcGxhdGVJZC5odG1sJywgJ1RoaXMgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRlbXBsYXRlJyk7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFRvIHJldHJpZXZlIHRoZSB0ZW1wbGF0ZSBsYXRlciwgc2ltcGx5IHVzZSBpdCBpbiB5b3VyIEhUTUw6XG4gKiBgYGBodG1sXG4gKiA8ZGl2IG5nLWluY2x1ZGU9XCIgJ3RlbXBsYXRlSWQuaHRtbCcgXCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBvciBnZXQgaXQgdmlhIEphdmFzY3JpcHQ6XG4gKiBgYGBqc1xuICogJHRlbXBsYXRlQ2FjaGUuZ2V0KCd0ZW1wbGF0ZUlkLmh0bWwnKVxuICogYGBgXG4gKlxuICogU2VlIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5ICRjYWNoZUZhY3Rvcnl9LlxuICpcbiAqL1xuZnVuY3Rpb24gJFRlbXBsYXRlQ2FjaGVQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckY2FjaGVGYWN0b3J5JywgZnVuY3Rpb24oJGNhY2hlRmFjdG9yeSkge1xuICAgIHJldHVybiAkY2FjaGVGYWN0b3J5KCd0ZW1wbGF0ZXMnKTtcbiAgfV07XG59XG5cbi8qICEgVkFSSUFCTEUvRlVOQ1RJT04gTkFNSU5HIENPTlZFTlRJT05TIFRIQVQgQVBQTFkgVE8gVEhJUyBGSUxFIVxuICpcbiAqIERPTS1yZWxhdGVkIHZhcmlhYmxlczpcbiAqXG4gKiAtIFwibm9kZVwiIC0gRE9NIE5vZGVcbiAqIC0gXCJlbGVtZW50XCIgLSBET00gRWxlbWVudCBvciBOb2RlXG4gKiAtIFwiJG5vZGVcIiBvciBcIiRlbGVtZW50XCIgLSBqcUxpdGUtd3JhcHBlZCBub2RlIG9yIGVsZW1lbnRcbiAqXG4gKlxuICogQ29tcGlsZXIgcmVsYXRlZCBzdHVmZjpcbiAqXG4gKiAtIFwibGlua0ZuXCIgLSBsaW5raW5nIGZuIG9mIGEgc2luZ2xlIGRpcmVjdGl2ZVxuICogLSBcIm5vZGVMaW5rRm5cIiAtIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhbGwgbGlua2luZyBmbnMgZm9yIGEgcGFydGljdWxhciBub2RlXG4gKiAtIFwiY2hpbGRMaW5rRm5cIiAtICBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYWxsIGxpbmtpbmcgZm5zIGZvciBjaGlsZCBub2RlcyBvZiBhIHBhcnRpY3VsYXIgbm9kZVxuICogLSBcImNvbXBvc2l0ZUxpbmtGblwiIC0gZnVuY3Rpb24gdGhhdCBhZ2dyZWdhdGVzIGFsbCBsaW5raW5nIGZucyBmb3IgYSBjb21waWxhdGlvbiByb290IChub2RlTGlzdClcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRjb21waWxlXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29tcGlsZXMgYW4gSFRNTCBzdHJpbmcgb3IgRE9NIGludG8gYSB0ZW1wbGF0ZSBhbmQgcHJvZHVjZXMgYSB0ZW1wbGF0ZSBmdW5jdGlvbiwgd2hpY2hcbiAqIGNhbiB0aGVuIGJlIHVzZWQgdG8gbGluayB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBgc2NvcGVgfSBhbmQgdGhlIHRlbXBsYXRlIHRvZ2V0aGVyLlxuICpcbiAqIFRoZSBjb21waWxhdGlvbiBpcyBhIHByb2Nlc3Mgb2Ygd2Fsa2luZyB0aGUgRE9NIHRyZWUgYW5kIG1hdGNoaW5nIERPTSBlbGVtZW50cyB0b1xuICoge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlIGRpcmVjdGl2ZXN9LlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogVGhpcyBkb2N1bWVudCBpcyBhbiBpbi1kZXB0aCByZWZlcmVuY2Ugb2YgYWxsIGRpcmVjdGl2ZSBvcHRpb25zLlxuICogRm9yIGEgZ2VudGxlIGludHJvZHVjdGlvbiB0byBkaXJlY3RpdmVzIHdpdGggZXhhbXBsZXMgb2YgY29tbW9uIHVzZSBjYXNlcyxcbiAqIHNlZSB0aGUge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmUgZ3VpZGV9LlxuICogPC9kaXY+XG4gKlxuICogIyMgQ29tcHJlaGVuc2l2ZSBEaXJlY3RpdmUgQVBJXG4gKlxuICogVGhlcmUgYXJlIG1hbnkgZGlmZmVyZW50IG9wdGlvbnMgZm9yIGEgZGlyZWN0aXZlLlxuICpcbiAqIFRoZSBkaWZmZXJlbmNlIHJlc2lkZXMgaW4gdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmFjdG9yeSBmdW5jdGlvbi5cbiAqIFlvdSBjYW4gZWl0aGVyIHJldHVybiBhIFwiRGlyZWN0aXZlIERlZmluaXRpb24gT2JqZWN0XCIgKHNlZSBiZWxvdykgdGhhdCBkZWZpbmVzIHRoZSBkaXJlY3RpdmUgcHJvcGVydGllcyxcbiAqIG9yIGp1c3QgdGhlIGBwb3N0TGlua2AgZnVuY3Rpb24gKGFsbCBvdGhlciBwcm9wZXJ0aWVzIHdpbGwgaGF2ZSB0aGUgZGVmYXVsdCB2YWx1ZXMpLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1zdWNjZXNzXCI+XG4gKiAqKkJlc3QgUHJhY3RpY2U6KiogSXQncyByZWNvbW1lbmRlZCB0byB1c2UgdGhlIFwiZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0XCIgZm9ybS5cbiAqIDwvZGl2PlxuICpcbiAqIEhlcmUncyBhbiBleGFtcGxlIGRpcmVjdGl2ZSBkZWNsYXJlZCB3aXRoIGEgRGlyZWN0aXZlIERlZmluaXRpb24gT2JqZWN0OlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKC4uLik7XG4gKlxuICogICBteU1vZHVsZS5kaXJlY3RpdmUoJ2RpcmVjdGl2ZU5hbWUnLCBmdW5jdGlvbiBmYWN0b3J5KGluamVjdGFibGVzKSB7XG4gKiAgICAgdmFyIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3QgPSB7XG4gKiAgICAgICBwcmlvcml0eTogMCxcbiAqICAgICAgIHRlbXBsYXRlOiAnPGRpdj48L2Rpdj4nLCAvLyBvciAvLyBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7IC4uLiB9LFxuICogICAgICAgLy8gb3JcbiAqICAgICAgIC8vIHRlbXBsYXRlVXJsOiAnZGlyZWN0aXZlLmh0bWwnLCAvLyBvciAvLyBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7IC4uLiB9LFxuICogICAgICAgdHJhbnNjbHVkZTogZmFsc2UsXG4gKiAgICAgICByZXN0cmljdDogJ0EnLFxuICogICAgICAgdGVtcGxhdGVOYW1lc3BhY2U6ICdodG1sJyxcbiAqICAgICAgIHNjb3BlOiBmYWxzZSxcbiAqICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHRyYW5zY2x1ZGUsIG90aGVySW5qZWN0YWJsZXMpIHsgLi4uIH0sXG4gKiAgICAgICBjb250cm9sbGVyQXM6ICdzdHJpbmdBbGlhcycsXG4gKiAgICAgICByZXF1aXJlOiAnc2libGluZ0RpcmVjdGl2ZU5hbWUnLCAvLyBvciAvLyBbJ15wYXJlbnREaXJlY3RpdmVOYW1lJywgJz9vcHRpb25hbERpcmVjdGl2ZU5hbWUnLCAnP15vcHRpb25hbFBhcmVudCddLFxuICogICAgICAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCB0cmFuc2NsdWRlKSB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgcHJlOiBmdW5jdGlvbiBwcmVMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9LFxuICogICAgICAgICAgIHBvc3Q6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9XG4gKiAgICAgICAgIH1cbiAqICAgICAgICAgLy8gb3JcbiAqICAgICAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uIHBvc3RMaW5rKCAuLi4gKSB7IC4uLiB9XG4gKiAgICAgICB9LFxuICogICAgICAgLy8gb3JcbiAqICAgICAgIC8vIGxpbms6IHtcbiAqICAgICAgIC8vICBwcmU6IGZ1bmN0aW9uIHByZUxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH0sXG4gKiAgICAgICAvLyAgcG9zdDogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH1cbiAqICAgICAgIC8vIH1cbiAqICAgICAgIC8vIG9yXG4gKiAgICAgICAvLyBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayggLi4uICkgeyAuLi4gfVxuICogICAgIH07XG4gKiAgICAgcmV0dXJuIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3Q7XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBBbnkgdW5zcGVjaWZpZWQgb3B0aW9ucyB3aWxsIHVzZSB0aGUgZGVmYXVsdCB2YWx1ZS4gWW91IGNhbiBzZWUgdGhlIGRlZmF1bHQgdmFsdWVzIGJlbG93LlxuICogPC9kaXY+XG4gKlxuICogVGhlcmVmb3JlIHRoZSBhYm92ZSBjYW4gYmUgc2ltcGxpZmllZCBhczpcbiAqXG4gKiBgYGBqc1xuICogICB2YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSguLi4pO1xuICpcbiAqICAgbXlNb2R1bGUuZGlyZWN0aXZlKCdkaXJlY3RpdmVOYW1lJywgZnVuY3Rpb24gZmFjdG9yeShpbmplY3RhYmxlcykge1xuICogICAgIHZhciBkaXJlY3RpdmVEZWZpbml0aW9uT2JqZWN0ID0ge1xuICogICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHsgLi4uIH1cbiAqICAgICB9O1xuICogICAgIHJldHVybiBkaXJlY3RpdmVEZWZpbml0aW9uT2JqZWN0O1xuICogICAgIC8vIG9yXG4gKiAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzKSB7IC4uLiB9XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICpcbiAqXG4gKiAjIyMgRGlyZWN0aXZlIERlZmluaXRpb24gT2JqZWN0XG4gKlxuICogVGhlIGRpcmVjdGl2ZSBkZWZpbml0aW9uIG9iamVjdCBwcm92aWRlcyBpbnN0cnVjdGlvbnMgdG8gdGhlIHtAbGluayBuZy4kY29tcGlsZVxuICogY29tcGlsZXJ9LiBUaGUgYXR0cmlidXRlcyBhcmU6XG4gKlxuICogIyMjIyBgbXVsdGlFbGVtZW50YFxuICogV2hlbiB0aGlzIHByb3BlcnR5IGlzIHNldCB0byB0cnVlLCB0aGUgSFRNTCBjb21waWxlciB3aWxsIGNvbGxlY3QgRE9NIG5vZGVzIGJldHdlZW5cbiAqIG5vZGVzIHdpdGggdGhlIGF0dHJpYnV0ZXMgYGRpcmVjdGl2ZS1uYW1lLXN0YXJ0YCBhbmQgYGRpcmVjdGl2ZS1uYW1lLWVuZGAsIGFuZCBncm91cCB0aGVtXG4gKiB0b2dldGhlciBhcyB0aGUgZGlyZWN0aXZlIGVsZW1lbnRzLiBJdCBpcyByZWNvbW1lbmRlZCB0aGF0IHRoaXMgZmVhdHVyZSBiZSB1c2VkIG9uIGRpcmVjdGl2ZXNcbiAqIHdoaWNoIGFyZSBub3Qgc3RyaWN0bHkgYmVoYXZpb3VyYWwgKHN1Y2ggYXMge0BsaW5rIG5nQ2xpY2t9KSwgYW5kIHdoaWNoXG4gKiBkbyBub3QgbWFuaXB1bGF0ZSBvciByZXBsYWNlIGNoaWxkIG5vZGVzIChzdWNoIGFzIHtAbGluayBuZ0luY2x1ZGV9KS5cbiAqXG4gKiAjIyMjIGBwcmlvcml0eWBcbiAqIFdoZW4gdGhlcmUgYXJlIG11bHRpcGxlIGRpcmVjdGl2ZXMgZGVmaW5lZCBvbiBhIHNpbmdsZSBET00gZWxlbWVudCwgc29tZXRpbWVzIGl0XG4gKiBpcyBuZWNlc3NhcnkgdG8gc3BlY2lmeSB0aGUgb3JkZXIgaW4gd2hpY2ggdGhlIGRpcmVjdGl2ZXMgYXJlIGFwcGxpZWQuIFRoZSBgcHJpb3JpdHlgIGlzIHVzZWRcbiAqIHRvIHNvcnQgdGhlIGRpcmVjdGl2ZXMgYmVmb3JlIHRoZWlyIGBjb21waWxlYCBmdW5jdGlvbnMgZ2V0IGNhbGxlZC4gUHJpb3JpdHkgaXMgZGVmaW5lZCBhcyBhXG4gKiBudW1iZXIuIERpcmVjdGl2ZXMgd2l0aCBncmVhdGVyIG51bWVyaWNhbCBgcHJpb3JpdHlgIGFyZSBjb21waWxlZCBmaXJzdC4gUHJlLWxpbmsgZnVuY3Rpb25zXG4gKiBhcmUgYWxzbyBydW4gaW4gcHJpb3JpdHkgb3JkZXIsIGJ1dCBwb3N0LWxpbmsgZnVuY3Rpb25zIGFyZSBydW4gaW4gcmV2ZXJzZSBvcmRlci4gVGhlIG9yZGVyXG4gKiBvZiBkaXJlY3RpdmVzIHdpdGggdGhlIHNhbWUgcHJpb3JpdHkgaXMgdW5kZWZpbmVkLiBUaGUgZGVmYXVsdCBwcmlvcml0eSBpcyBgMGAuXG4gKlxuICogIyMjIyBgdGVybWluYWxgXG4gKiBJZiBzZXQgdG8gdHJ1ZSB0aGVuIHRoZSBjdXJyZW50IGBwcmlvcml0eWAgd2lsbCBiZSB0aGUgbGFzdCBzZXQgb2YgZGlyZWN0aXZlc1xuICogd2hpY2ggd2lsbCBleGVjdXRlIChhbnkgZGlyZWN0aXZlcyBhdCB0aGUgY3VycmVudCBwcmlvcml0eSB3aWxsIHN0aWxsIGV4ZWN1dGVcbiAqIGFzIHRoZSBvcmRlciBvZiBleGVjdXRpb24gb24gc2FtZSBgcHJpb3JpdHlgIGlzIHVuZGVmaW5lZCkuIE5vdGUgdGhhdCBleHByZXNzaW9uc1xuICogYW5kIG90aGVyIGRpcmVjdGl2ZXMgdXNlZCBpbiB0aGUgZGlyZWN0aXZlJ3MgdGVtcGxhdGUgd2lsbCBhbHNvIGJlIGV4Y2x1ZGVkIGZyb20gZXhlY3V0aW9uLlxuICpcbiAqICMjIyMgYHNjb3BlYFxuICogKipJZiBzZXQgdG8gYHRydWVgLCoqIHRoZW4gYSBuZXcgc2NvcGUgd2lsbCBiZSBjcmVhdGVkIGZvciB0aGlzIGRpcmVjdGl2ZS4gSWYgbXVsdGlwbGUgZGlyZWN0aXZlcyBvbiB0aGVcbiAqIHNhbWUgZWxlbWVudCByZXF1ZXN0IGEgbmV3IHNjb3BlLCBvbmx5IG9uZSBuZXcgc2NvcGUgaXMgY3JlYXRlZC4gVGhlIG5ldyBzY29wZSBydWxlIGRvZXMgbm90XG4gKiBhcHBseSBmb3IgdGhlIHJvb3Qgb2YgdGhlIHRlbXBsYXRlIHNpbmNlIHRoZSByb290IG9mIHRoZSB0ZW1wbGF0ZSBhbHdheXMgZ2V0cyBhIG5ldyBzY29wZS5cbiAqXG4gKiAqKklmIHNldCB0byBge31gIChvYmplY3QgaGFzaCksKiogdGhlbiBhIG5ldyBcImlzb2xhdGVcIiBzY29wZSBpcyBjcmVhdGVkLiBUaGUgJ2lzb2xhdGUnIHNjb3BlIGRpZmZlcnMgZnJvbVxuICogbm9ybWFsIHNjb3BlIGluIHRoYXQgaXQgZG9lcyBub3QgcHJvdG90eXBpY2FsbHkgaW5oZXJpdCBmcm9tIHRoZSBwYXJlbnQgc2NvcGUuIFRoaXMgaXMgdXNlZnVsXG4gKiB3aGVuIGNyZWF0aW5nIHJldXNhYmxlIGNvbXBvbmVudHMsIHdoaWNoIHNob3VsZCBub3QgYWNjaWRlbnRhbGx5IHJlYWQgb3IgbW9kaWZ5IGRhdGEgaW4gdGhlXG4gKiBwYXJlbnQgc2NvcGUuXG4gKlxuICogVGhlICdpc29sYXRlJyBzY29wZSB0YWtlcyBhbiBvYmplY3QgaGFzaCB3aGljaCBkZWZpbmVzIGEgc2V0IG9mIGxvY2FsIHNjb3BlIHByb3BlcnRpZXNcbiAqIGRlcml2ZWQgZnJvbSB0aGUgcGFyZW50IHNjb3BlLiBUaGVzZSBsb2NhbCBwcm9wZXJ0aWVzIGFyZSB1c2VmdWwgZm9yIGFsaWFzaW5nIHZhbHVlcyBmb3JcbiAqIHRlbXBsYXRlcy4gTG9jYWxzIGRlZmluaXRpb24gaXMgYSBoYXNoIG9mIGxvY2FsIHNjb3BlIHByb3BlcnR5IHRvIGl0cyBzb3VyY2U6XG4gKlxuICogKiBgQGAgb3IgYEBhdHRyYCAtIGJpbmQgYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSB0byB0aGUgdmFsdWUgb2YgRE9NIGF0dHJpYnV0ZS4gVGhlIHJlc3VsdCBpc1xuICogICBhbHdheXMgYSBzdHJpbmcgc2luY2UgRE9NIGF0dHJpYnV0ZXMgYXJlIHN0cmluZ3MuIElmIG5vIGBhdHRyYCBuYW1lIGlzIHNwZWNpZmllZCAgdGhlbiB0aGVcbiAqICAgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZS5cbiAqICAgR2l2ZW4gYDx3aWRnZXQgbXktYXR0cj1cImhlbGxvIHt7bmFtZX19XCI+YCBhbmQgd2lkZ2V0IGRlZmluaXRpb25cbiAqICAgb2YgYHNjb3BlOiB7IGxvY2FsTmFtZTonQG15QXR0cicgfWAsIHRoZW4gd2lkZ2V0IHNjb3BlIHByb3BlcnR5IGBsb2NhbE5hbWVgIHdpbGwgcmVmbGVjdFxuICogICB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIGBoZWxsbyB7e25hbWV9fWAuIEFzIHRoZSBgbmFtZWAgYXR0cmlidXRlIGNoYW5nZXMgc28gd2lsbCB0aGVcbiAqICAgYGxvY2FsTmFtZWAgcHJvcGVydHkgb24gdGhlIHdpZGdldCBzY29wZS4gVGhlIGBuYW1lYCBpcyByZWFkIGZyb20gdGhlIHBhcmVudCBzY29wZSAobm90XG4gKiAgIGNvbXBvbmVudCBzY29wZSkuXG4gKlxuICogKiBgPWAgb3IgYD1hdHRyYCAtIHNldCB1cCBiaS1kaXJlY3Rpb25hbCBiaW5kaW5nIGJldHdlZW4gYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSBhbmQgdGhlXG4gKiAgIHBhcmVudCBzY29wZSBwcm9wZXJ0eSBvZiBuYW1lIGRlZmluZWQgdmlhIHRoZSB2YWx1ZSBvZiB0aGUgYGF0dHJgIGF0dHJpYnV0ZS4gSWYgbm8gYGF0dHJgXG4gKiAgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsIG5hbWUuXG4gKiAgIEdpdmVuIGA8d2lkZ2V0IG15LWF0dHI9XCJwYXJlbnRNb2RlbFwiPmAgYW5kIHdpZGdldCBkZWZpbml0aW9uIG9mXG4gKiAgIGBzY29wZTogeyBsb2NhbE1vZGVsOic9bXlBdHRyJyB9YCwgdGhlbiB3aWRnZXQgc2NvcGUgcHJvcGVydHkgYGxvY2FsTW9kZWxgIHdpbGwgcmVmbGVjdCB0aGVcbiAqICAgdmFsdWUgb2YgYHBhcmVudE1vZGVsYCBvbiB0aGUgcGFyZW50IHNjb3BlLiBBbnkgY2hhbmdlcyB0byBgcGFyZW50TW9kZWxgIHdpbGwgYmUgcmVmbGVjdGVkXG4gKiAgIGluIGBsb2NhbE1vZGVsYCBhbmQgYW55IGNoYW5nZXMgaW4gYGxvY2FsTW9kZWxgIHdpbGwgcmVmbGVjdCBpbiBgcGFyZW50TW9kZWxgLiBJZiB0aGUgcGFyZW50XG4gKiAgIHNjb3BlIHByb3BlcnR5IGRvZXNuJ3QgZXhpc3QsIGl0IHdpbGwgdGhyb3cgYSBOT05fQVNTSUdOQUJMRV9NT0RFTF9FWFBSRVNTSU9OIGV4Y2VwdGlvbi4gWW91XG4gKiAgIGNhbiBhdm9pZCB0aGlzIGJlaGF2aW9yIHVzaW5nIGA9P2Agb3IgYD0/YXR0cmAgaW4gb3JkZXIgdG8gZmxhZyB0aGUgcHJvcGVydHkgYXMgb3B0aW9uYWwuIElmXG4gKiAgIHlvdSB3YW50IHRvIHNoYWxsb3cgd2F0Y2ggZm9yIGNoYW5nZXMgKGkuZS4gJHdhdGNoQ29sbGVjdGlvbiBpbnN0ZWFkIG9mICR3YXRjaCkgeW91IGNhbiB1c2VcbiAqICAgYD0qYCBvciBgPSphdHRyYCAoYD0qP2Agb3IgYD0qP2F0dHJgIGlmIHRoZSBwcm9wZXJ0eSBpcyBvcHRpb25hbCkuXG4gKlxuICogKiBgJmAgb3IgYCZhdHRyYCAtIHByb3ZpZGVzIGEgd2F5IHRvIGV4ZWN1dGUgYW4gZXhwcmVzc2lvbiBpbiB0aGUgY29udGV4dCBvZiB0aGUgcGFyZW50IHNjb3BlLlxuICogICBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGVcbiAqICAgbG9jYWwgbmFtZS4gR2l2ZW4gYDx3aWRnZXQgbXktYXR0cj1cImNvdW50ID0gY291bnQgKyB2YWx1ZVwiPmAgYW5kIHdpZGdldCBkZWZpbml0aW9uIG9mXG4gKiAgIGBzY29wZTogeyBsb2NhbEZuOicmbXlBdHRyJyB9YCwgdGhlbiBpc29sYXRlIHNjb3BlIHByb3BlcnR5IGBsb2NhbEZuYCB3aWxsIHBvaW50IHRvXG4gKiAgIGEgZnVuY3Rpb24gd3JhcHBlciBmb3IgdGhlIGBjb3VudCA9IGNvdW50ICsgdmFsdWVgIGV4cHJlc3Npb24uIE9mdGVuIGl0J3MgZGVzaXJhYmxlIHRvXG4gKiAgIHBhc3MgZGF0YSBmcm9tIHRoZSBpc29sYXRlZCBzY29wZSB2aWEgYW4gZXhwcmVzc2lvbiB0byB0aGUgcGFyZW50IHNjb3BlLCB0aGlzIGNhbiBiZVxuICogICBkb25lIGJ5IHBhc3NpbmcgYSBtYXAgb2YgbG9jYWwgdmFyaWFibGUgbmFtZXMgYW5kIHZhbHVlcyBpbnRvIHRoZSBleHByZXNzaW9uIHdyYXBwZXIgZm4uXG4gKiAgIEZvciBleGFtcGxlLCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBgaW5jcmVtZW50KGFtb3VudClgIHRoZW4gd2UgY2FuIHNwZWNpZnkgdGhlIGFtb3VudCB2YWx1ZVxuICogICBieSBjYWxsaW5nIHRoZSBgbG9jYWxGbmAgYXMgYGxvY2FsRm4oe2Ftb3VudDogMjJ9KWAuXG4gKlxuICpcbiAqICMjIyMgYGJpbmRUb0NvbnRyb2xsZXJgXG4gKiBXaGVuIGFuIGlzb2xhdGUgc2NvcGUgaXMgdXNlZCBmb3IgYSBjb21wb25lbnQgKHNlZSBhYm92ZSksIGFuZCBgY29udHJvbGxlckFzYCBpcyB1c2VkLCBgYmluZFRvQ29udHJvbGxlcjogdHJ1ZWAgd2lsbFxuICogYWxsb3cgYSBjb21wb25lbnQgdG8gaGF2ZSBpdHMgcHJvcGVydGllcyBib3VuZCB0byB0aGUgY29udHJvbGxlciwgcmF0aGVyIHRoYW4gdG8gc2NvcGUuIFdoZW4gdGhlIGNvbnRyb2xsZXJcbiAqIGlzIGluc3RhbnRpYXRlZCwgdGhlIGluaXRpYWwgdmFsdWVzIG9mIHRoZSBpc29sYXRlIHNjb3BlIGJpbmRpbmdzIGFyZSBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiAjIyMjIGBjb250cm9sbGVyYFxuICogQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gVGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGJlZm9yZSB0aGVcbiAqIHByZS1saW5raW5nIHBoYXNlIGFuZCBpdCBpcyBzaGFyZWQgd2l0aCBvdGhlciBkaXJlY3RpdmVzIChzZWVcbiAqIGByZXF1aXJlYCBhdHRyaWJ1dGUpLiBUaGlzIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byBjb21tdW5pY2F0ZSB3aXRoIGVhY2ggb3RoZXIgYW5kIGF1Z21lbnRcbiAqIGVhY2ggb3RoZXIncyBiZWhhdmlvci4gVGhlIGNvbnRyb2xsZXIgaXMgaW5qZWN0YWJsZSAoYW5kIHN1cHBvcnRzIGJyYWNrZXQgbm90YXRpb24pIHdpdGggdGhlIGZvbGxvd2luZyBsb2NhbHM6XG4gKlxuICogKiBgJHNjb3BlYCAtIEN1cnJlbnQgc2NvcGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50XG4gKiAqIGAkZWxlbWVudGAgLSBDdXJyZW50IGVsZW1lbnRcbiAqICogYCRhdHRyc2AgLSBDdXJyZW50IGF0dHJpYnV0ZXMgb2JqZWN0IGZvciB0aGUgZWxlbWVudFxuICogKiBgJHRyYW5zY2x1ZGVgIC0gQSB0cmFuc2NsdWRlIGxpbmtpbmcgZnVuY3Rpb24gcHJlLWJvdW5kIHRvIHRoZSBjb3JyZWN0IHRyYW5zY2x1c2lvbiBzY29wZTpcbiAqICAgYGZ1bmN0aW9uKFtzY29wZV0sIGNsb25lTGlua2luZ0ZuLCBmdXR1cmVQYXJlbnRFbGVtZW50KWAuXG4gKiAgICAqIGBzY29wZWA6IG9wdGlvbmFsIGFyZ3VtZW50IHRvIG92ZXJyaWRlIHRoZSBzY29wZS5cbiAqICAgICogYGNsb25lTGlua2luZ0ZuYDogb3B0aW9uYWwgYXJndW1lbnQgdG8gY3JlYXRlIGNsb25lcyBvZiB0aGUgb3JpZ2luYWwgdHJhbnNjbHVkZWQgY29udGVudC5cbiAqICAgICogYGZ1dHVyZVBhcmVudEVsZW1lbnRgOlxuICogICAgICAgICogZGVmaW5lcyB0aGUgcGFyZW50IHRvIHdoaWNoIHRoZSBgY2xvbmVMaW5raW5nRm5gIHdpbGwgYWRkIHRoZSBjbG9uZWQgZWxlbWVudHMuXG4gKiAgICAgICAgKiBkZWZhdWx0OiBgJGVsZW1lbnQucGFyZW50KClgIHJlc3AuIGAkZWxlbWVudGAgZm9yIGB0cmFuc2NsdWRlOidlbGVtZW50J2AgcmVzcC4gYHRyYW5zY2x1ZGU6dHJ1ZWAuXG4gKiAgICAgICAgKiBvbmx5IG5lZWRlZCBmb3IgdHJhbnNjbHVkZXMgdGhhdCBhcmUgYWxsb3dlZCB0byBjb250YWluIG5vbiBodG1sIGVsZW1lbnRzIChlLmcuIFNWRyBlbGVtZW50cylcbiAqICAgICAgICAgIGFuZCB3aGVuIHRoZSBgY2xvbmVMaW5raW5GbmAgaXMgcGFzc2VkLFxuICogICAgICAgICAgYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBjcmVhdGVkIGFuZCBjbG9uZWQgaW4gYSBzcGVjaWFsIHdheSB3aGVuIHRoZXkgYXJlIGRlZmluZWQgb3V0c2lkZSB0aGVpclxuICogICAgICAgICAgdXN1YWwgY29udGFpbmVycyAoZS5nLiBsaWtlIGA8c3ZnPmApLlxuICogICAgICAgICogU2VlIGFsc28gdGhlIGBkaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2VgIHByb3BlcnR5LlxuICpcbiAqXG4gKiAjIyMjIGByZXF1aXJlYFxuICogUmVxdWlyZSBhbm90aGVyIGRpcmVjdGl2ZSBhbmQgaW5qZWN0IGl0cyBjb250cm9sbGVyIGFzIHRoZSBmb3VydGggYXJndW1lbnQgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24uIFRoZVxuICogYHJlcXVpcmVgIHRha2VzIGEgc3RyaW5nIG5hbWUgKG9yIGFycmF5IG9mIHN0cmluZ3MpIG9mIHRoZSBkaXJlY3RpdmUocykgdG8gcGFzcyBpbi4gSWYgYW4gYXJyYXkgaXMgdXNlZCwgdGhlXG4gKiBpbmplY3RlZCBhcmd1bWVudCB3aWxsIGJlIGFuIGFycmF5IGluIGNvcnJlc3BvbmRpbmcgb3JkZXIuIElmIG5vIHN1Y2ggZGlyZWN0aXZlIGNhbiBiZVxuICogZm91bmQsIG9yIGlmIHRoZSBkaXJlY3RpdmUgZG9lcyBub3QgaGF2ZSBhIGNvbnRyb2xsZXIsIHRoZW4gYW4gZXJyb3IgaXMgcmFpc2VkLiBUaGUgbmFtZSBjYW4gYmUgcHJlZml4ZWQgd2l0aDpcbiAqXG4gKiAqIChubyBwcmVmaXgpIC0gTG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIG9uIHRoZSBjdXJyZW50IGVsZW1lbnQuIFRocm93IGFuIGVycm9yIGlmIG5vdCBmb3VuZC5cbiAqICogYD9gIC0gQXR0ZW1wdCB0byBsb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgb3IgcGFzcyBgbnVsbGAgdG8gdGhlIGBsaW5rYCBmbiBpZiBub3QgZm91bmQuXG4gKiAqIGBeYCAtIExvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBieSBzZWFyY2hpbmcgdGhlIGVsZW1lbnQgYW5kIGl0cyBwYXJlbnRzLiBUaHJvdyBhbiBlcnJvciBpZiBub3QgZm91bmQuXG4gKiAqIGBeXmAgLSBMb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgYnkgc2VhcmNoaW5nIHRoZSBlbGVtZW50J3MgcGFyZW50cy4gVGhyb3cgYW4gZXJyb3IgaWYgbm90IGZvdW5kLlxuICogKiBgP15gIC0gQXR0ZW1wdCB0byBsb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgYnkgc2VhcmNoaW5nIHRoZSBlbGVtZW50IGFuZCBpdHMgcGFyZW50cyBvciBwYXNzXG4gKiAgIGBudWxsYCB0byB0aGUgYGxpbmtgIGZuIGlmIG5vdCBmb3VuZC5cbiAqICogYD9eXmAgLSBBdHRlbXB0IHRvIGxvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBieSBzZWFyY2hpbmcgdGhlIGVsZW1lbnQncyBwYXJlbnRzLCBvciBwYXNzXG4gKiAgIGBudWxsYCB0byB0aGUgYGxpbmtgIGZuIGlmIG5vdCBmb3VuZC5cbiAqXG4gKlxuICogIyMjIyBgY29udHJvbGxlckFzYFxuICogQ29udHJvbGxlciBhbGlhcyBhdCB0aGUgZGlyZWN0aXZlIHNjb3BlLiBBbiBhbGlhcyBmb3IgdGhlIGNvbnRyb2xsZXIgc28gaXRcbiAqIGNhbiBiZSByZWZlcmVuY2VkIGF0IHRoZSBkaXJlY3RpdmUgdGVtcGxhdGUuIFRoZSBkaXJlY3RpdmUgbmVlZHMgdG8gZGVmaW5lIGEgc2NvcGUgZm9yIHRoaXNcbiAqIGNvbmZpZ3VyYXRpb24gdG8gYmUgdXNlZC4gVXNlZnVsIGluIHRoZSBjYXNlIHdoZW4gZGlyZWN0aXZlIGlzIHVzZWQgYXMgY29tcG9uZW50LlxuICpcbiAqXG4gKiAjIyMjIGByZXN0cmljdGBcbiAqIFN0cmluZyBvZiBzdWJzZXQgb2YgYEVBQ01gIHdoaWNoIHJlc3RyaWN0cyB0aGUgZGlyZWN0aXZlIHRvIGEgc3BlY2lmaWMgZGlyZWN0aXZlXG4gKiBkZWNsYXJhdGlvbiBzdHlsZS4gSWYgb21pdHRlZCwgdGhlIGRlZmF1bHRzIChlbGVtZW50cyBhbmQgYXR0cmlidXRlcykgYXJlIHVzZWQuXG4gKlxuICogKiBgRWAgLSBFbGVtZW50IG5hbWUgKGRlZmF1bHQpOiBgPG15LWRpcmVjdGl2ZT48L215LWRpcmVjdGl2ZT5gXG4gKiAqIGBBYCAtIEF0dHJpYnV0ZSAoZGVmYXVsdCk6IGA8ZGl2IG15LWRpcmVjdGl2ZT1cImV4cFwiPjwvZGl2PmBcbiAqICogYENgIC0gQ2xhc3M6IGA8ZGl2IGNsYXNzPVwibXktZGlyZWN0aXZlOiBleHA7XCI+PC9kaXY+YFxuICogKiBgTWAgLSBDb21tZW50OiBgPCEtLSBkaXJlY3RpdmU6IG15LWRpcmVjdGl2ZSBleHAgLS0+YFxuICpcbiAqXG4gKiAjIyMjIGB0ZW1wbGF0ZU5hbWVzcGFjZWBcbiAqIFN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRvY3VtZW50IHR5cGUgdXNlZCBieSB0aGUgbWFya3VwIGluIHRoZSB0ZW1wbGF0ZS5cbiAqIEFuZ3VsYXJKUyBuZWVkcyB0aGlzIGluZm9ybWF0aW9uIGFzIHRob3NlIGVsZW1lbnRzIG5lZWQgdG8gYmUgY3JlYXRlZCBhbmQgY2xvbmVkXG4gKiBpbiBhIHNwZWNpYWwgd2F5IHdoZW4gdGhleSBhcmUgZGVmaW5lZCBvdXRzaWRlIHRoZWlyIHVzdWFsIGNvbnRhaW5lcnMgbGlrZSBgPHN2Zz5gIGFuZCBgPG1hdGg+YC5cbiAqXG4gKiAqIGBodG1sYCAtIEFsbCByb290IG5vZGVzIGluIHRoZSB0ZW1wbGF0ZSBhcmUgSFRNTC4gUm9vdCBub2RlcyBtYXkgYWxzbyBiZVxuICogICB0b3AtbGV2ZWwgZWxlbWVudHMgc3VjaCBhcyBgPHN2Zz5gIG9yIGA8bWF0aD5gLlxuICogKiBgc3ZnYCAtIFRoZSByb290IG5vZGVzIGluIHRoZSB0ZW1wbGF0ZSBhcmUgU1ZHIGVsZW1lbnRzIChleGNsdWRpbmcgYDxtYXRoPmApLlxuICogKiBgbWF0aGAgLSBUaGUgcm9vdCBub2RlcyBpbiB0aGUgdGVtcGxhdGUgYXJlIE1hdGhNTCBlbGVtZW50cyAoZXhjbHVkaW5nIGA8c3ZnPmApLlxuICpcbiAqIElmIG5vIGB0ZW1wbGF0ZU5hbWVzcGFjZWAgaXMgc3BlY2lmaWVkLCB0aGVuIHRoZSBuYW1lc3BhY2UgaXMgY29uc2lkZXJlZCB0byBiZSBgaHRtbGAuXG4gKlxuICogIyMjIyBgdGVtcGxhdGVgXG4gKiBIVE1MIG1hcmt1cCB0aGF0IG1heTpcbiAqICogUmVwbGFjZSB0aGUgY29udGVudHMgb2YgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgKGRlZmF1bHQpLlxuICogKiBSZXBsYWNlIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50IGl0c2VsZiAoaWYgYHJlcGxhY2VgIGlzIHRydWUgLSBERVBSRUNBVEVEKS5cbiAqICogV3JhcCB0aGUgY29udGVudHMgb2YgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgKGlmIGB0cmFuc2NsdWRlYCBpcyB0cnVlKS5cbiAqXG4gKiBWYWx1ZSBtYXkgYmU6XG4gKlxuICogKiBBIHN0cmluZy4gRm9yIGV4YW1wbGUgYDxkaXYgcmVkLW9uLWhvdmVyPnt7ZGVsZXRlX3N0cn19PC9kaXY+YC5cbiAqICogQSBmdW5jdGlvbiB3aGljaCB0YWtlcyB0d28gYXJndW1lbnRzIGB0RWxlbWVudGAgYW5kIGB0QXR0cnNgIChkZXNjcmliZWQgaW4gdGhlIGBjb21waWxlYFxuICogICBmdW5jdGlvbiBhcGkgYmVsb3cpIGFuZCByZXR1cm5zIGEgc3RyaW5nIHZhbHVlLlxuICpcbiAqXG4gKiAjIyMjIGB0ZW1wbGF0ZVVybGBcbiAqIFRoaXMgaXMgc2ltaWxhciB0byBgdGVtcGxhdGVgIGJ1dCB0aGUgdGVtcGxhdGUgaXMgbG9hZGVkIGZyb20gdGhlIHNwZWNpZmllZCBVUkwsIGFzeW5jaHJvbm91c2x5LlxuICpcbiAqIEJlY2F1c2UgdGVtcGxhdGUgbG9hZGluZyBpcyBhc3luY2hyb25vdXMgdGhlIGNvbXBpbGVyIHdpbGwgc3VzcGVuZCBjb21waWxhdGlvbiBvZiBkaXJlY3RpdmVzIG9uIHRoYXQgZWxlbWVudFxuICogZm9yIGxhdGVyIHdoZW4gdGhlIHRlbXBsYXRlIGhhcyBiZWVuIHJlc29sdmVkLiAgSW4gdGhlIG1lYW50aW1lIGl0IHdpbGwgY29udGludWUgdG8gY29tcGlsZSBhbmQgbGlua1xuICogc2libGluZyBhbmQgcGFyZW50IGVsZW1lbnRzIGFzIHRob3VnaCB0aGlzIGVsZW1lbnQgaGFkIG5vdCBjb250YWluZWQgYW55IGRpcmVjdGl2ZXMuXG4gKlxuICogVGhlIGNvbXBpbGVyIGRvZXMgbm90IHN1c3BlbmQgdGhlIGVudGlyZSBjb21waWxhdGlvbiB0byB3YWl0IGZvciB0ZW1wbGF0ZXMgdG8gYmUgbG9hZGVkIGJlY2F1c2UgdGhpc1xuICogd291bGQgcmVzdWx0IGluIHRoZSB3aG9sZSBhcHAgXCJzdGFsbGluZ1wiIHVudGlsIGFsbCB0ZW1wbGF0ZXMgYXJlIGxvYWRlZCBhc3luY2hyb25vdXNseSAtIGV2ZW4gaW4gdGhlXG4gKiBjYXNlIHdoZW4gb25seSBvbmUgZGVlcGx5IG5lc3RlZCBkaXJlY3RpdmUgaGFzIGB0ZW1wbGF0ZVVybGAuXG4gKlxuICogVGVtcGxhdGUgbG9hZGluZyBpcyBhc3luY2hyb25vdXMgZXZlbiBpZiB0aGUgdGVtcGxhdGUgaGFzIGJlZW4gcHJlbG9hZGVkIGludG8gdGhlIHtAbGluayAkdGVtcGxhdGVDYWNoZX1cbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgYHRlbXBsYXRlVXJsYCBhcyBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIFVSTCBvciBhcyBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHR3b1xuICogYXJndW1lbnRzIGB0RWxlbWVudGAgYW5kIGB0QXR0cnNgIChkZXNjcmliZWQgaW4gdGhlIGBjb21waWxlYCBmdW5jdGlvbiBhcGkgYmVsb3cpIGFuZCByZXR1cm5zXG4gKiBhIHN0cmluZyB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIHVybC4gIEluIGVpdGhlciBjYXNlLCB0aGUgdGVtcGxhdGUgVVJMIGlzIHBhc3NlZCB0aHJvdWdoIHtAbGlua1xuICogJHNjZSNnZXRUcnVzdGVkUmVzb3VyY2VVcmwgJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmx9LlxuICpcbiAqXG4gKiAjIyMjIGByZXBsYWNlYCAoWypERVBSRUNBVEVEKiFdLCB3aWxsIGJlIHJlbW92ZWQgaW4gbmV4dCBtYWpvciByZWxlYXNlIC0gaS5lLiB2Mi4wKVxuICogc3BlY2lmeSB3aGF0IHRoZSB0ZW1wbGF0ZSBzaG91bGQgcmVwbGFjZS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqXG4gKiAqIGB0cnVlYCAtIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuXG4gKiAqIGBmYWxzZWAgLSB0aGUgdGVtcGxhdGUgd2lsbCByZXBsYWNlIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cbiAqXG4gKiBUaGUgcmVwbGFjZW1lbnQgcHJvY2VzcyBtaWdyYXRlcyBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgLyBjbGFzc2VzIGZyb20gdGhlIG9sZCBlbGVtZW50IHRvIHRoZSBuZXdcbiAqIG9uZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI3RlbXBsYXRlLWV4cGFuZGluZy1kaXJlY3RpdmVcbiAqIERpcmVjdGl2ZXMgR3VpZGV9IGZvciBhbiBleGFtcGxlLlxuICpcbiAqIFRoZXJlIGFyZSB2ZXJ5IGZldyBzY2VuYXJpb3Mgd2hlcmUgZWxlbWVudCByZXBsYWNlbWVudCBpcyByZXF1aXJlZCBmb3IgdGhlIGFwcGxpY2F0aW9uIGZ1bmN0aW9uLFxuICogdGhlIG1haW4gb25lIGJlaW5nIHJldXNhYmxlIGN1c3RvbSBjb21wb25lbnRzIHRoYXQgYXJlIHVzZWQgd2l0aGluIFNWRyBjb250ZXh0c1xuICogKGJlY2F1c2UgU1ZHIGRvZXNuJ3Qgd29yayB3aXRoIGN1c3RvbSBlbGVtZW50cyBpbiB0aGUgRE9NIHRyZWUpLlxuICpcbiAqICMjIyMgYHRyYW5zY2x1ZGVgXG4gKiBFeHRyYWN0IHRoZSBjb250ZW50cyBvZiB0aGUgZWxlbWVudCB3aGVyZSB0aGUgZGlyZWN0aXZlIGFwcGVhcnMgYW5kIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBkaXJlY3RpdmUuXG4gKiBUaGUgY29udGVudHMgYXJlIGNvbXBpbGVkIGFuZCBwcm92aWRlZCB0byB0aGUgZGlyZWN0aXZlIGFzIGEgKip0cmFuc2NsdXNpb24gZnVuY3Rpb24qKi4gU2VlIHRoZVxuICoge0BsaW5rICRjb21waWxlI3RyYW5zY2x1c2lvbiBUcmFuc2NsdXNpb259IHNlY3Rpb24gYmVsb3cuXG4gKlxuICogVGhlcmUgYXJlIHR3byBraW5kcyBvZiB0cmFuc2NsdXNpb24gZGVwZW5kaW5nIHVwb24gd2hldGhlciB5b3Ugd2FudCB0byB0cmFuc2NsdWRlIGp1c3QgdGhlIGNvbnRlbnRzIG9mIHRoZVxuICogZGlyZWN0aXZlJ3MgZWxlbWVudCBvciB0aGUgZW50aXJlIGVsZW1lbnQ6XG4gKlxuICogKiBgdHJ1ZWAgLSB0cmFuc2NsdWRlIHRoZSBjb250ZW50IChpLmUuIHRoZSBjaGlsZCBub2Rlcykgb2YgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuXG4gKiAqIGAnZWxlbWVudCdgIC0gdHJhbnNjbHVkZSB0aGUgd2hvbGUgb2YgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgaW5jbHVkaW5nIGFueSBkaXJlY3RpdmVzIG9uIHRoaXNcbiAqICAgZWxlbWVudCB0aGF0IGRlZmluZWQgYXQgYSBsb3dlciBwcmlvcml0eSB0aGFuIHRoaXMgZGlyZWN0aXZlLiBXaGVuIHVzZWQsIHRoZSBgdGVtcGxhdGVgXG4gKiAgIHByb3BlcnR5IGlzIGlnbm9yZWQuXG4gKlxuICpcbiAqICMjIyMgYGNvbXBpbGVgXG4gKlxuICogYGBganNcbiAqICAgZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCB0cmFuc2NsdWRlKSB7IC4uLiB9XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBkZWFscyB3aXRoIHRyYW5zZm9ybWluZyB0aGUgdGVtcGxhdGUgRE9NLiBTaW5jZSBtb3N0IGRpcmVjdGl2ZXMgZG8gbm90IGRvXG4gKiB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiwgaXQgaXMgbm90IHVzZWQgb2Z0ZW4uIFRoZSBjb21waWxlIGZ1bmN0aW9uIHRha2VzIHRoZSBmb2xsb3dpbmcgYXJndW1lbnRzOlxuICpcbiAqICAgKiBgdEVsZW1lbnRgIC0gdGVtcGxhdGUgZWxlbWVudCAtIFRoZSBlbGVtZW50IHdoZXJlIHRoZSBkaXJlY3RpdmUgaGFzIGJlZW4gZGVjbGFyZWQuIEl0IGlzXG4gKiAgICAgc2FmZSB0byBkbyB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiBvbiB0aGUgZWxlbWVudCBhbmQgY2hpbGQgZWxlbWVudHMgb25seS5cbiAqXG4gKiAgICogYHRBdHRyc2AgLSB0ZW1wbGF0ZSBhdHRyaWJ1dGVzIC0gTm9ybWFsaXplZCBsaXN0IG9mIGF0dHJpYnV0ZXMgZGVjbGFyZWQgb24gdGhpcyBlbGVtZW50IHNoYXJlZFxuICogICAgIGJldHdlZW4gYWxsIGRpcmVjdGl2ZSBjb21waWxlIGZ1bmN0aW9ucy5cbiAqXG4gKiAgICogYHRyYW5zY2x1ZGVgIC0gIFsqREVQUkVDQVRFRCohXSBBIHRyYW5zY2x1ZGUgbGlua2luZyBmdW5jdGlvbjogYGZ1bmN0aW9uKHNjb3BlLCBjbG9uZUxpbmtpbmdGbilgXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGUgdGVtcGxhdGUgaW5zdGFuY2UgYW5kIHRoZSBsaW5rIGluc3RhbmNlIG1heSBiZSBkaWZmZXJlbnQgb2JqZWN0cyBpZiB0aGUgdGVtcGxhdGUgaGFzXG4gKiBiZWVuIGNsb25lZC4gRm9yIHRoaXMgcmVhc29uIGl0IGlzICoqbm90Kiogc2FmZSB0byBkbyBhbnl0aGluZyBvdGhlciB0aGFuIERPTSB0cmFuc2Zvcm1hdGlvbnMgdGhhdFxuICogYXBwbHkgdG8gYWxsIGNsb25lZCBET00gbm9kZXMgd2l0aGluIHRoZSBjb21waWxlIGZ1bmN0aW9uLiBTcGVjaWZpY2FsbHksIERPTSBsaXN0ZW5lciByZWdpc3RyYXRpb25cbiAqIHNob3VsZCBiZSBkb25lIGluIGEgbGlua2luZyBmdW5jdGlvbiByYXRoZXIgdGhhbiBpbiBhIGNvbXBpbGUgZnVuY3Rpb24uXG4gKiA8L2Rpdj5cblxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBjYW5ub3QgaGFuZGxlIGRpcmVjdGl2ZXMgdGhhdCByZWN1cnNpdmVseSB1c2UgdGhlbXNlbHZlcyBpbiB0aGVpclxuICogb3duIHRlbXBsYXRlcyBvciBjb21waWxlIGZ1bmN0aW9ucy4gQ29tcGlsaW5nIHRoZXNlIGRpcmVjdGl2ZXMgcmVzdWx0cyBpbiBhbiBpbmZpbml0ZSBsb29wIGFuZCBhXG4gKiBzdGFjayBvdmVyZmxvdyBlcnJvcnMuXG4gKlxuICogVGhpcyBjYW4gYmUgYXZvaWRlZCBieSBtYW51YWxseSB1c2luZyAkY29tcGlsZSBpbiB0aGUgcG9zdExpbmsgZnVuY3Rpb24gdG8gaW1wZXJhdGl2ZWx5IGNvbXBpbGVcbiAqIGEgZGlyZWN0aXZlJ3MgdGVtcGxhdGUgaW5zdGVhZCBvZiByZWx5aW5nIG9uIGF1dG9tYXRpYyB0ZW1wbGF0ZSBjb21waWxhdGlvbiB2aWEgYHRlbXBsYXRlYCBvclxuICogYHRlbXBsYXRlVXJsYCBkZWNsYXJhdGlvbiBvciBtYW51YWwgY29tcGlsYXRpb24gaW5zaWRlIHRoZSBjb21waWxlIGZ1bmN0aW9uLlxuICogPC9kaXY+XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWVycm9yXCI+XG4gKiAqKk5vdGU6KiogVGhlIGB0cmFuc2NsdWRlYCBmdW5jdGlvbiB0aGF0IGlzIHBhc3NlZCB0byB0aGUgY29tcGlsZSBmdW5jdGlvbiBpcyBkZXByZWNhdGVkLCBhcyBpdFxuICogICBlLmcuIGRvZXMgbm90IGtub3cgYWJvdXQgdGhlIHJpZ2h0IG91dGVyIHNjb3BlLiBQbGVhc2UgdXNlIHRoZSB0cmFuc2NsdWRlIGZ1bmN0aW9uIHRoYXQgaXMgcGFzc2VkXG4gKiAgIHRvIHRoZSBsaW5rIGZ1bmN0aW9uIGluc3RlYWQuXG4gKiA8L2Rpdj5cblxuICogQSBjb21waWxlIGZ1bmN0aW9uIGNhbiBoYXZlIGEgcmV0dXJuIHZhbHVlIHdoaWNoIGNhbiBiZSBlaXRoZXIgYSBmdW5jdGlvbiBvciBhbiBvYmplY3QuXG4gKlxuICogKiByZXR1cm5pbmcgYSAocG9zdC1saW5rKSBmdW5jdGlvbiAtIGlzIGVxdWl2YWxlbnQgdG8gcmVnaXN0ZXJpbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb24gdmlhIHRoZVxuICogICBgbGlua2AgcHJvcGVydHkgb2YgdGhlIGNvbmZpZyBvYmplY3Qgd2hlbiB0aGUgY29tcGlsZSBmdW5jdGlvbiBpcyBlbXB0eS5cbiAqXG4gKiAqIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBmdW5jdGlvbihzKSByZWdpc3RlcmVkIHZpYSBgcHJlYCBhbmQgYHBvc3RgIHByb3BlcnRpZXMgLSBhbGxvd3MgeW91IHRvXG4gKiAgIGNvbnRyb2wgd2hlbiBhIGxpbmtpbmcgZnVuY3Rpb24gc2hvdWxkIGJlIGNhbGxlZCBkdXJpbmcgdGhlIGxpbmtpbmcgcGhhc2UuIFNlZSBpbmZvIGFib3V0XG4gKiAgIHByZS1saW5raW5nIGFuZCBwb3N0LWxpbmtpbmcgZnVuY3Rpb25zIGJlbG93LlxuICpcbiAqXG4gKiAjIyMjIGBsaW5rYFxuICogVGhpcyBwcm9wZXJ0eSBpcyB1c2VkIG9ubHkgaWYgdGhlIGBjb21waWxlYCBwcm9wZXJ0eSBpcyBub3QgZGVmaW5lZC5cbiAqXG4gKiBgYGBqc1xuICogICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyLCB0cmFuc2NsdWRlRm4pIHsgLi4uIH1cbiAqIGBgYFxuICpcbiAqIFRoZSBsaW5rIGZ1bmN0aW9uIGlzIHJlc3BvbnNpYmxlIGZvciByZWdpc3RlcmluZyBET00gbGlzdGVuZXJzIGFzIHdlbGwgYXMgdXBkYXRpbmcgdGhlIERPTS4gSXQgaXNcbiAqIGV4ZWN1dGVkIGFmdGVyIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiBjbG9uZWQuIFRoaXMgaXMgd2hlcmUgbW9zdCBvZiB0aGUgZGlyZWN0aXZlIGxvZ2ljIHdpbGwgYmVcbiAqIHB1dC5cbiAqXG4gKiAgICogYHNjb3BlYCAtIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIFNjb3BlfSAtIFRoZSBzY29wZSB0byBiZSB1c2VkIGJ5IHRoZVxuICogICAgIGRpcmVjdGl2ZSBmb3IgcmVnaXN0ZXJpbmcge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNoZXN9LlxuICpcbiAqICAgKiBgaUVsZW1lbnRgIC0gaW5zdGFuY2UgZWxlbWVudCAtIFRoZSBlbGVtZW50IHdoZXJlIHRoZSBkaXJlY3RpdmUgaXMgdG8gYmUgdXNlZC4gSXQgaXMgc2FmZSB0b1xuICogICAgIG1hbmlwdWxhdGUgdGhlIGNoaWxkcmVuIG9mIHRoZSBlbGVtZW50IG9ubHkgaW4gYHBvc3RMaW5rYCBmdW5jdGlvbiBzaW5jZSB0aGUgY2hpbGRyZW4gaGF2ZVxuICogICAgIGFscmVhZHkgYmVlbiBsaW5rZWQuXG4gKlxuICogICAqIGBpQXR0cnNgIC0gaW5zdGFuY2UgYXR0cmlidXRlcyAtIE5vcm1hbGl6ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzIGRlY2xhcmVkIG9uIHRoaXMgZWxlbWVudCBzaGFyZWRcbiAqICAgICBiZXR3ZWVuIGFsbCBkaXJlY3RpdmUgbGlua2luZyBmdW5jdGlvbnMuXG4gKlxuICogICAqIGBjb250cm9sbGVyYCAtIGEgY29udHJvbGxlciBpbnN0YW5jZSAtIEEgY29udHJvbGxlciBpbnN0YW5jZSBpZiBhdCBsZWFzdCBvbmUgZGlyZWN0aXZlIG9uIHRoZVxuICogICAgIGVsZW1lbnQgZGVmaW5lcyBhIGNvbnRyb2xsZXIuIFRoZSBjb250cm9sbGVyIGlzIHNoYXJlZCBhbW9uZyBhbGwgdGhlIGRpcmVjdGl2ZXMsIHdoaWNoIGFsbG93c1xuICogICAgIHRoZSBkaXJlY3RpdmVzIHRvIHVzZSB0aGUgY29udHJvbGxlcnMgYXMgYSBjb21tdW5pY2F0aW9uIGNoYW5uZWwuXG4gKlxuICogICAqIGB0cmFuc2NsdWRlRm5gIC0gQSB0cmFuc2NsdWRlIGxpbmtpbmcgZnVuY3Rpb24gcHJlLWJvdW5kIHRvIHRoZSBjb3JyZWN0IHRyYW5zY2x1c2lvbiBzY29wZS5cbiAqICAgICBUaGlzIGlzIHRoZSBzYW1lIGFzIHRoZSBgJHRyYW5zY2x1ZGVgXG4gKiAgICAgcGFyYW1ldGVyIG9mIGRpcmVjdGl2ZSBjb250cm9sbGVycywgc2VlIHRoZXJlIGZvciBkZXRhaWxzLlxuICogICAgIGBmdW5jdGlvbihbc2NvcGVdLCBjbG9uZUxpbmtpbmdGbiwgZnV0dXJlUGFyZW50RWxlbWVudClgLlxuICpcbiAqICMjIyMgUHJlLWxpbmtpbmcgZnVuY3Rpb25cbiAqXG4gKiBFeGVjdXRlZCBiZWZvcmUgdGhlIGNoaWxkIGVsZW1lbnRzIGFyZSBsaW5rZWQuIE5vdCBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBzaW5jZSB0aGVcbiAqIGNvbXBpbGVyIGxpbmtpbmcgZnVuY3Rpb24gd2lsbCBmYWlsIHRvIGxvY2F0ZSB0aGUgY29ycmVjdCBlbGVtZW50cyBmb3IgbGlua2luZy5cbiAqXG4gKiAjIyMjIFBvc3QtbGlua2luZyBmdW5jdGlvblxuICpcbiAqIEV4ZWN1dGVkIGFmdGVyIHRoZSBjaGlsZCBlbGVtZW50cyBhcmUgbGlua2VkLlxuICpcbiAqIE5vdGUgdGhhdCBjaGlsZCBlbGVtZW50cyB0aGF0IGNvbnRhaW4gYHRlbXBsYXRlVXJsYCBkaXJlY3RpdmVzIHdpbGwgbm90IGhhdmUgYmVlbiBjb21waWxlZFxuICogYW5kIGxpbmtlZCBzaW5jZSB0aGV5IGFyZSB3YWl0aW5nIGZvciB0aGVpciB0ZW1wbGF0ZSB0byBsb2FkIGFzeW5jaHJvbm91c2x5IGFuZCB0aGVpciBvd25cbiAqIGNvbXBpbGF0aW9uIGFuZCBsaW5raW5nIGhhcyBiZWVuIHN1c3BlbmRlZCB1bnRpbCB0aGF0IG9jY3Vycy5cbiAqXG4gKiBJdCBpcyBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBpbiB0aGUgcG9zdC1saW5raW5nIGZ1bmN0aW9uIG9uIGVsZW1lbnRzIHRoYXQgYXJlIG5vdCB3YWl0aW5nXG4gKiBmb3IgdGhlaXIgYXN5bmMgdGVtcGxhdGVzIHRvIGJlIHJlc29sdmVkLlxuICpcbiAqXG4gKiAjIyMgVHJhbnNjbHVzaW9uXG4gKlxuICogVHJhbnNjbHVzaW9uIGlzIHRoZSBwcm9jZXNzIG9mIGV4dHJhY3RpbmcgYSBjb2xsZWN0aW9uIG9mIERPTSBlbGVtZW50IGZyb20gb25lIHBhcnQgb2YgdGhlIERPTSBhbmRcbiAqIGNvcHlpbmcgdGhlbSB0byBhbm90aGVyIHBhcnQgb2YgdGhlIERPTSwgd2hpbGUgbWFpbnRhaW5pbmcgdGhlaXIgY29ubmVjdGlvbiB0byB0aGUgb3JpZ2luYWwgQW5ndWxhckpTXG4gKiBzY29wZSBmcm9tIHdoZXJlIHRoZXkgd2VyZSB0YWtlbi5cbiAqXG4gKiBUcmFuc2NsdXNpb24gaXMgdXNlZCAob2Z0ZW4gd2l0aCB7QGxpbmsgbmdUcmFuc2NsdWRlfSkgdG8gaW5zZXJ0IHRoZVxuICogb3JpZ2luYWwgY29udGVudHMgb2YgYSBkaXJlY3RpdmUncyBlbGVtZW50IGludG8gYSBzcGVjaWZpZWQgcGxhY2UgaW4gdGhlIHRlbXBsYXRlIG9mIHRoZSBkaXJlY3RpdmUuXG4gKiBUaGUgYmVuZWZpdCBvZiB0cmFuc2NsdXNpb24sIG92ZXIgc2ltcGx5IG1vdmluZyB0aGUgRE9NIGVsZW1lbnRzIG1hbnVhbGx5LCBpcyB0aGF0IHRoZSB0cmFuc2NsdWRlZFxuICogY29udGVudCBoYXMgYWNjZXNzIHRvIHRoZSBwcm9wZXJ0aWVzIG9uIHRoZSBzY29wZSBmcm9tIHdoaWNoIGl0IHdhcyB0YWtlbiwgZXZlbiBpZiB0aGUgZGlyZWN0aXZlXG4gKiBoYXMgaXNvbGF0ZWQgc2NvcGUuXG4gKiBTZWUgdGhlIHtAbGluayBndWlkZS9kaXJlY3RpdmUjY3JlYXRpbmctYS1kaXJlY3RpdmUtdGhhdC13cmFwcy1vdGhlci1lbGVtZW50cyBEaXJlY3RpdmVzIEd1aWRlfS5cbiAqXG4gKiBUaGlzIG1ha2VzIGl0IHBvc3NpYmxlIGZvciB0aGUgd2lkZ2V0IHRvIGhhdmUgcHJpdmF0ZSBzdGF0ZSBmb3IgaXRzIHRlbXBsYXRlLCB3aGlsZSB0aGUgdHJhbnNjbHVkZWRcbiAqIGNvbnRlbnQgaGFzIGFjY2VzcyB0byBpdHMgb3JpZ2luYXRpbmcgc2NvcGUuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBXaGVuIHRlc3RpbmcgYW4gZWxlbWVudCB0cmFuc2NsdWRlIGRpcmVjdGl2ZSB5b3UgbXVzdCBub3QgcGxhY2UgdGhlIGRpcmVjdGl2ZSBhdCB0aGUgcm9vdCBvZiB0aGVcbiAqIERPTSBmcmFnbWVudCB0aGF0IGlzIGJlaW5nIGNvbXBpbGVkLiBTZWUge0BsaW5rIGd1aWRlL3VuaXQtdGVzdGluZyN0ZXN0aW5nLXRyYW5zY2x1c2lvbi1kaXJlY3RpdmVzXG4gKiBUZXN0aW5nIFRyYW5zY2x1c2lvbiBEaXJlY3RpdmVzfS5cbiAqIDwvZGl2PlxuICpcbiAqICMjIyMgVHJhbnNjbHVzaW9uIEZ1bmN0aW9uc1xuICpcbiAqIFdoZW4gYSBkaXJlY3RpdmUgcmVxdWVzdHMgdHJhbnNjbHVzaW9uLCB0aGUgY29tcGlsZXIgZXh0cmFjdHMgaXRzIGNvbnRlbnRzIGFuZCBwcm92aWRlcyBhICoqdHJhbnNjbHVzaW9uXG4gKiBmdW5jdGlvbioqIHRvIHRoZSBkaXJlY3RpdmUncyBgbGlua2AgZnVuY3Rpb24gYW5kIGBjb250cm9sbGVyYC4gVGhpcyB0cmFuc2NsdXNpb24gZnVuY3Rpb24gaXMgYSBzcGVjaWFsXG4gKiAqKmxpbmtpbmcgZnVuY3Rpb24qKiB0aGF0IHdpbGwgcmV0dXJuIHRoZSBjb21waWxlZCBjb250ZW50cyBsaW5rZWQgdG8gYSBuZXcgdHJhbnNjbHVzaW9uIHNjb3BlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiBJZiB5b3UgYXJlIGp1c3QgdXNpbmcge0BsaW5rIG5nVHJhbnNjbHVkZX0gdGhlbiB5b3UgZG9uJ3QgbmVlZCB0byB3b3JyeSBhYm91dCB0aGlzIGZ1bmN0aW9uLCBzaW5jZVxuICogbmdUcmFuc2NsdWRlIHdpbGwgZGVhbCB3aXRoIGl0IGZvciB1cy5cbiAqIDwvZGl2PlxuICpcbiAqIElmIHlvdSB3YW50IHRvIG1hbnVhbGx5IGNvbnRyb2wgdGhlIGluc2VydGlvbiBhbmQgcmVtb3ZhbCBvZiB0aGUgdHJhbnNjbHVkZWQgY29udGVudCBpbiB5b3VyIGRpcmVjdGl2ZVxuICogdGhlbiB5b3UgbXVzdCB1c2UgdGhpcyB0cmFuc2NsdWRlIGZ1bmN0aW9uLiBXaGVuIHlvdSBjYWxsIGEgdHJhbnNjbHVkZSBmdW5jdGlvbiBpdCByZXR1cm5zIGEgYSBqcUxpdGUvSlF1ZXJ5XG4gKiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgY29tcGlsZWQgRE9NLCB3aGljaCBpcyBsaW5rZWQgdG8gdGhlIGNvcnJlY3QgdHJhbnNjbHVzaW9uIHNjb3BlLlxuICpcbiAqIFdoZW4geW91IGNhbGwgYSB0cmFuc2NsdXNpb24gZnVuY3Rpb24geW91IGNhbiBwYXNzIGluIGEgKipjbG9uZSBhdHRhY2ggZnVuY3Rpb24qKi4gVGhpcyBmdW5jdGlvbiBhY2NlcHRzXG4gKiB0d28gcGFyYW1ldGVycywgYGZ1bmN0aW9uKGNsb25lLCBzY29wZSkgeyAuLi4gfWAsIHdoZXJlIHRoZSBgY2xvbmVgIGlzIGEgZnJlc2ggY29tcGlsZWQgY29weSBvZiB5b3VyIHRyYW5zY2x1ZGVkXG4gKiBjb250ZW50IGFuZCB0aGUgYHNjb3BlYCBpcyB0aGUgbmV3bHkgY3JlYXRlZCB0cmFuc2NsdXNpb24gc2NvcGUsIHRvIHdoaWNoIHRoZSBjbG9uZSBpcyBib3VuZC5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipCZXN0IFByYWN0aWNlKio6IEFsd2F5cyBwcm92aWRlIGEgYGNsb25lRm5gIChjbG9uZSBhdHRhY2ggZnVuY3Rpb24pIHdoZW4geW91IGNhbGwgYSB0cmFuc2x1ZGUgZnVuY3Rpb25cbiAqIHNpbmNlIHlvdSB0aGVuIGdldCBhIGZyZXNoIGNsb25lIG9mIHRoZSBvcmlnaW5hbCBET00gYW5kIGFsc28gaGF2ZSBhY2Nlc3MgdG8gdGhlIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiA8L2Rpdj5cbiAqXG4gKiBJdCBpcyBub3JtYWwgcHJhY3RpY2UgdG8gYXR0YWNoIHlvdXIgdHJhbnNjbHVkZWQgY29udGVudCAoYGNsb25lYCkgdG8gdGhlIERPTSBpbnNpZGUgeW91ciAqKmNsb25lXG4gKiBhdHRhY2ggZnVuY3Rpb24qKjpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHRyYW5zY2x1ZGVkQ29udGVudCwgdHJhbnNjbHVzaW9uU2NvcGU7XG4gKlxuICogJHRyYW5zY2x1ZGUoZnVuY3Rpb24oY2xvbmUsIHNjb3BlKSB7XG4gKiAgIGVsZW1lbnQuYXBwZW5kKGNsb25lKTtcbiAqICAgdHJhbnNjbHVkZWRDb250ZW50ID0gY2xvbmU7XG4gKiAgIHRyYW5zY2x1c2lvblNjb3BlID0gc2NvcGU7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIExhdGVyLCBpZiB5b3Ugd2FudCB0byByZW1vdmUgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgZnJvbSB5b3VyIERPTSB0aGVuIHlvdSBzaG91bGQgYWxzbyBkZXN0cm95IHRoZVxuICogYXNzb2NpYXRlZCB0cmFuc2NsdXNpb24gc2NvcGU6XG4gKlxuICogYGBganNcbiAqIHRyYW5zY2x1ZGVkQ29udGVudC5yZW1vdmUoKTtcbiAqIHRyYW5zY2x1c2lvblNjb3BlLiRkZXN0cm95KCk7XG4gKiBgYGBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipCZXN0IFByYWN0aWNlKio6IGlmIHlvdSBpbnRlbmQgdG8gYWRkIGFuZCByZW1vdmUgdHJhbnNjbHVkZWQgY29udGVudCBtYW51YWxseSBpbiB5b3VyIGRpcmVjdGl2ZVxuICogKGJ5IGNhbGxpbmcgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBET00gYW5kIGFuZCBjYWxsaW5nIGBlbGVtZW50LnJlbW92ZSgpYCB0byByZW1vdmUgaXQpLFxuICogdGhlbiB5b3UgYXJlIGFsc28gcmVzcG9uc2libGUgZm9yIGNhbGxpbmcgYCRkZXN0cm95YCBvbiB0aGUgdHJhbnNjbHVzaW9uIHNjb3BlLlxuICogPC9kaXY+XG4gKlxuICogVGhlIGJ1aWx0LWluIERPTSBtYW5pcHVsYXRpb24gZGlyZWN0aXZlcywgc3VjaCBhcyB7QGxpbmsgbmdJZn0sIHtAbGluayBuZ1N3aXRjaH0gYW5kIHtAbGluayBuZ1JlcGVhdH1cbiAqIGF1dG9tYXRpY2FsbHkgZGVzdHJveSB0aGVpciB0cmFuc2x1ZGVkIGNsb25lcyBhcyBuZWNlc3Nhcnkgc28geW91IGRvIG5vdCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoaXMgaWZcbiAqIHlvdSBhcmUgc2ltcGx5IHVzaW5nIHtAbGluayBuZ1RyYW5zY2x1ZGV9IHRvIGluamVjdCB0aGUgdHJhbnNjbHVzaW9uIGludG8geW91ciBkaXJlY3RpdmUuXG4gKlxuICpcbiAqICMjIyMgVHJhbnNjbHVzaW9uIFNjb3Blc1xuICpcbiAqIFdoZW4geW91IGNhbGwgYSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGl0IHJldHVybnMgYSBET00gZnJhZ21lbnQgdGhhdCBpcyBwcmUtYm91bmQgdG8gYSAqKnRyYW5zY2x1c2lvblxuICogc2NvcGUqKi4gVGhpcyBzY29wZSBpcyBzcGVjaWFsLCBpbiB0aGF0IGl0IGlzIGEgY2hpbGQgb2YgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIChhbmQgc28gZ2V0cyBkZXN0cm95ZWRcbiAqIHdoZW4gdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIGdldHMgZGVzdHJveWVkKSBidXQgaXQgaW5oZXJpdHMgdGhlIHByb3BlcnRpZXMgb2YgdGhlIHNjb3BlIGZyb20gd2hpY2ggaXRcbiAqIHdhcyB0YWtlbi5cbiAqXG4gKiBGb3IgZXhhbXBsZSBjb25zaWRlciBhIGRpcmVjdGl2ZSB0aGF0IHVzZXMgdHJhbnNjbHVzaW9uIGFuZCBpc29sYXRlZCBzY29wZS4gVGhlIERPTSBoaWVyYXJjaHkgbWlnaHQgbG9va1xuICogbGlrZSB0aGlzOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgbmctYXBwPlxuICogICA8ZGl2IGlzb2xhdGU+XG4gKiAgICAgPGRpdiB0cmFuc2NsdXNpb24+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZGl2PlxuICogPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBUaGUgYCRwYXJlbnRgIHNjb3BlIGhpZXJhcmNoeSB3aWxsIGxvb2sgbGlrZSB0aGlzOlxuICpcbiAqIGBgYFxuICogLSAkcm9vdFNjb3BlXG4gKiAgIC0gaXNvbGF0ZVxuICogICAgIC0gdHJhbnNjbHVzaW9uXG4gKiBgYGBcbiAqXG4gKiBidXQgdGhlIHNjb3BlcyB3aWxsIGluaGVyaXQgcHJvdG90eXBpY2FsbHkgZnJvbSBkaWZmZXJlbnQgc2NvcGVzIHRvIHRoZWlyIGAkcGFyZW50YC5cbiAqXG4gKiBgYGBcbiAqIC0gJHJvb3RTY29wZVxuICogICAtIHRyYW5zY2x1c2lvblxuICogLSBpc29sYXRlXG4gKiBgYGBcbiAqXG4gKlxuICogIyMjIEF0dHJpYnV0ZXNcbiAqXG4gKiBUaGUge0BsaW5rIG5nLiRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIEF0dHJpYnV0ZXN9IG9iamVjdCAtIHBhc3NlZCBhcyBhIHBhcmFtZXRlciBpbiB0aGVcbiAqIGBsaW5rKClgIG9yIGBjb21waWxlKClgIGZ1bmN0aW9ucy4gSXQgaGFzIGEgdmFyaWV0eSBvZiB1c2VzLlxuICpcbiAqIGFjY2Vzc2luZyAqTm9ybWFsaXplZCBhdHRyaWJ1dGUgbmFtZXM6KlxuICogRGlyZWN0aXZlcyBsaWtlICduZ0JpbmQnIGNhbiBiZSBleHByZXNzZWQgaW4gbWFueSB3YXlzOiAnbmc6YmluZCcsIGBkYXRhLW5nLWJpbmRgLCBvciAneC1uZy1iaW5kJy5cbiAqIHRoZSBhdHRyaWJ1dGVzIG9iamVjdCBhbGxvd3MgZm9yIG5vcm1hbGl6ZWQgYWNjZXNzIHRvXG4gKiAgIHRoZSBhdHRyaWJ1dGVzLlxuICpcbiAqICogKkRpcmVjdGl2ZSBpbnRlci1jb21tdW5pY2F0aW9uOiogQWxsIGRpcmVjdGl2ZXMgc2hhcmUgdGhlIHNhbWUgaW5zdGFuY2Ugb2YgdGhlIGF0dHJpYnV0ZXNcbiAqICAgb2JqZWN0IHdoaWNoIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byB1c2UgdGhlIGF0dHJpYnV0ZXMgb2JqZWN0IGFzIGludGVyIGRpcmVjdGl2ZVxuICogICBjb21tdW5pY2F0aW9uLlxuICpcbiAqICogKlN1cHBvcnRzIGludGVycG9sYXRpb246KiBJbnRlcnBvbGF0aW9uIGF0dHJpYnV0ZXMgYXJlIGFzc2lnbmVkIHRvIHRoZSBhdHRyaWJ1dGUgb2JqZWN0XG4gKiAgIGFsbG93aW5nIG90aGVyIGRpcmVjdGl2ZXMgdG8gcmVhZCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlLlxuICpcbiAqICogKk9ic2VydmluZyBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlczoqIFVzZSBgJG9ic2VydmVgIHRvIG9ic2VydmUgdGhlIHZhbHVlIGNoYW5nZXMgb2YgYXR0cmlidXRlc1xuICogICB0aGF0IGNvbnRhaW4gaW50ZXJwb2xhdGlvbiAoZS5nLiBgc3JjPVwie3tiYXJ9fVwiYCkuIE5vdCBvbmx5IGlzIHRoaXMgdmVyeSBlZmZpY2llbnQgYnV0IGl0J3MgYWxzb1xuICogICB0aGUgb25seSB3YXkgdG8gZWFzaWx5IGdldCB0aGUgYWN0dWFsIHZhbHVlIGJlY2F1c2UgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlIHRoZSBpbnRlcnBvbGF0aW9uXG4gKiAgIGhhc24ndCBiZWVuIGV2YWx1YXRlZCB5ZXQgYW5kIHNvIHRoZSB2YWx1ZSBpcyBhdCB0aGlzIHRpbWUgc2V0IHRvIGB1bmRlZmluZWRgLlxuICpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBsaW5raW5nRm4oc2NvcGUsIGVsbSwgYXR0cnMsIGN0cmwpIHtcbiAqICAgLy8gZ2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWVcbiAqICAgY29uc29sZS5sb2coYXR0cnMubmdNb2RlbCk7XG4gKlxuICogICAvLyBjaGFuZ2UgdGhlIGF0dHJpYnV0ZVxuICogICBhdHRycy4kc2V0KCduZ01vZGVsJywgJ25ldyB2YWx1ZScpO1xuICpcbiAqICAgLy8gb2JzZXJ2ZSBjaGFuZ2VzIHRvIGludGVycG9sYXRlZCBhdHRyaWJ1dGVcbiAqICAgYXR0cnMuJG9ic2VydmUoJ25nTW9kZWwnLCBmdW5jdGlvbih2YWx1ZSkge1xuICogICAgIGNvbnNvbGUubG9nKCduZ01vZGVsIGhhcyBjaGFuZ2VkIHZhbHVlIHRvICcgKyB2YWx1ZSk7XG4gKiAgIH0pO1xuICogfVxuICogYGBgXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGUqKjogVHlwaWNhbGx5IGRpcmVjdGl2ZXMgYXJlIHJlZ2lzdGVyZWQgd2l0aCBgbW9kdWxlLmRpcmVjdGl2ZWAuIFRoZSBleGFtcGxlIGJlbG93IGlzXG4gKiB0byBpbGx1c3RyYXRlIGhvdyBgJGNvbXBpbGVgIHdvcmtzLlxuICogPC9kaXY+XG4gKlxuIDxleGFtcGxlIG1vZHVsZT1cImNvbXBpbGVFeGFtcGxlXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgIDxzY3JpcHQ+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnY29tcGlsZUV4YW1wbGUnLCBbXSwgZnVuY3Rpb24oJGNvbXBpbGVQcm92aWRlcikge1xuICAgICAgICAvLyBjb25maWd1cmUgbmV3ICdjb21waWxlJyBkaXJlY3RpdmUgYnkgcGFzc2luZyBhIGRpcmVjdGl2ZVxuICAgICAgICAvLyBmYWN0b3J5IGZ1bmN0aW9uLiBUaGUgZmFjdG9yeSBmdW5jdGlvbiBpbmplY3RzIHRoZSAnJGNvbXBpbGUnXG4gICAgICAgICRjb21waWxlUHJvdmlkZXIuZGlyZWN0aXZlKCdjb21waWxlJywgZnVuY3Rpb24oJGNvbXBpbGUpIHtcbiAgICAgICAgICAvLyBkaXJlY3RpdmUgZmFjdG9yeSBjcmVhdGVzIGEgbGluayBmdW5jdGlvblxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaChcbiAgICAgICAgICAgICAgZnVuY3Rpb24oc2NvcGUpIHtcbiAgICAgICAgICAgICAgICAgLy8gd2F0Y2ggdGhlICdjb21waWxlJyBleHByZXNzaW9uIGZvciBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRldmFsKGF0dHJzLmNvbXBpbGUpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlICdjb21waWxlJyBleHByZXNzaW9uIGNoYW5nZXNcbiAgICAgICAgICAgICAgICAvLyBhc3NpZ24gaXQgaW50byB0aGUgY3VycmVudCBET01cbiAgICAgICAgICAgICAgICBlbGVtZW50Lmh0bWwodmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgLy8gY29tcGlsZSB0aGUgbmV3IERPTSBhbmQgbGluayBpdCB0byB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHNjb3BlLlxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IHdlIG9ubHkgY29tcGlsZSAuY2hpbGROb2RlcyBzbyB0aGF0XG4gICAgICAgICAgICAgICAgLy8gd2UgZG9uJ3QgZ2V0IGludG8gaW5maW5pdGUgbG9vcCBjb21waWxpbmcgb3Vyc2VsdmVzXG4gICAgICAgICAgICAgICAgJGNvbXBpbGUoZWxlbWVudC5jb250ZW50cygpKShzY29wZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ0dyZWV0ZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLm5hbWUgPSAnQW5ndWxhcic7XG4gICAgICAgICRzY29wZS5odG1sID0gJ0hlbGxvIHt7bmFtZX19JztcbiAgICAgIH1dKTtcbiAgICA8L3NjcmlwdD5cbiAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJHcmVldGVyQ29udHJvbGxlclwiPlxuICAgICAgPGlucHV0IG5nLW1vZGVsPVwibmFtZVwiPiA8YnI+XG4gICAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJodG1sXCI+PC90ZXh0YXJlYT4gPGJyPlxuICAgICAgPGRpdiBjb21waWxlPVwiaHRtbFwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICBpdCgnc2hvdWxkIGF1dG8gY29tcGlsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgIHZhciB0ZXh0YXJlYSA9ICQoJ3RleHRhcmVhJyk7XG4gICAgICAgdmFyIG91dHB1dCA9ICQoJ2Rpdltjb21waWxlXScpO1xuICAgICAgIC8vIFRoZSBpbml0aWFsIHN0YXRlIHJlYWRzICdIZWxsbyBBbmd1bGFyJy5cbiAgICAgICBleHBlY3Qob3V0cHV0LmdldFRleHQoKSkudG9CZSgnSGVsbG8gQW5ndWxhcicpO1xuICAgICAgIHRleHRhcmVhLmNsZWFyKCk7XG4gICAgICAgdGV4dGFyZWEuc2VuZEtleXMoJ3t7bmFtZX19IScpO1xuICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0JlKCdBbmd1bGFyIScpO1xuICAgICB9KTtcbiAgIDwvZmlsZT5cbiA8L2V4YW1wbGU+XG5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8RE9NRWxlbWVudH0gZWxlbWVudCBFbGVtZW50IG9yIEhUTUwgc3RyaW5nIHRvIGNvbXBpbGUgaW50byBhIHRlbXBsYXRlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGUgZnVuY3Rpb24gYXZhaWxhYmxlIHRvIGRpcmVjdGl2ZXMgLSBERVBSRUNBVEVELlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1lcnJvclwiPlxuICogKipOb3RlOioqIFBhc3NpbmcgYSBgdHJhbnNjbHVkZWAgZnVuY3Rpb24gdG8gdGhlICRjb21waWxlIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQsIGFzIGl0XG4gKiAgIGUuZy4gd2lsbCBub3QgdXNlIHRoZSByaWdodCBvdXRlciBzY29wZS4gUGxlYXNlIHBhc3MgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gYXMgYVxuICogICBgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm5gIHRvIHRoZSBsaW5rIGZ1bmN0aW9uIGluc3RlYWQuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UHJpb3JpdHkgb25seSBhcHBseSBkaXJlY3RpdmVzIGxvd2VyIHRoYW4gZ2l2ZW4gcHJpb3JpdHkgKE9ubHkgZWZmZWN0cyB0aGVcbiAqICAgICAgICAgICAgICAgICByb290IGVsZW1lbnQocyksIG5vdCB0aGVpciBjaGlsZHJlbilcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzY29wZSwgY2xvbmVBdHRhY2hGbj0sIG9wdGlvbnM9KX0gYSBsaW5rIGZ1bmN0aW9uIHdoaWNoIGlzIHVzZWQgdG8gYmluZCB0ZW1wbGF0ZVxuICogKGEgRE9NIGVsZW1lbnQvdHJlZSkgdG8gYSBzY29wZS4gV2hlcmU6XG4gKlxuICogICogYHNjb3BlYCAtIEEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IHRvIGJpbmQgdG8uXG4gKiAgKiBgY2xvbmVBdHRhY2hGbmAgLSBJZiBgY2xvbmVBdHRhY2hGbmAgaXMgcHJvdmlkZWQsIHRoZW4gdGhlIGxpbmsgZnVuY3Rpb24gd2lsbCBjbG9uZSB0aGVcbiAqICBgdGVtcGxhdGVgIGFuZCBjYWxsIHRoZSBgY2xvbmVBdHRhY2hGbmAgZnVuY3Rpb24gYWxsb3dpbmcgdGhlIGNhbGxlciB0byBhdHRhY2ggdGhlXG4gKiAgY2xvbmVkIGVsZW1lbnRzIHRvIHRoZSBET00gZG9jdW1lbnQgYXQgdGhlIGFwcHJvcHJpYXRlIHBsYWNlLiBUaGUgYGNsb25lQXR0YWNoRm5gIGlzXG4gKiAgY2FsbGVkIGFzOiA8YnI+IGBjbG9uZUF0dGFjaEZuKGNsb25lZEVsZW1lbnQsIHNjb3BlKWAgd2hlcmU6XG4gKlxuICogICAgICAqIGBjbG9uZWRFbGVtZW50YCAtIGlzIGEgY2xvbmUgb2YgdGhlIG9yaWdpbmFsIGBlbGVtZW50YCBwYXNzZWQgaW50byB0aGUgY29tcGlsZXIuXG4gKiAgICAgICogYHNjb3BlYCAtIGlzIHRoZSBjdXJyZW50IHNjb3BlIHdpdGggd2hpY2ggdGhlIGxpbmtpbmcgZnVuY3Rpb24gaXMgd29ya2luZyB3aXRoLlxuICpcbiAqICAqIGBvcHRpb25zYCAtIEFuIG9wdGlvbmFsIG9iamVjdCBoYXNoIHdpdGggbGlua2luZyBvcHRpb25zLiBJZiBgb3B0aW9uc2AgaXMgcHJvdmlkZWQsIHRoZW4gdGhlIGZvbGxvd2luZ1xuICogIGtleXMgbWF5IGJlIHVzZWQgdG8gY29udHJvbCBsaW5raW5nIGJlaGF2aW9yOlxuICpcbiAqICAgICAgKiBgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm5gIC0gdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gbWFkZSBhdmFpbGFibGUgdG9cbiAqICAgICAgICBkaXJlY3RpdmVzOyBpZiBnaXZlbiwgaXQgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0byB0aGUgbGluayBmdW5jdGlvbnMgb2ZcbiAqICAgICAgICBkaXJlY3RpdmVzIGZvdW5kIGluIGBlbGVtZW50YCBkdXJpbmcgY29tcGlsYXRpb24uXG4gKiAgICAgICogYHRyYW5zY2x1ZGVDb250cm9sbGVyc2AgLSBhbiBvYmplY3QgaGFzaCB3aXRoIGtleXMgdGhhdCBtYXAgY29udHJvbGxlciBuYW1lc1xuICogICAgICAgIHRvIGNvbnRyb2xsZXIgaW5zdGFuY2VzOyBpZiBnaXZlbiwgaXQgd2lsbCBtYWtlIHRoZSBjb250cm9sbGVyc1xuICogICAgICAgIGF2YWlsYWJsZSB0byBkaXJlY3RpdmVzLlxuICogICAgICAqIGBmdXR1cmVQYXJlbnRFbGVtZW50YCAtIGRlZmluZXMgdGhlIHBhcmVudCB0byB3aGljaCB0aGUgYGNsb25lQXR0YWNoRm5gIHdpbGwgYWRkXG4gKiAgICAgICAgdGhlIGNsb25lZCBlbGVtZW50czsgb25seSBuZWVkZWQgZm9yIHRyYW5zY2x1ZGVzIHRoYXQgYXJlIGFsbG93ZWQgdG8gY29udGFpbiBub24gaHRtbFxuICogICAgICAgIGVsZW1lbnRzIChlLmcuIFNWRyBlbGVtZW50cykuIFNlZSBhbHNvIHRoZSBkaXJlY3RpdmUuY29udHJvbGxlciBwcm9wZXJ0eS5cbiAqXG4gKiBDYWxsaW5nIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHJldHVybnMgdGhlIGVsZW1lbnQgb2YgdGhlIHRlbXBsYXRlLiBJdCBpcyBlaXRoZXIgdGhlIG9yaWdpbmFsXG4gKiBlbGVtZW50IHBhc3NlZCBpbiwgb3IgdGhlIGNsb25lIG9mIHRoZSBlbGVtZW50IGlmIHRoZSBgY2xvbmVBdHRhY2hGbmAgaXMgcHJvdmlkZWQuXG4gKlxuICogQWZ0ZXIgbGlua2luZyB0aGUgdmlldyBpcyBub3QgdXBkYXRlZCB1bnRpbCBhZnRlciBhIGNhbGwgdG8gJGRpZ2VzdCB3aGljaCB0eXBpY2FsbHkgaXMgZG9uZSBieVxuICogQW5ndWxhciBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIElmIHlvdSBuZWVkIGFjY2VzcyB0byB0aGUgYm91bmQgdmlldywgdGhlcmUgYXJlIHR3byB3YXlzIHRvIGRvIGl0OlxuICpcbiAqIC0gSWYgeW91IGFyZSBub3QgYXNraW5nIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHRvIGNsb25lIHRoZSB0ZW1wbGF0ZSwgY3JlYXRlIHRoZSBET00gZWxlbWVudChzKVxuICogICBiZWZvcmUgeW91IHNlbmQgdGhlbSB0byB0aGUgY29tcGlsZXIgYW5kIGtlZXAgdGhpcyByZWZlcmVuY2UgYXJvdW5kLlxuICogICBgYGBqc1xuICogICAgIHZhciBlbGVtZW50ID0gJGNvbXBpbGUoJzxwPnt7dG90YWx9fTwvcD4nKShzY29wZSk7XG4gKiAgIGBgYFxuICpcbiAqIC0gaWYgb24gdGhlIG90aGVyIGhhbmQsIHlvdSBuZWVkIHRoZSBlbGVtZW50IHRvIGJlIGNsb25lZCwgdGhlIHZpZXcgcmVmZXJlbmNlIGZyb20gdGhlIG9yaWdpbmFsXG4gKiAgIGV4YW1wbGUgd291bGQgbm90IHBvaW50IHRvIHRoZSBjbG9uZSwgYnV0IHJhdGhlciB0byB0aGUgb3JpZ2luYWwgdGVtcGxhdGUgdGhhdCB3YXMgY2xvbmVkLiBJblxuICogICB0aGlzIGNhc2UsIHlvdSBjYW4gYWNjZXNzIHRoZSBjbG9uZSB2aWEgdGhlIGNsb25lQXR0YWNoRm46XG4gKiAgIGBgYGpzXG4gKiAgICAgdmFyIHRlbXBsYXRlRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCgnPHA+e3t0b3RhbH19PC9wPicpLFxuICogICAgICAgICBzY29wZSA9IC4uLi47XG4gKlxuICogICAgIHZhciBjbG9uZWRFbGVtZW50ID0gJGNvbXBpbGUodGVtcGxhdGVFbGVtZW50KShzY29wZSwgZnVuY3Rpb24oY2xvbmVkRWxlbWVudCwgc2NvcGUpIHtcbiAqICAgICAgIC8vYXR0YWNoIHRoZSBjbG9uZSB0byBET00gZG9jdW1lbnQgYXQgdGhlIHJpZ2h0IHBsYWNlXG4gKiAgICAgfSk7XG4gKlxuICogICAgIC8vbm93IHdlIGhhdmUgcmVmZXJlbmNlIHRvIHRoZSBjbG9uZWQgRE9NIHZpYSBgY2xvbmVkRWxlbWVudGBcbiAqICAgYGBgXG4gKlxuICpcbiAqIEZvciBpbmZvcm1hdGlvbiBvbiBob3cgdGhlIGNvbXBpbGVyIHdvcmtzLCBzZWUgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvY29tcGlsZXIgQW5ndWxhciBIVE1MIENvbXBpbGVyfSBzZWN0aW9uIG9mIHRoZSBEZXZlbG9wZXIgR3VpZGUuXG4gKi9cblxudmFyICRjb21waWxlTWluRXJyID0gbWluRXJyKCckY29tcGlsZScpO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGNvbXBpbGVQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICovXG4kQ29tcGlsZVByb3ZpZGVyLiRpbmplY3QgPSBbJyRwcm92aWRlJywgJyQkc2FuaXRpemVVcmlQcm92aWRlciddO1xuZnVuY3Rpb24gJENvbXBpbGVQcm92aWRlcigkcHJvdmlkZSwgJCRzYW5pdGl6ZVVyaVByb3ZpZGVyKSB7XG4gIHZhciBoYXNEaXJlY3RpdmVzID0ge30sXG4gICAgICBTdWZmaXggPSAnRGlyZWN0aXZlJyxcbiAgICAgIENPTU1FTlRfRElSRUNUSVZFX1JFR0VYUCA9IC9eXFxzKmRpcmVjdGl2ZVxcOlxccyooW1xcd1xcLV0rKVxccysoLiopJC8sXG4gICAgICBDTEFTU19ESVJFQ1RJVkVfUkVHRVhQID0gLygoW1xcd1xcLV0rKSg/OlxcOihbXjtdKykpPzs/KS8sXG4gICAgICBBTExfT1JfTk9USElOR19BVFRSUyA9IG1ha2VNYXAoJ25nU3JjLG5nU3Jjc2V0LHNyYyxzcmNzZXQnKSxcbiAgICAgIFJFUVVJUkVfUFJFRklYX1JFR0VYUCA9IC9eKD86KFxcXlxcXj8pPyhcXD8pPyhcXF5cXF4/KT8pPy87XG5cbiAgLy8gUmVmOiBodHRwOi8vZGV2ZWxvcGVycy53aGF0d2cub3JnL3dlYmFwcGFwaXMuaHRtbCNldmVudC1oYW5kbGVyLWlkbC1hdHRyaWJ1dGVzXG4gIC8vIFRoZSBhc3N1bXB0aW9uIGlzIHRoYXQgZnV0dXJlIERPTSBldmVudCBhdHRyaWJ1dGUgbmFtZXMgd2lsbCBiZWdpbiB3aXRoXG4gIC8vICdvbicgYW5kIGJlIGNvbXBvc2VkIG9mIG9ubHkgRW5nbGlzaCBsZXR0ZXJzLlxuICB2YXIgRVZFTlRfSEFORExFUl9BVFRSX1JFR0VYUCA9IC9eKG9uW2Etel0rfGZvcm1hY3Rpb24pJC87XG5cbiAgZnVuY3Rpb24gcGFyc2VJc29sYXRlQmluZGluZ3Moc2NvcGUsIGRpcmVjdGl2ZU5hbWUpIHtcbiAgICB2YXIgTE9DQUxfUkVHRVhQID0gL15cXHMqKFtAJl18PShcXCo/KSkoXFw/PylcXHMqKFxcdyopXFxzKiQvO1xuXG4gICAgdmFyIGJpbmRpbmdzID0ge307XG5cbiAgICBmb3JFYWNoKHNjb3BlLCBmdW5jdGlvbihkZWZpbml0aW9uLCBzY29wZU5hbWUpIHtcbiAgICAgIHZhciBtYXRjaCA9IGRlZmluaXRpb24ubWF0Y2goTE9DQUxfUkVHRVhQKTtcblxuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignaXNjcCcsXG4gICAgICAgICAgICBcIkludmFsaWQgaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uIGZvciBkaXJlY3RpdmUgJ3swfScuXCIgK1xuICAgICAgICAgICAgXCIgRGVmaW5pdGlvbjogey4uLiB7MX06ICd7Mn0nIC4uLn1cIixcbiAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsIHNjb3BlTmFtZSwgZGVmaW5pdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGJpbmRpbmdzW3Njb3BlTmFtZV0gPSB7XG4gICAgICAgIG1vZGU6IG1hdGNoWzFdWzBdLFxuICAgICAgICBjb2xsZWN0aW9uOiBtYXRjaFsyXSA9PT0gJyonLFxuICAgICAgICBvcHRpb25hbDogbWF0Y2hbM10gPT09ICc/JyxcbiAgICAgICAgYXR0ck5hbWU6IG1hdGNoWzRdIHx8IHNjb3BlTmFtZVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBiaW5kaW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZWdpc3RlciBhIG5ldyBkaXJlY3RpdmUgd2l0aCB0aGUgY29tcGlsZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBOYW1lIG9mIHRoZSBkaXJlY3RpdmUgaW4gY2FtZWwtY2FzZSAoaS5lLiA8Y29kZT5uZ0JpbmQ8L2NvZGU+IHdoaWNoXG4gICAqICAgIHdpbGwgbWF0Y2ggYXMgPGNvZGU+bmctYmluZDwvY29kZT4pLCBvciBhbiBvYmplY3QgbWFwIG9mIGRpcmVjdGl2ZXMgd2hlcmUgdGhlIGtleXMgYXJlIHRoZVxuICAgKiAgICBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGZhY3Rvcmllcy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheX0gZGlyZWN0aXZlRmFjdG9yeSBBbiBpbmplY3RhYmxlIGRpcmVjdGl2ZSBmYWN0b3J5IGZ1bmN0aW9uLiBTZWVcbiAgICogICAge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZX0gZm9yIG1vcmUgaW5mby5cbiAgICogQHJldHVybnMge25nLiRjb21waWxlUHJvdmlkZXJ9IFNlbGYgZm9yIGNoYWluaW5nLlxuICAgKi9cbiAgIHRoaXMuZGlyZWN0aXZlID0gZnVuY3Rpb24gcmVnaXN0ZXJEaXJlY3RpdmUobmFtZSwgZGlyZWN0aXZlRmFjdG9yeSkge1xuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdkaXJlY3RpdmUnKTtcbiAgICBpZiAoaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgIGFzc2VydEFyZyhkaXJlY3RpdmVGYWN0b3J5LCAnZGlyZWN0aXZlRmFjdG9yeScpO1xuICAgICAgaWYgKCFoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGhhc0RpcmVjdGl2ZXNbbmFtZV0gPSBbXTtcbiAgICAgICAgJHByb3ZpZGUuZmFjdG9yeShuYW1lICsgU3VmZml4LCBbJyRpbmplY3RvcicsICckZXhjZXB0aW9uSGFuZGxlcicsXG4gICAgICAgICAgZnVuY3Rpb24oJGluamVjdG9yLCAkZXhjZXB0aW9uSGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvckVhY2goaGFzRGlyZWN0aXZlc1tuYW1lXSwgZnVuY3Rpb24oZGlyZWN0aXZlRmFjdG9yeSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aXZlID0gJGluamVjdG9yLmludm9rZShkaXJlY3RpdmVGYWN0b3J5KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihkaXJlY3RpdmUpKSB7XG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUgPSB7IGNvbXBpbGU6IHZhbHVlRm4oZGlyZWN0aXZlKSB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWRpcmVjdGl2ZS5jb21waWxlICYmIGRpcmVjdGl2ZS5saW5rKSB7XG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUuY29tcGlsZSA9IHZhbHVlRm4oZGlyZWN0aXZlLmxpbmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUucHJpb3JpdHkgPSBkaXJlY3RpdmUucHJpb3JpdHkgfHwgMDtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUubmFtZSA9IGRpcmVjdGl2ZS5uYW1lIHx8IG5hbWU7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLnJlcXVpcmUgPSBkaXJlY3RpdmUucmVxdWlyZSB8fCAoZGlyZWN0aXZlLmNvbnRyb2xsZXIgJiYgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5yZXN0cmljdCA9IGRpcmVjdGl2ZS5yZXN0cmljdCB8fCAnRUEnO1xuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdChkaXJlY3RpdmUuc2NvcGUpKSB7XG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUuJCRpc29sYXRlQmluZGluZ3MgPSBwYXJzZUlzb2xhdGVCaW5kaW5ncyhkaXJlY3RpdmUuc2NvcGUsIGRpcmVjdGl2ZS5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlcy5wdXNoKGRpcmVjdGl2ZSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aXZlcztcbiAgICAgICAgICB9XSk7XG4gICAgICB9XG4gICAgICBoYXNEaXJlY3RpdmVzW25hbWVdLnB1c2goZGlyZWN0aXZlRmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvckVhY2gobmFtZSwgcmV2ZXJzZVBhcmFtcyhyZWdpc3RlckRpcmVjdGl2ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcbiAgICogdXJscyBkdXJpbmcgYVtocmVmXSBzYW5pdGl6YXRpb24uXG4gICAqXG4gICAqIFRoZSBzYW5pdGl6YXRpb24gaXMgYSBzZWN1cml0eSBtZWFzdXJlIGFpbWVkIGF0IHByZXZlbnRpbmcgWFNTIGF0dGFja3MgdmlhIGh0bWwgbGlua3MuXG4gICAqXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gYVtocmVmXSB2aWEgZGF0YS1iaW5kaW5nIGlzIGZpcnN0IG5vcm1hbGl6ZWQgYW5kIHR1cm5lZCBpbnRvXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdGBcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXG4gICAqIHRoZSBhYnNvbHV0ZSB1cmwgaXMgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCBzdHJpbmcgYW5kIG9ubHkgdGhlbiBpcyBpdCB3cml0dGVuIGludG8gdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxuICAgKiBAcmV0dXJucyB7UmVnRXhwfG5nLiRjb21waWxlUHJvdmlkZXJ9IEN1cnJlbnQgUmVnRXhwIGlmIGNhbGxlZCB3aXRob3V0IHZhbHVlIG9yIHNlbGYgZm9yXG4gICAqICAgIGNoYWluaW5nIG90aGVyd2lzZS5cbiAgICovXG4gIHRoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcbiAgICBpZiAoaXNEZWZpbmVkKHJlZ2V4cCkpIHtcbiAgICAgICQkc2FuaXRpemVVcmlQcm92aWRlci5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdChyZWdleHApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAkJHNhbml0aXplVXJpUHJvdmlkZXIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKTtcbiAgICB9XG4gIH07XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2ltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB0aGUgZGVmYXVsdCByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIGZvciB3aGl0ZWxpc3Rpbmcgb2Ygc2FmZVxuICAgKiB1cmxzIGR1cmluZyBpbWdbc3JjXSBzYW5pdGl6YXRpb24uXG4gICAqXG4gICAqIFRoZSBzYW5pdGl6YXRpb24gaXMgYSBzZWN1cml0eSBtZWFzdXJlIGFpbWVkIGF0IHByZXZlbnQgWFNTIGF0dGFja3MgdmlhIGh0bWwgbGlua3MuXG4gICAqXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gaW1nW3NyY10gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xuICAgKiBhbiBhYnNvbHV0ZSB1cmwuIEFmdGVyd2FyZHMsIHRoZSB1cmwgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0YFxuICAgKiByZWd1bGFyIGV4cHJlc3Npb24uIElmIGEgbWF0Y2ggaXMgZm91bmQsIHRoZSBvcmlnaW5hbCB1cmwgaXMgd3JpdHRlbiBpbnRvIHRoZSBkb20uIE90aGVyd2lzZSxcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IHJlZ2V4cCBOZXcgcmVnZXhwIHRvIHdoaXRlbGlzdCB1cmxzIHdpdGguXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxuICAgKi9cbiAgdGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcbiAgICBpZiAoaXNEZWZpbmVkKHJlZ2V4cCkpIHtcbiAgICAgICQkc2FuaXRpemVVcmlQcm92aWRlci5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QocmVnZXhwKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAgJGNvbXBpbGVQcm92aWRlciNkZWJ1Z0luZm9FbmFibGVkXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGVuYWJsZWQgdXBkYXRlIHRoZSBkZWJ1Z0luZm9FbmFibGVkIHN0YXRlIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UganVzdCByZXR1cm4gdGhlXG4gICAqIGN1cnJlbnQgZGVidWdJbmZvRW5hYmxlZCBzdGF0ZVxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxuICAgKlxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBlbmFibGUvZGlzYWJsZSB2YXJpb3VzIGRlYnVnIHJ1bnRpbWUgaW5mb3JtYXRpb24gaW4gdGhlIGNvbXBpbGVyIHN1Y2ggYXMgYWRkaW5nXG4gICAqIGJpbmRpbmcgaW5mb3JtYXRpb24gYW5kIGEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHNjb3BlIG9uIHRvIERPTSBlbGVtZW50cy5cbiAgICogSWYgZW5hYmxlZCwgdGhlIGNvbXBpbGVyIHdpbGwgYWRkIHRoZSBmb2xsb3dpbmcgdG8gRE9NIGVsZW1lbnRzIHRoYXQgaGF2ZSBiZWVuIGJvdW5kIHRvIHRoZSBzY29wZVxuICAgKiAqIGBuZy1iaW5kaW5nYCBDU1MgY2xhc3NcbiAgICogKiBgJGJpbmRpbmdgIGRhdGEgcHJvcGVydHkgY29udGFpbmluZyBhbiBhcnJheSBvZiB0aGUgYmluZGluZyBleHByZXNzaW9uc1xuICAgKlxuICAgKiBZb3UgbWF5IHdhbnQgdG8gZGlzYWJsZSB0aGlzIGluIHByb2R1Y3Rpb24gZm9yIGEgc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgYm9vc3QuIFNlZVxuICAgKiB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEaXNhYmxpbmcgRGVidWcgRGF0YX0gZm9yIG1vcmUuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRydWUuXG4gICAqL1xuICB2YXIgZGVidWdJbmZvRW5hYmxlZCA9IHRydWU7XG4gIHRoaXMuZGVidWdJbmZvRW5hYmxlZCA9IGZ1bmN0aW9uKGVuYWJsZWQpIHtcbiAgICBpZiAoaXNEZWZpbmVkKGVuYWJsZWQpKSB7XG4gICAgICBkZWJ1Z0luZm9FbmFibGVkID0gZW5hYmxlZDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gZGVidWdJbmZvRW5hYmxlZDtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbXG4gICAgICAgICAgICAnJGluamVjdG9yJywgJyRpbnRlcnBvbGF0ZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckdGVtcGxhdGVSZXF1ZXN0JywgJyRwYXJzZScsXG4gICAgICAgICAgICAnJGNvbnRyb2xsZXInLCAnJHJvb3RTY29wZScsICckZG9jdW1lbnQnLCAnJHNjZScsICckYW5pbWF0ZScsICckJHNhbml0aXplVXJpJyxcbiAgICBmdW5jdGlvbigkaW5qZWN0b3IsICAgJGludGVycG9sYXRlLCAgICRleGNlcHRpb25IYW5kbGVyLCAgICR0ZW1wbGF0ZVJlcXVlc3QsICAgJHBhcnNlLFxuICAgICAgICAgICAgICRjb250cm9sbGVyLCAgICRyb290U2NvcGUsICAgJGRvY3VtZW50LCAgICRzY2UsICAgJGFuaW1hdGUsICAgJCRzYW5pdGl6ZVVyaSkge1xuXG4gICAgdmFyIEF0dHJpYnV0ZXMgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGVzVG9Db3B5KSB7XG4gICAgICBpZiAoYXR0cmlidXRlc1RvQ29weSkge1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGF0dHJpYnV0ZXNUb0NvcHkpO1xuICAgICAgICB2YXIgaSwgbCwga2V5O1xuXG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgdGhpc1trZXldID0gYXR0cmlidXRlc1RvQ29weVtrZXldO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRhdHRyID0ge307XG4gICAgICB9XG5cbiAgICAgIHRoaXMuJCRlbGVtZW50ID0gZWxlbWVudDtcbiAgICB9O1xuXG4gICAgQXR0cmlidXRlcy5wcm90b3R5cGUgPSB7XG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRub3JtYWxpemVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBDb252ZXJ0cyBhbiBhdHRyaWJ1dGUgbmFtZSAoZS5nLiBkYXNoL2NvbG9uL3VuZGVyc2NvcmUtZGVsaW1pdGVkIHN0cmluZywgb3B0aW9uYWxseSBwcmVmaXhlZCB3aXRoIGB4LWAgb3JcbiAgICAgICAqIGBkYXRhLWApIHRvIGl0cyBub3JtYWxpemVkLCBjYW1lbENhc2UgZm9ybS5cbiAgICAgICAqXG4gICAgICAgKiBBbHNvIHRoZXJlIGlzIHNwZWNpYWwgY2FzZSBmb3IgTW96IHByZWZpeCBzdGFydGluZyB3aXRoIHVwcGVyIGNhc2UgbGV0dGVyLlxuICAgICAgICpcbiAgICAgICAqIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uIGNoZWNrIG91dCB0aGUgZ3VpZGUgb24ge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSNtYXRjaGluZy1kaXJlY3RpdmVzIE1hdGNoaW5nIERpcmVjdGl2ZXN9XG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSB0byBub3JtYWxpemVcbiAgICAgICAqL1xuICAgICAgJG5vcm1hbGl6ZTogZGlyZWN0aXZlTm9ybWFsaXplLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJGFkZENsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQWRkcyB0aGUgQ1NTIGNsYXNzIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgY2xhc3NWYWwgcGFyYW1ldGVyIHRvIHRoZSBlbGVtZW50LiBJZiBhbmltYXRpb25zXG4gICAgICAgKiBhcmUgZW5hYmxlZCB0aGVuIGFuIGFuaW1hdGlvbiB3aWxsIGJlIHRyaWdnZXJlZCBmb3IgdGhlIGNsYXNzIGFkZGl0aW9uLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1ZhbCBUaGUgY2xhc3NOYW1lIHZhbHVlIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgZWxlbWVudFxuICAgICAgICovXG4gICAgICAkYWRkQ2xhc3M6IGZ1bmN0aW9uKGNsYXNzVmFsKSB7XG4gICAgICAgIGlmIChjbGFzc1ZhbCAmJiBjbGFzc1ZhbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIGNsYXNzVmFsKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkcmVtb3ZlQ2xhc3NcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZW1vdmVzIHRoZSBDU1MgY2xhc3MgdmFsdWUgc3BlY2lmaWVkIGJ5IHRoZSBjbGFzc1ZhbCBwYXJhbWV0ZXIgZnJvbSB0aGUgZWxlbWVudC4gSWZcbiAgICAgICAqIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQgdGhlbiBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgZm9yIHRoZSBjbGFzcyByZW1vdmFsLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1ZhbCBUaGUgY2xhc3NOYW1lIHZhbHVlIHRoYXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcbiAgICAgICAqL1xuICAgICAgJHJlbW92ZUNsYXNzOiBmdW5jdGlvbihjbGFzc1ZhbCkge1xuICAgICAgICBpZiAoY2xhc3NWYWwgJiYgY2xhc3NWYWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCBjbGFzc1ZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHVwZGF0ZUNsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQWRkcyBhbmQgcmVtb3ZlcyB0aGUgYXBwcm9wcmlhdGUgQ1NTIGNsYXNzIHZhbHVlcyB0byB0aGUgZWxlbWVudCBiYXNlZCBvbiB0aGUgZGlmZmVyZW5jZVxuICAgICAgICogYmV0d2VlbiB0aGUgbmV3IGFuZCBvbGQgQ1NTIGNsYXNzIHZhbHVlcyAoc3BlY2lmaWVkIGFzIG5ld0NsYXNzZXMgYW5kIG9sZENsYXNzZXMpLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdDbGFzc2VzIFRoZSBjdXJyZW50IENTUyBjbGFzc05hbWUgdmFsdWVcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvbGRDbGFzc2VzIFRoZSBmb3JtZXIgQ1NTIGNsYXNzTmFtZSB2YWx1ZVxuICAgICAgICovXG4gICAgICAkdXBkYXRlQ2xhc3M6IGZ1bmN0aW9uKG5ld0NsYXNzZXMsIG9sZENsYXNzZXMpIHtcbiAgICAgICAgdmFyIHRvQWRkID0gdG9rZW5EaWZmZXJlbmNlKG5ld0NsYXNzZXMsIG9sZENsYXNzZXMpO1xuICAgICAgICBpZiAodG9BZGQgJiYgdG9BZGQubGVuZ3RoKSB7XG4gICAgICAgICAgJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIHRvQWRkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b1JlbW92ZSA9IHRva2VuRGlmZmVyZW5jZShvbGRDbGFzc2VzLCBuZXdDbGFzc2VzKTtcbiAgICAgICAgaWYgKHRvUmVtb3ZlICYmIHRvUmVtb3ZlLmxlbmd0aCkge1xuICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCB0b1JlbW92ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IGEgbm9ybWFsaXplZCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgaW4gYSB3YXkgc3VjaCB0aGF0IGFsbCBkaXJlY3RpdmVzXG4gICAgICAgKiBjYW4gc2hhcmUgdGhlIGF0dHJpYnV0ZS4gVGhpcyBmdW5jdGlvbiBwcm9wZXJseSBoYW5kbGVzIGJvb2xlYW4gYXR0cmlidXRlcy5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgTm9ybWFsaXplZCBrZXkuIChpZSBuZ0F0dHJpYnV0ZSlcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfGJvb2xlYW59IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuIElmIGBudWxsYCBhdHRyaWJ1dGUgd2lsbCBiZSBkZWxldGVkLlxuICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gd3JpdGVBdHRyIElmIGZhbHNlLCBkb2VzIG5vdCB3cml0ZSB0aGUgdmFsdWUgdG8gRE9NIGVsZW1lbnQgYXR0cmlidXRlLlxuICAgICAgICogICAgIERlZmF1bHRzIHRvIHRydWUuXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZz19IGF0dHJOYW1lIE9wdGlvbmFsIG5vbmUgbm9ybWFsaXplZCBuYW1lLiBEZWZhdWx0cyB0byBrZXkuXG4gICAgICAgKi9cbiAgICAgICRzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUsIHdyaXRlQXR0ciwgYXR0ck5hbWUpIHtcbiAgICAgICAgLy8gVE9ETzogZGVjaWRlIHdoZXRoZXIgb3Igbm90IHRvIHRocm93IGFuIGVycm9yIGlmIFwiY2xhc3NcIlxuICAgICAgICAvL2lzIHNldCB0aHJvdWdoIHRoaXMgZnVuY3Rpb24gc2luY2UgaXQgbWF5IGNhdXNlICR1cGRhdGVDbGFzcyB0b1xuICAgICAgICAvL2JlY29tZSB1bnN0YWJsZS5cblxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuJCRlbGVtZW50WzBdLFxuICAgICAgICAgICAgYm9vbGVhbktleSA9IGdldEJvb2xlYW5BdHRyTmFtZShub2RlLCBrZXkpLFxuICAgICAgICAgICAgYWxpYXNlZEtleSA9IGdldEFsaWFzZWRBdHRyTmFtZShub2RlLCBrZXkpLFxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBrZXksXG4gICAgICAgICAgICBub2RlTmFtZTtcblxuICAgICAgICBpZiAoYm9vbGVhbktleSkge1xuICAgICAgICAgIHRoaXMuJCRlbGVtZW50LnByb3Aoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgYXR0ck5hbWUgPSBib29sZWFuS2V5O1xuICAgICAgICB9IGVsc2UgaWYgKGFsaWFzZWRLZXkpIHtcbiAgICAgICAgICB0aGlzW2FsaWFzZWRLZXldID0gdmFsdWU7XG4gICAgICAgICAgb2JzZXJ2ZXIgPSBhbGlhc2VkS2V5O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG5cbiAgICAgICAgLy8gdHJhbnNsYXRlIG5vcm1hbGl6ZWQga2V5IHRvIGFjdHVhbCBrZXlcbiAgICAgICAgaWYgKGF0dHJOYW1lKSB7XG4gICAgICAgICAgdGhpcy4kYXR0cltrZXldID0gYXR0ck5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0ck5hbWUgPSB0aGlzLiRhdHRyW2tleV07XG4gICAgICAgICAgaWYgKCFhdHRyTmFtZSkge1xuICAgICAgICAgICAgdGhpcy4kYXR0cltrZXldID0gYXR0ck5hbWUgPSBzbmFrZV9jYXNlKGtleSwgJy0nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBub2RlTmFtZSA9IG5vZGVOYW1lXyh0aGlzLiQkZWxlbWVudCk7XG5cbiAgICAgICAgaWYgKChub2RlTmFtZSA9PT0gJ2EnICYmIGtleSA9PT0gJ2hyZWYnKSB8fFxuICAgICAgICAgICAgKG5vZGVOYW1lID09PSAnaW1nJyAmJiBrZXkgPT09ICdzcmMnKSkge1xuICAgICAgICAgIC8vIHNhbml0aXplIGFbaHJlZl0gYW5kIGltZ1tzcmNdIHZhbHVlc1xuICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlID0gJCRzYW5pdGl6ZVVyaSh2YWx1ZSwga2V5ID09PSAnc3JjJyk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZU5hbWUgPT09ICdpbWcnICYmIGtleSA9PT0gJ3NyY3NldCcpIHtcbiAgICAgICAgICAvLyBzYW5pdGl6ZSBpbWdbc3Jjc2V0XSB2YWx1ZXNcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIjtcblxuICAgICAgICAgIC8vIGZpcnN0IGNoZWNrIGlmIHRoZXJlIGFyZSBzcGFjZXMgYmVjYXVzZSBpdCdzIG5vdCB0aGUgc2FtZSBwYXR0ZXJuXG4gICAgICAgICAgdmFyIHRyaW1tZWRTcmNzZXQgPSB0cmltKHZhbHVlKTtcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAoICAgOTk5eCAgICx8ICAgOTk5dyAgICx8ICAgLHwsICAgKVxuICAgICAgICAgIHZhciBzcmNQYXR0ZXJuID0gLyhcXHMrXFxkK3hcXHMqLHxcXHMrXFxkK3dcXHMqLHxcXHMrLHwsXFxzKykvO1xuICAgICAgICAgIHZhciBwYXR0ZXJuID0gL1xccy8udGVzdCh0cmltbWVkU3Jjc2V0KSA/IHNyY1BhdHRlcm4gOiAvKCwpLztcblxuICAgICAgICAgIC8vIHNwbGl0IHNyY3NldCBpbnRvIHR1cGxlIG9mIHVyaSBhbmQgZGVzY3JpcHRvciBleGNlcHQgZm9yIHRoZSBsYXN0IGl0ZW1cbiAgICAgICAgICB2YXIgcmF3VXJpcyA9IHRyaW1tZWRTcmNzZXQuc3BsaXQocGF0dGVybik7XG5cbiAgICAgICAgICAvLyBmb3IgZWFjaCB0dXBsZXNcbiAgICAgICAgICB2YXIgbmJyVXJpc1dpdGgycGFydHMgPSBNYXRoLmZsb29yKHJhd1VyaXMubGVuZ3RoIC8gMik7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYnJVcmlzV2l0aDJwYXJ0czsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJJZHggPSBpICogMjtcbiAgICAgICAgICAgIC8vIHNhbml0aXplIHRoZSB1cmlcbiAgICAgICAgICAgIHJlc3VsdCArPSAkJHNhbml0aXplVXJpKHRyaW0ocmF3VXJpc1tpbm5lcklkeF0pLCB0cnVlKTtcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgZGVzY3JpcHRvclxuICAgICAgICAgICAgcmVzdWx0ICs9IChcIiBcIiArIHRyaW0ocmF3VXJpc1tpbm5lcklkeCArIDFdKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gc3BsaXQgdGhlIGxhc3QgaXRlbSBpbnRvIHVyaSBhbmQgZGVzY3JpcHRvclxuICAgICAgICAgIHZhciBsYXN0VHVwbGUgPSB0cmltKHJhd1VyaXNbaSAqIDJdKS5zcGxpdCgvXFxzLyk7XG5cbiAgICAgICAgICAvLyBzYW5pdGl6ZSB0aGUgbGFzdCB1cmlcbiAgICAgICAgICByZXN1bHQgKz0gJCRzYW5pdGl6ZVVyaSh0cmltKGxhc3RUdXBsZVswXSksIHRydWUpO1xuXG4gICAgICAgICAgLy8gYW5kIGFkZCB0aGUgbGFzdCBkZXNjcmlwdG9yIGlmIGFueVxuICAgICAgICAgIGlmIChsYXN0VHVwbGUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gKFwiIFwiICsgdHJpbShsYXN0VHVwbGVbMV0pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWUgPSByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod3JpdGVBdHRyICE9PSBmYWxzZSkge1xuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLiQkZWxlbWVudC5yZW1vdmVBdHRyKGF0dHJOYW1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kJGVsZW1lbnQuYXR0cihhdHRyTmFtZSwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZpcmUgb2JzZXJ2ZXJzXG4gICAgICAgIHZhciAkJG9ic2VydmVycyA9IHRoaXMuJCRvYnNlcnZlcnM7XG4gICAgICAgICQkb2JzZXJ2ZXJzICYmIGZvckVhY2goJCRvYnNlcnZlcnNbb2JzZXJ2ZXJdLCBmdW5jdGlvbihmbikge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbih2YWx1ZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkb2JzZXJ2ZVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIE9ic2VydmVzIGFuIGludGVycG9sYXRlZCBhdHRyaWJ1dGUuXG4gICAgICAgKlxuICAgICAgICogVGhlIG9ic2VydmVyIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBvbmNlIGR1cmluZyB0aGUgbmV4dCBgJGRpZ2VzdGAgZm9sbG93aW5nXG4gICAgICAgKiBjb21waWxhdGlvbi4gVGhlIG9ic2VydmVyIGlzIHRoZW4gaW52b2tlZCB3aGVuZXZlciB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlXG4gICAgICAgKiBjaGFuZ2VzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgTm9ybWFsaXplZCBrZXkuIChpZSBuZ0F0dHJpYnV0ZSkgLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihpbnRlcnBvbGF0ZWRWYWx1ZSl9IGZuIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXJcbiAgICAgICAgICAgICAgICB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgY2hhbmdlcy5cbiAgICAgICAqICAgICAgICBTZWUgdGhlIHtAbGluayBndWlkZS9kaXJlY3RpdmUjdGV4dC1hbmQtYXR0cmlidXRlLWJpbmRpbmdzIERpcmVjdGl2ZXN9IGd1aWRlIGZvciBtb3JlIGluZm8uXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIG9ic2VydmVyLlxuICAgICAgICovXG4gICAgICAkb2JzZXJ2ZTogZnVuY3Rpb24oa2V5LCBmbikge1xuICAgICAgICB2YXIgYXR0cnMgPSB0aGlzLFxuICAgICAgICAgICAgJCRvYnNlcnZlcnMgPSAoYXR0cnMuJCRvYnNlcnZlcnMgfHwgKGF0dHJzLiQkb2JzZXJ2ZXJzID0gY3JlYXRlTWFwKCkpKSxcbiAgICAgICAgICAgIGxpc3RlbmVycyA9ICgkJG9ic2VydmVyc1trZXldIHx8ICgkJG9ic2VydmVyc1trZXldID0gW10pKTtcblxuICAgICAgICBsaXN0ZW5lcnMucHVzaChmbik7XG4gICAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoIWxpc3RlbmVycy4kJGludGVyICYmIGF0dHJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIC8vIG5vIG9uZSByZWdpc3RlcmVkIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLCBzbyBsZXRzIGNhbGwgaXQgbWFudWFsbHlcbiAgICAgICAgICAgIGZuKGF0dHJzW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFycmF5UmVtb3ZlKGxpc3RlbmVycywgZm4pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG5cblxuICAgIGZ1bmN0aW9uIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICB0cnkge1xuICAgICAgICAkZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpZ25vcmUsIHNpbmNlIGl0IG1lYW5zIHRoYXQgd2UgYXJlIHRyeWluZyB0byBzZXQgY2xhc3Mgb25cbiAgICAgICAgLy8gU1ZHIGVsZW1lbnQsIHdoZXJlIGNsYXNzIG5hbWUgaXMgcmVhZC1vbmx5LlxuICAgICAgfVxuICAgIH1cblxuXG4gICAgdmFyIHN0YXJ0U3ltYm9sID0gJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sKCksXG4gICAgICAgIGVuZFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKSxcbiAgICAgICAgZGVub3JtYWxpemVUZW1wbGF0ZSA9IChzdGFydFN5bWJvbCA9PSAne3snIHx8IGVuZFN5bWJvbCAgPT0gJ319JylcbiAgICAgICAgICAgID8gaWRlbnRpdHlcbiAgICAgICAgICAgIDogZnVuY3Rpb24gZGVub3JtYWxpemVUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZSgvXFx7XFx7L2csIHN0YXJ0U3ltYm9sKS5yZXBsYWNlKC99fS9nLCBlbmRTeW1ib2wpO1xuICAgICAgICB9LFxuICAgICAgICBOR19BVFRSX0JJTkRJTkcgPSAvXm5nQXR0cltBLVpdLztcblxuICAgIGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZEJpbmRpbmdJbmZvKCRlbGVtZW50LCBiaW5kaW5nKSB7XG4gICAgICB2YXIgYmluZGluZ3MgPSAkZWxlbWVudC5kYXRhKCckYmluZGluZycpIHx8IFtdO1xuXG4gICAgICBpZiAoaXNBcnJheShiaW5kaW5nKSkge1xuICAgICAgICBiaW5kaW5ncyA9IGJpbmRpbmdzLmNvbmNhdChiaW5kaW5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbmRpbmdzLnB1c2goYmluZGluZyk7XG4gICAgICB9XG5cbiAgICAgICRlbGVtZW50LmRhdGEoJyRiaW5kaW5nJywgYmluZGluZ3MpO1xuICAgIH0gOiBub29wO1xuXG4gICAgY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZEJpbmRpbmdDbGFzcygkZWxlbWVudCkge1xuICAgICAgc2FmZUFkZENsYXNzKCRlbGVtZW50LCAnbmctYmluZGluZycpO1xuICAgIH0gOiBub29wO1xuXG4gICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZFNjb3BlSW5mbygkZWxlbWVudCwgc2NvcGUsIGlzb2xhdGVkLCBub1RlbXBsYXRlKSB7XG4gICAgICB2YXIgZGF0YU5hbWUgPSBpc29sYXRlZCA/IChub1RlbXBsYXRlID8gJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyA6ICckaXNvbGF0ZVNjb3BlJykgOiAnJHNjb3BlJztcbiAgICAgICRlbGVtZW50LmRhdGEoZGF0YU5hbWUsIHNjb3BlKTtcbiAgICB9IDogbm9vcDtcblxuICAgIGNvbXBpbGUuJCRhZGRTY29wZUNsYXNzID0gZGVidWdJbmZvRW5hYmxlZCA/IGZ1bmN0aW9uICQkYWRkU2NvcGVDbGFzcygkZWxlbWVudCwgaXNvbGF0ZWQpIHtcbiAgICAgIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgaXNvbGF0ZWQgPyAnbmctaXNvbGF0ZS1zY29wZScgOiAnbmctc2NvcGUnKTtcbiAgICB9IDogbm9vcDtcblxuICAgIHJldHVybiBjb21waWxlO1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgZnVuY3Rpb24gY29tcGlsZSgkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0KSB7XG4gICAgICBpZiAoISgkY29tcGlsZU5vZGVzIGluc3RhbmNlb2YganFMaXRlKSkge1xuICAgICAgICAvLyBqcXVlcnkgYWx3YXlzIHJld3JhcHMsIHdoZXJlYXMgd2UgbmVlZCB0byBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgc2VsZWN0b3Igc28gdGhhdCB3ZSBjYW5cbiAgICAgICAgLy8gbW9kaWZ5IGl0LlxuICAgICAgICAkY29tcGlsZU5vZGVzID0ganFMaXRlKCRjb21waWxlTm9kZXMpO1xuICAgICAgfVxuICAgICAgLy8gV2UgY2FuIG5vdCBjb21waWxlIHRvcCBsZXZlbCB0ZXh0IGVsZW1lbnRzIHNpbmNlIHRleHQgbm9kZXMgY2FuIGJlIG1lcmdlZCBhbmQgd2Ugd2lsbFxuICAgICAgLy8gbm90IGJlIGFibGUgdG8gYXR0YWNoIHNjb3BlIGRhdGEgdG8gdGhlbSwgc28gd2Ugd2lsbCB3cmFwIHRoZW0gaW4gPHNwYW4+XG4gICAgICBmb3JFYWNoKCRjb21waWxlTm9kZXMsIGZ1bmN0aW9uKG5vZGUsIGluZGV4KSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IE5PREVfVFlQRV9URVhUICYmIG5vZGUubm9kZVZhbHVlLm1hdGNoKC9cXFMrLykgLyogbm9uLWVtcHR5ICovICkge1xuICAgICAgICAgICRjb21waWxlTm9kZXNbaW5kZXhdID0ganFMaXRlKG5vZGUpLndyYXAoJzxzcGFuPjwvc3Bhbj4nKS5wYXJlbnQoKVswXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB2YXIgY29tcG9zaXRlTGlua0ZuID1cbiAgICAgICAgICAgICAgY29tcGlsZU5vZGVzKCRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgJGNvbXBpbGVOb2RlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO1xuICAgICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MoJGNvbXBpbGVOb2Rlcyk7XG4gICAgICB2YXIgbmFtZXNwYWNlID0gbnVsbDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBwdWJsaWNMaW5rRm4oc2NvcGUsIGNsb25lQ29ubmVjdEZuLCBvcHRpb25zKSB7XG4gICAgICAgIGFzc2VydEFyZyhzY29wZSwgJ3Njb3BlJyk7XG5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiA9IG9wdGlvbnMucGFyZW50Qm91bmRUcmFuc2NsdWRlRm4sXG4gICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzID0gb3B0aW9ucy50cmFuc2NsdWRlQ29udHJvbGxlcnMsXG4gICAgICAgICAgZnV0dXJlUGFyZW50RWxlbWVudCA9IG9wdGlvbnMuZnV0dXJlUGFyZW50RWxlbWVudDtcblxuICAgICAgICAvLyBXaGVuIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgaXMgcGFzc2VkLCBpdCBpcyBhXG4gICAgICAgIC8vIGBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZWAgZnVuY3Rpb24gKGl0IHdhcyBwcmV2aW91c2x5IHBhc3NlZFxuICAgICAgICAvLyBhcyBgdHJhbnNjbHVkZWAgdG8gZGlyZWN0aXZlLmxpbmspIHNvIHdlIG11c3QgdW53cmFwIGl0IHRvIGdldFxuICAgICAgICAvLyBpdHMgYGJvdW5kVHJhbnNjbHVkZUZuYFxuICAgICAgICBpZiAocGFyZW50Qm91bmRUcmFuc2NsdWRlRm4gJiYgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4uJCRib3VuZFRyYW5zY2x1ZGUpIHtcbiAgICAgICAgICBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiA9IHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLiQkYm91bmRUcmFuc2NsdWRlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFuYW1lc3BhY2UpIHtcbiAgICAgICAgICBuYW1lc3BhY2UgPSBkZXRlY3ROYW1lc3BhY2VGb3JDaGlsZEVsZW1lbnRzKGZ1dHVyZVBhcmVudEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciAkbGlua05vZGU7XG4gICAgICAgIGlmIChuYW1lc3BhY2UgIT09ICdodG1sJykge1xuICAgICAgICAgIC8vIFdoZW4gdXNpbmcgYSBkaXJlY3RpdmUgd2l0aCByZXBsYWNlOnRydWUgYW5kIHRlbXBsYXRlVXJsIHRoZSAkY29tcGlsZU5vZGVzXG4gICAgICAgICAgLy8gKG9yIGEgY2hpbGQgZWxlbWVudCBpbnNpZGUgb2YgdGhlbSlcbiAgICAgICAgICAvLyBtaWdodCBjaGFuZ2UsIHNvIHdlIG5lZWQgdG8gcmVjcmVhdGUgdGhlIG5hbWVzcGFjZSBhZGFwdGVkIGNvbXBpbGVOb2Rlc1xuICAgICAgICAgIC8vIGZvciBjYWxsIHRvIHRoZSBsaW5rIGZ1bmN0aW9uLlxuICAgICAgICAgIC8vIE5vdGU6IFRoaXMgd2lsbCBhbHJlYWR5IGNsb25lIHRoZSBub2Rlcy4uLlxuICAgICAgICAgICRsaW5rTm9kZSA9IGpxTGl0ZShcbiAgICAgICAgICAgIHdyYXBUZW1wbGF0ZShuYW1lc3BhY2UsIGpxTGl0ZSgnPGRpdj4nKS5hcHBlbmQoJGNvbXBpbGVOb2RlcykuaHRtbCgpKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2xvbmVDb25uZWN0Rm4pIHtcbiAgICAgICAgICAvLyBpbXBvcnRhbnQhITogd2UgbXVzdCBjYWxsIG91ciBqcUxpdGUuY2xvbmUoKSBzaW5jZSB0aGUgalF1ZXJ5IG9uZSBpcyB0cnlpbmcgdG8gYmUgc21hcnRcbiAgICAgICAgICAvLyBhbmQgc29tZXRpbWVzIGNoYW5nZXMgdGhlIHN0cnVjdHVyZSBvZiB0aGUgRE9NLlxuICAgICAgICAgICRsaW5rTm9kZSA9IEpRTGl0ZVByb3RvdHlwZS5jbG9uZS5jYWxsKCRjb21waWxlTm9kZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRsaW5rTm9kZSA9ICRjb21waWxlTm9kZXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnNjbHVkZUNvbnRyb2xsZXJzKSB7XG4gICAgICAgICAgZm9yICh2YXIgY29udHJvbGxlck5hbWUgaW4gdHJhbnNjbHVkZUNvbnRyb2xsZXJzKSB7XG4gICAgICAgICAgICAkbGlua05vZGUuZGF0YSgnJCcgKyBjb250cm9sbGVyTmFtZSArICdDb250cm9sbGVyJywgdHJhbnNjbHVkZUNvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXS5pbnN0YW5jZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbygkbGlua05vZGUsIHNjb3BlKTtcblxuICAgICAgICBpZiAoY2xvbmVDb25uZWN0Rm4pIGNsb25lQ29ubmVjdEZuKCRsaW5rTm9kZSwgc2NvcGUpO1xuICAgICAgICBpZiAoY29tcG9zaXRlTGlua0ZuKSBjb21wb3NpdGVMaW5rRm4oc2NvcGUsICRsaW5rTm9kZSwgJGxpbmtOb2RlLCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgIHJldHVybiAkbGlua05vZGU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRldGVjdE5hbWVzcGFjZUZvckNoaWxkRWxlbWVudHMocGFyZW50RWxlbWVudCkge1xuICAgICAgLy8gVE9ETzogTWFrZSB0aGlzIGRldGVjdCBNYXRoTUwgYXMgd2VsbC4uLlxuICAgICAgdmFyIG5vZGUgPSBwYXJlbnRFbGVtZW50ICYmIHBhcmVudEVsZW1lbnRbMF07XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgcmV0dXJuICdodG1sJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBub2RlTmFtZV8obm9kZSkgIT09ICdmb3JlaWdub2JqZWN0JyAmJiBub2RlLnRvU3RyaW5nKCkubWF0Y2goL1NWRy8pID8gJ3N2ZycgOiAnaHRtbCc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGlsZSBmdW5jdGlvbiBtYXRjaGVzIGVhY2ggbm9kZSBpbiBub2RlTGlzdCBhZ2FpbnN0IHRoZSBkaXJlY3RpdmVzLiBPbmNlIGFsbCBkaXJlY3RpdmVzXG4gICAgICogZm9yIGEgcGFydGljdWxhciBub2RlIGFyZSBjb2xsZWN0ZWQgdGhlaXIgY29tcGlsZSBmdW5jdGlvbnMgYXJlIGV4ZWN1dGVkLiBUaGUgY29tcGlsZVxuICAgICAqIGZ1bmN0aW9ucyByZXR1cm4gdmFsdWVzIC0gdGhlIGxpbmtpbmcgZnVuY3Rpb25zIC0gYXJlIGNvbWJpbmVkIGludG8gYSBjb21wb3NpdGUgbGlua2luZ1xuICAgICAqIGZ1bmN0aW9uLCB3aGljaCBpcyB0aGUgYSBsaW5raW5nIGZ1bmN0aW9uIGZvciB0aGUgbm9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0IGFuIGFycmF5IG9mIG5vZGVzIG9yIE5vZGVMaXN0IHRvIGNvbXBpbGVcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGFuZ3VsYXIuU2NvcGUsIGNsb25lQXR0YWNoRm49KX0gdHJhbnNjbHVkZUZuIEEgbGlua2luZyBmdW5jdGlvbiwgd2hlcmUgdGhlXG4gICAgICogICAgICAgIHNjb3BlIGFyZ3VtZW50IGlzIGF1dG8tZ2VuZXJhdGVkIHRvIHRoZSBuZXcgY2hpbGQgb2YgdGhlIHRyYW5zY2x1ZGVkIHBhcmVudCBzY29wZS5cbiAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSAkcm9vdEVsZW1lbnQgSWYgdGhlIG5vZGVMaXN0IGlzIHRoZSByb290IG9mIHRoZSBjb21waWxhdGlvbiB0cmVlIHRoZW5cbiAgICAgKiAgICAgICAgdGhlIHJvb3RFbGVtZW50IG11c3QgYmUgc2V0IHRoZSBqcUxpdGUgY29sbGVjdGlvbiBvZiB0aGUgY29tcGlsZSByb290LiBUaGlzIGlzXG4gICAgICogICAgICAgIG5lZWRlZCBzbyB0aGF0IHRoZSBqcUxpdGUgY29sbGVjdGlvbiBpdGVtcyBjYW4gYmUgcmVwbGFjZWQgd2l0aCB3aWRnZXRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbWF4UHJpb3JpdHkgTWF4IGRpcmVjdGl2ZSBwcmlvcml0eS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgY29tcG9zaXRlIGxpbmtpbmcgZnVuY3Rpb24gb2YgYWxsIG9mIHRoZSBtYXRjaGVkIGRpcmVjdGl2ZXMgb3IgbnVsbC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21waWxlTm9kZXMobm9kZUxpc3QsIHRyYW5zY2x1ZGVGbiwgJHJvb3RFbGVtZW50LCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIHZhciBsaW5rRm5zID0gW10sXG4gICAgICAgICAgYXR0cnMsIGRpcmVjdGl2ZXMsIG5vZGVMaW5rRm4sIGNoaWxkTm9kZXMsIGNoaWxkTGlua0ZuLCBsaW5rRm5Gb3VuZCwgbm9kZUxpbmtGbkZvdW5kO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGF0dHJzID0gbmV3IEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICAvLyB3ZSBtdXN0IGFsd2F5cyByZWZlciB0byBub2RlTGlzdFtpXSBzaW5jZSB0aGUgbm9kZXMgY2FuIGJlIHJlcGxhY2VkIHVuZGVybmVhdGggdXMuXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhub2RlTGlzdFtpXSwgW10sIGF0dHJzLCBpID09PSAwID8gbWF4UHJpb3JpdHkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlRGlyZWN0aXZlKTtcblxuICAgICAgICBub2RlTGlua0ZuID0gKGRpcmVjdGl2ZXMubGVuZ3RoKVxuICAgICAgICAgICAgPyBhcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcywgbm9kZUxpc3RbaV0sIGF0dHJzLCB0cmFuc2NsdWRlRm4sICRyb290RWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCwgW10sIFtdLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KVxuICAgICAgICAgICAgOiBudWxsO1xuXG4gICAgICAgIGlmIChub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4uc2NvcGUpIHtcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcyhhdHRycy4kJGVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hpbGRMaW5rRm4gPSAobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIShjaGlsZE5vZGVzID0gbm9kZUxpc3RbaV0uY2hpbGROb2RlcykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAhY2hpbGROb2Rlcy5sZW5ndGgpXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogY29tcGlsZU5vZGVzKGNoaWxkTm9kZXMsXG4gICAgICAgICAgICAgICAgIG5vZGVMaW5rRm4gPyAoXG4gICAgICAgICAgICAgICAgICAobm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCB8fCAhbm9kZUxpbmtGbi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgICAmJiBub2RlTGlua0ZuLnRyYW5zY2x1ZGUpIDogdHJhbnNjbHVkZUZuKTtcblxuICAgICAgICBpZiAobm9kZUxpbmtGbiB8fCBjaGlsZExpbmtGbikge1xuICAgICAgICAgIGxpbmtGbnMucHVzaChpLCBub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG4gICAgICAgICAgbGlua0ZuRm91bmQgPSB0cnVlO1xuICAgICAgICAgIG5vZGVMaW5rRm5Gb3VuZCA9IG5vZGVMaW5rRm5Gb3VuZCB8fCBub2RlTGlua0ZuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy91c2UgdGhlIHByZXZpb3VzIGNvbnRleHQgb25seSBmb3IgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHZpcnR1YWwgZ3JvdXBcbiAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIHJldHVybiBhIGxpbmtpbmcgZnVuY3Rpb24gaWYgd2UgaGF2ZSBmb3VuZCBhbnl0aGluZywgbnVsbCBvdGhlcndpc2VcbiAgICAgIHJldHVybiBsaW5rRm5Gb3VuZCA/IGNvbXBvc2l0ZUxpbmtGbiA6IG51bGw7XG5cbiAgICAgIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbihzY29wZSwgbm9kZUxpc3QsICRyb290RWxlbWVudCwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pIHtcbiAgICAgICAgdmFyIG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuLCBub2RlLCBjaGlsZFNjb3BlLCBpLCBpaSwgaWR4LCBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuO1xuICAgICAgICB2YXIgc3RhYmxlTm9kZUxpc3Q7XG5cblxuICAgICAgICBpZiAobm9kZUxpbmtGbkZvdW5kKSB7XG4gICAgICAgICAgLy8gY29weSBub2RlTGlzdCBzbyB0aGF0IGlmIGEgbm9kZUxpbmtGbiByZW1vdmVzIG9yIGFkZHMgYW4gZWxlbWVudCBhdCB0aGlzIERPTSBsZXZlbCBvdXJcbiAgICAgICAgICAvLyBvZmZzZXRzIGRvbid0IGdldCBzY3Jld2VkIHVwXG4gICAgICAgICAgdmFyIG5vZGVMaXN0TGVuZ3RoID0gbm9kZUxpc3QubGVuZ3RoO1xuICAgICAgICAgIHN0YWJsZU5vZGVMaXN0ID0gbmV3IEFycmF5KG5vZGVMaXN0TGVuZ3RoKTtcblxuICAgICAgICAgIC8vIGNyZWF0ZSBhIHNwYXJzZSBhcnJheSBieSBvbmx5IGNvcHlpbmcgdGhlIGVsZW1lbnRzIHdoaWNoIGhhdmUgYSBsaW5rRm5cbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlua0Zucy5sZW5ndGg7IGkrPTMpIHtcbiAgICAgICAgICAgIGlkeCA9IGxpbmtGbnNbaV07XG4gICAgICAgICAgICBzdGFibGVOb2RlTGlzdFtpZHhdID0gbm9kZUxpc3RbaWR4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhYmxlTm9kZUxpc3QgPSBub2RlTGlzdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gbGlua0Zucy5sZW5ndGg7IGkgPCBpaTspIHtcbiAgICAgICAgICBub2RlID0gc3RhYmxlTm9kZUxpc3RbbGlua0Zuc1tpKytdXTtcbiAgICAgICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuICAgICAgICAgIGNoaWxkTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuXG4gICAgICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcbiAgICAgICAgICAgIGlmIChub2RlTGlua0ZuLnNjb3BlKSB7XG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBzY29wZS4kbmV3KCk7XG4gICAgICAgICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8oanFMaXRlKG5vZGUpLCBjaGlsZFNjb3BlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBzY29wZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKFxuICAgICAgICAgICAgICAgICAgc2NvcGUsIG5vZGVMaW5rRm4udHJhbnNjbHVkZSwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4sXG4gICAgICAgICAgICAgICAgICBub2RlTGlua0ZuLmVsZW1lbnRUcmFuc2NsdWRlT25UaGlzRWxlbWVudCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIW5vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50ICYmIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICghcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4gJiYgdHJhbnNjbHVkZUZuKSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgdHJhbnNjbHVkZUZuKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vZGVMaW5rRm4oY2hpbGRMaW5rRm4sIGNoaWxkU2NvcGUsIG5vZGUsICRyb290RWxlbWVudCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkTGlua0ZuKSB7XG4gICAgICAgICAgICBjaGlsZExpbmtGbihzY29wZSwgbm9kZS5jaGlsZE5vZGVzLCB1bmRlZmluZWQsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgdHJhbnNjbHVkZUZuLCBwcmV2aW91c0JvdW5kVHJhbnNjbHVkZUZuLCBlbGVtZW50VHJhbnNjbHVzaW9uKSB7XG5cbiAgICAgIHZhciBib3VuZFRyYW5zY2x1ZGVGbiA9IGZ1bmN0aW9uKHRyYW5zY2x1ZGVkU2NvcGUsIGNsb25lRm4sIGNvbnRyb2xsZXJzLCBmdXR1cmVQYXJlbnRFbGVtZW50LCBjb250YWluaW5nU2NvcGUpIHtcblxuICAgICAgICBpZiAoIXRyYW5zY2x1ZGVkU2NvcGUpIHtcbiAgICAgICAgICB0cmFuc2NsdWRlZFNjb3BlID0gc2NvcGUuJG5ldyhmYWxzZSwgY29udGFpbmluZ1Njb3BlKTtcbiAgICAgICAgICB0cmFuc2NsdWRlZFNjb3BlLiQkdHJhbnNjbHVkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zY2x1ZGVGbih0cmFuc2NsdWRlZFNjb3BlLCBjbG9uZUZuLCB7XG4gICAgICAgICAgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm46IHByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4sXG4gICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzOiBjb250cm9sbGVycyxcbiAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50OiBmdXR1cmVQYXJlbnRFbGVtZW50XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvb2tzIGZvciBkaXJlY3RpdmVzIG9uIHRoZSBnaXZlbiBub2RlIGFuZCBhZGRzIHRoZW0gdG8gdGhlIGRpcmVjdGl2ZSBjb2xsZWN0aW9uIHdoaWNoIGlzXG4gICAgICogc29ydGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5vZGUgTm9kZSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIGRpcmVjdGl2ZXMgQW4gYXJyYXkgdG8gd2hpY2ggdGhlIGRpcmVjdGl2ZXMgYXJlIGFkZGVkIHRvLiBUaGlzIGFycmF5IGlzIHNvcnRlZCBiZWZvcmVcbiAgICAgKiAgICAgICAgdGhlIGZ1bmN0aW9uIHJldHVybnMuXG4gICAgICogQHBhcmFtIGF0dHJzIFRoZSBzaGFyZWQgYXR0cnMgb2JqZWN0IHdoaWNoIGlzIHVzZWQgdG8gcG9wdWxhdGUgdGhlIG5vcm1hbGl6ZWQgYXR0cmlidXRlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG1heFByaW9yaXR5IE1heCBkaXJlY3RpdmUgcHJpb3JpdHkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29sbGVjdERpcmVjdGl2ZXMobm9kZSwgZGlyZWN0aXZlcywgYXR0cnMsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpIHtcbiAgICAgIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGUsXG4gICAgICAgICAgYXR0cnNNYXAgPSBhdHRycy4kYXR0cixcbiAgICAgICAgICBtYXRjaCxcbiAgICAgICAgICBjbGFzc05hbWU7XG5cbiAgICAgIHN3aXRjaCAobm9kZVR5cGUpIHtcbiAgICAgICAgY2FzZSBOT0RFX1RZUEVfRUxFTUVOVDogLyogRWxlbWVudCAqL1xuICAgICAgICAgIC8vIHVzZSB0aGUgbm9kZSBuYW1lOiA8ZGlyZWN0aXZlPlxuICAgICAgICAgIGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLFxuICAgICAgICAgICAgICBkaXJlY3RpdmVOb3JtYWxpemUobm9kZU5hbWVfKG5vZGUpKSwgJ0UnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKTtcblxuICAgICAgICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgYXR0cmlidXRlc1xuICAgICAgICAgIGZvciAodmFyIGF0dHIsIG5hbWUsIG5OYW1lLCBuZ0F0dHJOYW1lLCB2YWx1ZSwgaXNOZ0F0dHIsIG5BdHRycyA9IG5vZGUuYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICAgICBqID0gMCwgamogPSBuQXR0cnMgJiYgbkF0dHJzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBhdHRyU3RhcnROYW1lID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgYXR0ckVuZE5hbWUgPSBmYWxzZTtcblxuICAgICAgICAgICAgYXR0ciA9IG5BdHRyc1tqXTtcbiAgICAgICAgICAgIG5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgICB2YWx1ZSA9IHRyaW0oYXR0ci52YWx1ZSk7XG5cbiAgICAgICAgICAgIC8vIHN1cHBvcnQgbmdBdHRyIGF0dHJpYnV0ZSBiaW5kaW5nXG4gICAgICAgICAgICBuZ0F0dHJOYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG5hbWUpO1xuICAgICAgICAgICAgaWYgKGlzTmdBdHRyID0gTkdfQVRUUl9CSU5ESU5HLnRlc3QobmdBdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShQUkVGSVhfUkVHRVhQLCAnJylcbiAgICAgICAgICAgICAgICAuc3Vic3RyKDgpLnJlcGxhY2UoL18oLikvZywgZnVuY3Rpb24obWF0Y2gsIGxldHRlcikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZGlyZWN0aXZlTk5hbWUgPSBuZ0F0dHJOYW1lLnJlcGxhY2UoLyhTdGFydHxFbmQpJC8sICcnKTtcbiAgICAgICAgICAgIGlmIChkaXJlY3RpdmVJc011bHRpRWxlbWVudChkaXJlY3RpdmVOTmFtZSkpIHtcbiAgICAgICAgICAgICAgaWYgKG5nQXR0ck5hbWUgPT09IGRpcmVjdGl2ZU5OYW1lICsgJ1N0YXJ0Jykge1xuICAgICAgICAgICAgICAgIGF0dHJTdGFydE5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICAgIGF0dHJFbmROYW1lID0gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSA1KSArICdlbmQnO1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigwLCBuYW1lLmxlbmd0aCAtIDYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5OYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICBhdHRyc01hcFtuTmFtZV0gPSBuYW1lO1xuICAgICAgICAgICAgaWYgKGlzTmdBdHRyIHx8ICFhdHRycy5oYXNPd25Qcm9wZXJ0eShuTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoZ2V0Qm9vbGVhbkF0dHJOYW1lKG5vZGUsIG5OYW1lKSkge1xuICAgICAgICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdHJ1ZTsgLy8gcHJlc2VuY2UgbWVhbnMgdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZEF0dHJJbnRlcnBvbGF0ZURpcmVjdGl2ZShub2RlLCBkaXJlY3RpdmVzLCB2YWx1ZSwgbk5hbWUsIGlzTmdBdHRyKTtcbiAgICAgICAgICAgIGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLCBuTmFtZSwgJ0EnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBhdHRyU3RhcnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyRW5kTmFtZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gdXNlIGNsYXNzIGFzIGRpcmVjdGl2ZVxuICAgICAgICAgIGNsYXNzTmFtZSA9IG5vZGUuY2xhc3NOYW1lO1xuICAgICAgICAgIGlmIChpc09iamVjdChjbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgIC8vIE1heWJlIFNWR0FuaW1hdGVkU3RyaW5nXG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5hbmltVmFsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNTdHJpbmcoY2xhc3NOYW1lKSAmJiBjbGFzc05hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICB3aGlsZSAobWF0Y2ggPSBDTEFTU19ESVJFQ1RJVkVfUkVHRVhQLmV4ZWMoY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgICBuTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShtYXRjaFsyXSk7XG4gICAgICAgICAgICAgIGlmIChhZGREaXJlY3RpdmUoZGlyZWN0aXZlcywgbk5hbWUsICdDJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSkpIHtcbiAgICAgICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB0cmltKG1hdGNoWzNdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3Vic3RyKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTk9ERV9UWVBFX1RFWFQ6IC8qIFRleHQgTm9kZSAqL1xuICAgICAgICAgIGFkZFRleHRJbnRlcnBvbGF0ZURpcmVjdGl2ZShkaXJlY3RpdmVzLCBub2RlLm5vZGVWYWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTk9ERV9UWVBFX0NPTU1FTlQ6IC8qIENvbW1lbnQgKi9cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbWF0Y2ggPSBDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAuZXhlYyhub2RlLm5vZGVWYWx1ZSk7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgbk5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobWF0Y2hbMV0pO1xuICAgICAgICAgICAgICBpZiAoYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5OYW1lLCAnTScsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpKSB7XG4gICAgICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdHJpbShtYXRjaFsyXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyB0dXJucyBvdXQgdGhhdCB1bmRlciBzb21lIGNpcmN1bXN0YW5jZXMgSUU5IHRocm93cyBlcnJvcnMgd2hlbiBvbmUgYXR0ZW1wdHMgdG8gcmVhZFxuICAgICAgICAgICAgLy8gY29tbWVudCdzIG5vZGUgdmFsdWUuXG4gICAgICAgICAgICAvLyBKdXN0IGlnbm9yZSBpdCBhbmQgY29udGludWUuIChDYW4ndCBzZWVtIHRvIHJlcHJvZHVjZSBpbiB0ZXN0IGNhc2UuKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgZGlyZWN0aXZlcy5zb3J0KGJ5UHJpb3JpdHkpO1xuICAgICAgcmV0dXJuIGRpcmVjdGl2ZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBub2RlIHdpdGggYW4gZGlyZWN0aXZlLXN0YXJ0IGl0IGNvbGxlY3RzIGFsbCBvZiB0aGUgc2libGluZ3MgdW50aWwgaXQgZmluZHNcbiAgICAgKiBkaXJlY3RpdmUtZW5kLlxuICAgICAqIEBwYXJhbSBub2RlXG4gICAgICogQHBhcmFtIGF0dHJTdGFydFxuICAgICAqIEBwYXJhbSBhdHRyRW5kXG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ3JvdXBTY2FuKG5vZGUsIGF0dHJTdGFydCwgYXR0ckVuZCkge1xuICAgICAgdmFyIG5vZGVzID0gW107XG4gICAgICB2YXIgZGVwdGggPSAwO1xuICAgICAgaWYgKGF0dHJTdGFydCAmJiBub2RlLmhhc0F0dHJpYnV0ZSAmJiBub2RlLmhhc0F0dHJpYnV0ZShhdHRyU3RhcnQpKSB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCd1dGVyZGlyJyxcbiAgICAgICAgICAgICAgICAgICAgICBcIlVudGVybWluYXRlZCBhdHRyaWJ1dGUsIGZvdW5kICd7MH0nIGJ1dCBubyBtYXRjaGluZyAnezF9JyBmb3VuZC5cIixcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpIGRlcHRoKys7XG4gICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoYXR0ckVuZCkpIGRlcHRoLS07XG4gICAgICAgICAgfVxuICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH0gd2hpbGUgKGRlcHRoID4gMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ganFMaXRlKG5vZGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcGVyIGZvciBsaW5raW5nIGZ1bmN0aW9uIHdoaWNoIGNvbnZlcnRzIG5vcm1hbCBsaW5raW5nIGZ1bmN0aW9uIGludG8gYSBncm91cGVkXG4gICAgICogbGlua2luZyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gbGlua0ZuXG4gICAgICogQHBhcmFtIGF0dHJTdGFydFxuICAgICAqIEBwYXJhbSBhdHRyRW5kXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKGxpbmtGbiwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycywgdHJhbnNjbHVkZUZuKSB7XG4gICAgICAgIGVsZW1lbnQgPSBncm91cFNjYW4oZWxlbWVudFswXSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgcmV0dXJuIGxpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPbmNlIHRoZSBkaXJlY3RpdmVzIGhhdmUgYmVlbiBjb2xsZWN0ZWQsIHRoZWlyIGNvbXBpbGUgZnVuY3Rpb25zIGFyZSBleGVjdXRlZC4gVGhpcyBtZXRob2RcbiAgICAgKiBpcyByZXNwb25zaWJsZSBmb3IgaW5saW5pbmcgZGlyZWN0aXZlIHRlbXBsYXRlcyBhcyB3ZWxsIGFzIHRlcm1pbmF0aW5nIHRoZSBhcHBsaWNhdGlvblxuICAgICAqIG9mIHRoZSBkaXJlY3RpdmVzIGlmIHRoZSB0ZXJtaW5hbCBkaXJlY3RpdmUgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXMgQXJyYXkgb2YgY29sbGVjdGVkIGRpcmVjdGl2ZXMgdG8gZXhlY3V0ZSB0aGVpciBjb21waWxlIGZ1bmN0aW9uLlxuICAgICAqICAgICAgICB0aGlzIG5lZWRzIHRvIGJlIHByZS1zb3J0ZWQgYnkgcHJpb3JpdHkgb3JkZXIuXG4gICAgICogQHBhcmFtIHtOb2RlfSBjb21waWxlTm9kZSBUaGUgcmF3IERPTSBub2RlIHRvIGFwcGx5IHRoZSBjb21waWxlIGZ1bmN0aW9ucyB0b1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0ZW1wbGF0ZUF0dHJzIFRoZSBzaGFyZWQgYXR0cmlidXRlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGVGbiBBIGxpbmtpbmcgZnVuY3Rpb24sIHdoZXJlIHRoZVxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZSBhcmd1bWVudCBpcyBhdXRvLWdlbmVyYXRlZCB0byB0aGUgbmV3XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIG9mIHRoZSB0cmFuc2NsdWRlZCBwYXJlbnQgc2NvcGUuXG4gICAgICogQHBhcmFtIHtKUUxpdGV9IGpxQ29sbGVjdGlvbiBJZiB3ZSBhcmUgd29ya2luZyBvbiB0aGUgcm9vdCBvZiB0aGUgY29tcGlsZSB0cmVlIHRoZW4gdGhpc1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnQgaGFzIHRoZSByb290IGpxTGl0ZSBhcnJheSBzbyB0aGF0IHdlIGNhbiByZXBsYWNlIG5vZGVzXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbiBpdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IG9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSBBbiBvcHRpb25hbCBkaXJlY3RpdmUgdGhhdCB3aWxsIGJlIGlnbm9yZWQgd2hlblxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBpbGluZyB0aGUgdHJhbnNjbHVzaW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gcHJlTGlua0Zuc1xuICAgICAqIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gcG9zdExpbmtGbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJldmlvdXNDb21waWxlQ29udGV4dCBDb250ZXh0IHVzZWQgZm9yIHByZXZpb3VzIGNvbXBpbGF0aW9uIG9mIHRoZSBjdXJyZW50XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gbGlua0ZuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXBwbHlEaXJlY3RpdmVzVG9Ob2RlKGRpcmVjdGl2ZXMsIGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzLCB0cmFuc2NsdWRlRm4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpxQ29sbGVjdGlvbiwgb3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xuICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQgfHwge307XG5cbiAgICAgIHZhciB0ZXJtaW5hbFByaW9yaXR5ID0gLU51bWJlci5NQVhfVkFMVUUsXG4gICAgICAgICAgbmV3U2NvcGVEaXJlY3RpdmUsXG4gICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXMgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0LmNvbnRyb2xsZXJEaXJlY3RpdmVzLFxuICAgICAgICAgIGNvbnRyb2xsZXJzLFxuICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQubmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLFxuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC50ZW1wbGF0ZURpcmVjdGl2ZSxcbiAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC5ub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLFxuICAgICAgICAgIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSBmYWxzZSxcbiAgICAgICAgICBoYXNUZW1wbGF0ZSA9IGZhbHNlLFxuICAgICAgICAgIGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSxcbiAgICAgICAgICAkY29tcGlsZU5vZGUgPSB0ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudCA9IGpxTGl0ZShjb21waWxlTm9kZSksXG4gICAgICAgICAgZGlyZWN0aXZlLFxuICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsXG4gICAgICAgICAgJHRlbXBsYXRlLFxuICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgPSBvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUsXG4gICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4gPSB0cmFuc2NsdWRlRm4sXG4gICAgICAgICAgbGlua0ZuLFxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlO1xuXG4gICAgICAvLyBleGVjdXRlcyBhbGwgZGlyZWN0aXZlcyBvbiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgZGlyZWN0aXZlID0gZGlyZWN0aXZlc1tpXTtcbiAgICAgICAgdmFyIGF0dHJTdGFydCA9IGRpcmVjdGl2ZS4kJHN0YXJ0O1xuICAgICAgICB2YXIgYXR0ckVuZCA9IGRpcmVjdGl2ZS4kJGVuZDtcblxuICAgICAgICAvLyBjb2xsZWN0IG11bHRpYmxvY2sgc2VjdGlvbnNcbiAgICAgICAgaWYgKGF0dHJTdGFydCkge1xuICAgICAgICAgICRjb21waWxlTm9kZSA9IGdyb3VwU2Nhbihjb21waWxlTm9kZSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgfVxuICAgICAgICAkdGVtcGxhdGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRlcm1pbmFsUHJpb3JpdHkgPiBkaXJlY3RpdmUucHJpb3JpdHkpIHtcbiAgICAgICAgICBicmVhazsgLy8gcHJldmVudCBmdXJ0aGVyIHByb2Nlc3Npbmcgb2YgZGlyZWN0aXZlc1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpcmVjdGl2ZVZhbHVlID0gZGlyZWN0aXZlLnNjb3BlKSB7XG5cbiAgICAgICAgICAvLyBza2lwIHRoZSBjaGVjayBmb3IgZGlyZWN0aXZlcyB3aXRoIGFzeW5jIHRlbXBsYXRlcywgd2UnbGwgY2hlY2sgdGhlIGRlcml2ZWQgc3luY1xuICAgICAgICAgIC8vIGRpcmVjdGl2ZSB3aGVuIHRoZSB0ZW1wbGF0ZSBhcnJpdmVzXG4gICAgICAgICAgaWYgKCFkaXJlY3RpdmUudGVtcGxhdGVVcmwpIHtcbiAgICAgICAgICAgIGlmIChpc09iamVjdChkaXJlY3RpdmVWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyBkaXJlY3RpdmUgaXMgdHJ5aW5nIHRvIGFkZCBhbiBpc29sYXRlZCBzY29wZS5cbiAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBubyBzY29wZSBvZiBhbnkga2luZCBhbHJlYWR5XG4gICAgICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCduZXcvaXNvbGF0ZWQgc2NvcGUnLCBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHwgbmV3U2NvcGVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyBkaXJlY3RpdmUgaXMgdHJ5aW5nIHRvIGFkZCBhIGNoaWxkIHNjb3BlLlxuICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZXJlIGlzIG5vIGlzb2xhdGVkIHNjb3BlIGFscmVhZHlcbiAgICAgICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ25ldy9pc29sYXRlZCBzY29wZScsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSwgZGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5ld1Njb3BlRGlyZWN0aXZlID0gbmV3U2NvcGVEaXJlY3RpdmUgfHwgZGlyZWN0aXZlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZS5uYW1lO1xuXG4gICAgICAgIGlmICghZGlyZWN0aXZlLnRlbXBsYXRlVXJsICYmIGRpcmVjdGl2ZS5jb250cm9sbGVyKSB7XG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUuY29udHJvbGxlcjtcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlcyA9IGNvbnRyb2xsZXJEaXJlY3RpdmVzIHx8IHt9O1xuICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKFwiJ1wiICsgZGlyZWN0aXZlTmFtZSArIFwiJyBjb250cm9sbGVyXCIsXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XG4gICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXNbZGlyZWN0aXZlTmFtZV0gPSBkaXJlY3RpdmU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUudHJhbnNjbHVkZSkge1xuICAgICAgICAgIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIG5nSWYgYW5kIG5nUmVwZWF0IHNvIHRoYXQgd2UgZG9uJ3QgY29tcGxhaW4gYWJvdXQgZHVwbGljYXRlIHRyYW5zY2x1c2lvbi5cbiAgICAgICAgICAvLyBUaGlzIG9wdGlvbiBzaG91bGQgb25seSBiZSB1c2VkIGJ5IGRpcmVjdGl2ZXMgdGhhdCBrbm93IGhvdyB0byBzYWZlbHkgaGFuZGxlIGVsZW1lbnQgdHJhbnNjbHVzaW9uLFxuICAgICAgICAgIC8vIHdoZXJlIHRoZSB0cmFuc2NsdWRlZCBub2RlcyBhcmUgYWRkZWQgb3IgcmVwbGFjZWQgYWZ0ZXIgbGlua2luZy5cbiAgICAgICAgICBpZiAoIWRpcmVjdGl2ZS4kJHRsYikge1xuICAgICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ3RyYW5zY2x1c2lvbicsIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGRpcmVjdGl2ZVZhbHVlID09ICdlbGVtZW50Jykge1xuICAgICAgICAgICAgaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGVybWluYWxQcmlvcml0eSA9IGRpcmVjdGl2ZS5wcmlvcml0eTtcbiAgICAgICAgICAgICR0ZW1wbGF0ZSA9ICRjb21waWxlTm9kZTtcbiAgICAgICAgICAgICRjb21waWxlTm9kZSA9IHRlbXBsYXRlQXR0cnMuJCRlbGVtZW50ID1cbiAgICAgICAgICAgICAgICBqcUxpdGUoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnICcgKyBkaXJlY3RpdmVOYW1lICsgJzogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVBdHRyc1tkaXJlY3RpdmVOYW1lXSArICcgJykpO1xuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkY29tcGlsZU5vZGVbMF07XG4gICAgICAgICAgICByZXBsYWNlV2l0aChqcUNvbGxlY3Rpb24sIHNsaWNlQXJncygkdGVtcGxhdGUpLCBjb21waWxlTm9kZSk7XG5cbiAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gY29tcGlsZSgkdGVtcGxhdGUsIHRyYW5zY2x1ZGVGbiwgdGVybWluYWxQcmlvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlRGlyZWN0aXZlICYmIHJlcGxhY2VEaXJlY3RpdmUubmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgcGFzcyBpbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gY29udHJvbGxlckRpcmVjdGl2ZXMgLSBvdGhlcndpc2Ugd2UnbGwgY3JlYXRlIGR1cGxpY2F0ZXMgY29udHJvbGxlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIG9yIHRlbXBsYXRlRGlyZWN0aXZlIC0gY29tYmluaW5nIHRlbXBsYXRlcyB3aXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVsZW1lbnQgdHJhbnNjbHVzaW9uIGRvZXNuJ3QgbWFrZSBzZW5zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIG9ubHkgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSBzbyB0aGF0IHdlIHByZXZlbnQgcHV0dGluZyB0cmFuc2NsdXNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBzYW1lIGVsZW1lbnQgbW9yZSB0aGFuIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOiBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICR0ZW1wbGF0ZSA9IGpxTGl0ZShqcUxpdGVDbG9uZShjb21waWxlTm9kZSkpLmNvbnRlbnRzKCk7XG4gICAgICAgICAgICAkY29tcGlsZU5vZGUuZW1wdHkoKTsgLy8gY2xlYXIgY29udGVudHNcbiAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gY29tcGlsZSgkdGVtcGxhdGUsIHRyYW5zY2x1ZGVGbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZW1wbGF0ZSkge1xuICAgICAgICAgIGhhc1RlbXBsYXRlID0gdHJ1ZTtcbiAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgndGVtcGxhdGUnLCB0ZW1wbGF0ZURpcmVjdGl2ZSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSAoaXNGdW5jdGlvbihkaXJlY3RpdmUudGVtcGxhdGUpKVxuICAgICAgICAgICAgICA/IGRpcmVjdGl2ZS50ZW1wbGF0ZSgkY29tcGlsZU5vZGUsIHRlbXBsYXRlQXR0cnMpXG4gICAgICAgICAgICAgIDogZGlyZWN0aXZlLnRlbXBsYXRlO1xuXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkZW5vcm1hbGl6ZVRlbXBsYXRlKGRpcmVjdGl2ZVZhbHVlKTtcblxuICAgICAgICAgIGlmIChkaXJlY3RpdmUucmVwbGFjZSkge1xuICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcbiAgICAgICAgICAgIGlmIChqcUxpdGVJc1RleHROb2RlKGRpcmVjdGl2ZVZhbHVlKSkge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IHJlbW92ZUNvbW1lbnRzKHdyYXBUZW1wbGF0ZShkaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2UsIHRyaW0oZGlyZWN0aXZlVmFsdWUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21waWxlTm9kZSA9ICR0ZW1wbGF0ZVswXTtcblxuICAgICAgICAgICAgaWYgKCR0ZW1wbGF0ZS5sZW5ndGggIT0gMSB8fCBjb21waWxlTm9kZS5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0VMRU1FTlQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbHJ0JyxcbiAgICAgICAgICAgICAgICAgIFwiVGVtcGxhdGUgZm9yIGRpcmVjdGl2ZSAnezB9JyBtdXN0IGhhdmUgZXhhY3RseSBvbmUgcm9vdCBlbGVtZW50LiB7MX1cIixcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsICcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwbGFjZVdpdGgoanFDb2xsZWN0aW9uLCAkY29tcGlsZU5vZGUsIGNvbXBpbGVOb2RlKTtcblxuICAgICAgICAgICAgdmFyIG5ld1RlbXBsYXRlQXR0cnMgPSB7JGF0dHI6IHt9fTtcblxuICAgICAgICAgICAgLy8gY29tYmluZSBkaXJlY3RpdmVzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUgYW5kIGZyb20gdGhlIHRlbXBsYXRlOlxuICAgICAgICAgICAgLy8gLSB0YWtlIHRoZSBhcnJheSBvZiBkaXJlY3RpdmVzIGZvciB0aGlzIGVsZW1lbnRcbiAgICAgICAgICAgIC8vIC0gc3BsaXQgaXQgaW50byB0d28gcGFydHMsIHRob3NlIHRoYXQgYWxyZWFkeSBhcHBsaWVkIChwcm9jZXNzZWQpIGFuZCB0aG9zZSB0aGF0IHdlcmVuJ3QgKHVucHJvY2Vzc2VkKVxuICAgICAgICAgICAgLy8gLSBjb2xsZWN0IGRpcmVjdGl2ZXMgZnJvbSB0aGUgdGVtcGxhdGUgYW5kIHNvcnQgdGhlbSBieSBwcmlvcml0eVxuICAgICAgICAgICAgLy8gLSBjb21iaW5lIGRpcmVjdGl2ZXMgYXM6IHByb2Nlc3NlZCArIHRlbXBsYXRlICsgdW5wcm9jZXNzZWRcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhjb21waWxlTm9kZSwgW10sIG5ld1RlbXBsYXRlQXR0cnMpO1xuICAgICAgICAgICAgdmFyIHVucHJvY2Vzc2VkRGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXMuc3BsaWNlKGkgKyAxLCBkaXJlY3RpdmVzLmxlbmd0aCAtIChpICsgMSkpO1xuXG4gICAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XG4gICAgICAgICAgICAgIG1hcmtEaXJlY3RpdmVzQXNJc29sYXRlKHRlbXBsYXRlRGlyZWN0aXZlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXJlY3RpdmVzID0gZGlyZWN0aXZlcy5jb25jYXQodGVtcGxhdGVEaXJlY3RpdmVzKS5jb25jYXQodW5wcm9jZXNzZWREaXJlY3RpdmVzKTtcbiAgICAgICAgICAgIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKHRlbXBsYXRlQXR0cnMsIG5ld1RlbXBsYXRlQXR0cnMpO1xuXG4gICAgICAgICAgICBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkY29tcGlsZU5vZGUuaHRtbChkaXJlY3RpdmVWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZW1wbGF0ZVVybCkge1xuICAgICAgICAgIGhhc1RlbXBsYXRlID0gdHJ1ZTtcbiAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgndGVtcGxhdGUnLCB0ZW1wbGF0ZURpcmVjdGl2ZSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuXG4gICAgICAgICAgaWYgKGRpcmVjdGl2ZS5yZXBsYWNlKSB7XG4gICAgICAgICAgICByZXBsYWNlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG5vZGVMaW5rRm4gPSBjb21waWxlVGVtcGxhdGVVcmwoZGlyZWN0aXZlcy5zcGxpY2UoaSwgZGlyZWN0aXZlcy5sZW5ndGggLSBpKSwgJGNvbXBpbGVOb2RlLFxuICAgICAgICAgICAgICB0ZW1wbGF0ZUF0dHJzLCBqcUNvbGxlY3Rpb24sIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgJiYgY2hpbGRUcmFuc2NsdWRlRm4sIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLCB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXM6IGNvbnRyb2xsZXJEaXJlY3RpdmVzLFxuICAgICAgICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZTogbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlOiB0ZW1wbGF0ZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOiBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aXZlLmNvbXBpbGUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGlua0ZuID0gZGlyZWN0aXZlLmNvbXBpbGUoJGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzLCBjaGlsZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihsaW5rRm4pKSB7XG4gICAgICAgICAgICAgIGFkZExpbmtGbnMobnVsbCwgbGlua0ZuLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5rRm4pIHtcbiAgICAgICAgICAgICAgYWRkTGlua0ZucyhsaW5rRm4ucHJlLCBsaW5rRm4ucG9zdCwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlLCBzdGFydGluZ1RhZygkY29tcGlsZU5vZGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aXZlLnRlcm1pbmFsKSB7XG4gICAgICAgICAgbm9kZUxpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG4gICAgICAgICAgdGVybWluYWxQcmlvcml0eSA9IE1hdGgubWF4KHRlcm1pbmFsUHJpb3JpdHksIGRpcmVjdGl2ZS5wcmlvcml0eSk7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBub2RlTGlua0ZuLnNjb3BlID0gbmV3U2NvcGVEaXJlY3RpdmUgJiYgbmV3U2NvcGVEaXJlY3RpdmUuc2NvcGUgPT09IHRydWU7XG4gICAgICBub2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50ID0gaGFzVHJhbnNjbHVkZURpcmVjdGl2ZTtcbiAgICAgIG5vZGVMaW5rRm4uZWxlbWVudFRyYW5zY2x1ZGVPblRoaXNFbGVtZW50ID0gaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmU7XG4gICAgICBub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCA9IGhhc1RlbXBsYXRlO1xuICAgICAgbm9kZUxpbmtGbi50cmFuc2NsdWRlID0gY2hpbGRUcmFuc2NsdWRlRm47XG5cbiAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZTtcblxuICAgICAgLy8gbWlnaHQgYmUgbm9ybWFsIG9yIGRlbGF5ZWQgbm9kZUxpbmtGbiBkZXBlbmRpbmcgb24gaWYgdGVtcGxhdGVVcmwgaXMgcHJlc2VudFxuICAgICAgcmV0dXJuIG5vZGVMaW5rRm47XG5cbiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgIGZ1bmN0aW9uIGFkZExpbmtGbnMocHJlLCBwb3N0LCBhdHRyU3RhcnQsIGF0dHJFbmQpIHtcbiAgICAgICAgaWYgKHByZSkge1xuICAgICAgICAgIGlmIChhdHRyU3RhcnQpIHByZSA9IGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKHByZSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgICBwcmUucmVxdWlyZSA9IGRpcmVjdGl2ZS5yZXF1aXJlO1xuICAgICAgICAgIHByZS5kaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlTmFtZTtcbiAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID09PSBkaXJlY3RpdmUgfHwgZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlKSB7XG4gICAgICAgICAgICBwcmUgPSBjbG9uZUFuZEFubm90YXRlRm4ocHJlLCB7aXNvbGF0ZVNjb3BlOiB0cnVlfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHByZUxpbmtGbnMucHVzaChwcmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3N0KSB7XG4gICAgICAgICAgaWYgKGF0dHJTdGFydCkgcG9zdCA9IGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKHBvc3QsIGF0dHJTdGFydCwgYXR0ckVuZCk7XG4gICAgICAgICAgcG9zdC5yZXF1aXJlID0gZGlyZWN0aXZlLnJlcXVpcmU7XG4gICAgICAgICAgcG9zdC5kaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlTmFtZTtcbiAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID09PSBkaXJlY3RpdmUgfHwgZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlKSB7XG4gICAgICAgICAgICBwb3N0ID0gY2xvbmVBbmRBbm5vdGF0ZUZuKHBvc3QsIHtpc29sYXRlU2NvcGU6IHRydWV9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcG9zdExpbmtGbnMucHVzaChwb3N0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIGZ1bmN0aW9uIGdldENvbnRyb2xsZXJzKGRpcmVjdGl2ZU5hbWUsIHJlcXVpcmUsICRlbGVtZW50LCBlbGVtZW50Q29udHJvbGxlcnMpIHtcbiAgICAgICAgdmFyIHZhbHVlLCByZXRyaWV2YWxNZXRob2QgPSAnZGF0YScsIG9wdGlvbmFsID0gZmFsc2U7XG4gICAgICAgIHZhciAkc2VhcmNoRWxlbWVudCA9ICRlbGVtZW50O1xuICAgICAgICB2YXIgbWF0Y2g7XG4gICAgICAgIGlmIChpc1N0cmluZyhyZXF1aXJlKSkge1xuICAgICAgICAgIG1hdGNoID0gcmVxdWlyZS5tYXRjaChSRVFVSVJFX1BSRUZJWF9SRUdFWFApO1xuICAgICAgICAgIHJlcXVpcmUgPSByZXF1aXJlLnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xuXG4gICAgICAgICAgaWYgKG1hdGNoWzNdKSB7XG4gICAgICAgICAgICBpZiAobWF0Y2hbMV0pIG1hdGNoWzNdID0gbnVsbDtcbiAgICAgICAgICAgIGVsc2UgbWF0Y2hbMV0gPSBtYXRjaFszXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1hdGNoWzFdID09PSAnXicpIHtcbiAgICAgICAgICAgIHJldHJpZXZhbE1ldGhvZCA9ICdpbmhlcml0ZWREYXRhJztcbiAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoWzFdID09PSAnXl4nKSB7XG4gICAgICAgICAgICByZXRyaWV2YWxNZXRob2QgPSAnaW5oZXJpdGVkRGF0YSc7XG4gICAgICAgICAgICAkc2VhcmNoRWxlbWVudCA9ICRlbGVtZW50LnBhcmVudCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobWF0Y2hbMl0gPT09ICc/Jykge1xuICAgICAgICAgICAgb3B0aW9uYWwgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhbHVlID0gbnVsbDtcblxuICAgICAgICAgIGlmIChlbGVtZW50Q29udHJvbGxlcnMgJiYgcmV0cmlldmFsTWV0aG9kID09PSAnZGF0YScpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9IGVsZW1lbnRDb250cm9sbGVyc1tyZXF1aXJlXSkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmluc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlIHx8ICRzZWFyY2hFbGVtZW50W3JldHJpZXZhbE1ldGhvZF0oJyQnICsgcmVxdWlyZSArICdDb250cm9sbGVyJyk7XG5cbiAgICAgICAgICBpZiAoIXZhbHVlICYmICFvcHRpb25hbCkge1xuICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2N0cmVxJyxcbiAgICAgICAgICAgICAgICBcIkNvbnRyb2xsZXIgJ3swfScsIHJlcXVpcmVkIGJ5IGRpcmVjdGl2ZSAnezF9JywgY2FuJ3QgYmUgZm91bmQhXCIsXG4gICAgICAgICAgICAgICAgcmVxdWlyZSwgZGlyZWN0aXZlTmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB2YWx1ZSB8fCBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkocmVxdWlyZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IFtdO1xuICAgICAgICAgIGZvckVhY2gocmVxdWlyZSwgZnVuY3Rpb24ocmVxdWlyZSkge1xuICAgICAgICAgICAgdmFsdWUucHVzaChnZXRDb250cm9sbGVycyhkaXJlY3RpdmVOYW1lLCByZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuXG5cbiAgICAgIGZ1bmN0aW9uIG5vZGVMaW5rRm4oY2hpbGRMaW5rRm4sIHNjb3BlLCBsaW5rTm9kZSwgJHJvb3RFbGVtZW50LCBib3VuZFRyYW5zY2x1ZGVGbikge1xuICAgICAgICB2YXIgaSwgaWksIGxpbmtGbiwgY29udHJvbGxlciwgaXNvbGF0ZVNjb3BlLCBlbGVtZW50Q29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbiwgJGVsZW1lbnQsXG4gICAgICAgICAgICBhdHRycztcblxuICAgICAgICBpZiAoY29tcGlsZU5vZGUgPT09IGxpbmtOb2RlKSB7XG4gICAgICAgICAgYXR0cnMgPSB0ZW1wbGF0ZUF0dHJzO1xuICAgICAgICAgICRlbGVtZW50ID0gdGVtcGxhdGVBdHRycy4kJGVsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGVsZW1lbnQgPSBqcUxpdGUobGlua05vZGUpO1xuICAgICAgICAgIGF0dHJzID0gbmV3IEF0dHJpYnV0ZXMoJGVsZW1lbnQsIHRlbXBsYXRlQXR0cnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSkge1xuICAgICAgICAgIGlzb2xhdGVTY29wZSA9IHNjb3BlLiRuZXcodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYm91bmRUcmFuc2NsdWRlRm4pIHtcbiAgICAgICAgICAvLyB0cmFjayBgYm91bmRUcmFuc2NsdWRlRm5gIHNvIGl0IGNhbiBiZSB1bndyYXBwZWQgaWYgYHRyYW5zY2x1ZGVGbmBcbiAgICAgICAgICAvLyBpcyBsYXRlciBwYXNzZWQgYXMgYHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuYCB0byBgcHVibGljTGlua0ZuYFxuICAgICAgICAgIHRyYW5zY2x1ZGVGbiA9IGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlO1xuICAgICAgICAgIHRyYW5zY2x1ZGVGbi4kJGJvdW5kVHJhbnNjbHVkZSA9IGJvdW5kVHJhbnNjbHVkZUZuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRyb2xsZXJEaXJlY3RpdmVzKSB7XG4gICAgICAgICAgLy8gVE9ETzogbWVyZ2UgYGNvbnRyb2xsZXJzYCBhbmQgYGVsZW1lbnRDb250cm9sbGVyc2AgaW50byBzaW5nbGUgb2JqZWN0LlxuICAgICAgICAgIGNvbnRyb2xsZXJzID0ge307XG4gICAgICAgICAgZWxlbWVudENvbnRyb2xsZXJzID0ge307XG4gICAgICAgICAgZm9yRWFjaChjb250cm9sbGVyRGlyZWN0aXZlcywgZnVuY3Rpb24oZGlyZWN0aXZlKSB7XG4gICAgICAgICAgICB2YXIgbG9jYWxzID0ge1xuICAgICAgICAgICAgICAkc2NvcGU6IGRpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8IGRpcmVjdGl2ZS4kJGlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxuICAgICAgICAgICAgICAkZWxlbWVudDogJGVsZW1lbnQsXG4gICAgICAgICAgICAgICRhdHRyczogYXR0cnMsXG4gICAgICAgICAgICAgICR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlRm5cbiAgICAgICAgICAgIH0sIGNvbnRyb2xsZXJJbnN0YW5jZTtcblxuICAgICAgICAgICAgY29udHJvbGxlciA9IGRpcmVjdGl2ZS5jb250cm9sbGVyO1xuICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIgPT0gJ0AnKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBhdHRyc1tkaXJlY3RpdmUubmFtZV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZSA9ICRjb250cm9sbGVyKGNvbnRyb2xsZXIsIGxvY2FscywgdHJ1ZSwgZGlyZWN0aXZlLmNvbnRyb2xsZXJBcyk7XG5cbiAgICAgICAgICAgIC8vIEZvciBkaXJlY3RpdmVzIHdpdGggZWxlbWVudCB0cmFuc2NsdXNpb24gdGhlIGVsZW1lbnQgaXMgYSBjb21tZW50LFxuICAgICAgICAgICAgLy8gYnV0IGpRdWVyeSAuZGF0YSBkb2Vzbid0IHN1cHBvcnQgYXR0YWNoaW5nIGRhdGEgdG8gY29tbWVudCBub2RlcyBhcyBpdCdzIGhhcmQgdG9cbiAgICAgICAgICAgIC8vIGNsZWFuIHVwIChodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC84MzM1KS5cbiAgICAgICAgICAgIC8vIEluc3RlYWQsIHdlIHNhdmUgdGhlIGNvbnRyb2xsZXJzIGZvciB0aGUgZWxlbWVudCBpbiBhIGxvY2FsIGhhc2ggYW5kIGF0dGFjaCB0byAuZGF0YVxuICAgICAgICAgICAgLy8gbGF0ZXIsIG9uY2Ugd2UgaGF2ZSB0aGUgYWN0dWFsIGVsZW1lbnQuXG4gICAgICAgICAgICBlbGVtZW50Q29udHJvbGxlcnNbZGlyZWN0aXZlLm5hbWVdID0gY29udHJvbGxlckluc3RhbmNlO1xuICAgICAgICAgICAgaWYgKCFoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSkge1xuICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKCckJyArIGRpcmVjdGl2ZS5uYW1lICsgJ0NvbnRyb2xsZXInLCBjb250cm9sbGVySW5zdGFuY2UuaW5zdGFuY2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb250cm9sbGVyc1tkaXJlY3RpdmUubmFtZV0gPSBjb250cm9sbGVySW5zdGFuY2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XG4gICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbygkZWxlbWVudCwgaXNvbGF0ZVNjb3BlLCB0cnVlLCAhKHRlbXBsYXRlRGlyZWN0aXZlICYmICh0ZW1wbGF0ZURpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8XG4gICAgICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID09PSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUuJCRvcmlnaW5hbERpcmVjdGl2ZSkpKTtcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcygkZWxlbWVudCwgdHJ1ZSk7XG5cbiAgICAgICAgICB2YXIgaXNvbGF0ZVNjb3BlQ29udHJvbGxlciA9IGNvbnRyb2xsZXJzICYmIGNvbnRyb2xsZXJzW25ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS5uYW1lXTtcbiAgICAgICAgICB2YXIgaXNvbGF0ZUJpbmRpbmdDb250ZXh0ID0gaXNvbGF0ZVNjb3BlO1xuICAgICAgICAgIGlmIChpc29sYXRlU2NvcGVDb250cm9sbGVyICYmIGlzb2xhdGVTY29wZUNvbnRyb2xsZXIuaWRlbnRpZmllciAmJlxuICAgICAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUuYmluZFRvQ29udHJvbGxlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaXNvbGF0ZUJpbmRpbmdDb250ZXh0ID0gaXNvbGF0ZVNjb3BlQ29udHJvbGxlci5pbnN0YW5jZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3JFYWNoKGlzb2xhdGVTY29wZS4kJGlzb2xhdGVCaW5kaW5ncyA9IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS4kJGlzb2xhdGVCaW5kaW5ncywgZnVuY3Rpb24oZGVmaW5pdGlvbiwgc2NvcGVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgYXR0ck5hbWUgPSBkZWZpbml0aW9uLmF0dHJOYW1lLFxuICAgICAgICAgICAgICAgIG9wdGlvbmFsID0gZGVmaW5pdGlvbi5vcHRpb25hbCxcbiAgICAgICAgICAgICAgICBtb2RlID0gZGVmaW5pdGlvbi5tb2RlLCAvLyBALCA9LCBvciAmXG4gICAgICAgICAgICAgICAgbGFzdFZhbHVlLFxuICAgICAgICAgICAgICAgIHBhcmVudEdldCwgcGFyZW50U2V0LCBjb21wYXJlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcblxuICAgICAgICAgICAgICBjYXNlICdAJzpcbiAgICAgICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZShhdHRyTmFtZSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXR0cnMuJCRvYnNlcnZlcnNbYXR0ck5hbWVdLiQkc2NvcGUgPSBzY29wZTtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cnNbYXR0ck5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlIGhhcyBiZWVuIHByb3ZpZGVkIHRoZW4gd2UgdHJpZ2dlciBhbiBpbnRlcnBvbGF0aW9uIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAgICAgLy8gdGhlIHZhbHVlIGlzIHRoZXJlIGZvciB1c2UgaW4gdGhlIGxpbmsgZm5cbiAgICAgICAgICAgICAgICAgIGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdID0gJGludGVycG9sYXRlKGF0dHJzW2F0dHJOYW1lXSkoc2NvcGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICc9JzpcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwgJiYgIWF0dHJzW2F0dHJOYW1lXSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnRHZXQgPSAkcGFyc2UoYXR0cnNbYXR0ck5hbWVdKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50R2V0LmxpdGVyYWwpIHtcbiAgICAgICAgICAgICAgICAgIGNvbXBhcmUgPSBlcXVhbHM7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbXBhcmUgPSBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhID09PSBiIHx8IChhICE9PSBhICYmIGIgIT09IGIpOyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnRTZXQgPSBwYXJlbnRHZXQuYXNzaWduIHx8IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGNoYW5nZSwgb3Igd2Ugd2lsbCB0aHJvdyB0aGlzIGV4Y2VwdGlvbiBvbiBldmVyeSAkZGlnZXN0XG4gICAgICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IHBhcmVudEdldChzY29wZSk7XG4gICAgICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbm9uYXNzaWduJyxcbiAgICAgICAgICAgICAgICAgICAgICBcIkV4cHJlc3Npb24gJ3swfScgdXNlZCB3aXRoIGRpcmVjdGl2ZSAnezF9JyBpcyBub24tYXNzaWduYWJsZSFcIixcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyc1thdHRyTmFtZV0sIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS5uYW1lKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdID0gcGFyZW50R2V0KHNjb3BlKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50VmFsdWVXYXRjaCA9IGZ1bmN0aW9uIHBhcmVudFZhbHVlV2F0Y2gocGFyZW50VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIGlmICghY29tcGFyZShwYXJlbnRWYWx1ZSwgaXNvbGF0ZUJpbmRpbmdDb250ZXh0W3Njb3BlTmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBvdXQgb2Ygc3luYyBhbmQgbmVlZCB0byBjb3B5XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29tcGFyZShwYXJlbnRWYWx1ZSwgbGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcmVudCBjaGFuZ2VkIGFuZCBpdCBoYXMgcHJlY2VkZW5jZVxuICAgICAgICAgICAgICAgICAgICAgIGlzb2xhdGVCaW5kaW5nQ29udGV4dFtzY29wZU5hbWVdID0gcGFyZW50VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHBhcmVudCBjYW4gYmUgYXNzaWduZWQgdGhlbiBkbyBzb1xuICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFNldChzY29wZSwgcGFyZW50VmFsdWUgPSBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0VmFsdWUgPSBwYXJlbnRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHBhcmVudFZhbHVlV2F0Y2guJHN0YXRlZnVsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgdW53YXRjaDtcbiAgICAgICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5jb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICB1bndhdGNoID0gc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihhdHRyc1thdHRyTmFtZV0sIHBhcmVudFZhbHVlV2F0Y2gpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB1bndhdGNoID0gc2NvcGUuJHdhdGNoKCRwYXJzZShhdHRyc1thdHRyTmFtZV0sIHBhcmVudFZhbHVlV2F0Y2gpLCBudWxsLCBwYXJlbnRHZXQubGl0ZXJhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlzb2xhdGVTY29wZS4kb24oJyRkZXN0cm95JywgdW53YXRjaCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAnJic6XG4gICAgICAgICAgICAgICAgcGFyZW50R2V0ID0gJHBhcnNlKGF0dHJzW2F0dHJOYW1lXSk7XG4gICAgICAgICAgICAgICAgaXNvbGF0ZUJpbmRpbmdDb250ZXh0W3Njb3BlTmFtZV0gPSBmdW5jdGlvbihsb2NhbHMpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnRHZXQoc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJvbGxlcnMpIHtcbiAgICAgICAgICBmb3JFYWNoKGNvbnRyb2xsZXJzLCBmdW5jdGlvbihjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29udHJvbGxlcnMgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUFJFTElOS0lOR1xuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHByZUxpbmtGbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGxpbmtGbiA9IHByZUxpbmtGbnNbaV07XG4gICAgICAgICAgaW52b2tlTGlua0ZuKGxpbmtGbixcbiAgICAgICAgICAgICAgbGlua0ZuLmlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxuICAgICAgICAgICAgICAkZWxlbWVudCxcbiAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgIGxpbmtGbi5yZXF1aXJlICYmIGdldENvbnRyb2xsZXJzKGxpbmtGbi5kaXJlY3RpdmVOYW1lLCBsaW5rRm4ucmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyksXG4gICAgICAgICAgICAgIHRyYW5zY2x1ZGVGblxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSRUNVUlNJT05cbiAgICAgICAgLy8gV2Ugb25seSBwYXNzIHRoZSBpc29sYXRlIHNjb3BlLCBpZiB0aGUgaXNvbGF0ZSBkaXJlY3RpdmUgaGFzIGEgdGVtcGxhdGUsXG4gICAgICAgIC8vIG90aGVyd2lzZSB0aGUgY2hpbGQgZWxlbWVudHMgZG8gbm90IGJlbG9uZyB0byB0aGUgaXNvbGF0ZSBkaXJlY3RpdmUuXG4gICAgICAgIHZhciBzY29wZVRvQ2hpbGQgPSBzY29wZTtcbiAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSAmJiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlIHx8IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS50ZW1wbGF0ZVVybCA9PT0gbnVsbCkpIHtcbiAgICAgICAgICBzY29wZVRvQ2hpbGQgPSBpc29sYXRlU2NvcGU7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRMaW5rRm4gJiYgY2hpbGRMaW5rRm4oc2NvcGVUb0NoaWxkLCBsaW5rTm9kZS5jaGlsZE5vZGVzLCB1bmRlZmluZWQsIGJvdW5kVHJhbnNjbHVkZUZuKTtcblxuICAgICAgICAvLyBQT1NUTElOS0lOR1xuICAgICAgICBmb3IgKGkgPSBwb3N0TGlua0Zucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGxpbmtGbiA9IHBvc3RMaW5rRm5zW2ldO1xuICAgICAgICAgIGludm9rZUxpbmtGbihsaW5rRm4sXG4gICAgICAgICAgICAgIGxpbmtGbi5pc29sYXRlU2NvcGUgPyBpc29sYXRlU2NvcGUgOiBzY29wZSxcbiAgICAgICAgICAgICAgJGVsZW1lbnQsXG4gICAgICAgICAgICAgIGF0dHJzLFxuICAgICAgICAgICAgICBsaW5rRm4ucmVxdWlyZSAmJiBnZXRDb250cm9sbGVycyhsaW5rRm4uZGlyZWN0aXZlTmFtZSwgbGlua0ZuLnJlcXVpcmUsICRlbGVtZW50LCBlbGVtZW50Q29udHJvbGxlcnMpLFxuICAgICAgICAgICAgICB0cmFuc2NsdWRlRm5cbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZnVuY3Rpb24gdGhhdCBpcyBpbmplY3RlZCBhcyBgJHRyYW5zY2x1ZGVgLlxuICAgICAgICAvLyBOb3RlOiBhbGwgYXJndW1lbnRzIGFyZSBvcHRpb25hbCFcbiAgICAgICAgZnVuY3Rpb24gY29udHJvbGxlcnNCb3VuZFRyYW5zY2x1ZGUoc2NvcGUsIGNsb25lQXR0YWNoRm4sIGZ1dHVyZVBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgdHJhbnNjbHVkZUNvbnRyb2xsZXJzO1xuXG4gICAgICAgICAgLy8gTm8gc2NvcGUgcGFzc2VkIGluOlxuICAgICAgICAgIGlmICghaXNTY29wZShzY29wZSkpIHtcbiAgICAgICAgICAgIGZ1dHVyZVBhcmVudEVsZW1lbnQgPSBjbG9uZUF0dGFjaEZuO1xuICAgICAgICAgICAgY2xvbmVBdHRhY2hGbiA9IHNjb3BlO1xuICAgICAgICAgICAgc2NvcGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlKSB7XG4gICAgICAgICAgICB0cmFuc2NsdWRlQ29udHJvbGxlcnMgPSBlbGVtZW50Q29udHJvbGxlcnM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghZnV0dXJlUGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgZnV0dXJlUGFyZW50RWxlbWVudCA9IGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlID8gJGVsZW1lbnQucGFyZW50KCkgOiAkZWxlbWVudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCBjbG9uZUF0dGFjaEZuLCB0cmFuc2NsdWRlQ29udHJvbGxlcnMsIGZ1dHVyZVBhcmVudEVsZW1lbnQsIHNjb3BlVG9DaGlsZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXJrRGlyZWN0aXZlc0FzSXNvbGF0ZShkaXJlY3RpdmVzKSB7XG4gICAgICAvLyBtYXJrIGFsbCBkaXJlY3RpdmVzIGFzIG5lZWRpbmcgaXNvbGF0ZSBzY29wZS5cbiAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICBkaXJlY3RpdmVzW2pdID0gaW5oZXJpdChkaXJlY3RpdmVzW2pdLCB7JCRpc29sYXRlU2NvcGU6IHRydWV9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBsb29rcyB1cCB0aGUgZGlyZWN0aXZlIGFuZCBkZWNvcmF0ZXMgaXQgd2l0aCBleGNlcHRpb24gaGFuZGxpbmcgYW5kIHByb3BlciBwYXJhbWV0ZXJzLiBXZVxuICAgICAqIGNhbGwgdGhpcyB0aGUgYm91bmREaXJlY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBkaXJlY3RpdmUgdG8gbG9vayB1cC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gVGhlIGRpcmVjdGl2ZSBtdXN0IGJlIGZvdW5kIGluIHNwZWNpZmljIGZvcm1hdC5cbiAgICAgKiAgIFN0cmluZyBjb250YWluaW5nIGFueSBvZiB0aGVzZXMgY2hhcmFjdGVyczpcbiAgICAgKlxuICAgICAqICAgKiBgRWA6IGVsZW1lbnQgbmFtZVxuICAgICAqICAgKiBgQSc6IGF0dHJpYnV0ZVxuICAgICAqICAgKiBgQ2A6IGNsYXNzXG4gICAgICogICAqIGBNYDogY29tbWVudFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGRpcmVjdGl2ZSB3YXMgYWRkZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkRGlyZWN0aXZlKHREaXJlY3RpdmVzLCBuYW1lLCBsb2NhdGlvbiwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSwgc3RhcnRBdHRyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kQXR0ck5hbWUpIHtcbiAgICAgIGlmIChuYW1lID09PSBpZ25vcmVEaXJlY3RpdmUpIHJldHVybiBudWxsO1xuICAgICAgdmFyIG1hdGNoID0gbnVsbDtcbiAgICAgIGlmIChoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGZvciAodmFyIGRpcmVjdGl2ZSwgZGlyZWN0aXZlcyA9ICRpbmplY3Rvci5nZXQobmFtZSArIFN1ZmZpeCksXG4gICAgICAgICAgICBpID0gMCwgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGlyZWN0aXZlID0gZGlyZWN0aXZlc1tpXTtcbiAgICAgICAgICAgIGlmICgobWF4UHJpb3JpdHkgPT09IHVuZGVmaW5lZCB8fCBtYXhQcmlvcml0eSA+IGRpcmVjdGl2ZS5wcmlvcml0eSkgJiZcbiAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLnJlc3RyaWN0LmluZGV4T2YobG9jYXRpb24pICE9IC0xKSB7XG4gICAgICAgICAgICAgIGlmIChzdGFydEF0dHJOYW1lKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlID0gaW5oZXJpdChkaXJlY3RpdmUsIHskJHN0YXJ0OiBzdGFydEF0dHJOYW1lLCAkJGVuZDogZW5kQXR0ck5hbWV9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0RGlyZWN0aXZlcy5wdXNoKGRpcmVjdGl2ZSk7XG4gICAgICAgICAgICAgIG1hdGNoID0gZGlyZWN0aXZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7IH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogbG9va3MgdXAgdGhlIGRpcmVjdGl2ZSBhbmQgcmV0dXJucyB0cnVlIGlmIGl0IGlzIGEgbXVsdGktZWxlbWVudCBkaXJlY3RpdmUsXG4gICAgICogYW5kIHRoZXJlZm9yZSByZXF1aXJlcyBET00gbm9kZXMgYmV0d2VlbiAtc3RhcnQgYW5kIC1lbmQgbWFya2VycyB0byBiZSBncm91cGVkXG4gICAgICogdG9nZXRoZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBkaXJlY3RpdmUgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIGRpcmVjdGl2ZSB3YXMgcmVnaXN0ZXJlZCBhcyBtdWx0aS1lbGVtZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZUlzTXVsdGlFbGVtZW50KG5hbWUpIHtcbiAgICAgIGlmIChoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGZvciAodmFyIGRpcmVjdGl2ZSwgZGlyZWN0aXZlcyA9ICRpbmplY3Rvci5nZXQobmFtZSArIFN1ZmZpeCksXG4gICAgICAgICAgICBpID0gMCwgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICBkaXJlY3RpdmUgPSBkaXJlY3RpdmVzW2ldO1xuICAgICAgICAgIGlmIChkaXJlY3RpdmUubXVsdGlFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBlbGVtZW50IGlzIHJlcGxhY2VkIHdpdGggSFRNTCB0ZW1wbGF0ZSB0aGVuIHRoZSBuZXcgYXR0cmlidXRlc1xuICAgICAqIG9uIHRoZSB0ZW1wbGF0ZSBuZWVkIHRvIGJlIG1lcmdlZCB3aXRoIHRoZSBleGlzdGluZyBhdHRyaWJ1dGVzIGluIHRoZSBET00uXG4gICAgICogVGhlIGRlc2lyZWQgZWZmZWN0IGlzIHRvIGhhdmUgYm90aCBvZiB0aGUgYXR0cmlidXRlcyBwcmVzZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGRzdCBkZXN0aW5hdGlvbiBhdHRyaWJ1dGVzIChvcmlnaW5hbCBET00pXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHNyYyBzb3VyY2UgYXR0cmlidXRlcyAoZnJvbSB0aGUgZGlyZWN0aXZlIHRlbXBsYXRlKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKGRzdCwgc3JjKSB7XG4gICAgICB2YXIgc3JjQXR0ciA9IHNyYy4kYXR0cixcbiAgICAgICAgICBkc3RBdHRyID0gZHN0LiRhdHRyLFxuICAgICAgICAgICRlbGVtZW50ID0gZHN0LiQkZWxlbWVudDtcblxuICAgICAgLy8gcmVhcHBseSB0aGUgb2xkIGF0dHJpYnV0ZXMgdG8gdGhlIG5ldyBlbGVtZW50XG4gICAgICBmb3JFYWNoKGRzdCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoa2V5LmNoYXJBdCgwKSAhPSAnJCcpIHtcbiAgICAgICAgICBpZiAoc3JjW2tleV0gJiYgc3JjW2tleV0gIT09IHZhbHVlKSB7XG4gICAgICAgICAgICB2YWx1ZSArPSAoa2V5ID09PSAnc3R5bGUnID8gJzsnIDogJyAnKSArIHNyY1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkc3QuJHNldChrZXksIHZhbHVlLCB0cnVlLCBzcmNBdHRyW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gY29weSB0aGUgbmV3IGF0dHJpYnV0ZXMgb24gdGhlIG9sZCBhdHRycyBvYmplY3RcbiAgICAgIGZvckVhY2goc3JjLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT0gJ2NsYXNzJykge1xuICAgICAgICAgIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgdmFsdWUpO1xuICAgICAgICAgIGRzdFsnY2xhc3MnXSA9IChkc3RbJ2NsYXNzJ10gPyBkc3RbJ2NsYXNzJ10gKyAnICcgOiAnJykgKyB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT0gJ3N0eWxlJykge1xuICAgICAgICAgICRlbGVtZW50LmF0dHIoJ3N0eWxlJywgJGVsZW1lbnQuYXR0cignc3R5bGUnKSArICc7JyArIHZhbHVlKTtcbiAgICAgICAgICBkc3RbJ3N0eWxlJ10gPSAoZHN0WydzdHlsZSddID8gZHN0WydzdHlsZSddICsgJzsnIDogJycpICsgdmFsdWU7XG4gICAgICAgICAgLy8gYGRzdGAgd2lsbCBuZXZlciBjb250YWluIGhhc093blByb3BlcnR5IGFzIERPTSBwYXJzZXIgd29uJ3QgbGV0IGl0LlxuICAgICAgICAgIC8vIFlvdSB3aWxsIGdldCBhbiBcIkludmFsaWRDaGFyYWN0ZXJFcnJvcjogRE9NIEV4Y2VwdGlvbiA1XCIgZXJyb3IgaWYgeW91XG4gICAgICAgICAgLy8gaGF2ZSBhbiBhdHRyaWJ1dGUgbGlrZSBcImhhcy1vd24tcHJvcGVydHlcIiBvciBcImRhdGEtaGFzLW93bi1wcm9wZXJ0eVwiLCBldGMuXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5LmNoYXJBdCgwKSAhPSAnJCcgJiYgIWRzdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgZHN0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICBkc3RBdHRyW2tleV0gPSBzcmNBdHRyW2tleV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gY29tcGlsZVRlbXBsYXRlVXJsKGRpcmVjdGl2ZXMsICRjb21waWxlTm9kZSwgdEF0dHJzLFxuICAgICAgICAkcm9vdEVsZW1lbnQsIGNoaWxkVHJhbnNjbHVkZUZuLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucywgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xuICAgICAgdmFyIGxpbmtRdWV1ZSA9IFtdLFxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLFxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbixcbiAgICAgICAgICBiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlID0gJGNvbXBpbGVOb2RlWzBdLFxuICAgICAgICAgIG9yaWdBc3luY0RpcmVjdGl2ZSA9IGRpcmVjdGl2ZXMuc2hpZnQoKSxcbiAgICAgICAgICBkZXJpdmVkU3luY0RpcmVjdGl2ZSA9IGluaGVyaXQob3JpZ0FzeW5jRGlyZWN0aXZlLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogbnVsbCwgdHJhbnNjbHVkZTogbnVsbCwgcmVwbGFjZTogbnVsbCwgJCRvcmlnaW5hbERpcmVjdGl2ZTogb3JpZ0FzeW5jRGlyZWN0aXZlXG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGVtcGxhdGVVcmwgPSAoaXNGdW5jdGlvbihvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwpKVxuICAgICAgICAgICAgICA/IG9yaWdBc3luY0RpcmVjdGl2ZS50ZW1wbGF0ZVVybCgkY29tcGlsZU5vZGUsIHRBdHRycylcbiAgICAgICAgICAgICAgOiBvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwsXG4gICAgICAgICAgdGVtcGxhdGVOYW1lc3BhY2UgPSBvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2U7XG5cbiAgICAgICRjb21waWxlTm9kZS5lbXB0eSgpO1xuXG4gICAgICAkdGVtcGxhdGVSZXF1ZXN0KCRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKHRlbXBsYXRlVXJsKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIHZhciBjb21waWxlTm9kZSwgdGVtcFRlbXBsYXRlQXR0cnMsICR0ZW1wbGF0ZSwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbjtcblxuICAgICAgICAgIGNvbnRlbnQgPSBkZW5vcm1hbGl6ZVRlbXBsYXRlKGNvbnRlbnQpO1xuXG4gICAgICAgICAgaWYgKG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKSB7XG4gICAgICAgICAgICBpZiAoanFMaXRlSXNUZXh0Tm9kZShjb250ZW50KSkge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IHJlbW92ZUNvbW1lbnRzKHdyYXBUZW1wbGF0ZSh0ZW1wbGF0ZU5hbWVzcGFjZSwgdHJpbShjb250ZW50KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkdGVtcGxhdGVbMF07XG5cbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9IDEgfHwgY29tcGlsZU5vZGUubm9kZVR5cGUgIT09IE5PREVfVFlQRV9FTEVNRU5UKSB7XG4gICAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCd0cGxydCcsXG4gICAgICAgICAgICAgICAgICBcIlRlbXBsYXRlIGZvciBkaXJlY3RpdmUgJ3swfScgbXVzdCBoYXZlIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gezF9XCIsXG4gICAgICAgICAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUubmFtZSwgdGVtcGxhdGVVcmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZW1wVGVtcGxhdGVBdHRycyA9IHskYXR0cjoge319O1xuICAgICAgICAgICAgcmVwbGFjZVdpdGgoJHJvb3RFbGVtZW50LCAkY29tcGlsZU5vZGUsIGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhjb21waWxlTm9kZSwgW10sIHRlbXBUZW1wbGF0ZUF0dHJzKTtcblxuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KG9yaWdBc3luY0RpcmVjdGl2ZS5zY29wZSkpIHtcbiAgICAgICAgICAgICAgbWFya0RpcmVjdGl2ZXNBc0lzb2xhdGUodGVtcGxhdGVEaXJlY3RpdmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpcmVjdGl2ZXMgPSB0ZW1wbGF0ZURpcmVjdGl2ZXMuY29uY2F0KGRpcmVjdGl2ZXMpO1xuICAgICAgICAgICAgbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXModEF0dHJzLCB0ZW1wVGVtcGxhdGVBdHRycyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbXBpbGVOb2RlID0gYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZTtcbiAgICAgICAgICAgICRjb21waWxlTm9kZS5odG1sKGNvbnRlbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRpcmVjdGl2ZXMudW5zaGlmdChkZXJpdmVkU3luY0RpcmVjdGl2ZSk7XG5cbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbiA9IGFwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLCBjb21waWxlTm9kZSwgdEF0dHJzLFxuICAgICAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiwgJGNvbXBpbGVOb2RlLCBvcmlnQXN5bmNEaXJlY3RpdmUsIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLFxuICAgICAgICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtcbiAgICAgICAgICBmb3JFYWNoKCRyb290RWxlbWVudCwgZnVuY3Rpb24obm9kZSwgaSkge1xuICAgICAgICAgICAgaWYgKG5vZGUgPT0gY29tcGlsZU5vZGUpIHtcbiAgICAgICAgICAgICAgJHJvb3RFbGVtZW50W2ldID0gJGNvbXBpbGVOb2RlWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbiA9IGNvbXBpbGVOb2RlcygkY29tcGlsZU5vZGVbMF0uY2hpbGROb2RlcywgY2hpbGRUcmFuc2NsdWRlRm4pO1xuXG4gICAgICAgICAgd2hpbGUgKGxpbmtRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBzY29wZSA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGJlZm9yZVRlbXBsYXRlTGlua05vZGUgPSBsaW5rUXVldWUuc2hpZnQoKSxcbiAgICAgICAgICAgICAgICBsaW5rUm9vdEVsZW1lbnQgPSBsaW5rUXVldWUuc2hpZnQoKSxcbiAgICAgICAgICAgICAgICBib3VuZFRyYW5zY2x1ZGVGbiA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGxpbmtOb2RlID0gJGNvbXBpbGVOb2RlWzBdO1xuXG4gICAgICAgICAgICBpZiAoc2NvcGUuJCRkZXN0cm95ZWQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBpZiAoYmVmb3JlVGVtcGxhdGVMaW5rTm9kZSAhPT0gYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZSkge1xuICAgICAgICAgICAgICB2YXIgb2xkQ2xhc3NlcyA9IGJlZm9yZVRlbXBsYXRlTGlua05vZGUuY2xhc3NOYW1lO1xuXG4gICAgICAgICAgICAgIGlmICghKHByZXZpb3VzQ29tcGlsZUNvbnRleHQuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgJiZcbiAgICAgICAgICAgICAgICAgIG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKSkge1xuICAgICAgICAgICAgICAgIC8vIGl0IHdhcyBjbG9uZWQgdGhlcmVmb3JlIHdlIGhhdmUgdG8gY2xvbmUgYXMgd2VsbC5cbiAgICAgICAgICAgICAgICBsaW5rTm9kZSA9IGpxTGl0ZUNsb25lKGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXBsYWNlV2l0aChsaW5rUm9vdEVsZW1lbnQsIGpxTGl0ZShiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlKSwgbGlua05vZGUpO1xuXG4gICAgICAgICAgICAgIC8vIENvcHkgaW4gQ1NTIGNsYXNzZXMgZnJvbSBvcmlnaW5hbCBub2RlXG4gICAgICAgICAgICAgIHNhZmVBZGRDbGFzcyhqcUxpdGUobGlua05vZGUpLCBvbGRDbGFzc2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhZnRlclRlbXBsYXRlTm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCkge1xuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGUsIGJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBib3VuZFRyYW5zY2x1ZGVGbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuKGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbiwgc2NvcGUsIGxpbmtOb2RlLCAkcm9vdEVsZW1lbnQsXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5rUXVldWUgPSBudWxsO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlbGF5ZWROb2RlTGlua0ZuKGlnbm9yZUNoaWxkTGlua0ZuLCBzY29wZSwgbm9kZSwgcm9vdEVsZW1lbnQsIGJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgIHZhciBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gYm91bmRUcmFuc2NsdWRlRm47XG4gICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICBpZiAobGlua1F1ZXVlKSB7XG4gICAgICAgICAgbGlua1F1ZXVlLnB1c2goc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICByb290RWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sIHNjb3BlLCBub2RlLCByb290RWxlbWVudCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTb3J0aW5nIGZ1bmN0aW9uIGZvciBib3VuZCBkaXJlY3RpdmVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ5UHJpb3JpdHkoYSwgYikge1xuICAgICAgdmFyIGRpZmYgPSBiLnByaW9yaXR5IC0gYS5wcmlvcml0eTtcbiAgICAgIGlmIChkaWZmICE9PSAwKSByZXR1cm4gZGlmZjtcbiAgICAgIGlmIChhLm5hbWUgIT09IGIubmFtZSkgcmV0dXJuIChhLm5hbWUgPCBiLm5hbWUpID8gLTEgOiAxO1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYXNzZXJ0Tm9EdXBsaWNhdGUod2hhdCwgcHJldmlvdXNEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgZWxlbWVudCkge1xuICAgICAgaWYgKHByZXZpb3VzRGlyZWN0aXZlKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdtdWx0aWRpcicsICdNdWx0aXBsZSBkaXJlY3RpdmVzIFt7MH0sIHsxfV0gYXNraW5nIGZvciB7Mn0gb246IHszfScsXG4gICAgICAgICAgICBwcmV2aW91c0RpcmVjdGl2ZS5uYW1lLCBkaXJlY3RpdmUubmFtZSwgd2hhdCwgc3RhcnRpbmdUYWcoZWxlbWVudCkpO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIHRleHQpIHtcbiAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKHRleHQsIHRydWUpO1xuICAgICAgaWYgKGludGVycG9sYXRlRm4pIHtcbiAgICAgICAgZGlyZWN0aXZlcy5wdXNoKHtcbiAgICAgICAgICBwcmlvcml0eTogMCxcbiAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiB0ZXh0SW50ZXJwb2xhdGVDb21waWxlRm4odGVtcGxhdGVOb2RlKSB7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVOb2RlUGFyZW50ID0gdGVtcGxhdGVOb2RlLnBhcmVudCgpLFxuICAgICAgICAgICAgICAgIGhhc0NvbXBpbGVQYXJlbnQgPSAhIXRlbXBsYXRlTm9kZVBhcmVudC5sZW5ndGg7XG5cbiAgICAgICAgICAgIC8vIFdoZW4gdHJhbnNjbHVkaW5nIGEgdGVtcGxhdGUgdGhhdCBoYXMgYmluZGluZ3MgaW4gdGhlIHJvb3RcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGhhdmUgYSBwYXJlbnQgYW5kIHRodXMgbmVlZCB0byBhZGQgdGhlIGNsYXNzIGR1cmluZyBsaW5raW5nIGZuLlxuICAgICAgICAgICAgaWYgKGhhc0NvbXBpbGVQYXJlbnQpIGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModGVtcGxhdGVOb2RlUGFyZW50KTtcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRleHRJbnRlcnBvbGF0ZUxpbmtGbihzY29wZSwgbm9kZSkge1xuICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnQoKTtcbiAgICAgICAgICAgICAgaWYgKCFoYXNDb21waWxlUGFyZW50KSBjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHBhcmVudCk7XG4gICAgICAgICAgICAgIGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhwYXJlbnQsIGludGVycG9sYXRlRm4uZXhwcmVzc2lvbnMpO1xuICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goaW50ZXJwb2xhdGVGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVGbldhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbm9kZVswXS5ub2RlVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiB3cmFwVGVtcGxhdGUodHlwZSwgdGVtcGxhdGUpIHtcbiAgICAgIHR5cGUgPSBsb3dlcmNhc2UodHlwZSB8fCAnaHRtbCcpO1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdzdmcnOlxuICAgICAgY2FzZSAnbWF0aCc6XG4gICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gJzwnICsgdHlwZSArICc+JyArIHRlbXBsYXRlICsgJzwvJyArIHR5cGUgKyAnPic7XG4gICAgICAgIHJldHVybiB3cmFwcGVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2RlcztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGdldFRydXN0ZWRDb250ZXh0KG5vZGUsIGF0dHJOb3JtYWxpemVkTmFtZSkge1xuICAgICAgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PSBcInNyY2RvY1wiKSB7XG4gICAgICAgIHJldHVybiAkc2NlLkhUTUw7XG4gICAgICB9XG4gICAgICB2YXIgdGFnID0gbm9kZU5hbWVfKG5vZGUpO1xuICAgICAgLy8gbWFjdGlvblt4bGluazpocmVmXSBjYW4gc291cmNlIFNWRy4gIEl0J3Mgbm90IGxpbWl0ZWQgdG8gPG1hY3Rpb24+LlxuICAgICAgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PSBcInhsaW5rSHJlZlwiIHx8XG4gICAgICAgICAgKHRhZyA9PSBcImZvcm1cIiAmJiBhdHRyTm9ybWFsaXplZE5hbWUgPT0gXCJhY3Rpb25cIikgfHxcbiAgICAgICAgICAodGFnICE9IFwiaW1nXCIgJiYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PSBcInNyY1wiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ck5vcm1hbGl6ZWROYW1lID09IFwibmdTcmNcIikpKSB7XG4gICAgICAgIHJldHVybiAkc2NlLlJFU09VUkNFX1VSTDtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGFkZEF0dHJJbnRlcnBvbGF0ZURpcmVjdGl2ZShub2RlLCBkaXJlY3RpdmVzLCB2YWx1ZSwgbmFtZSwgYWxsT3JOb3RoaW5nKSB7XG4gICAgICB2YXIgdHJ1c3RlZENvbnRleHQgPSBnZXRUcnVzdGVkQ29udGV4dChub2RlLCBuYW1lKTtcbiAgICAgIGFsbE9yTm90aGluZyA9IEFMTF9PUl9OT1RISU5HX0FUVFJTW25hbWVdIHx8IGFsbE9yTm90aGluZztcblxuICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUodmFsdWUsIHRydWUsIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpO1xuXG4gICAgICAvLyBubyBpbnRlcnBvbGF0aW9uIGZvdW5kIC0+IGlnbm9yZVxuICAgICAgaWYgKCFpbnRlcnBvbGF0ZUZuKSByZXR1cm47XG5cblxuICAgICAgaWYgKG5hbWUgPT09IFwibXVsdGlwbGVcIiAmJiBub2RlTmFtZV8obm9kZSkgPT09IFwic2VsZWN0XCIpIHtcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoXCJzZWxtdWx0aVwiLFxuICAgICAgICAgICAgXCJCaW5kaW5nIHRvIHRoZSAnbXVsdGlwbGUnIGF0dHJpYnV0ZSBpcyBub3Qgc3VwcG9ydGVkLiBFbGVtZW50OiB7MH1cIixcbiAgICAgICAgICAgIHN0YXJ0aW5nVGFnKG5vZGUpKTtcbiAgICAgIH1cblxuICAgICAgZGlyZWN0aXZlcy5wdXNoKHtcbiAgICAgICAgcHJpb3JpdHk6IDEwMCxcbiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uIGF0dHJJbnRlcnBvbGF0ZVByZUxpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAgICAgICAgIHZhciAkJG9ic2VydmVycyA9IChhdHRyLiQkb2JzZXJ2ZXJzIHx8IChhdHRyLiQkb2JzZXJ2ZXJzID0ge30pKTtcblxuICAgICAgICAgICAgICAgIGlmIChFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdub2RvbWV2ZW50cycsXG4gICAgICAgICAgICAgICAgICAgICAgXCJJbnRlcnBvbGF0aW9ucyBmb3IgSFRNTCBET00gZXZlbnQgYXR0cmlidXRlcyBhcmUgZGlzYWxsb3dlZC4gIFBsZWFzZSB1c2UgdGhlIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuZy0gdmVyc2lvbnMgKHN1Y2ggYXMgbmctY2xpY2sgaW5zdGVhZCBvZiBvbmNsaWNrKSBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlIGhhcyBjaGFuZ2VkIHNpbmNlIGxhc3QgJGludGVycG9sYXRlKCllZFxuICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IGF0dHJbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBpbnRlcnBvbGF0ZSBhZ2FpbiBzaW5jZSB0aGUgYXR0cmlidXRlIHZhbHVlIGhhcyBiZWVuIHVwZGF0ZWRcbiAgICAgICAgICAgICAgICAgIC8vIChlLmcuIGJ5IGFub3RoZXIgZGlyZWN0aXZlJ3MgY29tcGlsZSBmdW5jdGlvbilcbiAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZSB1bnNldC9lbXB0eSB2YWx1ZXMgbWFrZSBpbnRlcnBvbGF0ZUZuIGZhbHN5XG4gICAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZUZuID0gbmV3VmFsdWUgJiYgJGludGVycG9sYXRlKG5ld1ZhbHVlLCB0cnVlLCB0cnVzdGVkQ29udGV4dCwgYWxsT3JOb3RoaW5nKTtcbiAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgYXR0cmlidXRlIHdhcyB1cGRhdGVkIHNvIHRoYXQgdGhlcmUgaXMgbm8gaW50ZXJwb2xhdGlvbiBnb2luZyBvbiB3ZSBkb24ndCB3YW50IHRvXG4gICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXIgYW55IG9ic2VydmVyc1xuICAgICAgICAgICAgICAgIGlmICghaW50ZXJwb2xhdGVGbikgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBhdHRyIG9iamVjdCBzbyB0aGF0IGl0J3MgcmVhZHkgaW4gY2FzZSB3ZSBuZWVkIHRoZSB2YWx1ZSBmb3IgaXNvbGF0ZVxuICAgICAgICAgICAgICAgIC8vIHNjb3BlIGluaXRpYWxpemF0aW9uLCBvdGhlcndpc2UgdGhlIHZhbHVlIHdvdWxkIG5vdCBiZSBhdmFpbGFibGUgZnJvbSBpc29sYXRlXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0aXZlJ3MgbGlua2luZyBmbiBkdXJpbmcgbGlua2luZyBwaGFzZVxuICAgICAgICAgICAgICAgIGF0dHJbbmFtZV0gPSBpbnRlcnBvbGF0ZUZuKHNjb3BlKTtcblxuICAgICAgICAgICAgICAgICgkJG9ic2VydmVyc1tuYW1lXSB8fCAoJCRvYnNlcnZlcnNbbmFtZV0gPSBbXSkpLiQkaW50ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIChhdHRyLiQkb2JzZXJ2ZXJzICYmIGF0dHIuJCRvYnNlcnZlcnNbbmFtZV0uJCRzY29wZSB8fCBzY29wZSkuXG4gICAgICAgICAgICAgICAgICAkd2F0Y2goaW50ZXJwb2xhdGVGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVGbldhdGNoQWN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvL3NwZWNpYWwgY2FzZSBmb3IgY2xhc3MgYXR0cmlidXRlIGFkZGl0aW9uICsgcmVtb3ZhbFxuICAgICAgICAgICAgICAgICAgICAvL3NvIHRoYXQgY2xhc3MgY2hhbmdlcyBjYW4gdGFwIGludG8gdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgICAgICAvL2hvb2tzIHByb3ZpZGVkIGJ5IHRoZSAkYW5pbWF0ZSBzZXJ2aWNlLiBCZSBzdXJlIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vc2tpcCBhbmltYXRpb25zIHdoZW4gdGhlIGZpcnN0IGRpZ2VzdCBvY2N1cnMgKHdoZW5cbiAgICAgICAgICAgICAgICAgICAgLy9ib3RoIHRoZSBuZXcgYW5kIHRoZSBvbGQgdmFsdWVzIGFyZSB0aGUgc2FtZSkgc2luY2VcbiAgICAgICAgICAgICAgICAgICAgLy90aGUgQ1NTIGNsYXNzZXMgYXJlIHRoZSBub24taW50ZXJwb2xhdGVkIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiBuZXdWYWx1ZSAhPSBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGF0dHIuJHVwZGF0ZUNsYXNzKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgYXR0ci4kc2V0KG5hbWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGEgc3BlY2lhbCBqcUxpdGUucmVwbGFjZVdpdGgsIHdoaWNoIGNhbiByZXBsYWNlIGl0ZW1zIHdoaWNoXG4gICAgICogaGF2ZSBubyBwYXJlbnRzLCBwcm92aWRlZCB0aGF0IHRoZSBjb250YWluaW5nIGpxTGl0ZSBjb2xsZWN0aW9uIGlzIHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtKcUxpdGU9fSAkcm9vdEVsZW1lbnQgVGhlIHJvb3Qgb2YgdGhlIGNvbXBpbGUgdHJlZS4gVXNlZCBzbyB0aGF0IHdlIGNhbiByZXBsYWNlIG5vZGVzXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdGhlIHJvb3Qgb2YgdGhlIHRyZWUuXG4gICAgICogQHBhcmFtIHtKcUxpdGV9IGVsZW1lbnRzVG9SZW1vdmUgVGhlIGpxTGl0ZSBlbGVtZW50IHdoaWNoIHdlIGFyZSBnb2luZyB0byByZXBsYWNlLiBXZSBrZWVwXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHNoZWxsLCBidXQgcmVwbGFjZSBpdHMgRE9NIG5vZGUgcmVmZXJlbmNlLlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbmV3Tm9kZSBUaGUgbmV3IERPTSBub2RlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlcGxhY2VXaXRoKCRyb290RWxlbWVudCwgZWxlbWVudHNUb1JlbW92ZSwgbmV3Tm9kZSkge1xuICAgICAgdmFyIGZpcnN0RWxlbWVudFRvUmVtb3ZlID0gZWxlbWVudHNUb1JlbW92ZVswXSxcbiAgICAgICAgICByZW1vdmVDb3VudCA9IGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoLFxuICAgICAgICAgIHBhcmVudCA9IGZpcnN0RWxlbWVudFRvUmVtb3ZlLnBhcmVudE5vZGUsXG4gICAgICAgICAgaSwgaWk7XG5cbiAgICAgIGlmICgkcm9vdEVsZW1lbnQpIHtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSAkcm9vdEVsZW1lbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGlmICgkcm9vdEVsZW1lbnRbaV0gPT0gZmlyc3RFbGVtZW50VG9SZW1vdmUpIHtcbiAgICAgICAgICAgICRyb290RWxlbWVudFtpKytdID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpLCBqMiA9IGogKyByZW1vdmVDb3VudCAtIDEsXG4gICAgICAgICAgICAgICAgICAgICBqaiA9ICRyb290RWxlbWVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgIGogPCBqajsgaisrLCBqMisrKSB7XG4gICAgICAgICAgICAgIGlmIChqMiA8IGpqKSB7XG4gICAgICAgICAgICAgICAgJHJvb3RFbGVtZW50W2pdID0gJHJvb3RFbGVtZW50W2oyXTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgJHJvb3RFbGVtZW50W2pdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkcm9vdEVsZW1lbnQubGVuZ3RoIC09IHJlbW92ZUNvdW50IC0gMTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcGxhY2VkIGVsZW1lbnQgaXMgYWxzbyB0aGUgalF1ZXJ5IC5jb250ZXh0IHRoZW4gcmVwbGFjZSBpdFxuICAgICAgICAgICAgLy8gLmNvbnRleHQgaXMgYSBkZXByZWNhdGVkIGpRdWVyeSBhcGksIHNvIHdlIHNob3VsZCBzZXQgaXQgb25seSB3aGVuIGpRdWVyeSBzZXQgaXRcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jb250ZXh0L1xuICAgICAgICAgICAgaWYgKCRyb290RWxlbWVudC5jb250ZXh0ID09PSBmaXJzdEVsZW1lbnRUb1JlbW92ZSkge1xuICAgICAgICAgICAgICAkcm9vdEVsZW1lbnQuY29udGV4dCA9IG5ld05vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsIGZpcnN0RWxlbWVudFRvUmVtb3ZlKTtcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETyhwZXJmKTogd2hhdCdzIHRoaXMgZG9jdW1lbnQgZnJhZ21lbnQgZm9yPyBpcyBpdCBuZWVkZWQ/IGNhbiB3ZSBhdCBsZWFzdCByZXVzZSBpdD9cbiAgICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGZpcnN0RWxlbWVudFRvUmVtb3ZlKTtcblxuICAgICAgLy8gQ29weSBvdmVyIHVzZXIgZGF0YSAodGhhdCBpbmNsdWRlcyBBbmd1bGFyJ3MgJHNjb3BlIGV0Yy4pLiBEb24ndCBjb3B5IHByaXZhdGVcbiAgICAgIC8vIGRhdGEgaGVyZSBiZWNhdXNlIHRoZXJlJ3Mgbm8gcHVibGljIGludGVyZmFjZSBpbiBqUXVlcnkgdG8gZG8gdGhhdCBhbmQgY29weWluZyBvdmVyXG4gICAgICAvLyBldmVudCBsaXN0ZW5lcnMgKHdoaWNoIGlzIHRoZSBtYWluIHVzZSBvZiBwcml2YXRlIGRhdGEpIHdvdWxkbid0IHdvcmsgYW55d2F5LlxuICAgICAganFMaXRlKG5ld05vZGUpLmRhdGEoanFMaXRlKGZpcnN0RWxlbWVudFRvUmVtb3ZlKS5kYXRhKCkpO1xuXG4gICAgICAvLyBSZW1vdmUgZGF0YSBvZiB0aGUgcmVwbGFjZWQgZWxlbWVudC4gV2UgY2Fubm90IGp1c3QgY2FsbCAucmVtb3ZlKClcbiAgICAgIC8vIG9uIHRoZSBlbGVtZW50IGl0IHNpbmNlIHRoYXQgd291bGQgZGVhbGxvY2F0ZSBzY29wZSB0aGF0IGlzIG5lZWRlZFxuICAgICAgLy8gZm9yIHRoZSBuZXcgbm9kZS4gSW5zdGVhZCwgcmVtb3ZlIHRoZSBkYXRhIFwibWFudWFsbHlcIi5cbiAgICAgIGlmICghalF1ZXJ5KSB7XG4gICAgICAgIGRlbGV0ZSBqcUxpdGUuY2FjaGVbZmlyc3RFbGVtZW50VG9SZW1vdmVbanFMaXRlLmV4cGFuZG9dXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGpRdWVyeSAyLnggZG9lc24ndCBleHBvc2UgdGhlIGRhdGEgc3RvcmFnZS4gVXNlIGpRdWVyeS5jbGVhbkRhdGEgdG8gY2xlYW4gdXAgYWZ0ZXJcbiAgICAgICAgLy8gdGhlIHJlcGxhY2VkIGVsZW1lbnQuIFRoZSBjbGVhbkRhdGEgdmVyc2lvbiBtb25rZXktcGF0Y2hlZCBieSBBbmd1bGFyIHdvdWxkIGNhdXNlXG4gICAgICAgIC8vIHRoZSBzY29wZSB0byBiZSB0cmFzaGVkIGFuZCB3ZSBkbyBuZWVkIHRoZSB2ZXJ5IHNhbWUgc2NvcGUgdG8gd29yayB3aXRoIHRoZSBuZXdcbiAgICAgICAgLy8gZWxlbWVudC4gSG93ZXZlciwgd2UgY2Fubm90IGp1c3QgY2FjaGUgdGhlIG5vbi1wYXRjaGVkIHZlcnNpb24gYW5kIHVzZSBpdCBoZXJlIGFzXG4gICAgICAgIC8vIHRoYXQgd291bGQgYnJlYWsgaWYgYW5vdGhlciBsaWJyYXJ5IHBhdGNoZXMgdGhlIG1ldGhvZCBhZnRlciBBbmd1bGFyIGRvZXMgKG9uZVxuICAgICAgICAvLyBleGFtcGxlIGlzIGpRdWVyeSBVSSkuIEluc3RlYWQsIHNldCBhIGZsYWcgaW5kaWNhdGluZyBzY29wZSBkZXN0cm95aW5nIHNob3VsZCBiZVxuICAgICAgICAvLyBza2lwcGVkIHRoaXMgb25lIHRpbWUuXG4gICAgICAgIHNraXBEZXN0cm95T25OZXh0SlF1ZXJ5Q2xlYW5EYXRhID0gdHJ1ZTtcbiAgICAgICAgalF1ZXJ5LmNsZWFuRGF0YShbZmlyc3RFbGVtZW50VG9SZW1vdmVdKTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgayA9IDEsIGtrID0gZWxlbWVudHNUb1JlbW92ZS5sZW5ndGg7IGsgPCBrazsgaysrKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNUb1JlbW92ZVtrXTtcbiAgICAgICAganFMaXRlKGVsZW1lbnQpLnJlbW92ZSgpOyAvLyBtdXN0IGRvIHRoaXMgd2F5IHRvIGNsZWFuIHVwIGV4cGFuZG9cbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIGRlbGV0ZSBlbGVtZW50c1RvUmVtb3ZlW2tdO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50c1RvUmVtb3ZlWzBdID0gbmV3Tm9kZTtcbiAgICAgIGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoID0gMTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNsb25lQW5kQW5ub3RhdGVGbihmbiwgYW5ub3RhdGlvbikge1xuICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbigpIHsgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IH0sIGZuLCBhbm5vdGF0aW9uKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGludm9rZUxpbmtGbihsaW5rRm4sIHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxpbmtGbihzY29wZSwgJGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycywgdHJhbnNjbHVkZUZuKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSwgc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1dO1xufVxuXG52YXIgUFJFRklYX1JFR0VYUCA9IC9eKCg/Onh8ZGF0YSlbXFw6XFwtX10pL2k7XG4vKipcbiAqIENvbnZlcnRzIGFsbCBhY2NlcHRlZCBkaXJlY3RpdmVzIGZvcm1hdCBpbnRvIHByb3BlciBkaXJlY3RpdmUgbmFtZS5cbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gKi9cbmZ1bmN0aW9uIGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lKSB7XG4gIHJldHVybiBjYW1lbENhc2UobmFtZS5yZXBsYWNlKFBSRUZJWF9SRUdFWFAsICcnKSk7XG59XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHNoYXJlZCBvYmplY3QgYmV0d2VlbiBkaXJlY3RpdmUgY29tcGlsZSAvIGxpbmtpbmcgZnVuY3Rpb25zIHdoaWNoIGNvbnRhaW5zIG5vcm1hbGl6ZWQgRE9NXG4gKiBlbGVtZW50IGF0dHJpYnV0ZXMuIFRoZSB2YWx1ZXMgcmVmbGVjdCBjdXJyZW50IGJpbmRpbmcgc3RhdGUgYHt7IH19YC4gVGhlIG5vcm1hbGl6YXRpb24gaXNcbiAqIG5lZWRlZCBzaW5jZSBhbGwgb2YgdGhlc2UgYXJlIHRyZWF0ZWQgYXMgZXF1aXZhbGVudCBpbiBBbmd1bGFyOlxuICpcbiAqIGBgYFxuICogICAgPHNwYW4gbmc6YmluZD1cImFcIiBuZy1iaW5kPVwiYVwiIGRhdGEtbmctYmluZD1cImFcIiB4LW5nLWJpbmQ9XCJhXCI+XG4gKiBgYGBcbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm9wZXJ0eVxuICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJGF0dHJcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEgbWFwIG9mIERPTSBlbGVtZW50IGF0dHJpYnV0ZSBuYW1lcyB0byB0aGUgbm9ybWFsaXplZCBuYW1lLiBUaGlzIGlzXG4gKiBuZWVkZWQgdG8gZG8gcmV2ZXJzZSBsb29rdXAgZnJvbSBub3JtYWxpemVkIG5hbWUgYmFjayB0byBhY3R1YWwgbmFtZS5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHNldFxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNldCBET00gZWxlbWVudCBhdHRyaWJ1dGUgdmFsdWUuXG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5vcm1hbGl6ZWQgZWxlbWVudCBhdHRyaWJ1dGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gbW9kaWZ5LiBUaGUgbmFtZSBpc1xuICogICAgICAgICAgcmV2ZXJzZS10cmFuc2xhdGVkIHVzaW5nIHRoZSB7QGxpbmsgbmcuJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJGF0dHIgJGF0dHJ9XG4gKiAgICAgICAgICBwcm9wZXJ0eSB0byB0aGUgb3JpZ2luYWwgbmFtZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byBzZXQgdGhlIGF0dHJpYnV0ZSB0by4gVGhlIHZhbHVlIGNhbiBiZSBhbiBpbnRlcnBvbGF0ZWQgc3RyaW5nLlxuICovXG5cblxuXG4vKipcbiAqIENsb3N1cmUgY29tcGlsZXIgdHlwZSBpbmZvcm1hdGlvblxuICovXG5cbmZ1bmN0aW9uIG5vZGVzZXRMaW5raW5nRm4oXG4gIC8qIGFuZ3VsYXIuU2NvcGUgKi8gc2NvcGUsXG4gIC8qIE5vZGVMaXN0ICovIG5vZGVMaXN0LFxuICAvKiBFbGVtZW50ICovIHJvb3RFbGVtZW50LFxuICAvKiBmdW5jdGlvbihGdW5jdGlvbikgKi8gYm91bmRUcmFuc2NsdWRlRm5cbikge31cblxuZnVuY3Rpb24gZGlyZWN0aXZlTGlua2luZ0ZuKFxuICAvKiBub2Rlc2V0TGlua2luZ0ZuICovIG5vZGVzZXRMaW5raW5nRm4sXG4gIC8qIGFuZ3VsYXIuU2NvcGUgKi8gc2NvcGUsXG4gIC8qIE5vZGUgKi8gbm9kZSxcbiAgLyogRWxlbWVudCAqLyByb290RWxlbWVudCxcbiAgLyogZnVuY3Rpb24oRnVuY3Rpb24pICovIGJvdW5kVHJhbnNjbHVkZUZuXG4pIHt9XG5cbmZ1bmN0aW9uIHRva2VuRGlmZmVyZW5jZShzdHIxLCBzdHIyKSB7XG4gIHZhciB2YWx1ZXMgPSAnJyxcbiAgICAgIHRva2VuczEgPSBzdHIxLnNwbGl0KC9cXHMrLyksXG4gICAgICB0b2tlbnMyID0gc3RyMi5zcGxpdCgvXFxzKy8pO1xuXG4gIG91dGVyOlxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2VuczEubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdG9rZW4gPSB0b2tlbnMxW2ldO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdG9rZW5zMi5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKHRva2VuID09IHRva2VuczJbal0pIGNvbnRpbnVlIG91dGVyO1xuICAgIH1cbiAgICB2YWx1ZXMgKz0gKHZhbHVlcy5sZW5ndGggPiAwID8gJyAnIDogJycpICsgdG9rZW47XG4gIH1cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbWVudHMoanFOb2Rlcykge1xuICBqcU5vZGVzID0ganFMaXRlKGpxTm9kZXMpO1xuICB2YXIgaSA9IGpxTm9kZXMubGVuZ3RoO1xuXG4gIGlmIChpIDw9IDEpIHtcbiAgICByZXR1cm4ganFOb2RlcztcbiAgfVxuXG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgbm9kZSA9IGpxTm9kZXNbaV07XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5PREVfVFlQRV9DT01NRU5UKSB7XG4gICAgICBzcGxpY2UuY2FsbChqcU5vZGVzLCBpLCAxKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGpxTm9kZXM7XG59XG5cbnZhciAkY29udHJvbGxlck1pbkVyciA9IG1pbkVycignJGNvbnRyb2xsZXInKTtcblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXJcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIHtAbGluayBuZy4kY29udHJvbGxlciAkY29udHJvbGxlciBzZXJ2aWNlfSBpcyB1c2VkIGJ5IEFuZ3VsYXIgdG8gY3JlYXRlIG5ld1xuICogY29udHJvbGxlcnMuXG4gKlxuICogVGhpcyBwcm92aWRlciBhbGxvd3MgY29udHJvbGxlciByZWdpc3RyYXRpb24gdmlhIHRoZVxuICoge0BsaW5rIG5nLiRjb250cm9sbGVyUHJvdmlkZXIjcmVnaXN0ZXIgcmVnaXN0ZXJ9IG1ldGhvZC5cbiAqL1xuZnVuY3Rpb24gJENvbnRyb2xsZXJQcm92aWRlcigpIHtcbiAgdmFyIGNvbnRyb2xsZXJzID0ge30sXG4gICAgICBnbG9iYWxzID0gZmFsc2UsXG4gICAgICBDTlRSTF9SRUcgPSAvXihcXFMrKShcXHMrYXNcXHMrKFxcdyspKT8kLztcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXIjcmVnaXN0ZXJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIENvbnRyb2xsZXIgbmFtZSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBjb250cm9sbGVycyB3aGVyZSB0aGUga2V5cyBhcmVcbiAgICogICAgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgY29uc3RydWN0b3JzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5fSBjb25zdHJ1Y3RvciBDb250cm9sbGVyIGNvbnN0cnVjdG9yIGZuIChvcHRpb25hbGx5IGRlY29yYXRlZCB3aXRoIERJXG4gICAqICAgIGFubm90YXRpb25zIGluIHRoZSBhcnJheSBub3RhdGlvbikuXG4gICAqL1xuICB0aGlzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSwgY29uc3RydWN0b3IpIHtcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnY29udHJvbGxlcicpO1xuICAgIGlmIChpc09iamVjdChuYW1lKSkge1xuICAgICAgZXh0ZW5kKGNvbnRyb2xsZXJzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udHJvbGxlcnNbbmFtZV0gPSBjb25zdHJ1Y3RvcjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbnRyb2xsZXJQcm92aWRlciNhbGxvd0dsb2JhbHNcbiAgICogQGRlc2NyaXB0aW9uIElmIGNhbGxlZCwgYWxsb3dzIGAkY29udHJvbGxlcmAgdG8gZmluZCBjb250cm9sbGVyIGNvbnN0cnVjdG9ycyBvbiBgd2luZG93YFxuICAgKi9cbiAgdGhpcy5hbGxvd0dsb2JhbHMgPSBmdW5jdGlvbigpIHtcbiAgICBnbG9iYWxzID0gdHJ1ZTtcbiAgfTtcblxuXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgJyR3aW5kb3cnLCBmdW5jdGlvbigkaW5qZWN0b3IsICR3aW5kb3cpIHtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJGNvbnRyb2xsZXJcbiAgICAgKiBAcmVxdWlyZXMgJGluamVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gY29uc3RydWN0b3IgSWYgY2FsbGVkIHdpdGggYSBmdW5jdGlvbiB0aGVuIGl0J3MgY29uc2lkZXJlZCB0byBiZSB0aGVcbiAgICAgKiAgICBjb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLiBPdGhlcndpc2UgaXQncyBjb25zaWRlcmVkIHRvIGJlIGEgc3RyaW5nIHdoaWNoIGlzIHVzZWRcbiAgICAgKiAgICB0byByZXRyaWV2ZSB0aGUgY29udHJvbGxlciBjb25zdHJ1Y3RvciB1c2luZyB0aGUgZm9sbG93aW5nIHN0ZXBzOlxuICAgICAqXG4gICAgICogICAgKiBjaGVjayBpZiBhIGNvbnRyb2xsZXIgd2l0aCBnaXZlbiBuYW1lIGlzIHJlZ2lzdGVyZWQgdmlhIGAkY29udHJvbGxlclByb3ZpZGVyYFxuICAgICAqICAgICogY2hlY2sgaWYgZXZhbHVhdGluZyB0aGUgc3RyaW5nIG9uIHRoZSBjdXJyZW50IHNjb3BlIHJldHVybnMgYSBjb25zdHJ1Y3RvclxuICAgICAqICAgICogaWYgJGNvbnRyb2xsZXJQcm92aWRlciNhbGxvd0dsb2JhbHMsIGNoZWNrIGB3aW5kb3dbY29uc3RydWN0b3JdYCBvbiB0aGUgZ2xvYmFsXG4gICAgICogICAgICBgd2luZG93YCBvYmplY3QgKG5vdCByZWNvbW1lbmRlZClcbiAgICAgKlxuICAgICAqICAgIFRoZSBzdHJpbmcgY2FuIHVzZSB0aGUgYGNvbnRyb2xsZXIgYXMgcHJvcGVydHlgIHN5bnRheCwgd2hlcmUgdGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgaXMgcHVibGlzaGVkXG4gICAgICogICAgYXMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBvbiB0aGUgYHNjb3BlYDsgdGhlIGBzY29wZWAgbXVzdCBiZSBpbmplY3RlZCBpbnRvIGBsb2NhbHNgIHBhcmFtIGZvciB0aGlzXG4gICAgICogICAgdG8gd29yayBjb3JyZWN0bHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzIEluamVjdGlvbiBsb2NhbHMgZm9yIENvbnRyb2xsZXIuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiBnaXZlbiBjb250cm9sbGVyLlxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogYCRjb250cm9sbGVyYCBzZXJ2aWNlIGlzIHJlc3BvbnNpYmxlIGZvciBpbnN0YW50aWF0aW5nIGNvbnRyb2xsZXJzLlxuICAgICAqXG4gICAgICogSXQncyBqdXN0IGEgc2ltcGxlIGNhbGwgdG8ge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0sIGJ1dCBleHRyYWN0ZWQgaW50b1xuICAgICAqIGEgc2VydmljZSwgc28gdGhhdCBvbmUgY2FuIG92ZXJyaWRlIHRoaXMgc2VydmljZSB3aXRoIFtCQyB2ZXJzaW9uXShodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xNjQ5Nzg4KS5cbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24oZXhwcmVzc2lvbiwgbG9jYWxzLCBsYXRlciwgaWRlbnQpIHtcbiAgICAgIC8vIFBSSVZBVEUgQVBJOlxuICAgICAgLy8gICBwYXJhbSBgbGF0ZXJgIC0tLSBpbmRpY2F0ZXMgdGhhdCB0aGUgY29udHJvbGxlcidzIGNvbnN0cnVjdG9yIGlzIGludm9rZWQgYXQgYSBsYXRlciB0aW1lLlxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBJZiB0cnVlLCAkY29udHJvbGxlciB3aWxsIGFsbG9jYXRlIHRoZSBvYmplY3Qgd2l0aCB0aGUgY29ycmVjdFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwcm90b3R5cGUgY2hhaW4sIGJ1dCB3aWxsIG5vdCBpbnZva2UgdGhlIGNvbnRyb2xsZXIgdW50aWwgYSByZXR1cm5lZFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayBpcyBpbnZva2VkLlxuICAgICAgLy8gICBwYXJhbSBgaWRlbnRgIC0tLSBBbiBvcHRpb25hbCBsYWJlbCB3aGljaCBvdmVycmlkZXMgdGhlIGxhYmVsIHBhcnNlZCBmcm9tIHRoZSBjb250cm9sbGVyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24sIGlmIGFueS5cbiAgICAgIHZhciBpbnN0YW5jZSwgbWF0Y2gsIGNvbnN0cnVjdG9yLCBpZGVudGlmaWVyO1xuICAgICAgbGF0ZXIgPSBsYXRlciA9PT0gdHJ1ZTtcbiAgICAgIGlmIChpZGVudCAmJiBpc1N0cmluZyhpZGVudCkpIHtcbiAgICAgICAgaWRlbnRpZmllciA9IGlkZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdHJpbmcoZXhwcmVzc2lvbikpIHtcbiAgICAgICAgbWF0Y2ggPSBleHByZXNzaW9uLm1hdGNoKENOVFJMX1JFRyk7XG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICB0aHJvdyAkY29udHJvbGxlck1pbkVycignY3RybGZtdCcsXG4gICAgICAgICAgICBcIkJhZGx5IGZvcm1lZCBjb250cm9sbGVyIHN0cmluZyAnezB9Jy4gXCIgK1xuICAgICAgICAgICAgXCJNdXN0IG1hdGNoIGBfX25hbWVfXyBhcyBfX2lkX19gIG9yIGBfX25hbWVfX2AuXCIsIGV4cHJlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0cnVjdG9yID0gbWF0Y2hbMV0sXG4gICAgICAgIGlkZW50aWZpZXIgPSBpZGVudGlmaWVyIHx8IG1hdGNoWzNdO1xuICAgICAgICBleHByZXNzaW9uID0gY29udHJvbGxlcnMuaGFzT3duUHJvcGVydHkoY29uc3RydWN0b3IpXG4gICAgICAgICAgICA/IGNvbnRyb2xsZXJzW2NvbnN0cnVjdG9yXVxuICAgICAgICAgICAgOiBnZXR0ZXIobG9jYWxzLiRzY29wZSwgY29uc3RydWN0b3IsIHRydWUpIHx8XG4gICAgICAgICAgICAgICAgKGdsb2JhbHMgPyBnZXR0ZXIoJHdpbmRvdywgY29uc3RydWN0b3IsIHRydWUpIDogdW5kZWZpbmVkKTtcblxuICAgICAgICBhc3NlcnRBcmdGbihleHByZXNzaW9uLCBjb25zdHJ1Y3RvciwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsYXRlcikge1xuICAgICAgICAvLyBJbnN0YW50aWF0ZSBjb250cm9sbGVyIGxhdGVyOlxuICAgICAgICAvLyBUaGlzIG1hY2hpbmVyeSBpcyB1c2VkIHRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgb2JqZWN0IGJlZm9yZSBjYWxsaW5nIHRoZVxuICAgICAgICAvLyBjb250cm9sbGVyJ3MgY29uc3RydWN0b3IgaXRzZWxmLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGFsbG93cyBwcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBjb250cm9sbGVyIGJlZm9yZSB0aGUgY29uc3RydWN0b3IgaXNcbiAgICAgICAgLy8gaW52b2tlZC4gUHJpbWFyaWx5LCB0aGlzIGlzIHVzZWQgZm9yIGlzb2xhdGUgc2NvcGUgYmluZGluZ3MgaW4gJGNvbXBpbGUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoaXMgZmVhdHVyZSBpcyBub3QgaW50ZW5kZWQgZm9yIHVzZSBieSBhcHBsaWNhdGlvbnMsIGFuZCBpcyB0aHVzIG5vdCBkb2N1bWVudGVkXG4gICAgICAgIC8vIHB1YmxpY2x5LlxuICAgICAgICAvLyBPYmplY3QgY3JlYXRpb246IGh0dHA6Ly9qc3BlcmYuY29tL2NyZWF0ZS1jb25zdHJ1Y3Rvci8yXG4gICAgICAgIHZhciBjb250cm9sbGVyUHJvdG90eXBlID0gKGlzQXJyYXkoZXhwcmVzc2lvbikgP1xuICAgICAgICAgIGV4cHJlc3Npb25bZXhwcmVzc2lvbi5sZW5ndGggLSAxXSA6IGV4cHJlc3Npb24pLnByb3RvdHlwZTtcbiAgICAgICAgaW5zdGFuY2UgPSBPYmplY3QuY3JlYXRlKGNvbnRyb2xsZXJQcm90b3R5cGUgfHwgbnVsbCk7XG5cbiAgICAgICAgaWYgKGlkZW50aWZpZXIpIHtcbiAgICAgICAgICBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIGNvbnN0cnVjdG9yIHx8IGV4cHJlc3Npb24ubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRpbmplY3Rvci5pbnZva2UoZXhwcmVzc2lvbiwgaW5zdGFuY2UsIGxvY2FscywgY29uc3RydWN0b3IpO1xuICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgfSwge1xuICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZSxcbiAgICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpbnN0YW5jZSA9ICRpbmplY3Rvci5pbnN0YW50aWF0ZShleHByZXNzaW9uLCBsb2NhbHMsIGNvbnN0cnVjdG9yKTtcblxuICAgICAgaWYgKGlkZW50aWZpZXIpIHtcbiAgICAgICAgYWRkSWRlbnRpZmllcihsb2NhbHMsIGlkZW50aWZpZXIsIGluc3RhbmNlLCBjb25zdHJ1Y3RvciB8fCBleHByZXNzaW9uLm5hbWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFkZElkZW50aWZpZXIobG9jYWxzLCBpZGVudGlmaWVyLCBpbnN0YW5jZSwgbmFtZSkge1xuICAgICAgaWYgKCEobG9jYWxzICYmIGlzT2JqZWN0KGxvY2Fscy4kc2NvcGUpKSkge1xuICAgICAgICB0aHJvdyBtaW5FcnIoJyRjb250cm9sbGVyJykoJ25vc2NwJyxcbiAgICAgICAgICBcIkNhbm5vdCBleHBvcnQgY29udHJvbGxlciAnezB9JyBhcyAnezF9JyEgTm8gJHNjb3BlIG9iamVjdCBwcm92aWRlZCB2aWEgYGxvY2Fsc2AuXCIsXG4gICAgICAgICAgbmFtZSwgaWRlbnRpZmllcik7XG4gICAgICB9XG5cbiAgICAgIGxvY2Fscy4kc2NvcGVbaWRlbnRpZmllcl0gPSBpbnN0YW5jZTtcbiAgICB9XG4gIH1dO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkZG9jdW1lbnRcbiAqIEByZXF1aXJlcyAkd2luZG93XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHtAbGluayBhbmd1bGFyLmVsZW1lbnQgalF1ZXJ5IG9yIGpxTGl0ZX0gd3JhcHBlciBmb3IgdGhlIGJyb3dzZXIncyBgd2luZG93LmRvY3VtZW50YCBvYmplY3QuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImRvY3VtZW50RXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8cD4kZG9jdW1lbnQgdGl0bGU6IDxiIG5nLWJpbmQ9XCJ0aXRsZVwiPjwvYj48L3A+XG4gICAgICAgICA8cD53aW5kb3cuZG9jdW1lbnQgdGl0bGU6IDxiIG5nLWJpbmQ9XCJ3aW5kb3dUaXRsZVwiPjwvYj48L3A+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkb2N1bWVudEV4YW1wbGUnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRkb2N1bWVudCcsIGZ1bmN0aW9uKCRzY29wZSwgJGRvY3VtZW50KSB7XG4gICAgICAgICAgICRzY29wZS50aXRsZSA9ICRkb2N1bWVudFswXS50aXRsZTtcbiAgICAgICAgICAgJHNjb3BlLndpbmRvd1RpdGxlID0gYW5ndWxhci5lbGVtZW50KHdpbmRvdy5kb2N1bWVudClbMF0udGl0bGU7XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gJERvY3VtZW50UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsIGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIHJldHVybiBqcUxpdGUod2luZG93LmRvY3VtZW50KTtcbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRleGNlcHRpb25IYW5kbGVyXG4gKiBAcmVxdWlyZXMgbmcuJGxvZ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQW55IHVuY2F1Z2h0IGV4Y2VwdGlvbiBpbiBhbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRlbGVnYXRlZCB0byB0aGlzIHNlcnZpY2UuXG4gKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBzaW1wbHkgZGVsZWdhdGVzIHRvIGAkbG9nLmVycm9yYCB3aGljaCBsb2dzIGl0IGludG9cbiAqIHRoZSBicm93c2VyIGNvbnNvbGUuXG4gKlxuICogSW4gdW5pdCB0ZXN0cywgaWYgYGFuZ3VsYXItbW9ja3MuanNgIGlzIGxvYWRlZCwgdGhpcyBzZXJ2aWNlIGlzIG92ZXJyaWRkZW4gYnlcbiAqIHtAbGluayBuZ01vY2suJGV4Y2VwdGlvbkhhbmRsZXIgbW9jayAkZXhjZXB0aW9uSGFuZGxlcn0gd2hpY2ggYWlkcyBpbiB0ZXN0aW5nLlxuICpcbiAqICMjIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqICAgYW5ndWxhci5tb2R1bGUoJ2V4Y2VwdGlvbk92ZXJyaWRlJywgW10pLmZhY3RvcnkoJyRleGNlcHRpb25IYW5kbGVyJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIGZ1bmN0aW9uKGV4Y2VwdGlvbiwgY2F1c2UpIHtcbiAqICAgICAgIGV4Y2VwdGlvbi5tZXNzYWdlICs9ICcgKGNhdXNlZCBieSBcIicgKyBjYXVzZSArICdcIiknO1xuICogICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICogICAgIH07XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogVGhpcyBleGFtcGxlIHdpbGwgb3ZlcnJpZGUgdGhlIG5vcm1hbCBhY3Rpb24gb2YgYCRleGNlcHRpb25IYW5kbGVyYCwgdG8gbWFrZSBhbmd1bGFyXG4gKiBleGNlcHRpb25zIGZhaWwgaGFyZCB3aGVuIHRoZXkgaGFwcGVuLCBpbnN0ZWFkIG9mIGp1c3QgbG9nZ2luZyB0byB0aGUgY29uc29sZS5cbiAqXG4gKiA8aHIgLz5cbiAqIE5vdGUsIHRoYXQgY29kZSBleGVjdXRlZCBpbiBldmVudC1saXN0ZW5lcnMgKGV2ZW4gdGhvc2UgcmVnaXN0ZXJlZCB1c2luZyBqcUxpdGUncyBgb25gL2BiaW5kYFxuICogbWV0aG9kcykgZG9lcyBub3QgZGVsZWdhdGUgZXhjZXB0aW9ucyB0byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfVxuICogKHVubGVzcyBleGVjdXRlZCBkdXJpbmcgYSBkaWdlc3QpLlxuICpcbiAqIElmIHlvdSB3aXNoLCB5b3UgY2FuIG1hbnVhbGx5IGRlbGVnYXRlIGV4Y2VwdGlvbnMsIGUuZy5cbiAqIGB0cnkgeyAuLi4gfSBjYXRjaChlKSB7ICRleGNlcHRpb25IYW5kbGVyKGUpOyB9YFxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGV4Y2VwdGlvbiBFeGNlcHRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBlcnJvci5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gY2F1c2Ugb3B0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbnRleHQgaW4gd2hpY2hcbiAqICAgICAgIHRoZSBlcnJvciB3YXMgdGhyb3duLlxuICpcbiAqL1xuZnVuY3Rpb24gJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckbG9nJywgZnVuY3Rpb24oJGxvZykge1xuICAgIHJldHVybiBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XG4gICAgICAkbG9nLmVycm9yLmFwcGx5KCRsb2csIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfV07XG59XG5cbnZhciBBUFBMSUNBVElPTl9KU09OID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xudmFyIENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OID0geydDb250ZW50LVR5cGUnOiBBUFBMSUNBVElPTl9KU09OICsgJztjaGFyc2V0PXV0Zi04J307XG52YXIgSlNPTl9TVEFSVCA9IC9eXFxbfF5cXHsoPyFcXHspLztcbnZhciBKU09OX0VORFMgPSB7XG4gICdbJzogL10kLyxcbiAgJ3snOiAvfSQvXG59O1xudmFyIEpTT05fUFJPVEVDVElPTl9QUkVGSVggPSAvXlxcKVxcXVxcfScsP1xcbi87XG5cbmZ1bmN0aW9uIGRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm0oZGF0YSwgaGVhZGVycykge1xuICBpZiAoaXNTdHJpbmcoZGF0YSkpIHtcbiAgICAvLyBTdHJpcCBqc29uIHZ1bG5lcmFiaWxpdHkgcHJvdGVjdGlvbiBwcmVmaXggYW5kIHRyaW0gd2hpdGVzcGFjZVxuICAgIHZhciB0ZW1wRGF0YSA9IGRhdGEucmVwbGFjZShKU09OX1BST1RFQ1RJT05fUFJFRklYLCAnJykudHJpbSgpO1xuXG4gICAgaWYgKHRlbXBEYXRhKSB7XG4gICAgICB2YXIgY29udGVudFR5cGUgPSBoZWFkZXJzKCdDb250ZW50LVR5cGUnKTtcbiAgICAgIGlmICgoY29udGVudFR5cGUgJiYgKGNvbnRlbnRUeXBlLmluZGV4T2YoQVBQTElDQVRJT05fSlNPTikgPT09IDApKSB8fCBpc0pzb25MaWtlKHRlbXBEYXRhKSkge1xuICAgICAgICBkYXRhID0gZnJvbUpzb24odGVtcERhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBpc0pzb25MaWtlKHN0cikge1xuICAgIHZhciBqc29uU3RhcnQgPSBzdHIubWF0Y2goSlNPTl9TVEFSVCk7XG4gICAgcmV0dXJuIGpzb25TdGFydCAmJiBKU09OX0VORFNbanNvblN0YXJ0WzBdXS50ZXN0KHN0cik7XG59XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGtleSB2YWx1ZSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaGVhZGVycyBSYXcgaGVhZGVycyBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge09iamVjdH0gUGFyc2VkIGhlYWRlcnMgYXMga2V5IHZhbHVlIG9iamVjdFxuICovXG5mdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuICB2YXIgcGFyc2VkID0gY3JlYXRlTWFwKCksIGtleSwgdmFsLCBpO1xuXG4gIGlmICghaGVhZGVycykgcmV0dXJuIHBhcnNlZDtcblxuICBmb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IGxvd2VyY2FzZSh0cmltKGxpbmUuc3Vic3RyKDAsIGkpKSk7XG4gICAgdmFsID0gdHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWQ7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gcGFyc2VkIGhlYWRlcnMuXG4gKlxuICogSGVhZGVycyBhcmUgbGF6eSBwYXJzZWQgd2hlbiBmaXJzdCByZXF1ZXN0ZWQuXG4gKiBAc2VlIHBhcnNlSGVhZGVyc1xuICpcbiAqIEBwYXJhbSB7KHN0cmluZ3xPYmplY3QpfSBoZWFkZXJzIEhlYWRlcnMgdG8gcHJvdmlkZSBhY2Nlc3MgdG8uXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oc3RyaW5nPSl9IFJldHVybnMgYSBnZXR0ZXIgZnVuY3Rpb24gd2hpY2ggaWYgY2FsbGVkIHdpdGg6XG4gKlxuICogICAtIGlmIGNhbGxlZCB3aXRoIHNpbmdsZSBhbiBhcmd1bWVudCByZXR1cm5zIGEgc2luZ2xlIGhlYWRlciB2YWx1ZSBvciBudWxsXG4gKiAgIC0gaWYgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIGhlYWRlcnMuXG4gKi9cbmZ1bmN0aW9uIGhlYWRlcnNHZXR0ZXIoaGVhZGVycykge1xuICB2YXIgaGVhZGVyc09iaiA9IGlzT2JqZWN0KGhlYWRlcnMpID8gaGVhZGVycyA6IHVuZGVmaW5lZDtcblxuICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICghaGVhZGVyc09iaikgaGVhZGVyc09iaiA9ICBwYXJzZUhlYWRlcnMoaGVhZGVycyk7XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgdmFyIHZhbHVlID0gaGVhZGVyc09ialtsb3dlcmNhc2UobmFtZSldO1xuICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBoZWFkZXJzT2JqO1xuICB9O1xufVxuXG5cbi8qKlxuICogQ2hhaW4gYWxsIGdpdmVuIGZ1bmN0aW9uc1xuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBmb3IgYm90aCByZXF1ZXN0IGFuZCByZXNwb25zZSB0cmFuc2Zvcm1pbmdcbiAqXG4gKiBAcGFyYW0geyp9IGRhdGEgRGF0YSB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZz0pfSBoZWFkZXJzIEhUVFAgaGVhZGVycyBnZXR0ZXIgZm4uXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhdHVzIEhUVFAgc3RhdHVzIGNvZGUgb2YgdGhlIHJlc3BvbnNlLlxuICogQHBhcmFtIHsoRnVuY3Rpb258QXJyYXkuPEZ1bmN0aW9uPil9IGZucyBGdW5jdGlvbiBvciBhbiBhcnJheSBvZiBmdW5jdGlvbnMuXG4gKiBAcmV0dXJucyB7Kn0gVHJhbnNmb3JtZWQgZGF0YS5cbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBzdGF0dXMsIGZucykge1xuICBpZiAoaXNGdW5jdGlvbihmbnMpKVxuICAgIHJldHVybiBmbnMoZGF0YSwgaGVhZGVycywgc3RhdHVzKTtcblxuICBmb3JFYWNoKGZucywgZnVuY3Rpb24oZm4pIHtcbiAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycywgc3RhdHVzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cblxuZnVuY3Rpb24gaXNTdWNjZXNzKHN0YXR1cykge1xuICByZXR1cm4gMjAwIDw9IHN0YXR1cyAmJiBzdGF0dXMgPCAzMDA7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRodHRwUHJvdmlkZXJcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIGAkaHR0cFByb3ZpZGVyYCB0byBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gc2VydmljZS5cbiAqICovXG5mdW5jdGlvbiAkSHR0cFByb3ZpZGVyKCkge1xuICAvKipcbiAgICogQG5nZG9jIHByb3BlcnR5XG4gICAqIEBuYW1lICRodHRwUHJvdmlkZXIjZGVmYXVsdHNcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIE9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzIGZvciBhbGwge0BsaW5rIG5nLiRodHRwICRodHRwfSByZXF1ZXN0cy5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy5jYWNoZWAqKiAtIHtPYmplY3R9IC0gYW4gb2JqZWN0IGJ1aWx0IHdpdGgge0BsaW5rIG5nLiRjYWNoZUZhY3RvcnkgYCRjYWNoZUZhY3RvcnlgfVxuICAgKiB0aGF0IHdpbGwgcHJvdmlkZSB0aGUgY2FjaGUgZm9yIGFsbCByZXF1ZXN0cyB3aG8gc2V0IHRoZWlyIGBjYWNoZWAgcHJvcGVydHkgdG8gYHRydWVgLlxuICAgKiBJZiB5b3Ugc2V0IHRoZSBgZGVmYXVsdC5jYWNoZSA9IGZhbHNlYCB0aGVuIG9ubHkgcmVxdWVzdHMgdGhhdCBzcGVjaWZ5IHRoZWlyIG93biBjdXN0b21cbiAgICogY2FjaGUgb2JqZWN0IHdpbGwgYmUgY2FjaGVkLiBTZWUge0BsaW5rICRodHRwI2NhY2hpbmcgJGh0dHAgQ2FjaGluZ30gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMueHNyZkNvb2tpZU5hbWVgKiogLSB7c3RyaW5nfSAtIE5hbWUgb2YgY29va2llIGNvbnRhaW5pbmcgdGhlIFhTUkYgdG9rZW4uXG4gICAqIERlZmF1bHRzIHZhbHVlIGlzIGAnWFNSRi1UT0tFTidgLlxuICAgKlxuICAgKiAtICoqYGRlZmF1bHRzLnhzcmZIZWFkZXJOYW1lYCoqIC0ge3N0cmluZ30gLSBOYW1lIG9mIEhUVFAgaGVhZGVyIHRvIHBvcHVsYXRlIHdpdGggdGhlXG4gICAqIFhTUkYgdG9rZW4uIERlZmF1bHRzIHZhbHVlIGlzIGAnWC1YU1JGLVRPS0VOJ2AuXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMuaGVhZGVyc2AqKiAtIHtPYmplY3R9IC0gRGVmYXVsdCBoZWFkZXJzIGZvciBhbGwgJGh0dHAgcmVxdWVzdHMuXG4gICAqIFJlZmVyIHRvIHtAbGluayBuZy4kaHR0cCNzZXR0aW5nLWh0dHAtaGVhZGVycyAkaHR0cH0gZm9yIGRvY3VtZW50YXRpb24gb25cbiAgICogc2V0dGluZyBkZWZhdWx0IGhlYWRlcnMuXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMuY29tbW9uYCoqXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMucG9zdGAqKlxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnB1dGAqKlxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnBhdGNoYCoqXG4gICAqXG4gICAqKi9cbiAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcbiAgICAvLyB0cmFuc2Zvcm0gaW5jb21pbmcgcmVzcG9uc2UgZGF0YVxuICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBbZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybV0sXG5cbiAgICAvLyB0cmFuc2Zvcm0gb3V0Z29pbmcgcmVxdWVzdCBkYXRhXG4gICAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uKGQpIHtcbiAgICAgIHJldHVybiBpc09iamVjdChkKSAmJiAhaXNGaWxlKGQpICYmICFpc0Jsb2IoZCkgJiYgIWlzRm9ybURhdGEoZCkgPyB0b0pzb24oZCkgOiBkO1xuICAgIH1dLFxuXG4gICAgLy8gZGVmYXVsdCBoZWFkZXJzXG4gICAgaGVhZGVyczoge1xuICAgICAgY29tbW9uOiB7XG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICAgICAgfSxcbiAgICAgIHBvc3Q6ICAgc2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pLFxuICAgICAgcHV0OiAgICBzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTiksXG4gICAgICBwYXRjaDogIHNoYWxsb3dDb3B5KENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OKVxuICAgIH0sXG5cbiAgICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuICAgIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJ1xuICB9O1xuXG4gIHZhciB1c2VBcHBseUFzeW5jID0gZmFsc2U7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwUHJvdmlkZXIjdXNlQXBwbHlBc3luY1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogQ29uZmlndXJlICRodHRwIHNlcnZpY2UgdG8gY29tYmluZSBwcm9jZXNzaW5nIG9mIG11bHRpcGxlIGh0dHAgcmVzcG9uc2VzIHJlY2VpdmVkIGF0IGFyb3VuZFxuICAgKiB0aGUgc2FtZSB0aW1lIHZpYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHlBc3luYyAkcm9vdFNjb3BlLiRhcHBseUFzeW5jfS4gVGhpcyBjYW4gcmVzdWx0IGluXG4gICAqIHNpZ25pZmljYW50IHBlcmZvcm1hbmNlIGltcHJvdmVtZW50IGZvciBiaWdnZXIgYXBwbGljYXRpb25zIHRoYXQgbWFrZSBtYW55IEhUVFAgcmVxdWVzdHNcbiAgICogY29uY3VycmVudGx5IChjb21tb24gZHVyaW5nIGFwcGxpY2F0aW9uIGJvb3RzdHJhcCkuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGZhbHNlLiBJZiBubyB2YWx1ZSBpcyBzcGVjaWZlZCwgcmV0dXJucyB0aGUgY3VycmVudCBjb25maWd1cmVkIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiB0cnVlLCB3aGVuIHJlcXVlc3RzIGFyZSBsb2FkZWQsIHRoZXkgd2lsbCBzY2hlZHVsZSBhIGRlZmVycmVkXG4gICAqICAgIFwiYXBwbHlcIiBvbiB0aGUgbmV4dCB0aWNrLCBnaXZpbmcgdGltZSBmb3Igc3Vic2VxdWVudCByZXF1ZXN0cyBpbiBhIHJvdWdobHkgfjEwbXMgd2luZG93XG4gICAqICAgIHRvIGxvYWQgYW5kIHNoYXJlIHRoZSBzYW1lIGRpZ2VzdCBjeWNsZS5cbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW58T2JqZWN0fSBJZiBhIHZhbHVlIGlzIHNwZWNpZmllZCwgcmV0dXJucyB0aGUgJGh0dHBQcm92aWRlciBmb3IgY2hhaW5pbmcuXG4gICAqICAgIG90aGVyd2lzZSwgcmV0dXJucyB0aGUgY3VycmVudCBjb25maWd1cmVkIHZhbHVlLlxuICAgKiovXG4gIHRoaXMudXNlQXBwbHlBc3luYyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHVzZUFwcGx5QXN5bmMgPSAhIXZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiB1c2VBcHBseUFzeW5jO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciNpbnRlcmNlcHRvcnNcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEFycmF5IGNvbnRhaW5pbmcgc2VydmljZSBmYWN0b3JpZXMgZm9yIGFsbCBzeW5jaHJvbm91cyBvciBhc3luY2hyb25vdXMge0BsaW5rIG5nLiRodHRwICRodHRwfVxuICAgKiBwcmUtcHJvY2Vzc2luZyBvZiByZXF1ZXN0IG9yIHBvc3Rwcm9jZXNzaW5nIG9mIHJlc3BvbnNlcy5cbiAgICpcbiAgICogVGhlc2Ugc2VydmljZSBmYWN0b3JpZXMgYXJlIG9yZGVyZWQgYnkgcmVxdWVzdCwgaS5lLiB0aGV5IGFyZSBhcHBsaWVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuICAgKiBhcnJheSwgb24gcmVxdWVzdCwgYnV0IHJldmVyc2Ugb3JkZXIsIG9uIHJlc3BvbnNlLlxuICAgKlxuICAgKiB7QGxpbmsgbmcuJGh0dHAjaW50ZXJjZXB0b3JzIEludGVyY2VwdG9ycyBkZXRhaWxlZCBpbmZvfVxuICAgKiovXG4gIHZhciBpbnRlcmNlcHRvckZhY3RvcmllcyA9IHRoaXMuaW50ZXJjZXB0b3JzID0gW107XG5cbiAgdGhpcy4kZ2V0ID0gWyckaHR0cEJhY2tlbmQnLCAnJGJyb3dzZXInLCAnJGNhY2hlRmFjdG9yeScsICckcm9vdFNjb3BlJywgJyRxJywgJyRpbmplY3RvcicsXG4gICAgICBmdW5jdGlvbigkaHR0cEJhY2tlbmQsICRicm93c2VyLCAkY2FjaGVGYWN0b3J5LCAkcm9vdFNjb3BlLCAkcSwgJGluamVjdG9yKSB7XG5cbiAgICB2YXIgZGVmYXVsdENhY2hlID0gJGNhY2hlRmFjdG9yeSgnJGh0dHAnKTtcblxuICAgIC8qKlxuICAgICAqIEludGVyY2VwdG9ycyBzdG9yZWQgaW4gcmV2ZXJzZSBvcmRlci4gSW5uZXIgaW50ZXJjZXB0b3JzIGJlZm9yZSBvdXRlciBpbnRlcmNlcHRvcnMuXG4gICAgICogVGhlIHJldmVyc2FsIGlzIG5lZWRlZCBzbyB0aGF0IHdlIGNhbiBidWlsZCB1cCB0aGUgaW50ZXJjZXB0aW9uIGNoYWluIGFyb3VuZCB0aGVcbiAgICAgKiBzZXJ2ZXIgcmVxdWVzdC5cbiAgICAgKi9cbiAgICB2YXIgcmV2ZXJzZWRJbnRlcmNlcHRvcnMgPSBbXTtcblxuICAgIGZvckVhY2goaW50ZXJjZXB0b3JGYWN0b3JpZXMsIGZ1bmN0aW9uKGludGVyY2VwdG9yRmFjdG9yeSkge1xuICAgICAgcmV2ZXJzZWRJbnRlcmNlcHRvcnMudW5zaGlmdChpc1N0cmluZyhpbnRlcmNlcHRvckZhY3RvcnkpXG4gICAgICAgICAgPyAkaW5qZWN0b3IuZ2V0KGludGVyY2VwdG9yRmFjdG9yeSkgOiAkaW5qZWN0b3IuaW52b2tlKGludGVyY2VwdG9yRmFjdG9yeSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIHNlcnZpY2VcbiAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAqIEBuYW1lICRodHRwXG4gICAgICogQHJlcXVpcmVzIG5nLiRodHRwQmFja2VuZFxuICAgICAqIEByZXF1aXJlcyAkY2FjaGVGYWN0b3J5XG4gICAgICogQHJlcXVpcmVzICRyb290U2NvcGVcbiAgICAgKiBAcmVxdWlyZXMgJHFcbiAgICAgKiBAcmVxdWlyZXMgJGluamVjdG9yXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBUaGUgYCRodHRwYCBzZXJ2aWNlIGlzIGEgY29yZSBBbmd1bGFyIHNlcnZpY2UgdGhhdCBmYWNpbGl0YXRlcyBjb21tdW5pY2F0aW9uIHdpdGggdGhlIHJlbW90ZVxuICAgICAqIEhUVFAgc2VydmVycyB2aWEgdGhlIGJyb3dzZXIncyBbWE1MSHR0cFJlcXVlc3RdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL3htbGh0dHByZXF1ZXN0KVxuICAgICAqIG9iamVjdCBvciB2aWEgW0pTT05QXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0pTT05QKS5cbiAgICAgKlxuICAgICAqIEZvciB1bml0IHRlc3RpbmcgYXBwbGljYXRpb25zIHRoYXQgdXNlIGAkaHR0cGAgc2VydmljZSwgc2VlXG4gICAgICoge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICAgICAqXG4gICAgICogRm9yIGEgaGlnaGVyIGxldmVsIG9mIGFic3RyYWN0aW9uLCBwbGVhc2UgY2hlY2sgb3V0IHRoZSB7QGxpbmsgbmdSZXNvdXJjZS4kcmVzb3VyY2VcbiAgICAgKiAkcmVzb3VyY2V9IHNlcnZpY2UuXG4gICAgICpcbiAgICAgKiBUaGUgJGh0dHAgQVBJIGlzIGJhc2VkIG9uIHRoZSB7QGxpbmsgbmcuJHEgZGVmZXJyZWQvcHJvbWlzZSBBUElzfSBleHBvc2VkIGJ5XG4gICAgICogdGhlICRxIHNlcnZpY2UuIFdoaWxlIGZvciBzaW1wbGUgdXNhZ2UgcGF0dGVybnMgdGhpcyBkb2Vzbid0IG1hdHRlciBtdWNoLCBmb3IgYWR2YW5jZWQgdXNhZ2VcbiAgICAgKiBpdCBpcyBpbXBvcnRhbnQgdG8gZmFtaWxpYXJpemUgeW91cnNlbGYgd2l0aCB0aGVzZSBBUElzIGFuZCB0aGUgZ3VhcmFudGVlcyB0aGV5IHByb3ZpZGUuXG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIEdlbmVyYWwgdXNhZ2VcbiAgICAgKiBUaGUgYCRodHRwYCBzZXJ2aWNlIGlzIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgYSBzaW5nbGUgYXJndW1lbnQg4oCUIGEgY29uZmlndXJhdGlvbiBvYmplY3Qg4oCUXG4gICAgICogdGhhdCBpcyB1c2VkIHRvIGdlbmVyYXRlIGFuIEhUVFAgcmVxdWVzdCBhbmQgcmV0dXJucyAgYSB7QGxpbmsgbmcuJHEgcHJvbWlzZX1cbiAgICAgKiB3aXRoIHR3byAkaHR0cCBzcGVjaWZpYyBtZXRob2RzOiBgc3VjY2Vzc2AgYW5kIGBlcnJvcmAuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgLy8gU2ltcGxlIEdFVCByZXF1ZXN0IGV4YW1wbGUgOlxuICAgICAqICAgJGh0dHAuZ2V0KCcvc29tZVVybCcpLlxuICAgICAqICAgICBzdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICogICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseVxuICAgICAqICAgICAgIC8vIHdoZW4gdGhlIHJlc3BvbnNlIGlzIGF2YWlsYWJsZVxuICAgICAqICAgICB9KS5cbiAgICAgKiAgICAgZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgKiAgICAgICAvLyBjYWxsZWQgYXN5bmNocm9ub3VzbHkgaWYgYW4gZXJyb3Igb2NjdXJzXG4gICAgICogICAgICAgLy8gb3Igc2VydmVyIHJldHVybnMgcmVzcG9uc2Ugd2l0aCBhbiBlcnJvciBzdGF0dXMuXG4gICAgICogICAgIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgIC8vIFNpbXBsZSBQT1NUIHJlcXVlc3QgZXhhbXBsZSAocGFzc2luZyBkYXRhKSA6XG4gICAgICogICAkaHR0cC5wb3N0KCcvc29tZVVybCcsIHttc2c6J2hlbGxvIHdvcmQhJ30pLlxuICAgICAqICAgICBzdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICogICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseVxuICAgICAqICAgICAgIC8vIHdoZW4gdGhlIHJlc3BvbnNlIGlzIGF2YWlsYWJsZVxuICAgICAqICAgICB9KS5cbiAgICAgKiAgICAgZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgKiAgICAgICAvLyBjYWxsZWQgYXN5bmNocm9ub3VzbHkgaWYgYW4gZXJyb3Igb2NjdXJzXG4gICAgICogICAgICAgLy8gb3Igc2VydmVyIHJldHVybnMgcmVzcG9uc2Ugd2l0aCBhbiBlcnJvciBzdGF0dXMuXG4gICAgICogICAgIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICpcbiAgICAgKiBTaW5jZSB0aGUgcmV0dXJuZWQgdmFsdWUgb2YgY2FsbGluZyB0aGUgJGh0dHAgZnVuY3Rpb24gaXMgYSBgcHJvbWlzZWAsIHlvdSBjYW4gYWxzbyB1c2VcbiAgICAgKiB0aGUgYHRoZW5gIG1ldGhvZCB0byByZWdpc3RlciBjYWxsYmFja3MsIGFuZCB0aGVzZSBjYWxsYmFja3Mgd2lsbCByZWNlaXZlIGEgc2luZ2xlIGFyZ3VtZW50IOKAk1xuICAgICAqIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJlc3BvbnNlLiBTZWUgdGhlIEFQSSBzaWduYXR1cmUgYW5kIHR5cGUgaW5mbyBiZWxvdyBmb3IgbW9yZVxuICAgICAqIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBBIHJlc3BvbnNlIHN0YXR1cyBjb2RlIGJldHdlZW4gMjAwIGFuZCAyOTkgaXMgY29uc2lkZXJlZCBhIHN1Y2Nlc3Mgc3RhdHVzIGFuZFxuICAgICAqIHdpbGwgcmVzdWx0IGluIHRoZSBzdWNjZXNzIGNhbGxiYWNrIGJlaW5nIGNhbGxlZC4gTm90ZSB0aGF0IGlmIHRoZSByZXNwb25zZSBpcyBhIHJlZGlyZWN0LFxuICAgICAqIFhNTEh0dHBSZXF1ZXN0IHdpbGwgdHJhbnNwYXJlbnRseSBmb2xsb3cgaXQsIG1lYW5pbmcgdGhhdCB0aGUgZXJyb3IgY2FsbGJhY2sgd2lsbCBub3QgYmVcbiAgICAgKiBjYWxsZWQgZm9yIHN1Y2ggcmVzcG9uc2VzLlxuICAgICAqXG4gICAgICogIyMgV3JpdGluZyBVbml0IFRlc3RzIHRoYXQgdXNlICRodHRwXG4gICAgICogV2hlbiB1bml0IHRlc3RpbmcgKHVzaW5nIHtAbGluayBuZ01vY2sgbmdNb2NrfSksIGl0IGlzIG5lY2Vzc2FyeSB0byBjYWxsXG4gICAgICoge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQjZmx1c2ggJGh0dHBCYWNrZW5kLmZsdXNoKCl9IHRvIGZsdXNoIGVhY2ggcGVuZGluZ1xuICAgICAqIHJlcXVlc3QgdXNpbmcgdHJhaW5lZCByZXNwb25zZXMuXG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiAkaHR0cEJhY2tlbmQuZXhwZWN0R0VUKC4uLik7XG4gICAgICogJGh0dHAuZ2V0KC4uLik7XG4gICAgICogJGh0dHBCYWNrZW5kLmZsdXNoKCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyBTaG9ydGN1dCBtZXRob2RzXG4gICAgICpcbiAgICAgKiBTaG9ydGN1dCBtZXRob2RzIGFyZSBhbHNvIGF2YWlsYWJsZS4gQWxsIHNob3J0Y3V0IG1ldGhvZHMgcmVxdWlyZSBwYXNzaW5nIGluIHRoZSBVUkwsIGFuZFxuICAgICAqIHJlcXVlc3QgZGF0YSBtdXN0IGJlIHBhc3NlZCBpbiBmb3IgUE9TVC9QVVQgcmVxdWVzdHMuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgJGh0dHAuZ2V0KCcvc29tZVVybCcpLnN1Y2Nlc3Moc3VjY2Vzc0NhbGxiYWNrKTtcbiAgICAgKiAgICRodHRwLnBvc3QoJy9zb21lVXJsJywgZGF0YSkuc3VjY2VzcyhzdWNjZXNzQ2FsbGJhY2spO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQ29tcGxldGUgbGlzdCBvZiBzaG9ydGN1dCBtZXRob2RzOlxuICAgICAqXG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjZ2V0ICRodHRwLmdldH1cbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNoZWFkICRodHRwLmhlYWR9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjcG9zdCAkaHR0cC5wb3N0fVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI3B1dCAkaHR0cC5wdXR9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjZGVsZXRlICRodHRwLmRlbGV0ZX1cbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNqc29ucCAkaHR0cC5qc29ucH1cbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNwYXRjaCAkaHR0cC5wYXRjaH1cbiAgICAgKlxuICAgICAqXG4gICAgICogIyMgU2V0dGluZyBIVFRQIEhlYWRlcnNcbiAgICAgKlxuICAgICAqIFRoZSAkaHR0cCBzZXJ2aWNlIHdpbGwgYXV0b21hdGljYWxseSBhZGQgY2VydGFpbiBIVFRQIGhlYWRlcnMgdG8gYWxsIHJlcXVlc3RzLiBUaGVzZSBkZWZhdWx0c1xuICAgICAqIGNhbiBiZSBmdWxseSBjb25maWd1cmVkIGJ5IGFjY2Vzc2luZyB0aGUgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVyc2AgY29uZmlndXJhdGlvblxuICAgICAqIG9iamVjdCwgd2hpY2ggY3VycmVudGx5IGNvbnRhaW5zIHRoaXMgZGVmYXVsdCBjb25maWd1cmF0aW9uOlxuICAgICAqXG4gICAgICogLSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbmAgKGhlYWRlcnMgdGhhdCBhcmUgY29tbW9uIGZvciBhbGwgcmVxdWVzdHMpOlxuICAgICAqICAgLSBgQWNjZXB0OiBhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqIC8gKmBcbiAgICAgKiAtIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucG9zdGA6IChoZWFkZXIgZGVmYXVsdHMgZm9yIFBPU1QgcmVxdWVzdHMpXG4gICAgICogICAtIGBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25gXG4gICAgICogLSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLnB1dGAgKGhlYWRlciBkZWZhdWx0cyBmb3IgUFVUIHJlcXVlc3RzKVxuICAgICAqICAgLSBgQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uYFxuICAgICAqXG4gICAgICogVG8gYWRkIG9yIG92ZXJ3cml0ZSB0aGVzZSBkZWZhdWx0cywgc2ltcGx5IGFkZCBvciByZW1vdmUgYSBwcm9wZXJ0eSBmcm9tIHRoZXNlIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBvYmplY3RzLiBUbyBhZGQgaGVhZGVycyBmb3IgYW4gSFRUUCBtZXRob2Qgb3RoZXIgdGhhbiBQT1NUIG9yIFBVVCwgc2ltcGx5IGFkZCBhIG5ldyBvYmplY3RcbiAgICAgKiB3aXRoIHRoZSBsb3dlcmNhc2VkIEhUVFAgbWV0aG9kIG5hbWUgYXMgdGhlIGtleSwgZS5nLlxuICAgICAqIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0ID0geyAnTXktSGVhZGVyJyA6ICd2YWx1ZScgfS5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0cyBjYW4gYWxzbyBiZSBzZXQgYXQgcnVudGltZSB2aWEgdGhlIGAkaHR0cC5kZWZhdWx0c2Agb2JqZWN0IGluIHRoZSBzYW1lXG4gICAgICogZmFzaGlvbi4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBtb2R1bGUucnVuKGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICogICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gJ0Jhc2ljIFltVmxjRHBpYjI5dydcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uLCB5b3UgY2FuIHN1cHBseSBhIGBoZWFkZXJzYCBwcm9wZXJ0eSBpbiB0aGUgY29uZmlnIG9iamVjdCBwYXNzZWQgd2hlblxuICAgICAqIGNhbGxpbmcgYCRodHRwKGNvbmZpZylgLCB3aGljaCBvdmVycmlkZXMgdGhlIGRlZmF1bHRzIHdpdGhvdXQgY2hhbmdpbmcgdGhlbSBnbG9iYWxseS5cbiAgICAgKlxuICAgICAqIFRvIGV4cGxpY2l0bHkgcmVtb3ZlIGEgaGVhZGVyIGF1dG9tYXRpY2FsbHkgYWRkZWQgdmlhICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycyBvbiBhIHBlciByZXF1ZXN0IGJhc2lzLFxuICAgICAqIFVzZSB0aGUgYGhlYWRlcnNgIHByb3BlcnR5LCBzZXR0aW5nIHRoZSBkZXNpcmVkIGhlYWRlciB0byBgdW5kZWZpbmVkYC4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciByZXEgPSB7XG4gICAgICogIG1ldGhvZDogJ1BPU1QnLFxuICAgICAqICB1cmw6ICdodHRwOi8vZXhhbXBsZS5jb20nLFxuICAgICAqICBoZWFkZXJzOiB7XG4gICAgICogICAgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZFxuICAgICAqICB9LFxuICAgICAqICBkYXRhOiB7IHRlc3Q6ICd0ZXN0JyB9LFxuICAgICAqIH1cbiAgICAgKlxuICAgICAqICRodHRwKHJlcSkuc3VjY2VzcyhmdW5jdGlvbigpey4uLn0pLmVycm9yKGZ1bmN0aW9uKCl7Li4ufSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyBUcmFuc2Zvcm1pbmcgUmVxdWVzdHMgYW5kIFJlc3BvbnNlc1xuICAgICAqXG4gICAgICogQm90aCByZXF1ZXN0cyBhbmQgcmVzcG9uc2VzIGNhbiBiZSB0cmFuc2Zvcm1lZCB1c2luZyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnM6IGB0cmFuc2Zvcm1SZXF1ZXN0YFxuICAgICAqIGFuZCBgdHJhbnNmb3JtUmVzcG9uc2VgLiBUaGVzZSBwcm9wZXJ0aWVzIGNhbiBiZSBhIHNpbmdsZSBmdW5jdGlvbiB0aGF0IHJldHVybnNcbiAgICAgKiB0aGUgdHJhbnNmb3JtZWQgdmFsdWUgKGBmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpYCkgb3IgYW4gYXJyYXkgb2Ygc3VjaCB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMsXG4gICAgICogd2hpY2ggYWxsb3dzIHlvdSB0byBgcHVzaGAgb3IgYHVuc2hpZnRgIGEgbmV3IHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIGludG8gdGhlIHRyYW5zZm9ybWF0aW9uIGNoYWluLlxuICAgICAqXG4gICAgICogIyMjIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zXG4gICAgICpcbiAgICAgKiBUaGUgYCRodHRwUHJvdmlkZXJgIHByb3ZpZGVyIGFuZCBgJGh0dHBgIHNlcnZpY2UgZXhwb3NlIGBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCBhbmRcbiAgICAgKiBgZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMuIElmIGEgcmVxdWVzdCBkb2VzIG5vdCBwcm92aWRlIGl0cyBvd24gdHJhbnNmb3JtYXRpb25zXG4gICAgICogdGhlbiB0aGVzZSB3aWxsIGJlIGFwcGxpZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGF1Z21lbnQgb3IgcmVwbGFjZSB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgYnkgbW9kaWZ5aW5nIHRoZXNlIHByb3BlcnRpZXMgYnkgYWRkaW5nIHRvIG9yXG4gICAgICogcmVwbGFjaW5nIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEFuZ3VsYXIgcHJvdmlkZXMgdGhlIGZvbGxvd2luZyBkZWZhdWx0IHRyYW5zZm9ybWF0aW9uczpcbiAgICAgKlxuICAgICAqIFJlcXVlc3QgdHJhbnNmb3JtYXRpb25zIChgJGh0dHBQcm92aWRlci5kZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCBhbmQgYCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RgKTpcbiAgICAgKlxuICAgICAqIC0gSWYgdGhlIGBkYXRhYCBwcm9wZXJ0eSBvZiB0aGUgcmVxdWVzdCBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWlucyBhbiBvYmplY3QsIHNlcmlhbGl6ZSBpdFxuICAgICAqICAgaW50byBKU09OIGZvcm1hdC5cbiAgICAgKlxuICAgICAqIFJlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucyAoYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgIGFuZCBgJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgKTpcbiAgICAgKlxuICAgICAqICAtIElmIFhTUkYgcHJlZml4IGlzIGRldGVjdGVkLCBzdHJpcCBpdCAoc2VlIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zIHNlY3Rpb24gYmVsb3cpLlxuICAgICAqICAtIElmIEpTT04gcmVzcG9uc2UgaXMgZGV0ZWN0ZWQsIGRlc2VyaWFsaXplIGl0IHVzaW5nIGEgSlNPTiBwYXJzZXIuXG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIyBPdmVycmlkaW5nIHRoZSBEZWZhdWx0IFRyYW5zZm9ybWF0aW9ucyBQZXIgUmVxdWVzdFxuICAgICAqXG4gICAgICogSWYgeW91IHdpc2ggb3ZlcnJpZGUgdGhlIHJlcXVlc3QvcmVzcG9uc2UgdHJhbnNmb3JtYXRpb25zIG9ubHkgZm9yIGEgc2luZ2xlIHJlcXVlc3QgdGhlbiBwcm92aWRlXG4gICAgICogYHRyYW5zZm9ybVJlcXVlc3RgIGFuZC9vciBgdHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMgb24gdGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHBhc3NlZFxuICAgICAqIGludG8gYCRodHRwYC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBpZiB5b3UgcHJvdmlkZSB0aGVzZSBwcm9wZXJ0aWVzIG9uIHRoZSBjb25maWcgb2JqZWN0IHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9ucyB3aWxsIGJlXG4gICAgICogb3ZlcndyaXR0ZW4uIElmIHlvdSB3aXNoIHRvIGF1Z21lbnQgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zIHRoZW4geW91IG11c3QgaW5jbHVkZSB0aGVtIGluIHlvdXJcbiAgICAgKiBsb2NhbCB0cmFuc2Zvcm1hdGlvbiBhcnJheS5cbiAgICAgKlxuICAgICAqIFRoZSBmb2xsb3dpbmcgY29kZSBkZW1vbnN0cmF0ZXMgYWRkaW5nIGEgbmV3IHJlc3BvbnNlIHRyYW5zZm9ybWF0aW9uIHRvIGJlIHJ1biBhZnRlciB0aGUgZGVmYXVsdCByZXNwb25zZVxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyBoYXZlIGJlZW4gcnVuLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBmdW5jdGlvbiBhcHBlbmRUcmFuc2Zvcm0oZGVmYXVsdHMsIHRyYW5zZm9ybSkge1xuICAgICAqXG4gICAgICogICAvLyBXZSBjYW4ndCBndWFyYW50ZWUgdGhhdCB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbiBpcyBhbiBhcnJheVxuICAgICAqICAgZGVmYXVsdHMgPSBhbmd1bGFyLmlzQXJyYXkoZGVmYXVsdHMpID8gZGVmYXVsdHMgOiBbZGVmYXVsdHNdO1xuICAgICAqXG4gICAgICogICAvLyBBcHBlbmQgdGhlIG5ldyB0cmFuc2Zvcm1hdGlvbiB0byB0aGUgZGVmYXVsdHNcbiAgICAgKiAgIHJldHVybiBkZWZhdWx0cy5jb25jYXQodHJhbnNmb3JtKTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiAkaHR0cCh7XG4gICAgICogICB1cmw6ICcuLi4nLFxuICAgICAqICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgKiAgIHRyYW5zZm9ybVJlc3BvbnNlOiBhcHBlbmRUcmFuc2Zvcm0oJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2UsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICAgIHJldHVybiBkb1RyYW5zZm9ybSh2YWx1ZSk7XG4gICAgICogICB9KVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyBDYWNoaW5nXG4gICAgICpcbiAgICAgKiBUbyBlbmFibGUgY2FjaGluZywgc2V0IHRoZSByZXF1ZXN0IGNvbmZpZ3VyYXRpb24gYGNhY2hlYCBwcm9wZXJ0eSB0byBgdHJ1ZWAgKHRvIHVzZSBkZWZhdWx0XG4gICAgICogY2FjaGUpIG9yIHRvIGEgY3VzdG9tIGNhY2hlIG9iamVjdCAoYnVpbHQgd2l0aCB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9KS5cbiAgICAgKiBXaGVuIHRoZSBjYWNoZSBpcyBlbmFibGVkLCBgJGh0dHBgIHN0b3JlcyB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIGluIHRoZSBzcGVjaWZpZWRcbiAgICAgKiBjYWNoZS4gVGhlIG5leHQgdGltZSB0aGUgc2FtZSByZXF1ZXN0IGlzIG1hZGUsIHRoZSByZXNwb25zZSBpcyBzZXJ2ZWQgZnJvbSB0aGUgY2FjaGUgd2l0aG91dFxuICAgICAqIHNlbmRpbmcgYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgZXZlbiBpZiB0aGUgcmVzcG9uc2UgaXMgc2VydmVkIGZyb20gY2FjaGUsIGRlbGl2ZXJ5IG9mIHRoZSBkYXRhIGlzIGFzeW5jaHJvbm91cyBpblxuICAgICAqIHRoZSBzYW1lIHdheSB0aGF0IHJlYWwgcmVxdWVzdHMgYXJlLlxuICAgICAqXG4gICAgICogSWYgdGhlcmUgYXJlIG11bHRpcGxlIEdFVCByZXF1ZXN0cyBmb3IgdGhlIHNhbWUgVVJMIHRoYXQgc2hvdWxkIGJlIGNhY2hlZCB1c2luZyB0aGUgc2FtZVxuICAgICAqIGNhY2hlLCBidXQgdGhlIGNhY2hlIGlzIG5vdCBwb3B1bGF0ZWQgeWV0LCBvbmx5IG9uZSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgd2lsbCBiZSBtYWRlIGFuZFxuICAgICAqIHRoZSByZW1haW5pbmcgcmVxdWVzdHMgd2lsbCBiZSBmdWxmaWxsZWQgdXNpbmcgdGhlIHJlc3BvbnNlIGZyb20gdGhlIGZpcnN0IHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGNoYW5nZSB0aGUgZGVmYXVsdCBjYWNoZSB0byBhIG5ldyBvYmplY3QgKGJ1aWx0IHdpdGhcbiAgICAgKiB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9KSBieSB1cGRhdGluZyB0aGVcbiAgICAgKiB7QGxpbmsgbmcuJGh0dHAjZGVmYXVsdHMgYCRodHRwLmRlZmF1bHRzLmNhY2hlYH0gcHJvcGVydHkuIEFsbCByZXF1ZXN0cyB3aG8gc2V0XG4gICAgICogdGhlaXIgYGNhY2hlYCBwcm9wZXJ0eSB0byBgdHJ1ZWAgd2lsbCBub3cgdXNlIHRoaXMgY2FjaGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogSWYgeW91IHNldCB0aGUgZGVmYXVsdCBjYWNoZSB0byBgZmFsc2VgIHRoZW4gb25seSByZXF1ZXN0cyB0aGF0IHNwZWNpZnkgdGhlaXIgb3duIGN1c3RvbVxuICAgICAqIGNhY2hlIG9iamVjdCB3aWxsIGJlIGNhY2hlZC5cbiAgICAgKlxuICAgICAqICMjIEludGVyY2VwdG9yc1xuICAgICAqXG4gICAgICogQmVmb3JlIHlvdSBzdGFydCBjcmVhdGluZyBpbnRlcmNlcHRvcnMsIGJlIHN1cmUgdG8gdW5kZXJzdGFuZCB0aGVcbiAgICAgKiB7QGxpbmsgbmcuJHEgJHEgYW5kIGRlZmVycmVkL3Byb21pc2UgQVBJc30uXG4gICAgICpcbiAgICAgKiBGb3IgcHVycG9zZXMgb2YgZ2xvYmFsIGVycm9yIGhhbmRsaW5nLCBhdXRoZW50aWNhdGlvbiwgb3IgYW55IGtpbmQgb2Ygc3luY2hyb25vdXMgb3JcbiAgICAgKiBhc3luY2hyb25vdXMgcHJlLXByb2Nlc3Npbmcgb2YgcmVxdWVzdCBvciBwb3N0cHJvY2Vzc2luZyBvZiByZXNwb25zZXMsIGl0IGlzIGRlc2lyYWJsZSB0byBiZVxuICAgICAqIGFibGUgdG8gaW50ZXJjZXB0IHJlcXVlc3RzIGJlZm9yZSB0aGV5IGFyZSBoYW5kZWQgdG8gdGhlIHNlcnZlciBhbmRcbiAgICAgKiByZXNwb25zZXMgYmVmb3JlIHRoZXkgYXJlIGhhbmRlZCBvdmVyIHRvIHRoZSBhcHBsaWNhdGlvbiBjb2RlIHRoYXRcbiAgICAgKiBpbml0aWF0ZWQgdGhlc2UgcmVxdWVzdHMuIFRoZSBpbnRlcmNlcHRvcnMgbGV2ZXJhZ2UgdGhlIHtAbGluayBuZy4kcVxuICAgICAqIHByb21pc2UgQVBJc30gdG8gZnVsZmlsbCB0aGlzIG5lZWQgZm9yIGJvdGggc3luY2hyb25vdXMgYW5kIGFzeW5jaHJvbm91cyBwcmUtcHJvY2Vzc2luZy5cbiAgICAgKlxuICAgICAqIFRoZSBpbnRlcmNlcHRvcnMgYXJlIHNlcnZpY2UgZmFjdG9yaWVzIHRoYXQgYXJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgYCRodHRwUHJvdmlkZXJgIGJ5XG4gICAgICogYWRkaW5nIHRoZW0gdG8gdGhlIGAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9yc2AgYXJyYXkuIFRoZSBmYWN0b3J5IGlzIGNhbGxlZCBhbmRcbiAgICAgKiBpbmplY3RlZCB3aXRoIGRlcGVuZGVuY2llcyAoaWYgc3BlY2lmaWVkKSBhbmQgcmV0dXJucyB0aGUgaW50ZXJjZXB0b3IuXG4gICAgICpcbiAgICAgKiBUaGVyZSBhcmUgdHdvIGtpbmRzIG9mIGludGVyY2VwdG9ycyAoYW5kIHR3byBraW5kcyBvZiByZWplY3Rpb24gaW50ZXJjZXB0b3JzKTpcbiAgICAgKlxuICAgICAqICAgKiBgcmVxdWVzdGA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggYSBodHRwIGBjb25maWdgIG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgY29uZmlnYCBvYmplY3Qgb3IgY3JlYXRlIGEgbmV3IG9uZS4gVGhlIGZ1bmN0aW9uIG5lZWRzIHRvIHJldHVybiB0aGUgYGNvbmZpZ2BcbiAgICAgKiAgICAgb2JqZWN0IGRpcmVjdGx5LCBvciBhIHByb21pc2UgY29udGFpbmluZyB0aGUgYGNvbmZpZ2Agb3IgYSBuZXcgYGNvbmZpZ2Agb2JqZWN0LlxuICAgICAqICAgKiBgcmVxdWVzdEVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICogICAqIGByZXNwb25zZWA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggaHR0cCBgcmVzcG9uc2VgIG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgcmVzcG9uc2VgIG9iamVjdCBvciBjcmVhdGUgYSBuZXcgb25lLiBUaGUgZnVuY3Rpb24gbmVlZHMgdG8gcmV0dXJuIHRoZSBgcmVzcG9uc2VgXG4gICAgICogICAgIG9iamVjdCBkaXJlY3RseSwgb3IgYXMgYSBwcm9taXNlIGNvbnRhaW5pbmcgdGhlIGByZXNwb25zZWAgb3IgYSBuZXcgYHJlc3BvbnNlYCBvYmplY3QuXG4gICAgICogICAqIGByZXNwb25zZUVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAvLyByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgYXMgYSBzZXJ2aWNlXG4gICAgICogICAkcHJvdmlkZS5mYWN0b3J5KCdteUh0dHBJbnRlcmNlcHRvcicsIGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcbiAgICAgKiAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIHN1Y2Nlc3NcbiAgICAgKiAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3JlcXVlc3RFcnJvcic6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIGVycm9yXG4gICAgICogICAgICAgICBpZiAoY2FuUmVjb3ZlcihyZWplY3Rpb24pKSB7XG4gICAgICogICAgICAgICAgIHJldHVybiByZXNwb25zZU9yTmV3UHJvbWlzZVxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKlxuICAgICAqXG4gICAgICogICAgICAgLy8gb3B0aW9uYWwgbWV0aG9kXG4gICAgICogICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBzdWNjZXNzXG4gICAgICogICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3Jlc3BvbnNlRXJyb3InOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBlcnJvclxuICAgICAqICAgICAgICAgaWYgKGNhblJlY292ZXIocmVqZWN0aW9uKSkge1xuICAgICAqICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VPck5ld1Byb21pc2VcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKlxuICAgICAqICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnbXlIdHRwSW50ZXJjZXB0b3InKTtcbiAgICAgKlxuICAgICAqXG4gICAgICogICAvLyBhbHRlcm5hdGl2ZWx5LCByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgdmlhIGFuIGFub255bW91cyBmYWN0b3J5XG4gICAgICogICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICogICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZVxuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKiAgICAgICAncmVzcG9uc2UnOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAqICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmVcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zXG4gICAgICpcbiAgICAgKiBXaGVuIGRlc2lnbmluZyB3ZWIgYXBwbGljYXRpb25zLCBjb25zaWRlciBzZWN1cml0eSB0aHJlYXRzIGZyb206XG4gICAgICpcbiAgICAgKiAtIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcbiAgICAgKiAtIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KVxuICAgICAqXG4gICAgICogQm90aCBzZXJ2ZXIgYW5kIHRoZSBjbGllbnQgbXVzdCBjb29wZXJhdGUgaW4gb3JkZXIgdG8gZWxpbWluYXRlIHRoZXNlIHRocmVhdHMuIEFuZ3VsYXIgY29tZXNcbiAgICAgKiBwcmUtY29uZmlndXJlZCB3aXRoIHN0cmF0ZWdpZXMgdGhhdCBhZGRyZXNzIHRoZXNlIGlzc3VlcywgYnV0IGZvciB0aGlzIHRvIHdvcmsgYmFja2VuZCBzZXJ2ZXJcbiAgICAgKiBjb29wZXJhdGlvbiBpcyByZXF1aXJlZC5cbiAgICAgKlxuICAgICAqICMjIyBKU09OIFZ1bG5lcmFiaWxpdHkgUHJvdGVjdGlvblxuICAgICAqXG4gICAgICogQSBbSlNPTiB2dWxuZXJhYmlsaXR5XShodHRwOi8vaGFhY2tlZC5jb20vYXJjaGl2ZS8yMDA4LzExLzIwL2FuYXRvbXktb2YtYS1zdWJ0bGUtanNvbi12dWxuZXJhYmlsaXR5LmFzcHgpXG4gICAgICogYWxsb3dzIHRoaXJkIHBhcnR5IHdlYnNpdGUgdG8gdHVybiB5b3VyIEpTT04gcmVzb3VyY2UgVVJMIGludG9cbiAgICAgKiBbSlNPTlBdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSlNPTlApIHJlcXVlc3QgdW5kZXIgc29tZSBjb25kaXRpb25zLiBUb1xuICAgICAqIGNvdW50ZXIgdGhpcyB5b3VyIHNlcnZlciBjYW4gcHJlZml4IGFsbCBKU09OIHJlcXVlc3RzIHdpdGggZm9sbG93aW5nIHN0cmluZyBgXCIpXX0nLFxcblwiYC5cbiAgICAgKiBBbmd1bGFyIHdpbGwgYXV0b21hdGljYWxseSBzdHJpcCB0aGUgcHJlZml4IGJlZm9yZSBwcm9jZXNzaW5nIGl0IGFzIEpTT04uXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSBpZiB5b3VyIHNlcnZlciBuZWVkcyB0byByZXR1cm46XG4gICAgICogYGBganNcbiAgICAgKiBbJ29uZScsJ3R3byddXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiB3aGljaCBpcyB2dWxuZXJhYmxlIHRvIGF0dGFjaywgeW91ciBzZXJ2ZXIgY2FuIHJldHVybjpcbiAgICAgKiBgYGBqc1xuICAgICAqICldfScsXG4gICAgICogWydvbmUnLCd0d28nXVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQW5ndWxhciB3aWxsIHN0cmlwIHRoZSBwcmVmaXgsIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBKU09OLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyMgQ3Jvc3MgU2l0ZSBSZXF1ZXN0IEZvcmdlcnkgKFhTUkYpIFByb3RlY3Rpb25cbiAgICAgKlxuICAgICAqIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KSBpcyBhIHRlY2huaXF1ZSBieSB3aGljaFxuICAgICAqIGFuIHVuYXV0aG9yaXplZCBzaXRlIGNhbiBnYWluIHlvdXIgdXNlcidzIHByaXZhdGUgZGF0YS4gQW5ndWxhciBwcm92aWRlcyBhIG1lY2hhbmlzbVxuICAgICAqIHRvIGNvdW50ZXIgWFNSRi4gV2hlbiBwZXJmb3JtaW5nIFhIUiByZXF1ZXN0cywgdGhlICRodHRwIHNlcnZpY2UgcmVhZHMgYSB0b2tlbiBmcm9tIGEgY29va2llXG4gICAgICogKGJ5IGRlZmF1bHQsIGBYU1JGLVRPS0VOYCkgYW5kIHNldHMgaXQgYXMgYW4gSFRUUCBoZWFkZXIgKGBYLVhTUkYtVE9LRU5gKS4gU2luY2Ugb25seVxuICAgICAqIEphdmFTY3JpcHQgdGhhdCBydW5zIG9uIHlvdXIgZG9tYWluIGNvdWxkIHJlYWQgdGhlIGNvb2tpZSwgeW91ciBzZXJ2ZXIgY2FuIGJlIGFzc3VyZWQgdGhhdFxuICAgICAqIHRoZSBYSFIgY2FtZSBmcm9tIEphdmFTY3JpcHQgcnVubmluZyBvbiB5b3VyIGRvbWFpbi4gVGhlIGhlYWRlciB3aWxsIG5vdCBiZSBzZXQgZm9yXG4gICAgICogY3Jvc3MtZG9tYWluIHJlcXVlc3RzLlxuICAgICAqXG4gICAgICogVG8gdGFrZSBhZHZhbnRhZ2Ugb2YgdGhpcywgeW91ciBzZXJ2ZXIgbmVlZHMgdG8gc2V0IGEgdG9rZW4gaW4gYSBKYXZhU2NyaXB0IHJlYWRhYmxlIHNlc3Npb25cbiAgICAgKiBjb29raWUgY2FsbGVkIGBYU1JGLVRPS0VOYCBvbiB0aGUgZmlyc3QgSFRUUCBHRVQgcmVxdWVzdC4gT24gc3Vic2VxdWVudCBYSFIgcmVxdWVzdHMgdGhlXG4gICAgICogc2VydmVyIGNhbiB2ZXJpZnkgdGhhdCB0aGUgY29va2llIG1hdGNoZXMgYFgtWFNSRi1UT0tFTmAgSFRUUCBoZWFkZXIsIGFuZCB0aGVyZWZvcmUgYmUgc3VyZVxuICAgICAqIHRoYXQgb25seSBKYXZhU2NyaXB0IHJ1bm5pbmcgb24geW91ciBkb21haW4gY291bGQgaGF2ZSBzZW50IHRoZSByZXF1ZXN0LiBUaGUgdG9rZW4gbXVzdCBiZVxuICAgICAqIHVuaXF1ZSBmb3IgZWFjaCB1c2VyIGFuZCBtdXN0IGJlIHZlcmlmaWFibGUgYnkgdGhlIHNlcnZlciAodG8gcHJldmVudCB0aGUgSmF2YVNjcmlwdCBmcm9tXG4gICAgICogbWFraW5nIHVwIGl0cyBvd24gdG9rZW5zKS4gV2UgcmVjb21tZW5kIHRoYXQgdGhlIHRva2VuIGlzIGEgZGlnZXN0IG9mIHlvdXIgc2l0ZSdzXG4gICAgICogYXV0aGVudGljYXRpb24gY29va2llIHdpdGggYSBbc2FsdF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2FsdF8oY3J5cHRvZ3JhcGh5JiM0MTspXG4gICAgICogZm9yIGFkZGVkIHNlY3VyaXR5LlxuICAgICAqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGhlYWRlcnMgY2FuIGJlIHNwZWNpZmllZCB1c2luZyB0aGUgeHNyZkhlYWRlck5hbWUgYW5kIHhzcmZDb29raWVOYW1lXG4gICAgICogcHJvcGVydGllcyBvZiBlaXRoZXIgJGh0dHBQcm92aWRlci5kZWZhdWx0cyBhdCBjb25maWctdGltZSwgJGh0dHAuZGVmYXVsdHMgYXQgcnVuLXRpbWUsXG4gICAgICogb3IgdGhlIHBlci1yZXF1ZXN0IGNvbmZpZyBvYmplY3QuXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgT2JqZWN0IGRlc2NyaWJpbmcgdGhlIHJlcXVlc3QgdG8gYmUgbWFkZSBhbmQgaG93IGl0IHNob3VsZCBiZVxuICAgICAqICAgIHByb2Nlc3NlZC4gVGhlIG9iamVjdCBoYXMgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAgICAtICoqbWV0aG9kKiog4oCTIGB7c3RyaW5nfWAg4oCTIEhUVFAgbWV0aG9kIChlLmcuICdHRVQnLCAnUE9TVCcsIGV0YylcbiAgICAgKiAgICAtICoqdXJsKiog4oCTIGB7c3RyaW5nfWAg4oCTIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyBiZWluZyByZXF1ZXN0ZWQuXG4gICAgICogICAgLSAqKnBhcmFtcyoqIOKAkyBge09iamVjdC48c3RyaW5nfE9iamVjdD59YCDigJMgTWFwIG9mIHN0cmluZ3Mgb3Igb2JqZWN0cyB3aGljaCB3aWxsIGJlIHR1cm5lZFxuICAgICAqICAgICAgdG8gYD9rZXkxPXZhbHVlMSZrZXkyPXZhbHVlMmAgYWZ0ZXIgdGhlIHVybC4gSWYgdGhlIHZhbHVlIGlzIG5vdCBhIHN0cmluZywgaXQgd2lsbCBiZVxuICAgICAqICAgICAgSlNPTmlmaWVkLlxuICAgICAqICAgIC0gKipkYXRhKiog4oCTIGB7c3RyaW5nfE9iamVjdH1gIOKAkyBEYXRhIHRvIGJlIHNlbnQgYXMgdGhlIHJlcXVlc3QgbWVzc2FnZSBkYXRhLlxuICAgICAqICAgIC0gKipoZWFkZXJzKiog4oCTIGB7T2JqZWN0fWAg4oCTIE1hcCBvZiBzdHJpbmdzIG9yIGZ1bmN0aW9ucyB3aGljaCByZXR1cm4gc3RyaW5ncyByZXByZXNlbnRpbmdcbiAgICAgKiAgICAgIEhUVFAgaGVhZGVycyB0byBzZW5kIHRvIHRoZSBzZXJ2ZXIuIElmIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBmdW5jdGlvbiBpcyBudWxsLCB0aGVcbiAgICAgKiAgICAgIGhlYWRlciB3aWxsIG5vdCBiZSBzZW50LlxuICAgICAqICAgIC0gKip4c3JmSGVhZGVyTmFtZSoqIOKAkyBge3N0cmluZ31gIOKAkyBOYW1lIG9mIEhUVFAgaGVhZGVyIHRvIHBvcHVsYXRlIHdpdGggdGhlIFhTUkYgdG9rZW4uXG4gICAgICogICAgLSAqKnhzcmZDb29raWVOYW1lKiog4oCTIGB7c3RyaW5nfWAg4oCTIE5hbWUgb2YgY29va2llIGNvbnRhaW5pbmcgdGhlIFhTUkYgdG9rZW4uXG4gICAgICogICAgLSAqKnRyYW5zZm9ybVJlcXVlc3QqKiDigJNcbiAgICAgKiAgICAgIGB7ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcil8QXJyYXkuPGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpPn1gIOKAk1xuICAgICAqICAgICAgdHJhbnNmb3JtIGZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIHN1Y2ggZnVuY3Rpb25zLiBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHRha2VzIHRoZSBodHRwXG4gICAgICogICAgICByZXF1ZXN0IGJvZHkgYW5kIGhlYWRlcnMgYW5kIHJldHVybnMgaXRzIHRyYW5zZm9ybWVkICh0eXBpY2FsbHkgc2VyaWFsaXplZCkgdmVyc2lvbi5cbiAgICAgKiAgICAgIFNlZSB7QGxpbmsgbmcuJGh0dHAjb3ZlcnJpZGluZy10aGUtZGVmYXVsdC10cmFuc2Zvcm1hdGlvbnMtcGVyLXJlcXVlc3RcbiAgICAgKiAgICAgIE92ZXJyaWRpbmcgdGhlIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zfVxuICAgICAqICAgIC0gKip0cmFuc2Zvcm1SZXNwb25zZSoqIOKAk1xuICAgICAqICAgICAgYHtmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpfEFycmF5LjxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpPn1gIOKAk1xuICAgICAqICAgICAgdHJhbnNmb3JtIGZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIHN1Y2ggZnVuY3Rpb25zLiBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHRha2VzIHRoZSBodHRwXG4gICAgICogICAgICByZXNwb25zZSBib2R5LCBoZWFkZXJzIGFuZCBzdGF0dXMgYW5kIHJldHVybnMgaXRzIHRyYW5zZm9ybWVkICh0eXBpY2FsbHkgZGVzZXJpYWxpemVkKSB2ZXJzaW9uLlxuICAgICAqICAgICAgU2VlIHtAbGluayBuZy4kaHR0cCNvdmVycmlkaW5nLXRoZS1kZWZhdWx0LXRyYW5zZm9ybWF0aW9ucy1wZXItcmVxdWVzdFxuICAgICAqICAgICAgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnN9XG4gICAgICogICAgLSAqKmNhY2hlKiog4oCTIGB7Ym9vbGVhbnxDYWNoZX1gIOKAkyBJZiB0cnVlLCBhIGRlZmF1bHQgJGh0dHAgY2FjaGUgd2lsbCBiZSB1c2VkIHRvIGNhY2hlIHRoZVxuICAgICAqICAgICAgR0VUIHJlcXVlc3QsIG90aGVyd2lzZSBpZiBhIGNhY2hlIGluc3RhbmNlIGJ1aWx0IHdpdGhcbiAgICAgKiAgICAgIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5ICRjYWNoZUZhY3Rvcnl9LCB0aGlzIGNhY2hlIHdpbGwgYmUgdXNlZCBmb3JcbiAgICAgKiAgICAgIGNhY2hpbmcuXG4gICAgICogICAgLSAqKnRpbWVvdXQqKiDigJMgYHtudW1iZXJ8UHJvbWlzZX1gIOKAkyB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcywgb3Ige0BsaW5rIG5nLiRxIHByb21pc2V9XG4gICAgICogICAgICB0aGF0IHNob3VsZCBhYm9ydCB0aGUgcmVxdWVzdCB3aGVuIHJlc29sdmVkLlxuICAgICAqICAgIC0gKip3aXRoQ3JlZGVudGlhbHMqKiAtIGB7Ym9vbGVhbn1gIC0gd2hldGhlciB0byBzZXQgdGhlIGB3aXRoQ3JlZGVudGlhbHNgIGZsYWcgb24gdGhlXG4gICAgICogICAgICBYSFIgb2JqZWN0LiBTZWUgW3JlcXVlc3RzIHdpdGggY3JlZGVudGlhbHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0hUVFAvQWNjZXNzX2NvbnRyb2xfQ09SUyNSZXF1ZXN0c193aXRoX2NyZWRlbnRpYWxzKVxuICAgICAqICAgICAgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICogICAgLSAqKnJlc3BvbnNlVHlwZSoqIC0gYHtzdHJpbmd9YCAtIHNlZVxuICAgICAqICAgICAgW3JlcXVlc3RUeXBlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9YTUxIdHRwUmVxdWVzdCNyZXNwb25zZVR5cGUpLlxuICAgICAqXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBSZXR1cm5zIGEge0BsaW5rIG5nLiRxIHByb21pc2V9IG9iamVjdCB3aXRoIHRoZVxuICAgICAqICAgc3RhbmRhcmQgYHRoZW5gIG1ldGhvZCBhbmQgdHdvIGh0dHAgc3BlY2lmaWMgbWV0aG9kczogYHN1Y2Nlc3NgIGFuZCBgZXJyb3JgLiBUaGUgYHRoZW5gXG4gICAgICogICBtZXRob2QgdGFrZXMgdHdvIGFyZ3VtZW50cyBhIHN1Y2Nlc3MgYW5kIGFuIGVycm9yIGNhbGxiYWNrIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHdpdGggYVxuICAgICAqICAgcmVzcG9uc2Ugb2JqZWN0LiBUaGUgYHN1Y2Nlc3NgIGFuZCBgZXJyb3JgIG1ldGhvZHMgdGFrZSBhIHNpbmdsZSBhcmd1bWVudCAtIGEgZnVuY3Rpb24gdGhhdFxuICAgICAqICAgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgcmVxdWVzdCBzdWNjZWVkcyBvciBmYWlscyByZXNwZWN0aXZlbHkuIFRoZSBhcmd1bWVudHMgcGFzc2VkIGludG9cbiAgICAgKiAgIHRoZXNlIGZ1bmN0aW9ucyBhcmUgZGVzdHJ1Y3R1cmVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXNwb25zZSBvYmplY3QgcGFzc2VkIGludG8gdGhlXG4gICAgICogICBgdGhlbmAgbWV0aG9kLiBUaGUgcmVzcG9uc2Ugb2JqZWN0IGhhcyB0aGVzZSBwcm9wZXJ0aWVzOlxuICAgICAqXG4gICAgICogICAtICoqZGF0YSoqIOKAkyBge3N0cmluZ3xPYmplY3R9YCDigJMgVGhlIHJlc3BvbnNlIGJvZHkgdHJhbnNmb3JtZWQgd2l0aCB0aGUgdHJhbnNmb3JtXG4gICAgICogICAgIGZ1bmN0aW9ucy5cbiAgICAgKiAgIC0gKipzdGF0dXMqKiDigJMgYHtudW1iZXJ9YCDigJMgSFRUUCBzdGF0dXMgY29kZSBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICogICAtICoqaGVhZGVycyoqIOKAkyBge2Z1bmN0aW9uKFtoZWFkZXJOYW1lXSl9YCDigJMgSGVhZGVyIGdldHRlciBmdW5jdGlvbi5cbiAgICAgKiAgIC0gKipjb25maWcqKiDigJMgYHtPYmplY3R9YCDigJMgVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHRoYXQgd2FzIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHJlcXVlc3QuXG4gICAgICogICAtICoqc3RhdHVzVGV4dCoqIOKAkyBge3N0cmluZ31gIOKAkyBIVFRQIHN0YXR1cyB0ZXh0IG9mIHRoZSByZXNwb25zZS5cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE9iamVjdD59IHBlbmRpbmdSZXF1ZXN0cyBBcnJheSBvZiBjb25maWcgb2JqZWN0cyBmb3IgY3VycmVudGx5IHBlbmRpbmdcbiAgICAgKiAgIHJlcXVlc3RzLiBUaGlzIGlzIHByaW1hcmlseSBtZWFudCB0byBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG48ZXhhbXBsZSBtb2R1bGU9XCJodHRwRXhhbXBsZVwiPlxuPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgPGRpdiBuZy1jb250cm9sbGVyPVwiRmV0Y2hDb250cm9sbGVyXCI+XG4gICAgPHNlbGVjdCBuZy1tb2RlbD1cIm1ldGhvZFwiPlxuICAgICAgPG9wdGlvbj5HRVQ8L29wdGlvbj5cbiAgICAgIDxvcHRpb24+SlNPTlA8L29wdGlvbj5cbiAgICA8L3NlbGVjdD5cbiAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVybFwiIHNpemU9XCI4MFwiLz5cbiAgICA8YnV0dG9uIGlkPVwiZmV0Y2hidG5cIiBuZy1jbGljaz1cImZldGNoKClcIj5mZXRjaDwvYnV0dG9uPjxicj5cbiAgICA8YnV0dG9uIGlkPVwic2FtcGxlZ2V0YnRuXCIgbmctY2xpY2s9XCJ1cGRhdGVNb2RlbCgnR0VUJywgJ2h0dHAtaGVsbG8uaHRtbCcpXCI+U2FtcGxlIEdFVDwvYnV0dG9uPlxuICAgIDxidXR0b24gaWQ9XCJzYW1wbGVqc29ucGJ0blwiXG4gICAgICBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdKU09OUCcsXG4gICAgICAgICAgICAgICAgICAgICdodHRwczovL2FuZ3VsYXJqcy5vcmcvZ3JlZXQucGhwP2NhbGxiYWNrPUpTT05fQ0FMTEJBQ0smbmFtZT1TdXBlciUyMEhlcm8nKVwiPlxuICAgICAgU2FtcGxlIEpTT05QXG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiBpZD1cImludmFsaWRqc29ucGJ0blwiXG4gICAgICBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdKU09OUCcsICdodHRwczovL2FuZ3VsYXJqcy5vcmcvZG9lc250ZXhpc3QmY2FsbGJhY2s9SlNPTl9DQUxMQkFDSycpXCI+XG4gICAgICAgIEludmFsaWQgSlNPTlBcbiAgICAgIDwvYnV0dG9uPlxuICAgIDxwcmU+aHR0cCBzdGF0dXMgY29kZToge3tzdGF0dXN9fTwvcHJlPlxuICAgIDxwcmU+aHR0cCByZXNwb25zZSBkYXRhOiB7e2RhdGF9fTwvcHJlPlxuICA8L2Rpdj5cbjwvZmlsZT5cbjxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgYW5ndWxhci5tb2R1bGUoJ2h0dHBFeGFtcGxlJywgW10pXG4gICAgLmNvbnRyb2xsZXIoJ0ZldGNoQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJyR0ZW1wbGF0ZUNhY2hlJyxcbiAgICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICRzY29wZS5tZXRob2QgPSAnR0VUJztcbiAgICAgICAgJHNjb3BlLnVybCA9ICdodHRwLWhlbGxvLmh0bWwnO1xuXG4gICAgICAgICRzY29wZS5mZXRjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5jb2RlID0gbnVsbDtcbiAgICAgICAgICAkc2NvcGUucmVzcG9uc2UgPSBudWxsO1xuXG4gICAgICAgICAgJGh0dHAoe21ldGhvZDogJHNjb3BlLm1ldGhvZCwgdXJsOiAkc2NvcGUudXJsLCBjYWNoZTogJHRlbXBsYXRlQ2FjaGV9KS5cbiAgICAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gZGF0YSB8fCBcIlJlcXVlc3QgZmFpbGVkXCI7XG4gICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24obWV0aG9kLCB1cmwpIHtcbiAgICAgICAgICAkc2NvcGUubWV0aG9kID0gbWV0aG9kO1xuICAgICAgICAgICRzY29wZS51cmwgPSB1cmw7XG4gICAgICAgIH07XG4gICAgICB9XSk7XG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwiaHR0cC1oZWxsby5odG1sXCI+XG4gIEhlbGxvLCAkaHR0cCFcbjwvZmlsZT5cbjxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgdmFyIHN0YXR1cyA9IGVsZW1lbnQoYnkuYmluZGluZygnc3RhdHVzJykpO1xuICB2YXIgZGF0YSA9IGVsZW1lbnQoYnkuYmluZGluZygnZGF0YScpKTtcbiAgdmFyIGZldGNoQnRuID0gZWxlbWVudChieS5pZCgnZmV0Y2hidG4nKSk7XG4gIHZhciBzYW1wbGVHZXRCdG4gPSBlbGVtZW50KGJ5LmlkKCdzYW1wbGVnZXRidG4nKSk7XG4gIHZhciBzYW1wbGVKc29ucEJ0biA9IGVsZW1lbnQoYnkuaWQoJ3NhbXBsZWpzb25wYnRuJykpO1xuICB2YXIgaW52YWxpZEpzb25wQnRuID0gZWxlbWVudChieS5pZCgnaW52YWxpZGpzb25wYnRuJykpO1xuXG4gIGl0KCdzaG91bGQgbWFrZSBhbiB4aHIgR0VUIHJlcXVlc3QnLCBmdW5jdGlvbigpIHtcbiAgICBzYW1wbGVHZXRCdG4uY2xpY2soKTtcbiAgICBmZXRjaEJ0bi5jbGljaygpO1xuICAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcyMDAnKTtcbiAgICBleHBlY3QoZGF0YS5nZXRUZXh0KCkpLnRvTWF0Y2goL0hlbGxvLCBcXCRodHRwIS8pO1xuICB9KTtcblxuLy8gQ29tbWVudGVkIG91dCBkdWUgdG8gZmxha2VzLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTE4NVxuLy8gaXQoJ3Nob3VsZCBtYWtlIGEgSlNPTlAgcmVxdWVzdCB0byBhbmd1bGFyanMub3JnJywgZnVuY3Rpb24oKSB7XG4vLyAgIHNhbXBsZUpzb25wQnRuLmNsaWNrKCk7XG4vLyAgIGZldGNoQnRuLmNsaWNrKCk7XG4vLyAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcyMDAnKTtcbi8vICAgZXhwZWN0KGRhdGEuZ2V0VGV4dCgpKS50b01hdGNoKC9TdXBlciBIZXJvIS8pO1xuLy8gfSk7XG5cbiAgaXQoJ3Nob3VsZCBtYWtlIEpTT05QIHJlcXVlc3QgdG8gaW52YWxpZCBVUkwgYW5kIGludm9rZSB0aGUgZXJyb3IgaGFuZGxlcicsXG4gICAgICBmdW5jdGlvbigpIHtcbiAgICBpbnZhbGlkSnNvbnBCdG4uY2xpY2soKTtcbiAgICBmZXRjaEJ0bi5jbGljaygpO1xuICAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcwJyk7XG4gICAgZXhwZWN0KGRhdGEuZ2V0VGV4dCgpKS50b01hdGNoKCdSZXF1ZXN0IGZhaWxlZCcpO1xuICB9KTtcbjwvZmlsZT5cbjwvZXhhbXBsZT5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAkaHR0cChyZXF1ZXN0Q29uZmlnKSB7XG5cbiAgICAgIGlmICghYW5ndWxhci5pc09iamVjdChyZXF1ZXN0Q29uZmlnKSkge1xuICAgICAgICB0aHJvdyBtaW5FcnIoJyRodHRwJykoJ2JhZHJlcScsICdIdHRwIHJlcXVlc3QgY29uZmlndXJhdGlvbiBtdXN0IGJlIGFuIG9iamVjdC4gIFJlY2VpdmVkOiB7MH0nLCByZXF1ZXN0Q29uZmlnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbmZpZyA9IGV4dGVuZCh7XG4gICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3QsXG4gICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBkZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgfSwgcmVxdWVzdENvbmZpZyk7XG5cbiAgICAgIGNvbmZpZy5oZWFkZXJzID0gbWVyZ2VIZWFkZXJzKHJlcXVlc3RDb25maWcpO1xuICAgICAgY29uZmlnLm1ldGhvZCA9IHVwcGVyY2FzZShjb25maWcubWV0aG9kKTtcblxuICAgICAgdmFyIHNlcnZlclJlcXVlc3QgPSBmdW5jdGlvbihjb25maWcpIHtcbiAgICAgICAgdmFyIGhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcbiAgICAgICAgdmFyIHJlcURhdGEgPSB0cmFuc2Zvcm1EYXRhKGNvbmZpZy5kYXRhLCBoZWFkZXJzR2V0dGVyKGhlYWRlcnMpLCB1bmRlZmluZWQsIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0KTtcblxuICAgICAgICAvLyBzdHJpcCBjb250ZW50LXR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHJlcURhdGEpKSB7XG4gICAgICAgICAgZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbih2YWx1ZSwgaGVhZGVyKSB7XG4gICAgICAgICAgICBpZiAobG93ZXJjYXNlKGhlYWRlcikgPT09ICdjb250ZW50LXR5cGUnKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbaGVhZGVyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSAmJiAhaXNVbmRlZmluZWQoZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgICAgIGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgPSBkZWZhdWx0cy53aXRoQ3JlZGVudGlhbHM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZW5kIHJlcXVlc3RcbiAgICAgICAgcmV0dXJuIHNlbmRSZXEoY29uZmlnLCByZXFEYXRhKS50aGVuKHRyYW5zZm9ybVJlc3BvbnNlLCB0cmFuc2Zvcm1SZXNwb25zZSk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgY2hhaW4gPSBbc2VydmVyUmVxdWVzdCwgdW5kZWZpbmVkXTtcbiAgICAgIHZhciBwcm9taXNlID0gJHEud2hlbihjb25maWcpO1xuXG4gICAgICAvLyBhcHBseSBpbnRlcmNlcHRvcnNcbiAgICAgIGZvckVhY2gocmV2ZXJzZWRJbnRlcmNlcHRvcnMsIGZ1bmN0aW9uKGludGVyY2VwdG9yKSB7XG4gICAgICAgIGlmIChpbnRlcmNlcHRvci5yZXF1ZXN0IHx8IGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcikge1xuICAgICAgICAgIGNoYWluLnVuc2hpZnQoaW50ZXJjZXB0b3IucmVxdWVzdCwgaW50ZXJjZXB0b3IucmVxdWVzdEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZXJjZXB0b3IucmVzcG9uc2UgfHwgaW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvcikge1xuICAgICAgICAgIGNoYWluLnB1c2goaW50ZXJjZXB0b3IucmVzcG9uc2UsIGludGVyY2VwdG9yLnJlc3BvbnNlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgd2hpbGUgKGNoYWluLmxlbmd0aCkge1xuICAgICAgICB2YXIgdGhlbkZuID0gY2hhaW4uc2hpZnQoKTtcbiAgICAgICAgdmFyIHJlamVjdEZuID0gY2hhaW4uc2hpZnQoKTtcblxuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKHRoZW5GbiwgcmVqZWN0Rm4pO1xuICAgICAgfVxuXG4gICAgICBwcm9taXNlLnN1Y2Nlc3MgPSBmdW5jdGlvbihmbikge1xuICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICBmbihyZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmhlYWRlcnMsIGNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH07XG5cbiAgICAgIHByb21pc2UuZXJyb3IgPSBmdW5jdGlvbihmbikge1xuICAgICAgICBwcm9taXNlLnRoZW4obnVsbCwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICBmbihyZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmhlYWRlcnMsIGNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuXG4gICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICAvLyBtYWtlIGEgY29weSBzaW5jZSB0aGUgcmVzcG9uc2UgbXVzdCBiZSBjYWNoZWFibGVcbiAgICAgICAgdmFyIHJlc3AgPSBleHRlbmQoe30sIHJlc3BvbnNlKTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcC5kYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNwLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLnN0YXR1cywgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGlzU3VjY2VzcyhyZXNwb25zZS5zdGF0dXMpKVxuICAgICAgICAgID8gcmVzcFxuICAgICAgICAgIDogJHEucmVqZWN0KHJlc3ApO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBleGVjdXRlSGVhZGVyRm5zKGhlYWRlcnMpIHtcbiAgICAgICAgdmFyIGhlYWRlckNvbnRlbnQsIHByb2Nlc3NlZEhlYWRlcnMgPSB7fTtcblxuICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKGhlYWRlckZuLCBoZWFkZXIpIHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihoZWFkZXJGbikpIHtcbiAgICAgICAgICAgIGhlYWRlckNvbnRlbnQgPSBoZWFkZXJGbigpO1xuICAgICAgICAgICAgaWYgKGhlYWRlckNvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJGbjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9jZXNzZWRIZWFkZXJzO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBtZXJnZUhlYWRlcnMoY29uZmlnKSB7XG4gICAgICAgIHZhciBkZWZIZWFkZXJzID0gZGVmYXVsdHMuaGVhZGVycyxcbiAgICAgICAgICAgIHJlcUhlYWRlcnMgPSBleHRlbmQoe30sIGNvbmZpZy5oZWFkZXJzKSxcbiAgICAgICAgICAgIGRlZkhlYWRlck5hbWUsIGxvd2VyY2FzZURlZkhlYWRlck5hbWUsIHJlcUhlYWRlck5hbWU7XG5cbiAgICAgICAgZGVmSGVhZGVycyA9IGV4dGVuZCh7fSwgZGVmSGVhZGVycy5jb21tb24sIGRlZkhlYWRlcnNbbG93ZXJjYXNlKGNvbmZpZy5tZXRob2QpXSk7XG5cbiAgICAgICAgLy8gdXNpbmcgZm9yLWluIGluc3RlYWQgb2YgZm9yRWFjaCB0byBhdm9pZCB1bmVjZXNzYXJ5IGl0ZXJhdGlvbiBhZnRlciBoZWFkZXIgaGFzIGJlZW4gZm91bmRcbiAgICAgICAgZGVmYXVsdEhlYWRlcnNJdGVyYXRpb246XG4gICAgICAgIGZvciAoZGVmSGVhZGVyTmFtZSBpbiBkZWZIZWFkZXJzKSB7XG4gICAgICAgICAgbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSA9IGxvd2VyY2FzZShkZWZIZWFkZXJOYW1lKTtcblxuICAgICAgICAgIGZvciAocmVxSGVhZGVyTmFtZSBpbiByZXFIZWFkZXJzKSB7XG4gICAgICAgICAgICBpZiAobG93ZXJjYXNlKHJlcUhlYWRlck5hbWUpID09PSBsb3dlcmNhc2VEZWZIZWFkZXJOYW1lKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlIGRlZmF1bHRIZWFkZXJzSXRlcmF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlcUhlYWRlcnNbZGVmSGVhZGVyTmFtZV0gPSBkZWZIZWFkZXJzW2RlZkhlYWRlck5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXhlY3V0ZSBpZiBoZWFkZXIgdmFsdWUgaXMgYSBmdW5jdGlvbiBmb3IgbWVyZ2VkIGhlYWRlcnNcbiAgICAgICAgcmV0dXJuIGV4ZWN1dGVIZWFkZXJGbnMocmVxSGVhZGVycyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJGh0dHAucGVuZGluZ1JlcXVlc3RzID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGh0dHAjZ2V0XG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgR0VUYCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2RlbGV0ZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYERFTEVURWAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaHR0cCNoZWFkXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgSEVBRGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaHR0cCNqc29ucFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYEpTT05QYCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3QuXG4gICAgICogICAgICAgICAgICAgICAgICAgICBUaGUgbmFtZSBvZiB0aGUgY2FsbGJhY2sgc2hvdWxkIGJlIHRoZSBzdHJpbmcgYEpTT05fQ0FMTEJBQ0tgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XG4gICAgICovXG4gICAgY3JlYXRlU2hvcnRNZXRob2RzKCdnZXQnLCAnZGVsZXRlJywgJ2hlYWQnLCAnanNvbnAnKTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaHR0cCNwb3N0XG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgUE9TVGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBkYXRhIFJlcXVlc3QgY29udGVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGh0dHAjcHV0XG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgUFVUYCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IGRhdGEgUmVxdWVzdCBjb250ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcbiAgICAgKi9cblxuICAgICAvKipcbiAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgKiBAbmFtZSAkaHR0cCNwYXRjaFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBBVENIYCByZXF1ZXN0LlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxuICAgICAgKiBAcGFyYW0geyp9IGRhdGEgUmVxdWVzdCBjb250ZW50XG4gICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxuICAgICAgKi9cbiAgICBjcmVhdGVTaG9ydE1ldGhvZHNXaXRoRGF0YSgncG9zdCcsICdwdXQnLCAncGF0Y2gnKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgICAqIEBuYW1lICRodHRwI2RlZmF1bHRzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBSdW50aW1lIGVxdWl2YWxlbnQgb2YgdGhlIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzYCBwcm9wZXJ0eS4gQWxsb3dzIGNvbmZpZ3VyYXRpb24gb2ZcbiAgICAgICAgICogZGVmYXVsdCBoZWFkZXJzLCB3aXRoQ3JlZGVudGlhbHMgYXMgd2VsbCBhcyByZXF1ZXN0IGFuZCByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNlZSBcIlNldHRpbmcgSFRUUCBIZWFkZXJzXCIgYW5kIFwiVHJhbnNmb3JtaW5nIFJlcXVlc3RzIGFuZCBSZXNwb25zZXNcIiBzZWN0aW9ucyBhYm92ZS5cbiAgICAgICAgICovXG4gICAgJGh0dHAuZGVmYXVsdHMgPSBkZWZhdWx0cztcblxuXG4gICAgcmV0dXJuICRodHRwO1xuXG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTaG9ydE1ldGhvZHMobmFtZXMpIHtcbiAgICAgIGZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICRodHRwW25hbWVdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICAgICAgICByZXR1cm4gJGh0dHAoZXh0ZW5kKGNvbmZpZyB8fCB7fSwge1xuICAgICAgICAgICAgbWV0aG9kOiBuYW1lLFxuICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKG5hbWUpIHtcbiAgICAgIGZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICRodHRwW25hbWVdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICAgICAgICByZXR1cm4gJGh0dHAoZXh0ZW5kKGNvbmZpZyB8fCB7fSwge1xuICAgICAgICAgICAgbWV0aG9kOiBuYW1lLFxuICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBNYWtlcyB0aGUgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqICEhISBBQ0NFU1NFUyBDTE9TVVJFIFZBUlM6XG4gICAgICogJGh0dHBCYWNrZW5kLCBkZWZhdWx0cywgJGxvZywgJHJvb3RTY29wZSwgZGVmYXVsdENhY2hlLCAkaHR0cC5wZW5kaW5nUmVxdWVzdHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZW5kUmVxKGNvbmZpZywgcmVxRGF0YSkge1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKSxcbiAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSxcbiAgICAgICAgICBjYWNoZSxcbiAgICAgICAgICBjYWNoZWRSZXNwLFxuICAgICAgICAgIHJlcUhlYWRlcnMgPSBjb25maWcuaGVhZGVycyxcbiAgICAgICAgICB1cmwgPSBidWlsZFVybChjb25maWcudXJsLCBjb25maWcucGFyYW1zKTtcblxuICAgICAgJGh0dHAucGVuZGluZ1JlcXVlc3RzLnB1c2goY29uZmlnKTtcbiAgICAgIHByb21pc2UudGhlbihyZW1vdmVQZW5kaW5nUmVxLCByZW1vdmVQZW5kaW5nUmVxKTtcblxuXG4gICAgICBpZiAoKGNvbmZpZy5jYWNoZSB8fCBkZWZhdWx0cy5jYWNoZSkgJiYgY29uZmlnLmNhY2hlICE9PSBmYWxzZSAmJlxuICAgICAgICAgIChjb25maWcubWV0aG9kID09PSAnR0VUJyB8fCBjb25maWcubWV0aG9kID09PSAnSlNPTlAnKSkge1xuICAgICAgICBjYWNoZSA9IGlzT2JqZWN0KGNvbmZpZy5jYWNoZSkgPyBjb25maWcuY2FjaGVcbiAgICAgICAgICAgICAgOiBpc09iamVjdChkZWZhdWx0cy5jYWNoZSkgPyBkZWZhdWx0cy5jYWNoZVxuICAgICAgICAgICAgICA6IGRlZmF1bHRDYWNoZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGNhY2hlZFJlc3AgPSBjYWNoZS5nZXQodXJsKTtcbiAgICAgICAgaWYgKGlzRGVmaW5lZChjYWNoZWRSZXNwKSkge1xuICAgICAgICAgIGlmIChpc1Byb21pc2VMaWtlKGNhY2hlZFJlc3ApKSB7XG4gICAgICAgICAgICAvLyBjYWNoZWQgcmVxdWVzdCBoYXMgYWxyZWFkeSBiZWVuIHNlbnQsIGJ1dCB0aGVyZSBpcyBubyByZXNwb25zZSB5ZXRcbiAgICAgICAgICAgIGNhY2hlZFJlc3AudGhlbihyZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQsIHJlc29sdmVQcm9taXNlV2l0aFJlc3VsdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNlcnZpbmcgZnJvbSBjYWNoZVxuICAgICAgICAgICAgaWYgKGlzQXJyYXkoY2FjaGVkUmVzcCkpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcFsxXSwgY2FjaGVkUmVzcFswXSwgc2hhbGxvd0NvcHkoY2FjaGVkUmVzcFsyXSksIGNhY2hlZFJlc3BbM10pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcCwgMjAwLCB7fSwgJ09LJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHB1dCB0aGUgcHJvbWlzZSBmb3IgdGhlIG5vbi10cmFuc2Zvcm1lZCByZXNwb25zZSBpbnRvIGNhY2hlIGFzIGEgcGxhY2Vob2xkZXJcbiAgICAgICAgICBjYWNoZS5wdXQodXJsLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8vIGlmIHdlIHdvbid0IGhhdmUgdGhlIHJlc3BvbnNlIGluIGNhY2hlLCBzZXQgdGhlIHhzcmYgaGVhZGVycyBhbmRcbiAgICAgIC8vIHNlbmQgdGhlIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmRcbiAgICAgIGlmIChpc1VuZGVmaW5lZChjYWNoZWRSZXNwKSkge1xuICAgICAgICB2YXIgeHNyZlZhbHVlID0gdXJsSXNTYW1lT3JpZ2luKGNvbmZpZy51cmwpXG4gICAgICAgICAgICA/ICRicm93c2VyLmNvb2tpZXMoKVtjb25maWcueHNyZkNvb2tpZU5hbWUgfHwgZGVmYXVsdHMueHNyZkNvb2tpZU5hbWVdXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuICAgICAgICAgIHJlcUhlYWRlcnNbKGNvbmZpZy54c3JmSGVhZGVyTmFtZSB8fCBkZWZhdWx0cy54c3JmSGVhZGVyTmFtZSldID0geHNyZlZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgJGh0dHBCYWNrZW5kKGNvbmZpZy5tZXRob2QsIHVybCwgcmVxRGF0YSwgZG9uZSwgcmVxSGVhZGVycywgY29uZmlnLnRpbWVvdXQsXG4gICAgICAgICAgICBjb25maWcud2l0aENyZWRlbnRpYWxzLCBjb25maWcucmVzcG9uc2VUeXBlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb21pc2U7XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBDYWxsYmFjayByZWdpc3RlcmVkIHRvICRodHRwQmFja2VuZCgpOlxuICAgICAgICogIC0gY2FjaGVzIHRoZSByZXNwb25zZSBpZiBkZXNpcmVkXG4gICAgICAgKiAgLSByZXNvbHZlcyB0aGUgcmF3ICRodHRwIHByb21pc2VcbiAgICAgICAqICAtIGNhbGxzICRhcHBseVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBkb25lKHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQpIHtcbiAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgaWYgKGlzU3VjY2VzcyhzdGF0dXMpKSB7XG4gICAgICAgICAgICBjYWNoZS5wdXQodXJsLCBbc3RhdHVzLCByZXNwb25zZSwgcGFyc2VIZWFkZXJzKGhlYWRlcnNTdHJpbmcpLCBzdGF0dXNUZXh0XSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBwcm9taXNlIGZyb20gdGhlIGNhY2hlXG4gICAgICAgICAgICBjYWNoZS5yZW1vdmUodXJsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlSHR0cFByb21pc2UoKSB7XG4gICAgICAgICAgcmVzb2x2ZVByb21pc2UocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVyc1N0cmluZywgc3RhdHVzVGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlQXBwbHlBc3luYykge1xuICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5QXN5bmMocmVzb2x2ZUh0dHBQcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlSHR0cFByb21pc2UoKTtcbiAgICAgICAgICBpZiAoISRyb290U2NvcGUuJCRwaGFzZSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8qKlxuICAgICAgICogUmVzb2x2ZXMgdGhlIHJhdyAkaHR0cCBwcm9taXNlLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzLCBzdGF0dXNUZXh0KSB7XG4gICAgICAgIC8vIG5vcm1hbGl6ZSBpbnRlcm5hbCBzdGF0dXNlcyB0byAwXG4gICAgICAgIHN0YXR1cyA9IE1hdGgubWF4KHN0YXR1cywgMCk7XG5cbiAgICAgICAgKGlzU3VjY2VzcyhzdGF0dXMpID8gZGVmZXJyZWQucmVzb2x2ZSA6IGRlZmVycmVkLnJlamVjdCkoe1xuICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLFxuICAgICAgICAgIHN0YXR1czogc3RhdHVzLFxuICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNHZXR0ZXIoaGVhZGVycyksXG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgICAgc3RhdHVzVGV4dDogc3RhdHVzVGV4dFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVzb2x2ZVByb21pc2VXaXRoUmVzdWx0KHJlc3VsdCkge1xuICAgICAgICByZXNvbHZlUHJvbWlzZShyZXN1bHQuZGF0YSwgcmVzdWx0LnN0YXR1cywgc2hhbGxvd0NvcHkocmVzdWx0LmhlYWRlcnMoKSksIHJlc3VsdC5zdGF0dXNUZXh0KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVtb3ZlUGVuZGluZ1JlcSgpIHtcbiAgICAgICAgdmFyIGlkeCA9ICRodHRwLnBlbmRpbmdSZXF1ZXN0cy5pbmRleE9mKGNvbmZpZyk7XG4gICAgICAgIGlmIChpZHggIT09IC0xKSAkaHR0cC5wZW5kaW5nUmVxdWVzdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBidWlsZFVybCh1cmwsIHBhcmFtcykge1xuICAgICAgaWYgKCFwYXJhbXMpIHJldHVybiB1cmw7XG4gICAgICB2YXIgcGFydHMgPSBbXTtcbiAgICAgIGZvckVhY2hTb3J0ZWQocGFyYW1zLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCBpc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybjtcbiAgICAgICAgaWYgKCFpc0FycmF5KHZhbHVlKSkgdmFsdWUgPSBbdmFsdWVdO1xuXG4gICAgICAgIGZvckVhY2godmFsdWUsIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICBpZiAoaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgIGlmIChpc0RhdGUodikpIHtcbiAgICAgICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHYgPSB0b0pzb24odik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcnRzLnB1c2goZW5jb2RlVXJpUXVlcnkoa2V5KSArICc9JyArXG4gICAgICAgICAgICAgICAgICAgICBlbmNvZGVVcmlRdWVyeSh2KSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBpZiAocGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgICB1cmwgKz0gKCh1cmwuaW5kZXhPZignPycpID09IC0xKSA/ICc/JyA6ICcmJykgKyBwYXJ0cy5qb2luKCcmJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgfV07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVhocigpIHtcbiAgICByZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmRcbiAqIEByZXF1aXJlcyAkd2luZG93XG4gKiBAcmVxdWlyZXMgJGRvY3VtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIVFRQIGJhY2tlbmQgdXNlZCBieSB0aGUge0BsaW5rIG5nLiRodHRwIHNlcnZpY2V9IHRoYXQgZGVsZWdhdGVzIHRvXG4gKiBYTUxIdHRwUmVxdWVzdCBvYmplY3Qgb3IgSlNPTlAgYW5kIGRlYWxzIHdpdGggYnJvd3NlciBpbmNvbXBhdGliaWxpdGllcy5cbiAqXG4gKiBZb3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gdXNlIHRoaXMgc2VydmljZSBkaXJlY3RseSwgaW5zdGVhZCB1c2UgdGhlIGhpZ2hlci1sZXZlbCBhYnN0cmFjdGlvbnM6XG4gKiB7QGxpbmsgbmcuJGh0dHAgJGh0dHB9IG9yIHtAbGluayBuZ1Jlc291cmNlLiRyZXNvdXJjZSAkcmVzb3VyY2V9LlxuICpcbiAqIER1cmluZyB0ZXN0aW5nIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgc3dhcHBlZCB3aXRoIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kIG1vY2tcbiAqICRodHRwQmFja2VuZH0gd2hpY2ggY2FuIGJlIHRyYWluZWQgd2l0aCByZXNwb25zZXMuXG4gKi9cbmZ1bmN0aW9uICRIdHRwQmFja2VuZFByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyRicm93c2VyJywgJyR3aW5kb3cnLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJGJyb3dzZXIsICR3aW5kb3csICRkb2N1bWVudCkge1xuICAgIHJldHVybiBjcmVhdGVIdHRwQmFja2VuZCgkYnJvd3NlciwgY3JlYXRlWGhyLCAkYnJvd3Nlci5kZWZlciwgJHdpbmRvdy5hbmd1bGFyLmNhbGxiYWNrcywgJGRvY3VtZW50WzBdKTtcbiAgfV07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUh0dHBCYWNrZW5kKCRicm93c2VyLCBjcmVhdGVYaHIsICRicm93c2VyRGVmZXIsIGNhbGxiYWNrcywgcmF3RG9jdW1lbnQpIHtcbiAgLy8gVE9ETyh2b2p0YSk6IGZpeCB0aGUgc2lnbmF0dXJlXG4gIHJldHVybiBmdW5jdGlvbihtZXRob2QsIHVybCwgcG9zdCwgY2FsbGJhY2ssIGhlYWRlcnMsIHRpbWVvdXQsIHdpdGhDcmVkZW50aWFscywgcmVzcG9uc2VUeXBlKSB7XG4gICAgJGJyb3dzZXIuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCgpO1xuICAgIHVybCA9IHVybCB8fCAkYnJvd3Nlci51cmwoKTtcblxuICAgIGlmIChsb3dlcmNhc2UobWV0aG9kKSA9PSAnanNvbnAnKSB7XG4gICAgICB2YXIgY2FsbGJhY2tJZCA9ICdfJyArIChjYWxsYmFja3MuY291bnRlcisrKS50b1N0cmluZygzNik7XG4gICAgICBjYWxsYmFja3NbY2FsbGJhY2tJZF0gPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNhbGxiYWNrc1tjYWxsYmFja0lkXS5kYXRhID0gZGF0YTtcbiAgICAgICAgY2FsbGJhY2tzW2NhbGxiYWNrSWRdLmNhbGxlZCA9IHRydWU7XG4gICAgICB9O1xuXG4gICAgICB2YXIganNvbnBEb25lID0ganNvbnBSZXEodXJsLnJlcGxhY2UoJ0pTT05fQ0FMTEJBQ0snLCAnYW5ndWxhci5jYWxsYmFja3MuJyArIGNhbGxiYWNrSWQpLFxuICAgICAgICAgIGNhbGxiYWNrSWQsIGZ1bmN0aW9uKHN0YXR1cywgdGV4dCkge1xuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIHN0YXR1cywgY2FsbGJhY2tzW2NhbGxiYWNrSWRdLmRhdGEsIFwiXCIsIHRleHQpO1xuICAgICAgICBjYWxsYmFja3NbY2FsbGJhY2tJZF0gPSBub29wO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcblxuICAgICAgdmFyIHhociA9IGNyZWF0ZVhocigpO1xuXG4gICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIHJlcXVlc3RMb2FkZWQoKSB7XG4gICAgICAgIHZhciBzdGF0dXNUZXh0ID0geGhyLnN0YXR1c1RleHQgfHwgJyc7XG5cbiAgICAgICAgLy8gcmVzcG9uc2VUZXh0IGlzIHRoZSBvbGQtc2Nob29sIHdheSBvZiByZXRyaWV2aW5nIHJlc3BvbnNlIChzdXBwb3J0ZWQgYnkgSUU4ICYgOSlcbiAgICAgICAgLy8gcmVzcG9uc2UvcmVzcG9uc2VUeXBlIHByb3BlcnRpZXMgd2VyZSBpbnRyb2R1Y2VkIGluIFhIUiBMZXZlbDIgc3BlYyAoc3VwcG9ydGVkIGJ5IElFMTApXG4gICAgICAgIHZhciByZXNwb25zZSA9ICgncmVzcG9uc2UnIGluIHhocikgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0O1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBJRTkgYnVnIChodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xNDUwKVxuICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHhoci5zdGF0dXM7XG5cbiAgICAgICAgLy8gZml4IHN0YXR1cyBjb2RlIHdoZW4gaXQgaXMgMCAoMCBzdGF0dXMgaXMgdW5kb2N1bWVudGVkKS5cbiAgICAgICAgLy8gT2NjdXJzIHdoZW4gYWNjZXNzaW5nIGZpbGUgcmVzb3VyY2VzIG9yIG9uIEFuZHJvaWQgNC4xIHN0b2NrIGJyb3dzZXJcbiAgICAgICAgLy8gd2hpbGUgcmV0cmlldmluZyBmaWxlcyBmcm9tIGFwcGxpY2F0aW9uIGNhY2hlLlxuICAgICAgICBpZiAoc3RhdHVzID09PSAwKSB7XG4gICAgICAgICAgc3RhdHVzID0gcmVzcG9uc2UgPyAyMDAgOiB1cmxSZXNvbHZlKHVybCkucHJvdG9jb2wgPT0gJ2ZpbGUnID8gNDA0IDogMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjayxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICAgICAgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLFxuICAgICAgICAgICAgc3RhdHVzVGV4dCk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgcmVxdWVzdEVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFRoZSByZXNwb25zZSBpcyBhbHdheXMgZW1wdHlcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8veGhyLnNwZWMud2hhdHdnLm9yZy8jcmVxdWVzdC1lcnJvci1zdGVwcyBhbmQgaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI2NvbmNlcHQtbmV0d29yay1lcnJvclxuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIC0xLCBudWxsLCBudWxsLCAnJyk7XG4gICAgICB9O1xuXG4gICAgICB4aHIub25lcnJvciA9IHJlcXVlc3RFcnJvcjtcbiAgICAgIHhoci5vbmFib3J0ID0gcmVxdWVzdEVycm9yO1xuXG4gICAgICBpZiAod2l0aENyZWRlbnRpYWxzKSB7XG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzcG9uc2VUeXBlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIFdlYktpdCBhZGRlZCBzdXBwb3J0IGZvciB0aGUganNvbiByZXNwb25zZVR5cGUgdmFsdWUgb24gMDkvMDMvMjAxM1xuICAgICAgICAgIC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD03MzY0OC4gVmVyc2lvbnMgb2YgU2FmYXJpIHByaW9yIHRvIDcgYXJlXG4gICAgICAgICAgLy8ga25vd24gdG8gdGhyb3cgd2hlbiBzZXR0aW5nIHRoZSB2YWx1ZSBcImpzb25cIiBhcyB0aGUgcmVzcG9uc2UgdHlwZS4gT3RoZXIgb2xkZXJcbiAgICAgICAgICAvLyBicm93c2VycyBpbXBsZW1lbnRpbmcgdGhlIHJlc3BvbnNlVHlwZVxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gVGhlIGpzb24gcmVzcG9uc2UgdHlwZSBjYW4gYmUgaWdub3JlZCBpZiBub3Qgc3VwcG9ydGVkLCBiZWNhdXNlIEpTT04gcGF5bG9hZHMgYXJlXG4gICAgICAgICAgLy8gcGFyc2VkIG9uIHRoZSBjbGllbnQtc2lkZSByZWdhcmRsZXNzLlxuICAgICAgICAgIGlmIChyZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgeGhyLnNlbmQocG9zdCB8fCBudWxsKTtcbiAgICB9XG5cbiAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgIHZhciB0aW1lb3V0SWQgPSAkYnJvd3NlckRlZmVyKHRpbWVvdXRSZXF1ZXN0LCB0aW1lb3V0KTtcbiAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZUxpa2UodGltZW91dCkpIHtcbiAgICAgIHRpbWVvdXQudGhlbih0aW1lb3V0UmVxdWVzdCk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiB0aW1lb3V0UmVxdWVzdCgpIHtcbiAgICAgIGpzb25wRG9uZSAmJiBqc29ucERvbmUoKTtcbiAgICAgIHhociAmJiB4aHIuYWJvcnQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQpIHtcbiAgICAgIC8vIGNhbmNlbCB0aW1lb3V0IGFuZCBzdWJzZXF1ZW50IHRpbWVvdXQgcHJvbWlzZSByZXNvbHV0aW9uXG4gICAgICBpZiAodGltZW91dElkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgJGJyb3dzZXJEZWZlci5jYW5jZWwodGltZW91dElkKTtcbiAgICAgIH1cbiAgICAgIGpzb25wRG9uZSA9IHhociA9IG51bGw7XG5cbiAgICAgIGNhbGxiYWNrKHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQpO1xuICAgICAgJGJyb3dzZXIuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24ganNvbnBSZXEodXJsLCBjYWxsYmFja0lkLCBkb25lKSB7XG4gICAgLy8gd2UgY2FuJ3QgdXNlIGpRdWVyeS9qcUxpdGUgaGVyZSBiZWNhdXNlIGpRdWVyeSBkb2VzIGNyYXp5IHNoaXQgd2l0aCBzY3JpcHQgZWxlbWVudHMsIGUuZy46XG4gICAgLy8gLSBmZXRjaGVzIGxvY2FsIHNjcmlwdHMgdmlhIFhIUiBhbmQgZXZhbHMgdGhlbVxuICAgIC8vIC0gYWRkcyBhbmQgaW1tZWRpYXRlbHkgcmVtb3ZlcyBzY3JpcHQgZWxlbWVudHMgZnJvbSB0aGUgZG9jdW1lbnRcbiAgICB2YXIgc2NyaXB0ID0gcmF3RG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JyksIGNhbGxiYWNrID0gbnVsbDtcbiAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG4gICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuXG4gICAgY2FsbGJhY2sgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lckZuKHNjcmlwdCwgXCJsb2FkXCIsIGNhbGxiYWNrKTtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihzY3JpcHQsIFwiZXJyb3JcIiwgY2FsbGJhY2spO1xuICAgICAgcmF3RG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgIHZhciBzdGF0dXMgPSAtMTtcbiAgICAgIHZhciB0ZXh0ID0gXCJ1bmtub3duXCI7XG5cbiAgICAgIGlmIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJsb2FkXCIgJiYgIWNhbGxiYWNrc1tjYWxsYmFja0lkXS5jYWxsZWQpIHtcbiAgICAgICAgICBldmVudCA9IHsgdHlwZTogXCJlcnJvclwiIH07XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCA9IGV2ZW50LnR5cGU7XG4gICAgICAgIHN0YXR1cyA9IGV2ZW50LnR5cGUgPT09IFwiZXJyb3JcIiA/IDQwNCA6IDIwMDtcbiAgICAgIH1cblxuICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgZG9uZShzdGF0dXMsIHRleHQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBhZGRFdmVudExpc3RlbmVyRm4oc2NyaXB0LCBcImxvYWRcIiwgY2FsbGJhY2spO1xuICAgIGFkZEV2ZW50TGlzdGVuZXJGbihzY3JpcHQsIFwiZXJyb3JcIiwgY2FsbGJhY2spO1xuICAgIHJhd0RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICByZXR1cm4gY2FsbGJhY2s7XG4gIH1cbn1cblxudmFyICRpbnRlcnBvbGF0ZU1pbkVyciA9IG1pbkVycignJGludGVycG9sYXRlJyk7XG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkaW50ZXJwb2xhdGVQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHRoZSBpbnRlcnBvbGF0aW9uIG1hcmt1cC4gRGVmYXVsdHMgdG8gYHt7YCBhbmQgYH19YC5cbiAqXG4gKiBAZXhhbXBsZVxuPGV4YW1wbGUgbW9kdWxlPVwiY3VzdG9tSW50ZXJwb2xhdGlvbkFwcFwiPlxuPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbjxzY3JpcHQ+XG4gIHZhciBjdXN0b21JbnRlcnBvbGF0aW9uQXBwID0gYW5ndWxhci5tb2R1bGUoJ2N1c3RvbUludGVycG9sYXRpb25BcHAnLCBbXSk7XG5cbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb25maWcoZnVuY3Rpb24oJGludGVycG9sYXRlUHJvdmlkZXIpIHtcbiAgICAkaW50ZXJwb2xhdGVQcm92aWRlci5zdGFydFN5bWJvbCgnLy8nKTtcbiAgICAkaW50ZXJwb2xhdGVQcm92aWRlci5lbmRTeW1ib2woJy8vJyk7XG4gIH0pO1xuXG5cbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb250cm9sbGVyKCdEZW1vQ29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5sYWJlbCA9IFwiVGhpcyBiaW5kaW5nIGlzIGJyb3VnaHQgeW91IGJ5IC8vIGludGVycG9sYXRpb24gc3ltYm9scy5cIjtcbiAgfSk7XG48L3NjcmlwdD5cbjxkaXYgbmctYXBwPVwiQXBwXCIgbmctY29udHJvbGxlcj1cIkRlbW9Db250cm9sbGVyIGFzIGRlbW9cIj5cbiAgICAvL2RlbW8ubGFiZWwvL1xuPC9kaXY+XG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gIGl0KCdzaG91bGQgaW50ZXJwb2xhdGUgYmluZGluZyB3aXRoIGN1c3RvbSBzeW1ib2xzJywgZnVuY3Rpb24oKSB7XG4gICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnZGVtby5sYWJlbCcpKS5nZXRUZXh0KCkpLnRvQmUoJ1RoaXMgYmluZGluZyBpcyBicm91Z2h0IHlvdSBieSAvLyBpbnRlcnBvbGF0aW9uIHN5bWJvbHMuJyk7XG4gIH0pO1xuPC9maWxlPlxuPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiAkSW50ZXJwb2xhdGVQcm92aWRlcigpIHtcbiAgdmFyIHN0YXJ0U3ltYm9sID0gJ3t7JztcbiAgdmFyIGVuZFN5bWJvbCA9ICd9fSc7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGludGVycG9sYXRlUHJvdmlkZXIjc3RhcnRTeW1ib2xcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFN5bWJvbCB0byBkZW5vdGUgc3RhcnQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYHt7YC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBuZXcgdmFsdWUgdG8gc2V0IHRoZSBzdGFydGluZyBzeW1ib2wgdG8uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUgc3ltYm9sIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXG4gICAqL1xuICB0aGlzLnN0YXJ0U3ltYm9sID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHN0YXJ0U3ltYm9sID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN0YXJ0U3ltYm9sO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaW50ZXJwb2xhdGVQcm92aWRlciNlbmRTeW1ib2xcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIGVuZCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBgfX1gLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHZhbHVlIG5ldyB2YWx1ZSB0byBzZXQgdGhlIGVuZGluZyBzeW1ib2wgdG8uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUgc3ltYm9sIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXG4gICAqL1xuICB0aGlzLmVuZFN5bWJvbCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBlbmRTeW1ib2wgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZW5kU3ltYm9sO1xuICAgIH1cbiAgfTtcblxuXG4gIHRoaXMuJGdldCA9IFsnJHBhcnNlJywgJyRleGNlcHRpb25IYW5kbGVyJywgJyRzY2UnLCBmdW5jdGlvbigkcGFyc2UsICRleGNlcHRpb25IYW5kbGVyLCAkc2NlKSB7XG4gICAgdmFyIHN0YXJ0U3ltYm9sTGVuZ3RoID0gc3RhcnRTeW1ib2wubGVuZ3RoLFxuICAgICAgICBlbmRTeW1ib2xMZW5ndGggPSBlbmRTeW1ib2wubGVuZ3RoLFxuICAgICAgICBlc2NhcGVkU3RhcnRSZWdleHAgPSBuZXcgUmVnRXhwKHN0YXJ0U3ltYm9sLnJlcGxhY2UoLy4vZywgZXNjYXBlKSwgJ2cnKSxcbiAgICAgICAgZXNjYXBlZEVuZFJlZ2V4cCA9IG5ldyBSZWdFeHAoZW5kU3ltYm9sLnJlcGxhY2UoLy4vZywgZXNjYXBlKSwgJ2cnKTtcblxuICAgIGZ1bmN0aW9uIGVzY2FwZShjaCkge1xuICAgICAgcmV0dXJuICdcXFxcXFxcXFxcXFwnICsgY2g7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIHNlcnZpY2VcbiAgICAgKiBAbmFtZSAkaW50ZXJwb2xhdGVcbiAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHJlcXVpcmVzICRwYXJzZVxuICAgICAqIEByZXF1aXJlcyAkc2NlXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIENvbXBpbGVzIGEgc3RyaW5nIHdpdGggbWFya3VwIGludG8gYW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvbi4gVGhpcyBzZXJ2aWNlIGlzIHVzZWQgYnkgdGhlXG4gICAgICogSFRNTCB7QGxpbmsgbmcuJGNvbXBpbGUgJGNvbXBpbGV9IHNlcnZpY2UgZm9yIGRhdGEgYmluZGluZy4gU2VlXG4gICAgICoge0BsaW5rIG5nLiRpbnRlcnBvbGF0ZVByb3ZpZGVyICRpbnRlcnBvbGF0ZVByb3ZpZGVyfSBmb3IgY29uZmlndXJpbmcgdGhlXG4gICAgICogaW50ZXJwb2xhdGlvbiBtYXJrdXAuXG4gICAgICpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICB2YXIgJGludGVycG9sYXRlID0gLi4uOyAvLyBpbmplY3RlZFxuICAgICAqICAgdmFyIGV4cCA9ICRpbnRlcnBvbGF0ZSgnSGVsbG8ge3tuYW1lIHwgdXBwZXJjYXNlfX0hJyk7XG4gICAgICogICBleHBlY3QoZXhwKHtuYW1lOidBbmd1bGFyJ30pLnRvRXF1YWwoJ0hlbGxvIEFOR1VMQVIhJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBgJGludGVycG9sYXRlYCB0YWtlcyBhbiBvcHRpb25hbCBmb3VydGggYXJndW1lbnQsIGBhbGxPck5vdGhpbmdgLiBJZiBgYWxsT3JOb3RoaW5nYCBpc1xuICAgICAqIGB0cnVlYCwgdGhlIGludGVycG9sYXRpb24gZnVuY3Rpb24gd2lsbCByZXR1cm4gYHVuZGVmaW5lZGAgdW5sZXNzIGFsbCBlbWJlZGRlZCBleHByZXNzaW9uc1xuICAgICAqIGV2YWx1YXRlIHRvIGEgdmFsdWUgb3RoZXIgdGhhbiBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICB2YXIgJGludGVycG9sYXRlID0gLi4uOyAvLyBpbmplY3RlZFxuICAgICAqICAgdmFyIGNvbnRleHQgPSB7Z3JlZXRpbmc6ICdIZWxsbycsIG5hbWU6IHVuZGVmaW5lZCB9O1xuICAgICAqXG4gICAgICogICAvLyBkZWZhdWx0IFwiZm9yZ2l2aW5nXCIgbW9kZVxuICAgICAqICAgdmFyIGV4cCA9ICRpbnRlcnBvbGF0ZSgne3tncmVldGluZ319IHt7bmFtZX19IScpO1xuICAgICAqICAgZXhwZWN0KGV4cChjb250ZXh0KSkudG9FcXVhbCgnSGVsbG8gIScpO1xuICAgICAqXG4gICAgICogICAvLyBcImFsbE9yTm90aGluZ1wiIG1vZGVcbiAgICAgKiAgIGV4cCA9ICRpbnRlcnBvbGF0ZSgne3tncmVldGluZ319IHt7bmFtZX19IScsIGZhbHNlLCBudWxsLCB0cnVlKTtcbiAgICAgKiAgIGV4cGVjdChleHAoY29udGV4dCkpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgKiAgIGNvbnRleHQubmFtZSA9ICdBbmd1bGFyJztcbiAgICAgKiAgIGV4cGVjdChleHAoY29udGV4dCkpLnRvRXF1YWwoJ0hlbGxvIEFuZ3VsYXIhJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBgYWxsT3JOb3RoaW5nYCBpcyB1c2VmdWwgZm9yIGludGVycG9sYXRpbmcgVVJMcy4gYG5nU3JjYCBhbmQgYG5nU3Jjc2V0YCB1c2UgdGhpcyBiZWhhdmlvci5cbiAgICAgKlxuICAgICAqICMjIyNFc2NhcGVkIEludGVycG9sYXRpb25cbiAgICAgKiAkaW50ZXJwb2xhdGUgcHJvdmlkZXMgYSBtZWNoYW5pc20gZm9yIGVzY2FwaW5nIGludGVycG9sYXRpb24gbWFya2Vycy4gU3RhcnQgYW5kIGVuZCBtYXJrZXJzXG4gICAgICogY2FuIGJlIGVzY2FwZWQgYnkgcHJlY2VkaW5nIGVhY2ggb2YgdGhlaXIgY2hhcmFjdGVycyB3aXRoIGEgUkVWRVJTRSBTT0xJRFVTIFUrMDA1QyAoYmFja3NsYXNoKS5cbiAgICAgKiBJdCB3aWxsIGJlIHJlbmRlcmVkIGFzIGEgcmVndWxhciBzdGFydC9lbmQgbWFya2VyLCBhbmQgd2lsbCBub3QgYmUgaW50ZXJwcmV0ZWQgYXMgYW4gZXhwcmVzc2lvblxuICAgICAqIG9yIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIGVuYWJsZXMgd2ViLXNlcnZlcnMgdG8gcHJldmVudCBzY3JpcHQgaW5qZWN0aW9uIGF0dGFja3MgYW5kIGRlZmFjaW5nIGF0dGFja3MsIHRvIHNvbWVcbiAgICAgKiBkZWdyZWUsIHdoaWxlIGFsc28gZW5hYmxpbmcgY29kZSBleGFtcGxlcyB0byB3b3JrIHdpdGhvdXQgcmVseWluZyBvbiB0aGVcbiAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTm9uQmluZGFibGUgbmdOb25CaW5kYWJsZX0gZGlyZWN0aXZlLlxuICAgICAqXG4gICAgICogKipGb3Igc2VjdXJpdHkgcHVycG9zZXMsIGl0IGlzIHN0cm9uZ2x5IGVuY291cmFnZWQgdGhhdCB3ZWIgc2VydmVycyBlc2NhcGUgdXNlci1zdXBwbGllZCBkYXRhLFxuICAgICAqIHJlcGxhY2luZyBhbmdsZSBicmFja2V0cyAoJmx0OywgJmd0Oykgd2l0aCAmYW1wO2x0OyBhbmQgJmFtcDtndDsgcmVzcGVjdGl2ZWx5LCBhbmQgcmVwbGFjaW5nIGFsbFxuICAgICAqIGludGVycG9sYXRpb24gc3RhcnQvZW5kIG1hcmtlcnMgd2l0aCB0aGVpciBlc2NhcGVkIGNvdW50ZXJwYXJ0cy4qKlxuICAgICAqXG4gICAgICogRXNjYXBlZCBpbnRlcnBvbGF0aW9uIG1hcmtlcnMgYXJlIG9ubHkgcmVwbGFjZWQgd2l0aCB0aGUgYWN0dWFsIGludGVycG9sYXRpb24gbWFya2VycyBpbiByZW5kZXJlZFxuICAgICAqIG91dHB1dCB3aGVuIHRoZSAkaW50ZXJwb2xhdGUgc2VydmljZSBwcm9jZXNzZXMgdGhlIHRleHQuIFNvLCBmb3IgSFRNTCBlbGVtZW50cyBpbnRlcnBvbGF0ZWRcbiAgICAgKiBieSB7QGxpbmsgbmcuJGNvbXBpbGUgJGNvbXBpbGV9LCBvciBvdGhlcndpc2UgaW50ZXJwb2xhdGVkIHdpdGggdGhlIGBtdXN0SGF2ZUV4cHJlc3Npb25gIHBhcmFtZXRlclxuICAgICAqIHNldCB0byBgdHJ1ZWAsIHRoZSBpbnRlcnBvbGF0ZWQgdGV4dCBtdXN0IGNvbnRhaW4gYW4gdW5lc2NhcGVkIGludGVycG9sYXRpb24gZXhwcmVzc2lvbi4gQXMgc3VjaCxcbiAgICAgKiB0aGlzIGlzIHR5cGljYWxseSB1c2VmdWwgb25seSB3aGVuIHVzZXItZGF0YSBpcyB1c2VkIGluIHJlbmRlcmluZyBhIHRlbXBsYXRlIGZyb20gdGhlIHNlcnZlciwgb3JcbiAgICAgKiB3aGVuIG90aGVyd2lzZSB1bnRydXN0ZWQgZGF0YSBpcyB1c2VkIGJ5IGEgZGlyZWN0aXZlLlxuICAgICAqXG4gICAgICogPGV4YW1wbGU+XG4gICAgICogIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICogICAgPGRpdiBuZy1pbml0PVwidXNlcm5hbWU9J0EgdXNlcidcIj5cbiAgICAgKiAgICAgIDxwIG5nLWluaXQ9XCJhcHB0aXRsZT0nRXNjYXBpbmcgZGVtbydcIj57e2FwcHRpdGxlfX06IFxce1xceyB1c2VybmFtZSA9IFwiZGVmYWNlZCB2YWx1ZVwiOyBcXH1cXH1cbiAgICAgKiAgICAgICAgPC9wPlxuICAgICAqICAgICAgPHA+PHN0cm9uZz57e3VzZXJuYW1lfX08L3N0cm9uZz4gYXR0ZW1wdHMgdG8gaW5qZWN0IGNvZGUgd2hpY2ggd2lsbCBkZWZhY2UgdGhlXG4gICAgICogICAgICAgIGFwcGxpY2F0aW9uLCBidXQgZmFpbHMgdG8gYWNjb21wbGlzaCB0aGVpciB0YXNrLCBiZWNhdXNlIHRoZSBzZXJ2ZXIgaGFzIGNvcnJlY3RseVxuICAgICAqICAgICAgICBlc2NhcGVkIHRoZSBpbnRlcnBvbGF0aW9uIHN0YXJ0L2VuZCBtYXJrZXJzIHdpdGggUkVWRVJTRSBTT0xJRFVTIFUrMDA1QyAoYmFja3NsYXNoKVxuICAgICAqICAgICAgICBjaGFyYWN0ZXJzLjwvcD5cbiAgICAgKiAgICAgIDxwPkluc3RlYWQsIHRoZSByZXN1bHQgb2YgdGhlIGF0dGVtcHRlZCBzY3JpcHQgaW5qZWN0aW9uIGlzIHZpc2libGUsIGFuZCBjYW4gYmUgcmVtb3ZlZFxuICAgICAqICAgICAgICBmcm9tIHRoZSBkYXRhYmFzZSBieSBhbiBhZG1pbmlzdHJhdG9yLjwvcD5cbiAgICAgKiAgICA8L2Rpdj5cbiAgICAgKiAgPC9maWxlPlxuICAgICAqIDwvZXhhbXBsZT5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHdpdGggbWFya3VwIHRvIGludGVycG9sYXRlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG11c3RIYXZlRXhwcmVzc2lvbiBpZiBzZXQgdG8gdHJ1ZSB0aGVuIHRoZSBpbnRlcnBvbGF0aW9uIHN0cmluZyBtdXN0IGhhdmVcbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIGluIG9yZGVyIHRvIHJldHVybiBhbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLiBTdHJpbmdzIHdpdGggbm9cbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIHdpbGwgcmV0dXJuIG51bGwgZm9yIHRoZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gdHJ1c3RlZENvbnRleHQgd2hlbiBwcm92aWRlZCwgdGhlIHJldHVybmVkIGZ1bmN0aW9uIHBhc3NlcyB0aGUgaW50ZXJwb2xhdGVkXG4gICAgICogICAgcmVzdWx0IHRocm91Z2gge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWQoaW50ZXJwb2xhdGVkUmVzdWx0LFxuICAgICAqICAgIHRydXN0ZWRDb250ZXh0KX0gYmVmb3JlIHJldHVybmluZyBpdC4gIFJlZmVyIHRvIHRoZSB7QGxpbmsgbmcuJHNjZSAkc2NlfSBzZXJ2aWNlIHRoYXRcbiAgICAgKiAgICBwcm92aWRlcyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBmb3IgZGV0YWlscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhbGxPck5vdGhpbmcgaWYgYHRydWVgLCB0aGVuIHRoZSByZXR1cm5lZCBmdW5jdGlvbiByZXR1cm5zIHVuZGVmaW5lZFxuICAgICAqICAgIHVubGVzcyBhbGwgZW1iZWRkZWQgZXhwcmVzc2lvbnMgZXZhbHVhdGUgdG8gYSB2YWx1ZSBvdGhlciB0aGFuIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0KX0gYW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiB3aGljaCBpcyB1c2VkIHRvIGNvbXB1dGUgdGhlXG4gICAgICogICAgaW50ZXJwb2xhdGVkIHN0cmluZy4gVGhlIGZ1bmN0aW9uIGhhcyB0aGVzZSBwYXJhbWV0ZXJzOlxuICAgICAqXG4gICAgICogLSBgY29udGV4dGA6IGV2YWx1YXRpb24gY29udGV4dCBmb3IgYWxsIGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBpbnRlcnBvbGF0ZWQgdGV4dFxuICAgICAqL1xuICAgIGZ1bmN0aW9uICRpbnRlcnBvbGF0ZSh0ZXh0LCBtdXN0SGF2ZUV4cHJlc3Npb24sIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpIHtcbiAgICAgIGFsbE9yTm90aGluZyA9ICEhYWxsT3JOb3RoaW5nO1xuICAgICAgdmFyIHN0YXJ0SW5kZXgsXG4gICAgICAgICAgZW5kSW5kZXgsXG4gICAgICAgICAgaW5kZXggPSAwLFxuICAgICAgICAgIGV4cHJlc3Npb25zID0gW10sXG4gICAgICAgICAgcGFyc2VGbnMgPSBbXSxcbiAgICAgICAgICB0ZXh0TGVuZ3RoID0gdGV4dC5sZW5ndGgsXG4gICAgICAgICAgZXhwLFxuICAgICAgICAgIGNvbmNhdCA9IFtdLFxuICAgICAgICAgIGV4cHJlc3Npb25Qb3NpdGlvbnMgPSBbXTtcblxuICAgICAgd2hpbGUgKGluZGV4IDwgdGV4dExlbmd0aCkge1xuICAgICAgICBpZiAoKChzdGFydEluZGV4ID0gdGV4dC5pbmRleE9mKHN0YXJ0U3ltYm9sLCBpbmRleCkpICE9IC0xKSAmJlxuICAgICAgICAgICAgICgoZW5kSW5kZXggPSB0ZXh0LmluZGV4T2YoZW5kU3ltYm9sLCBzdGFydEluZGV4ICsgc3RhcnRTeW1ib2xMZW5ndGgpKSAhPSAtMSkpIHtcbiAgICAgICAgICBpZiAoaW5kZXggIT09IHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGNvbmNhdC5wdXNoKHVuZXNjYXBlVGV4dCh0ZXh0LnN1YnN0cmluZyhpbmRleCwgc3RhcnRJbmRleCkpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZXhwID0gdGV4dC5zdWJzdHJpbmcoc3RhcnRJbmRleCArIHN0YXJ0U3ltYm9sTGVuZ3RoLCBlbmRJbmRleCk7XG4gICAgICAgICAgZXhwcmVzc2lvbnMucHVzaChleHApO1xuICAgICAgICAgIHBhcnNlRm5zLnB1c2goJHBhcnNlKGV4cCwgcGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvcikpO1xuICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXggKyBlbmRTeW1ib2xMZW5ndGg7XG4gICAgICAgICAgZXhwcmVzc2lvblBvc2l0aW9ucy5wdXNoKGNvbmNhdC5sZW5ndGgpO1xuICAgICAgICAgIGNvbmNhdC5wdXNoKCcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB3ZSBkaWQgbm90IGZpbmQgYW4gaW50ZXJwb2xhdGlvbiwgc28gd2UgaGF2ZSB0byBhZGQgdGhlIHJlbWFpbmRlciB0byB0aGUgc2VwYXJhdG9ycyBhcnJheVxuICAgICAgICAgIGlmIChpbmRleCAhPT0gdGV4dExlbmd0aCkge1xuICAgICAgICAgICAgY29uY2F0LnB1c2godW5lc2NhcGVUZXh0KHRleHQuc3Vic3RyaW5nKGluZGV4KSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDb25jYXRlbmF0aW5nIGV4cHJlc3Npb25zIG1ha2VzIGl0IGhhcmQgdG8gcmVhc29uIGFib3V0IHdoZXRoZXIgc29tZSBjb21iaW5hdGlvbiBvZlxuICAgICAgLy8gY29uY2F0ZW5hdGVkIHZhbHVlcyBhcmUgdW5zYWZlIHRvIHVzZSBhbmQgY291bGQgZWFzaWx5IGxlYWQgdG8gWFNTLiAgQnkgcmVxdWlyaW5nIHRoYXQgYVxuICAgICAgLy8gc2luZ2xlIGV4cHJlc3Npb24gYmUgdXNlZCBmb3IgaWZyYW1lW3NyY10sIG9iamVjdFtzcmNdLCBldGMuLCB3ZSBlbnN1cmUgdGhhdCB0aGUgdmFsdWVcbiAgICAgIC8vIHRoYXQncyB1c2VkIGlzIGFzc2lnbmVkIG9yIGNvbnN0cnVjdGVkIGJ5IHNvbWUgSlMgY29kZSBzb21ld2hlcmUgdGhhdCBpcyBtb3JlIHRlc3RhYmxlIG9yXG4gICAgICAvLyBtYWtlIGl0IG9idmlvdXMgdGhhdCB5b3UgYm91bmQgdGhlIHZhbHVlIHRvIHNvbWUgdXNlciBjb250cm9sbGVkIHZhbHVlLiAgVGhpcyBoZWxwcyByZWR1Y2VcbiAgICAgIC8vIHRoZSBsb2FkIHdoZW4gYXVkaXRpbmcgZm9yIFhTUyBpc3N1ZXMuXG4gICAgICBpZiAodHJ1c3RlZENvbnRleHQgJiYgY29uY2F0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0aHJvdyAkaW50ZXJwb2xhdGVNaW5FcnIoJ25vY29uY2F0JyxcbiAgICAgICAgICAgICAgXCJFcnJvciB3aGlsZSBpbnRlcnBvbGF0aW5nOiB7MH1cXG5TdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBkaXNhbGxvd3MgXCIgK1xuICAgICAgICAgICAgICBcImludGVycG9sYXRpb25zIHRoYXQgY29uY2F0ZW5hdGUgbXVsdGlwbGUgZXhwcmVzc2lvbnMgd2hlbiBhIHRydXN0ZWQgdmFsdWUgaXMgXCIgK1xuICAgICAgICAgICAgICBcInJlcXVpcmVkLiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2VcIiwgdGV4dCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghbXVzdEhhdmVFeHByZXNzaW9uIHx8IGV4cHJlc3Npb25zLmxlbmd0aCkge1xuICAgICAgICB2YXIgY29tcHV0ZSA9IGZ1bmN0aW9uKHZhbHVlcykge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhbGxPck5vdGhpbmcgJiYgaXNVbmRlZmluZWQodmFsdWVzW2ldKSkgcmV0dXJuO1xuICAgICAgICAgICAgY29uY2F0W2V4cHJlc3Npb25Qb3NpdGlvbnNbaV1dID0gdmFsdWVzW2ldO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29uY2F0LmpvaW4oJycpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHRydXN0ZWRDb250ZXh0ID9cbiAgICAgICAgICAgICRzY2UuZ2V0VHJ1c3RlZCh0cnVzdGVkQ29udGV4dCwgdmFsdWUpIDpcbiAgICAgICAgICAgICRzY2UudmFsdWVPZih2YWx1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHN0cmluZ2lmeSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsgLy8gbnVsbCB8fCB1bmRlZmluZWRcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICB9XG4gICAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgdmFsdWUgPSAnJyArIHZhbHVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHZhbHVlID0gdG9Kc29uKHZhbHVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiBpbnRlcnBvbGF0aW9uRm4oY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheShpaSk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvciAoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlc1tpXSA9IHBhcnNlRm5zW2ldKGNvbnRleHQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGUodmFsdWVzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICB2YXIgbmV3RXJyID0gJGludGVycG9sYXRlTWluRXJyKCdpbnRlcnInLCBcIkNhbid0IGludGVycG9sYXRlOiB7MH1cXG57MX1cIiwgdGV4dCxcbiAgICAgICAgICAgICAgICAgIGVyci50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIobmV3RXJyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAvLyBhbGwgb2YgdGhlc2UgcHJvcGVydGllcyBhcmUgdW5kb2N1bWVudGVkIGZvciBub3dcbiAgICAgICAgICBleHA6IHRleHQsIC8vanVzdCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHJlZ3VsYXIgd2F0Y2hlcnMgY3JlYXRlZCB2aWEgJHdhdGNoXG4gICAgICAgICAgZXhwcmVzc2lvbnM6IGV4cHJlc3Npb25zLFxuICAgICAgICAgICQkd2F0Y2hEZWxlZ2F0ZTogZnVuY3Rpb24oc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSkge1xuICAgICAgICAgICAgdmFyIGxhc3RWYWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBzY29wZS4kd2F0Y2hHcm91cChwYXJzZUZucywgZnVuY3Rpb24gaW50ZXJwb2xhdGVGbldhdGNoZXIodmFsdWVzLCBvbGRWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgdmFyIGN1cnJWYWx1ZSA9IGNvbXB1dGUodmFsdWVzKTtcbiAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXIpKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBjdXJyVmFsdWUsIHZhbHVlcyAhPT0gb2xkVmFsdWVzID8gbGFzdFZhbHVlIDogY3VyclZhbHVlLCBzY29wZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbGFzdFZhbHVlID0gY3VyclZhbHVlO1xuICAgICAgICAgICAgfSwgb2JqZWN0RXF1YWxpdHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHVuZXNjYXBlVGV4dCh0ZXh0KSB7XG4gICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoZXNjYXBlZFN0YXJ0UmVnZXhwLCBzdGFydFN5bWJvbCkuXG4gICAgICAgICAgcmVwbGFjZShlc2NhcGVkRW5kUmVnZXhwLCBlbmRTeW1ib2wpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwYXJzZVN0cmluZ2lmeUludGVyY2VwdG9yKHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFsdWUgPSBnZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIGFsbE9yTm90aGluZyAmJiAhaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgdmFyIG5ld0VyciA9ICRpbnRlcnBvbGF0ZU1pbkVycignaW50ZXJyJywgXCJDYW4ndCBpbnRlcnBvbGF0ZTogezB9XFxuezF9XCIsIHRleHQsXG4gICAgICAgICAgICBlcnIudG9TdHJpbmcoKSk7XG4gICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIobmV3RXJyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRpbnRlcnBvbGF0ZSNzdGFydFN5bWJvbFxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIHN0YXJ0IG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB7e2AuXG4gICAgICpcbiAgICAgKiBVc2Uge0BsaW5rIG5nLiRpbnRlcnBvbGF0ZVByb3ZpZGVyI3N0YXJ0U3ltYm9sIGAkaW50ZXJwb2xhdGVQcm92aWRlci5zdGFydFN5bWJvbGB9IHRvIGNoYW5nZVxuICAgICAqIHRoZSBzeW1ib2wuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBzdGFydCBzeW1ib2wuXG4gICAgICovXG4gICAgJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc3RhcnRTeW1ib2w7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRpbnRlcnBvbGF0ZSNlbmRTeW1ib2xcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTeW1ib2wgdG8gZGVub3RlIHRoZSBlbmQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYH19YC5cbiAgICAgKlxuICAgICAqIFVzZSB7QGxpbmsgbmcuJGludGVycG9sYXRlUHJvdmlkZXIjZW5kU3ltYm9sIGAkaW50ZXJwb2xhdGVQcm92aWRlci5lbmRTeW1ib2xgfSB0byBjaGFuZ2VcbiAgICAgKiB0aGUgc3ltYm9sLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3N0cmluZ30gZW5kIHN5bWJvbC5cbiAgICAgKi9cbiAgICAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZW5kU3ltYm9sO1xuICAgIH07XG5cbiAgICByZXR1cm4gJGludGVycG9sYXRlO1xuICB9XTtcbn1cblxuZnVuY3Rpb24gJEludGVydmFsUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckd2luZG93JywgJyRxJywgJyQkcScsXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkd2luZG93LCAgICRxLCAgICQkcSkge1xuICAgIHZhciBpbnRlcnZhbHMgPSB7fTtcblxuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAgKiBAbmFtZSAkaW50ZXJ2YWxcbiAgICAgICpcbiAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAqIEFuZ3VsYXIncyB3cmFwcGVyIGZvciBgd2luZG93LnNldEludGVydmFsYC4gVGhlIGBmbmAgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZXZlcnkgYGRlbGF5YFxuICAgICAgKiBtaWxsaXNlY29uZHMuXG4gICAgICAqXG4gICAgICAqIFRoZSByZXR1cm4gdmFsdWUgb2YgcmVnaXN0ZXJpbmcgYW4gaW50ZXJ2YWwgZnVuY3Rpb24gaXMgYSBwcm9taXNlLiBUaGlzIHByb21pc2Ugd2lsbCBiZVxuICAgICAgKiBub3RpZmllZCB1cG9uIGVhY2ggdGljayBvZiB0aGUgaW50ZXJ2YWwsIGFuZCB3aWxsIGJlIHJlc29sdmVkIGFmdGVyIGBjb3VudGAgaXRlcmF0aW9ucywgb3JcbiAgICAgICogcnVuIGluZGVmaW5pdGVseSBpZiBgY291bnRgIGlzIG5vdCBkZWZpbmVkLiBUaGUgdmFsdWUgb2YgdGhlIG5vdGlmaWNhdGlvbiB3aWxsIGJlIHRoZVxuICAgICAgKiBudW1iZXIgb2YgaXRlcmF0aW9ucyB0aGF0IGhhdmUgcnVuLlxuICAgICAgKiBUbyBjYW5jZWwgYW4gaW50ZXJ2YWwsIGNhbGwgYCRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSlgLlxuICAgICAgKlxuICAgICAgKiBJbiB0ZXN0cyB5b3UgY2FuIHVzZSB7QGxpbmsgbmdNb2NrLiRpbnRlcnZhbCNmbHVzaCBgJGludGVydmFsLmZsdXNoKG1pbGxpcylgfSB0b1xuICAgICAgKiBtb3ZlIGZvcndhcmQgYnkgYG1pbGxpc2AgbWlsbGlzZWNvbmRzIGFuZCB0cmlnZ2VyIGFueSBmdW5jdGlvbnMgc2NoZWR1bGVkIHRvIHJ1biBpbiB0aGF0XG4gICAgICAqIHRpbWUuXG4gICAgICAqXG4gICAgICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAgICAqICoqTm90ZSoqOiBJbnRlcnZhbHMgY3JlYXRlZCBieSB0aGlzIHNlcnZpY2UgbXVzdCBiZSBleHBsaWNpdGx5IGRlc3Ryb3llZCB3aGVuIHlvdSBhcmUgZmluaXNoZWRcbiAgICAgICogd2l0aCB0aGVtLiAgSW4gcGFydGljdWxhciB0aGV5IGFyZSBub3QgYXV0b21hdGljYWxseSBkZXN0cm95ZWQgd2hlbiBhIGNvbnRyb2xsZXIncyBzY29wZSBvciBhXG4gICAgICAqIGRpcmVjdGl2ZSdzIGVsZW1lbnQgYXJlIGRlc3Ryb3llZC5cbiAgICAgICogWW91IHNob3VsZCB0YWtlIHRoaXMgaW50byBjb25zaWRlcmF0aW9uIGFuZCBtYWtlIHN1cmUgdG8gYWx3YXlzIGNhbmNlbCB0aGUgaW50ZXJ2YWwgYXQgdGhlXG4gICAgICAqIGFwcHJvcHJpYXRlIG1vbWVudC4gIFNlZSB0aGUgZXhhbXBsZSBiZWxvdyBmb3IgbW9yZSBkZXRhaWxzIG9uIGhvdyBhbmQgd2hlbiB0byBkbyB0aGlzLlxuICAgICAgKiA8L2Rpdj5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCByZXBlYXRlZGx5LlxuICAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXkgTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIGVhY2ggZnVuY3Rpb24gY2FsbC5cbiAgICAgICogQHBhcmFtIHtudW1iZXI9fSBbY291bnQ9MF0gTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdC4gSWYgbm90IHNldCwgb3IgMCwgd2lsbCByZXBlYXRcbiAgICAgICogICBpbmRlZmluaXRlbHkuXG4gICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IFtpbnZva2VBcHBseT10cnVlXSBJZiBzZXQgdG8gYGZhbHNlYCBza2lwcyBtb2RlbCBkaXJ0eSBjaGVja2luZywgb3RoZXJ3aXNlXG4gICAgICAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxuICAgICAgKiBAcmV0dXJucyB7cHJvbWlzZX0gQSBwcm9taXNlIHdoaWNoIHdpbGwgYmUgbm90aWZpZWQgb24gZWFjaCBpdGVyYXRpb24uXG4gICAgICAqXG4gICAgICAqIEBleGFtcGxlXG4gICAgICAqIDxleGFtcGxlIG1vZHVsZT1cImludGVydmFsRXhhbXBsZVwiPlxuICAgICAgKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgKiAgIDxzY3JpcHQ+XG4gICAgICAqICAgICBhbmd1bGFyLm1vZHVsZSgnaW50ZXJ2YWxFeGFtcGxlJywgW10pXG4gICAgICAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsXG4gICAgICAqICAgICAgICAgZnVuY3Rpb24oJHNjb3BlLCAkaW50ZXJ2YWwpIHtcbiAgICAgICogICAgICAgICAgICRzY29wZS5mb3JtYXQgPSAnTS9kL3l5IGg6bW06c3MgYSc7XG4gICAgICAqICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9IDEwMDtcbiAgICAgICogICAgICAgICAgICRzY29wZS5ibG9vZF8yID0gMTIwO1xuICAgICAgKlxuICAgICAgKiAgICAgICAgICAgdmFyIHN0b3A7XG4gICAgICAqICAgICAgICAgICAkc2NvcGUuZmlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICogICAgICAgICAgICAgLy8gRG9uJ3Qgc3RhcnQgYSBuZXcgZmlnaHQgaWYgd2UgYXJlIGFscmVhZHkgZmlnaHRpbmdcbiAgICAgICogICAgICAgICAgICAgaWYgKCBhbmd1bGFyLmlzRGVmaW5lZChzdG9wKSApIHJldHVybjtcbiAgICAgICpcbiAgICAgICogICAgICAgICAgICAgc3RvcCA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICogICAgICAgICAgICAgICBpZiAoJHNjb3BlLmJsb29kXzEgPiAwICYmICRzY29wZS5ibG9vZF8yID4gMCkge1xuICAgICAgKiAgICAgICAgICAgICAgICAgJHNjb3BlLmJsb29kXzEgPSAkc2NvcGUuYmxvb2RfMSAtIDM7XG4gICAgICAqICAgICAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9ICRzY29wZS5ibG9vZF8yIC0gNDtcbiAgICAgICogICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgKiAgICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BGaWdodCgpO1xuICAgICAgKiAgICAgICAgICAgICAgIH1cbiAgICAgICogICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICogICAgICAgICAgIH07XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAqICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChzdG9wKSkge1xuICAgICAgKiAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc3RvcCk7XG4gICAgICAqICAgICAgICAgICAgICAgc3RvcCA9IHVuZGVmaW5lZDtcbiAgICAgICogICAgICAgICAgICAgfVxuICAgICAgKiAgICAgICAgICAgfTtcbiAgICAgICpcbiAgICAgICogICAgICAgICAgICRzY29wZS5yZXNldEZpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAqICAgICAgICAgICAgICRzY29wZS5ibG9vZF8xID0gMTAwO1xuICAgICAgKiAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9IDEyMDtcbiAgICAgICogICAgICAgICAgIH07XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgKiAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaW50ZXJ2YWwgaXMgZGVzdHJveWVkIHRvb1xuICAgICAgKiAgICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0KCk7XG4gICAgICAqICAgICAgICAgICB9KTtcbiAgICAgICogICAgICAgICB9XSlcbiAgICAgICogICAgICAgLy8gUmVnaXN0ZXIgdGhlICdteUN1cnJlbnRUaW1lJyBkaXJlY3RpdmUgZmFjdG9yeSBtZXRob2QuXG4gICAgICAqICAgICAgIC8vIFdlIGluamVjdCAkaW50ZXJ2YWwgYW5kIGRhdGVGaWx0ZXIgc2VydmljZSBzaW5jZSB0aGUgZmFjdG9yeSBtZXRob2QgaXMgREkuXG4gICAgICAqICAgICAgIC5kaXJlY3RpdmUoJ215Q3VycmVudFRpbWUnLCBbJyRpbnRlcnZhbCcsICdkYXRlRmlsdGVyJyxcbiAgICAgICogICAgICAgICBmdW5jdGlvbigkaW50ZXJ2YWwsIGRhdGVGaWx0ZXIpIHtcbiAgICAgICogICAgICAgICAgIC8vIHJldHVybiB0aGUgZGlyZWN0aXZlIGxpbmsgZnVuY3Rpb24uIChjb21waWxlIGZ1bmN0aW9uIG5vdCBuZWVkZWQpXG4gICAgICAqICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAqICAgICAgICAgICAgIHZhciBmb3JtYXQsICAvLyBkYXRlIGZvcm1hdFxuICAgICAgKiAgICAgICAgICAgICAgICAgc3RvcFRpbWU7IC8vIHNvIHRoYXQgd2UgY2FuIGNhbmNlbCB0aGUgdGltZSB1cGRhdGVzXG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAgIC8vIHVzZWQgdG8gdXBkYXRlIHRoZSBVSVxuICAgICAgKiAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKCkge1xuICAgICAgKiAgICAgICAgICAgICAgIGVsZW1lbnQudGV4dChkYXRlRmlsdGVyKG5ldyBEYXRlKCksIGZvcm1hdCkpO1xuICAgICAgKiAgICAgICAgICAgICB9XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAgIC8vIHdhdGNoIHRoZSBleHByZXNzaW9uLCBhbmQgdXBkYXRlIHRoZSBVSSBvbiBjaGFuZ2UuXG4gICAgICAqICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5teUN1cnJlbnRUaW1lLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgKiAgICAgICAgICAgICAgIGZvcm1hdCA9IHZhbHVlO1xuICAgICAgKiAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoKTtcbiAgICAgICogICAgICAgICAgICAgfSk7XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAgIHN0b3BUaW1lID0gJGludGVydmFsKHVwZGF0ZVRpbWUsIDEwMDApO1xuICAgICAgKlxuICAgICAgKiAgICAgICAgICAgICAvLyBsaXN0ZW4gb24gRE9NIGRlc3Ryb3kgKHJlbW92YWwpIGV2ZW50LCBhbmQgY2FuY2VsIHRoZSBuZXh0IFVJIHVwZGF0ZVxuICAgICAgKiAgICAgICAgICAgICAvLyB0byBwcmV2ZW50IHVwZGF0aW5nIHRpbWUgYWZ0ZXIgdGhlIERPTSBlbGVtZW50IHdhcyByZW1vdmVkLlxuICAgICAgKiAgICAgICAgICAgICBlbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgKiAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc3RvcFRpbWUpO1xuICAgICAgKiAgICAgICAgICAgICB9KTtcbiAgICAgICogICAgICAgICAgIH1cbiAgICAgICogICAgICAgICB9XSk7XG4gICAgICAqICAgPC9zY3JpcHQ+XG4gICAgICAqXG4gICAgICAqICAgPGRpdj5cbiAgICAgICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAqICAgICAgIERhdGUgZm9ybWF0OiA8aW5wdXQgbmctbW9kZWw9XCJmb3JtYXRcIj4gPGhyLz5cbiAgICAgICogICAgICAgQ3VycmVudCB0aW1lIGlzOiA8c3BhbiBteS1jdXJyZW50LXRpbWU9XCJmb3JtYXRcIj48L3NwYW4+XG4gICAgICAqICAgICAgIDxoci8+XG4gICAgICAqICAgICAgIEJsb29kIDEgOiA8Zm9udCBjb2xvcj0ncmVkJz57e2Jsb29kXzF9fTwvZm9udD5cbiAgICAgICogICAgICAgQmxvb2QgMiA6IDxmb250IGNvbG9yPSdyZWQnPnt7Ymxvb2RfMn19PC9mb250PlxuICAgICAgKiAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwiZmlnaHQoKVwiPkZpZ2h0PC9idXR0b24+XG4gICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJzdG9wRmlnaHQoKVwiPlN0b3BGaWdodDwvYnV0dG9uPlxuICAgICAgKiAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwicmVzZXRGaWdodCgpXCI+cmVzZXRGaWdodDwvYnV0dG9uPlxuICAgICAgKiAgICAgPC9kaXY+XG4gICAgICAqICAgPC9kaXY+XG4gICAgICAqXG4gICAgICAqIDwvZmlsZT5cbiAgICAgICogPC9leGFtcGxlPlxuICAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnRlcnZhbChmbiwgZGVsYXksIGNvdW50LCBpbnZva2VBcHBseSkge1xuICAgICAgdmFyIHNldEludGVydmFsID0gJHdpbmRvdy5zZXRJbnRlcnZhbCxcbiAgICAgICAgICBjbGVhckludGVydmFsID0gJHdpbmRvdy5jbGVhckludGVydmFsLFxuICAgICAgICAgIGl0ZXJhdGlvbiA9IDAsXG4gICAgICAgICAgc2tpcEFwcGx5ID0gKGlzRGVmaW5lZChpbnZva2VBcHBseSkgJiYgIWludm9rZUFwcGx5KSxcbiAgICAgICAgICBkZWZlcnJlZCA9IChza2lwQXBwbHkgPyAkJHEgOiAkcSkuZGVmZXIoKSxcbiAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgY291bnQgPSBpc0RlZmluZWQoY291bnQpID8gY291bnQgOiAwO1xuXG4gICAgICBwcm9taXNlLnRoZW4obnVsbCwgbnVsbCwgZm4pO1xuXG4gICAgICBwcm9taXNlLiQkaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgICAgIGRlZmVycmVkLm5vdGlmeShpdGVyYXRpb24rKyk7XG5cbiAgICAgICAgaWYgKGNvdW50ID4gMCAmJiBpdGVyYXRpb24gPj0gY291bnQpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGl0ZXJhdGlvbik7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChwcm9taXNlLiQkaW50ZXJ2YWxJZCk7XG4gICAgICAgICAgZGVsZXRlIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNraXBBcHBseSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcblxuICAgICAgfSwgZGVsYXkpO1xuXG4gICAgICBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdID0gZGVmZXJyZWQ7XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cblxuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAqIEBuYW1lICRpbnRlcnZhbCNjYW5jZWxcbiAgICAgICpcbiAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge3Byb21pc2V9IHByb21pc2UgcmV0dXJuZWQgYnkgdGhlIGAkaW50ZXJ2YWxgIGZ1bmN0aW9uLlxuICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgd2FzIHN1Y2Nlc3NmdWxseSBjYW5jZWxlZC5cbiAgICAgICovXG4gICAgaW50ZXJ2YWwuY2FuY2VsID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgaWYgKHByb21pc2UgJiYgcHJvbWlzZS4kJGludGVydmFsSWQgaW4gaW50ZXJ2YWxzKSB7XG4gICAgICAgIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF0ucmVqZWN0KCdjYW5jZWxlZCcpO1xuICAgICAgICAkd2luZG93LmNsZWFySW50ZXJ2YWwocHJvbWlzZS4kJGludGVydmFsSWQpO1xuICAgICAgICBkZWxldGUgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHJldHVybiBpbnRlcnZhbDtcbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRsb2NhbGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqICRsb2NhbGUgc2VydmljZSBwcm92aWRlcyBsb2NhbGl6YXRpb24gcnVsZXMgZm9yIHZhcmlvdXMgQW5ndWxhciBjb21wb25lbnRzLiBBcyBvZiByaWdodCBub3cgdGhlXG4gKiBvbmx5IHB1YmxpYyBhcGkgaXM6XG4gKlxuICogKiBgaWRgIOKAkyBge3N0cmluZ31gIOKAkyBsb2NhbGUgaWQgZm9ybWF0dGVkIGFzIGBsYW5ndWFnZUlkLWNvdW50cnlJZGAgKGUuZy4gYGVuLXVzYClcbiAqL1xuZnVuY3Rpb24gJExvY2FsZVByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6ICdlbi11cycsXG5cbiAgICAgIE5VTUJFUl9GT1JNQVRTOiB7XG4gICAgICAgIERFQ0lNQUxfU0VQOiAnLicsXG4gICAgICAgIEdST1VQX1NFUDogJywnLFxuICAgICAgICBQQVRURVJOUzogW1xuICAgICAgICAgIHsgLy8gRGVjaW1hbCBQYXR0ZXJuXG4gICAgICAgICAgICBtaW5JbnQ6IDEsXG4gICAgICAgICAgICBtaW5GcmFjOiAwLFxuICAgICAgICAgICAgbWF4RnJhYzogMyxcbiAgICAgICAgICAgIHBvc1ByZTogJycsXG4gICAgICAgICAgICBwb3NTdWY6ICcnLFxuICAgICAgICAgICAgbmVnUHJlOiAnLScsXG4gICAgICAgICAgICBuZWdTdWY6ICcnLFxuICAgICAgICAgICAgZ1NpemU6IDMsXG4gICAgICAgICAgICBsZ1NpemU6IDNcbiAgICAgICAgICB9LHsgLy9DdXJyZW5jeSBQYXR0ZXJuXG4gICAgICAgICAgICBtaW5JbnQ6IDEsXG4gICAgICAgICAgICBtaW5GcmFjOiAyLFxuICAgICAgICAgICAgbWF4RnJhYzogMixcbiAgICAgICAgICAgIHBvc1ByZTogJ1xcdTAwQTQnLFxuICAgICAgICAgICAgcG9zU3VmOiAnJyxcbiAgICAgICAgICAgIG5lZ1ByZTogJyhcXHUwMEE0JyxcbiAgICAgICAgICAgIG5lZ1N1ZjogJyknLFxuICAgICAgICAgICAgZ1NpemU6IDMsXG4gICAgICAgICAgICBsZ1NpemU6IDNcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIENVUlJFTkNZX1NZTTogJyQnXG4gICAgICB9LFxuXG4gICAgICBEQVRFVElNRV9GT1JNQVRTOiB7XG4gICAgICAgIE1PTlRIOlxuICAgICAgICAgICAgJ0phbnVhcnksRmVicnVhcnksTWFyY2gsQXByaWwsTWF5LEp1bmUsSnVseSxBdWd1c3QsU2VwdGVtYmVyLE9jdG9iZXIsTm92ZW1iZXIsRGVjZW1iZXInXG4gICAgICAgICAgICAuc3BsaXQoJywnKSxcbiAgICAgICAgU0hPUlRNT05USDogICdKYW4sRmViLE1hcixBcHIsTWF5LEp1bixKdWwsQXVnLFNlcCxPY3QsTm92LERlYycuc3BsaXQoJywnKSxcbiAgICAgICAgREFZOiAnU3VuZGF5LE1vbmRheSxUdWVzZGF5LFdlZG5lc2RheSxUaHVyc2RheSxGcmlkYXksU2F0dXJkYXknLnNwbGl0KCcsJyksXG4gICAgICAgIFNIT1JUREFZOiAnU3VuLE1vbixUdWUsV2VkLFRodSxGcmksU2F0Jy5zcGxpdCgnLCcpLFxuICAgICAgICBBTVBNUzogWydBTScsJ1BNJ10sXG4gICAgICAgIG1lZGl1bTogJ01NTSBkLCB5IGg6bW06c3MgYScsXG4gICAgICAgICdzaG9ydCc6ICdNL2QveXkgaDptbSBhJyxcbiAgICAgICAgZnVsbERhdGU6ICdFRUVFLCBNTU1NIGQsIHknLFxuICAgICAgICBsb25nRGF0ZTogJ01NTU0gZCwgeScsXG4gICAgICAgIG1lZGl1bURhdGU6ICdNTU0gZCwgeScsXG4gICAgICAgIHNob3J0RGF0ZTogJ00vZC95eScsXG4gICAgICAgIG1lZGl1bVRpbWU6ICdoOm1tOnNzIGEnLFxuICAgICAgICBzaG9ydFRpbWU6ICdoOm1tIGEnXG4gICAgICB9LFxuXG4gICAgICBwbHVyYWxDYXQ6IGZ1bmN0aW9uKG51bSkge1xuICAgICAgICBpZiAobnVtID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuICdvbmUnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnb3RoZXInO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5cbnZhciBQQVRIX01BVENIID0gL14oW15cXD8jXSopKFxcPyhbXiNdKikpPygjKC4qKSk/JC8sXG4gICAgREVGQVVMVF9QT1JUUyA9IHsnaHR0cCc6IDgwLCAnaHR0cHMnOiA0NDMsICdmdHAnOiAyMX07XG52YXIgJGxvY2F0aW9uTWluRXJyID0gbWluRXJyKCckbG9jYXRpb24nKTtcblxuXG4vKipcbiAqIEVuY29kZSBwYXRoIHVzaW5nIGVuY29kZVVyaVNlZ21lbnQsIGlnbm9yaW5nIGZvcndhcmQgc2xhc2hlc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdG8gZW5jb2RlXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlbmNvZGVQYXRoKHBhdGgpIHtcbiAgdmFyIHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnLycpLFxuICAgICAgaSA9IHNlZ21lbnRzLmxlbmd0aDtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgc2VnbWVudHNbaV0gPSBlbmNvZGVVcmlTZWdtZW50KHNlZ21lbnRzW2ldKTtcbiAgfVxuXG4gIHJldHVybiBzZWdtZW50cy5qb2luKCcvJyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQWJzb2x1dGVVcmwoYWJzb2x1dGVVcmwsIGxvY2F0aW9uT2JqKSB7XG4gIHZhciBwYXJzZWRVcmwgPSB1cmxSZXNvbHZlKGFic29sdXRlVXJsKTtcblxuICBsb2NhdGlvbk9iai4kJHByb3RvY29sID0gcGFyc2VkVXJsLnByb3RvY29sO1xuICBsb2NhdGlvbk9iai4kJGhvc3QgPSBwYXJzZWRVcmwuaG9zdG5hbWU7XG4gIGxvY2F0aW9uT2JqLiQkcG9ydCA9IGludChwYXJzZWRVcmwucG9ydCkgfHwgREVGQVVMVF9QT1JUU1twYXJzZWRVcmwucHJvdG9jb2xdIHx8IG51bGw7XG59XG5cblxuZnVuY3Rpb24gcGFyc2VBcHBVcmwocmVsYXRpdmVVcmwsIGxvY2F0aW9uT2JqKSB7XG4gIHZhciBwcmVmaXhlZCA9IChyZWxhdGl2ZVVybC5jaGFyQXQoMCkgIT09ICcvJyk7XG4gIGlmIChwcmVmaXhlZCkge1xuICAgIHJlbGF0aXZlVXJsID0gJy8nICsgcmVsYXRpdmVVcmw7XG4gIH1cbiAgdmFyIG1hdGNoID0gdXJsUmVzb2x2ZShyZWxhdGl2ZVVybCk7XG4gIGxvY2F0aW9uT2JqLiQkcGF0aCA9IGRlY29kZVVSSUNvbXBvbmVudChwcmVmaXhlZCAmJiBtYXRjaC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyA/XG4gICAgICBtYXRjaC5wYXRobmFtZS5zdWJzdHJpbmcoMSkgOiBtYXRjaC5wYXRobmFtZSk7XG4gIGxvY2F0aW9uT2JqLiQkc2VhcmNoID0gcGFyc2VLZXlWYWx1ZShtYXRjaC5zZWFyY2gpO1xuICBsb2NhdGlvbk9iai4kJGhhc2ggPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2guaGFzaCk7XG5cbiAgLy8gbWFrZSBzdXJlIHBhdGggc3RhcnRzIHdpdGggJy8nO1xuICBpZiAobG9jYXRpb25PYmouJCRwYXRoICYmIGxvY2F0aW9uT2JqLiQkcGF0aC5jaGFyQXQoMCkgIT0gJy8nKSB7XG4gICAgbG9jYXRpb25PYmouJCRwYXRoID0gJy8nICsgbG9jYXRpb25PYmouJCRwYXRoO1xuICB9XG59XG5cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJlZ2luXG4gKiBAcGFyYW0ge3N0cmluZ30gd2hvbGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHJldHVybnMgdGV4dCBmcm9tIHdob2xlIGFmdGVyIGJlZ2luIG9yIHVuZGVmaW5lZCBpZiBpdCBkb2VzIG5vdCBiZWdpbiB3aXRoXG4gKiAgICAgICAgICAgICAgICAgICBleHBlY3RlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJlZ2luc1dpdGgoYmVnaW4sIHdob2xlKSB7XG4gIGlmICh3aG9sZS5pbmRleE9mKGJlZ2luKSA9PT0gMCkge1xuICAgIHJldHVybiB3aG9sZS5zdWJzdHIoYmVnaW4ubGVuZ3RoKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHN0cmlwSGFzaCh1cmwpIHtcbiAgdmFyIGluZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgcmV0dXJuIGluZGV4ID09IC0xID8gdXJsIDogdXJsLnN1YnN0cigwLCBpbmRleCk7XG59XG5cbmZ1bmN0aW9uIHRyaW1FbXB0eUhhc2godXJsKSB7XG4gIHJldHVybiB1cmwucmVwbGFjZSgvKCMuKyl8IyQvLCAnJDEnKTtcbn1cblxuXG5mdW5jdGlvbiBzdHJpcEZpbGUodXJsKSB7XG4gIHJldHVybiB1cmwuc3Vic3RyKDAsIHN0cmlwSGFzaCh1cmwpLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbn1cblxuLyogcmV0dXJuIHRoZSBzZXJ2ZXIgb25seSAoc2NoZW1lOi8vaG9zdDpwb3J0KSAqL1xuZnVuY3Rpb24gc2VydmVyQmFzZSh1cmwpIHtcbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoMCwgdXJsLmluZGV4T2YoJy8nLCB1cmwuaW5kZXhPZignLy8nKSArIDIpKTtcbn1cblxuXG4vKipcbiAqIExvY2F0aW9uSHRtbDVVcmwgcmVwcmVzZW50cyBhbiB1cmxcbiAqIFRoaXMgb2JqZWN0IGlzIGV4cG9zZWQgYXMgJGxvY2F0aW9uIHNlcnZpY2Ugd2hlbiBIVE1MNSBtb2RlIGlzIGVuYWJsZWQgYW5kIHN1cHBvcnRlZFxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2UgYXBwbGljYXRpb24gYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlUHJlZml4IHVybCBwYXRoIHByZWZpeFxuICovXG5mdW5jdGlvbiBMb2NhdGlvbkh0bWw1VXJsKGFwcEJhc2UsIGJhc2VQcmVmaXgpIHtcbiAgdGhpcy4kJGh0bWw1ID0gdHJ1ZTtcbiAgYmFzZVByZWZpeCA9IGJhc2VQcmVmaXggfHwgJyc7XG4gIHZhciBhcHBCYXNlTm9GaWxlID0gc3RyaXBGaWxlKGFwcEJhc2UpO1xuICBwYXJzZUFic29sdXRlVXJsKGFwcEJhc2UsIHRoaXMpO1xuXG5cbiAgLyoqXG4gICAqIFBhcnNlIGdpdmVuIGh0bWw1IChyZWd1bGFyKSB1cmwgc3RyaW5nIGludG8gcHJvcGVydGllc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIEhUTUw1IHVybFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy4kJHBhcnNlID0gZnVuY3Rpb24odXJsKSB7XG4gICAgdmFyIHBhdGhVcmwgPSBiZWdpbnNXaXRoKGFwcEJhc2VOb0ZpbGUsIHVybCk7XG4gICAgaWYgKCFpc1N0cmluZyhwYXRoVXJsKSkge1xuICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdpcHRocHJmeCcsICdJbnZhbGlkIHVybCBcInswfVwiLCBtaXNzaW5nIHBhdGggcHJlZml4IFwiezF9XCIuJywgdXJsLFxuICAgICAgICAgIGFwcEJhc2VOb0ZpbGUpO1xuICAgIH1cblxuICAgIHBhcnNlQXBwVXJsKHBhdGhVcmwsIHRoaXMpO1xuXG4gICAgaWYgKCF0aGlzLiQkcGF0aCkge1xuICAgICAgdGhpcy4kJHBhdGggPSAnLyc7XG4gICAgfVxuXG4gICAgdGhpcy4kJGNvbXBvc2UoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29tcG9zZSB1cmwgYW5kIHVwZGF0ZSBgYWJzVXJsYCBwcm9wZXJ0eVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy4kJGNvbXBvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VhcmNoID0gdG9LZXlWYWx1ZSh0aGlzLiQkc2VhcmNoKSxcbiAgICAgICAgaGFzaCA9IHRoaXMuJCRoYXNoID8gJyMnICsgZW5jb2RlVXJpU2VnbWVudCh0aGlzLiQkaGFzaCkgOiAnJztcblxuICAgIHRoaXMuJCR1cmwgPSBlbmNvZGVQYXRoKHRoaXMuJCRwYXRoKSArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyBoYXNoO1xuICAgIHRoaXMuJCRhYnNVcmwgPSBhcHBCYXNlTm9GaWxlICsgdGhpcy4kJHVybC5zdWJzdHIoMSk7IC8vIGZpcnN0IGNoYXIgaXMgYWx3YXlzICcvJ1xuICB9O1xuXG4gIHRoaXMuJCRwYXJzZUxpbmtVcmwgPSBmdW5jdGlvbih1cmwsIHJlbEhyZWYpIHtcbiAgICBpZiAocmVsSHJlZiAmJiByZWxIcmVmWzBdID09PSAnIycpIHtcbiAgICAgIC8vIHNwZWNpYWwgY2FzZSBmb3IgbGlua3MgdG8gaGFzaCBmcmFnbWVudHM6XG4gICAgICAvLyBrZWVwIHRoZSBvbGQgdXJsIGFuZCBvbmx5IHJlcGxhY2UgdGhlIGhhc2ggZnJhZ21lbnRcbiAgICAgIHRoaXMuaGFzaChyZWxIcmVmLnNsaWNlKDEpKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB2YXIgYXBwVXJsLCBwcmV2QXBwVXJsO1xuICAgIHZhciByZXdyaXR0ZW5Vcmw7XG5cbiAgICBpZiAoKGFwcFVybCA9IGJlZ2luc1dpdGgoYXBwQmFzZSwgdXJsKSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcHJldkFwcFVybCA9IGFwcFVybDtcbiAgICAgIGlmICgoYXBwVXJsID0gYmVnaW5zV2l0aChiYXNlUHJlZml4LCBhcHBVcmwpKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGUgKyAoYmVnaW5zV2l0aCgnLycsIGFwcFVybCkgfHwgYXBwVXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2UgKyBwcmV2QXBwVXJsO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKGFwcFVybCA9IGJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSwgdXJsKSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZU5vRmlsZSArIGFwcFVybDtcbiAgICB9IGVsc2UgaWYgKGFwcEJhc2VOb0ZpbGUgPT0gdXJsICsgJy8nKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xuICAgIH1cbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xuICB9O1xufVxuXG5cbi8qKlxuICogTG9jYXRpb25IYXNoYmFuZ1VybCByZXByZXNlbnRzIHVybFxuICogVGhpcyBvYmplY3QgaXMgZXhwb3NlZCBhcyAkbG9jYXRpb24gc2VydmljZSB3aGVuIGRldmVsb3BlciBkb2Vzbid0IG9wdCBpbnRvIGh0bWw1IG1vZGUuXG4gKiBJdCBhbHNvIHNlcnZlcyBhcyB0aGUgYmFzZSBjbGFzcyBmb3IgaHRtbDUgbW9kZSBmYWxsYmFjayBvbiBsZWdhY3kgYnJvd3NlcnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZSBhcHBsaWNhdGlvbiBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2hQcmVmaXggaGFzaGJhbmcgcHJlZml4XG4gKi9cbmZ1bmN0aW9uIExvY2F0aW9uSGFzaGJhbmdVcmwoYXBwQmFzZSwgaGFzaFByZWZpeCkge1xuICB2YXIgYXBwQmFzZU5vRmlsZSA9IHN0cmlwRmlsZShhcHBCYXNlKTtcblxuICBwYXJzZUFic29sdXRlVXJsKGFwcEJhc2UsIHRoaXMpO1xuXG5cbiAgLyoqXG4gICAqIFBhcnNlIGdpdmVuIGhhc2hiYW5nIHVybCBpbnRvIHByb3BlcnRpZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBIYXNoYmFuZyB1cmxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuJCRwYXJzZSA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHZhciB3aXRob3V0QmFzZVVybCA9IGJlZ2luc1dpdGgoYXBwQmFzZSwgdXJsKSB8fCBiZWdpbnNXaXRoKGFwcEJhc2VOb0ZpbGUsIHVybCk7XG4gICAgdmFyIHdpdGhvdXRIYXNoVXJsO1xuXG4gICAgaWYgKHdpdGhvdXRCYXNlVXJsLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG5cbiAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSB1cmwgc3RhcnRzIHdpdGggYSBoYXNoIHNvIHdlIGhhdmVcbiAgICAgIC8vIGdvdCBlaXRoZXIgYSBoYXNoYmFuZyBwYXRoIG9yIGEgcGxhaW4gaGFzaCBmcmFnbWVudFxuICAgICAgd2l0aG91dEhhc2hVcmwgPSBiZWdpbnNXaXRoKGhhc2hQcmVmaXgsIHdpdGhvdXRCYXNlVXJsKTtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh3aXRob3V0SGFzaFVybCkpIHtcbiAgICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHByZWZpeCBzbyB3ZSBqdXN0IGhhdmUgYSBoYXNoIGZyYWdtZW50XG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gd2l0aG91dEJhc2VVcmw7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHBhdGggbm9yIGhhc2ggZnJhZ21lbnQ6XG4gICAgICAvLyBJZiB3ZSBhcmUgaW4gSFRNTDUgbW9kZSB3ZSB1c2Ugd2hhdCBpcyBsZWZ0IGFzIHRoZSBwYXRoO1xuICAgICAgLy8gT3RoZXJ3aXNlIHdlIGlnbm9yZSB3aGF0IGlzIGxlZnRcbiAgICAgIHdpdGhvdXRIYXNoVXJsID0gdGhpcy4kJGh0bWw1ID8gd2l0aG91dEJhc2VVcmwgOiAnJztcbiAgICB9XG5cbiAgICBwYXJzZUFwcFVybCh3aXRob3V0SGFzaFVybCwgdGhpcyk7XG5cbiAgICB0aGlzLiQkcGF0aCA9IHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUodGhpcy4kJHBhdGgsIHdpdGhvdXRIYXNoVXJsLCBhcHBCYXNlKTtcblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG5cbiAgICAvKlxuICAgICAqIEluIFdpbmRvd3MsIG9uIGFuIGFuY2hvciBub2RlIG9uIGRvY3VtZW50cyBsb2FkZWQgZnJvbVxuICAgICAqIHRoZSBmaWxlc3lzdGVtLCB0aGUgYnJvd3NlciB3aWxsIHJldHVybiBhIHBhdGhuYW1lXG4gICAgICogcHJlZml4ZWQgd2l0aCB0aGUgZHJpdmUgbmFtZSAoJy9DOi9wYXRoJykgd2hlbiBhXG4gICAgICogcGF0aG5hbWUgd2l0aG91dCBhIGRyaXZlIGlzIHNldDpcbiAgICAgKiAgKiBhLnNldEF0dHJpYnV0ZSgnaHJlZicsICcvZm9vJylcbiAgICAgKiAgICogYS5wYXRobmFtZSA9PT0gJy9DOi9mb28nIC8vdHJ1ZVxuICAgICAqXG4gICAgICogSW5zaWRlIG9mIEFuZ3VsYXIsIHdlJ3JlIGFsd2F5cyB1c2luZyBwYXRobmFtZXMgdGhhdFxuICAgICAqIGRvIG5vdCBpbmNsdWRlIGRyaXZlIG5hbWVzIGZvciByb3V0aW5nLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUocGF0aCwgdXJsLCBiYXNlKSB7XG4gICAgICAvKlxuICAgICAgTWF0Y2hlcyBwYXRocyBmb3IgZmlsZSBwcm90b2NvbCBvbiB3aW5kb3dzLFxuICAgICAgc3VjaCBhcyAvQzovZm9vL2JhciwgYW5kIGNhcHR1cmVzIG9ubHkgL2Zvby9iYXIuXG4gICAgICAqL1xuICAgICAgdmFyIHdpbmRvd3NGaWxlUGF0aEV4cCA9IC9eXFwvW0EtWl06KFxcLy4qKS87XG5cbiAgICAgIHZhciBmaXJzdFBhdGhTZWdtZW50TWF0Y2g7XG5cbiAgICAgIC8vR2V0IHRoZSByZWxhdGl2ZSBwYXRoIGZyb20gdGhlIGlucHV0IFVSTC5cbiAgICAgIGlmICh1cmwuaW5kZXhPZihiYXNlKSA9PT0gMCkge1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShiYXNlLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBpbnB1dCBVUkwgaW50ZW50aW9uYWxseSBjb250YWlucyBhIGZpcnN0IHBhdGggc2VnbWVudCB0aGF0IGVuZHMgd2l0aCBhIGNvbG9uLlxuICAgICAgaWYgKHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHVybCkpIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICB9XG5cbiAgICAgIGZpcnN0UGF0aFNlZ21lbnRNYXRjaCA9IHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHBhdGgpO1xuICAgICAgcmV0dXJuIGZpcnN0UGF0aFNlZ21lbnRNYXRjaCA/IGZpcnN0UGF0aFNlZ21lbnRNYXRjaFsxXSA6IHBhdGg7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDb21wb3NlIGhhc2hiYW5nIHVybCBhbmQgdXBkYXRlIGBhYnNVcmxgIHByb3BlcnR5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWFyY2ggPSB0b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLFxuICAgICAgICBoYXNoID0gdGhpcy4kJGhhc2ggPyAnIycgKyBlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKSA6ICcnO1xuXG4gICAgdGhpcy4kJHVybCA9IGVuY29kZVBhdGgodGhpcy4kJHBhdGgpICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIGhhc2g7XG4gICAgdGhpcy4kJGFic1VybCA9IGFwcEJhc2UgKyAodGhpcy4kJHVybCA/IGhhc2hQcmVmaXggKyB0aGlzLiQkdXJsIDogJycpO1xuICB9O1xuXG4gIHRoaXMuJCRwYXJzZUxpbmtVcmwgPSBmdW5jdGlvbih1cmwsIHJlbEhyZWYpIHtcbiAgICBpZiAoc3RyaXBIYXNoKGFwcEJhc2UpID09IHN0cmlwSGFzaCh1cmwpKSB7XG4gICAgICB0aGlzLiQkcGFyc2UodXJsKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG59XG5cblxuLyoqXG4gKiBMb2NhdGlvbkhhc2hiYW5nVXJsIHJlcHJlc2VudHMgdXJsXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gaHRtbDUgaGlzdG9yeSBhcGkgaXMgZW5hYmxlZCBidXQgdGhlIGJyb3dzZXJcbiAqIGRvZXMgbm90IHN1cHBvcnQgaXQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZSBhcHBsaWNhdGlvbiBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2hQcmVmaXggaGFzaGJhbmcgcHJlZml4XG4gKi9cbmZ1bmN0aW9uIExvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsKGFwcEJhc2UsIGhhc2hQcmVmaXgpIHtcbiAgdGhpcy4kJGh0bWw1ID0gdHJ1ZTtcbiAgTG9jYXRpb25IYXNoYmFuZ1VybC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gIHZhciBhcHBCYXNlTm9GaWxlID0gc3RyaXBGaWxlKGFwcEJhc2UpO1xuXG4gIHRoaXMuJCRwYXJzZUxpbmtVcmwgPSBmdW5jdGlvbih1cmwsIHJlbEhyZWYpIHtcbiAgICBpZiAocmVsSHJlZiAmJiByZWxIcmVmWzBdID09PSAnIycpIHtcbiAgICAgIC8vIHNwZWNpYWwgY2FzZSBmb3IgbGlua3MgdG8gaGFzaCBmcmFnbWVudHM6XG4gICAgICAvLyBrZWVwIHRoZSBvbGQgdXJsIGFuZCBvbmx5IHJlcGxhY2UgdGhlIGhhc2ggZnJhZ21lbnRcbiAgICAgIHRoaXMuaGFzaChyZWxIcmVmLnNsaWNlKDEpKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciByZXdyaXR0ZW5Vcmw7XG4gICAgdmFyIGFwcFVybDtcblxuICAgIGlmIChhcHBCYXNlID09IHN0cmlwSGFzaCh1cmwpKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSB1cmw7XG4gICAgfSBlbHNlIGlmICgoYXBwVXJsID0gYmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLCB1cmwpKSkge1xuICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZSArIGhhc2hQcmVmaXggKyBhcHBVcmw7XG4gICAgfSBlbHNlIGlmIChhcHBCYXNlTm9GaWxlID09PSB1cmwgKyAnLycpIHtcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGU7XG4gICAgfVxuICAgIGlmIChyZXdyaXR0ZW5VcmwpIHtcbiAgICAgIHRoaXMuJCRwYXJzZShyZXdyaXR0ZW5VcmwpO1xuICAgIH1cbiAgICByZXR1cm4gISFyZXdyaXR0ZW5Vcmw7XG4gIH07XG5cbiAgdGhpcy4kJGNvbXBvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VhcmNoID0gdG9LZXlWYWx1ZSh0aGlzLiQkc2VhcmNoKSxcbiAgICAgICAgaGFzaCA9IHRoaXMuJCRoYXNoID8gJyMnICsgZW5jb2RlVXJpU2VnbWVudCh0aGlzLiQkaGFzaCkgOiAnJztcblxuICAgIHRoaXMuJCR1cmwgPSBlbmNvZGVQYXRoKHRoaXMuJCRwYXRoKSArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyBoYXNoO1xuICAgIC8vIGluY2x1ZGUgaGFzaFByZWZpeCBpbiAkJGFic1VybCB3aGVuICQkdXJsIGlzIGVtcHR5IHNvIElFOCAmIDkgZG8gbm90IHJlbG9hZCBwYWdlIGJlY2F1c2Ugb2YgcmVtb3ZhbCBvZiAnIydcbiAgICB0aGlzLiQkYWJzVXJsID0gYXBwQmFzZSArIGhhc2hQcmVmaXggKyB0aGlzLiQkdXJsO1xuICB9O1xuXG59XG5cblxudmFyIGxvY2F0aW9uUHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBBcmUgd2UgaW4gaHRtbDUgbW9kZT9cbiAgICogQHByaXZhdGVcbiAgICovXG4gICQkaHRtbDU6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBIYXMgYW55IGNoYW5nZSBiZWVuIHJlcGxhY2luZz9cbiAgICogQHByaXZhdGVcbiAgICovXG4gICQkcmVwbGFjZTogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI2Fic1VybFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXG4gICAqXG4gICAqIFJldHVybiBmdWxsIHVybCByZXByZXNlbnRhdGlvbiB3aXRoIGFsbCBzZWdtZW50cyBlbmNvZGVkIGFjY29yZGluZyB0byBydWxlcyBzcGVjaWZpZWQgaW5cbiAgICogW1JGQyAzOTg2XShodHRwOi8vd3d3LmlldGYub3JnL3JmYy9yZmMzOTg2LnR4dCkuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIHVybCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgYWJzVXJsID0gJGxvY2F0aW9uLmFic1VybCgpO1xuICAgKiAvLyA9PiBcImh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gZnVsbCB1cmxcbiAgICovXG4gIGFic1VybDogbG9jYXRpb25HZXR0ZXIoJyQkYWJzVXJsJyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3VybFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gdXJsIChlLmcuIGAvcGF0aD9hPWIjaGFzaGApIHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cbiAgICpcbiAgICogQ2hhbmdlIHBhdGgsIHNlYXJjaCBhbmQgaGFzaCwgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gdXJsIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciB1cmwgPSAkbG9jYXRpb24udXJsKCk7XG4gICAqIC8vID0+IFwiL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdXJsIE5ldyB1cmwgd2l0aG91dCBiYXNlIHByZWZpeCAoZS5nLiBgL3BhdGg/YT1iI2hhc2hgKVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHVybFxuICAgKi9cbiAgdXJsOiBmdW5jdGlvbih1cmwpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQodXJsKSlcbiAgICAgIHJldHVybiB0aGlzLiQkdXJsO1xuXG4gICAgdmFyIG1hdGNoID0gUEFUSF9NQVRDSC5leGVjKHVybCk7XG4gICAgaWYgKG1hdGNoWzFdIHx8IHVybCA9PT0gJycpIHRoaXMucGF0aChkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMV0pKTtcbiAgICBpZiAobWF0Y2hbMl0gfHwgbWF0Y2hbMV0gfHwgdXJsID09PSAnJykgdGhpcy5zZWFyY2gobWF0Y2hbM10gfHwgJycpO1xuICAgIHRoaXMuaGFzaChtYXRjaFs1XSB8fCAnJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jcHJvdG9jb2xcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxuICAgKlxuICAgKiBSZXR1cm4gcHJvdG9jb2wgb2YgY3VycmVudCB1cmwuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIHVybCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgcHJvdG9jb2wgPSAkbG9jYXRpb24ucHJvdG9jb2woKTtcbiAgICogLy8gPT4gXCJodHRwXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gcHJvdG9jb2wgb2YgY3VycmVudCB1cmxcbiAgICovXG4gIHByb3RvY29sOiBsb2NhdGlvbkdldHRlcignJCRwcm90b2NvbCcpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNob3N0XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgb25seS5cbiAgICpcbiAgICogUmV0dXJuIGhvc3Qgb2YgY3VycmVudCB1cmwuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIHVybCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgaG9zdCA9ICRsb2NhdGlvbi5ob3N0KCk7XG4gICAqIC8vID0+IFwiZXhhbXBsZS5jb21cIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSBob3N0IG9mIGN1cnJlbnQgdXJsLlxuICAgKi9cbiAgaG9zdDogbG9jYXRpb25HZXR0ZXIoJyQkaG9zdCcpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwb3J0XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgb25seS5cbiAgICpcbiAgICogUmV0dXJuIHBvcnQgb2YgY3VycmVudCB1cmwuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIHVybCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgcG9ydCA9ICRsb2NhdGlvbi5wb3J0KCk7XG4gICAqIC8vID0+IDgwXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IHBvcnRcbiAgICovXG4gIHBvcnQ6IGxvY2F0aW9uR2V0dGVyKCckJHBvcnQnKSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jcGF0aFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gcGF0aCBvZiBjdXJyZW50IHVybCB3aGVuIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXIuXG4gICAqXG4gICAqIENoYW5nZSBwYXRoIHdoZW4gY2FsbGVkIHdpdGggcGFyYW1ldGVyIGFuZCByZXR1cm4gYCRsb2NhdGlvbmAuXG4gICAqXG4gICAqIE5vdGU6IFBhdGggc2hvdWxkIGFsd2F5cyBiZWdpbiB3aXRoIGZvcndhcmQgc2xhc2ggKC8pLCB0aGlzIG1ldGhvZCB3aWxsIGFkZCB0aGUgZm9yd2FyZCBzbGFzaFxuICAgKiBpZiBpdCBpcyBtaXNzaW5nLlxuICAgKlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBnaXZlbiB1cmwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cbiAgICogdmFyIHBhdGggPSAkbG9jYXRpb24ucGF0aCgpO1xuICAgKiAvLyA9PiBcIi9zb21lL3BhdGhcIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcik9fSBwYXRoIE5ldyBwYXRoXG4gICAqIEByZXR1cm4ge3N0cmluZ30gcGF0aFxuICAgKi9cbiAgcGF0aDogbG9jYXRpb25HZXR0ZXJTZXR0ZXIoJyQkcGF0aCcsIGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBwYXRoID0gcGF0aCAhPT0gbnVsbCA/IHBhdGgudG9TdHJpbmcoKSA6ICcnO1xuICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PSAnLycgPyBwYXRoIDogJy8nICsgcGF0aDtcbiAgfSksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3NlYXJjaFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gc2VhcmNoIHBhcnQgKGFzIG9iamVjdCkgb2YgY3VycmVudCB1cmwgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2Ugc2VhcmNoIHBhcnQgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gdXJsIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBzZWFyY2hPYmplY3QgPSAkbG9jYXRpb24uc2VhcmNoKCk7XG4gICAqIC8vID0+IHtmb286ICdiYXInLCBiYXo6ICd4b3hvJ31cbiAgICpcbiAgICogLy8gc2V0IGZvbyB0byAneWlwZWUnXG4gICAqICRsb2NhdGlvbi5zZWFyY2goJ2ZvbycsICd5aXBlZScpO1xuICAgKiAvLyAkbG9jYXRpb24uc2VhcmNoKCkgPT4ge2ZvbzogJ3lpcGVlJywgYmF6OiAneG94byd9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZz58T2JqZWN0LjxBcnJheS48c3RyaW5nPj59IHNlYXJjaCBOZXcgc2VhcmNoIHBhcmFtcyAtIHN0cmluZyBvclxuICAgKiBoYXNoIG9iamVjdC5cbiAgICpcbiAgICogV2hlbiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCB0aGUgbWV0aG9kIGFjdHMgYXMgYSBzZXR0ZXIsIHNldHRpbmcgdGhlIGBzZWFyY2hgIGNvbXBvbmVudFxuICAgKiBvZiBgJGxvY2F0aW9uYCB0byB0aGUgc3BlY2lmaWVkIHZhbHVlLlxuICAgKlxuICAgKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBoYXNoIG9iamVjdCBjb250YWluaW5nIGFuIGFycmF5IG9mIHZhbHVlcywgdGhlc2UgdmFsdWVzIHdpbGwgYmUgZW5jb2RlZFxuICAgKiBhcyBkdXBsaWNhdGUgc2VhcmNoIHBhcmFtZXRlcnMgaW4gdGhlIHVybC5cbiAgICpcbiAgICogQHBhcmFtIHsoc3RyaW5nfE51bWJlcnxBcnJheTxzdHJpbmc+fGJvb2xlYW4pPX0gcGFyYW1WYWx1ZSBJZiBgc2VhcmNoYCBpcyBhIHN0cmluZyBvciBudW1iZXIsIHRoZW4gYHBhcmFtVmFsdWVgXG4gICAqIHdpbGwgb3ZlcnJpZGUgb25seSBhIHNpbmdsZSBzZWFyY2ggcHJvcGVydHkuXG4gICAqXG4gICAqIElmIGBwYXJhbVZhbHVlYCBpcyBhbiBhcnJheSwgaXQgd2lsbCBvdmVycmlkZSB0aGUgcHJvcGVydHkgb2YgdGhlIGBzZWFyY2hgIGNvbXBvbmVudCBvZlxuICAgKiBgJGxvY2F0aW9uYCBzcGVjaWZpZWQgdmlhIHRoZSBmaXJzdCBhcmd1bWVudC5cbiAgICpcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGBudWxsYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgZGVsZXRlZC5cbiAgICpcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGB0cnVlYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgYWRkZWQgd2l0aCBub1xuICAgKiB2YWx1ZSBub3IgdHJhaWxpbmcgZXF1YWwgc2lnbi5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBJZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgcmV0dXJucyB0aGUgcGFyc2VkIGBzZWFyY2hgIG9iamVjdC4gSWYgY2FsbGVkIHdpdGhcbiAgICogb25lIG9yIG1vcmUgYXJndW1lbnRzIHJldHVybnMgYCRsb2NhdGlvbmAgb2JqZWN0IGl0c2VsZi5cbiAgICovXG4gIHNlYXJjaDogZnVuY3Rpb24oc2VhcmNoLCBwYXJhbVZhbHVlKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiB0aGlzLiQkc2VhcmNoO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBpZiAoaXNTdHJpbmcoc2VhcmNoKSB8fCBpc051bWJlcihzZWFyY2gpKSB7XG4gICAgICAgICAgc2VhcmNoID0gc2VhcmNoLnRvU3RyaW5nKCk7XG4gICAgICAgICAgdGhpcy4kJHNlYXJjaCA9IHBhcnNlS2V5VmFsdWUoc2VhcmNoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdChzZWFyY2gpKSB7XG4gICAgICAgICAgc2VhcmNoID0gY29weShzZWFyY2gsIHt9KTtcbiAgICAgICAgICAvLyByZW1vdmUgb2JqZWN0IHVuZGVmaW5lZCBvciBudWxsIHByb3BlcnRpZXNcbiAgICAgICAgICBmb3JFYWNoKHNlYXJjaCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIGRlbGV0ZSBzZWFyY2hba2V5XTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMuJCRzZWFyY2ggPSBzZWFyY2g7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdpc3JjaGFyZycsXG4gICAgICAgICAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgb2YgdGhlIGAkbG9jYXRpb24jc2VhcmNoKClgIGNhbGwgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXNVbmRlZmluZWQocGFyYW1WYWx1ZSkgfHwgcGFyYW1WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLiQkc2VhcmNoW3NlYXJjaF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kJHNlYXJjaFtzZWFyY2hdID0gcGFyYW1WYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hhc2hcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cbiAgICpcbiAgICogUmV0dXJuIGhhc2ggZnJhZ21lbnQgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2UgaGFzaCBmcmFnbWVudCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxuICAgKlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBnaXZlbiB1cmwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG8jaGFzaFZhbHVlXG4gICAqIHZhciBoYXNoID0gJGxvY2F0aW9uLmhhc2goKTtcbiAgICogLy8gPT4gXCJoYXNoVmFsdWVcIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcik9fSBoYXNoIE5ldyBoYXNoIGZyYWdtZW50XG4gICAqIEByZXR1cm4ge3N0cmluZ30gaGFzaFxuICAgKi9cbiAgaGFzaDogbG9jYXRpb25HZXR0ZXJTZXR0ZXIoJyQkaGFzaCcsIGZ1bmN0aW9uKGhhc2gpIHtcbiAgICByZXR1cm4gaGFzaCAhPT0gbnVsbCA/IGhhc2gudG9TdHJpbmcoKSA6ICcnO1xuICB9KSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jcmVwbGFjZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSWYgY2FsbGVkLCBhbGwgY2hhbmdlcyB0byAkbG9jYXRpb24gZHVyaW5nIGN1cnJlbnQgYCRkaWdlc3RgIHdpbGwgYmUgcmVwbGFjaW5nIGN1cnJlbnQgaGlzdG9yeVxuICAgKiByZWNvcmQsIGluc3RlYWQgb2YgYWRkaW5nIG5ldyBvbmUuXG4gICAqL1xuICByZXBsYWNlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiQkcmVwbGFjZSA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn07XG5cbmZvckVhY2goW0xvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsLCBMb2NhdGlvbkhhc2hiYW5nVXJsLCBMb2NhdGlvbkh0bWw1VXJsXSwgZnVuY3Rpb24oTG9jYXRpb24pIHtcbiAgTG9jYXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSk7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3N0YXRlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiB0aGUgaGlzdG9yeSBzdGF0ZSBvYmplY3Qgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2UgdGhlIGhpc3Rvcnkgc3RhdGUgb2JqZWN0IHdoZW4gY2FsbGVkIHdpdGggb25lIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxuICAgKiBUaGUgc3RhdGUgb2JqZWN0IGlzIGxhdGVyIHBhc3NlZCB0byBgcHVzaFN0YXRlYCBvciBgcmVwbGFjZVN0YXRlYC5cbiAgICpcbiAgICogTk9URTogVGhpcyBtZXRob2QgaXMgc3VwcG9ydGVkIG9ubHkgaW4gSFRNTDUgbW9kZSBhbmQgb25seSBpbiBicm93c2VycyBzdXBwb3J0aW5nXG4gICAqIHRoZSBIVE1MNSBIaXN0b3J5IEFQSSAoaS5lLiBtZXRob2RzIGBwdXNoU3RhdGVgIGFuZCBgcmVwbGFjZVN0YXRlYCkuIElmIHlvdSBuZWVkIHRvIHN1cHBvcnRcbiAgICogb2xkZXIgYnJvd3NlcnMgKGxpa2UgSUU5IG9yIEFuZHJvaWQgPCA0LjApLCBkb24ndCB1c2UgdGhpcyBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0PX0gc3RhdGUgU3RhdGUgb2JqZWN0IGZvciBwdXNoU3RhdGUgb3IgcmVwbGFjZVN0YXRlXG4gICAqIEByZXR1cm4ge29iamVjdH0gc3RhdGVcbiAgICovXG4gIExvY2F0aW9uLnByb3RvdHlwZS5zdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKVxuICAgICAgcmV0dXJuIHRoaXMuJCRzdGF0ZTtcblxuICAgIGlmIChMb2NhdGlvbiAhPT0gTG9jYXRpb25IdG1sNVVybCB8fCAhdGhpcy4kJGh0bWw1KSB7XG4gICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ25vc3RhdGUnLCAnSGlzdG9yeSBBUEkgc3RhdGUgc3VwcG9ydCBpcyBhdmFpbGFibGUgb25seSAnICtcbiAgICAgICAgJ2luIEhUTUw1IG1vZGUgYW5kIG9ubHkgaW4gYnJvd3NlcnMgc3VwcG9ydGluZyBIVE1MNSBIaXN0b3J5IEFQSScpO1xuICAgIH1cbiAgICAvLyBUaGUgdXNlciBtaWdodCBtb2RpZnkgYHN0YXRlT2JqZWN0YCBhZnRlciBpbnZva2luZyBgJGxvY2F0aW9uLnN0YXRlKHN0YXRlT2JqZWN0KWBcbiAgICAvLyBidXQgd2UncmUgY2hhbmdpbmcgdGhlICQkc3RhdGUgcmVmZXJlbmNlIHRvICRicm93c2VyLnN0YXRlKCkgZHVyaW5nIHRoZSAkZGlnZXN0XG4gICAgLy8gc28gdGhlIG1vZGlmaWNhdGlvbiB3aW5kb3cgaXMgbmFycm93LlxuICAgIHRoaXMuJCRzdGF0ZSA9IGlzVW5kZWZpbmVkKHN0YXRlKSA/IG51bGwgOiBzdGF0ZTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xufSk7XG5cblxuZnVuY3Rpb24gbG9jYXRpb25HZXR0ZXIocHJvcGVydHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzW3Byb3BlcnR5XTtcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBsb2NhdGlvbkdldHRlclNldHRlcihwcm9wZXJ0eSwgcHJlcHJvY2Vzcykge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuICAgICAgcmV0dXJuIHRoaXNbcHJvcGVydHldO1xuXG4gICAgdGhpc1twcm9wZXJ0eV0gPSBwcmVwcm9jZXNzKHZhbHVlKTtcbiAgICB0aGlzLiQkY29tcG9zZSgpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59XG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGxvY2F0aW9uXG4gKlxuICogQHJlcXVpcmVzICRyb290RWxlbWVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlICRsb2NhdGlvbiBzZXJ2aWNlIHBhcnNlcyB0aGUgVVJMIGluIHRoZSBicm93c2VyIGFkZHJlc3MgYmFyIChiYXNlZCBvbiB0aGVcbiAqIFt3aW5kb3cubG9jYXRpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL3dpbmRvdy5sb2NhdGlvbikpIGFuZCBtYWtlcyB0aGUgVVJMXG4gKiBhdmFpbGFibGUgdG8geW91ciBhcHBsaWNhdGlvbi4gQ2hhbmdlcyB0byB0aGUgVVJMIGluIHRoZSBhZGRyZXNzIGJhciBhcmUgcmVmbGVjdGVkIGludG9cbiAqICRsb2NhdGlvbiBzZXJ2aWNlIGFuZCBjaGFuZ2VzIHRvICRsb2NhdGlvbiBhcmUgcmVmbGVjdGVkIGludG8gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIuXG4gKlxuICogKipUaGUgJGxvY2F0aW9uIHNlcnZpY2U6KipcbiAqXG4gKiAtIEV4cG9zZXMgdGhlIGN1cnJlbnQgVVJMIGluIHRoZSBicm93c2VyIGFkZHJlc3MgYmFyLCBzbyB5b3UgY2FuXG4gKiAgIC0gV2F0Y2ggYW5kIG9ic2VydmUgdGhlIFVSTC5cbiAqICAgLSBDaGFuZ2UgdGhlIFVSTC5cbiAqIC0gU3luY2hyb25pemVzIHRoZSBVUkwgd2l0aCB0aGUgYnJvd3NlciB3aGVuIHRoZSB1c2VyXG4gKiAgIC0gQ2hhbmdlcyB0aGUgYWRkcmVzcyBiYXIuXG4gKiAgIC0gQ2xpY2tzIHRoZSBiYWNrIG9yIGZvcndhcmQgYnV0dG9uIChvciBjbGlja3MgYSBIaXN0b3J5IGxpbmspLlxuICogICAtIENsaWNrcyBvbiBhIGxpbmsuXG4gKiAtIFJlcHJlc2VudHMgdGhlIFVSTCBvYmplY3QgYXMgYSBzZXQgb2YgbWV0aG9kcyAocHJvdG9jb2wsIGhvc3QsIHBvcnQsIHBhdGgsIHNlYXJjaCwgaGFzaCkuXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gc2VlIHtAbGluayBndWlkZS8kbG9jYXRpb24gRGV2ZWxvcGVyIEd1aWRlOiBVc2luZyAkbG9jYXRpb259XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRsb2NhdGlvblByb3ZpZGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZSB0aGUgYCRsb2NhdGlvblByb3ZpZGVyYCB0byBjb25maWd1cmUgaG93IHRoZSBhcHBsaWNhdGlvbiBkZWVwIGxpbmtpbmcgcGF0aHMgYXJlIHN0b3JlZC5cbiAqL1xuZnVuY3Rpb24gJExvY2F0aW9uUHJvdmlkZXIoKSB7XG4gIHZhciBoYXNoUHJlZml4ID0gJycsXG4gICAgICBodG1sNU1vZGUgPSB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICByZXF1aXJlQmFzZTogdHJ1ZSxcbiAgICAgICAgcmV3cml0ZUxpbmtzOiB0cnVlXG4gICAgICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvblByb3ZpZGVyI2hhc2hQcmVmaXhcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcHJlZml4IFByZWZpeCBmb3IgaGFzaCBwYXJ0IChjb250YWluaW5nIHBhdGggYW5kIHNlYXJjaClcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICovXG4gIHRoaXMuaGFzaFByZWZpeCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIGlmIChpc0RlZmluZWQocHJlZml4KSkge1xuICAgICAgaGFzaFByZWZpeCA9IHByZWZpeDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaGFzaFByZWZpeDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXIjaHRtbDVNb2RlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBAcGFyYW0geyhib29sZWFufE9iamVjdCk9fSBtb2RlIElmIGJvb2xlYW4sIHNldHMgYGh0bWw1TW9kZS5lbmFibGVkYCB0byB2YWx1ZS5cbiAgICogICBJZiBvYmplY3QsIHNldHMgYGVuYWJsZWRgLCBgcmVxdWlyZUJhc2VgIGFuZCBgcmV3cml0ZUxpbmtzYCB0byByZXNwZWN0aXZlIHZhbHVlcy4gU3VwcG9ydGVkXG4gICAqICAgcHJvcGVydGllczpcbiAgICogICAtICoqZW5hYmxlZCoqIOKAkyBge2Jvb2xlYW59YCDigJMgKGRlZmF1bHQ6IGZhbHNlKSBJZiB0cnVlLCB3aWxsIHJlbHkgb24gYGhpc3RvcnkucHVzaFN0YXRlYCB0b1xuICAgKiAgICAgY2hhbmdlIHVybHMgd2hlcmUgc3VwcG9ydGVkLiBXaWxsIGZhbGwgYmFjayB0byBoYXNoLXByZWZpeGVkIHBhdGhzIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG4gICAqICAgICBzdXBwb3J0IGBwdXNoU3RhdGVgLlxuICAgKiAgIC0gKipyZXF1aXJlQmFzZSoqIC0gYHtib29sZWFufWAgLSAoZGVmYXVsdDogYHRydWVgKSBXaGVuIGh0bWw1TW9kZSBpcyBlbmFibGVkLCBzcGVjaWZpZXNcbiAgICogICAgIHdoZXRoZXIgb3Igbm90IGEgPGJhc2U+IHRhZyBpcyByZXF1aXJlZCB0byBiZSBwcmVzZW50LiBJZiBgZW5hYmxlZGAgYW5kIGByZXF1aXJlQmFzZWAgYXJlXG4gICAqICAgICB0cnVlLCBhbmQgYSBiYXNlIHRhZyBpcyBub3QgcHJlc2VudCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24gd2hlbiBgJGxvY2F0aW9uYCBpcyBpbmplY3RlZC5cbiAgICogICAgIFNlZSB0aGUge0BsaW5rIGd1aWRlLyRsb2NhdGlvbiAkbG9jYXRpb24gZ3VpZGUgZm9yIG1vcmUgaW5mb3JtYXRpb259XG4gICAqICAgLSAqKnJld3JpdGVMaW5rcyoqIC0gYHtib29sZWFufWAgLSAoZGVmYXVsdDogYHRydWVgKSBXaGVuIGh0bWw1TW9kZSBpcyBlbmFibGVkLFxuICAgKiAgICAgZW5hYmxlcy9kaXNhYmxlcyB1cmwgcmV3cml0aW5nIGZvciByZWxhdGl2ZSBsaW5rcy5cbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gaHRtbDVNb2RlIG9iamVjdCBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxuICAgKi9cbiAgdGhpcy5odG1sNU1vZGUgPSBmdW5jdGlvbihtb2RlKSB7XG4gICAgaWYgKGlzQm9vbGVhbihtb2RlKSkge1xuICAgICAgaHRtbDVNb2RlLmVuYWJsZWQgPSBtb2RlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChtb2RlKSkge1xuXG4gICAgICBpZiAoaXNCb29sZWFuKG1vZGUuZW5hYmxlZCkpIHtcbiAgICAgICAgaHRtbDVNb2RlLmVuYWJsZWQgPSBtb2RlLmVuYWJsZWQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0Jvb2xlYW4obW9kZS5yZXF1aXJlQmFzZSkpIHtcbiAgICAgICAgaHRtbDVNb2RlLnJlcXVpcmVCYXNlID0gbW9kZS5yZXF1aXJlQmFzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQm9vbGVhbihtb2RlLnJld3JpdGVMaW5rcykpIHtcbiAgICAgICAgaHRtbDVNb2RlLnJld3JpdGVMaW5rcyA9IG1vZGUucmV3cml0ZUxpbmtzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGh0bWw1TW9kZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBldmVudFxuICAgKiBAbmFtZSAkbG9jYXRpb24jJGxvY2F0aW9uQ2hhbmdlU3RhcnRcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnJvYWRjYXN0ZWQgYmVmb3JlIGEgVVJMIHdpbGwgY2hhbmdlLlxuICAgKlxuICAgKiBUaGlzIGNoYW5nZSBjYW4gYmUgcHJldmVudGVkIGJ5IGNhbGxpbmdcbiAgICogYHByZXZlbnREZWZhdWx0YCBtZXRob2Qgb2YgdGhlIGV2ZW50LiBTZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBmb3IgbW9yZVxuICAgKiBkZXRhaWxzIGFib3V0IGV2ZW50IG9iamVjdC4gVXBvbiBzdWNjZXNzZnVsIGNoYW5nZVxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc30gaXMgZmlyZWQuXG4gICAqXG4gICAqIFRoZSBgbmV3U3RhdGVgIGFuZCBgb2xkU3RhdGVgIHBhcmFtZXRlcnMgbWF5IGJlIGRlZmluZWQgb25seSBpbiBIVE1MNSBtb2RlIGFuZCB3aGVuXG4gICAqIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBIVE1MNSBIaXN0b3J5IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZXdTdGF0ZSBOZXcgaGlzdG9yeSBzdGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRTdGF0ZSBIaXN0b3J5IHN0YXRlIG9iamVjdCB0aGF0IHdhcyBiZWZvcmUgaXQgd2FzIGNoYW5nZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZXZlbnRcbiAgICogQG5hbWUgJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnJvYWRjYXN0ZWQgYWZ0ZXIgYSBVUkwgd2FzIGNoYW5nZWQuXG4gICAqXG4gICAqIFRoZSBgbmV3U3RhdGVgIGFuZCBgb2xkU3RhdGVgIHBhcmFtZXRlcnMgbWF5IGJlIGRlZmluZWQgb25seSBpbiBIVE1MNSBtb2RlIGFuZCB3aGVuXG4gICAqIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBIVE1MNSBIaXN0b3J5IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZXdTdGF0ZSBOZXcgaGlzdG9yeSBzdGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRTdGF0ZSBIaXN0b3J5IHN0YXRlIG9iamVjdCB0aGF0IHdhcyBiZWZvcmUgaXQgd2FzIGNoYW5nZWQuXG4gICAqL1xuXG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckc25pZmZlcicsICckcm9vdEVsZW1lbnQnLCAnJHdpbmRvdycsXG4gICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAkYnJvd3NlciwgJHNuaWZmZXIsICRyb290RWxlbWVudCwgJHdpbmRvdykge1xuICAgIHZhciAkbG9jYXRpb24sXG4gICAgICAgIExvY2F0aW9uTW9kZSxcbiAgICAgICAgYmFzZUhyZWYgPSAkYnJvd3Nlci5iYXNlSHJlZigpLCAvLyBpZiBiYXNlW2hyZWZdIGlzIHVuZGVmaW5lZCwgaXQgZGVmYXVsdHMgdG8gJydcbiAgICAgICAgaW5pdGlhbFVybCA9ICRicm93c2VyLnVybCgpLFxuICAgICAgICBhcHBCYXNlO1xuXG4gICAgaWYgKGh0bWw1TW9kZS5lbmFibGVkKSB7XG4gICAgICBpZiAoIWJhc2VIcmVmICYmIGh0bWw1TW9kZS5yZXF1aXJlQmFzZSkge1xuICAgICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ25vYmFzZScsXG4gICAgICAgICAgXCIkbG9jYXRpb24gaW4gSFRNTDUgbW9kZSByZXF1aXJlcyBhIDxiYXNlPiB0YWcgdG8gYmUgcHJlc2VudCFcIik7XG4gICAgICB9XG4gICAgICBhcHBCYXNlID0gc2VydmVyQmFzZShpbml0aWFsVXJsKSArIChiYXNlSHJlZiB8fCAnLycpO1xuICAgICAgTG9jYXRpb25Nb2RlID0gJHNuaWZmZXIuaGlzdG9yeSA/IExvY2F0aW9uSHRtbDVVcmwgOiBMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybDtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBwQmFzZSA9IHN0cmlwSGFzaChpbml0aWFsVXJsKTtcbiAgICAgIExvY2F0aW9uTW9kZSA9IExvY2F0aW9uSGFzaGJhbmdVcmw7XG4gICAgfVxuICAgICRsb2NhdGlvbiA9IG5ldyBMb2NhdGlvbk1vZGUoYXBwQmFzZSwgJyMnICsgaGFzaFByZWZpeCk7XG4gICAgJGxvY2F0aW9uLiQkcGFyc2VMaW5rVXJsKGluaXRpYWxVcmwsIGluaXRpYWxVcmwpO1xuXG4gICAgJGxvY2F0aW9uLiQkc3RhdGUgPSAkYnJvd3Nlci5zdGF0ZSgpO1xuXG4gICAgdmFyIElHTk9SRV9VUklfUkVHRVhQID0gL15cXHMqKGphdmFzY3JpcHR8bWFpbHRvKTovaTtcblxuICAgIGZ1bmN0aW9uIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sodXJsLCByZXBsYWNlLCBzdGF0ZSkge1xuICAgICAgdmFyIG9sZFVybCA9ICRsb2NhdGlvbi51cmwoKTtcbiAgICAgIHZhciBvbGRTdGF0ZSA9ICRsb2NhdGlvbi4kJHN0YXRlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgJGJyb3dzZXIudXJsKHVybCwgcmVwbGFjZSwgc3RhdGUpO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSAkbG9jYXRpb24uc3RhdGUoKSByZXR1cm5zIHJlZmVyZW50aWFsbHkgaWRlbnRpY2FsIChub3QganVzdCBkZWVwbHkgZXF1YWwpXG4gICAgICAgIC8vIHN0YXRlIG9iamVjdDsgdGhpcyBtYWtlcyBwb3NzaWJsZSBxdWljayBjaGVja2luZyBpZiB0aGUgc3RhdGUgY2hhbmdlZCBpbiB0aGUgZGlnZXN0XG4gICAgICAgIC8vIGxvb3AuIENoZWNraW5nIGRlZXAgZXF1YWxpdHkgd291bGQgYmUgdG9vIGV4cGVuc2l2ZS5cbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSAkYnJvd3Nlci5zdGF0ZSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBSZXN0b3JlIG9sZCB2YWx1ZXMgaWYgcHVzaFN0YXRlIGZhaWxzXG4gICAgICAgICRsb2NhdGlvbi51cmwob2xkVXJsKTtcbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcblxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cblxuICAgICRyb290RWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgLy8gVE9ETyh2b2p0YSk6IHJld3JpdGUgbGluayB3aGVuIG9wZW5pbmcgaW4gbmV3IHRhYi93aW5kb3cgKGluIGxlZ2FjeSBicm93c2VyKVxuICAgICAgLy8gY3VycmVudGx5IHdlIG9wZW4gbmljZSB1cmwgbGluayBhbmQgcmVkaXJlY3QgdGhlblxuXG4gICAgICBpZiAoIWh0bWw1TW9kZS5yZXdyaXRlTGlua3MgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LndoaWNoID09IDIgfHwgZXZlbnQuYnV0dG9uID09IDIpIHJldHVybjtcblxuICAgICAgdmFyIGVsbSA9IGpxTGl0ZShldmVudC50YXJnZXQpO1xuXG4gICAgICAvLyB0cmF2ZXJzZSB0aGUgRE9NIHVwIHRvIGZpbmQgZmlyc3QgQSB0YWdcbiAgICAgIHdoaWxlIChub2RlTmFtZV8oZWxtWzBdKSAhPT0gJ2EnKSB7XG4gICAgICAgIC8vIGlnbm9yZSByZXdyaXRpbmcgaWYgbm8gQSB0YWcgKHJlYWNoZWQgcm9vdCBlbGVtZW50LCBvciBubyBwYXJlbnQgLSByZW1vdmVkIGZyb20gZG9jdW1lbnQpXG4gICAgICAgIGlmIChlbG1bMF0gPT09ICRyb290RWxlbWVudFswXSB8fCAhKGVsbSA9IGVsbS5wYXJlbnQoKSlbMF0pIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGFic0hyZWYgPSBlbG0ucHJvcCgnaHJlZicpO1xuICAgICAgLy8gZ2V0IHRoZSBhY3R1YWwgaHJlZiBhdHRyaWJ1dGUgLSBzZWVcbiAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kZDM0NzE0OCh2PXZzLjg1KS5hc3B4XG4gICAgICB2YXIgcmVsSHJlZiA9IGVsbS5hdHRyKCdocmVmJykgfHwgZWxtLmF0dHIoJ3hsaW5rOmhyZWYnKTtcblxuICAgICAgaWYgKGlzT2JqZWN0KGFic0hyZWYpICYmIGFic0hyZWYudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xuICAgICAgICAvLyBTVkdBbmltYXRlZFN0cmluZy5hbmltVmFsIHNob3VsZCBiZSBpZGVudGljYWwgdG8gU1ZHQW5pbWF0ZWRTdHJpbmcuYmFzZVZhbCwgdW5sZXNzIGR1cmluZ1xuICAgICAgICAvLyBhbiBhbmltYXRpb24uXG4gICAgICAgIGFic0hyZWYgPSB1cmxSZXNvbHZlKGFic0hyZWYuYW5pbVZhbCkuaHJlZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWdub3JlIHdoZW4gdXJsIGlzIHN0YXJ0ZWQgd2l0aCBqYXZhc2NyaXB0OiBvciBtYWlsdG86XG4gICAgICBpZiAoSUdOT1JFX1VSSV9SRUdFWFAudGVzdChhYnNIcmVmKSkgcmV0dXJuO1xuXG4gICAgICBpZiAoYWJzSHJlZiAmJiAhZWxtLmF0dHIoJ3RhcmdldCcpICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICBpZiAoJGxvY2F0aW9uLiQkcGFyc2VMaW5rVXJsKGFic0hyZWYsIHJlbEhyZWYpKSB7XG4gICAgICAgICAgLy8gV2UgZG8gYSBwcmV2ZW50RGVmYXVsdCBmb3IgYWxsIHVybHMgdGhhdCBhcmUgcGFydCBvZiB0aGUgYW5ndWxhciBhcHBsaWNhdGlvbixcbiAgICAgICAgICAvLyBpbiBodG1sNW1vZGUgYW5kIGFsc28gd2l0aG91dCwgc28gdGhhdCB3ZSBhcmUgYWJsZSB0byBhYm9ydCBuYXZpZ2F0aW9uIHdpdGhvdXRcbiAgICAgICAgICAvLyBnZXR0aW5nIGRvdWJsZSBlbnRyaWVzIGluIHRoZSBsb2NhdGlvbiBoaXN0b3J5LlxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgLy8gdXBkYXRlIGxvY2F0aW9uIG1hbnVhbGx5XG4gICAgICAgICAgaWYgKCRsb2NhdGlvbi5hYnNVcmwoKSAhPSAkYnJvd3Nlci51cmwoKSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgIC8vIGhhY2sgdG8gd29yayBhcm91bmQgRkY2IGJ1ZyA2ODQyMDggd2hlbiBzY2VuYXJpbyBydW5uZXIgY2xpY2tzIG9uIGxpbmtzXG4gICAgICAgICAgICAkd2luZG93LmFuZ3VsYXJbJ2ZmLTY4NDIwOC1wcmV2ZW50RGVmYXVsdCddID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgLy8gcmV3cml0ZSBoYXNoYmFuZyB1cmwgPD4gaHRtbDUgdXJsXG4gICAgaWYgKHRyaW1FbXB0eUhhc2goJGxvY2F0aW9uLmFic1VybCgpKSAhPSB0cmltRW1wdHlIYXNoKGluaXRpYWxVcmwpKSB7XG4gICAgICAkYnJvd3Nlci51cmwoJGxvY2F0aW9uLmFic1VybCgpLCB0cnVlKTtcbiAgICB9XG5cbiAgICB2YXIgaW5pdGlhbGl6aW5nID0gdHJ1ZTtcblxuICAgIC8vIHVwZGF0ZSAkbG9jYXRpb24gd2hlbiAkYnJvd3NlciB1cmwgY2hhbmdlc1xuICAgICRicm93c2VyLm9uVXJsQ2hhbmdlKGZ1bmN0aW9uKG5ld1VybCwgbmV3U3RhdGUpIHtcbiAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9sZFVybCA9ICRsb2NhdGlvbi5hYnNVcmwoKTtcbiAgICAgICAgdmFyIG9sZFN0YXRlID0gJGxvY2F0aW9uLiQkc3RhdGU7XG4gICAgICAgIHZhciBkZWZhdWx0UHJldmVudGVkO1xuXG4gICAgICAgICRsb2NhdGlvbi4kJHBhcnNlKG5ld1VybCk7XG4gICAgICAgICRsb2NhdGlvbi4kJHN0YXRlID0gbmV3U3RhdGU7XG5cbiAgICAgICAgZGVmYXVsdFByZXZlbnRlZCA9ICRyb290U2NvcGUuJGJyb2FkY2FzdCgnJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLCBuZXdVcmwsIG9sZFVybCxcbiAgICAgICAgICAgIG5ld1N0YXRlLCBvbGRTdGF0ZSkuZGVmYXVsdFByZXZlbnRlZDtcblxuICAgICAgICAvLyBpZiB0aGUgbG9jYXRpb24gd2FzIGNoYW5nZWQgYnkgYSBgJGxvY2F0aW9uQ2hhbmdlU3RhcnRgIGhhbmRsZXIgdGhlbiBzdG9wXG4gICAgICAgIC8vIHByb2Nlc3NpbmcgdGhpcyBsb2NhdGlvbiBjaGFuZ2VcbiAgICAgICAgaWYgKCRsb2NhdGlvbi5hYnNVcmwoKSAhPT0gbmV3VXJsKSByZXR1cm47XG5cbiAgICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShvbGRVcmwpO1xuICAgICAgICAgICRsb2NhdGlvbi4kJHN0YXRlID0gb2xkU3RhdGU7XG4gICAgICAgICAgc2V0QnJvd3NlclVybFdpdGhGYWxsYmFjayhvbGRVcmwsIGZhbHNlLCBvbGRTdGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgICAgICAgYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoISRyb290U2NvcGUuJCRwaGFzZSkgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgfSk7XG5cbiAgICAvLyB1cGRhdGUgYnJvd3NlclxuICAgICRyb290U2NvcGUuJHdhdGNoKGZ1bmN0aW9uICRsb2NhdGlvbldhdGNoKCkge1xuICAgICAgdmFyIG9sZFVybCA9IHRyaW1FbXB0eUhhc2goJGJyb3dzZXIudXJsKCkpO1xuICAgICAgdmFyIG5ld1VybCA9IHRyaW1FbXB0eUhhc2goJGxvY2F0aW9uLmFic1VybCgpKTtcbiAgICAgIHZhciBvbGRTdGF0ZSA9ICRicm93c2VyLnN0YXRlKCk7XG4gICAgICB2YXIgY3VycmVudFJlcGxhY2UgPSAkbG9jYXRpb24uJCRyZXBsYWNlO1xuICAgICAgdmFyIHVybE9yU3RhdGVDaGFuZ2VkID0gb2xkVXJsICE9PSBuZXdVcmwgfHxcbiAgICAgICAgKCRsb2NhdGlvbi4kJGh0bWw1ICYmICRzbmlmZmVyLmhpc3RvcnkgJiYgb2xkU3RhdGUgIT09ICRsb2NhdGlvbi4kJHN0YXRlKTtcblxuICAgICAgaWYgKGluaXRpYWxpemluZyB8fCB1cmxPclN0YXRlQ2hhbmdlZCkge1xuICAgICAgICBpbml0aWFsaXppbmcgPSBmYWxzZTtcblxuICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIG5ld1VybCA9ICRsb2NhdGlvbi5hYnNVcmwoKTtcbiAgICAgICAgICB2YXIgZGVmYXVsdFByZXZlbnRlZCA9ICRyb290U2NvcGUuJGJyb2FkY2FzdCgnJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLCBuZXdVcmwsIG9sZFVybCxcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKS5kZWZhdWx0UHJldmVudGVkO1xuXG4gICAgICAgICAgLy8gaWYgdGhlIGxvY2F0aW9uIHdhcyBjaGFuZ2VkIGJ5IGEgYCRsb2NhdGlvbkNoYW5nZVN0YXJ0YCBoYW5kbGVyIHRoZW4gc3RvcFxuICAgICAgICAgIC8vIHByb2Nlc3NpbmcgdGhpcyBsb2NhdGlvbiBjaGFuZ2VcbiAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSBuZXdVcmwpIHJldHVybjtcblxuICAgICAgICAgIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShvbGRVcmwpO1xuICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHVybE9yU3RhdGVDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sobmV3VXJsLCBjdXJyZW50UmVwbGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRTdGF0ZSA9PT0gJGxvY2F0aW9uLiQkc3RhdGUgPyBudWxsIDogJGxvY2F0aW9uLiQkc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAkbG9jYXRpb24uJCRyZXBsYWNlID0gZmFsc2U7XG5cbiAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gcmV0dXJuIGFueXRoaW5nIGJlY2F1c2UgJGV2YWxBc3luYyB3aWxsIG1ha2UgdGhlIGRpZ2VzdCBsb29wIGRpcnR5IHdoZW5cbiAgICAgIC8vIHRoZXJlIGlzIGEgY2hhbmdlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gJGxvY2F0aW9uO1xuXG4gICAgZnVuY3Rpb24gYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCAkbG9jYXRpb24uYWJzVXJsKCksIG9sZFVybCxcbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKTtcbiAgICB9XG59XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGxvZ1xuICogQHJlcXVpcmVzICR3aW5kb3dcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNpbXBsZSBzZXJ2aWNlIGZvciBsb2dnaW5nLiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHNhZmVseSB3cml0ZXMgdGhlIG1lc3NhZ2VcbiAqIGludG8gdGhlIGJyb3dzZXIncyBjb25zb2xlIChpZiBwcmVzZW50KS5cbiAqXG4gKiBUaGUgbWFpbiBwdXJwb3NlIG9mIHRoaXMgc2VydmljZSBpcyB0byBzaW1wbGlmeSBkZWJ1Z2dpbmcgYW5kIHRyb3VibGVzaG9vdGluZy5cbiAqXG4gKiBUaGUgZGVmYXVsdCBpcyB0byBsb2cgYGRlYnVnYCBtZXNzYWdlcy4gWW91IGNhbiB1c2VcbiAqIHtAbGluayBuZy4kbG9nUHJvdmlkZXIgbmcuJGxvZ1Byb3ZpZGVyI2RlYnVnRW5hYmxlZH0gdG8gY2hhbmdlIHRoaXMuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImxvZ0V4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdsb2dFeGFtcGxlJywgW10pXG4gICAgICAgICAuY29udHJvbGxlcignTG9nQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2cnLCBmdW5jdGlvbigkc2NvcGUsICRsb2cpIHtcbiAgICAgICAgICAgJHNjb3BlLiRsb2cgPSAkbG9nO1xuICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9ICdIZWxsbyBXb3JsZCEnO1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTG9nQ29udHJvbGxlclwiPlxuICAgICAgICAgPHA+UmVsb2FkIHRoaXMgcGFnZSB3aXRoIG9wZW4gY29uc29sZSwgZW50ZXIgdGV4dCBhbmQgaGl0IHRoZSBsb2cgYnV0dG9uLi4uPC9wPlxuICAgICAgICAgTWVzc2FnZTpcbiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibWVzc2FnZVwiLz5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmxvZyhtZXNzYWdlKVwiPmxvZzwvYnV0dG9uPlxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRsb2cud2FybihtZXNzYWdlKVwiPndhcm48L2J1dHRvbj5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmluZm8obWVzc2FnZSlcIj5pbmZvPC9idXR0b24+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5lcnJvcihtZXNzYWdlKVwiPmVycm9yPC9idXR0b24+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGxvZ1Byb3ZpZGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZSB0aGUgYCRsb2dQcm92aWRlcmAgdG8gY29uZmlndXJlIGhvdyB0aGUgYXBwbGljYXRpb24gbG9ncyBtZXNzYWdlc1xuICovXG5mdW5jdGlvbiAkTG9nUHJvdmlkZXIoKSB7XG4gIHZhciBkZWJ1ZyA9IHRydWUsXG4gICAgICBzZWxmID0gdGhpcztcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBmbGFnIGVuYWJsZSBvciBkaXNhYmxlIGRlYnVnIGxldmVsIG1lc3NhZ2VzXG4gICAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlIGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXG4gICAqL1xuICB0aGlzLmRlYnVnRW5hYmxlZCA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICBpZiAoaXNEZWZpbmVkKGZsYWcpKSB7XG4gICAgICBkZWJ1ZyA9IGZsYWc7XG4gICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkZWJ1ZztcbiAgICB9XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgZnVuY3Rpb24oJHdpbmRvdykge1xuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjbG9nXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBXcml0ZSBhIGxvZyBtZXNzYWdlXG4gICAgICAgKi9cbiAgICAgIGxvZzogY29uc29sZUxvZygnbG9nJyksXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGxvZyNpbmZvXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBXcml0ZSBhbiBpbmZvcm1hdGlvbiBtZXNzYWdlXG4gICAgICAgKi9cbiAgICAgIGluZm86IGNvbnNvbGVMb2coJ2luZm8nKSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkbG9nI3dhcm5cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGEgd2FybmluZyBtZXNzYWdlXG4gICAgICAgKi9cbiAgICAgIHdhcm46IGNvbnNvbGVMb2coJ3dhcm4nKSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkbG9nI2Vycm9yXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBXcml0ZSBhbiBlcnJvciBtZXNzYWdlXG4gICAgICAgKi9cbiAgICAgIGVycm9yOiBjb25zb2xlTG9nKCdlcnJvcicpLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjZGVidWdcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGEgZGVidWcgbWVzc2FnZVxuICAgICAgICovXG4gICAgICBkZWJ1ZzogKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZm4gPSBjb25zb2xlTG9nKCdkZWJ1ZycpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgICAgIGZuLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSgpKVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBmb3JtYXRFcnJvcihhcmcpIHtcbiAgICAgIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBpZiAoYXJnLnN0YWNrKSB7XG4gICAgICAgICAgYXJnID0gKGFyZy5tZXNzYWdlICYmIGFyZy5zdGFjay5pbmRleE9mKGFyZy5tZXNzYWdlKSA9PT0gLTEpXG4gICAgICAgICAgICAgID8gJ0Vycm9yOiAnICsgYXJnLm1lc3NhZ2UgKyAnXFxuJyArIGFyZy5zdGFja1xuICAgICAgICAgICAgICA6IGFyZy5zdGFjaztcbiAgICAgICAgfSBlbHNlIGlmIChhcmcuc291cmNlVVJMKSB7XG4gICAgICAgICAgYXJnID0gYXJnLm1lc3NhZ2UgKyAnXFxuJyArIGFyZy5zb3VyY2VVUkwgKyAnOicgKyBhcmcubGluZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFyZztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb25zb2xlTG9nKHR5cGUpIHtcbiAgICAgIHZhciBjb25zb2xlID0gJHdpbmRvdy5jb25zb2xlIHx8IHt9LFxuICAgICAgICAgIGxvZ0ZuID0gY29uc29sZVt0eXBlXSB8fCBjb25zb2xlLmxvZyB8fCBub29wLFxuICAgICAgICAgIGhhc0FwcGx5ID0gZmFsc2U7XG5cbiAgICAgIC8vIE5vdGU6IHJlYWRpbmcgbG9nRm4uYXBwbHkgdGhyb3dzIGFuIGVycm9yIGluIElFMTEgaW4gSUU4IGRvY3VtZW50IG1vZGUuXG4gICAgICAvLyBUaGUgcmVhc29uIGJlaGluZCB0aGlzIGlzIHRoYXQgY29uc29sZS5sb2cgaGFzIHR5cGUgXCJvYmplY3RcIiBpbiBJRTguLi5cbiAgICAgIHRyeSB7XG4gICAgICAgIGhhc0FwcGx5ID0gISFsb2dGbi5hcHBseTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIGlmIChoYXNBcHBseSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICBmb3JFYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgICBhcmdzLnB1c2goZm9ybWF0RXJyb3IoYXJnKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGxvZ0ZuLmFwcGx5KGNvbnNvbGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyB3ZSBhcmUgSUUgd2hpY2ggZWl0aGVyIGRvZXNuJ3QgaGF2ZSB3aW5kb3cuY29uc29sZSA9PiB0aGlzIGlzIG5vb3AgYW5kIHdlIGRvIG5vdGhpbmcsXG4gICAgICAvLyBvciB3ZSBhcmUgSUUgd2hlcmUgY29uc29sZS5sb2cgZG9lc24ndCBoYXZlIGFwcGx5IHNvIHdlIGxvZyBhdCBsZWFzdCBmaXJzdCAyIGFyZ3NcbiAgICAgIHJldHVybiBmdW5jdGlvbihhcmcxLCBhcmcyKSB7XG4gICAgICAgIGxvZ0ZuKGFyZzEsIGFyZzIgPT0gbnVsbCA/ICcnIDogYXJnMik7XG4gICAgICB9O1xuICAgIH1cbiAgfV07XG59XG5cbnZhciAkcGFyc2VNaW5FcnIgPSBtaW5FcnIoJyRwYXJzZScpO1xuXG4vLyBTYW5kYm94aW5nIEFuZ3VsYXIgRXhwcmVzc2lvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQW5ndWxhciBleHByZXNzaW9ucyBhcmUgZ2VuZXJhbGx5IGNvbnNpZGVyZWQgc2FmZSBiZWNhdXNlIHRoZXNlIGV4cHJlc3Npb25zIG9ubHkgaGF2ZSBkaXJlY3Rcbi8vIGFjY2VzcyB0byBgJHNjb3BlYCBhbmQgbG9jYWxzLiBIb3dldmVyLCBvbmUgY2FuIG9idGFpbiB0aGUgYWJpbGl0eSB0byBleGVjdXRlIGFyYml0cmFyeSBKUyBjb2RlIGJ5XG4vLyBvYnRhaW5pbmcgYSByZWZlcmVuY2UgdG8gbmF0aXZlIEpTIGZ1bmN0aW9ucyBzdWNoIGFzIHRoZSBGdW5jdGlvbiBjb25zdHJ1Y3Rvci5cbi8vXG4vLyBBcyBhbiBleGFtcGxlLCBjb25zaWRlciB0aGUgZm9sbG93aW5nIEFuZ3VsYXIgZXhwcmVzc2lvbjpcbi8vXG4vLyAgIHt9LnRvU3RyaW5nLmNvbnN0cnVjdG9yKCdhbGVydChcImV2aWwgSlMgY29kZVwiKScpXG4vL1xuLy8gVGhpcyBzYW5kYm94aW5nIHRlY2huaXF1ZSBpcyBub3QgcGVyZmVjdCBhbmQgZG9lc24ndCBhaW0gdG8gYmUuIFRoZSBnb2FsIGlzIHRvIHByZXZlbnQgZXhwbG9pdHNcbi8vIGFnYWluc3QgdGhlIGV4cHJlc3Npb24gbGFuZ3VhZ2UsIGJ1dCBub3QgdG8gcHJldmVudCBleHBsb2l0cyB0aGF0IHdlcmUgZW5hYmxlZCBieSBleHBvc2luZ1xuLy8gc2Vuc2l0aXZlIEphdmFTY3JpcHQgb3IgYnJvd3NlciBBUElzIG9uIFNjb3BlLiBFeHBvc2luZyBzdWNoIG9iamVjdHMgb24gYSBTY29wZSBpcyBuZXZlciBhIGdvb2Rcbi8vIHByYWN0aWNlIGFuZCB0aGVyZWZvcmUgd2UgYXJlIG5vdCBldmVuIHRyeWluZyB0byBwcm90ZWN0IGFnYWluc3QgaW50ZXJhY3Rpb24gd2l0aCBhbiBvYmplY3Rcbi8vIGV4cGxpY2l0bHkgZXhwb3NlZCBpbiB0aGlzIHdheS5cbi8vXG4vLyBJbiBnZW5lcmFsLCBpdCBpcyBub3QgcG9zc2libGUgdG8gYWNjZXNzIGEgV2luZG93IG9iamVjdCBmcm9tIGFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB1bmxlc3MgYVxuLy8gd2luZG93IG9yIHNvbWUgRE9NIG9iamVjdCB0aGF0IGhhcyBhIHJlZmVyZW5jZSB0byB3aW5kb3cgaXMgcHVibGlzaGVkIG9udG8gYSBTY29wZS5cbi8vIFNpbWlsYXJseSB3ZSBwcmV2ZW50IGludm9jYXRpb25zIG9mIGZ1bmN0aW9uIGtub3duIHRvIGJlIGRhbmdlcm91cywgYXMgd2VsbCBhcyBhc3NpZ25tZW50cyB0b1xuLy8gbmF0aXZlIG9iamVjdHMuXG4vL1xuLy8gU2VlIGh0dHBzOi8vZG9jcy5hbmd1bGFyanMub3JnL2d1aWRlL3NlY3VyaXR5XG5cblxuZnVuY3Rpb24gZW5zdXJlU2FmZU1lbWJlck5hbWUobmFtZSwgZnVsbEV4cHJlc3Npb24pIHtcbiAgaWYgKG5hbWUgPT09IFwiX19kZWZpbmVHZXR0ZXJfX1wiIHx8IG5hbWUgPT09IFwiX19kZWZpbmVTZXR0ZXJfX1wiXG4gICAgICB8fCBuYW1lID09PSBcIl9fbG9va3VwR2V0dGVyX19cIiB8fCBuYW1lID09PSBcIl9fbG9va3VwU2V0dGVyX19cIlxuICAgICAgfHwgbmFtZSA9PT0gXCJfX3Byb3RvX19cIikge1xuICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY2ZsZCcsXG4gICAgICAgICdBdHRlbXB0aW5nIHRvIGFjY2VzcyBhIGRpc2FsbG93ZWQgZmllbGQgaW4gQW5ndWxhciBleHByZXNzaW9ucyEgJ1xuICAgICAgICArICdFeHByZXNzaW9uOiB7MH0nLCBmdWxsRXhwcmVzc2lvbik7XG4gIH1cbiAgcmV0dXJuIG5hbWU7XG59XG5cbmZ1bmN0aW9uIGVuc3VyZVNhZmVPYmplY3Qob2JqLCBmdWxsRXhwcmVzc2lvbikge1xuICAvLyBuaWZ0eSBjaGVjayBpZiBvYmogaXMgRnVuY3Rpb24gdGhhdCBpcyBmYXN0IGFuZCB3b3JrcyBhY3Jvc3MgaWZyYW1lcyBhbmQgb3RoZXIgY29udGV4dHNcbiAgaWYgKG9iaikge1xuICAgIGlmIChvYmouY29uc3RydWN0b3IgPT09IG9iaikge1xuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCdpc2VjZm4nLFxuICAgICAgICAgICdSZWZlcmVuY2luZyBGdW5jdGlvbiBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRpc2FsbG93ZWQhIEV4cHJlc3Npb246IHswfScsXG4gICAgICAgICAgZnVsbEV4cHJlc3Npb24pO1xuICAgIH0gZWxzZSBpZiAoLy8gaXNXaW5kb3cob2JqKVxuICAgICAgICBvYmoud2luZG93ID09PSBvYmopIHtcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY3dpbmRvdycsXG4gICAgICAgICAgJ1JlZmVyZW5jaW5nIHRoZSBXaW5kb3cgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLFxuICAgICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcbiAgICB9IGVsc2UgaWYgKC8vIGlzRWxlbWVudChvYmopXG4gICAgICAgIG9iai5jaGlsZHJlbiAmJiAob2JqLm5vZGVOYW1lIHx8IChvYmoucHJvcCAmJiBvYmouYXR0ciAmJiBvYmouZmluZCkpKSB7XG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNkb20nLFxuICAgICAgICAgICdSZWZlcmVuY2luZyBET00gbm9kZXMgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLFxuICAgICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcbiAgICB9IGVsc2UgaWYgKC8vIGJsb2NrIE9iamVjdCBzbyB0aGF0IHdlIGNhbid0IGdldCBob2xkIG9mIGRhbmdlcm91cyBPYmplY3QuKiBtZXRob2RzXG4gICAgICAgIG9iaiA9PT0gT2JqZWN0KSB7XG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNvYmonLFxuICAgICAgICAgICdSZWZlcmVuY2luZyBPYmplY3QgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLFxuICAgICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxudmFyIENBTEwgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbDtcbnZhciBBUFBMWSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcbnZhciBCSU5EID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7XG5cbmZ1bmN0aW9uIGVuc3VyZVNhZmVGdW5jdGlvbihvYmosIGZ1bGxFeHByZXNzaW9uKSB7XG4gIGlmIChvYmopIHtcbiAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBvYmopIHtcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY2ZuJyxcbiAgICAgICAgJ1JlZmVyZW5jaW5nIEZ1bmN0aW9uIGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxcbiAgICAgICAgZnVsbEV4cHJlc3Npb24pO1xuICAgIH0gZWxzZSBpZiAob2JqID09PSBDQUxMIHx8IG9iaiA9PT0gQVBQTFkgfHwgb2JqID09PSBCSU5EKSB7XG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmZicsXG4gICAgICAgICdSZWZlcmVuY2luZyBjYWxsLCBhcHBseSBvciBiaW5kIGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxcbiAgICAgICAgZnVsbEV4cHJlc3Npb24pO1xuICAgIH1cbiAgfVxufVxuXG4vL0tleXdvcmQgY29uc3RhbnRzXG52YXIgQ09OU1RBTlRTID0gY3JlYXRlTWFwKCk7XG5mb3JFYWNoKHtcbiAgJ251bGwnOiBmdW5jdGlvbigpIHsgcmV0dXJuIG51bGw7IH0sXG4gICd0cnVlJzogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9LFxuICAnZmFsc2UnOiBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9LFxuICAndW5kZWZpbmVkJzogZnVuY3Rpb24oKSB7fVxufSwgZnVuY3Rpb24oY29uc3RhbnRHZXR0ZXIsIG5hbWUpIHtcbiAgY29uc3RhbnRHZXR0ZXIuY29uc3RhbnQgPSBjb25zdGFudEdldHRlci5saXRlcmFsID0gY29uc3RhbnRHZXR0ZXIuc2hhcmVkR2V0dGVyID0gdHJ1ZTtcbiAgQ09OU1RBTlRTW25hbWVdID0gY29uc3RhbnRHZXR0ZXI7XG59KTtcblxuLy9Ob3QgcXVpdGUgYSBjb25zdGFudCwgYnV0IGNhbiBiZSBsZXgvcGFyc2VkIHRoZSBzYW1lXG5DT05TVEFOVFNbJ3RoaXMnXSA9IGZ1bmN0aW9uKHNlbGYpIHsgcmV0dXJuIHNlbGY7IH07XG5DT05TVEFOVFNbJ3RoaXMnXS5zaGFyZWRHZXR0ZXIgPSB0cnVlO1xuXG5cbi8vT3BlcmF0b3JzIC0gd2lsbCBiZSB3cmFwcGVkIGJ5IGJpbmFyeUZuL3VuYXJ5Rm4vYXNzaWdubWVudC9maWx0ZXJcbnZhciBPUEVSQVRPUlMgPSBleHRlbmQoY3JlYXRlTWFwKCksIHtcbiAgICAnKyc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7XG4gICAgICBhPWEoc2VsZiwgbG9jYWxzKTsgYj1iKHNlbGYsIGxvY2Fscyk7XG4gICAgICBpZiAoaXNEZWZpbmVkKGEpKSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQoYikpIHtcbiAgICAgICAgICByZXR1cm4gYSArIGI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGE7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNEZWZpbmVkKGIpID8gYiA6IHVuZGVmaW5lZDt9LFxuICAgICctJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsIGIpIHtcbiAgICAgICAgICBhPWEoc2VsZiwgbG9jYWxzKTsgYj1iKHNlbGYsIGxvY2Fscyk7XG4gICAgICAgICAgcmV0dXJuIChpc0RlZmluZWQoYSkgPyBhIDogMCkgLSAoaXNEZWZpbmVkKGIpID8gYiA6IDApO1xuICAgICAgICB9LFxuICAgICcqJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsIGIpIHtyZXR1cm4gYShzZWxmLCBsb2NhbHMpICogYihzZWxmLCBsb2NhbHMpO30sXG4gICAgJy8nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgLyBiKHNlbGYsIGxvY2Fscyk7fSxcbiAgICAnJSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSAlIGIoc2VsZiwgbG9jYWxzKTt9LFxuICAgICc9PT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgPT09IGIoc2VsZiwgbG9jYWxzKTt9LFxuICAgICchPT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgIT09IGIoc2VsZiwgbG9jYWxzKTt9LFxuICAgICc9PSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSA9PSBiKHNlbGYsIGxvY2Fscyk7fSxcbiAgICAnIT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgIT0gYihzZWxmLCBsb2NhbHMpO30sXG4gICAgJzwnOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgPCBiKHNlbGYsIGxvY2Fscyk7fSxcbiAgICAnPic6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSA+IGIoc2VsZiwgbG9jYWxzKTt9LFxuICAgICc8PSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSA8PSBiKHNlbGYsIGxvY2Fscyk7fSxcbiAgICAnPj0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgPj0gYihzZWxmLCBsb2NhbHMpO30sXG4gICAgJyYmJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsIGIpIHtyZXR1cm4gYShzZWxmLCBsb2NhbHMpICYmIGIoc2VsZiwgbG9jYWxzKTt9LFxuICAgICd8fCc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSB8fCBiKHNlbGYsIGxvY2Fscyk7fSxcbiAgICAnISc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhKSB7cmV0dXJuICFhKHNlbGYsIGxvY2Fscyk7fSxcblxuICAgIC8vVG9rZW5pemVkIGFzIG9wZXJhdG9ycyBidXQgcGFyc2VkIGFzIGFzc2lnbm1lbnQvZmlsdGVyc1xuICAgICc9Jzp0cnVlLFxuICAgICd8Jzp0cnVlXG59KTtcbnZhciBFU0NBUEUgPSB7XCJuXCI6XCJcXG5cIiwgXCJmXCI6XCJcXGZcIiwgXCJyXCI6XCJcXHJcIiwgXCJ0XCI6XCJcXHRcIiwgXCJ2XCI6XCJcXHZcIiwgXCInXCI6XCInXCIsICdcIic6J1wiJ307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52YXIgTGV4ZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG59O1xuXG5MZXhlci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBMZXhlcixcblxuICBsZXg6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIHRoaXMudG9rZW5zID0gW107XG5cbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICBpZiAoY2ggPT09ICdcIicgfHwgY2ggPT09IFwiJ1wiKSB7XG4gICAgICAgIHRoaXMucmVhZFN0cmluZyhjaCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNOdW1iZXIoY2gpIHx8IGNoID09PSAnLicgJiYgdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpIHtcbiAgICAgICAgdGhpcy5yZWFkTnVtYmVyKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNJZGVudChjaCkpIHtcbiAgICAgICAgdGhpcy5yZWFkSWRlbnQoKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pcyhjaCwgJygpe31bXS4sOzo/JykpIHtcbiAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6IHRoaXMuaW5kZXgsIHRleHQ6IGNofSk7XG4gICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1doaXRlc3BhY2UoY2gpKSB7XG4gICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjaDIgPSBjaCArIHRoaXMucGVlaygpO1xuICAgICAgICB2YXIgY2gzID0gY2gyICsgdGhpcy5wZWVrKDIpO1xuICAgICAgICB2YXIgb3AxID0gT1BFUkFUT1JTW2NoXTtcbiAgICAgICAgdmFyIG9wMiA9IE9QRVJBVE9SU1tjaDJdO1xuICAgICAgICB2YXIgb3AzID0gT1BFUkFUT1JTW2NoM107XG4gICAgICAgIGlmIChvcDEgfHwgb3AyIHx8IG9wMykge1xuICAgICAgICAgIHZhciB0b2tlbiA9IG9wMyA/IGNoMyA6IChvcDIgPyBjaDIgOiBjaCk7XG4gICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6IHRoaXMuaW5kZXgsIHRleHQ6IHRva2VuLCBvcGVyYXRvcjogdHJ1ZX0pO1xuICAgICAgICAgIHRoaXMuaW5kZXggKz0gdG9rZW4ubGVuZ3RoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudGhyb3dFcnJvcignVW5leHBlY3RlZCBuZXh0IGNoYXJhY3RlciAnLCB0aGlzLmluZGV4LCB0aGlzLmluZGV4ICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudG9rZW5zO1xuICB9LFxuXG4gIGlzOiBmdW5jdGlvbihjaCwgY2hhcnMpIHtcbiAgICByZXR1cm4gY2hhcnMuaW5kZXhPZihjaCkgIT09IC0xO1xuICB9LFxuXG4gIHBlZWs6IGZ1bmN0aW9uKGkpIHtcbiAgICB2YXIgbnVtID0gaSB8fCAxO1xuICAgIHJldHVybiAodGhpcy5pbmRleCArIG51bSA8IHRoaXMudGV4dC5sZW5ndGgpID8gdGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4ICsgbnVtKSA6IGZhbHNlO1xuICB9LFxuXG4gIGlzTnVtYmVyOiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiAoJzAnIDw9IGNoICYmIGNoIDw9ICc5JykgJiYgdHlwZW9mIGNoID09PSBcInN0cmluZ1wiO1xuICB9LFxuXG4gIGlzV2hpdGVzcGFjZTogZnVuY3Rpb24oY2gpIHtcbiAgICAvLyBJRSB0cmVhdHMgbm9uLWJyZWFraW5nIHNwYWNlIGFzIFxcdTAwQTBcbiAgICByZXR1cm4gKGNoID09PSAnICcgfHwgY2ggPT09ICdcXHInIHx8IGNoID09PSAnXFx0JyB8fFxuICAgICAgICAgICAgY2ggPT09ICdcXG4nIHx8IGNoID09PSAnXFx2JyB8fCBjaCA9PT0gJ1xcdTAwQTAnKTtcbiAgfSxcblxuICBpc0lkZW50OiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiAoJ2EnIDw9IGNoICYmIGNoIDw9ICd6JyB8fFxuICAgICAgICAgICAgJ0EnIDw9IGNoICYmIGNoIDw9ICdaJyB8fFxuICAgICAgICAgICAgJ18nID09PSBjaCB8fCBjaCA9PT0gJyQnKTtcbiAgfSxcblxuICBpc0V4cE9wZXJhdG9yOiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnIHx8IHRoaXMuaXNOdW1iZXIoY2gpKTtcbiAgfSxcblxuICB0aHJvd0Vycm9yOiBmdW5jdGlvbihlcnJvciwgc3RhcnQsIGVuZCkge1xuICAgIGVuZCA9IGVuZCB8fCB0aGlzLmluZGV4O1xuICAgIHZhciBjb2xTdHIgPSAoaXNEZWZpbmVkKHN0YXJ0KVxuICAgICAgICAgICAgPyAncyAnICsgc3RhcnQgKyAgJy0nICsgdGhpcy5pbmRleCArICcgWycgKyB0aGlzLnRleHQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpICsgJ10nXG4gICAgICAgICAgICA6ICcgJyArIGVuZCk7XG4gICAgdGhyb3cgJHBhcnNlTWluRXJyKCdsZXhlcnInLCAnTGV4ZXIgRXJyb3I6IHswfSBhdCBjb2x1bW57MX0gaW4gZXhwcmVzc2lvbiBbezJ9XS4nLFxuICAgICAgICBlcnJvciwgY29sU3RyLCB0aGlzLnRleHQpO1xuICB9LFxuXG4gIHJlYWROdW1iZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBudW1iZXIgPSAnJztcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgdmFyIGNoID0gbG93ZXJjYXNlKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO1xuICAgICAgaWYgKGNoID09ICcuJyB8fCB0aGlzLmlzTnVtYmVyKGNoKSkge1xuICAgICAgICBudW1iZXIgKz0gY2g7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcGVla0NoID0gdGhpcy5wZWVrKCk7XG4gICAgICAgIGlmIChjaCA9PSAnZScgJiYgdGhpcy5pc0V4cE9wZXJhdG9yKHBlZWtDaCkpIHtcbiAgICAgICAgICBudW1iZXIgKz0gY2g7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0V4cE9wZXJhdG9yKGNoKSAmJlxuICAgICAgICAgICAgcGVla0NoICYmIHRoaXMuaXNOdW1iZXIocGVla0NoKSAmJlxuICAgICAgICAgICAgbnVtYmVyLmNoYXJBdChudW1iZXIubGVuZ3RoIC0gMSkgPT0gJ2UnKSB7XG4gICAgICAgICAgbnVtYmVyICs9IGNoO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNFeHBPcGVyYXRvcihjaCkgJiZcbiAgICAgICAgICAgICghcGVla0NoIHx8ICF0aGlzLmlzTnVtYmVyKHBlZWtDaCkpICYmXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PSAnZScpIHtcbiAgICAgICAgICB0aGlzLnRocm93RXJyb3IoJ0ludmFsaWQgZXhwb25lbnQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5pbmRleCsrO1xuICAgIH1cbiAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgIGluZGV4OiBzdGFydCxcbiAgICAgIHRleHQ6IG51bWJlcixcbiAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgdmFsdWU6IE51bWJlcihudW1iZXIpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVhZElkZW50OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgdmFyIGNoID0gdGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KTtcbiAgICAgIGlmICghKHRoaXMuaXNJZGVudChjaCkgfHwgdGhpcy5pc051bWJlcihjaCkpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdGhpcy5pbmRleCsrO1xuICAgIH1cbiAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgIGluZGV4OiBzdGFydCxcbiAgICAgIHRleHQ6IHRoaXMudGV4dC5zbGljZShzdGFydCwgdGhpcy5pbmRleCksXG4gICAgICBpZGVudGlmaWVyOiB0cnVlXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVhZFN0cmluZzogZnVuY3Rpb24ocXVvdGUpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHRoaXMuaW5kZXgrKztcbiAgICB2YXIgc3RyaW5nID0gJyc7XG4gICAgdmFyIHJhd1N0cmluZyA9IHF1b3RlO1xuICAgIHZhciBlc2NhcGUgPSBmYWxzZTtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICByYXdTdHJpbmcgKz0gY2g7XG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIGlmIChjaCA9PT0gJ3UnKSB7XG4gICAgICAgICAgdmFyIGhleCA9IHRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCArIDEsIHRoaXMuaW5kZXggKyA1KTtcbiAgICAgICAgICBpZiAoIWhleC5tYXRjaCgvW1xcZGEtZl17NH0vaSkpXG4gICAgICAgICAgICB0aGlzLnRocm93RXJyb3IoJ0ludmFsaWQgdW5pY29kZSBlc2NhcGUgW1xcXFx1JyArIGhleCArICddJyk7XG4gICAgICAgICAgdGhpcy5pbmRleCArPSA0O1xuICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGhleCwgMTYpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmVwID0gRVNDQVBFW2NoXTtcbiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcgKyAocmVwIHx8IGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICdcXFxcJykge1xuICAgICAgICBlc2NhcGUgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PT0gcXVvdGUpIHtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgICAgICBpbmRleDogc3RhcnQsXG4gICAgICAgICAgdGV4dDogcmF3U3RyaW5nLFxuICAgICAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgICAgIHZhbHVlOiBzdHJpbmdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0cmluZyArPSBjaDtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gICAgdGhpcy50aHJvd0Vycm9yKCdVbnRlcm1pbmF0ZWQgcXVvdGUnLCBzdGFydCk7XG4gIH1cbn07XG5cblxuZnVuY3Rpb24gaXNDb25zdGFudChleHApIHtcbiAgcmV0dXJuIGV4cC5jb25zdGFudDtcbn1cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmFyIFBhcnNlciA9IGZ1bmN0aW9uKGxleGVyLCAkZmlsdGVyLCBvcHRpb25zKSB7XG4gIHRoaXMubGV4ZXIgPSBsZXhlcjtcbiAgdGhpcy4kZmlsdGVyID0gJGZpbHRlcjtcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbn07XG5cblBhcnNlci5aRVJPID0gZXh0ZW5kKGZ1bmN0aW9uKCkge1xuICByZXR1cm4gMDtcbn0sIHtcbiAgc2hhcmVkR2V0dGVyOiB0cnVlLFxuICBjb25zdGFudDogdHJ1ZVxufSk7XG5cblBhcnNlci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBQYXJzZXIsXG5cbiAgcGFyc2U6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIHRoaXMudG9rZW5zID0gdGhpcy5sZXhlci5sZXgodGV4dCk7XG5cbiAgICB2YXIgdmFsdWUgPSB0aGlzLnN0YXRlbWVudHMoKTtcblxuICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggIT09IDApIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignaXMgYW4gdW5leHBlY3RlZCB0b2tlbicsIHRoaXMudG9rZW5zWzBdKTtcbiAgICB9XG5cbiAgICB2YWx1ZS5saXRlcmFsID0gISF2YWx1ZS5saXRlcmFsO1xuICAgIHZhbHVlLmNvbnN0YW50ID0gISF2YWx1ZS5jb25zdGFudDtcblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICBwcmltYXJ5OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJpbWFyeTtcbiAgICBpZiAodGhpcy5leHBlY3QoJygnKSkge1xuICAgICAgcHJpbWFyeSA9IHRoaXMuZmlsdGVyQ2hhaW4oKTtcbiAgICAgIHRoaXMuY29uc3VtZSgnKScpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5leHBlY3QoJ1snKSkge1xuICAgICAgcHJpbWFyeSA9IHRoaXMuYXJyYXlEZWNsYXJhdGlvbigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5leHBlY3QoJ3snKSkge1xuICAgICAgcHJpbWFyeSA9IHRoaXMub2JqZWN0KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnBlZWsoKS5pZGVudGlmaWVyICYmIHRoaXMucGVlaygpLnRleHQgaW4gQ09OU1RBTlRTKSB7XG4gICAgICBwcmltYXJ5ID0gQ09OU1RBTlRTW3RoaXMuY29uc3VtZSgpLnRleHRdO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuaWRlbnRpZmllcikge1xuICAgICAgcHJpbWFyeSA9IHRoaXMuaWRlbnRpZmllcigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuY29uc3RhbnQpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmNvbnN0YW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignbm90IGEgcHJpbWFyeSBleHByZXNzaW9uJywgdGhpcy5wZWVrKCkpO1xuICAgIH1cblxuICAgIHZhciBuZXh0LCBjb250ZXh0O1xuICAgIHdoaWxlICgobmV4dCA9IHRoaXMuZXhwZWN0KCcoJywgJ1snLCAnLicpKSkge1xuICAgICAgaWYgKG5leHQudGV4dCA9PT0gJygnKSB7XG4gICAgICAgIHByaW1hcnkgPSB0aGlzLmZ1bmN0aW9uQ2FsbChwcmltYXJ5LCBjb250ZXh0KTtcbiAgICAgICAgY29udGV4dCA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKG5leHQudGV4dCA9PT0gJ1snKSB7XG4gICAgICAgIGNvbnRleHQgPSBwcmltYXJ5O1xuICAgICAgICBwcmltYXJ5ID0gdGhpcy5vYmplY3RJbmRleChwcmltYXJ5KTtcbiAgICAgIH0gZWxzZSBpZiAobmV4dC50ZXh0ID09PSAnLicpIHtcbiAgICAgICAgY29udGV4dCA9IHByaW1hcnk7XG4gICAgICAgIHByaW1hcnkgPSB0aGlzLmZpZWxkQWNjZXNzKHByaW1hcnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJTVBPU1NJQkxFJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcmltYXJ5O1xuICB9LFxuXG4gIHRocm93RXJyb3I6IGZ1bmN0aW9uKG1zZywgdG9rZW4pIHtcbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ3N5bnRheCcsXG4gICAgICAgICdTeW50YXggRXJyb3I6IFRva2VuIFxcJ3swfVxcJyB7MX0gYXQgY29sdW1uIHsyfSBvZiB0aGUgZXhwcmVzc2lvbiBbezN9XSBzdGFydGluZyBhdCBbezR9XS4nLFxuICAgICAgICAgIHRva2VuLnRleHQsIG1zZywgKHRva2VuLmluZGV4ICsgMSksIHRoaXMudGV4dCwgdGhpcy50ZXh0LnN1YnN0cmluZyh0b2tlbi5pbmRleCkpO1xuICB9LFxuXG4gIHBlZWtUb2tlbjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMClcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycigndWVvZScsICdVbmV4cGVjdGVkIGVuZCBvZiBleHByZXNzaW9uOiB7MH0nLCB0aGlzLnRleHQpO1xuICAgIHJldHVybiB0aGlzLnRva2Vuc1swXTtcbiAgfSxcblxuICBwZWVrOiBmdW5jdGlvbihlMSwgZTIsIGUzLCBlNCkge1xuICAgIHJldHVybiB0aGlzLnBlZWtBaGVhZCgwLCBlMSwgZTIsIGUzLCBlNCk7XG4gIH0sXG4gIHBlZWtBaGVhZDogZnVuY3Rpb24oaSwgZTEsIGUyLCBlMywgZTQpIHtcbiAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoID4gaSkge1xuICAgICAgdmFyIHRva2VuID0gdGhpcy50b2tlbnNbaV07XG4gICAgICB2YXIgdCA9IHRva2VuLnRleHQ7XG4gICAgICBpZiAodCA9PT0gZTEgfHwgdCA9PT0gZTIgfHwgdCA9PT0gZTMgfHwgdCA9PT0gZTQgfHxcbiAgICAgICAgICAoIWUxICYmICFlMiAmJiAhZTMgJiYgIWU0KSkge1xuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICBleHBlY3Q6IGZ1bmN0aW9uKGUxLCBlMiwgZTMsIGU0KSB7XG4gICAgdmFyIHRva2VuID0gdGhpcy5wZWVrKGUxLCBlMiwgZTMsIGU0KTtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIHRoaXMudG9rZW5zLnNoaWZ0KCk7XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICBjb25zdW1lOiBmdW5jdGlvbihlMSkge1xuICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycigndWVvZScsICdVbmV4cGVjdGVkIGVuZCBvZiBleHByZXNzaW9uOiB7MH0nLCB0aGlzLnRleHQpO1xuICAgIH1cblxuICAgIHZhciB0b2tlbiA9IHRoaXMuZXhwZWN0KGUxKTtcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICB0aGlzLnRocm93RXJyb3IoJ2lzIHVuZXhwZWN0ZWQsIGV4cGVjdGluZyBbJyArIGUxICsgJ10nLCB0aGlzLnBlZWsoKSk7XG4gICAgfVxuICAgIHJldHVybiB0b2tlbjtcbiAgfSxcblxuICB1bmFyeUZuOiBmdW5jdGlvbihvcCwgcmlnaHQpIHtcbiAgICB2YXIgZm4gPSBPUEVSQVRPUlNbb3BdO1xuICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJHBhcnNlVW5hcnlGbihzZWxmLCBsb2NhbHMpIHtcbiAgICAgIHJldHVybiBmbihzZWxmLCBsb2NhbHMsIHJpZ2h0KTtcbiAgICB9LCB7XG4gICAgICBjb25zdGFudDpyaWdodC5jb25zdGFudCxcbiAgICAgIGlucHV0czogW3JpZ2h0XVxuICAgIH0pO1xuICB9LFxuXG4gIGJpbmFyeUZuOiBmdW5jdGlvbihsZWZ0LCBvcCwgcmlnaHQsIGlzQnJhbmNoaW5nKSB7XG4gICAgdmFyIGZuID0gT1BFUkFUT1JTW29wXTtcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZUJpbmFyeUZuKHNlbGYsIGxvY2Fscykge1xuICAgICAgcmV0dXJuIGZuKHNlbGYsIGxvY2FscywgbGVmdCwgcmlnaHQpO1xuICAgIH0sIHtcbiAgICAgIGNvbnN0YW50OiBsZWZ0LmNvbnN0YW50ICYmIHJpZ2h0LmNvbnN0YW50LFxuICAgICAgaW5wdXRzOiAhaXNCcmFuY2hpbmcgJiYgW2xlZnQsIHJpZ2h0XVxuICAgIH0pO1xuICB9LFxuXG4gIGlkZW50aWZpZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZCA9IHRoaXMuY29uc3VtZSgpLnRleHQ7XG5cbiAgICAvL0NvbnRpbnVlIHJlYWRpbmcgZWFjaCBgLmlkZW50aWZpZXJgIHVubGVzcyBpdCBpcyBhIG1ldGhvZCBpbnZvY2F0aW9uXG4gICAgd2hpbGUgKHRoaXMucGVlaygnLicpICYmIHRoaXMucGVla0FoZWFkKDEpLmlkZW50aWZpZXIgJiYgIXRoaXMucGVla0FoZWFkKDIsICcoJykpIHtcbiAgICAgIGlkICs9IHRoaXMuY29uc3VtZSgpLnRleHQgKyB0aGlzLmNvbnN1bWUoKS50ZXh0O1xuICAgIH1cblxuICAgIHJldHVybiBnZXR0ZXJGbihpZCwgdGhpcy5vcHRpb25zLCB0aGlzLnRleHQpO1xuICB9LFxuXG4gIGNvbnN0YW50OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLmNvbnN1bWUoKS52YWx1ZTtcblxuICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJHBhcnNlQ29uc3RhbnQoKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSwge1xuICAgICAgY29uc3RhbnQ6IHRydWUsXG4gICAgICBsaXRlcmFsOiB0cnVlXG4gICAgfSk7XG4gIH0sXG5cbiAgc3RhdGVtZW50czogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0YXRlbWVudHMgPSBbXTtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA+IDAgJiYgIXRoaXMucGVlaygnfScsICcpJywgJzsnLCAnXScpKVxuICAgICAgICBzdGF0ZW1lbnRzLnB1c2godGhpcy5maWx0ZXJDaGFpbigpKTtcbiAgICAgIGlmICghdGhpcy5leHBlY3QoJzsnKSkge1xuICAgICAgICAvLyBvcHRpbWl6ZSBmb3IgdGhlIGNvbW1vbiBjYXNlIHdoZXJlIHRoZXJlIGlzIG9ubHkgb25lIHN0YXRlbWVudC5cbiAgICAgICAgLy8gVE9ETyhzaXplKTogbWF5YmUgd2Ugc2hvdWxkIG5vdCBzdXBwb3J0IG11bHRpcGxlIHN0YXRlbWVudHM/XG4gICAgICAgIHJldHVybiAoc3RhdGVtZW50cy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICA/IHN0YXRlbWVudHNbMF1cbiAgICAgICAgICAgIDogZnVuY3Rpb24gJHBhcnNlU3RhdGVtZW50cyhzZWxmLCBsb2NhbHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3RhdGVtZW50cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IHN0YXRlbWVudHNbaV0oc2VsZiwgbG9jYWxzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBmaWx0ZXJDaGFpbjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCd8JykpKSB7XG4gICAgICBsZWZ0ID0gdGhpcy5maWx0ZXIobGVmdCk7XG4gICAgfVxuICAgIHJldHVybiBsZWZ0O1xuICB9LFxuXG4gIGZpbHRlcjogZnVuY3Rpb24oaW5wdXRGbikge1xuICAgIHZhciBmbiA9IHRoaXMuJGZpbHRlcih0aGlzLmNvbnN1bWUoKS50ZXh0KTtcbiAgICB2YXIgYXJnc0ZuO1xuICAgIHZhciBhcmdzO1xuXG4gICAgaWYgKHRoaXMucGVlaygnOicpKSB7XG4gICAgICBhcmdzRm4gPSBbXTtcbiAgICAgIGFyZ3MgPSBbXTsgLy8gd2UgY2FuIHNhZmVseSByZXVzZSB0aGUgYXJyYXlcbiAgICAgIHdoaWxlICh0aGlzLmV4cGVjdCgnOicpKSB7XG4gICAgICAgIGFyZ3NGbi5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaW5wdXRzID0gW2lucHV0Rm5dLmNvbmNhdChhcmdzRm4gfHwgW10pO1xuXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VGaWx0ZXIoc2VsZiwgbG9jYWxzKSB7XG4gICAgICB2YXIgaW5wdXQgPSBpbnB1dEZuKHNlbGYsIGxvY2Fscyk7XG4gICAgICBpZiAoYXJncykge1xuICAgICAgICBhcmdzWzBdID0gaW5wdXQ7XG5cbiAgICAgICAgdmFyIGkgPSBhcmdzRm4ubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgYXJnc1tpICsgMV0gPSBhcmdzRm5baV0oc2VsZiwgbG9jYWxzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmbi5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4oaW5wdXQpO1xuICAgIH0sIHtcbiAgICAgIGNvbnN0YW50OiAhZm4uJHN0YXRlZnVsICYmIGlucHV0cy5ldmVyeShpc0NvbnN0YW50KSxcbiAgICAgIGlucHV0czogIWZuLiRzdGF0ZWZ1bCAmJiBpbnB1dHNcbiAgICB9KTtcbiAgfSxcblxuICBleHByZXNzaW9uOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hc3NpZ25tZW50KCk7XG4gIH0sXG5cbiAgYXNzaWdubWVudDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLnRlcm5hcnkoKTtcbiAgICB2YXIgcmlnaHQ7XG4gICAgdmFyIHRva2VuO1xuICAgIGlmICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnPScpKSkge1xuICAgICAgaWYgKCFsZWZ0LmFzc2lnbikge1xuICAgICAgICB0aGlzLnRocm93RXJyb3IoJ2ltcGxpZXMgYXNzaWdubWVudCBidXQgWycgK1xuICAgICAgICAgICAgdGhpcy50ZXh0LnN1YnN0cmluZygwLCB0b2tlbi5pbmRleCkgKyAnXSBjYW4gbm90IGJlIGFzc2lnbmVkIHRvJywgdG9rZW4pO1xuICAgICAgfVxuICAgICAgcmlnaHQgPSB0aGlzLnRlcm5hcnkoKTtcbiAgICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJHBhcnNlQXNzaWdubWVudChzY29wZSwgbG9jYWxzKSB7XG4gICAgICAgIHJldHVybiBsZWZ0LmFzc2lnbihzY29wZSwgcmlnaHQoc2NvcGUsIGxvY2FscyksIGxvY2Fscyk7XG4gICAgICB9LCB7XG4gICAgICAgIGlucHV0czogW2xlZnQsIHJpZ2h0XVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBsZWZ0O1xuICB9LFxuXG4gIHRlcm5hcnk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsZWZ0ID0gdGhpcy5sb2dpY2FsT1IoKTtcbiAgICB2YXIgbWlkZGxlO1xuICAgIHZhciB0b2tlbjtcbiAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJz8nKSkpIHtcbiAgICAgIG1pZGRsZSA9IHRoaXMuYXNzaWdubWVudCgpO1xuICAgICAgaWYgKHRoaXMuY29uc3VtZSgnOicpKSB7XG4gICAgICAgIHZhciByaWdodCA9IHRoaXMuYXNzaWdubWVudCgpO1xuXG4gICAgICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJHBhcnNlVGVybmFyeShzZWxmLCBsb2NhbHMpIHtcbiAgICAgICAgICByZXR1cm4gbGVmdChzZWxmLCBsb2NhbHMpID8gbWlkZGxlKHNlbGYsIGxvY2FscykgOiByaWdodChzZWxmLCBsb2NhbHMpO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgY29uc3RhbnQ6IGxlZnQuY29uc3RhbnQgJiYgbWlkZGxlLmNvbnN0YW50ICYmIHJpZ2h0LmNvbnN0YW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsZWZ0O1xuICB9LFxuXG4gIGxvZ2ljYWxPUjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLmxvZ2ljYWxBTkQoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCd8fCcpKSkge1xuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4udGV4dCwgdGhpcy5sb2dpY2FsQU5EKCksIHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBsb2dpY2FsQU5EOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuZXF1YWxpdHkoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCcmJicpKSkge1xuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4udGV4dCwgdGhpcy5lcXVhbGl0eSgpLCB0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgZXF1YWxpdHk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsZWZ0ID0gdGhpcy5yZWxhdGlvbmFsKCk7XG4gICAgdmFyIHRva2VuO1xuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnPT0nLCchPScsJz09PScsJyE9PScpKSkge1xuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4udGV4dCwgdGhpcy5yZWxhdGlvbmFsKCkpO1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICByZWxhdGlvbmFsOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuYWRkaXRpdmUoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc8JywgJz4nLCAnPD0nLCAnPj0nKSkpIHtcbiAgICAgIGxlZnQgPSB0aGlzLmJpbmFyeUZuKGxlZnQsIHRva2VuLnRleHQsIHRoaXMuYWRkaXRpdmUoKSk7XG4gICAgfVxuICAgIHJldHVybiBsZWZ0O1xuICB9LFxuXG4gIGFkZGl0aXZlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMubXVsdGlwbGljYXRpdmUoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCcrJywnLScpKSkge1xuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4udGV4dCwgdGhpcy5tdWx0aXBsaWNhdGl2ZSgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgbXVsdGlwbGljYXRpdmU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsZWZ0ID0gdGhpcy51bmFyeSgpO1xuICAgIHZhciB0b2tlbjtcbiAgICB3aGlsZSAoKHRva2VuID0gdGhpcy5leHBlY3QoJyonLCcvJywnJScpKSkge1xuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4udGV4dCwgdGhpcy51bmFyeSgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgdW5hcnk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbjtcbiAgICBpZiAodGhpcy5leHBlY3QoJysnKSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJpbWFyeSgpO1xuICAgIH0gZWxzZSBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJy0nKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmJpbmFyeUZuKFBhcnNlci5aRVJPLCB0b2tlbi50ZXh0LCB0aGlzLnVuYXJ5KCkpO1xuICAgIH0gZWxzZSBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJyEnKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLnVuYXJ5Rm4odG9rZW4udGV4dCwgdGhpcy51bmFyeSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucHJpbWFyeSgpO1xuICAgIH1cbiAgfSxcblxuICBmaWVsZEFjY2VzczogZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGdldHRlciA9IHRoaXMuaWRlbnRpZmllcigpO1xuXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VGaWVsZEFjY2VzcyhzY29wZSwgbG9jYWxzLCBzZWxmKSB7XG4gICAgICB2YXIgbyA9IHNlbGYgfHwgb2JqZWN0KHNjb3BlLCBsb2NhbHMpO1xuICAgICAgcmV0dXJuIChvID09IG51bGwpID8gdW5kZWZpbmVkIDogZ2V0dGVyKG8pO1xuICAgIH0sIHtcbiAgICAgIGFzc2lnbjogZnVuY3Rpb24oc2NvcGUsIHZhbHVlLCBsb2NhbHMpIHtcbiAgICAgICAgdmFyIG8gPSBvYmplY3Qoc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgIGlmICghbykgb2JqZWN0LmFzc2lnbihzY29wZSwgbyA9IHt9LCBsb2NhbHMpO1xuICAgICAgICByZXR1cm4gZ2V0dGVyLmFzc2lnbihvLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgb2JqZWN0SW5kZXg6IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBleHByZXNzaW9uID0gdGhpcy50ZXh0O1xuXG4gICAgdmFyIGluZGV4Rm4gPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICB0aGlzLmNvbnN1bWUoJ10nKTtcblxuICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gJHBhcnNlT2JqZWN0SW5kZXgoc2VsZiwgbG9jYWxzKSB7XG4gICAgICB2YXIgbyA9IG9iaihzZWxmLCBsb2NhbHMpLFxuICAgICAgICAgIGkgPSBpbmRleEZuKHNlbGYsIGxvY2FscyksXG4gICAgICAgICAgdjtcblxuICAgICAgZW5zdXJlU2FmZU1lbWJlck5hbWUoaSwgZXhwcmVzc2lvbik7XG4gICAgICBpZiAoIW8pIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB2ID0gZW5zdXJlU2FmZU9iamVjdChvW2ldLCBleHByZXNzaW9uKTtcbiAgICAgIHJldHVybiB2O1xuICAgIH0sIHtcbiAgICAgIGFzc2lnbjogZnVuY3Rpb24oc2VsZiwgdmFsdWUsIGxvY2Fscykge1xuICAgICAgICB2YXIga2V5ID0gZW5zdXJlU2FmZU1lbWJlck5hbWUoaW5kZXhGbihzZWxmLCBsb2NhbHMpLCBleHByZXNzaW9uKTtcbiAgICAgICAgLy8gcHJldmVudCBvdmVyd3JpdGluZyBvZiBGdW5jdGlvbi5jb25zdHJ1Y3RvciB3aGljaCB3b3VsZCBicmVhayBlbnN1cmVTYWZlT2JqZWN0IGNoZWNrXG4gICAgICAgIHZhciBvID0gZW5zdXJlU2FmZU9iamVjdChvYmooc2VsZiwgbG9jYWxzKSwgZXhwcmVzc2lvbik7XG4gICAgICAgIGlmICghbykgb2JqLmFzc2lnbihzZWxmLCBvID0ge30sIGxvY2Fscyk7XG4gICAgICAgIHJldHVybiBvW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBmdW5jdGlvbkNhbGw6IGZ1bmN0aW9uKGZuR2V0dGVyLCBjb250ZXh0R2V0dGVyKSB7XG4gICAgdmFyIGFyZ3NGbiA9IFtdO1xuICAgIGlmICh0aGlzLnBlZWtUb2tlbigpLnRleHQgIT09ICcpJykge1xuICAgICAgZG8ge1xuICAgICAgICBhcmdzRm4ucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7XG4gICAgICB9IHdoaWxlICh0aGlzLmV4cGVjdCgnLCcpKTtcbiAgICB9XG4gICAgdGhpcy5jb25zdW1lKCcpJyk7XG5cbiAgICB2YXIgZXhwcmVzc2lvblRleHQgPSB0aGlzLnRleHQ7XG4gICAgLy8gd2UgY2FuIHNhZmVseSByZXVzZSB0aGUgYXJyYXkgYWNyb3NzIGludm9jYXRpb25zXG4gICAgdmFyIGFyZ3MgPSBhcmdzRm4ubGVuZ3RoID8gW10gOiBudWxsO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICRwYXJzZUZ1bmN0aW9uQ2FsbChzY29wZSwgbG9jYWxzKSB7XG4gICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRHZXR0ZXIgPyBjb250ZXh0R2V0dGVyKHNjb3BlLCBsb2NhbHMpIDogaXNEZWZpbmVkKGNvbnRleHRHZXR0ZXIpID8gdW5kZWZpbmVkIDogc2NvcGU7XG4gICAgICB2YXIgZm4gPSBmbkdldHRlcihzY29wZSwgbG9jYWxzLCBjb250ZXh0KSB8fCBub29wO1xuXG4gICAgICBpZiAoYXJncykge1xuICAgICAgICB2YXIgaSA9IGFyZ3NGbi5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICBhcmdzW2ldID0gZW5zdXJlU2FmZU9iamVjdChhcmdzRm5baV0oc2NvcGUsIGxvY2FscyksIGV4cHJlc3Npb25UZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBlbnN1cmVTYWZlT2JqZWN0KGNvbnRleHQsIGV4cHJlc3Npb25UZXh0KTtcbiAgICAgIGVuc3VyZVNhZmVGdW5jdGlvbihmbiwgZXhwcmVzc2lvblRleHQpO1xuXG4gICAgICAvLyBJRSBkb2Vzbid0IGhhdmUgYXBwbHkgZm9yIHNvbWUgbmF0aXZlIGZ1bmN0aW9uc1xuICAgICAgdmFyIHYgPSBmbi5hcHBseVxuICAgICAgICAgICAgPyBmbi5hcHBseShjb250ZXh0LCBhcmdzKVxuICAgICAgICAgICAgOiBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdLCBhcmdzWzRdKTtcblxuICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgLy8gRnJlZS11cCB0aGUgbWVtb3J5IChhcmd1bWVudHMgb2YgdGhlIGxhc3QgZnVuY3Rpb24gY2FsbCkuXG4gICAgICAgIGFyZ3MubGVuZ3RoID0gMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVuc3VyZVNhZmVPYmplY3QodiwgZXhwcmVzc2lvblRleHQpO1xuICAgICAgfTtcbiAgfSxcblxuICAvLyBUaGlzIGlzIHVzZWQgd2l0aCBqc29uIGFycmF5IGRlY2xhcmF0aW9uXG4gIGFycmF5RGVjbGFyYXRpb246IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbGVtZW50Rm5zID0gW107XG4gICAgaWYgKHRoaXMucGVla1Rva2VuKCkudGV4dCAhPT0gJ10nKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGlmICh0aGlzLnBlZWsoJ10nKSkge1xuICAgICAgICAgIC8vIFN1cHBvcnQgdHJhaWxpbmcgY29tbWFzIHBlciBFUzUuMS5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50Rm5zLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnXScpO1xuXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VBcnJheUxpdGVyYWwoc2VsZiwgbG9jYWxzKSB7XG4gICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVsZW1lbnRGbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBhcnJheS5wdXNoKGVsZW1lbnRGbnNbaV0oc2VsZiwgbG9jYWxzKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfSwge1xuICAgICAgbGl0ZXJhbDogdHJ1ZSxcbiAgICAgIGNvbnN0YW50OiBlbGVtZW50Rm5zLmV2ZXJ5KGlzQ29uc3RhbnQpLFxuICAgICAgaW5wdXRzOiBlbGVtZW50Rm5zXG4gICAgfSk7XG4gIH0sXG5cbiAgb2JqZWN0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIga2V5cyA9IFtdLCB2YWx1ZUZucyA9IFtdO1xuICAgIGlmICh0aGlzLnBlZWtUb2tlbigpLnRleHQgIT09ICd9Jykge1xuICAgICAgZG8ge1xuICAgICAgICBpZiAodGhpcy5wZWVrKCd9JykpIHtcbiAgICAgICAgICAvLyBTdXBwb3J0IHRyYWlsaW5nIGNvbW1hcyBwZXIgRVM1LjEuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRva2VuID0gdGhpcy5jb25zdW1lKCk7XG4gICAgICAgIGlmICh0b2tlbi5jb25zdGFudCkge1xuICAgICAgICAgIGtleXMucHVzaCh0b2tlbi52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodG9rZW4uaWRlbnRpZmllcikge1xuICAgICAgICAgIGtleXMucHVzaCh0b2tlbi50ZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRocm93RXJyb3IoXCJpbnZhbGlkIGtleVwiLCB0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25zdW1lKCc6Jyk7XG4gICAgICAgIHZhbHVlRm5zLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnfScpO1xuXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VPYmplY3RMaXRlcmFsKHNlbGYsIGxvY2Fscykge1xuICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdmFsdWVGbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBvYmplY3Rba2V5c1tpXV0gPSB2YWx1ZUZuc1tpXShzZWxmLCBsb2NhbHMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9LCB7XG4gICAgICBsaXRlcmFsOiB0cnVlLFxuICAgICAgY29uc3RhbnQ6IHZhbHVlRm5zLmV2ZXJ5KGlzQ29uc3RhbnQpLFxuICAgICAgaW5wdXRzOiB2YWx1ZUZuc1xuICAgIH0pO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBQYXJzZXIgaGVscGVyIGZ1bmN0aW9uc1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gc2V0dGVyKG9iaiwgbG9jYWxzLCBwYXRoLCBzZXRWYWx1ZSwgZnVsbEV4cCkge1xuICBlbnN1cmVTYWZlT2JqZWN0KG9iaiwgZnVsbEV4cCk7XG4gIGVuc3VyZVNhZmVPYmplY3QobG9jYWxzLCBmdWxsRXhwKTtcblxuICB2YXIgZWxlbWVudCA9IHBhdGguc3BsaXQoJy4nKSwga2V5O1xuICBmb3IgKHZhciBpID0gMDsgZWxlbWVudC5sZW5ndGggPiAxOyBpKyspIHtcbiAgICBrZXkgPSBlbnN1cmVTYWZlTWVtYmVyTmFtZShlbGVtZW50LnNoaWZ0KCksIGZ1bGxFeHApO1xuICAgIHZhciBwcm9wZXJ0eU9iaiA9IChpID09PSAwICYmIGxvY2FscyAmJiBsb2NhbHNba2V5XSkgfHwgb2JqW2tleV07XG4gICAgaWYgKCFwcm9wZXJ0eU9iaikge1xuICAgICAgcHJvcGVydHlPYmogPSB7fTtcbiAgICAgIG9ialtrZXldID0gcHJvcGVydHlPYmo7XG4gICAgfVxuICAgIG9iaiA9IGVuc3VyZVNhZmVPYmplY3QocHJvcGVydHlPYmosIGZ1bGxFeHApO1xuICB9XG4gIGtleSA9IGVuc3VyZVNhZmVNZW1iZXJOYW1lKGVsZW1lbnQuc2hpZnQoKSwgZnVsbEV4cCk7XG4gIGVuc3VyZVNhZmVPYmplY3Qob2JqW2tleV0sIGZ1bGxFeHApO1xuICBvYmpba2V5XSA9IHNldFZhbHVlO1xuICByZXR1cm4gc2V0VmFsdWU7XG59XG5cbnZhciBnZXR0ZXJGbkNhY2hlRGVmYXVsdCA9IGNyZWF0ZU1hcCgpO1xudmFyIGdldHRlckZuQ2FjaGVFeHBlbnNpdmUgPSBjcmVhdGVNYXAoKTtcblxuZnVuY3Rpb24gaXNQb3NzaWJseURhbmdlcm91c01lbWJlck5hbWUobmFtZSkge1xuICByZXR1cm4gbmFtZSA9PSAnY29uc3RydWN0b3InO1xufVxuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBcIkJsYWNrIEhvbGVcIiB2YXJpYW50IGZyb206XG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL2FuZ3VsYXJqcy1wYXJzZS1nZXR0ZXIvNFxuICogLSBodHRwOi8vanNwZXJmLmNvbS9wYXRoLWV2YWx1YXRpb24tc2ltcGxpZmllZC83XG4gKi9cbmZ1bmN0aW9uIGNzcFNhZmVHZXR0ZXJGbihrZXkwLCBrZXkxLCBrZXkyLCBrZXkzLCBrZXk0LCBmdWxsRXhwLCBleHBlbnNpdmVDaGVja3MpIHtcbiAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MCwgZnVsbEV4cCk7XG4gIGVuc3VyZVNhZmVNZW1iZXJOYW1lKGtleTEsIGZ1bGxFeHApO1xuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkyLCBmdWxsRXhwKTtcbiAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MywgZnVsbEV4cCk7XG4gIGVuc3VyZVNhZmVNZW1iZXJOYW1lKGtleTQsIGZ1bGxFeHApO1xuICB2YXIgZXNvID0gZnVuY3Rpb24obykge1xuICAgIHJldHVybiBlbnN1cmVTYWZlT2JqZWN0KG8sIGZ1bGxFeHApO1xuICB9O1xuICB2YXIgZXNvMCA9IChleHBlbnNpdmVDaGVja3MgfHwgaXNQb3NzaWJseURhbmdlcm91c01lbWJlck5hbWUoa2V5MCkpID8gZXNvIDogaWRlbnRpdHk7XG4gIHZhciBlc28xID0gKGV4cGVuc2l2ZUNoZWNrcyB8fCBpc1Bvc3NpYmx5RGFuZ2Vyb3VzTWVtYmVyTmFtZShrZXkxKSkgPyBlc28gOiBpZGVudGl0eTtcbiAgdmFyIGVzbzIgPSAoZXhwZW5zaXZlQ2hlY2tzIHx8IGlzUG9zc2libHlEYW5nZXJvdXNNZW1iZXJOYW1lKGtleTIpKSA/IGVzbyA6IGlkZW50aXR5O1xuICB2YXIgZXNvMyA9IChleHBlbnNpdmVDaGVja3MgfHwgaXNQb3NzaWJseURhbmdlcm91c01lbWJlck5hbWUoa2V5MykpID8gZXNvIDogaWRlbnRpdHk7XG4gIHZhciBlc280ID0gKGV4cGVuc2l2ZUNoZWNrcyB8fCBpc1Bvc3NpYmx5RGFuZ2Vyb3VzTWVtYmVyTmFtZShrZXk0KSkgPyBlc28gOiBpZGVudGl0eTtcblxuICByZXR1cm4gZnVuY3Rpb24gY3NwU2FmZUdldHRlcihzY29wZSwgbG9jYWxzKSB7XG4gICAgdmFyIHBhdGhWYWwgPSAobG9jYWxzICYmIGxvY2Fscy5oYXNPd25Qcm9wZXJ0eShrZXkwKSkgPyBsb2NhbHMgOiBzY29wZTtcblxuICAgIGlmIChwYXRoVmFsID09IG51bGwpIHJldHVybiBwYXRoVmFsO1xuICAgIHBhdGhWYWwgPSBlc28wKHBhdGhWYWxba2V5MF0pO1xuXG4gICAgaWYgKCFrZXkxKSByZXR1cm4gcGF0aFZhbDtcbiAgICBpZiAocGF0aFZhbCA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHBhdGhWYWwgPSBlc28xKHBhdGhWYWxba2V5MV0pO1xuXG4gICAgaWYgKCFrZXkyKSByZXR1cm4gcGF0aFZhbDtcbiAgICBpZiAocGF0aFZhbCA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHBhdGhWYWwgPSBlc28yKHBhdGhWYWxba2V5Ml0pO1xuXG4gICAgaWYgKCFrZXkzKSByZXR1cm4gcGF0aFZhbDtcbiAgICBpZiAocGF0aFZhbCA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHBhdGhWYWwgPSBlc28zKHBhdGhWYWxba2V5M10pO1xuXG4gICAgaWYgKCFrZXk0KSByZXR1cm4gcGF0aFZhbDtcbiAgICBpZiAocGF0aFZhbCA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHBhdGhWYWwgPSBlc280KHBhdGhWYWxba2V5NF0pO1xuXG4gICAgcmV0dXJuIHBhdGhWYWw7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldHRlckZuV2l0aEVuc3VyZVNhZmVPYmplY3QoZm4sIGZ1bGxFeHByZXNzaW9uKSB7XG4gIHJldHVybiBmdW5jdGlvbihzLCBsKSB7XG4gICAgcmV0dXJuIGZuKHMsIGwsIGVuc3VyZVNhZmVPYmplY3QsIGZ1bGxFeHByZXNzaW9uKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0dGVyRm4ocGF0aCwgb3B0aW9ucywgZnVsbEV4cCkge1xuICB2YXIgZXhwZW5zaXZlQ2hlY2tzID0gb3B0aW9ucy5leHBlbnNpdmVDaGVja3M7XG4gIHZhciBnZXR0ZXJGbkNhY2hlID0gKGV4cGVuc2l2ZUNoZWNrcyA/IGdldHRlckZuQ2FjaGVFeHBlbnNpdmUgOiBnZXR0ZXJGbkNhY2hlRGVmYXVsdCk7XG4gIHZhciBmbiA9IGdldHRlckZuQ2FjaGVbcGF0aF07XG4gIGlmIChmbikgcmV0dXJuIGZuO1xuXG5cbiAgdmFyIHBhdGhLZXlzID0gcGF0aC5zcGxpdCgnLicpLFxuICAgICAgcGF0aEtleXNMZW5ndGggPSBwYXRoS2V5cy5sZW5ndGg7XG5cbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vYW5ndWxhcmpzLXBhcnNlLWdldHRlci82XG4gIGlmIChvcHRpb25zLmNzcCkge1xuICAgIGlmIChwYXRoS2V5c0xlbmd0aCA8IDYpIHtcbiAgICAgIGZuID0gY3NwU2FmZUdldHRlckZuKHBhdGhLZXlzWzBdLCBwYXRoS2V5c1sxXSwgcGF0aEtleXNbMl0sIHBhdGhLZXlzWzNdLCBwYXRoS2V5c1s0XSwgZnVsbEV4cCwgZXhwZW5zaXZlQ2hlY2tzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm4gPSBmdW5jdGlvbiBjc3BTYWZlR2V0dGVyKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgdmFyIGkgPSAwLCB2YWw7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICB2YWwgPSBjc3BTYWZlR2V0dGVyRm4ocGF0aEtleXNbaSsrXSwgcGF0aEtleXNbaSsrXSwgcGF0aEtleXNbaSsrXSwgcGF0aEtleXNbaSsrXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aEtleXNbaSsrXSwgZnVsbEV4cCwgZXhwZW5zaXZlQ2hlY2tzKShzY29wZSwgbG9jYWxzKTtcblxuICAgICAgICAgIGxvY2FscyA9IHVuZGVmaW5lZDsgLy8gY2xlYXIgYWZ0ZXIgZmlyc3QgaXRlcmF0aW9uXG4gICAgICAgICAgc2NvcGUgPSB2YWw7XG4gICAgICAgIH0gd2hpbGUgKGkgPCBwYXRoS2V5c0xlbmd0aCk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgY29kZSA9ICcnO1xuICAgIGlmIChleHBlbnNpdmVDaGVja3MpIHtcbiAgICAgIGNvZGUgKz0gJ3MgPSBlc28ocywgZmUpO1xcbmwgPSBlc28obCwgZmUpO1xcbic7XG4gICAgfVxuICAgIHZhciBuZWVkc0Vuc3VyZVNhZmVPYmplY3QgPSBleHBlbnNpdmVDaGVja3M7XG4gICAgZm9yRWFjaChwYXRoS2V5cywgZnVuY3Rpb24oa2V5LCBpbmRleCkge1xuICAgICAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5LCBmdWxsRXhwKTtcbiAgICAgIHZhciBsb29rdXBKcyA9IChpbmRleFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHNpbXBseSBkZXJlZmVyZW5jZSAncycgb24gYW55IC5kb3Qgbm90YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICA/ICdzJ1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBpZiB3ZSBhcmUgZmlyc3QgdGhlbiB3ZSBjaGVjayBsb2NhbHMgZmlyc3QsIGFuZCBpZiBzbyByZWFkIGl0IGZpcnN0XG4gICAgICAgICAgICAgICAgICAgICAgOiAnKChsJiZsLmhhc093blByb3BlcnR5KFwiJyArIGtleSArICdcIikpP2w6cyknKSArICcuJyArIGtleTtcbiAgICAgIGlmIChleHBlbnNpdmVDaGVja3MgfHwgaXNQb3NzaWJseURhbmdlcm91c01lbWJlck5hbWUoa2V5KSkge1xuICAgICAgICBsb29rdXBKcyA9ICdlc28oJyArIGxvb2t1cEpzICsgJywgZmUpJztcbiAgICAgICAgbmVlZHNFbnN1cmVTYWZlT2JqZWN0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvZGUgKz0gJ2lmKHMgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcXG4nICtcbiAgICAgICAgICAgICAgJ3M9JyArIGxvb2t1cEpzICsgJztcXG4nO1xuICAgIH0pO1xuICAgIGNvZGUgKz0gJ3JldHVybiBzOyc7XG5cbiAgICAvKiBqc2hpbnQgLVcwNTQgKi9cbiAgICB2YXIgZXZhbGVkRm5HZXR0ZXIgPSBuZXcgRnVuY3Rpb24oJ3MnLCAnbCcsICdlc28nLCAnZmUnLCBjb2RlKTsgLy8gcz1zY29wZSwgbD1sb2NhbHMsIGVzbz1lbnN1cmVTYWZlT2JqZWN0XG4gICAgLyoganNoaW50ICtXMDU0ICovXG4gICAgZXZhbGVkRm5HZXR0ZXIudG9TdHJpbmcgPSB2YWx1ZUZuKGNvZGUpO1xuICAgIGlmIChuZWVkc0Vuc3VyZVNhZmVPYmplY3QpIHtcbiAgICAgIGV2YWxlZEZuR2V0dGVyID0gZ2V0dGVyRm5XaXRoRW5zdXJlU2FmZU9iamVjdChldmFsZWRGbkdldHRlciwgZnVsbEV4cCk7XG4gICAgfVxuICAgIGZuID0gZXZhbGVkRm5HZXR0ZXI7XG4gIH1cblxuICBmbi5zaGFyZWRHZXR0ZXIgPSB0cnVlO1xuICBmbi5hc3NpZ24gPSBmdW5jdGlvbihzZWxmLCB2YWx1ZSwgbG9jYWxzKSB7XG4gICAgcmV0dXJuIHNldHRlcihzZWxmLCBsb2NhbHMsIHBhdGgsIHZhbHVlLCBwYXRoKTtcbiAgfTtcbiAgZ2V0dGVyRm5DYWNoZVtwYXRoXSA9IGZuO1xuICByZXR1cm4gZm47XG59XG5cbnZhciBvYmplY3RWYWx1ZU9mID0gT2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mO1xuXG5mdW5jdGlvbiBnZXRWYWx1ZU9mKHZhbHVlKSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlLnZhbHVlT2YpID8gdmFsdWUudmFsdWVPZigpIDogb2JqZWN0VmFsdWVPZi5jYWxsKHZhbHVlKTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHBhcnNlXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIENvbnZlcnRzIEFuZ3VsYXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaW50byBhIGZ1bmN0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciBnZXR0ZXIgPSAkcGFyc2UoJ3VzZXIubmFtZScpO1xuICogICB2YXIgc2V0dGVyID0gZ2V0dGVyLmFzc2lnbjtcbiAqICAgdmFyIGNvbnRleHQgPSB7dXNlcjp7bmFtZTonYW5ndWxhcid9fTtcbiAqICAgdmFyIGxvY2FscyA9IHt1c2VyOntuYW1lOidsb2NhbCd9fTtcbiAqXG4gKiAgIGV4cGVjdChnZXR0ZXIoY29udGV4dCkpLnRvRXF1YWwoJ2FuZ3VsYXInKTtcbiAqICAgc2V0dGVyKGNvbnRleHQsICduZXdWYWx1ZScpO1xuICogICBleHBlY3QoY29udGV4dC51c2VyLm5hbWUpLnRvRXF1YWwoJ25ld1ZhbHVlJyk7XG4gKiAgIGV4cGVjdChnZXR0ZXIoY29udGV4dCwgbG9jYWxzKSkudG9FcXVhbCgnbG9jYWwnKTtcbiAqIGBgYFxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IGEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAqXG4gKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdzXG4gKiAgICAgIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW5cbiAqICAgICAgYGNvbnRleHRgLlxuICpcbiAqICAgIFRoZSByZXR1cm5lZCBmdW5jdGlvbiBhbHNvIGhhcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiAgICAgICogYGxpdGVyYWxgIOKAkyBge2Jvb2xlYW59YCDigJMgd2hldGhlciB0aGUgZXhwcmVzc2lvbidzIHRvcC1sZXZlbCBub2RlIGlzIGEgSmF2YVNjcmlwdFxuICogICAgICAgIGxpdGVyYWwuXG4gKiAgICAgICogYGNvbnN0YW50YCDigJMgYHtib29sZWFufWAg4oCTIHdoZXRoZXIgdGhlIGV4cHJlc3Npb24gaXMgbWFkZSBlbnRpcmVseSBvZiBKYXZhU2NyaXB0XG4gKiAgICAgICAgY29uc3RhbnQgbGl0ZXJhbHMuXG4gKiAgICAgICogYGFzc2lnbmAg4oCTIGB7P2Z1bmN0aW9uKGNvbnRleHQsIHZhbHVlKX1gIOKAkyBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhc3NpZ25hYmxlLCB0aGlzIHdpbGwgYmVcbiAqICAgICAgICBzZXQgdG8gYSBmdW5jdGlvbiB0byBjaGFuZ2UgaXRzIHZhbHVlIG9uIHRoZSBnaXZlbiBjb250ZXh0LlxuICpcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkcGFyc2VQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogYCRwYXJzZVByb3ZpZGVyYCBjYW4gYmUgdXNlZCBmb3IgY29uZmlndXJpbmcgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIHtAbGluayBuZy4kcGFyc2UgJHBhcnNlfVxuICogIHNlcnZpY2UuXG4gKi9cbmZ1bmN0aW9uICRQYXJzZVByb3ZpZGVyKCkge1xuICB2YXIgY2FjaGVEZWZhdWx0ID0gY3JlYXRlTWFwKCk7XG4gIHZhciBjYWNoZUV4cGVuc2l2ZSA9IGNyZWF0ZU1hcCgpO1xuXG5cblxuICB0aGlzLiRnZXQgPSBbJyRmaWx0ZXInLCAnJHNuaWZmZXInLCBmdW5jdGlvbigkZmlsdGVyLCAkc25pZmZlcikge1xuICAgIHZhciAkcGFyc2VPcHRpb25zID0ge1xuICAgICAgICAgIGNzcDogJHNuaWZmZXIuY3NwLFxuICAgICAgICAgIGV4cGVuc2l2ZUNoZWNrczogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlT3B0aW9uc0V4cGVuc2l2ZSA9IHtcbiAgICAgICAgICBjc3A6ICRzbmlmZmVyLmNzcCxcbiAgICAgICAgICBleHBlbnNpdmVDaGVja3M6IHRydWVcbiAgICAgICAgfTtcblxuICAgIGZ1bmN0aW9uIHdyYXBTaGFyZWRFeHByZXNzaW9uKGV4cCkge1xuICAgICAgdmFyIHdyYXBwZWQgPSBleHA7XG5cbiAgICAgIGlmIChleHAuc2hhcmVkR2V0dGVyKSB7XG4gICAgICAgIHdyYXBwZWQgPSBmdW5jdGlvbiAkcGFyc2VXcmFwcGVyKHNlbGYsIGxvY2Fscykge1xuICAgICAgICAgIHJldHVybiBleHAoc2VsZiwgbG9jYWxzKTtcbiAgICAgICAgfTtcbiAgICAgICAgd3JhcHBlZC5saXRlcmFsID0gZXhwLmxpdGVyYWw7XG4gICAgICAgIHdyYXBwZWQuY29uc3RhbnQgPSBleHAuY29uc3RhbnQ7XG4gICAgICAgIHdyYXBwZWQuYXNzaWduID0gZXhwLmFzc2lnbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHdyYXBwZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICRwYXJzZShleHAsIGludGVyY2VwdG9yRm4sIGV4cGVuc2l2ZUNoZWNrcykge1xuICAgICAgdmFyIHBhcnNlZEV4cHJlc3Npb24sIG9uZVRpbWUsIGNhY2hlS2V5O1xuXG4gICAgICBzd2l0Y2ggKHR5cGVvZiBleHApIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICBjYWNoZUtleSA9IGV4cCA9IGV4cC50cmltKCk7XG5cbiAgICAgICAgICB2YXIgY2FjaGUgPSAoZXhwZW5zaXZlQ2hlY2tzID8gY2FjaGVFeHBlbnNpdmUgOiBjYWNoZURlZmF1bHQpO1xuICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBjYWNoZVtjYWNoZUtleV07XG5cbiAgICAgICAgICBpZiAoIXBhcnNlZEV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIGlmIChleHAuY2hhckF0KDApID09PSAnOicgJiYgZXhwLmNoYXJBdCgxKSA9PT0gJzonKSB7XG4gICAgICAgICAgICAgIG9uZVRpbWUgPSB0cnVlO1xuICAgICAgICAgICAgICBleHAgPSBleHAuc3Vic3RyaW5nKDIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcGFyc2VPcHRpb25zID0gZXhwZW5zaXZlQ2hlY2tzID8gJHBhcnNlT3B0aW9uc0V4cGVuc2l2ZSA6ICRwYXJzZU9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgbGV4ZXIgPSBuZXcgTGV4ZXIocGFyc2VPcHRpb25zKTtcbiAgICAgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgUGFyc2VyKGxleGVyLCAkZmlsdGVyLCBwYXJzZU9wdGlvbnMpO1xuICAgICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbiA9IHBhcnNlci5wYXJzZShleHApO1xuXG4gICAgICAgICAgICBpZiAocGFyc2VkRXhwcmVzc2lvbi5jb25zdGFudCkge1xuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZSA9IGNvbnN0YW50V2F0Y2hEZWxlZ2F0ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob25lVGltZSkge1xuICAgICAgICAgICAgICAvL29uZVRpbWUgaXMgbm90IHBhcnQgb2YgdGhlIGV4cCBwYXNzZWQgdG8gdGhlIFBhcnNlciBzbyB3ZSBtYXkgaGF2ZSB0b1xuICAgICAgICAgICAgICAvL3dyYXAgdGhlIHBhcnNlZEV4cHJlc3Npb24gYmVmb3JlIGFkZGluZyBhICQkd2F0Y2hEZWxlZ2F0ZVxuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uID0gd3JhcFNoYXJlZEV4cHJlc3Npb24ocGFyc2VkRXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlID0gcGFyc2VkRXhwcmVzc2lvbi5saXRlcmFsID9cbiAgICAgICAgICAgICAgICBvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUgOiBvbmVUaW1lV2F0Y2hEZWxlZ2F0ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMpIHtcbiAgICAgICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBpbnB1dHNXYXRjaERlbGVnYXRlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWNoZVtjYWNoZUtleV0gPSBwYXJzZWRFeHByZXNzaW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYWRkSW50ZXJjZXB0b3IocGFyc2VkRXhwcmVzc2lvbiwgaW50ZXJjZXB0b3JGbik7XG5cbiAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgIHJldHVybiBhZGRJbnRlcmNlcHRvcihleHAsIGludGVyY2VwdG9yRm4pO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIGFkZEludGVyY2VwdG9yKG5vb3AsIGludGVyY2VwdG9yRm4pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBjb2xsZWN0RXhwcmVzc2lvbklucHV0cyhpbnB1dHMsIGxpc3QpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIHZhciBpbnB1dCA9IGlucHV0c1tpXTtcbiAgICAgICAgaWYgKCFpbnB1dC5jb25zdGFudCkge1xuICAgICAgICAgIGlmIChpbnB1dC5pbnB1dHMpIHtcbiAgICAgICAgICAgIGNvbGxlY3RFeHByZXNzaW9uSW5wdXRzKGlucHV0LmlucHV0cywgbGlzdCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChsaXN0LmluZGV4T2YoaW5wdXQpID09PSAtMSkgeyAvLyBUT0RPKHBlcmYpIGNhbiB3ZSBkbyBiZXR0ZXI/XG4gICAgICAgICAgICBsaXN0LnB1c2goaW5wdXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbGlzdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrKG5ld1ZhbHVlLCBvbGRWYWx1ZU9mVmFsdWUpIHtcblxuICAgICAgaWYgKG5ld1ZhbHVlID09IG51bGwgfHwgb2xkVmFsdWVPZlZhbHVlID09IG51bGwpIHsgLy8gbnVsbC91bmRlZmluZWRcbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlID09PSBvbGRWYWx1ZU9mVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgbmV3VmFsdWUgPT09ICdvYmplY3QnKSB7XG5cbiAgICAgICAgLy8gYXR0ZW1wdCB0byBjb252ZXJ0IHRoZSB2YWx1ZSB0byBhIHByaW1pdGl2ZSB0eXBlXG4gICAgICAgIC8vIFRPRE8oZG9jcyk6IGFkZCBhIG5vdGUgdG8gZG9jcyB0aGF0IGJ5IGltcGxlbWVudGluZyB2YWx1ZU9mIGV2ZW4gb2JqZWN0cyBhbmQgYXJyYXlzIGNhblxuICAgICAgICAvLyAgICAgICAgICAgICBiZSBjaGVhcGx5IGRpcnR5LWNoZWNrZWRcbiAgICAgICAgbmV3VmFsdWUgPSBnZXRWYWx1ZU9mKG5ld1ZhbHVlKTtcblxuICAgICAgICBpZiAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIC8vIG9iamVjdHMvYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkIC0gZGVlcC13YXRjaGluZyB0aGVtIHdvdWxkIGJlIHRvbyBleHBlbnNpdmVcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmYWxsLXRocm91Z2ggdG8gdGhlIHByaW1pdGl2ZSBlcXVhbGl0eSBjaGVja1xuICAgICAgfVxuXG4gICAgICAvL1ByaW1pdGl2ZSBvciBOYU5cbiAgICAgIHJldHVybiBuZXdWYWx1ZSA9PT0gb2xkVmFsdWVPZlZhbHVlIHx8IChuZXdWYWx1ZSAhPT0gbmV3VmFsdWUgJiYgb2xkVmFsdWVPZlZhbHVlICE9PSBvbGRWYWx1ZU9mVmFsdWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlucHV0c1dhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xuICAgICAgdmFyIGlucHV0RXhwcmVzc2lvbnMgPSBwYXJzZWRFeHByZXNzaW9uLiQkaW5wdXRzIHx8XG4gICAgICAgICAgICAgICAgICAgIChwYXJzZWRFeHByZXNzaW9uLiQkaW5wdXRzID0gY29sbGVjdEV4cHJlc3Npb25JbnB1dHMocGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMsIFtdKSk7XG5cbiAgICAgIHZhciBsYXN0UmVzdWx0O1xuXG4gICAgICBpZiAoaW5wdXRFeHByZXNzaW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdmFyIG9sZElucHV0VmFsdWUgPSBleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrOyAvLyBpbml0IHRvIHNvbWV0aGluZyB1bmlxdWUgc28gdGhhdCBlcXVhbHMgY2hlY2sgZmFpbHNcbiAgICAgICAgaW5wdXRFeHByZXNzaW9ucyA9IGlucHV0RXhwcmVzc2lvbnNbMF07XG4gICAgICAgIHJldHVybiBzY29wZS4kd2F0Y2goZnVuY3Rpb24gZXhwcmVzc2lvbklucHV0V2F0Y2goc2NvcGUpIHtcbiAgICAgICAgICB2YXIgbmV3SW5wdXRWYWx1ZSA9IGlucHV0RXhwcmVzc2lvbnMoc2NvcGUpO1xuICAgICAgICAgIGlmICghZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayhuZXdJbnB1dFZhbHVlLCBvbGRJbnB1dFZhbHVlKSkge1xuICAgICAgICAgICAgbGFzdFJlc3VsdCA9IHBhcnNlZEV4cHJlc3Npb24oc2NvcGUpO1xuICAgICAgICAgICAgb2xkSW5wdXRWYWx1ZSA9IG5ld0lucHV0VmFsdWUgJiYgZ2V0VmFsdWVPZihuZXdJbnB1dFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0RXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXNbaV0gPSBleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrOyAvLyBpbml0IHRvIHNvbWV0aGluZyB1bmlxdWUgc28gdGhhdCBlcXVhbHMgY2hlY2sgZmFpbHNcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBleHByZXNzaW9uSW5wdXRzV2F0Y2goc2NvcGUpIHtcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dEV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICB2YXIgbmV3SW5wdXRWYWx1ZSA9IGlucHV0RXhwcmVzc2lvbnNbaV0oc2NvcGUpO1xuICAgICAgICAgIGlmIChjaGFuZ2VkIHx8IChjaGFuZ2VkID0gIWV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3SW5wdXRWYWx1ZSwgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzW2ldKSkpIHtcbiAgICAgICAgICAgIG9sZElucHV0VmFsdWVPZlZhbHVlc1tpXSA9IG5ld0lucHV0VmFsdWUgJiYgZ2V0VmFsdWVPZihuZXdJbnB1dFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgIGxhc3RSZXN1bHQgPSBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgfSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbmVUaW1lV2F0Y2hEZWxlZ2F0ZShzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwYXJzZWRFeHByZXNzaW9uKSB7XG4gICAgICB2YXIgdW53YXRjaCwgbGFzdFZhbHVlO1xuICAgICAgcmV0dXJuIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2goZnVuY3Rpb24gb25lVGltZVdhdGNoKHNjb3BlKSB7XG4gICAgICAgIHJldHVybiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcbiAgICAgIH0sIGZ1bmN0aW9uIG9uZVRpbWVMaXN0ZW5lcih2YWx1ZSwgb2xkLCBzY29wZSkge1xuICAgICAgICBsYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXIpKSB7XG4gICAgICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQobGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICB1bndhdGNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIG9iamVjdEVxdWFsaXR5KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xuICAgICAgdmFyIHVud2F0Y2gsIGxhc3RWYWx1ZTtcbiAgICAgIHJldHVybiB1bndhdGNoID0gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG9uZVRpbWVXYXRjaChzY29wZSkge1xuICAgICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XG4gICAgICB9LCBmdW5jdGlvbiBvbmVUaW1lTGlzdGVuZXIodmFsdWUsIG9sZCwgc2NvcGUpIHtcbiAgICAgICAgbGFzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xuICAgICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgdmFsdWUsIG9sZCwgc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FsbERlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGlzQWxsRGVmaW5lZChsYXN0VmFsdWUpKSB1bndhdGNoKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIG9iamVjdEVxdWFsaXR5KTtcblxuICAgICAgZnVuY3Rpb24gaXNBbGxEZWZpbmVkKHZhbHVlKSB7XG4gICAgICAgIHZhciBhbGxEZWZpbmVkID0gdHJ1ZTtcbiAgICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgaWYgKCFpc0RlZmluZWQodmFsKSkgYWxsRGVmaW5lZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbERlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29uc3RhbnRXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24pIHtcbiAgICAgIHZhciB1bndhdGNoO1xuICAgICAgcmV0dXJuIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2goZnVuY3Rpb24gY29uc3RhbnRXYXRjaChzY29wZSkge1xuICAgICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XG4gICAgICB9LCBmdW5jdGlvbiBjb25zdGFudExpc3RlbmVyKHZhbHVlLCBvbGQsIHNjb3BlKSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xuICAgICAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgdW53YXRjaCgpO1xuICAgICAgfSwgb2JqZWN0RXF1YWxpdHkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZEludGVyY2VwdG9yKHBhcnNlZEV4cHJlc3Npb24sIGludGVyY2VwdG9yRm4pIHtcbiAgICAgIGlmICghaW50ZXJjZXB0b3JGbikgcmV0dXJuIHBhcnNlZEV4cHJlc3Npb247XG4gICAgICB2YXIgd2F0Y2hEZWxlZ2F0ZSA9IHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlO1xuXG4gICAgICB2YXIgcmVndWxhcldhdGNoID1cbiAgICAgICAgICB3YXRjaERlbGVnYXRlICE9PSBvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUgJiZcbiAgICAgICAgICB3YXRjaERlbGVnYXRlICE9PSBvbmVUaW1lV2F0Y2hEZWxlZ2F0ZTtcblxuICAgICAgdmFyIGZuID0gcmVndWxhcldhdGNoID8gZnVuY3Rpb24gcmVndWxhckludGVyY2VwdGVkRXhwcmVzc2lvbihzY29wZSwgbG9jYWxzKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnNlZEV4cHJlc3Npb24oc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgIHJldHVybiBpbnRlcmNlcHRvckZuKHZhbHVlLCBzY29wZSwgbG9jYWxzKTtcbiAgICAgIH0gOiBmdW5jdGlvbiBvbmVUaW1lSW50ZXJjZXB0ZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VkRXhwcmVzc2lvbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGludGVyY2VwdG9yRm4odmFsdWUsIHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAvLyB3ZSBvbmx5IHJldHVybiB0aGUgaW50ZXJjZXB0b3IncyByZXN1bHQgaWYgdGhlXG4gICAgICAgIC8vIGluaXRpYWwgdmFsdWUgaXMgZGVmaW5lZCAoZm9yIGJpbmQtb25jZSlcbiAgICAgICAgcmV0dXJuIGlzRGVmaW5lZCh2YWx1ZSkgPyByZXN1bHQgOiB2YWx1ZTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFByb3BhZ2F0ZSAkJHdhdGNoRGVsZWdhdGVzIG90aGVyIHRoZW4gaW5wdXRzV2F0Y2hEZWxlZ2F0ZVxuICAgICAgaWYgKHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlICYmXG4gICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgIT09IGlucHV0c1dhdGNoRGVsZWdhdGUpIHtcbiAgICAgICAgZm4uJCR3YXRjaERlbGVnYXRlID0gcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGU7XG4gICAgICB9IGVsc2UgaWYgKCFpbnRlcmNlcHRvckZuLiRzdGF0ZWZ1bCkge1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBpbnRlcmNlcHRvciwgYnV0IG5vIHdhdGNoRGVsZWdhdGUgdGhlbiB0cmVhdCB0aGUgaW50ZXJjZXB0b3IgbGlrZVxuICAgICAgICAvLyB3ZSB0cmVhdCBmaWx0ZXJzIC0gaXQgaXMgYXNzdW1lZCB0byBiZSBhIHB1cmUgZnVuY3Rpb24gdW5sZXNzIGZsYWdnZWQgd2l0aCAkc3RhdGVmdWxcbiAgICAgICAgZm4uJCR3YXRjaERlbGVnYXRlID0gaW5wdXRzV2F0Y2hEZWxlZ2F0ZTtcbiAgICAgICAgZm4uaW5wdXRzID0gW3BhcnNlZEV4cHJlc3Npb25dO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm47XG4gICAgfVxuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHFcbiAqIEByZXF1aXJlcyAkcm9vdFNjb3BlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHNlcnZpY2UgdGhhdCBoZWxwcyB5b3UgcnVuIGZ1bmN0aW9ucyBhc3luY2hyb25vdXNseSwgYW5kIHVzZSB0aGVpciByZXR1cm4gdmFsdWVzIChvciBleGNlcHRpb25zKVxuICogd2hlbiB0aGV5IGFyZSBkb25lIHByb2Nlc3NpbmcuXG4gKlxuICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBwcm9taXNlcy9kZWZlcnJlZCBvYmplY3RzIGluc3BpcmVkIGJ5XG4gKiBbS3JpcyBLb3dhbCdzIFFdKGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcSkuXG4gKlxuICogJHEgY2FuIGJlIHVzZWQgaW4gdHdvIGZhc2hpb25zIC0tLSBvbmUgd2hpY2ggaXMgbW9yZSBzaW1pbGFyIHRvIEtyaXMgS293YWwncyBRIG9yIGpRdWVyeSdzIERlZmVycmVkXG4gKiBpbXBsZW1lbnRhdGlvbnMsIGFuZCB0aGUgb3RoZXIgd2hpY2ggcmVzZW1ibGVzIEVTNiBwcm9taXNlcyB0byBzb21lIGRlZ3JlZS5cbiAqXG4gKiAjICRxIGNvbnN0cnVjdG9yXG4gKlxuICogVGhlIHN0cmVhbWxpbmVkIEVTNiBzdHlsZSBwcm9taXNlIGlzIGVzc2VudGlhbGx5IGp1c3QgdXNpbmcgJHEgYXMgYSBjb25zdHJ1Y3RvciB3aGljaCB0YWtlcyBhIGByZXNvbHZlcmBcbiAqIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhpcyBpcyBzaW1pbGFyIHRvIHRoZSBuYXRpdmUgUHJvbWlzZSBpbXBsZW1lbnRhdGlvbiBmcm9tIEVTNiBIYXJtb255LFxuICogc2VlIFtNRE5dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb21pc2UpLlxuICpcbiAqIFdoaWxlIHRoZSBjb25zdHJ1Y3Rvci1zdHlsZSB1c2UgaXMgc3VwcG9ydGVkLCBub3QgYWxsIG9mIHRoZSBzdXBwb3J0aW5nIG1ldGhvZHMgZnJvbSBFUzYgSGFybW9ueSBwcm9taXNlcyBhcmVcbiAqIGF2YWlsYWJsZSB5ZXQuXG4gKlxuICogSXQgY2FuIGJlIHVzZWQgbGlrZSBzbzpcbiAqXG4gKiBgYGBqc1xuICogICAvLyBmb3IgdGhlIHB1cnBvc2Ugb2YgdGhpcyBleGFtcGxlIGxldCdzIGFzc3VtZSB0aGF0IHZhcmlhYmxlcyBgJHFgIGFuZCBgb2tUb0dyZWV0YFxuICogICAvLyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGxleGljYWwgc2NvcGUgKHRoZXkgY291bGQgaGF2ZSBiZWVuIGluamVjdGVkIG9yIHBhc3NlZCBpbikuXG4gKlxuICogICBmdW5jdGlvbiBhc3luY0dyZWV0KG5hbWUpIHtcbiAqICAgICAvLyBwZXJmb3JtIHNvbWUgYXN5bmNocm9ub3VzIG9wZXJhdGlvbiwgcmVzb2x2ZSBvciByZWplY3QgdGhlIHByb21pc2Ugd2hlbiBhcHByb3ByaWF0ZS5cbiAqICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gKiAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICogICAgICAgICBpZiAob2tUb0dyZWV0KG5hbWUpKSB7XG4gKiAgICAgICAgICAgcmVzb2x2ZSgnSGVsbG8sICcgKyBuYW1lICsgJyEnKTtcbiAqICAgICAgICAgfSBlbHNlIHtcbiAqICAgICAgICAgICByZWplY3QoJ0dyZWV0aW5nICcgKyBuYW1lICsgJyBpcyBub3QgYWxsb3dlZC4nKTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSwgMTAwMCk7XG4gKiAgICAgfSk7XG4gKiAgIH1cbiAqXG4gKiAgIHZhciBwcm9taXNlID0gYXN5bmNHcmVldCgnUm9iaW4gSG9vZCcpO1xuICogICBwcm9taXNlLnRoZW4oZnVuY3Rpb24oZ3JlZXRpbmcpIHtcbiAqICAgICBhbGVydCgnU3VjY2VzczogJyArIGdyZWV0aW5nKTtcbiAqICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gKiAgICAgYWxlcnQoJ0ZhaWxlZDogJyArIHJlYXNvbik7XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogTm90ZTogcHJvZ3Jlc3Mvbm90aWZ5IGNhbGxiYWNrcyBhcmUgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgdmlhIHRoZSBFUzYtc3R5bGUgaW50ZXJmYWNlLlxuICpcbiAqIEhvd2V2ZXIsIHRoZSBtb3JlIHRyYWRpdGlvbmFsIENvbW1vbkpTLXN0eWxlIHVzYWdlIGlzIHN0aWxsIGF2YWlsYWJsZSwgYW5kIGRvY3VtZW50ZWQgYmVsb3cuXG4gKlxuICogW1RoZSBDb21tb25KUyBQcm9taXNlIHByb3Bvc2FsXShodHRwOi8vd2lraS5jb21tb25qcy5vcmcvd2lraS9Qcm9taXNlcykgZGVzY3JpYmVzIGEgcHJvbWlzZSBhcyBhblxuICogaW50ZXJmYWNlIGZvciBpbnRlcmFjdGluZyB3aXRoIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHJlc3VsdCBvZiBhbiBhY3Rpb24gdGhhdCBpc1xuICogcGVyZm9ybWVkIGFzeW5jaHJvbm91c2x5LCBhbmQgbWF5IG9yIG1heSBub3QgYmUgZmluaXNoZWQgYXQgYW55IGdpdmVuIHBvaW50IGluIHRpbWUuXG4gKlxuICogRnJvbSB0aGUgcGVyc3BlY3RpdmUgb2YgZGVhbGluZyB3aXRoIGVycm9yIGhhbmRsaW5nLCBkZWZlcnJlZCBhbmQgcHJvbWlzZSBBUElzIGFyZSB0b1xuICogYXN5bmNocm9ub3VzIHByb2dyYW1taW5nIHdoYXQgYHRyeWAsIGBjYXRjaGAgYW5kIGB0aHJvd2Aga2V5d29yZHMgYXJlIHRvIHN5bmNocm9ub3VzIHByb2dyYW1taW5nLlxuICpcbiAqIGBgYGpzXG4gKiAgIC8vIGZvciB0aGUgcHVycG9zZSBvZiB0aGlzIGV4YW1wbGUgbGV0J3MgYXNzdW1lIHRoYXQgdmFyaWFibGVzIGAkcWAgYW5kIGBva1RvR3JlZXRgXG4gKiAgIC8vIGFyZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgbGV4aWNhbCBzY29wZSAodGhleSBjb3VsZCBoYXZlIGJlZW4gaW5qZWN0ZWQgb3IgcGFzc2VkIGluKS5cbiAqXG4gKiAgIGZ1bmN0aW9uIGFzeW5jR3JlZXQobmFtZSkge1xuICogICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gKlxuICogICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gKiAgICAgICBkZWZlcnJlZC5ub3RpZnkoJ0Fib3V0IHRvIGdyZWV0ICcgKyBuYW1lICsgJy4nKTtcbiAqXG4gKiAgICAgICBpZiAob2tUb0dyZWV0KG5hbWUpKSB7XG4gKiAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ0hlbGxvLCAnICsgbmFtZSArICchJyk7XG4gKiAgICAgICB9IGVsc2Uge1xuICogICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ0dyZWV0aW5nICcgKyBuYW1lICsgJyBpcyBub3QgYWxsb3dlZC4nKTtcbiAqICAgICAgIH1cbiAqICAgICB9LCAxMDAwKTtcbiAqXG4gKiAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gKiAgIH1cbiAqXG4gKiAgIHZhciBwcm9taXNlID0gYXN5bmNHcmVldCgnUm9iaW4gSG9vZCcpO1xuICogICBwcm9taXNlLnRoZW4oZnVuY3Rpb24oZ3JlZXRpbmcpIHtcbiAqICAgICBhbGVydCgnU3VjY2VzczogJyArIGdyZWV0aW5nKTtcbiAqICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gKiAgICAgYWxlcnQoJ0ZhaWxlZDogJyArIHJlYXNvbik7XG4gKiAgIH0sIGZ1bmN0aW9uKHVwZGF0ZSkge1xuICogICAgIGFsZXJ0KCdHb3Qgbm90aWZpY2F0aW9uOiAnICsgdXBkYXRlKTtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBBdCBmaXJzdCBpdCBtaWdodCBub3QgYmUgb2J2aW91cyB3aHkgdGhpcyBleHRyYSBjb21wbGV4aXR5IGlzIHdvcnRoIHRoZSB0cm91YmxlLiBUaGUgcGF5b2ZmXG4gKiBjb21lcyBpbiB0aGUgd2F5IG9mIGd1YXJhbnRlZXMgdGhhdCBwcm9taXNlIGFuZCBkZWZlcnJlZCBBUElzIG1ha2UsIHNlZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC91bmNvbW1vbmpzL2Jsb2IvbWFzdGVyL3Byb21pc2VzL3NwZWNpZmljYXRpb24ubWQuXG4gKlxuICogQWRkaXRpb25hbGx5IHRoZSBwcm9taXNlIGFwaSBhbGxvd3MgZm9yIGNvbXBvc2l0aW9uIHRoYXQgaXMgdmVyeSBoYXJkIHRvIGRvIHdpdGggdGhlXG4gKiB0cmFkaXRpb25hbCBjYWxsYmFjayAoW0NQU10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db250aW51YXRpb24tcGFzc2luZ19zdHlsZSkpIGFwcHJvYWNoLlxuICogRm9yIG1vcmUgb24gdGhpcyBwbGVhc2Ugc2VlIHRoZSBbUSBkb2N1bWVudGF0aW9uXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EpIGVzcGVjaWFsbHkgdGhlXG4gKiBzZWN0aW9uIG9uIHNlcmlhbCBvciBwYXJhbGxlbCBqb2luaW5nIG9mIHByb21pc2VzLlxuICpcbiAqICMgVGhlIERlZmVycmVkIEFQSVxuICpcbiAqIEEgbmV3IGluc3RhbmNlIG9mIGRlZmVycmVkIGlzIGNvbnN0cnVjdGVkIGJ5IGNhbGxpbmcgYCRxLmRlZmVyKClgLlxuICpcbiAqIFRoZSBwdXJwb3NlIG9mIHRoZSBkZWZlcnJlZCBvYmplY3QgaXMgdG8gZXhwb3NlIHRoZSBhc3NvY2lhdGVkIFByb21pc2UgaW5zdGFuY2UgYXMgd2VsbCBhcyBBUElzXG4gKiB0aGF0IGNhbiBiZSB1c2VkIGZvciBzaWduYWxpbmcgdGhlIHN1Y2Nlc3NmdWwgb3IgdW5zdWNjZXNzZnVsIGNvbXBsZXRpb24sIGFzIHdlbGwgYXMgdGhlIHN0YXR1c1xuICogb2YgdGhlIHRhc2suXG4gKlxuICogKipNZXRob2RzKipcbiAqXG4gKiAtIGByZXNvbHZlKHZhbHVlKWAg4oCTIHJlc29sdmVzIHRoZSBkZXJpdmVkIHByb21pc2Ugd2l0aCB0aGUgYHZhbHVlYC4gSWYgdGhlIHZhbHVlIGlzIGEgcmVqZWN0aW9uXG4gKiAgIGNvbnN0cnVjdGVkIHZpYSBgJHEucmVqZWN0YCwgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCBpbnN0ZWFkLlxuICogLSBgcmVqZWN0KHJlYXNvbilgIOKAkyByZWplY3RzIHRoZSBkZXJpdmVkIHByb21pc2Ugd2l0aCB0aGUgYHJlYXNvbmAuIFRoaXMgaXMgZXF1aXZhbGVudCB0b1xuICogICByZXNvbHZpbmcgaXQgd2l0aCBhIHJlamVjdGlvbiBjb25zdHJ1Y3RlZCB2aWEgYCRxLnJlamVjdGAuXG4gKiAtIGBub3RpZnkodmFsdWUpYCAtIHByb3ZpZGVzIHVwZGF0ZXMgb24gdGhlIHN0YXR1cyBvZiB0aGUgcHJvbWlzZSdzIGV4ZWN1dGlvbi4gVGhpcyBtYXkgYmUgY2FsbGVkXG4gKiAgIG11bHRpcGxlIHRpbWVzIGJlZm9yZSB0aGUgcHJvbWlzZSBpcyBlaXRoZXIgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXG4gKlxuICogKipQcm9wZXJ0aWVzKipcbiAqXG4gKiAtIHByb21pc2Ug4oCTIGB7UHJvbWlzZX1gIOKAkyBwcm9taXNlIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBkZWZlcnJlZC5cbiAqXG4gKlxuICogIyBUaGUgUHJvbWlzZSBBUElcbiAqXG4gKiBBIG5ldyBwcm9taXNlIGluc3RhbmNlIGlzIGNyZWF0ZWQgd2hlbiBhIGRlZmVycmVkIGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIGNhbiBiZSByZXRyaWV2ZWQgYnlcbiAqIGNhbGxpbmcgYGRlZmVycmVkLnByb21pc2VgLlxuICpcbiAqIFRoZSBwdXJwb3NlIG9mIHRoZSBwcm9taXNlIG9iamVjdCBpcyB0byBhbGxvdyBmb3IgaW50ZXJlc3RlZCBwYXJ0aWVzIHRvIGdldCBhY2Nlc3MgdG8gdGhlIHJlc3VsdFxuICogb2YgdGhlIGRlZmVycmVkIHRhc2sgd2hlbiBpdCBjb21wbGV0ZXMuXG4gKlxuICogKipNZXRob2RzKipcbiAqXG4gKiAtIGB0aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbm90aWZ5Q2FsbGJhY2spYCDigJMgcmVnYXJkbGVzcyBvZiB3aGVuIHRoZSBwcm9taXNlIHdhcyBvclxuICogICB3aWxsIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkLCBgdGhlbmAgY2FsbHMgb25lIG9mIHRoZSBzdWNjZXNzIG9yIGVycm9yIGNhbGxiYWNrcyBhc3luY2hyb25vdXNseVxuICogICBhcyBzb29uIGFzIHRoZSByZXN1bHQgaXMgYXZhaWxhYmxlLiBUaGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudDogdGhlIHJlc3VsdFxuICogICBvciByZWplY3Rpb24gcmVhc29uLiBBZGRpdGlvbmFsbHksIHRoZSBub3RpZnkgY2FsbGJhY2sgbWF5IGJlIGNhbGxlZCB6ZXJvIG9yIG1vcmUgdGltZXMgdG9cbiAqICAgcHJvdmlkZSBhIHByb2dyZXNzIGluZGljYXRpb24sIGJlZm9yZSB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZCBvciByZWplY3RlZC5cbiAqXG4gKiAgIFRoaXMgbWV0aG9kICpyZXR1cm5zIGEgbmV3IHByb21pc2UqIHdoaWNoIGlzIHJlc29sdmVkIG9yIHJlamVjdGVkIHZpYSB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZVxuICogICBgc3VjY2Vzc0NhbGxiYWNrYCwgYGVycm9yQ2FsbGJhY2tgLiBJdCBhbHNvIG5vdGlmaWVzIHZpYSB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZVxuICogICBgbm90aWZ5Q2FsbGJhY2tgIG1ldGhvZC4gVGhlIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIGZyb20gdGhlIG5vdGlmeUNhbGxiYWNrXG4gKiAgIG1ldGhvZC5cbiAqXG4gKiAtIGBjYXRjaChlcnJvckNhbGxiYWNrKWAg4oCTIHNob3J0aGFuZCBmb3IgYHByb21pc2UudGhlbihudWxsLCBlcnJvckNhbGxiYWNrKWBcbiAqXG4gKiAtIGBmaW5hbGx5KGNhbGxiYWNrLCBub3RpZnlDYWxsYmFjaylgIOKAkyBhbGxvd3MgeW91IHRvIG9ic2VydmUgZWl0aGVyIHRoZSBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gb2YgYSBwcm9taXNlLFxuICogICBidXQgdG8gZG8gc28gd2l0aG91dCBtb2RpZnlpbmcgdGhlIGZpbmFsIHZhbHVlLiBUaGlzIGlzIHVzZWZ1bCB0byByZWxlYXNlIHJlc291cmNlcyBvciBkbyBzb21lXG4gKiAgIGNsZWFuLXVwIHRoYXQgbmVlZHMgdG8gYmUgZG9uZSB3aGV0aGVyIHRoZSBwcm9taXNlIHdhcyByZWplY3RlZCBvciByZXNvbHZlZC4gU2VlIHRoZSBbZnVsbFxuICogICBzcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3Evd2lraS9BUEktUmVmZXJlbmNlI3Byb21pc2VmaW5hbGx5Y2FsbGJhY2spIGZvclxuICogICBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqICMgQ2hhaW5pbmcgcHJvbWlzZXNcbiAqXG4gKiBCZWNhdXNlIGNhbGxpbmcgdGhlIGB0aGVuYCBtZXRob2Qgb2YgYSBwcm9taXNlIHJldHVybnMgYSBuZXcgZGVyaXZlZCBwcm9taXNlLCBpdCBpcyBlYXNpbHlcbiAqIHBvc3NpYmxlIHRvIGNyZWF0ZSBhIGNoYWluIG9mIHByb21pc2VzOlxuICpcbiAqIGBgYGpzXG4gKiAgIHByb21pc2VCID0gcHJvbWlzZUEudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAqICAgICByZXR1cm4gcmVzdWx0ICsgMTtcbiAqICAgfSk7XG4gKlxuICogICAvLyBwcm9taXNlQiB3aWxsIGJlIHJlc29sdmVkIGltbWVkaWF0ZWx5IGFmdGVyIHByb21pc2VBIGlzIHJlc29sdmVkIGFuZCBpdHMgdmFsdWVcbiAqICAgLy8gd2lsbCBiZSB0aGUgcmVzdWx0IG9mIHByb21pc2VBIGluY3JlbWVudGVkIGJ5IDFcbiAqIGBgYFxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGNyZWF0ZSBjaGFpbnMgb2YgYW55IGxlbmd0aCBhbmQgc2luY2UgYSBwcm9taXNlIGNhbiBiZSByZXNvbHZlZCB3aXRoIGFub3RoZXJcbiAqIHByb21pc2UgKHdoaWNoIHdpbGwgZGVmZXIgaXRzIHJlc29sdXRpb24gZnVydGhlciksIGl0IGlzIHBvc3NpYmxlIHRvIHBhdXNlL2RlZmVyIHJlc29sdXRpb24gb2ZcbiAqIHRoZSBwcm9taXNlcyBhdCBhbnkgcG9pbnQgaW4gdGhlIGNoYWluLiBUaGlzIG1ha2VzIGl0IHBvc3NpYmxlIHRvIGltcGxlbWVudCBwb3dlcmZ1bCBBUElzIGxpa2VcbiAqICRodHRwJ3MgcmVzcG9uc2UgaW50ZXJjZXB0b3JzLlxuICpcbiAqXG4gKiAjIERpZmZlcmVuY2VzIGJldHdlZW4gS3JpcyBLb3dhbCdzIFEgYW5kICRxXG4gKlxuICogIFRoZXJlIGFyZSB0d28gbWFpbiBkaWZmZXJlbmNlczpcbiAqXG4gKiAtICRxIGlzIGludGVncmF0ZWQgd2l0aCB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGV9IFNjb3BlIG1vZGVsIG9ic2VydmF0aW9uXG4gKiAgIG1lY2hhbmlzbSBpbiBhbmd1bGFyLCB3aGljaCBtZWFucyBmYXN0ZXIgcHJvcGFnYXRpb24gb2YgcmVzb2x1dGlvbiBvciByZWplY3Rpb24gaW50byB5b3VyXG4gKiAgIG1vZGVscyBhbmQgYXZvaWRpbmcgdW5uZWNlc3NhcnkgYnJvd3NlciByZXBhaW50cywgd2hpY2ggd291bGQgcmVzdWx0IGluIGZsaWNrZXJpbmcgVUkuXG4gKiAtIFEgaGFzIG1hbnkgbW9yZSBmZWF0dXJlcyB0aGFuICRxLCBidXQgdGhhdCBjb21lcyBhdCBhIGNvc3Qgb2YgYnl0ZXMuICRxIGlzIHRpbnksIGJ1dCBjb250YWluc1xuICogICBhbGwgdGhlIGltcG9ydGFudCBmdW5jdGlvbmFsaXR5IG5lZWRlZCBmb3IgY29tbW9uIGFzeW5jIHRhc2tzLlxuICpcbiAqICAjIFRlc3RpbmdcbiAqXG4gKiAgYGBganNcbiAqICAgIGl0KCdzaG91bGQgc2ltdWxhdGUgcHJvbWlzZScsIGluamVjdChmdW5jdGlvbigkcSwgJHJvb3RTY29wZSkge1xuICogICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICogICAgICB2YXIgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XG4gKiAgICAgIHZhciByZXNvbHZlZFZhbHVlO1xuICpcbiAqICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7IHJlc29sdmVkVmFsdWUgPSB2YWx1ZTsgfSk7XG4gKiAgICAgIGV4cGVjdChyZXNvbHZlZFZhbHVlKS50b0JlVW5kZWZpbmVkKCk7XG4gKlxuICogICAgICAvLyBTaW11bGF0ZSByZXNvbHZpbmcgb2YgcHJvbWlzZVxuICogICAgICBkZWZlcnJlZC5yZXNvbHZlKDEyMyk7XG4gKiAgICAgIC8vIE5vdGUgdGhhdCB0aGUgJ3RoZW4nIGZ1bmN0aW9uIGRvZXMgbm90IGdldCBjYWxsZWQgc3luY2hyb25vdXNseS5cbiAqICAgICAgLy8gVGhpcyBpcyBiZWNhdXNlIHdlIHdhbnQgdGhlIHByb21pc2UgQVBJIHRvIGFsd2F5cyBiZSBhc3luYywgd2hldGhlciBvciBub3RcbiAqICAgICAgLy8gaXQgZ290IGNhbGxlZCBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm91c2x5LlxuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xuICpcbiAqICAgICAgLy8gUHJvcGFnYXRlIHByb21pc2UgcmVzb2x1dGlvbiB0byAndGhlbicgZnVuY3Rpb25zIHVzaW5nICRhcHBseSgpLlxuICogICAgICAkcm9vdFNjb3BlLiRhcHBseSgpO1xuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9FcXVhbCgxMjMpO1xuICogICAgfSkpO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oZnVuY3Rpb24sIGZ1bmN0aW9uKX0gcmVzb2x2ZXIgRnVuY3Rpb24gd2hpY2ggaXMgcmVzcG9uc2libGUgZm9yIHJlc29sdmluZyBvclxuICogICByZWplY3RpbmcgdGhlIG5ld2x5IGNyZWF0ZWQgcHJvbWlzZS4gVGhlIGZpcnN0IHBhcmFtZXRlciBpcyBhIGZ1bmN0aW9uIHdoaWNoIHJlc29sdmVzIHRoZVxuICogICBwcm9taXNlLCB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyBhIGZ1bmN0aW9uIHdoaWNoIHJlamVjdHMgdGhlIHByb21pc2UuXG4gKlxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBuZXdseSBjcmVhdGVkIHByb21pc2UuXG4gKi9cbmZ1bmN0aW9uICRRUHJvdmlkZXIoKSB7XG5cbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRleGNlcHRpb25IYW5kbGVyJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcbiAgICByZXR1cm4gcUZhY3RvcnkoZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XG4gICAgfSwgJGV4Y2VwdGlvbkhhbmRsZXIpO1xuICB9XTtcbn1cblxuZnVuY3Rpb24gJCRRUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJGJyb3dzZXInLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCBmdW5jdGlvbigkYnJvd3NlciwgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcbiAgICByZXR1cm4gcUZhY3RvcnkoZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRicm93c2VyLmRlZmVyKGNhbGxiYWNrKTtcbiAgICB9LCAkZXhjZXB0aW9uSGFuZGxlcik7XG4gIH1dO1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBwcm9taXNlIG1hbmFnZXIuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbihmdW5jdGlvbil9IG5leHRUaWNrIEZ1bmN0aW9uIGZvciBleGVjdXRpbmcgZnVuY3Rpb25zIGluIHRoZSBuZXh0IHR1cm4uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLiopfSBleGNlcHRpb25IYW5kbGVyIEZ1bmN0aW9uIGludG8gd2hpY2ggdW5leHBlY3RlZCBleGNlcHRpb25zIGFyZSBwYXNzZWQgZm9yXG4gKiAgICAgZGVidWdnaW5nIHB1cnBvc2VzLlxuICogQHJldHVybnMge29iamVjdH0gUHJvbWlzZSBtYW5hZ2VyLlxuICovXG5mdW5jdGlvbiBxRmFjdG9yeShuZXh0VGljaywgZXhjZXB0aW9uSGFuZGxlcikge1xuICB2YXIgJHFNaW5FcnIgPSBtaW5FcnIoJyRxJywgVHlwZUVycm9yKTtcbiAgZnVuY3Rpb24gY2FsbE9uY2Uoc2VsZiwgcmVzb2x2ZUZuLCByZWplY3RGbikge1xuICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiB3cmFwKGZuKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKGNhbGxlZCkgcmV0dXJuO1xuICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICBmbi5jYWxsKHNlbGYsIHZhbHVlKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIFt3cmFwKHJlc29sdmVGbiksIHdyYXAocmVqZWN0Rm4pXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nLiRxI2RlZmVyXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgYERlZmVycmVkYCBvYmplY3Qgd2hpY2ggcmVwcmVzZW50cyBhIHRhc2sgd2hpY2ggd2lsbCBmaW5pc2ggaW4gdGhlIGZ1dHVyZS5cbiAgICpcbiAgICogQHJldHVybnMge0RlZmVycmVkfSBSZXR1cm5zIGEgbmV3IGluc3RhbmNlIG9mIGRlZmVycmVkLlxuICAgKi9cbiAgdmFyIGRlZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBEZWZlcnJlZCgpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIFByb21pc2UoKSB7XG4gICAgdGhpcy4kJHN0YXRlID0geyBzdGF0dXM6IDAgfTtcbiAgfVxuXG4gIFByb21pc2UucHJvdG90eXBlID0ge1xuICAgIHRoZW46IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9ncmVzc0JhY2spIHtcbiAgICAgIHZhciByZXN1bHQgPSBuZXcgRGVmZXJyZWQoKTtcblxuICAgICAgdGhpcy4kJHN0YXRlLnBlbmRpbmcgPSB0aGlzLiQkc3RhdGUucGVuZGluZyB8fCBbXTtcbiAgICAgIHRoaXMuJCRzdGF0ZS5wZW5kaW5nLnB1c2goW3Jlc3VsdCwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb2dyZXNzQmFja10pO1xuICAgICAgaWYgKHRoaXMuJCRzdGF0ZS5zdGF0dXMgPiAwKSBzY2hlZHVsZVByb2Nlc3NRdWV1ZSh0aGlzLiQkc3RhdGUpO1xuXG4gICAgICByZXR1cm4gcmVzdWx0LnByb21pc2U7XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgY2FsbGJhY2spO1xuICAgIH0sXG5cbiAgICBcImZpbmFsbHlcIjogZnVuY3Rpb24oY2FsbGJhY2ssIHByb2dyZXNzQmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gaGFuZGxlQ2FsbGJhY2sodmFsdWUsIHRydWUsIGNhbGxiYWNrKTtcbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVDYWxsYmFjayhlcnJvciwgZmFsc2UsIGNhbGxiYWNrKTtcbiAgICAgIH0sIHByb2dyZXNzQmFjayk7XG4gICAgfVxuICB9O1xuXG4gIC8vRmFzdGVyLCBtb3JlIGJhc2ljIHRoYW4gYW5ndWxhci5iaW5kIGh0dHA6Ly9qc3BlcmYuY29tL2FuZ3VsYXItYmluZC12cy1jdXN0b20tdnMtbmF0aXZlXG4gIGZ1bmN0aW9uIHNpbXBsZUJpbmQoY29udGV4dCwgZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGZuLmNhbGwoY29udGV4dCwgdmFsdWUpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzUXVldWUoc3RhdGUpIHtcbiAgICB2YXIgZm4sIHByb21pc2UsIHBlbmRpbmc7XG5cbiAgICBwZW5kaW5nID0gc3RhdGUucGVuZGluZztcbiAgICBzdGF0ZS5wcm9jZXNzU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgc3RhdGUucGVuZGluZyA9IHVuZGVmaW5lZDtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwZW5kaW5nLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHByb21pc2UgPSBwZW5kaW5nW2ldWzBdO1xuICAgICAgZm4gPSBwZW5kaW5nW2ldW3N0YXRlLnN0YXR1c107XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgICBwcm9taXNlLnJlc29sdmUoZm4oc3RhdGUudmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5zdGF0dXMgPT09IDEpIHtcbiAgICAgICAgICBwcm9taXNlLnJlc29sdmUoc3RhdGUudmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb21pc2UucmVqZWN0KHN0YXRlLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBwcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2hlZHVsZVByb2Nlc3NRdWV1ZShzdGF0ZSkge1xuICAgIGlmIChzdGF0ZS5wcm9jZXNzU2NoZWR1bGVkIHx8ICFzdGF0ZS5wZW5kaW5nKSByZXR1cm47XG4gICAgc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCA9IHRydWU7XG4gICAgbmV4dFRpY2soZnVuY3Rpb24oKSB7IHByb2Nlc3NRdWV1ZShzdGF0ZSk7IH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gRGVmZXJyZWQoKSB7XG4gICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKTtcbiAgICAvL05lY2Vzc2FyeSB0byBzdXBwb3J0IHVuYm91bmQgZXhlY3V0aW9uIDovXG4gICAgdGhpcy5yZXNvbHZlID0gc2ltcGxlQmluZCh0aGlzLCB0aGlzLnJlc29sdmUpO1xuICAgIHRoaXMucmVqZWN0ID0gc2ltcGxlQmluZCh0aGlzLCB0aGlzLnJlamVjdCk7XG4gICAgdGhpcy5ub3RpZnkgPSBzaW1wbGVCaW5kKHRoaXMsIHRoaXMubm90aWZ5KTtcbiAgfVxuXG4gIERlZmVycmVkLnByb3RvdHlwZSA9IHtcbiAgICByZXNvbHZlOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMpIHJldHVybjtcbiAgICAgIGlmICh2YWwgPT09IHRoaXMucHJvbWlzZSkge1xuICAgICAgICB0aGlzLiQkcmVqZWN0KCRxTWluRXJyKFxuICAgICAgICAgICdxY3ljbGUnLFxuICAgICAgICAgIFwiRXhwZWN0ZWQgcHJvbWlzZSB0byBiZSByZXNvbHZlZCB3aXRoIHZhbHVlIG90aGVyIHRoYW4gaXRzZWxmICd7MH0nXCIsXG4gICAgICAgICAgdmFsKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiQkcmVzb2x2ZSh2YWwpO1xuICAgICAgfVxuXG4gICAgfSxcblxuICAgICQkcmVzb2x2ZTogZnVuY3Rpb24odmFsKSB7XG4gICAgICB2YXIgdGhlbiwgZm5zO1xuXG4gICAgICBmbnMgPSBjYWxsT25jZSh0aGlzLCB0aGlzLiQkcmVzb2x2ZSwgdGhpcy4kJHJlamVjdCk7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoKGlzT2JqZWN0KHZhbCkgfHwgaXNGdW5jdGlvbih2YWwpKSkgdGhlbiA9IHZhbCAmJiB2YWwudGhlbjtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgICAgICB0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAtMTtcbiAgICAgICAgICB0aGVuLmNhbGwodmFsLCBmbnNbMF0sIGZuc1sxXSwgdGhpcy5ub3RpZnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlID0gdmFsO1xuICAgICAgICAgIHRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cyA9IDE7XG4gICAgICAgICAgc2NoZWR1bGVQcm9jZXNzUXVldWUodGhpcy5wcm9taXNlLiQkc3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGZuc1sxXShlKTtcbiAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVqZWN0OiBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgIGlmICh0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMpIHJldHVybjtcbiAgICAgIHRoaXMuJCRyZWplY3QocmVhc29uKTtcbiAgICB9LFxuXG4gICAgJCRyZWplY3Q6IGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgdGhpcy5wcm9taXNlLiQkc3RhdGUudmFsdWUgPSByZWFzb247XG4gICAgICB0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAyO1xuICAgICAgc2NoZWR1bGVQcm9jZXNzUXVldWUodGhpcy5wcm9taXNlLiQkc3RhdGUpO1xuICAgIH0sXG5cbiAgICBub3RpZnk6IGZ1bmN0aW9uKHByb2dyZXNzKSB7XG4gICAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5wcm9taXNlLiQkc3RhdGUucGVuZGluZztcblxuICAgICAgaWYgKCh0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPD0gMCkgJiYgY2FsbGJhY2tzICYmIGNhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGNhbGxiYWNrLCByZXN1bHQ7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY2FsbGJhY2tzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrc1tpXVswXTtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2tzW2ldWzNdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmVzdWx0Lm5vdGlmeShpc0Z1bmN0aW9uKGNhbGxiYWNrKSA/IGNhbGxiYWNrKHByb2dyZXNzKSA6IHByb2dyZXNzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcSNyZWplY3RcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgYXMgcmVqZWN0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGByZWFzb25gLiBUaGlzIGFwaSBzaG91bGQgYmVcbiAgICogdXNlZCB0byBmb3J3YXJkIHJlamVjdGlvbiBpbiBhIGNoYWluIG9mIHByb21pc2VzLiBJZiB5b3UgYXJlIGRlYWxpbmcgd2l0aCB0aGUgbGFzdCBwcm9taXNlIGluXG4gICAqIGEgcHJvbWlzZSBjaGFpbiwgeW91IGRvbid0IG5lZWQgdG8gd29ycnkgYWJvdXQgaXQuXG4gICAqXG4gICAqIFdoZW4gY29tcGFyaW5nIGRlZmVycmVkcy9wcm9taXNlcyB0byB0aGUgZmFtaWxpYXIgYmVoYXZpb3Igb2YgdHJ5L2NhdGNoL3Rocm93LCB0aGluayBvZlxuICAgKiBgcmVqZWN0YCBhcyB0aGUgYHRocm93YCBrZXl3b3JkIGluIEphdmFTY3JpcHQuIFRoaXMgYWxzbyBtZWFucyB0aGF0IGlmIHlvdSBcImNhdGNoXCIgYW4gZXJyb3IgdmlhXG4gICAqIGEgcHJvbWlzZSBlcnJvciBjYWxsYmFjayBhbmQgeW91IHdhbnQgdG8gZm9yd2FyZCB0aGUgZXJyb3IgdG8gdGhlIHByb21pc2UgZGVyaXZlZCBmcm9tIHRoZVxuICAgKiBjdXJyZW50IHByb21pc2UsIHlvdSBoYXZlIHRvIFwicmV0aHJvd1wiIHRoZSBlcnJvciBieSByZXR1cm5pbmcgYSByZWplY3Rpb24gY29uc3RydWN0ZWQgdmlhXG4gICAqIGByZWplY3RgLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAgIHByb21pc2VCID0gcHJvbWlzZUEudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICogICAgIC8vIHN1Y2Nlc3M6IGRvIHNvbWV0aGluZyBhbmQgcmVzb2x2ZSBwcm9taXNlQlxuICAgKiAgICAgLy8gICAgICAgICAgd2l0aCB0aGUgb2xkIG9yIGEgbmV3IHJlc3VsdFxuICAgKiAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICogICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICogICAgIC8vIGVycm9yOiBoYW5kbGUgdGhlIGVycm9yIGlmIHBvc3NpYmxlIGFuZFxuICAgKiAgICAgLy8gICAgICAgIHJlc29sdmUgcHJvbWlzZUIgd2l0aCBuZXdQcm9taXNlT3JWYWx1ZSxcbiAgICogICAgIC8vICAgICAgICBvdGhlcndpc2UgZm9yd2FyZCB0aGUgcmVqZWN0aW9uIHRvIHByb21pc2VCXG4gICAqICAgICBpZiAoY2FuSGFuZGxlKHJlYXNvbikpIHtcbiAgICogICAgICAvLyBoYW5kbGUgdGhlIGVycm9yIGFuZCByZWNvdmVyXG4gICAqICAgICAgcmV0dXJuIG5ld1Byb21pc2VPclZhbHVlO1xuICAgKiAgICAgfVxuICAgKiAgICAgcmV0dXJuICRxLnJlamVjdChyZWFzb24pO1xuICAgKiAgIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHsqfSByZWFzb24gQ29uc3RhbnQsIG1lc3NhZ2UsIGV4Y2VwdGlvbiBvciBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSByZWplY3Rpb24gcmVhc29uLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHByb21pc2UgdGhhdCB3YXMgYWxyZWFkeSByZXNvbHZlZCBhcyByZWplY3RlZCB3aXRoIHRoZSBgcmVhc29uYC5cbiAgICovXG4gIHZhciByZWplY3QgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XG4gICAgcmVzdWx0LnJlamVjdChyZWFzb24pO1xuICAgIHJldHVybiByZXN1bHQucHJvbWlzZTtcbiAgfTtcblxuICB2YXIgbWFrZVByb21pc2UgPSBmdW5jdGlvbiBtYWtlUHJvbWlzZSh2YWx1ZSwgcmVzb2x2ZWQpIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XG4gICAgaWYgKHJlc29sdmVkKSB7XG4gICAgICByZXN1bHQucmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5yZWplY3QodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0LnByb21pc2U7XG4gIH07XG5cbiAgdmFyIGhhbmRsZUNhbGxiYWNrID0gZnVuY3Rpb24gaGFuZGxlQ2FsbGJhY2sodmFsdWUsIGlzUmVzb2x2ZWQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGNhbGxiYWNrT3V0cHV0ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSBjYWxsYmFja091dHB1dCA9IGNhbGxiYWNrKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG1ha2VQcm9taXNlKGUsIGZhbHNlKTtcbiAgICB9XG4gICAgaWYgKGlzUHJvbWlzZUxpa2UoY2FsbGJhY2tPdXRwdXQpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2tPdXRwdXQudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VQcm9taXNlKHZhbHVlLCBpc1Jlc29sdmVkKTtcbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBtYWtlUHJvbWlzZShlcnJvciwgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtYWtlUHJvbWlzZSh2YWx1ZSwgaXNSZXNvbHZlZCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRxI3doZW5cbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFdyYXBzIGFuIG9iamVjdCB0aGF0IG1pZ2h0IGJlIGEgdmFsdWUgb3IgYSAoM3JkIHBhcnR5KSB0aGVuLWFibGUgcHJvbWlzZSBpbnRvIGEgJHEgcHJvbWlzZS5cbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiB5b3UgYXJlIGRlYWxpbmcgd2l0aCBhbiBvYmplY3QgdGhhdCBtaWdodCBvciBtaWdodCBub3QgYmUgYSBwcm9taXNlLCBvciBpZlxuICAgKiB0aGUgcHJvbWlzZSBjb21lcyBmcm9tIGEgc291cmNlIHRoYXQgY2FuJ3QgYmUgdHJ1c3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSBvciBhIHByb21pc2VcbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIG9mIHRoZSBwYXNzZWQgdmFsdWUgb3IgcHJvbWlzZVxuICAgKi9cblxuXG4gIHZhciB3aGVuID0gZnVuY3Rpb24odmFsdWUsIGNhbGxiYWNrLCBlcnJiYWNrLCBwcm9ncmVzc0JhY2spIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XG4gICAgcmVzdWx0LnJlc29sdmUodmFsdWUpO1xuICAgIHJldHVybiByZXN1bHQucHJvbWlzZS50aGVuKGNhbGxiYWNrLCBlcnJiYWNrLCBwcm9ncmVzc0JhY2spO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRxI2FsbFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ29tYmluZXMgbXVsdGlwbGUgcHJvbWlzZXMgaW50byBhIHNpbmdsZSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiBhbGwgb2YgdGhlIGlucHV0XG4gICAqIHByb21pc2VzIGFyZSByZXNvbHZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheS48UHJvbWlzZT58T2JqZWN0LjxQcm9taXNlPn0gcHJvbWlzZXMgQW4gYXJyYXkgb3IgaGFzaCBvZiBwcm9taXNlcy5cbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBzaW5nbGUgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCBhbiBhcnJheS9oYXNoIG9mIHZhbHVlcyxcbiAgICogICBlYWNoIHZhbHVlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb21pc2UgYXQgdGhlIHNhbWUgaW5kZXgva2V5IGluIHRoZSBgcHJvbWlzZXNgIGFycmF5L2hhc2guXG4gICAqICAgSWYgYW55IG9mIHRoZSBwcm9taXNlcyBpcyByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLCB0aGlzIHJlc3VsdGluZyBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWRcbiAgICogICB3aXRoIHRoZSBzYW1lIHJlamVjdGlvbiB2YWx1ZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCksXG4gICAgICAgIGNvdW50ZXIgPSAwLFxuICAgICAgICByZXN1bHRzID0gaXNBcnJheShwcm9taXNlcykgPyBbXSA6IHt9O1xuXG4gICAgZm9yRWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSwga2V5KSB7XG4gICAgICBjb3VudGVyKys7XG4gICAgICB3aGVuKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKHJlc3VsdHMuaGFzT3duUHJvcGVydHkoa2V5KSkgcmV0dXJuO1xuICAgICAgICByZXN1bHRzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgaWYgKCEoLS1jb3VudGVyKSkgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICBpZiAocmVzdWx0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSByZXR1cm47XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChyZWFzb24pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoY291bnRlciA9PT0gMCkge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxuXG4gIHZhciAkUSA9IGZ1bmN0aW9uIFEocmVzb2x2ZXIpIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24ocmVzb2x2ZXIpKSB7XG4gICAgICB0aHJvdyAkcU1pbkVycignbm9yc2x2cicsIFwiRXhwZWN0ZWQgcmVzb2x2ZXJGbiwgZ290ICd7MH0nXCIsIHJlc29sdmVyKTtcbiAgICB9XG5cbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUSkpIHtcbiAgICAgIC8vIE1vcmUgdXNlZnVsIHdoZW4gJFEgaXMgdGhlIFByb21pc2UgaXRzZWxmLlxuICAgICAgcmV0dXJuIG5ldyBRKHJlc29sdmVyKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcblxuICAgIGZ1bmN0aW9uIHJlc29sdmVGbih2YWx1ZSkge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVqZWN0Rm4ocmVhc29uKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QocmVhc29uKTtcbiAgICB9XG5cbiAgICByZXNvbHZlcihyZXNvbHZlRm4sIHJlamVjdEZuKTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gICRRLmRlZmVyID0gZGVmZXI7XG4gICRRLnJlamVjdCA9IHJlamVjdDtcbiAgJFEud2hlbiA9IHdoZW47XG4gICRRLmFsbCA9IGFsbDtcblxuICByZXR1cm4gJFE7XG59XG5cbmZ1bmN0aW9uICQkUkFGUHJvdmlkZXIoKSB7IC8vckFGXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsICckdGltZW91dCcsIGZ1bmN0aW9uKCR3aW5kb3csICR0aW1lb3V0KSB7XG4gICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXG4gICAgdmFyIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuICAgIHZhciByYWZTdXBwb3J0ZWQgPSAhIXJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICB2YXIgcmFmID0gcmFmU3VwcG9ydGVkXG4gICAgICA/IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgdmFyIGlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZuKTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgOiBmdW5jdGlvbihmbikge1xuICAgICAgICAgIHZhciB0aW1lciA9ICR0aW1lb3V0KGZuLCAxNi42NiwgZmFsc2UpOyAvLyAxMDAwIC8gNjAgPSAxNi42NjZcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICByYWYuc3VwcG9ydGVkID0gcmFmU3VwcG9ydGVkO1xuXG4gICAgcmV0dXJuIHJhZjtcbiAgfV07XG59XG5cbi8qKlxuICogREVTSUdOIE5PVEVTXG4gKlxuICogVGhlIGRlc2lnbiBkZWNpc2lvbnMgYmVoaW5kIHRoZSBzY29wZSBhcmUgaGVhdmlseSBmYXZvcmVkIGZvciBzcGVlZCBhbmQgbWVtb3J5IGNvbnN1bXB0aW9uLlxuICpcbiAqIFRoZSB0eXBpY2FsIHVzZSBvZiBzY29wZSBpcyB0byB3YXRjaCB0aGUgZXhwcmVzc2lvbnMsIHdoaWNoIG1vc3Qgb2YgdGhlIHRpbWUgcmV0dXJuIHRoZSBzYW1lXG4gKiB2YWx1ZSBhcyBsYXN0IHRpbWUgc28gd2Ugb3B0aW1pemUgdGhlIG9wZXJhdGlvbi5cbiAqXG4gKiBDbG9zdXJlcyBjb25zdHJ1Y3Rpb24gaXMgZXhwZW5zaXZlIGluIHRlcm1zIG9mIHNwZWVkIGFzIHdlbGwgYXMgbWVtb3J5OlxuICogICAtIE5vIGNsb3N1cmVzLCBpbnN0ZWFkIHVzZSBwcm90b3R5cGljYWwgaW5oZXJpdGFuY2UgZm9yIEFQSVxuICogICAtIEludGVybmFsIHN0YXRlIG5lZWRzIHRvIGJlIHN0b3JlZCBvbiBzY29wZSBkaXJlY3RseSwgd2hpY2ggbWVhbnMgdGhhdCBwcml2YXRlIHN0YXRlIGlzXG4gKiAgICAgZXhwb3NlZCBhcyAkJF9fX18gcHJvcGVydGllc1xuICpcbiAqIExvb3Agb3BlcmF0aW9ucyBhcmUgb3B0aW1pemVkIGJ5IHVzaW5nIHdoaWxlKGNvdW50LS0pIHsgLi4uIH1cbiAqICAgLSB0aGlzIG1lYW5zIHRoYXQgaW4gb3JkZXIgdG8ga2VlcCB0aGUgc2FtZSBvcmRlciBvZiBleGVjdXRpb24gYXMgYWRkaXRpb24gd2UgaGF2ZSB0byBhZGRcbiAqICAgICBpdGVtcyB0byB0aGUgYXJyYXkgYXQgdGhlIGJlZ2lubmluZyAodW5zaGlmdCkgaW5zdGVhZCBvZiBhdCB0aGUgZW5kIChwdXNoKVxuICpcbiAqIENoaWxkIHNjb3BlcyBhcmUgY3JlYXRlZCBhbmQgcmVtb3ZlZCBvZnRlblxuICogICAtIFVzaW5nIGFuIGFycmF5IHdvdWxkIGJlIHNsb3cgc2luY2UgaW5zZXJ0cyBpbiBtaWRkbGUgYXJlIGV4cGVuc2l2ZSBzbyB3ZSB1c2UgbGlua2VkIGxpc3RcbiAqXG4gKiBUaGVyZSBhcmUgZmV3IHdhdGNoZXMgdGhlbiBhIGxvdCBvZiBvYnNlcnZlcnMuIFRoaXMgaXMgd2h5IHlvdSBkb24ndCB3YW50IHRoZSBvYnNlcnZlciB0byBiZVxuICogaW1wbGVtZW50ZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHdhdGNoLiBXYXRjaCByZXF1aXJlcyByZXR1cm4gb2YgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gd2hpY2hcbiAqIGFyZSBleHBlbnNpdmUgdG8gY29uc3RydWN0LlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRyb290U2NvcGVQcm92aWRlclxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUHJvdmlkZXIgZm9yIHRoZSAkcm9vdFNjb3BlIHNlcnZpY2UuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcm9vdFNjb3BlUHJvdmlkZXIjZGlnZXN0VHRsXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBTZXRzIHRoZSBudW1iZXIgb2YgYCRkaWdlc3RgIGl0ZXJhdGlvbnMgdGhlIHNjb3BlIHNob3VsZCBhdHRlbXB0IHRvIGV4ZWN1dGUgYmVmb3JlIGdpdmluZyB1cCBhbmRcbiAqIGFzc3VtaW5nIHRoYXQgdGhlIG1vZGVsIGlzIHVuc3RhYmxlLlxuICpcbiAqIFRoZSBjdXJyZW50IGRlZmF1bHQgaXMgMTAgaXRlcmF0aW9ucy5cbiAqXG4gKiBJbiBjb21wbGV4IGFwcGxpY2F0aW9ucyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIGRlcGVuZGVuY2llcyBiZXR3ZWVuIGAkd2F0Y2hgcyB3aWxsIHJlc3VsdCBpblxuICogc2V2ZXJhbCBkaWdlc3QgaXRlcmF0aW9ucy4gSG93ZXZlciBpZiBhbiBhcHBsaWNhdGlvbiBuZWVkcyBtb3JlIHRoYW4gdGhlIGRlZmF1bHQgMTAgZGlnZXN0XG4gKiBpdGVyYXRpb25zIGZvciBpdHMgbW9kZWwgdG8gc3RhYmlsaXplIHRoZW4geW91IHNob3VsZCBpbnZlc3RpZ2F0ZSB3aGF0IGlzIGNhdXNpbmcgdGhlIG1vZGVsIHRvXG4gKiBjb250aW51b3VzbHkgY2hhbmdlIGR1cmluZyB0aGUgZGlnZXN0LlxuICpcbiAqIEluY3JlYXNpbmcgdGhlIFRUTCBjb3VsZCBoYXZlIHBlcmZvcm1hbmNlIGltcGxpY2F0aW9ucywgc28geW91IHNob3VsZCBub3QgY2hhbmdlIGl0IHdpdGhvdXRcbiAqIHByb3BlciBqdXN0aWZpY2F0aW9uLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCBUaGUgbnVtYmVyIG9mIGRpZ2VzdCBpdGVyYXRpb25zLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHJvb3RTY29wZVxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogRXZlcnkgYXBwbGljYXRpb24gaGFzIGEgc2luZ2xlIHJvb3Qge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9LlxuICogQWxsIG90aGVyIHNjb3BlcyBhcmUgZGVzY2VuZGFudCBzY29wZXMgb2YgdGhlIHJvb3Qgc2NvcGUuIFNjb3BlcyBwcm92aWRlIHNlcGFyYXRpb25cbiAqIGJldHdlZW4gdGhlIG1vZGVsIGFuZCB0aGUgdmlldywgdmlhIGEgbWVjaGFuaXNtIGZvciB3YXRjaGluZyB0aGUgbW9kZWwgZm9yIGNoYW5nZXMuXG4gKiBUaGV5IGFsc28gcHJvdmlkZSBhbiBldmVudCBlbWlzc2lvbi9icm9hZGNhc3QgYW5kIHN1YnNjcmlwdGlvbiBmYWNpbGl0eS4gU2VlIHRoZVxuICoge0BsaW5rIGd1aWRlL3Njb3BlIGRldmVsb3BlciBndWlkZSBvbiBzY29wZXN9LlxuICovXG5mdW5jdGlvbiAkUm9vdFNjb3BlUHJvdmlkZXIoKSB7XG4gIHZhciBUVEwgPSAxMDtcbiAgdmFyICRyb290U2NvcGVNaW5FcnIgPSBtaW5FcnIoJyRyb290U2NvcGUnKTtcbiAgdmFyIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcbiAgdmFyIGFwcGx5QXN5bmNJZCA9IG51bGw7XG5cbiAgdGhpcy5kaWdlc3RUdGwgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBUVEwgPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIFRUTDtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckZXhjZXB0aW9uSGFuZGxlcicsICckcGFyc2UnLCAnJGJyb3dzZXInLFxuICAgICAgZnVuY3Rpb24oJGluamVjdG9yLCAkZXhjZXB0aW9uSGFuZGxlciwgJHBhcnNlLCAkYnJvd3Nlcikge1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIHR5cGVcbiAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBBIHJvb3Qgc2NvcGUgY2FuIGJlIHJldHJpZXZlZCB1c2luZyB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUgJHJvb3RTY29wZX0ga2V5IGZyb20gdGhlXG4gICAgICoge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIENoaWxkIHNjb3BlcyBhcmUgY3JlYXRlZCB1c2luZyB0aGVcbiAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkbmV3ICRuZXcoKX0gbWV0aG9kLiAoTW9zdCBzY29wZXMgYXJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSB3aGVuXG4gICAgICogY29tcGlsZWQgSFRNTCB0ZW1wbGF0ZSBpcyBleGVjdXRlZC4pXG4gICAgICpcbiAgICAgKiBIZXJlIGlzIGEgc2ltcGxlIHNjb3BlIHNuaXBwZXQgdG8gc2hvdyBob3cgeW91IGNhbiBpbnRlcmFjdCB3aXRoIHRoZSBzY29wZS5cbiAgICAgKiBgYGBodG1sXG4gICAgICogPGZpbGUgc3JjPVwiLi90ZXN0L25nL3Jvb3RTY29wZVNwZWMuanNcIiB0YWc9XCJkb2NzMVwiIC8+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIEluaGVyaXRhbmNlXG4gICAgICogQSBzY29wZSBjYW4gaW5oZXJpdCBmcm9tIGEgcGFyZW50IHNjb3BlLCBhcyBpbiB0aGlzIGV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgICAgIHZhciBwYXJlbnQgPSAkcm9vdFNjb3BlO1xuICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50LiRuZXcoKTtcblxuICAgICAgICAgcGFyZW50LnNhbHV0YXRpb24gPSBcIkhlbGxvXCI7XG4gICAgICAgICBleHBlY3QoY2hpbGQuc2FsdXRhdGlvbikudG9FcXVhbCgnSGVsbG8nKTtcblxuICAgICAgICAgY2hpbGQuc2FsdXRhdGlvbiA9IFwiV2VsY29tZVwiO1xuICAgICAgICAgZXhwZWN0KGNoaWxkLnNhbHV0YXRpb24pLnRvRXF1YWwoJ1dlbGNvbWUnKTtcbiAgICAgICAgIGV4cGVjdChwYXJlbnQuc2FsdXRhdGlvbikudG9FcXVhbCgnSGVsbG8nKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFdoZW4gaW50ZXJhY3Rpbmcgd2l0aCBgU2NvcGVgIGluIHRlc3RzLCBhZGRpdGlvbmFsIGhlbHBlciBtZXRob2RzIGFyZSBhdmFpbGFibGUgb24gdGhlXG4gICAgICogaW5zdGFuY2VzIG9mIGBTY29wZWAgdHlwZS4gU2VlIHtAbGluayBuZ01vY2suJHJvb3RTY29wZS5TY29wZSBuZ01vY2sgU2NvcGV9IGZvciBhZGRpdGlvbmFsXG4gICAgICogZGV0YWlscy5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24oKT49fSBwcm92aWRlcnMgTWFwIG9mIHNlcnZpY2UgZmFjdG9yeSB3aGljaCBuZWVkIHRvIGJlXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZCBmb3IgdGhlIGN1cnJlbnQgc2NvcGUuIERlZmF1bHRzIHRvIHtAbGluayBuZ30uXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgKj49fSBpbnN0YW5jZUNhY2hlIFByb3ZpZGVzIHByZS1pbnN0YW50aWF0ZWQgc2VydmljZXMgd2hpY2ggc2hvdWxkXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQvb3ZlcnJpZGUgc2VydmljZXMgcHJvdmlkZWQgYnkgYHByb3ZpZGVyc2AuIFRoaXMgaXMgaGFuZHlcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gdW5pdC10ZXN0aW5nIGFuZCBoYXZpbmcgdGhlIG5lZWQgdG8gb3ZlcnJpZGUgYSBkZWZhdWx0XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IE5ld2x5IGNyZWF0ZWQgc2NvcGUuXG4gICAgICpcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTY29wZSgpIHtcbiAgICAgIHRoaXMuJGlkID0gbmV4dFVpZCgpO1xuICAgICAgdGhpcy4kJHBoYXNlID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kJHdhdGNoZXJzID1cbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuJCRuZXh0U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZyA9XG4gICAgICAgICAgICAgICAgICAgICB0aGlzLiQkY2hpbGRIZWFkID0gdGhpcy4kJGNoaWxkVGFpbCA9IG51bGw7XG4gICAgICB0aGlzLiRyb290ID0gdGhpcztcbiAgICAgIHRoaXMuJCRkZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lcnMgPSB7fTtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lckNvdW50ID0ge307XG4gICAgICB0aGlzLiQkaXNvbGF0ZUJpbmRpbmdzID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRpZFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogVW5pcXVlIHNjb3BlIElEIChtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcpIHVzZWZ1bCBmb3IgZGVidWdnaW5nLlxuICAgICAqL1xuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkcGFyZW50XG4gICAgICAqXG4gICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHBhcmVudCBzY29wZS5cbiAgICAgICovXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRyb290XG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHJvb3Qgc2NvcGUuXG4gICAgICAgKi9cblxuICAgIFNjb3BlLnByb3RvdHlwZSA9IHtcbiAgICAgIGNvbnN0cnVjdG9yOiBTY29wZSxcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkbmV3XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQ3JlYXRlcyBhIG5ldyBjaGlsZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0uXG4gICAgICAgKlxuICAgICAgICogVGhlIHBhcmVudCBzY29wZSB3aWxsIHByb3BhZ2F0ZSB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IGV2ZW50LlxuICAgICAgICogVGhlIHNjb3BlIGNhbiBiZSByZW1vdmVkIGZyb20gdGhlIHNjb3BlIGhpZXJhcmNoeSB1c2luZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveSAkZGVzdHJveSgpfS5cbiAgICAgICAqXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveSAkZGVzdHJveSgpfSBtdXN0IGJlIGNhbGxlZCBvbiBhIHNjb3BlIHdoZW4gaXQgaXNcbiAgICAgICAqIGRlc2lyZWQgZm9yIHRoZSBzY29wZSBhbmQgaXRzIGNoaWxkIHNjb3BlcyB0byBiZSBwZXJtYW5lbnRseSBkZXRhY2hlZCBmcm9tIHRoZSBwYXJlbnQgYW5kXG4gICAgICAgKiB0aHVzIHN0b3AgcGFydGljaXBhdGluZyBpbiBtb2RlbCBjaGFuZ2UgZGV0ZWN0aW9uIGFuZCBsaXN0ZW5lciBub3RpZmljYXRpb24gYnkgaW52b2tpbmcuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBpc29sYXRlIElmIHRydWUsIHRoZW4gdGhlIHNjb3BlIGRvZXMgbm90IHByb3RvdHlwaWNhbGx5IGluaGVyaXQgZnJvbSB0aGVcbiAgICAgICAqICAgICAgICAgcGFyZW50IHNjb3BlLiBUaGUgc2NvcGUgaXMgaXNvbGF0ZWQsIGFzIGl0IGNhbiBub3Qgc2VlIHBhcmVudCBzY29wZSBwcm9wZXJ0aWVzLlxuICAgICAgICogICAgICAgICBXaGVuIGNyZWF0aW5nIHdpZGdldHMsIGl0IGlzIHVzZWZ1bCBmb3IgdGhlIHdpZGdldCB0byBub3QgYWNjaWRlbnRhbGx5IHJlYWQgcGFyZW50XG4gICAgICAgKiAgICAgICAgIHN0YXRlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7U2NvcGV9IFtwYXJlbnQ9dGhpc10gVGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIGBTY29wZWB9IHRoYXQgd2lsbCBiZSB0aGUgYCRwYXJlbnRgXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIHRoZSBuZXdseSBjcmVhdGVkIHNjb3BlLiBEZWZhdWx0cyB0byBgdGhpc2Agc2NvcGUgaWYgbm90IHByb3ZpZGVkLlxuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGlzIHVzZWQgd2hlbiBjcmVhdGluZyBhIHRyYW5zY2x1ZGUgc2NvcGUgdG8gY29ycmVjdGx5IHBsYWNlIGl0XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRoZSBzY29wZSBoaWVyYXJjaHkgd2hpbGUgbWFpbnRhaW5pbmcgdGhlIGNvcnJlY3QgcHJvdG90eXBpY2FsXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRhbmNlLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBuZXdseSBjcmVhdGVkIGNoaWxkIHNjb3BlLlxuICAgICAgICpcbiAgICAgICAqL1xuICAgICAgJG5ldzogZnVuY3Rpb24oaXNvbGF0ZSwgcGFyZW50KSB7XG4gICAgICAgIHZhciBjaGlsZDtcblxuICAgICAgICBwYXJlbnQgPSBwYXJlbnQgfHwgdGhpcztcblxuICAgICAgICBpZiAoaXNvbGF0ZSkge1xuICAgICAgICAgIGNoaWxkID0gbmV3IFNjb3BlKCk7XG4gICAgICAgICAgY2hpbGQuJHJvb3QgPSB0aGlzLiRyb290O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE9ubHkgY3JlYXRlIGEgY2hpbGQgc2NvcGUgY2xhc3MgaWYgc29tZWJvZHkgYXNrcyBmb3Igb25lLFxuICAgICAgICAgIC8vIGJ1dCBjYWNoZSBpdCB0byBhbGxvdyB0aGUgVk0gdG8gb3B0aW1pemUgbG9va3Vwcy5cbiAgICAgICAgICBpZiAoIXRoaXMuJCRDaGlsZFNjb3BlKSB7XG4gICAgICAgICAgICB0aGlzLiQkQ2hpbGRTY29wZSA9IGZ1bmN0aW9uIENoaWxkU2NvcGUoKSB7XG4gICAgICAgICAgICAgIHRoaXMuJCR3YXRjaGVycyA9IHRoaXMuJCRuZXh0U2libGluZyA9XG4gICAgICAgICAgICAgICAgICB0aGlzLiQkY2hpbGRIZWFkID0gdGhpcy4kJGNoaWxkVGFpbCA9IG51bGw7XG4gICAgICAgICAgICAgIHRoaXMuJCRsaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgICAgICAgdGhpcy4kJGxpc3RlbmVyQ291bnQgPSB7fTtcbiAgICAgICAgICAgICAgdGhpcy4kaWQgPSBuZXh0VWlkKCk7XG4gICAgICAgICAgICAgIHRoaXMuJCRDaGlsZFNjb3BlID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLiQkQ2hpbGRTY29wZS5wcm90b3R5cGUgPSB0aGlzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaGlsZCA9IG5ldyB0aGlzLiQkQ2hpbGRTY29wZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkLiRwYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIGNoaWxkLiQkcHJldlNpYmxpbmcgPSBwYXJlbnQuJCRjaGlsZFRhaWw7XG4gICAgICAgIGlmIChwYXJlbnQuJCRjaGlsZEhlYWQpIHtcbiAgICAgICAgICBwYXJlbnQuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZyA9IGNoaWxkO1xuICAgICAgICAgIHBhcmVudC4kJGNoaWxkVGFpbCA9IGNoaWxkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcmVudC4kJGNoaWxkSGVhZCA9IHBhcmVudC4kJGNoaWxkVGFpbCA9IGNoaWxkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiB0aGUgbmV3IHNjb3BlIGlzIG5vdCBpc29sYXRlZCBvciB3ZSBpbmhlcml0IGZyb20gYHRoaXNgLCBhbmRcbiAgICAgICAgLy8gdGhlIHBhcmVudCBzY29wZSBpcyBkZXN0cm95ZWQsIHRoZSBwcm9wZXJ0eSBgJCRkZXN0cm95ZWRgIGlzIGluaGVyaXRlZFxuICAgICAgICAvLyBwcm90b3R5cGljYWxseS4gSW4gYWxsIG90aGVyIGNhc2VzLCB0aGlzIHByb3BlcnR5IG5lZWRzIHRvIGJlIHNldFxuICAgICAgICAvLyB3aGVuIHRoZSBwYXJlbnQgc2NvcGUgaXMgZGVzdHJveWVkLlxuICAgICAgICAvLyBUaGUgbGlzdGVuZXIgbmVlZHMgdG8gYmUgYWRkZWQgYWZ0ZXIgdGhlIHBhcmVudCBpcyBzZXRcbiAgICAgICAgaWYgKGlzb2xhdGUgfHwgcGFyZW50ICE9IHRoaXMpIGNoaWxkLiRvbignJGRlc3Ryb3knLCBkZXN0cm95Q2hpbGQpO1xuXG4gICAgICAgIHJldHVybiBjaGlsZDtcblxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95Q2hpbGQoKSB7XG4gICAgICAgICAgY2hpbGQuJCRkZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHdhdGNoXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmVnaXN0ZXJzIGEgYGxpc3RlbmVyYCBjYWxsYmFjayB0byBiZSBleGVjdXRlZCB3aGVuZXZlciB0aGUgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoZSBgd2F0Y2hFeHByZXNzaW9uYCBpcyBjYWxsZWQgb24gZXZlcnkgY2FsbCB0byB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0XG4gICAgICAgKiAgICRkaWdlc3QoKX0gYW5kIHNob3VsZCByZXR1cm4gdGhlIHZhbHVlIHRoYXQgd2lsbCBiZSB3YXRjaGVkLiAoU2luY2VcbiAgICAgICAqICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IHJlcnVucyB3aGVuIGl0IGRldGVjdHMgY2hhbmdlcyB0aGVcbiAgICAgICAqICAgYHdhdGNoRXhwcmVzc2lvbmAgY2FuIGV4ZWN1dGUgbXVsdGlwbGUgdGltZXMgcGVyXG4gICAgICAgKiAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSBhbmQgc2hvdWxkIGJlIGlkZW1wb3RlbnQuKVxuICAgICAgICogLSBUaGUgYGxpc3RlbmVyYCBpcyBjYWxsZWQgb25seSB3aGVuIHRoZSB2YWx1ZSBmcm9tIHRoZSBjdXJyZW50IGB3YXRjaEV4cHJlc3Npb25gIGFuZCB0aGVcbiAgICAgICAqICAgcHJldmlvdXMgY2FsbCB0byBgd2F0Y2hFeHByZXNzaW9uYCBhcmUgbm90IGVxdWFsICh3aXRoIHRoZSBleGNlcHRpb24gb2YgdGhlIGluaXRpYWwgcnVuLFxuICAgICAgICogICBzZWUgYmVsb3cpLiBJbmVxdWFsaXR5IGlzIGRldGVybWluZWQgYWNjb3JkaW5nIHRvIHJlZmVyZW5jZSBpbmVxdWFsaXR5LFxuICAgICAgICogICBbc3RyaWN0IGNvbXBhcmlzb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9Db21wYXJpc29uX09wZXJhdG9ycylcbiAgICAgICAqICAgIHZpYSB0aGUgYCE9PWAgSmF2YXNjcmlwdCBvcGVyYXRvciwgdW5sZXNzIGBvYmplY3RFcXVhbGl0eSA9PSB0cnVlYFxuICAgICAgICogICAoc2VlIG5leHQgcG9pbnQpXG4gICAgICAgKiAtIFdoZW4gYG9iamVjdEVxdWFsaXR5ID09IHRydWVgLCBpbmVxdWFsaXR5IG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uYCBpcyBkZXRlcm1pbmVkXG4gICAgICAgKiAgIGFjY29yZGluZyB0byB0aGUge0BsaW5rIGFuZ3VsYXIuZXF1YWxzfSBmdW5jdGlvbi4gVG8gc2F2ZSB0aGUgdmFsdWUgb2YgdGhlIG9iamVjdCBmb3JcbiAgICAgICAqICAgbGF0ZXIgY29tcGFyaXNvbiwgdGhlIHtAbGluayBhbmd1bGFyLmNvcHl9IGZ1bmN0aW9uIGlzIHVzZWQuIFRoaXMgdGhlcmVmb3JlIG1lYW5zIHRoYXRcbiAgICAgICAqICAgd2F0Y2hpbmcgY29tcGxleCBvYmplY3RzIHdpbGwgaGF2ZSBhZHZlcnNlIG1lbW9yeSBhbmQgcGVyZm9ybWFuY2UgaW1wbGljYXRpb25zLlxuICAgICAgICogLSBUaGUgd2F0Y2ggYGxpc3RlbmVyYCBtYXkgY2hhbmdlIHRoZSBtb2RlbCwgd2hpY2ggbWF5IHRyaWdnZXIgb3RoZXIgYGxpc3RlbmVyYHMgdG8gZmlyZS5cbiAgICAgICAqICAgVGhpcyBpcyBhY2hpZXZlZCBieSByZXJ1bm5pbmcgdGhlIHdhdGNoZXJzIHVudGlsIG5vIGNoYW5nZXMgYXJlIGRldGVjdGVkLiBUaGUgcmVydW5cbiAgICAgICAqICAgaXRlcmF0aW9uIGxpbWl0IGlzIDEwIHRvIHByZXZlbnQgYW4gaW5maW5pdGUgbG9vcCBkZWFkbG9jay5cbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogSWYgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQgd2hlbmV2ZXIge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0fSBpcyBjYWxsZWQsXG4gICAgICAgKiB5b3UgY2FuIHJlZ2lzdGVyIGEgYHdhdGNoRXhwcmVzc2lvbmAgZnVuY3Rpb24gd2l0aCBubyBgbGlzdGVuZXJgLiAoU2luY2UgYHdhdGNoRXhwcmVzc2lvbmBcbiAgICAgICAqIGNhbiBleGVjdXRlIG11bHRpcGxlIHRpbWVzIHBlciB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3R9IGN5Y2xlIHdoZW4gYVxuICAgICAgICogY2hhbmdlIGlzIGRldGVjdGVkLCBiZSBwcmVwYXJlZCBmb3IgbXVsdGlwbGUgY2FsbHMgdG8geW91ciBsaXN0ZW5lci4pXG4gICAgICAgKlxuICAgICAgICogQWZ0ZXIgYSB3YXRjaGVyIGlzIHJlZ2lzdGVyZWQgd2l0aCB0aGUgc2NvcGUsIHRoZSBgbGlzdGVuZXJgIGZuIGlzIGNhbGxlZCBhc3luY2hyb25vdXNseVxuICAgICAgICogKHZpYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZXZhbEFzeW5jICRldmFsQXN5bmN9KSB0byBpbml0aWFsaXplIHRoZVxuICAgICAgICogd2F0Y2hlci4gSW4gcmFyZSBjYXNlcywgdGhpcyBpcyB1bmRlc2lyYWJsZSBiZWNhdXNlIHRoZSBsaXN0ZW5lciBpcyBjYWxsZWQgd2hlbiB0aGUgcmVzdWx0XG4gICAgICAgKiBvZiBgd2F0Y2hFeHByZXNzaW9uYCBkaWRuJ3QgY2hhbmdlLiBUbyBkZXRlY3QgdGhpcyBzY2VuYXJpbyB3aXRoaW4gdGhlIGBsaXN0ZW5lcmAgZm4sIHlvdVxuICAgICAgICogY2FuIGNvbXBhcmUgdGhlIGBuZXdWYWxgIGFuZCBgb2xkVmFsYC4gSWYgdGhlc2UgdHdvIHZhbHVlcyBhcmUgaWRlbnRpY2FsIChgPT09YCkgdGhlbiB0aGVcbiAgICAgICAqIGxpc3RlbmVyIHdhcyBjYWxsZWQgZHVlIHRvIGluaXRpYWxpemF0aW9uLlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogIyBFeGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICAvLyBsZXQncyBhc3N1bWUgdGhhdCBzY29wZSB3YXMgZGVwZW5kZW5jeSBpbmplY3RlZCBhcyB0aGUgJHJvb3RTY29wZVxuICAgICAgICAgICB2YXIgc2NvcGUgPSAkcm9vdFNjb3BlO1xuICAgICAgICAgICBzY29wZS5uYW1lID0gJ21pc2tvJztcbiAgICAgICAgICAgc2NvcGUuY291bnRlciA9IDA7XG5cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSBzY29wZS5jb3VudGVyICsgMTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIGlzIGFsd2F5cyBjYWxsZWQgZHVyaW5nIHRoZSBmaXJzdCAkZGlnZXN0IGxvb3AgYWZ0ZXIgaXQgd2FzIHJlZ2lzdGVyZWRcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAvLyBidXQgbm93IGl0IHdpbGwgbm90IGJlIGNhbGxlZCB1bmxlc3MgdGhlIHZhbHVlIGNoYW5nZXNcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdhZGFtJztcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgyKTtcblxuXG5cbiAgICAgICAgICAgLy8gVXNpbmcgYSBmdW5jdGlvbiBhcyBhIHdhdGNoRXhwcmVzc2lvblxuICAgICAgICAgICB2YXIgZm9vZDtcbiAgICAgICAgICAgc2NvcGUuZm9vZENvdW50ZXIgPSAwO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaChcbiAgICAgICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHZhbHVlIGJlaW5nIHdhdGNoZWQuIEl0IGlzIGNhbGxlZCBmb3IgZWFjaCB0dXJuIG9mIHRoZSAkZGlnZXN0IGxvb3BcbiAgICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIGZvb2Q7IH0sXG4gICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgY2hhbmdlIGxpc3RlbmVyLCBjYWxsZWQgd2hlbiB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgYWJvdmUgZnVuY3Rpb24gY2hhbmdlc1xuICAgICAgICAgICAgIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgaWYgKCBuZXdWYWx1ZSAhPT0gb2xkVmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgIC8vIE9ubHkgaW5jcmVtZW50IHRoZSBjb3VudGVyIGlmIHRoZSB2YWx1ZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgIHNjb3BlLmZvb2RDb3VudGVyID0gc2NvcGUuZm9vZENvdW50ZXIgKyAxO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgKTtcbiAgICAgICAgICAgLy8gTm8gZGlnZXN0IGhhcyBiZWVuIHJ1biBzbyB0aGUgY291bnRlciB3aWxsIGJlIHplcm9cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmZvb2RDb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIC8vIFJ1biB0aGUgZGlnZXN0IGJ1dCBzaW5jZSBmb29kIGhhcyBub3QgY2hhbmdlZCBjb3VudCB3aWxsIHN0aWxsIGJlIHplcm9cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XG5cbiAgICAgICAgICAgLy8gVXBkYXRlIGZvb2QgYW5kIHJ1biBkaWdlc3QuICBOb3cgdGhlIGNvdW50ZXIgd2lsbCBpbmNyZW1lbnRcbiAgICAgICAgICAgZm9vZCA9ICdjaGVlc2VidXJnZXInO1xuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgxKTtcblxuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhmdW5jdGlvbigpfHN0cmluZyl9IHdhdGNoRXhwcmVzc2lvbiBFeHByZXNzaW9uIHRoYXQgaXMgZXZhbHVhdGVkIG9uIGVhY2hcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEEgY2hhbmdlIGluIHRoZSByZXR1cm4gdmFsdWUgdHJpZ2dlcnNcbiAgICAgICAqICAgIGEgY2FsbCB0byB0aGUgYGxpc3RlbmVyYC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBFdmFsdWF0ZWQgYXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn1cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGNhbGxlZCB3aXRoIGN1cnJlbnQgYHNjb3BlYCBhcyBhIHBhcmFtZXRlci5cbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwsIHNjb3BlKX0gbGlzdGVuZXIgQ2FsbGJhY2sgY2FsbGVkIHdoZW5ldmVyIHRoZSB2YWx1ZVxuICAgICAgICogICAgb2YgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBuZXdWYWxgIGNvbnRhaW5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uYFxuICAgICAgICogICAgLSBgb2xkVmFsYCBjb250YWlucyB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gXG4gICAgICAgKiAgICAtIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvYmplY3RFcXVhbGl0eSBDb21wYXJlIGZvciBvYmplY3QgZXF1YWxpdHkgdXNpbmcge0BsaW5rIGFuZ3VsYXIuZXF1YWxzfSBpbnN0ZWFkIG9mXG4gICAgICAgKiAgICAgY29tcGFyaW5nIGZvciByZWZlcmVuY2UgZXF1YWxpdHkuXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICovXG4gICAgICAkd2F0Y2g6IGZ1bmN0aW9uKHdhdGNoRXhwLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHkpIHtcbiAgICAgICAgdmFyIGdldCA9ICRwYXJzZSh3YXRjaEV4cCk7XG5cbiAgICAgICAgaWYgKGdldC4kJHdhdGNoRGVsZWdhdGUpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0LiQkd2F0Y2hEZWxlZ2F0ZSh0aGlzLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIGdldCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcyxcbiAgICAgICAgICAgIGFycmF5ID0gc2NvcGUuJCR3YXRjaGVycyxcbiAgICAgICAgICAgIHdhdGNoZXIgPSB7XG4gICAgICAgICAgICAgIGZuOiBsaXN0ZW5lcixcbiAgICAgICAgICAgICAgbGFzdDogaW5pdFdhdGNoVmFsLFxuICAgICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgICAgZXhwOiB3YXRjaEV4cCxcbiAgICAgICAgICAgICAgZXE6ICEhb2JqZWN0RXF1YWxpdHlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuXG4gICAgICAgIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpIHtcbiAgICAgICAgICB3YXRjaGVyLmZuID0gbm9vcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYXJyYXkpIHtcbiAgICAgICAgICBhcnJheSA9IHNjb3BlLiQkd2F0Y2hlcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSB1c2UgdW5zaGlmdCBzaW5jZSB3ZSB1c2UgYSB3aGlsZSBsb29wIGluICRkaWdlc3QgZm9yIHNwZWVkLlxuICAgICAgICAvLyB0aGUgd2hpbGUgbG9vcCByZWFkcyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgICBhcnJheS51bnNoaWZ0KHdhdGNoZXIpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyV2F0Y2goKSB7XG4gICAgICAgICAgYXJyYXlSZW1vdmUoYXJyYXksIHdhdGNoZXIpO1xuICAgICAgICAgIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkd2F0Y2hHcm91cFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEEgdmFyaWFudCBvZiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9IHdoZXJlIGl0IHdhdGNoZXMgYW4gYXJyYXkgb2YgYHdhdGNoRXhwcmVzc2lvbnNgLlxuICAgICAgICogSWYgYW55IG9uZSBleHByZXNzaW9uIGluIHRoZSBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGBsaXN0ZW5lcmAgaXMgZXhlY3V0ZWQuXG4gICAgICAgKlxuICAgICAgICogLSBUaGUgaXRlbXMgaW4gdGhlIGB3YXRjaEV4cHJlc3Npb25zYCBhcnJheSBhcmUgb2JzZXJ2ZWQgdmlhIHN0YW5kYXJkICR3YXRjaCBvcGVyYXRpb24gYW5kIGFyZSBleGFtaW5lZCBvbiBldmVyeVxuICAgICAgICogICBjYWxsIHRvICRkaWdlc3QoKSB0byBzZWUgaWYgYW55IGl0ZW1zIGNoYW5nZXMuXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCB3aGVuZXZlciBhbnkgZXhwcmVzc2lvbiBpbiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgIGFycmF5IGNoYW5nZXMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtBcnJheS48c3RyaW5nfEZ1bmN0aW9uKHNjb3BlKT59IHdhdGNoRXhwcmVzc2lvbnMgQXJyYXkgb2YgZXhwcmVzc2lvbnMgdGhhdCB3aWxsIGJlIGluZGl2aWR1YWxseVxuICAgICAgICogd2F0Y2hlZCB1c2luZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9XG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdWYWx1ZXMsIG9sZFZhbHVlcywgc2NvcGUpfSBsaXN0ZW5lciBDYWxsYmFjayBjYWxsZWQgd2hlbmV2ZXIgdGhlIHJldHVybiB2YWx1ZSBvZiBhbnlcbiAgICAgICAqICAgIGV4cHJlc3Npb24gaW4gYHdhdGNoRXhwcmVzc2lvbnNgIGNoYW5nZXNcbiAgICAgICAqICAgIFRoZSBgbmV3VmFsdWVzYCBhcnJheSBjb250YWlucyB0aGUgY3VycmVudCB2YWx1ZXMgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25zYCwgd2l0aCB0aGUgaW5kZXhlcyBtYXRjaGluZ1xuICAgICAgICogICAgdGhvc2Ugb2YgYHdhdGNoRXhwcmVzc2lvbmBcbiAgICAgICAqICAgIGFuZCB0aGUgYG9sZFZhbHVlc2AgYXJyYXkgY29udGFpbnMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgLCB3aXRoIHRoZSBpbmRleGVzIG1hdGNoaW5nXG4gICAgICAgKiAgICB0aG9zZSBvZiBgd2F0Y2hFeHByZXNzaW9uYFxuICAgICAgICogICAgVGhlIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlLlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIGFsbCBsaXN0ZW5lcnMuXG4gICAgICAgKi9cbiAgICAgICR3YXRjaEdyb3VwOiBmdW5jdGlvbih3YXRjaEV4cHJlc3Npb25zLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgb2xkVmFsdWVzID0gbmV3IEFycmF5KHdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoKTtcbiAgICAgICAgdmFyIG5ld1ZhbHVlcyA9IG5ldyBBcnJheSh3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCk7XG4gICAgICAgIHZhciBkZXJlZ2lzdGVyRm5zID0gW107XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBmaXJzdFJ1biA9IHRydWU7XG5cbiAgICAgICAgaWYgKCF3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCkge1xuICAgICAgICAgIC8vIE5vIGV4cHJlc3Npb25zIG1lYW5zIHdlIGNhbGwgdGhlIGxpc3RlbmVyIEFTQVBcbiAgICAgICAgICB2YXIgc2hvdWxkQ2FsbCA9IHRydWU7XG4gICAgICAgICAgc2VsZi4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNob3VsZENhbGwpIGxpc3RlbmVyKG5ld1ZhbHVlcywgbmV3VmFsdWVzLCBzZWxmKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoR3JvdXAoKSB7XG4gICAgICAgICAgICBzaG91bGRDYWxsID0gZmFsc2U7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBzaXplIG9mIG9uZVxuICAgICAgICAgIHJldHVybiB0aGlzLiR3YXRjaCh3YXRjaEV4cHJlc3Npb25zWzBdLCBmdW5jdGlvbiB3YXRjaEdyb3VwQWN0aW9uKHZhbHVlLCBvbGRWYWx1ZSwgc2NvcGUpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlc1swXSA9IHZhbHVlO1xuICAgICAgICAgICAgb2xkVmFsdWVzWzBdID0gb2xkVmFsdWU7XG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsICh2YWx1ZSA9PT0gb2xkVmFsdWUpID8gbmV3VmFsdWVzIDogb2xkVmFsdWVzLCBzY29wZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JFYWNoKHdhdGNoRXhwcmVzc2lvbnMsIGZ1bmN0aW9uKGV4cHIsIGkpIHtcbiAgICAgICAgICB2YXIgdW53YXRjaEZuID0gc2VsZi4kd2F0Y2goZXhwciwgZnVuY3Rpb24gd2F0Y2hHcm91cFN1YkFjdGlvbih2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgICAgICAgb2xkVmFsdWVzW2ldID0gb2xkVmFsdWU7XG4gICAgICAgICAgICBpZiAoIWNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2VsZi4kZXZhbEFzeW5jKHdhdGNoR3JvdXBBY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlcmVnaXN0ZXJGbnMucHVzaCh1bndhdGNoRm4pO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiB3YXRjaEdyb3VwQWN0aW9uKCkge1xuICAgICAgICAgIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gZmFsc2U7XG5cbiAgICAgICAgICBpZiAoZmlyc3RSdW4pIHtcbiAgICAgICAgICAgIGZpcnN0UnVuID0gZmFsc2U7XG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsIG5ld1ZhbHVlcywgc2VsZik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgb2xkVmFsdWVzLCBzZWxmKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoR3JvdXAoKSB7XG4gICAgICAgICAgd2hpbGUgKGRlcmVnaXN0ZXJGbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBkZXJlZ2lzdGVyRm5zLnNoaWZ0KCkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkd2F0Y2hDb2xsZWN0aW9uXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogU2hhbGxvdyB3YXRjaGVzIHRoZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCBhbmQgZmlyZXMgd2hlbmV2ZXIgYW55IG9mIHRoZSBwcm9wZXJ0aWVzIGNoYW5nZVxuICAgICAgICogKGZvciBhcnJheXMsIHRoaXMgaW1wbGllcyB3YXRjaGluZyB0aGUgYXJyYXkgaXRlbXM7IGZvciBvYmplY3QgbWFwcywgdGhpcyBpbXBsaWVzIHdhdGNoaW5nXG4gICAgICAgKiB0aGUgcHJvcGVydGllcykuIElmIGEgY2hhbmdlIGlzIGRldGVjdGVkLCB0aGUgYGxpc3RlbmVyYCBjYWxsYmFjayBpcyBmaXJlZC5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoZSBgb2JqYCBjb2xsZWN0aW9uIGlzIG9ic2VydmVkIHZpYSBzdGFuZGFyZCAkd2F0Y2ggb3BlcmF0aW9uIGFuZCBpcyBleGFtaW5lZCBvbiBldmVyeVxuICAgICAgICogICBjYWxsIHRvICRkaWdlc3QoKSB0byBzZWUgaWYgYW55IGl0ZW1zIGhhdmUgYmVlbiBhZGRlZCwgcmVtb3ZlZCwgb3IgbW92ZWQuXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCB3aGVuZXZlciBhbnl0aGluZyB3aXRoaW4gdGhlIGBvYmpgIGhhcyBjaGFuZ2VkLiBFeGFtcGxlcyBpbmNsdWRlXG4gICAgICAgKiAgIGFkZGluZywgcmVtb3ZpbmcsIGFuZCBtb3ZpbmcgaXRlbXMgYmVsb25naW5nIHRvIGFuIG9iamVjdCBvciBhcnJheS5cbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogIyBFeGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICRzY29wZS5uYW1lcyA9IFsnaWdvcicsICdtYXRpYXMnLCAnbWlza28nLCAnamFtZXMnXTtcbiAgICAgICAgICAkc2NvcGUuZGF0YUNvdW50ID0gNDtcblxuICAgICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCduYW1lcycsIGZ1bmN0aW9uKG5ld05hbWVzLCBvbGROYW1lcykge1xuICAgICAgICAgICAgJHNjb3BlLmRhdGFDb3VudCA9IG5ld05hbWVzLmxlbmd0aDtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDQpO1xuICAgICAgICAgICRzY29wZS4kZGlnZXN0KCk7XG5cbiAgICAgICAgICAvL3N0aWxsIGF0IDQgLi4uIG5vIGNoYW5nZXNcbiAgICAgICAgICBleHBlY3QoJHNjb3BlLmRhdGFDb3VudCkudG9FcXVhbCg0KTtcblxuICAgICAgICAgICRzY29wZS5uYW1lcy5wb3AoKTtcbiAgICAgICAgICAkc2NvcGUuJGRpZ2VzdCgpO1xuXG4gICAgICAgICAgLy9ub3cgdGhlcmUncyBiZWVuIGEgY2hhbmdlXG4gICAgICAgICAgZXhwZWN0KCRzY29wZS5kYXRhQ291bnQpLnRvRXF1YWwoMyk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb24oc2NvcGUpfSBvYmogRXZhbHVhdGVkIGFzIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LiBUaGVcbiAgICAgICAqICAgIGV4cHJlc3Npb24gdmFsdWUgc2hvdWxkIGV2YWx1YXRlIHRvIGFuIG9iamVjdCBvciBhbiBhcnJheSB3aGljaCBpcyBvYnNlcnZlZCBvbiBlYWNoXG4gICAgICAgKiAgICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3R9IGN5Y2xlLiBBbnkgc2hhbGxvdyBjaGFuZ2Ugd2l0aGluIHRoZVxuICAgICAgICogICAgY29sbGVjdGlvbiB3aWxsIHRyaWdnZXIgYSBjYWxsIHRvIHRoZSBgbGlzdGVuZXJgLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3Q29sbGVjdGlvbiwgb2xkQ29sbGVjdGlvbiwgc2NvcGUpfSBsaXN0ZW5lciBhIGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAgICogICAgd2hlbiBhIGNoYW5nZSBpcyBkZXRlY3RlZC5cbiAgICAgICAqICAgIC0gVGhlIGBuZXdDb2xsZWN0aW9uYCBvYmplY3QgaXMgdGhlIG5ld2x5IG1vZGlmaWVkIGRhdGEgb2J0YWluZWQgZnJvbSB0aGUgYG9iamAgZXhwcmVzc2lvblxuICAgICAgICogICAgLSBUaGUgYG9sZENvbGxlY3Rpb25gIG9iamVjdCBpcyBhIGNvcHkgb2YgdGhlIGZvcm1lciBjb2xsZWN0aW9uIGRhdGEuXG4gICAgICAgKiAgICAgIER1ZSB0byBwZXJmb3JtYW5jZSBjb25zaWRlcmF0aW9ucywgdGhlYG9sZENvbGxlY3Rpb25gIHZhbHVlIGlzIGNvbXB1dGVkIG9ubHkgaWYgdGhlXG4gICAgICAgKiAgICAgIGBsaXN0ZW5lcmAgZnVuY3Rpb24gZGVjbGFyZXMgdHdvIG9yIG1vcmUgYXJndW1lbnRzLlxuICAgICAgICogICAgLSBUaGUgYHNjb3BlYCBhcmd1bWVudCByZWZlcnMgdG8gdGhlIGN1cnJlbnQgc2NvcGUuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuIFdoZW4gdGhlXG4gICAgICAgKiAgICBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gaXMgZXhlY3V0ZWQsIHRoZSBpbnRlcm5hbCB3YXRjaCBvcGVyYXRpb24gaXMgdGVybWluYXRlZC5cbiAgICAgICAqL1xuICAgICAgJHdhdGNoQ29sbGVjdGlvbjogZnVuY3Rpb24ob2JqLCBsaXN0ZW5lcikge1xuICAgICAgICAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IuJHN0YXRlZnVsID0gdHJ1ZTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8vIHRoZSBjdXJyZW50IHZhbHVlLCB1cGRhdGVkIG9uIGVhY2ggZGlydHktY2hlY2sgcnVuXG4gICAgICAgIHZhciBuZXdWYWx1ZTtcbiAgICAgICAgLy8gYSBzaGFsbG93IGNvcHkgb2YgdGhlIG5ld1ZhbHVlIGZyb20gdGhlIGxhc3QgZGlydHktY2hlY2sgcnVuLFxuICAgICAgICAvLyB1cGRhdGVkIHRvIG1hdGNoIG5ld1ZhbHVlIGR1cmluZyBkaXJ0eS1jaGVjayBydW5cbiAgICAgICAgdmFyIG9sZFZhbHVlO1xuICAgICAgICAvLyBhIHNoYWxsb3cgY29weSBvZiB0aGUgbmV3VmFsdWUgZnJvbSB3aGVuIHRoZSBsYXN0IGNoYW5nZSBoYXBwZW5lZFxuICAgICAgICB2YXIgdmVyeU9sZFZhbHVlO1xuICAgICAgICAvLyBvbmx5IHRyYWNrIHZlcnlPbGRWYWx1ZSBpZiB0aGUgbGlzdGVuZXIgaXMgYXNraW5nIGZvciBpdFxuICAgICAgICB2YXIgdHJhY2tWZXJ5T2xkVmFsdWUgPSAobGlzdGVuZXIubGVuZ3RoID4gMSk7XG4gICAgICAgIHZhciBjaGFuZ2VEZXRlY3RlZCA9IDA7XG4gICAgICAgIHZhciBjaGFuZ2VEZXRlY3RvciA9ICRwYXJzZShvYmosICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvcik7XG4gICAgICAgIHZhciBpbnRlcm5hbEFycmF5ID0gW107XG4gICAgICAgIHZhciBpbnRlcm5hbE9iamVjdCA9IHt9O1xuICAgICAgICB2YXIgaW5pdFJ1biA9IHRydWU7XG4gICAgICAgIHZhciBvbGRMZW5ndGggPSAwO1xuXG4gICAgICAgIGZ1bmN0aW9uICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvcihfdmFsdWUpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgICB2YXIgbmV3TGVuZ3RoLCBrZXksIGJvdGhOYU4sIG5ld0l0ZW0sIG9sZEl0ZW07XG5cbiAgICAgICAgICAvLyBJZiB0aGUgbmV3IHZhbHVlIGlzIHVuZGVmaW5lZCwgdGhlbiByZXR1cm4gdW5kZWZpbmVkIGFzIHRoZSB3YXRjaCBtYXkgYmUgYSBvbmUtdGltZSB3YXRjaFxuICAgICAgICAgIGlmIChpc1VuZGVmaW5lZChuZXdWYWx1ZSkpIHJldHVybjtcblxuICAgICAgICAgIGlmICghaXNPYmplY3QobmV3VmFsdWUpKSB7IC8vIGlmIHByaW1pdGl2ZVxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICBvbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheUxpa2UobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IGludGVybmFsQXJyYXkpIHtcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBzb21ldGhpbmcgd2hpY2ggd2FzIG5vdCBhbiBhcnJheSBpbnRvIGFycmF5LlxuICAgICAgICAgICAgICBvbGRWYWx1ZSA9IGludGVybmFsQXJyYXk7XG4gICAgICAgICAgICAgIG9sZExlbmd0aCA9IG9sZFZhbHVlLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ld0xlbmd0aCA9IG5ld1ZhbHVlLmxlbmd0aDtcblxuICAgICAgICAgICAgaWYgKG9sZExlbmd0aCAhPT0gbmV3TGVuZ3RoKSB7XG4gICAgICAgICAgICAgIC8vIGlmIGxlbmd0aHMgZG8gbm90IG1hdGNoIHdlIG5lZWQgdG8gdHJpZ2dlciBjaGFuZ2Ugbm90aWZpY2F0aW9uXG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICAgIG9sZFZhbHVlLmxlbmd0aCA9IG9sZExlbmd0aCA9IG5ld0xlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvcHkgdGhlIGl0ZW1zIHRvIG9sZFZhbHVlIGFuZCBsb29rIGZvciBjaGFuZ2VzLlxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBvbGRJdGVtID0gb2xkVmFsdWVbaV07XG4gICAgICAgICAgICAgIG5ld0l0ZW0gPSBuZXdWYWx1ZVtpXTtcblxuICAgICAgICAgICAgICBib3RoTmFOID0gKG9sZEl0ZW0gIT09IG9sZEl0ZW0pICYmIChuZXdJdGVtICE9PSBuZXdJdGVtKTtcbiAgICAgICAgICAgICAgaWYgKCFib3RoTmFOICYmIChvbGRJdGVtICE9PSBuZXdJdGVtKSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICAgICAgb2xkVmFsdWVbaV0gPSBuZXdJdGVtO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gaW50ZXJuYWxPYmplY3QpIHtcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBzb21ldGhpbmcgd2hpY2ggd2FzIG5vdCBhbiBvYmplY3QgaW50byBvYmplY3QuXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gaW50ZXJuYWxPYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgb2xkTGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvcHkgdGhlIGl0ZW1zIHRvIG9sZFZhbHVlIGFuZCBsb29rIGZvciBjaGFuZ2VzLlxuICAgICAgICAgICAgbmV3TGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChuZXdWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgbmV3TGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgbmV3SXRlbSA9IG5ld1ZhbHVlW2tleV07XG4gICAgICAgICAgICAgICAgb2xkSXRlbSA9IG9sZFZhbHVlW2tleV07XG5cbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICBib3RoTmFOID0gKG9sZEl0ZW0gIT09IG9sZEl0ZW0pICYmIChuZXdJdGVtICE9PSBuZXdJdGVtKTtcbiAgICAgICAgICAgICAgICAgIGlmICghYm90aE5hTiAmJiAob2xkSXRlbSAhPT0gbmV3SXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9sZExlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZExlbmd0aCA+IG5ld0xlbmd0aCkge1xuICAgICAgICAgICAgICAvLyB3ZSB1c2VkIHRvIGhhdmUgbW9yZSBrZXlzLCBuZWVkIHRvIGZpbmQgdGhlbSBhbmQgZGVzdHJveSB0aGVtLlxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICBmb3IgKGtleSBpbiBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghbmV3VmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgb2xkTGVuZ3RoLS07XG4gICAgICAgICAgICAgICAgICBkZWxldGUgb2xkVmFsdWVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNoYW5nZURldGVjdGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gJHdhdGNoQ29sbGVjdGlvbkFjdGlvbigpIHtcbiAgICAgICAgICBpZiAoaW5pdFJ1bikge1xuICAgICAgICAgICAgaW5pdFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIG5ld1ZhbHVlLCBzZWxmKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIHZlcnlPbGRWYWx1ZSwgc2VsZik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbWFrZSBhIGNvcHkgZm9yIHRoZSBuZXh0IHRpbWUgYSBjb2xsZWN0aW9uIGlzIGNoYW5nZWRcbiAgICAgICAgICBpZiAodHJhY2tWZXJ5T2xkVmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghaXNPYmplY3QobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgIC8vcHJpbWl0aXZlXG4gICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5TGlrZShuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0gbmV3IEFycmF5KG5ld1ZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3VmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWVbaV0gPSBuZXdWYWx1ZVtpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gaWYgb2JqZWN0XG4gICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChuZXdWYWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlW2tleV0gPSBuZXdWYWx1ZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiR3YXRjaChjaGFuZ2VEZXRlY3RvciwgJHdhdGNoQ29sbGVjdGlvbkFjdGlvbik7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFByb2Nlc3NlcyBhbGwgb2YgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyc30gb2YgdGhlIGN1cnJlbnQgc2NvcGUgYW5kXG4gICAgICAgKiBpdHMgY2hpbGRyZW4uIEJlY2F1c2UgYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlcn0ncyBsaXN0ZW5lciBjYW4gY2hhbmdlXG4gICAgICAgKiB0aGUgbW9kZWwsIHRoZSBgJGRpZ2VzdCgpYCBrZWVwcyBjYWxsaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlcnN9XG4gICAgICAgKiB1bnRpbCBubyBtb3JlIGxpc3RlbmVycyBhcmUgZmlyaW5nLiBUaGlzIG1lYW5zIHRoYXQgaXQgaXMgcG9zc2libGUgdG8gZ2V0IGludG8gYW4gaW5maW5pdGVcbiAgICAgICAqIGxvb3AuIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBgJ01heGltdW0gaXRlcmF0aW9uIGxpbWl0IGV4Y2VlZGVkLidgIGlmIHRoZSBudW1iZXIgb2ZcbiAgICAgICAqIGl0ZXJhdGlvbnMgZXhjZWVkcyAxMC5cbiAgICAgICAqXG4gICAgICAgKiBVc3VhbGx5LCB5b3UgZG9uJ3QgY2FsbCBgJGRpZ2VzdCgpYCBkaXJlY3RseSBpblxuICAgICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NvbnRyb2xsZXIgY29udHJvbGxlcnN9IG9yIGluXG4gICAgICAgKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gICAgICAgKiBJbnN0ZWFkLCB5b3Ugc2hvdWxkIGNhbGwge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5ICRhcHBseSgpfSAodHlwaWNhbGx5IGZyb20gd2l0aGluXG4gICAgICAgKiBhIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSBkaXJlY3RpdmV9KSwgd2hpY2ggd2lsbCBmb3JjZSBhIGAkZGlnZXN0KClgLlxuICAgICAgICpcbiAgICAgICAqIElmIHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkIHdoZW5ldmVyIGAkZGlnZXN0KClgIGlzIGNhbGxlZCxcbiAgICAgICAqIHlvdSBjYW4gcmVnaXN0ZXIgYSBgd2F0Y2hFeHByZXNzaW9uYCBmdW5jdGlvbiB3aXRoXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9IHdpdGggbm8gYGxpc3RlbmVyYC5cbiAgICAgICAqXG4gICAgICAgKiBJbiB1bml0IHRlc3RzLCB5b3UgbWF5IG5lZWQgdG8gY2FsbCBgJGRpZ2VzdCgpYCB0byBzaW11bGF0ZSB0aGUgc2NvcGUgbGlmZSBjeWNsZS5cbiAgICAgICAqXG4gICAgICAgKiAjIEV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgICAgIHZhciBzY29wZSA9IC4uLjtcbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdtaXNrbyc7XG4gICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSAwO1xuXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xuICAgICAgICAgICBzY29wZS4kd2F0Y2goJ25hbWUnLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICBzY29wZS5jb3VudGVyID0gc2NvcGUuY291bnRlciArIDE7XG4gICAgICAgICAgIH0pO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgwKTtcblxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIC8vIHRoZSBsaXN0ZW5lciBpcyBhbHdheXMgY2FsbGVkIGR1cmluZyB0aGUgZmlyc3QgJGRpZ2VzdCBsb29wIGFmdGVyIGl0IHdhcyByZWdpc3RlcmVkXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDEpO1xuXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgLy8gYnV0IG5vdyBpdCB3aWxsIG5vdCBiZSBjYWxsZWQgdW5sZXNzIHRoZSB2YWx1ZSBjaGFuZ2VzXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDEpO1xuXG4gICAgICAgICAgIHNjb3BlLm5hbWUgPSAnYWRhbSc7XG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMik7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKi9cbiAgICAgICRkaWdlc3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgd2F0Y2gsIHZhbHVlLCBsYXN0LFxuICAgICAgICAgICAgd2F0Y2hlcnMsXG4gICAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgICBkaXJ0eSwgdHRsID0gVFRMLFxuICAgICAgICAgICAgbmV4dCwgY3VycmVudCwgdGFyZ2V0ID0gdGhpcyxcbiAgICAgICAgICAgIHdhdGNoTG9nID0gW10sXG4gICAgICAgICAgICBsb2dJZHgsIGxvZ01zZywgYXN5bmNUYXNrO1xuXG4gICAgICAgIGJlZ2luUGhhc2UoJyRkaWdlc3QnKTtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNoYW5nZXMgdG8gYnJvd3NlciB1cmwgdGhhdCBoYXBwZW5lZCBpbiBzeW5jIGJlZm9yZSB0aGUgY2FsbCB0byAkZGlnZXN0XG4gICAgICAgICRicm93c2VyLiQkY2hlY2tVcmxDaGFuZ2UoKTtcblxuICAgICAgICBpZiAodGhpcyA9PT0gJHJvb3RTY29wZSAmJiBhcHBseUFzeW5jSWQgIT09IG51bGwpIHtcbiAgICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSByb290IHNjb3BlLCBhbmQgJGFwcGx5QXN5bmMgaGFzIHNjaGVkdWxlZCBhIGRlZmVycmVkICRhcHBseSgpLCB0aGVuXG4gICAgICAgICAgLy8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgJGFwcGx5IGFuZCBmbHVzaCB0aGUgcXVldWUgb2YgZXhwcmVzc2lvbnMgdG8gYmUgZXZhbHVhdGVkLlxuICAgICAgICAgICRicm93c2VyLmRlZmVyLmNhbmNlbChhcHBseUFzeW5jSWQpO1xuICAgICAgICAgIGZsdXNoQXBwbHlBc3luYygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuXG4gICAgICAgIGRvIHsgLy8gXCJ3aGlsZSBkaXJ0eVwiIGxvb3BcbiAgICAgICAgICBkaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgIGN1cnJlbnQgPSB0YXJnZXQ7XG5cbiAgICAgICAgICB3aGlsZSAoYXN5bmNRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGFzeW5jVGFzayA9IGFzeW5jUXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgYXN5bmNUYXNrLnNjb3BlLiRldmFsKGFzeW5jVGFzay5leHByZXNzaW9uLCBhc3luY1Rhc2subG9jYWxzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0RGlydHlXYXRjaCA9IG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJhdmVyc2VTY29wZXNMb29wOlxuICAgICAgICAgIGRvIHsgLy8gXCJ0cmF2ZXJzZSB0aGUgc2NvcGVzXCIgbG9vcFxuICAgICAgICAgICAgaWYgKCh3YXRjaGVycyA9IGN1cnJlbnQuJCR3YXRjaGVycykpIHtcbiAgICAgICAgICAgICAgLy8gcHJvY2VzcyBvdXIgd2F0Y2hlc1xuICAgICAgICAgICAgICBsZW5ndGggPSB3YXRjaGVycy5sZW5ndGg7XG4gICAgICAgICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICB3YXRjaCA9IHdhdGNoZXJzW2xlbmd0aF07XG4gICAgICAgICAgICAgICAgICAvLyBNb3N0IGNvbW1vbiB3YXRjaGVzIGFyZSBvbiBwcmltaXRpdmVzLCBpbiB3aGljaCBjYXNlIHdlIGNhbiBzaG9ydFxuICAgICAgICAgICAgICAgICAgLy8gY2lyY3VpdCBpdCB3aXRoID09PSBvcGVyYXRvciwgb25seSB3aGVuID09PSBmYWlscyBkbyB3ZSB1c2UgLmVxdWFsc1xuICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgPSB3YXRjaC5nZXQoY3VycmVudCkpICE9PSAobGFzdCA9IHdhdGNoLmxhc3QpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhKHdhdGNoLmVxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBlcXVhbHModmFsdWUsIGxhc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgbGFzdCA9PT0gJ251bWJlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBpc05hTih2YWx1ZSkgJiYgaXNOYU4obGFzdCkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICBsYXN0RGlydHlXYXRjaCA9IHdhdGNoO1xuICAgICAgICAgICAgICAgICAgICAgIHdhdGNoLmxhc3QgPSB3YXRjaC5lcSA/IGNvcHkodmFsdWUsIG51bGwpIDogdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgd2F0Y2guZm4odmFsdWUsICgobGFzdCA9PT0gaW5pdFdhdGNoVmFsKSA/IHZhbHVlIDogbGFzdCksIGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh0dGwgPCA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dJZHggPSA0IC0gdHRsO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3YXRjaExvZ1tsb2dJZHhdKSB3YXRjaExvZ1tsb2dJZHhdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXRjaExvZ1tsb2dJZHhdLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGlzRnVuY3Rpb24od2F0Y2guZXhwKSA/ICdmbjogJyArICh3YXRjaC5leHAubmFtZSB8fCB3YXRjaC5leHAudG9TdHJpbmcoKSkgOiB3YXRjaC5leHAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbDogbGFzdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdhdGNoID09PSBsYXN0RGlydHlXYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBtb3N0IHJlY2VudGx5IGRpcnR5IHdhdGNoZXIgaXMgbm93IGNsZWFuLCBzaG9ydCBjaXJjdWl0IHNpbmNlIHRoZSByZW1haW5pbmcgd2F0Y2hlcnNcbiAgICAgICAgICAgICAgICAgICAgICAvLyBoYXZlIGFscmVhZHkgYmVlbiB0ZXN0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhayB0cmF2ZXJzZVNjb3Blc0xvb3A7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSW5zYW5pdHkgV2FybmluZzogc2NvcGUgZGVwdGgtZmlyc3QgdHJhdmVyc2FsXG4gICAgICAgICAgICAvLyB5ZXMsIHRoaXMgY29kZSBpcyBhIGJpdCBjcmF6eSwgYnV0IGl0IHdvcmtzIGFuZCB3ZSBoYXZlIHRlc3RzIHRvIHByb3ZlIGl0IVxuICAgICAgICAgICAgLy8gdGhpcyBwaWVjZSBzaG91bGQgYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIHRyYXZlcnNhbCBpbiAkYnJvYWRjYXN0XG4gICAgICAgICAgICBpZiAoIShuZXh0ID0gKGN1cnJlbnQuJCRjaGlsZEhlYWQgfHxcbiAgICAgICAgICAgICAgICAoY3VycmVudCAhPT0gdGFyZ2V0ICYmIGN1cnJlbnQuJCRuZXh0U2libGluZykpKSkge1xuICAgICAgICAgICAgICB3aGlsZSAoY3VycmVudCAhPT0gdGFyZ2V0ICYmICEobmV4dCA9IGN1cnJlbnQuJCRuZXh0U2libGluZykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC4kcGFyZW50O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBuZXh0KSk7XG5cbiAgICAgICAgICAvLyBgYnJlYWsgdHJhdmVyc2VTY29wZXNMb29wO2AgdGFrZXMgdXMgdG8gaGVyZVxuXG4gICAgICAgICAgaWYgKChkaXJ0eSB8fCBhc3luY1F1ZXVlLmxlbmd0aCkgJiYgISh0dGwtLSkpIHtcbiAgICAgICAgICAgIGNsZWFyUGhhc2UoKTtcbiAgICAgICAgICAgIHRocm93ICRyb290U2NvcGVNaW5FcnIoJ2luZmRpZycsXG4gICAgICAgICAgICAgICAgJ3swfSAkZGlnZXN0KCkgaXRlcmF0aW9ucyByZWFjaGVkLiBBYm9ydGluZyFcXG4nICtcbiAgICAgICAgICAgICAgICAnV2F0Y2hlcnMgZmlyZWQgaW4gdGhlIGxhc3QgNSBpdGVyYXRpb25zOiB7MX0nLFxuICAgICAgICAgICAgICAgIFRUTCwgd2F0Y2hMb2cpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9IHdoaWxlIChkaXJ0eSB8fCBhc3luY1F1ZXVlLmxlbmd0aCk7XG5cbiAgICAgICAgY2xlYXJQaGFzZSgpO1xuXG4gICAgICAgIHdoaWxlIChwb3N0RGlnZXN0UXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBvc3REaWdlc3RRdWV1ZS5zaGlmdCgpKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIGV2ZW50XG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRkZXN0cm95XG4gICAgICAgKiBAZXZlbnRUeXBlIGJyb2FkY2FzdCBvbiBzY29wZSBiZWluZyBkZXN0cm95ZWRcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEJyb2FkY2FzdGVkIHdoZW4gYSBzY29wZSBhbmQgaXRzIGNoaWxkcmVuIGFyZSBiZWluZyBkZXN0cm95ZWQuXG4gICAgICAgKlxuICAgICAgICogTm90ZSB0aGF0LCBpbiBBbmd1bGFySlMsIHRoZXJlIGlzIGFsc28gYSBgJGRlc3Ryb3lgIGpRdWVyeSBldmVudCwgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICAgICAqIGNsZWFuIHVwIERPTSBiaW5kaW5ncyBiZWZvcmUgYW4gZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cbiAgICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3lcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZW1vdmVzIHRoZSBjdXJyZW50IHNjb3BlIChhbmQgYWxsIG9mIGl0cyBjaGlsZHJlbikgZnJvbSB0aGUgcGFyZW50IHNjb3BlLiBSZW1vdmFsIGltcGxpZXNcbiAgICAgICAqIHRoYXQgY2FsbHMgdG8ge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IHdpbGwgbm8gbG9uZ2VyXG4gICAgICAgKiBwcm9wYWdhdGUgdG8gdGhlIGN1cnJlbnQgc2NvcGUgYW5kIGl0cyBjaGlsZHJlbi4gUmVtb3ZhbCBhbHNvIGltcGxpZXMgdGhhdCB0aGUgY3VycmVudFxuICAgICAgICogc2NvcGUgaXMgZWxpZ2libGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgYCRkZXN0cm95KClgIGlzIHVzdWFsbHkgdXNlZCBieSBkaXJlY3RpdmVzIHN1Y2ggYXNcbiAgICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9IGZvciBtYW5hZ2luZyB0aGVcbiAgICAgICAqIHVucm9sbGluZyBvZiB0aGUgbG9vcC5cbiAgICAgICAqXG4gICAgICAgKiBKdXN0IGJlZm9yZSBhIHNjb3BlIGlzIGRlc3Ryb3llZCwgYSBgJGRlc3Ryb3lgIGV2ZW50IGlzIGJyb2FkY2FzdGVkIG9uIHRoaXMgc2NvcGUuXG4gICAgICAgKiBBcHBsaWNhdGlvbiBjb2RlIGNhbiByZWdpc3RlciBhIGAkZGVzdHJveWAgZXZlbnQgaGFuZGxlciB0aGF0IHdpbGwgZ2l2ZSBpdCBhIGNoYW5jZSB0b1xuICAgICAgICogcGVyZm9ybSBhbnkgbmVjZXNzYXJ5IGNsZWFudXAuXG4gICAgICAgKlxuICAgICAgICogTm90ZSB0aGF0LCBpbiBBbmd1bGFySlMsIHRoZXJlIGlzIGFsc28gYSBgJGRlc3Ryb3lgIGpRdWVyeSBldmVudCwgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICAgICAqIGNsZWFuIHVwIERPTSBiaW5kaW5ncyBiZWZvcmUgYW4gZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cbiAgICAgICAqL1xuICAgICAgJGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyB3ZSBjYW4ndCBkZXN0cm95IHRoZSByb290IHNjb3BlIG9yIGEgc2NvcGUgdGhhdCBoYXMgYmVlbiBhbHJlYWR5IGRlc3Ryb3llZFxuICAgICAgICBpZiAodGhpcy4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXG4gICAgICAgIHRoaXMuJGJyb2FkY2FzdCgnJGRlc3Ryb3knKTtcbiAgICAgICAgdGhpcy4kJGRlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzID09PSAkcm9vdFNjb3BlKSByZXR1cm47XG5cbiAgICAgICAgZm9yICh2YXIgZXZlbnROYW1lIGluIHRoaXMuJCRsaXN0ZW5lckNvdW50KSB7XG4gICAgICAgICAgZGVjcmVtZW50TGlzdGVuZXJDb3VudCh0aGlzLCB0aGlzLiQkbGlzdGVuZXJDb3VudFtldmVudE5hbWVdLCBldmVudE5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2V2ZXIgYWxsIHRoZSByZWZlcmVuY2VzIHRvIHBhcmVudCBzY29wZXMgKGFmdGVyIHRoaXMgY2xlYW51cCwgdGhlIGN1cnJlbnQgc2NvcGUgc2hvdWxkXG4gICAgICAgIC8vIG5vdCBiZSByZXRhaW5lZCBieSBhbnkgb2Ygb3VyIHJlZmVyZW5jZXMgYW5kIHNob3VsZCBiZSBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uKVxuICAgICAgICBpZiAocGFyZW50LiQkY2hpbGRIZWFkID09IHRoaXMpIHBhcmVudC4kJGNoaWxkSGVhZCA9IHRoaXMuJCRuZXh0U2libGluZztcbiAgICAgICAgaWYgKHBhcmVudC4kJGNoaWxkVGFpbCA9PSB0aGlzKSBwYXJlbnQuJCRjaGlsZFRhaWwgPSB0aGlzLiQkcHJldlNpYmxpbmc7XG4gICAgICAgIGlmICh0aGlzLiQkcHJldlNpYmxpbmcpIHRoaXMuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nID0gdGhpcy4kJG5leHRTaWJsaW5nO1xuICAgICAgICBpZiAodGhpcy4kJG5leHRTaWJsaW5nKSB0aGlzLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZztcblxuICAgICAgICAvLyBEaXNhYmxlIGxpc3RlbmVycywgd2F0Y2hlcnMgYW5kIGFwcGx5L2RpZ2VzdCBtZXRob2RzXG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSB0aGlzLiRkaWdlc3QgPSB0aGlzLiRhcHBseSA9IHRoaXMuJGV2YWxBc3luYyA9IHRoaXMuJGFwcGx5QXN5bmMgPSBub29wO1xuICAgICAgICB0aGlzLiRvbiA9IHRoaXMuJHdhdGNoID0gdGhpcy4kd2F0Y2hHcm91cCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9vcDsgfTtcbiAgICAgICAgdGhpcy4kJGxpc3RlbmVycyA9IHt9O1xuXG4gICAgICAgIC8vIEFsbCBvZiB0aGUgY29kZSBiZWxvdyBpcyBib2d1cyBjb2RlIHRoYXQgd29ya3MgYXJvdW5kIFY4J3MgbWVtb3J5IGxlYWsgdmlhIG9wdGltaXplZCBjb2RlXG4gICAgICAgIC8vIGFuZCBpbmxpbmUgY2FjaGVzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBzZWU6XG4gICAgICAgIC8vIC0gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIwNzMjYzI2XG4gICAgICAgIC8vIC0gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvNjc5NCNpc3N1ZWNvbW1lbnQtMzg2NDg5MDlcbiAgICAgICAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xMzEzI2lzc3VlY29tbWVudC0xMDM3ODQ1MVxuXG4gICAgICAgIHRoaXMuJHBhcmVudCA9IHRoaXMuJCRuZXh0U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZyA9IHRoaXMuJCRjaGlsZEhlYWQgPVxuICAgICAgICAgICAgdGhpcy4kJGNoaWxkVGFpbCA9IHRoaXMuJHJvb3QgPSB0aGlzLiQkd2F0Y2hlcnMgPSBudWxsO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRldmFsXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRXhlY3V0ZXMgdGhlIGBleHByZXNzaW9uYCBvbiB0aGUgY3VycmVudCBzY29wZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LiBBbnkgZXhjZXB0aW9ucyBpblxuICAgICAgICogdGhlIGV4cHJlc3Npb24gYXJlIHByb3BhZ2F0ZWQgKHVuY2F1Z2h0KS4gVGhpcyBpcyB1c2VmdWwgd2hlbiBldmFsdWF0aW5nIEFuZ3VsYXJcbiAgICAgICAqIGV4cHJlc3Npb25zLlxuICAgICAgICpcbiAgICAgICAqICMgRXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAgICAgdmFyIHNjb3BlID0gbmcuJHJvb3RTY29wZS5TY29wZSgpO1xuICAgICAgICAgICBzY29wZS5hID0gMTtcbiAgICAgICAgICAgc2NvcGUuYiA9IDI7XG5cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLiRldmFsKCdhK2InKSkudG9FcXVhbCgzKTtcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLiRldmFsKGZ1bmN0aW9uKHNjb3BlKXsgcmV0dXJuIHNjb3BlLmEgKyBzY29wZS5iOyB9KSkudG9FcXVhbCgzKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbigpKT19IGV4cHJlc3Npb24gQW4gYW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAgICpcbiAgICAgICAqICAgIC0gYHN0cmluZ2A6IGV4ZWN1dGUgdXNpbmcgdGhlIHJ1bGVzIGFzIGRlZmluZWQgaW4gIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhvYmplY3QpPX0gbG9jYWxzIExvY2FsIHZhcmlhYmxlcyBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW4gc2NvcGUuXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uLlxuICAgICAgICovXG4gICAgICAkZXZhbDogZnVuY3Rpb24oZXhwciwgbG9jYWxzKSB7XG4gICAgICAgIHJldHVybiAkcGFyc2UoZXhwcikodGhpcywgbG9jYWxzKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZXZhbEFzeW5jXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRXhlY3V0ZXMgdGhlIGV4cHJlc3Npb24gb24gdGhlIGN1cnJlbnQgc2NvcGUgYXQgYSBsYXRlciBwb2ludCBpbiB0aW1lLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBgJGV2YWxBc3luY2AgbWFrZXMgbm8gZ3VhcmFudGVlcyBhcyB0byB3aGVuIHRoZSBgZXhwcmVzc2lvbmAgd2lsbCBiZSBleGVjdXRlZCwgb25seVxuICAgICAgICogdGhhdDpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gaXQgd2lsbCBleGVjdXRlIGFmdGVyIHRoZSBmdW5jdGlvbiB0aGF0IHNjaGVkdWxlZCB0aGUgZXZhbHVhdGlvbiAocHJlZmVyYWJseSBiZWZvcmUgRE9NXG4gICAgICAgKiAgICAgcmVuZGVyaW5nKS5cbiAgICAgICAqICAgLSBhdCBsZWFzdCBvbmUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0IGN5Y2xlfSB3aWxsIGJlIHBlcmZvcm1lZCBhZnRlclxuICAgICAgICogICAgIGBleHByZXNzaW9uYCBleGVjdXRpb24uXG4gICAgICAgKlxuICAgICAgICogQW55IGV4Y2VwdGlvbnMgZnJvbSB0aGUgZXhlY3V0aW9uIG9mIHRoZSBleHByZXNzaW9uIGFyZSBmb3J3YXJkZWQgdG8gdGhlXG4gICAgICAgKiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKlxuICAgICAgICogX19Ob3RlOl9fIGlmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBgJGRpZ2VzdGAgY3ljbGUsIGEgbmV3IGAkZGlnZXN0YCBjeWNsZVxuICAgICAgICogd2lsbCBiZSBzY2hlZHVsZWQuIEhvd2V2ZXIsIGl0IGlzIGVuY291cmFnZWQgdG8gYWx3YXlzIGNhbGwgY29kZSB0aGF0IGNoYW5nZXMgdGhlIG1vZGVsXG4gICAgICAgKiBmcm9tIHdpdGhpbiBhbiBgJGFwcGx5YCBjYWxsLiBUaGF0IGluY2x1ZGVzIGNvZGUgZXZhbHVhdGVkIHZpYSBgJGV2YWxBc3luY2AuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwcmVzc2lvbiBBbiBhbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICAgKlxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGN1cnJlbnQgYHNjb3BlYCBwYXJhbWV0ZXIuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsob2JqZWN0KT19IGxvY2FscyBMb2NhbCB2YXJpYWJsZXMgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluIHNjb3BlLlxuICAgICAgICovXG4gICAgICAkZXZhbEFzeW5jOiBmdW5jdGlvbihleHByLCBsb2NhbHMpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlIG91dHNpZGUgb2YgYW4gJGRpZ2VzdCBsb29wIGFuZCB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHdlIGFyZSBzY2hlZHVsaW5nIGFzeW5jXG4gICAgICAgIC8vIHRhc2sgYWxzbyBzY2hlZHVsZSBhc3luYyBhdXRvLWZsdXNoXG4gICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlICYmICFhc3luY1F1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGFzeW5jUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmNRdWV1ZS5wdXNoKHtzY29wZTogdGhpcywgZXhwcmVzc2lvbjogZXhwciwgbG9jYWxzOiBsb2NhbHN9KTtcbiAgICAgIH0sXG5cbiAgICAgICQkcG9zdERpZ2VzdDogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgcG9zdERpZ2VzdFF1ZXVlLnB1c2goZm4pO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRhcHBseVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIGAkYXBwbHkoKWAgaXMgdXNlZCB0byBleGVjdXRlIGFuIGV4cHJlc3Npb24gaW4gYW5ndWxhciBmcm9tIG91dHNpZGUgb2YgdGhlIGFuZ3VsYXJcbiAgICAgICAqIGZyYW1ld29yay4gKEZvciBleGFtcGxlIGZyb20gYnJvd3NlciBET00gZXZlbnRzLCBzZXRUaW1lb3V0LCBYSFIgb3IgdGhpcmQgcGFydHkgbGlicmFyaWVzKS5cbiAgICAgICAqIEJlY2F1c2Ugd2UgYXJlIGNhbGxpbmcgaW50byB0aGUgYW5ndWxhciBmcmFtZXdvcmsgd2UgbmVlZCB0byBwZXJmb3JtIHByb3BlciBzY29wZSBsaWZlXG4gICAgICAgKiBjeWNsZSBvZiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgZXhjZXB0aW9uIGhhbmRsaW5nfSxcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgZXhlY3V0aW5nIHdhdGNoZXN9LlxuICAgICAgICpcbiAgICAgICAqICMjIExpZmUgY3ljbGVcbiAgICAgICAqXG4gICAgICAgKiAjIFBzZXVkby1Db2RlIG9mIGAkYXBwbHkoKWBcbiAgICAgICAqIGBgYGpzXG4gICAgICAgICAgIGZ1bmN0aW9uICRhcHBseShleHByKSB7XG4gICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgIHJldHVybiAkZXZhbChleHByKTtcbiAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgJHJvb3QuJGRpZ2VzdCgpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfVxuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIFNjb3BlJ3MgYCRhcHBseSgpYCBtZXRob2QgdHJhbnNpdGlvbnMgdGhyb3VnaCB0aGUgZm9sbG93aW5nIHN0YWdlczpcbiAgICAgICAqXG4gICAgICAgKiAxLiBUaGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgZXhlY3V0ZWQgdXNpbmcgdGhlXG4gICAgICAgKiAgICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZXZhbCAkZXZhbCgpfSBtZXRob2QuXG4gICAgICAgKiAyLiBBbnkgZXhjZXB0aW9ucyBmcm9tIHRoZSBleGVjdXRpb24gb2YgdGhlIGV4cHJlc3Npb24gYXJlIGZvcndhcmRlZCB0byB0aGVcbiAgICAgICAqICAgIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciAkZXhjZXB0aW9uSGFuZGxlcn0gc2VydmljZS5cbiAgICAgICAqIDMuIFRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2h9IGxpc3RlbmVycyBhcmUgZmlyZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlXG4gICAgICAgKiAgICBleHByZXNzaW9uIHdhcyBleGVjdXRlZCB1c2luZyB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IG1ldGhvZC5cbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwIEFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgdGhlIGV4cHJlc3Npb24uXG4gICAgICAgKi9cbiAgICAgICRhcHBseTogZnVuY3Rpb24oZXhwcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGJlZ2luUGhhc2UoJyRhcHBseScpO1xuICAgICAgICAgIHJldHVybiB0aGlzLiRldmFsKGV4cHIpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgY2xlYXJQaGFzZSgpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGFwcGx5QXN5bmNcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBTY2hlZHVsZSB0aGUgaW52b2NhdGlvbiBvZiAkYXBwbHkgdG8gb2NjdXIgYXQgYSBsYXRlciB0aW1lLiBUaGUgYWN0dWFsIHRpbWUgZGlmZmVyZW5jZVxuICAgICAgICogdmFyaWVzIGFjcm9zcyBicm93c2VycywgYnV0IGlzIHR5cGljYWxseSBhcm91bmQgfjEwIG1pbGxpc2Vjb25kcy5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHVwIG11bHRpcGxlIGV4cHJlc3Npb25zIHdoaWNoIG5lZWQgdG8gYmUgZXZhbHVhdGVkIGluIHRoZSBzYW1lXG4gICAgICAgKiBkaWdlc3QuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwIEFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxuICAgICAgICovXG4gICAgICAkYXBwbHlBc3luYzogZnVuY3Rpb24oZXhwcikge1xuICAgICAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgICAgICBleHByICYmIGFwcGx5QXN5bmNRdWV1ZS5wdXNoKCRhcHBseUFzeW5jRXhwcmVzc2lvbik7XG4gICAgICAgIHNjaGVkdWxlQXBwbHlBc3luYygpO1xuXG4gICAgICAgIGZ1bmN0aW9uICRhcHBseUFzeW5jRXhwcmVzc2lvbigpIHtcbiAgICAgICAgICBzY29wZS4kZXZhbChleHByKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRvblxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIExpc3RlbnMgb24gZXZlbnRzIG9mIGEgZ2l2ZW4gdHlwZS4gU2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRlbWl0ICRlbWl0fSBmb3JcbiAgICAgICAqIGRpc2N1c3Npb24gb2YgZXZlbnQgbGlmZSBjeWNsZS5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgZXZlbnQgbGlzdGVuZXIgZnVuY3Rpb24gZm9ybWF0IGlzOiBgZnVuY3Rpb24oZXZlbnQsIGFyZ3MuLi4pYC4gVGhlIGBldmVudGAgb2JqZWN0XG4gICAgICAgKiBwYXNzZWQgaW50byB0aGUgbGlzdGVuZXIgaGFzIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gYHRhcmdldFNjb3BlYCAtIGB7U2NvcGV9YDogdGhlIHNjb3BlIG9uIHdoaWNoIHRoZSBldmVudCB3YXMgYCRlbWl0YC1lZCBvclxuICAgICAgICogICAgIGAkYnJvYWRjYXN0YC1lZC5cbiAgICAgICAqICAgLSBgY3VycmVudFNjb3BlYCAtIGB7U2NvcGV9YDogdGhlIHNjb3BlIHRoYXQgaXMgY3VycmVudGx5IGhhbmRsaW5nIHRoZSBldmVudC4gT25jZSB0aGVcbiAgICAgICAqICAgICBldmVudCBwcm9wYWdhdGVzIHRocm91Z2ggdGhlIHNjb3BlIGhpZXJhcmNoeSwgdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gbnVsbC5cbiAgICAgICAqICAgLSBgbmFtZWAgLSBge3N0cmluZ31gOiBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgICAqICAgLSBgc3RvcFByb3BhZ2F0aW9uYCAtIGB7ZnVuY3Rpb249fWA6IGNhbGxpbmcgYHN0b3BQcm9wYWdhdGlvbmAgZnVuY3Rpb24gd2lsbCBjYW5jZWxcbiAgICAgICAqICAgICBmdXJ0aGVyIGV2ZW50IHByb3BhZ2F0aW9uIChhdmFpbGFibGUgb25seSBmb3IgZXZlbnRzIHRoYXQgd2VyZSBgJGVtaXRgLWVkKS5cbiAgICAgICAqICAgLSBgcHJldmVudERlZmF1bHRgIC0gYHtmdW5jdGlvbn1gOiBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgc2V0cyBgZGVmYXVsdFByZXZlbnRlZGAgZmxhZ1xuICAgICAgICogICAgIHRvIHRydWUuXG4gICAgICAgKiAgIC0gYGRlZmF1bHRQcmV2ZW50ZWRgIC0gYHtib29sZWFufWA6IHRydWUgaWYgYHByZXZlbnREZWZhdWx0YCB3YXMgY2FsbGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEV2ZW50IG5hbWUgdG8gbGlzdGVuIG9uLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudCwgLi4uYXJncyl9IGxpc3RlbmVyIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgaXMgZW1pdHRlZC5cbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgKi9cbiAgICAgICRvbjogZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIG5hbWVkTGlzdGVuZXJzID0gdGhpcy4kJGxpc3RlbmVyc1tuYW1lXTtcbiAgICAgICAgaWYgKCFuYW1lZExpc3RlbmVycykge1xuICAgICAgICAgIHRoaXMuJCRsaXN0ZW5lcnNbbmFtZV0gPSBuYW1lZExpc3RlbmVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG5hbWVkTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcztcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGlmICghY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0pIHtcbiAgICAgICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0rKztcbiAgICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgaW5kZXhPZkxpc3RlbmVyID0gbmFtZWRMaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgICAgaWYgKGluZGV4T2ZMaXN0ZW5lciAhPT0gLTEpIHtcbiAgICAgICAgICAgIG5hbWVkTGlzdGVuZXJzW2luZGV4T2ZMaXN0ZW5lcl0gPSBudWxsO1xuICAgICAgICAgICAgZGVjcmVtZW50TGlzdGVuZXJDb3VudChzZWxmLCAxLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZW1pdFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYG5hbWVgIHVwd2FyZHMgdGhyb3VnaCB0aGUgc2NvcGUgaGllcmFyY2h5IG5vdGlmeWluZyB0aGVcbiAgICAgICAqIHJlZ2lzdGVyZWQge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBsaXN0ZW5lcnMuXG4gICAgICAgKlxuICAgICAgICogVGhlIGV2ZW50IGxpZmUgY3ljbGUgc3RhcnRzIGF0IHRoZSBzY29wZSBvbiB3aGljaCBgJGVtaXRgIHdhcyBjYWxsZWQuIEFsbFxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gbGlzdGVuaW5nIGZvciBgbmFtZWAgZXZlbnQgb24gdGhpcyBzY29wZSBnZXRcbiAgICAgICAqIG5vdGlmaWVkLiBBZnRlcndhcmRzLCB0aGUgZXZlbnQgdHJhdmVyc2VzIHVwd2FyZHMgdG93YXJkIHRoZSByb290IHNjb3BlIGFuZCBjYWxscyBhbGxcbiAgICAgICAqIHJlZ2lzdGVyZWQgbGlzdGVuZXJzIGFsb25nIHRoZSB3YXkuIFRoZSBldmVudCB3aWxsIHN0b3AgcHJvcGFnYXRpbmcgaWYgb25lIG9mIHRoZSBsaXN0ZW5lcnNcbiAgICAgICAqIGNhbmNlbHMgaXQuXG4gICAgICAgKlxuICAgICAgICogQW55IGV4Y2VwdGlvbiBlbWl0dGVkIGZyb20gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IHdpbGwgYmUgcGFzc2VkXG4gICAgICAgKiBvbnRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRXZlbnQgbmFtZSB0byBlbWl0LlxuICAgICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIG9uZSBvciBtb3JlIGFyZ3VtZW50cyB3aGljaCB3aWxsIGJlIHBhc3NlZCBvbnRvIHRoZSBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEV2ZW50IG9iamVjdCAoc2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0pLlxuICAgICAgICovXG4gICAgICAkZW1pdDogZnVuY3Rpb24obmFtZSwgYXJncykge1xuICAgICAgICB2YXIgZW1wdHkgPSBbXSxcbiAgICAgICAgICAgIG5hbWVkTGlzdGVuZXJzLFxuICAgICAgICAgICAgc2NvcGUgPSB0aGlzLFxuICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgdGFyZ2V0U2NvcGU6IHNjb3BlLFxuICAgICAgICAgICAgICBzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge3N0b3BQcm9wYWdhdGlvbiA9IHRydWU7fSxcbiAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpc3RlbmVyQXJncyA9IGNvbmNhdChbZXZlbnRdLCBhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgaSwgbGVuZ3RoO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBuYW1lZExpc3RlbmVycyA9IHNjb3BlLiQkbGlzdGVuZXJzW25hbWVdIHx8IGVtcHR5O1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IHNjb3BlO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG5hbWVkTGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIC8vIGlmIGxpc3RlbmVycyB3ZXJlIGRlcmVnaXN0ZXJlZCwgZGVmcmFnbWVudCB0aGUgYXJyYXlcbiAgICAgICAgICAgIGlmICghbmFtZWRMaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgIGxlbmd0aC0tO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vYWxsb3cgYWxsIGxpc3RlbmVycyBhdHRhY2hlZCB0byB0aGUgY3VycmVudCBzY29wZSB0byBydW5cbiAgICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgbGlzdGVuZXJBcmdzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vaWYgYW55IGxpc3RlbmVyIG9uIHRoZSBjdXJyZW50IHNjb3BlIHN0b3BzIHByb3BhZ2F0aW9uLCBwcmV2ZW50IGJ1YmJsaW5nXG4gICAgICAgICAgaWYgKHN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBldmVudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy90cmF2ZXJzZSB1cHdhcmRzXG4gICAgICAgICAgc2NvcGUgPSBzY29wZS4kcGFyZW50O1xuICAgICAgICB9IHdoaWxlIChzY29wZSk7XG5cbiAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gbnVsbDtcblxuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkYnJvYWRjYXN0XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRGlzcGF0Y2hlcyBhbiBldmVudCBgbmFtZWAgZG93bndhcmRzIHRvIGFsbCBjaGlsZCBzY29wZXMgKGFuZCB0aGVpciBjaGlsZHJlbikgbm90aWZ5aW5nIHRoZVxuICAgICAgICogcmVnaXN0ZXJlZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259IGxpc3RlbmVycy5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgZXZlbnQgbGlmZSBjeWNsZSBzdGFydHMgYXQgdGhlIHNjb3BlIG9uIHdoaWNoIGAkYnJvYWRjYXN0YCB3YXMgY2FsbGVkLiBBbGxcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IGxpc3RlbmluZyBmb3IgYG5hbWVgIGV2ZW50IG9uIHRoaXMgc2NvcGUgZ2V0XG4gICAgICAgKiBub3RpZmllZC4gQWZ0ZXJ3YXJkcywgdGhlIGV2ZW50IHByb3BhZ2F0ZXMgdG8gYWxsIGRpcmVjdCBhbmQgaW5kaXJlY3Qgc2NvcGVzIG9mIHRoZSBjdXJyZW50XG4gICAgICAgKiBzY29wZSBhbmQgY2FsbHMgYWxsIHJlZ2lzdGVyZWQgbGlzdGVuZXJzIGFsb25nIHRoZSB3YXkuIFRoZSBldmVudCBjYW5ub3QgYmUgY2FuY2VsZWQuXG4gICAgICAgKlxuICAgICAgICogQW55IGV4Y2VwdGlvbiBlbWl0dGVkIGZyb20gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IHdpbGwgYmUgcGFzc2VkXG4gICAgICAgKiBvbnRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRXZlbnQgbmFtZSB0byBicm9hZGNhc3QuXG4gICAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgT3B0aW9uYWwgb25lIG9yIG1vcmUgYXJndW1lbnRzIHdoaWNoIHdpbGwgYmUgcGFzc2VkIG9udG8gdGhlIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgICAqIEByZXR1cm4ge09iamVjdH0gRXZlbnQgb2JqZWN0LCBzZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufVxuICAgICAgICovXG4gICAgICAkYnJvYWRjYXN0OiBmdW5jdGlvbihuYW1lLCBhcmdzKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLFxuICAgICAgICAgICAgY3VycmVudCA9IHRhcmdldCxcbiAgICAgICAgICAgIG5leHQgPSB0YXJnZXQsXG4gICAgICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgdGFyZ2V0U2NvcGU6IHRhcmdldCxcbiAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICBpZiAoIXRhcmdldC4kJGxpc3RlbmVyQ291bnRbbmFtZV0pIHJldHVybiBldmVudDtcblxuICAgICAgICB2YXIgbGlzdGVuZXJBcmdzID0gY29uY2F0KFtldmVudF0sIGFyZ3VtZW50cywgMSksXG4gICAgICAgICAgICBsaXN0ZW5lcnMsIGksIGxlbmd0aDtcblxuICAgICAgICAvL2Rvd24gd2hpbGUgeW91IGNhbiwgdGhlbiB1cCBhbmQgbmV4dCBzaWJsaW5nIG9yIHVwIGFuZCBuZXh0IHNpYmxpbmcgdW50aWwgYmFjayBhdCByb290XG4gICAgICAgIHdoaWxlICgoY3VycmVudCA9IG5leHQpKSB7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gY3VycmVudDtcbiAgICAgICAgICBsaXN0ZW5lcnMgPSBjdXJyZW50LiQkbGlzdGVuZXJzW25hbWVdIHx8IFtdO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gaWYgbGlzdGVuZXJzIHdlcmUgZGVyZWdpc3RlcmVkLCBkZWZyYWdtZW50IHRoZSBhcnJheVxuICAgICAgICAgICAgaWYgKCFsaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShudWxsLCBsaXN0ZW5lckFyZ3MpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJbnNhbml0eSBXYXJuaW5nOiBzY29wZSBkZXB0aC1maXJzdCB0cmF2ZXJzYWxcbiAgICAgICAgICAvLyB5ZXMsIHRoaXMgY29kZSBpcyBhIGJpdCBjcmF6eSwgYnV0IGl0IHdvcmtzIGFuZCB3ZSBoYXZlIHRlc3RzIHRvIHByb3ZlIGl0IVxuICAgICAgICAgIC8vIHRoaXMgcGllY2Ugc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSB0cmF2ZXJzYWwgaW4gJGRpZ2VzdFxuICAgICAgICAgIC8vICh0aG91Z2ggaXQgZGlmZmVycyBkdWUgdG8gaGF2aW5nIHRoZSBleHRyYSBjaGVjayBmb3IgJCRsaXN0ZW5lckNvdW50KVxuICAgICAgICAgIGlmICghKG5leHQgPSAoKGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdICYmIGN1cnJlbnQuJCRjaGlsZEhlYWQpIHx8XG4gICAgICAgICAgICAgIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgY3VycmVudC4kJG5leHRTaWJsaW5nKSkpKSB7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCAhPT0gdGFyZ2V0ICYmICEobmV4dCA9IGN1cnJlbnQuJCRuZXh0U2libGluZykpIHtcbiAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuJHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC5jdXJyZW50U2NvcGUgPSBudWxsO1xuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciAkcm9vdFNjb3BlID0gbmV3IFNjb3BlKCk7XG5cbiAgICAvL1RoZSBpbnRlcm5hbCBxdWV1ZXMuIEV4cG9zZSB0aGVtIG9uIHRoZSAkcm9vdFNjb3BlIGZvciBkZWJ1Z2dpbmcvdGVzdGluZyBwdXJwb3Nlcy5cbiAgICB2YXIgYXN5bmNRdWV1ZSA9ICRyb290U2NvcGUuJCRhc3luY1F1ZXVlID0gW107XG4gICAgdmFyIHBvc3REaWdlc3RRdWV1ZSA9ICRyb290U2NvcGUuJCRwb3N0RGlnZXN0UXVldWUgPSBbXTtcbiAgICB2YXIgYXBwbHlBc3luY1F1ZXVlID0gJHJvb3RTY29wZS4kJGFwcGx5QXN5bmNRdWV1ZSA9IFtdO1xuXG4gICAgcmV0dXJuICRyb290U2NvcGU7XG5cblxuICAgIGZ1bmN0aW9uIGJlZ2luUGhhc2UocGhhc2UpIHtcbiAgICAgIGlmICgkcm9vdFNjb3BlLiQkcGhhc2UpIHtcbiAgICAgICAgdGhyb3cgJHJvb3RTY29wZU1pbkVycignaW5wcm9nJywgJ3swfSBhbHJlYWR5IGluIHByb2dyZXNzJywgJHJvb3RTY29wZS4kJHBoYXNlKTtcbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kJHBoYXNlID0gcGhhc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJQaGFzZSgpIHtcbiAgICAgICRyb290U2NvcGUuJCRwaGFzZSA9IG51bGw7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBkZWNyZW1lbnRMaXN0ZW5lckNvdW50KGN1cnJlbnQsIGNvdW50LCBuYW1lKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdIC09IGNvdW50O1xuXG4gICAgICAgIGlmIChjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSA9PT0gMCkge1xuICAgICAgICAgIGRlbGV0ZSBjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB1c2VkIGFzIGFuIGluaXRpYWwgdmFsdWUgZm9yIHdhdGNoZXJzLlxuICAgICAqIGJlY2F1c2UgaXQncyB1bmlxdWUgd2UgY2FuIGVhc2lseSB0ZWxsIGl0IGFwYXJ0IGZyb20gb3RoZXIgdmFsdWVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdFdhdGNoVmFsKCkge31cblxuICAgIGZ1bmN0aW9uIGZsdXNoQXBwbHlBc3luYygpIHtcbiAgICAgIHdoaWxlIChhcHBseUFzeW5jUXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXBwbHlBc3luY1F1ZXVlLnNoaWZ0KCkoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhcHBseUFzeW5jSWQgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlQXBwbHlBc3luYygpIHtcbiAgICAgIGlmIChhcHBseUFzeW5jSWQgPT09IG51bGwpIHtcbiAgICAgICAgYXBwbHlBc3luY0lkID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZmx1c2hBcHBseUFzeW5jKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XTtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFByaXZhdGUgc2VydmljZSB0byBzYW5pdGl6ZSB1cmlzIGZvciBsaW5rcyBhbmQgaW1hZ2VzLiBVc2VkIGJ5ICRjb21waWxlIGFuZCAkc2FuaXRpemUuXG4gKi9cbmZ1bmN0aW9uICQkU2FuaXRpemVVcmlQcm92aWRlcigpIHtcbiAgdmFyIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gL15cXHMqKGh0dHBzP3xmdHB8bWFpbHRvfHRlbHxmaWxlKTovLFxuICAgIGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IC9eXFxzKigoaHR0cHM/fGZ0cHxmaWxlfGJsb2IpOnxkYXRhOmltYWdlXFwvKS87XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXG4gICAqIHVybHMgZHVyaW5nIGFbaHJlZl0gc2FuaXRpemF0aW9uLlxuICAgKlxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBodG1sIGxpbmtzLlxuICAgKlxuICAgKiBBbnkgdXJsIGFib3V0IHRvIGJlIGFzc2lnbmVkIHRvIGFbaHJlZl0gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xuICAgKiBhbiBhYnNvbHV0ZSB1cmwuIEFmdGVyd2FyZHMsIHRoZSB1cmwgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXG4gICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSWYgYSBtYXRjaCBpcyBmb3VuZCwgdGhlIG9yaWdpbmFsIHVybCBpcyB3cml0dGVuIGludG8gdGhlIGRvbS4gT3RoZXJ3aXNlLFxuICAgKiB0aGUgYWJzb2x1dGUgdXJsIGlzIHByZWZpeGVkIHdpdGggYCd1bnNhZmU6J2Agc3RyaW5nIGFuZCBvbmx5IHRoZW4gaXMgaXQgd3JpdHRlbiBpbnRvIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XG4gICAgICBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IHJlZ2V4cDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gIH07XG5cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcbiAgICogdXJscyBkdXJpbmcgaW1nW3NyY10gc2FuaXRpemF0aW9uLlxuICAgKlxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBodG1sIGxpbmtzLlxuICAgKlxuICAgKiBBbnkgdXJsIGFib3V0IHRvIGJlIGFzc2lnbmVkIHRvIGltZ1tzcmNdIHZpYSBkYXRhLWJpbmRpbmcgaXMgZmlyc3Qgbm9ybWFsaXplZCBhbmQgdHVybmVkIGludG9cbiAgICogYW4gYWJzb2x1dGUgdXJsLiBBZnRlcndhcmRzLCB0aGUgdXJsIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgYGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdGBcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXG4gICAqIHRoZSBhYnNvbHV0ZSB1cmwgaXMgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCBzdHJpbmcgYW5kIG9ubHkgdGhlbiBpcyBpdCB3cml0dGVuIGludG8gdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxuICAgKiBAcmV0dXJucyB7UmVnRXhwfG5nLiRjb21waWxlUHJvdmlkZXJ9IEN1cnJlbnQgUmVnRXhwIGlmIGNhbGxlZCB3aXRob3V0IHZhbHVlIG9yIHNlbGYgZm9yXG4gICAqICAgIGNoYWluaW5nIG90aGVyd2lzZS5cbiAgICovXG4gIHRoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XG4gICAgICBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSByZWdleHA7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdDtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gc2FuaXRpemVVcmkodXJpLCBpc0ltYWdlKSB7XG4gICAgICB2YXIgcmVnZXggPSBpc0ltYWdlID8gaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0IDogYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gICAgICB2YXIgbm9ybWFsaXplZFZhbDtcbiAgICAgIG5vcm1hbGl6ZWRWYWwgPSB1cmxSZXNvbHZlKHVyaSkuaHJlZjtcbiAgICAgIGlmIChub3JtYWxpemVkVmFsICE9PSAnJyAmJiAhbm9ybWFsaXplZFZhbC5tYXRjaChyZWdleCkpIHtcbiAgICAgICAgcmV0dXJuICd1bnNhZmU6JyArIG5vcm1hbGl6ZWRWYWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXJpO1xuICAgIH07XG4gIH07XG59XG5cbnZhciAkc2NlTWluRXJyID0gbWluRXJyKCckc2NlJyk7XG5cbnZhciBTQ0VfQ09OVEVYVFMgPSB7XG4gIEhUTUw6ICdodG1sJyxcbiAgQ1NTOiAnY3NzJyxcbiAgVVJMOiAndXJsJyxcbiAgLy8gUkVTT1VSQ0VfVVJMIGlzIGEgc3VidHlwZSBvZiBVUkwgdXNlZCBpbiBjb250ZXh0cyB3aGVyZSBhIHByaXZpbGVnZWQgcmVzb3VyY2UgaXMgc291cmNlZCBmcm9tIGFcbiAgLy8gdXJsLiAgKGUuZy4gbmctaW5jbHVkZSwgc2NyaXB0IHNyYywgdGVtcGxhdGVVcmwpXG4gIFJFU09VUkNFX1VSTDogJ3Jlc291cmNlVXJsJyxcbiAgSlM6ICdqcydcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9sbG93LlxuXG5mdW5jdGlvbiBhZGp1c3RNYXRjaGVyKG1hdGNoZXIpIHtcbiAgaWYgKG1hdGNoZXIgPT09ICdzZWxmJykge1xuICAgIHJldHVybiBtYXRjaGVyO1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKG1hdGNoZXIpKSB7XG4gICAgLy8gU3RyaW5ncyBtYXRjaCBleGFjdGx5IGV4Y2VwdCBmb3IgMiB3aWxkY2FyZHMgLSAnKicgYW5kICcqKicuXG4gICAgLy8gJyonIG1hdGNoZXMgYW55IGNoYXJhY3RlciBleGNlcHQgdGhvc2UgZnJvbSB0aGUgc2V0ICc6Ly4/JicuXG4gICAgLy8gJyoqJyBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgKGxpa2UgLiogaW4gYSBSZWdFeHApLlxuICAgIC8vIE1vcmUgdGhhbiAyIConcyByYWlzZXMgYW4gZXJyb3IgYXMgaXQncyBpbGwgZGVmaW5lZC5cbiAgICBpZiAobWF0Y2hlci5pbmRleE9mKCcqKionKSA+IC0xKSB7XG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCdpd2NhcmQnLFxuICAgICAgICAgICdJbGxlZ2FsIHNlcXVlbmNlICoqKiBpbiBzdHJpbmcgbWF0Y2hlci4gIFN0cmluZzogezB9JywgbWF0Y2hlcik7XG4gICAgfVxuICAgIG1hdGNoZXIgPSBlc2NhcGVGb3JSZWdleHAobWF0Y2hlcikuXG4gICAgICAgICAgICAgICAgICByZXBsYWNlKCdcXFxcKlxcXFwqJywgJy4qJykuXG4gICAgICAgICAgICAgICAgICByZXBsYWNlKCdcXFxcKicsICdbXjovLj8mO10qJyk7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgbWF0Y2hlciArICckJyk7XG4gIH0gZWxzZSBpZiAoaXNSZWdFeHAobWF0Y2hlcikpIHtcbiAgICAvLyBUaGUgb25seSBvdGhlciB0eXBlIG9mIG1hdGNoZXIgYWxsb3dlZCBpcyBhIFJlZ2V4cC5cbiAgICAvLyBNYXRjaCBlbnRpcmUgVVJMIC8gZGlzYWxsb3cgcGFydGlhbCBtYXRjaGVzLlxuICAgIC8vIEZsYWdzIGFyZSByZXNldCAoaS5lLiBubyBnbG9iYWwsIGlnbm9yZUNhc2Ugb3IgbXVsdGlsaW5lKVxuICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIG1hdGNoZXIuc291cmNlICsgJyQnKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyAkc2NlTWluRXJyKCdpbWF0Y2hlcicsXG4gICAgICAgICdNYXRjaGVycyBtYXkgb25seSBiZSBcInNlbGZcIiwgc3RyaW5nIHBhdHRlcm5zIG9yIFJlZ0V4cCBvYmplY3RzJyk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBhZGp1c3RNYXRjaGVycyhtYXRjaGVycykge1xuICB2YXIgYWRqdXN0ZWRNYXRjaGVycyA9IFtdO1xuICBpZiAoaXNEZWZpbmVkKG1hdGNoZXJzKSkge1xuICAgIGZvckVhY2gobWF0Y2hlcnMsIGZ1bmN0aW9uKG1hdGNoZXIpIHtcbiAgICAgIGFkanVzdGVkTWF0Y2hlcnMucHVzaChhZGp1c3RNYXRjaGVyKG1hdGNoZXIpKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gYWRqdXN0ZWRNYXRjaGVycztcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkc2NlRGVsZWdhdGVcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogYCRzY2VEZWxlZ2F0ZWAgaXMgYSBzZXJ2aWNlIHRoYXQgaXMgdXNlZCBieSB0aGUgYCRzY2VgIHNlcnZpY2UgdG8gcHJvdmlkZSB7QGxpbmsgbmcuJHNjZSBTdHJpY3RcbiAqIENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSl9IHNlcnZpY2VzIHRvIEFuZ3VsYXJKUy5cbiAqXG4gKiBUeXBpY2FsbHksIHlvdSB3b3VsZCBjb25maWd1cmUgb3Igb3ZlcnJpZGUgdGhlIHtAbGluayBuZy4kc2NlRGVsZWdhdGUgJHNjZURlbGVnYXRlfSBpbnN0ZWFkIG9mXG4gKiB0aGUgYCRzY2VgIHNlcnZpY2UgdG8gY3VzdG9taXplIHRoZSB3YXkgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgd29ya3MgaW4gQW5ndWxhckpTLiAgVGhpcyBpc1xuICogYmVjYXVzZSwgd2hpbGUgdGhlIGAkc2NlYCBwcm92aWRlcyBudW1lcm91cyBzaG9ydGhhbmQgbWV0aG9kcywgZXRjLiwgeW91IHJlYWxseSBvbmx5IG5lZWQgdG9cbiAqIG92ZXJyaWRlIDMgY29yZSBmdW5jdGlvbnMgKGB0cnVzdEFzYCwgYGdldFRydXN0ZWRgIGFuZCBgdmFsdWVPZmApIHRvIHJlcGxhY2UgdGhlIHdheSB0aGluZ3NcbiAqIHdvcmsgYmVjYXVzZSBgJHNjZWAgZGVsZWdhdGVzIHRvIGAkc2NlRGVsZWdhdGVgIGZvciB0aGVzZSBvcGVyYXRpb25zLlxuICpcbiAqIFJlZmVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciAkc2NlRGVsZWdhdGVQcm92aWRlcn0gdG8gY29uZmlndXJlIHRoaXMgc2VydmljZS5cbiAqXG4gKiBUaGUgZGVmYXVsdCBpbnN0YW5jZSBvZiBgJHNjZURlbGVnYXRlYCBzaG91bGQgd29yayBvdXQgb2YgdGhlIGJveCB3aXRoIGxpdHRsZSBwYWluLiAgV2hpbGUgeW91XG4gKiBjYW4gb3ZlcnJpZGUgaXQgY29tcGxldGVseSB0byBjaGFuZ2UgdGhlIGJlaGF2aW9yIG9mIGAkc2NlYCwgdGhlIGNvbW1vbiBjYXNlIHdvdWxkXG4gKiBpbnZvbHZlIGNvbmZpZ3VyaW5nIHRoZSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIgJHNjZURlbGVnYXRlUHJvdmlkZXJ9IGluc3RlYWQgYnkgc2V0dGluZ1xuICogeW91ciBvd24gd2hpdGVsaXN0cyBhbmQgYmxhY2tsaXN0cyBmb3IgdHJ1c3RpbmcgVVJMcyB1c2VkIGZvciBsb2FkaW5nIEFuZ3VsYXJKUyByZXNvdXJjZXMgc3VjaCBhc1xuICogdGVtcGxhdGVzLiAgUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0XG4gKiAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdH0gYW5kIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgYCRzY2VEZWxlZ2F0ZVByb3ZpZGVyYCBwcm92aWRlciBhbGxvd3MgZGV2ZWxvcGVycyB0byBjb25maWd1cmUgdGhlIHtAbGluayBuZy4kc2NlRGVsZWdhdGVcbiAqICRzY2VEZWxlZ2F0ZX0gc2VydmljZS4gIFRoaXMgYWxsb3dzIG9uZSB0byBnZXQvc2V0IHRoZSB3aGl0ZWxpc3RzIGFuZCBibGFja2xpc3RzIHVzZWQgdG8gZW5zdXJlXG4gKiB0aGF0IHRoZSBVUkxzIHVzZWQgZm9yIHNvdXJjaW5nIEFuZ3VsYXIgdGVtcGxhdGVzIGFyZSBzYWZlLiAgUmVmZXIge0BsaW5rXG4gKiBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdH0gYW5kXG4gKiB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9XG4gKlxuICogRm9yIHRoZSBnZW5lcmFsIGRldGFpbHMgYWJvdXQgdGhpcyBzZXJ2aWNlIGluIEFuZ3VsYXIsIHJlYWQgdGhlIG1haW4gcGFnZSBmb3Ige0BsaW5rIG5nLiRzY2VcbiAqIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqXG4gKiAqKkV4YW1wbGUqKjogIENvbnNpZGVyIHRoZSBmb2xsb3dpbmcgY2FzZS4gPGEgbmFtZT1cImV4YW1wbGVcIj48L2E+XG4gKlxuICogLSB5b3VyIGFwcCBpcyBob3N0ZWQgYXQgdXJsIGBodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vYFxuICogLSBidXQgc29tZSBvZiB5b3VyIHRlbXBsYXRlcyBhcmUgaG9zdGVkIG9uIG90aGVyIGRvbWFpbnMgeW91IGNvbnRyb2wgc3VjaCBhc1xuICogICBgaHR0cDovL3NydjAxLmFzc2V0cy5leGFtcGxlLmNvbS9gLMKgIGBodHRwOi8vc3J2MDIuYXNzZXRzLmV4YW1wbGUuY29tL2AsIGV0Yy5cbiAqIC0gYW5kIHlvdSBoYXZlIGFuIG9wZW4gcmVkaXJlY3QgYXQgYGh0dHA6Ly9teWFwcC5leGFtcGxlLmNvbS9jbGlja1RocnU/Li4uYC5cbiAqXG4gKiBIZXJlIGlzIHdoYXQgYSBzZWN1cmUgY29uZmlndXJhdGlvbiBmb3IgdGhpcyBzY2VuYXJpbyBtaWdodCBsb29rIGxpa2U6XG4gKlxuICogYGBgXG4gKiAgYW5ndWxhci5tb2R1bGUoJ215QXBwJywgW10pLmNvbmZpZyhmdW5jdGlvbigkc2NlRGVsZWdhdGVQcm92aWRlcikge1xuICogICAgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxXaGl0ZWxpc3QoW1xuICogICAgICAvLyBBbGxvdyBzYW1lIG9yaWdpbiByZXNvdXJjZSBsb2Fkcy5cbiAqICAgICAgJ3NlbGYnLFxuICogICAgICAvLyBBbGxvdyBsb2FkaW5nIGZyb20gb3VyIGFzc2V0cyBkb21haW4uICBOb3RpY2UgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiAqIGFuZCAqKi5cbiAqICAgICAgJ2h0dHA6Ly9zcnYqLmFzc2V0cy5leGFtcGxlLmNvbS8qKidcbiAqICAgIF0pO1xuICpcbiAqICAgIC8vIFRoZSBibGFja2xpc3Qgb3ZlcnJpZGVzIHRoZSB3aGl0ZWxpc3Qgc28gdGhlIG9wZW4gcmVkaXJlY3QgaGVyZSBpcyBibG9ja2VkLlxuICogICAgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3QoW1xuICogICAgICAnaHR0cDovL215YXBwLmV4YW1wbGUuY29tL2NsaWNrVGhydSoqJ1xuICogICAgXSk7XG4gKiAgfSk7XG4gKiBgYGBcbiAqL1xuXG5mdW5jdGlvbiAkU2NlRGVsZWdhdGVQcm92aWRlcigpIHtcbiAgdGhpcy5TQ0VfQ09OVEVYVFMgPSBTQ0VfQ09OVEVYVFM7XG5cbiAgLy8gUmVzb3VyY2UgVVJMcyBjYW4gYWxzbyBiZSB0cnVzdGVkIGJ5IHBvbGljeS5cbiAgdmFyIHJlc291cmNlVXJsV2hpdGVsaXN0ID0gWydzZWxmJ10sXG4gICAgICByZXNvdXJjZVVybEJsYWNrbGlzdCA9IFtdO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk9fSB3aGl0ZWxpc3QgV2hlbiBwcm92aWRlZCwgcmVwbGFjZXMgdGhlIHJlc291cmNlVXJsV2hpdGVsaXN0IHdpdGggdGhlIHZhbHVlXG4gICAqICAgICBwcm92aWRlZC4gIFRoaXMgbXVzdCBiZSBhbiBhcnJheSBvciBudWxsLiAgQSBzbmFwc2hvdCBvZiB0aGlzIGFycmF5IGlzIHVzZWQgc28gZnVydGhlclxuICAgKiAgICAgY2hhbmdlcyB0byB0aGUgYXJyYXkgYXJlIGlnbm9yZWQuXG4gICAqXG4gICAqICAgICBGb2xsb3cge0BsaW5rIG5nLiRzY2UjcmVzb3VyY2VVcmxQYXR0ZXJuSXRlbSB0aGlzIGxpbmt9IGZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpdGVtc1xuICAgKiAgICAgYWxsb3dlZCBpbiB0aGlzIGFycmF5LlxuICAgKlxuICAgKiAgICAgTm90ZTogKiphbiBlbXB0eSB3aGl0ZWxpc3QgYXJyYXkgd2lsbCBibG9jayBhbGwgVVJMcyoqIVxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gdGhlIGN1cnJlbnRseSBzZXQgd2hpdGVsaXN0IGFycmF5LlxuICAgKlxuICAgKiBUaGUgKipkZWZhdWx0IHZhbHVlKiogd2hlbiBubyB3aGl0ZWxpc3QgaGFzIGJlZW4gZXhwbGljaXRseSBzZXQgaXMgYFsnc2VsZiddYCBhbGxvd2luZyBvbmx5XG4gICAqIHNhbWUgb3JpZ2luIHJlc291cmNlIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cy9HZXRzIHRoZSB3aGl0ZWxpc3Qgb2YgdHJ1c3RlZCByZXNvdXJjZSBVUkxzLlxuICAgKi9cbiAgdGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJlc291cmNlVXJsV2hpdGVsaXN0ID0gYWRqdXN0TWF0Y2hlcnModmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb3VyY2VVcmxXaGl0ZWxpc3Q7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3RcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheT19IGJsYWNrbGlzdCBXaGVuIHByb3ZpZGVkLCByZXBsYWNlcyB0aGUgcmVzb3VyY2VVcmxCbGFja2xpc3Qgd2l0aCB0aGUgdmFsdWVcbiAgICogICAgIHByb3ZpZGVkLiAgVGhpcyBtdXN0IGJlIGFuIGFycmF5IG9yIG51bGwuICBBIHNuYXBzaG90IG9mIHRoaXMgYXJyYXkgaXMgdXNlZCBzbyBmdXJ0aGVyXG4gICAqICAgICBjaGFuZ2VzIHRvIHRoZSBhcnJheSBhcmUgaWdub3JlZC5cbiAgICpcbiAgICogICAgIEZvbGxvdyB7QGxpbmsgbmcuJHNjZSNyZXNvdXJjZVVybFBhdHRlcm5JdGVtIHRoaXMgbGlua30gZm9yIGEgZGVzY3JpcHRpb24gb2YgdGhlIGl0ZW1zXG4gICAqICAgICBhbGxvd2VkIGluIHRoaXMgYXJyYXkuXG4gICAqXG4gICAqICAgICBUaGUgdHlwaWNhbCB1c2FnZSBmb3IgdGhlIGJsYWNrbGlzdCBpcyB0byAqKmJsb2NrXG4gICAqICAgICBbb3BlbiByZWRpcmVjdHNdKGh0dHA6Ly9jd2UubWl0cmUub3JnL2RhdGEvZGVmaW5pdGlvbnMvNjAxLmh0bWwpKiogc2VydmVkIGJ5IHlvdXIgZG9tYWluIGFzXG4gICAqICAgICB0aGVzZSB3b3VsZCBvdGhlcndpc2UgYmUgdHJ1c3RlZCBidXQgYWN0dWFsbHkgcmV0dXJuIGNvbnRlbnQgZnJvbSB0aGUgcmVkaXJlY3RlZCBkb21haW4uXG4gICAqXG4gICAqICAgICBGaW5hbGx5LCAqKnRoZSBibGFja2xpc3Qgb3ZlcnJpZGVzIHRoZSB3aGl0ZWxpc3QqKiBhbmQgaGFzIHRoZSBmaW5hbCBzYXkuXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5fSB0aGUgY3VycmVudGx5IHNldCBibGFja2xpc3QgYXJyYXkuXG4gICAqXG4gICAqIFRoZSAqKmRlZmF1bHQgdmFsdWUqKiB3aGVuIG5vIHdoaXRlbGlzdCBoYXMgYmVlbiBleHBsaWNpdGx5IHNldCBpcyB0aGUgZW1wdHkgYXJyYXkgKGkuZS4gdGhlcmVcbiAgICogaXMgbm8gYmxhY2tsaXN0LilcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMvR2V0cyB0aGUgYmxhY2tsaXN0IG9mIHRydXN0ZWQgcmVzb3VyY2UgVVJMcy5cbiAgICovXG5cbiAgdGhpcy5yZXNvdXJjZVVybEJsYWNrbGlzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJlc291cmNlVXJsQmxhY2tsaXN0ID0gYWRqdXN0TWF0Y2hlcnModmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb3VyY2VVcmxCbGFja2xpc3Q7XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcblxuICAgIHZhciBodG1sU2FuaXRpemVyID0gZnVuY3Rpb24gaHRtbFNhbml0aXplcihodG1sKSB7XG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCAnQXR0ZW1wdGluZyB0byB1c2UgYW4gdW5zYWZlIHZhbHVlIGluIGEgc2FmZSBjb250ZXh0LicpO1xuICAgIH07XG5cbiAgICBpZiAoJGluamVjdG9yLmhhcygnJHNhbml0aXplJykpIHtcbiAgICAgIGh0bWxTYW5pdGl6ZXIgPSAkaW5qZWN0b3IuZ2V0KCckc2FuaXRpemUnKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIG1hdGNoVXJsKG1hdGNoZXIsIHBhcnNlZFVybCkge1xuICAgICAgaWYgKG1hdGNoZXIgPT09ICdzZWxmJykge1xuICAgICAgICByZXR1cm4gdXJsSXNTYW1lT3JpZ2luKHBhcnNlZFVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkZWZpbml0ZWx5IGEgcmVnZXguICBTZWUgYWRqdXN0TWF0Y2hlcnMoKVxuICAgICAgICByZXR1cm4gISFtYXRjaGVyLmV4ZWMocGFyc2VkVXJsLmhyZWYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kodXJsKSB7XG4gICAgICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZSh1cmwudG9TdHJpbmcoKSk7XG4gICAgICB2YXIgaSwgbiwgYWxsb3dlZCA9IGZhbHNlO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYXQgbGVhc3Qgb25lIGl0ZW0gZnJvbSB0aGUgd2hpdGVsaXN0IGFsbG93cyB0aGlzIHVybC5cbiAgICAgIGZvciAoaSA9IDAsIG4gPSByZXNvdXJjZVVybFdoaXRlbGlzdC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgaWYgKG1hdGNoVXJsKHJlc291cmNlVXJsV2hpdGVsaXN0W2ldLCBwYXJzZWRVcmwpKSB7XG4gICAgICAgICAgYWxsb3dlZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhbGxvd2VkKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IG5vIGl0ZW0gZnJvbSB0aGUgYmxhY2tsaXN0IGJsb2NrZWQgdGhpcyB1cmwuXG4gICAgICAgIGZvciAoaSA9IDAsIG4gPSByZXNvdXJjZVVybEJsYWNrbGlzdC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICBpZiAobWF0Y2hVcmwocmVzb3VyY2VVcmxCbGFja2xpc3RbaV0sIHBhcnNlZFVybCkpIHtcbiAgICAgICAgICAgIGFsbG93ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFsbG93ZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVIb2xkZXJUeXBlKEJhc2UpIHtcbiAgICAgIHZhciBob2xkZXJUeXBlID0gZnVuY3Rpb24gVHJ1c3RlZFZhbHVlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWUpIHtcbiAgICAgICAgdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0cnVzdGVkVmFsdWU7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgaWYgKEJhc2UpIHtcbiAgICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUgPSBuZXcgQmFzZSgpO1xuICAgICAgfVxuICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUudmFsdWVPZiA9IGZ1bmN0aW9uIHNjZVZhbHVlT2YoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XG4gICAgICB9O1xuICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiBzY2VUb1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKS50b1N0cmluZygpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBob2xkZXJUeXBlO1xuICAgIH1cblxuICAgIHZhciB0cnVzdGVkVmFsdWVIb2xkZXJCYXNlID0gZ2VuZXJhdGVIb2xkZXJUeXBlKCksXG4gICAgICAgIGJ5VHlwZSA9IHt9O1xuXG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5IVE1MXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLkNTU10gPSBnZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7XG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5VUkxdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuSlNdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuUkVTT1VSQ0VfVVJMXSA9IGdlbmVyYXRlSG9sZGVyVHlwZShieVR5cGVbU0NFX0NPTlRFWFRTLlVSTF0pO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2VEZWxlZ2F0ZSN0cnVzdEFzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGlzIHRydXN0ZWQgYnkgYW5ndWxhciBmb3IgdXNlIGluIHNwZWNpZmllZCBzdHJpY3RcbiAgICAgKiBjb250ZXh0dWFsIGVzY2FwaW5nIGNvbnRleHRzIChzdWNoIGFzIG5nLWJpbmQtaHRtbCwgbmctaW5jbHVkZSwgYW55IHNyY1xuICAgICAqIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uLCBhbnkgZG9tIGV2ZW50IGJpbmRpbmcgYXR0cmlidXRlIGludGVycG9sYXRpb25cbiAgICAgKiBzdWNoIGFzIGZvciBvbmNsaWNrLCAgZXRjLikgdGhhdCB1c2VzIHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKiBTZWUge0BsaW5rIG5nLiRzY2UgJHNjZX0gZm9yIGVuYWJsaW5nIHN0cmljdCBjb250ZXh0dWFsIGVzY2FwaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHNhZmUgZm9yIHVzZS4gIGUuZy4gdXJsLFxuICAgICAqICAgcmVzb3VyY2VVcmwsIGh0bWwsIGpzIGFuZCBjc3MuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdGhhdCB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkIHRydXN0ZWQvc2FmZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gQSB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHRvIHN0YW5kIGluIGZvciB0aGUgcHJvdmlkZWQgYHZhbHVlYCBpbiBwbGFjZXNcbiAgICAgKiB3aGVyZSBBbmd1bGFyIGV4cGVjdHMgYSAkc2NlLnRydXN0QXMoKSByZXR1cm4gdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJ1c3RBcyh0eXBlLCB0cnVzdGVkVmFsdWUpIHtcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IChieVR5cGUuaGFzT3duUHJvcGVydHkodHlwZSkgPyBieVR5cGVbdHlwZV0gOiBudWxsKTtcbiAgICAgIGlmICghQ29uc3RydWN0b3IpIHtcbiAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaWNvbnRleHQnLFxuICAgICAgICAgICAgJ0F0dGVtcHRlZCB0byB0cnVzdCBhIHZhbHVlIGluIGludmFsaWQgY29udGV4dC4gQ29udGV4dDogezB9OyBWYWx1ZTogezF9JyxcbiAgICAgICAgICAgIHR5cGUsIHRydXN0ZWRWYWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAodHJ1c3RlZFZhbHVlID09PSBudWxsIHx8IHRydXN0ZWRWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHRydXN0ZWRWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHRydXN0ZWRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIC8vIEFsbCB0aGUgY3VycmVudCBjb250ZXh0cyBpbiBTQ0VfQ09OVEVYVFMgaGFwcGVuIHRvIGJlIHN0cmluZ3MuICBJbiBvcmRlciB0byBhdm9pZCB0cnVzdGluZ1xuICAgICAgLy8gbXV0YWJsZSBvYmplY3RzLCB3ZSBlbnN1cmUgaGVyZSB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW4gaXMgYWN0dWFsbHkgYSBzdHJpbmcuXG4gICAgICBpZiAodHlwZW9mIHRydXN0ZWRWYWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaXR5cGUnLFxuICAgICAgICAgICAgJ0F0dGVtcHRlZCB0byB0cnVzdCBhIG5vbi1zdHJpbmcgdmFsdWUgaW4gYSBjb250ZW50IHJlcXVpcmluZyBhIHN0cmluZzogQ29udGV4dDogezB9JyxcbiAgICAgICAgICAgIHR5cGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0cnVzdGVkVmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjdmFsdWVPZlxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogSWYgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgaGFkIGJlZW4gcmV0dXJuZWQgYnkgYSBwcmlvciBjYWxsIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xuICAgICAqIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9LCByZXR1cm5zIHRoZSB2YWx1ZSB0aGF0IGhhZCBiZWVuIHBhc3NlZCB0byB7QGxpbmtcbiAgICAgKiBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfS5cbiAgICAgKlxuICAgICAqIElmIHRoZSBwYXNzZWQgcGFyYW1ldGVyIGlzIG5vdCBhIHZhbHVlIHRoYXQgaGFkIGJlZW4gcmV0dXJuZWQgYnkge0BsaW5rXG4gICAgICogbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0sIHJldHVybnMgaXQgYXMtaXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH1cbiAgICAgKiAgICAgIGNhbGwgb3IgYW55dGhpbmcgZWxzZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIGB2YWx1ZWAgdGhhdCB3YXMgb3JpZ2luYWxseSBwcm92aWRlZCB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gaWYgYHZhbHVlYCBpcyB0aGUgcmVzdWx0IG9mIHN1Y2ggYSBjYWxsLiAgT3RoZXJ3aXNlLCByZXR1cm5zXG4gICAgICogICAgIGB2YWx1ZWAgdW5jaGFuZ2VkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHZhbHVlT2YobWF5YmVUcnVzdGVkKSB7XG4gICAgICBpZiAobWF5YmVUcnVzdGVkIGluc3RhbmNlb2YgdHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSkge1xuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogVGFrZXMgdGhlIHJlc3VsdCBvZiBhIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSBjYWxsIGFuZFxuICAgICAqIHJldHVybnMgdGhlIG9yaWdpbmFsbHkgc3VwcGxpZWQgdmFsdWUgaWYgdGhlIHF1ZXJpZWQgY29udGV4dCB0eXBlIGlzIGEgc3VwZXJ0eXBlIG9mIHRoZVxuICAgICAqIGNyZWF0ZWQgdHlwZS4gIElmIHRoaXMgY29uZGl0aW9uIGlzbid0IHNhdGlzZmllZCwgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBraW5kIG9mIGNvbnRleHQgaW4gd2hpY2ggdGhpcyB2YWx1ZSBpcyB0byBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB7Kn0gbWF5YmVUcnVzdGVkIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gY2FsbC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIHRoZSB3YXMgb3JpZ2luYWxseSBwcm92aWRlZCB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gaWYgdmFsaWQgaW4gdGhpcyBjb250ZXh0LiAgT3RoZXJ3aXNlLCB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFRydXN0ZWQodHlwZSwgbWF5YmVUcnVzdGVkKSB7XG4gICAgICBpZiAobWF5YmVUcnVzdGVkID09PSBudWxsIHx8IG1heWJlVHJ1c3RlZCA9PT0gdW5kZWZpbmVkIHx8IG1heWJlVHJ1c3RlZCA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZDtcbiAgICAgIH1cbiAgICAgIHZhciBjb25zdHJ1Y3RvciA9IChieVR5cGUuaGFzT3duUHJvcGVydHkodHlwZSkgPyBieVR5cGVbdHlwZV0gOiBudWxsKTtcbiAgICAgIGlmIChjb25zdHJ1Y3RvciAmJiBtYXliZVRydXN0ZWQgaW5zdGFuY2VvZiBjb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XG4gICAgICB9XG4gICAgICAvLyBJZiB3ZSBnZXQgaGVyZSwgdGhlbiB3ZSBtYXkgb25seSB0YWtlIG9uZSBvZiB0d28gYWN0aW9ucy5cbiAgICAgIC8vIDEuIHNhbml0aXplIHRoZSB2YWx1ZSBmb3IgdGhlIHJlcXVlc3RlZCB0eXBlLCBvclxuICAgICAgLy8gMi4gdGhyb3cgYW4gZXhjZXB0aW9uLlxuICAgICAgaWYgKHR5cGUgPT09IFNDRV9DT05URVhUUy5SRVNPVVJDRV9VUkwpIHtcbiAgICAgICAgaWYgKGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kobWF5YmVUcnVzdGVkKSkge1xuICAgICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaW5zZWN1cmwnLFxuICAgICAgICAgICAgICAnQmxvY2tlZCBsb2FkaW5nIHJlc291cmNlIGZyb20gdXJsIG5vdCBhbGxvd2VkIGJ5ICRzY2VEZWxlZ2F0ZSBwb2xpY3kuICBVUkw6IHswfScsXG4gICAgICAgICAgICAgIG1heWJlVHJ1c3RlZC50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBTQ0VfQ09OVEVYVFMuSFRNTCkge1xuICAgICAgICByZXR1cm4gaHRtbFNhbml0aXplcihtYXliZVRydXN0ZWQpO1xuICAgICAgfVxuICAgICAgdGhyb3cgJHNjZU1pbkVycigndW5zYWZlJywgJ0F0dGVtcHRpbmcgdG8gdXNlIGFuIHVuc2FmZSB2YWx1ZSBpbiBhIHNhZmUgY29udGV4dC4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB0cnVzdEFzOiB0cnVzdEFzLFxuICAgICAgICAgICAgIGdldFRydXN0ZWQ6IGdldFRydXN0ZWQsXG4gICAgICAgICAgICAgdmFsdWVPZjogdmFsdWVPZiB9O1xuICB9XTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJHNjZVByb3ZpZGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgJHNjZVByb3ZpZGVyIHByb3ZpZGVyIGFsbG93cyBkZXZlbG9wZXJzIHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIG5nLiRzY2UgJHNjZX0gc2VydmljZS5cbiAqIC0gICBlbmFibGUvZGlzYWJsZSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKSBpbiBhIG1vZHVsZVxuICogLSAgIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHdpdGggYSBjdXN0b20gZGVsZWdhdGVcbiAqXG4gKiBSZWFkIG1vcmUgYWJvdXQge0BsaW5rIG5nLiRzY2UgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSl9LlxuICovXG5cbi8qIGpzaGludCBtYXhsZW46IGZhbHNlKi9cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHNjZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgJHNjZWAgaXMgYSBzZXJ2aWNlIHRoYXQgcHJvdmlkZXMgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgc2VydmljZXMgdG8gQW5ndWxhckpTLlxuICpcbiAqICMgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmdcbiAqXG4gKiBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKSBpcyBhIG1vZGUgaW4gd2hpY2ggQW5ndWxhckpTIHJlcXVpcmVzIGJpbmRpbmdzIGluIGNlcnRhaW5cbiAqIGNvbnRleHRzIHRvIHJlc3VsdCBpbiBhIHZhbHVlIHRoYXQgaXMgbWFya2VkIGFzIHNhZmUgdG8gdXNlIGZvciB0aGF0IGNvbnRleHQuICBPbmUgZXhhbXBsZSBvZlxuICogc3VjaCBhIGNvbnRleHQgaXMgYmluZGluZyBhcmJpdHJhcnkgaHRtbCBjb250cm9sbGVkIGJ5IHRoZSB1c2VyIHZpYSBgbmctYmluZC1odG1sYC4gIFdlIHJlZmVyXG4gKiB0byB0aGVzZSBjb250ZXh0cyBhcyBwcml2aWxlZ2VkIG9yIFNDRSBjb250ZXh0cy5cbiAqXG4gKiBBcyBvZiB2ZXJzaW9uIDEuMiwgQW5ndWxhciBzaGlwcyB3aXRoIFNDRSBlbmFibGVkIGJ5IGRlZmF1bHQuXG4gKlxuICogTm90ZTogIFdoZW4gZW5hYmxlZCAodGhlIGRlZmF1bHQpLCBJRTwxMSBpbiBxdWlya3MgbW9kZSBpcyBub3Qgc3VwcG9ydGVkLiAgSW4gdGhpcyBtb2RlLCBJRTwxMSBhbGxvd1xuICogb25lIHRvIGV4ZWN1dGUgYXJiaXRyYXJ5IGphdmFzY3JpcHQgYnkgdGhlIHVzZSBvZiB0aGUgZXhwcmVzc2lvbigpIHN5bnRheC4gIFJlZmVyXG4gKiA8aHR0cDovL2Jsb2dzLm1zZG4uY29tL2IvaWUvYXJjaGl2ZS8yMDA4LzEwLzE2L2VuZGluZy1leHByZXNzaW9ucy5hc3B4PiB0byBsZWFybiBtb3JlIGFib3V0IHRoZW0uXG4gKiBZb3UgY2FuIGVuc3VyZSB5b3VyIGRvY3VtZW50IGlzIGluIHN0YW5kYXJkcyBtb2RlIGFuZCBub3QgcXVpcmtzIG1vZGUgYnkgYWRkaW5nIGA8IWRvY3R5cGUgaHRtbD5gXG4gKiB0byB0aGUgdG9wIG9mIHlvdXIgSFRNTCBkb2N1bWVudC5cbiAqXG4gKiBTQ0UgYXNzaXN0cyBpbiB3cml0aW5nIGNvZGUgaW4gd2F5IHRoYXQgKGEpIGlzIHNlY3VyZSBieSBkZWZhdWx0IGFuZCAoYikgbWFrZXMgYXVkaXRpbmcgZm9yXG4gKiBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMgc3VjaCBhcyBYU1MsIGNsaWNramFja2luZywgZXRjLiBhIGxvdCBlYXNpZXIuXG4gKlxuICogSGVyZSdzIGFuIGV4YW1wbGUgb2YgYSBiaW5kaW5nIGluIGEgcHJpdmlsZWdlZCBjb250ZXh0OlxuICpcbiAqIGBgYFxuICogPGlucHV0IG5nLW1vZGVsPVwidXNlckh0bWxcIj5cbiAqIDxkaXYgbmctYmluZC1odG1sPVwidXNlckh0bWxcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIE5vdGljZSB0aGF0IGBuZy1iaW5kLWh0bWxgIGlzIGJvdW5kIHRvIGB1c2VySHRtbGAgY29udHJvbGxlZCBieSB0aGUgdXNlci4gIFdpdGggU0NFXG4gKiBkaXNhYmxlZCwgdGhpcyBhcHBsaWNhdGlvbiBhbGxvd3MgdGhlIHVzZXIgdG8gcmVuZGVyIGFyYml0cmFyeSBIVE1MIGludG8gdGhlIERJVi5cbiAqIEluIGEgbW9yZSByZWFsaXN0aWMgZXhhbXBsZSwgb25lIG1heSBiZSByZW5kZXJpbmcgdXNlciBjb21tZW50cywgYmxvZyBhcnRpY2xlcywgZXRjLiB2aWFcbiAqIGJpbmRpbmdzLiAgKEhUTUwgaXMganVzdCBvbmUgZXhhbXBsZSBvZiBhIGNvbnRleHQgd2hlcmUgcmVuZGVyaW5nIHVzZXIgY29udHJvbGxlZCBpbnB1dCBjcmVhdGVzXG4gKiBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMuKVxuICpcbiAqIEZvciB0aGUgY2FzZSBvZiBIVE1MLCB5b3UgbWlnaHQgdXNlIGEgbGlicmFyeSwgZWl0aGVyIG9uIHRoZSBjbGllbnQgc2lkZSwgb3Igb24gdGhlIHNlcnZlciBzaWRlLFxuICogdG8gc2FuaXRpemUgdW5zYWZlIEhUTUwgYmVmb3JlIGJpbmRpbmcgdG8gdGhlIHZhbHVlIGFuZCByZW5kZXJpbmcgaXQgaW4gdGhlIGRvY3VtZW50LlxuICpcbiAqIEhvdyB3b3VsZCB5b3UgZW5zdXJlIHRoYXQgZXZlcnkgcGxhY2UgdGhhdCB1c2VkIHRoZXNlIHR5cGVzIG9mIGJpbmRpbmdzIHdhcyBib3VuZCB0byBhIHZhbHVlIHRoYXRcbiAqIHdhcyBzYW5pdGl6ZWQgYnkgeW91ciBsaWJyYXJ5IChvciByZXR1cm5lZCBhcyBzYWZlIGZvciByZW5kZXJpbmcgYnkgeW91ciBzZXJ2ZXI/KSAgSG93IGNhbiB5b3VcbiAqIGVuc3VyZSB0aGF0IHlvdSBkaWRuJ3QgYWNjaWRlbnRhbGx5IGRlbGV0ZSB0aGUgbGluZSB0aGF0IHNhbml0aXplZCB0aGUgdmFsdWUsIG9yIHJlbmFtZWQgc29tZVxuICogcHJvcGVydGllcy9maWVsZHMgYW5kIGZvcmdvdCB0byB1cGRhdGUgdGhlIGJpbmRpbmcgdG8gdGhlIHNhbml0aXplZCB2YWx1ZT9cbiAqXG4gKiBUbyBiZSBzZWN1cmUgYnkgZGVmYXVsdCwgeW91IHdhbnQgdG8gZW5zdXJlIHRoYXQgYW55IHN1Y2ggYmluZGluZ3MgYXJlIGRpc2FsbG93ZWQgdW5sZXNzIHlvdSBjYW5cbiAqIGRldGVybWluZSB0aGF0IHNvbWV0aGluZyBleHBsaWNpdGx5IHNheXMgaXQncyBzYWZlIHRvIHVzZSBhIHZhbHVlIGZvciBiaW5kaW5nIGluIHRoYXRcbiAqIGNvbnRleHQuICBZb3UgY2FuIHRoZW4gYXVkaXQgeW91ciBjb2RlIChhIHNpbXBsZSBncmVwIHdvdWxkIGRvKSB0byBlbnN1cmUgdGhhdCB0aGlzIGlzIG9ubHkgZG9uZVxuICogZm9yIHRob3NlIHZhbHVlcyB0aGF0IHlvdSBjYW4gZWFzaWx5IHRlbGwgYXJlIHNhZmUgLSBiZWNhdXNlIHRoZXkgd2VyZSByZWNlaXZlZCBmcm9tIHlvdXIgc2VydmVyLFxuICogc2FuaXRpemVkIGJ5IHlvdXIgbGlicmFyeSwgZXRjLiAgWW91IGNhbiBvcmdhbml6ZSB5b3VyIGNvZGViYXNlIHRvIGhlbHAgd2l0aCB0aGlzIC0gcGVyaGFwc1xuICogYWxsb3dpbmcgb25seSB0aGUgZmlsZXMgaW4gYSBzcGVjaWZpYyBkaXJlY3RvcnkgdG8gZG8gdGhpcy4gIEVuc3VyaW5nIHRoYXQgdGhlIGludGVybmFsIEFQSVxuICogZXhwb3NlZCBieSB0aGF0IGNvZGUgZG9lc24ndCBtYXJrdXAgYXJiaXRyYXJ5IHZhbHVlcyBhcyBzYWZlIHRoZW4gYmVjb21lcyBhIG1vcmUgbWFuYWdlYWJsZSB0YXNrLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIEFuZ3VsYXJKUycgU0NFIHNlcnZpY2UsIG9uZSB1c2VzIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfVxuICogKGFuZCBzaG9ydGhhbmQgbWV0aG9kcyBzdWNoIGFzIHtAbGluayBuZy4kc2NlI3RydXN0QXNIdG1sICRzY2UudHJ1c3RBc0h0bWx9LCBldGMuKSB0b1xuICogb2J0YWluIHZhbHVlcyB0aGF0IHdpbGwgYmUgYWNjZXB0ZWQgYnkgU0NFIC8gcHJpdmlsZWdlZCBjb250ZXh0cy5cbiAqXG4gKlxuICogIyMgSG93IGRvZXMgaXQgd29yaz9cbiAqXG4gKiBJbiBwcml2aWxlZ2VkIGNvbnRleHRzLCBkaXJlY3RpdmVzIGFuZCBjb2RlIHdpbGwgYmluZCB0byB0aGUgcmVzdWx0IG9mIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWRcbiAqICRzY2UuZ2V0VHJ1c3RlZChjb250ZXh0LCB2YWx1ZSl9IHJhdGhlciB0aGFuIHRvIHRoZSB2YWx1ZSBkaXJlY3RseS4gIERpcmVjdGl2ZXMgdXNlIHtAbGlua1xuICogbmcuJHNjZSNwYXJzZUFzICRzY2UucGFyc2VBc30gcmF0aGVyIHRoYW4gYCRwYXJzZWAgdG8gd2F0Y2ggYXR0cmlidXRlIGJpbmRpbmdzLCB3aGljaCBwZXJmb3JtcyB0aGVcbiAqIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkfSBiZWhpbmQgdGhlIHNjZW5lcyBvbiBub24tY29uc3RhbnQgbGl0ZXJhbHMuXG4gKlxuICogQXMgYW4gZXhhbXBsZSwge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0JpbmRIdG1sIG5nQmluZEh0bWx9IHVzZXMge0BsaW5rXG4gKiBuZy4kc2NlI3BhcnNlQXNIdG1sICRzY2UucGFyc2VBc0h0bWwoYmluZGluZyBleHByZXNzaW9uKX0uICBIZXJlJ3MgdGhlIGFjdHVhbCBjb2RlIChzbGlnaHRseVxuICogc2ltcGxpZmllZCk6XG4gKlxuICogYGBgXG4gKiB2YXIgbmdCaW5kSHRtbERpcmVjdGl2ZSA9IFsnJHNjZScsIGZ1bmN0aW9uKCRzY2UpIHtcbiAqICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gKiAgICAgc2NvcGUuJHdhdGNoKCRzY2UucGFyc2VBc0h0bWwoYXR0ci5uZ0JpbmRIdG1sKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAqICAgICAgIGVsZW1lbnQuaHRtbCh2YWx1ZSB8fCAnJyk7XG4gKiAgICAgfSk7XG4gKiAgIH07XG4gKiB9XTtcbiAqIGBgYFxuICpcbiAqICMjIEltcGFjdCBvbiBsb2FkaW5nIHRlbXBsYXRlc1xuICpcbiAqIFRoaXMgYXBwbGllcyBib3RoIHRvIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBgbmctaW5jbHVkZWB9IGRpcmVjdGl2ZSBhcyB3ZWxsIGFzXG4gKiBgdGVtcGxhdGVVcmxgJ3Mgc3BlY2lmaWVkIGJ5IHtAbGluayBndWlkZS9kaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gKlxuICogQnkgZGVmYXVsdCwgQW5ndWxhciBvbmx5IGxvYWRzIHRlbXBsYXRlcyBmcm9tIHRoZSBzYW1lIGRvbWFpbiBhbmQgcHJvdG9jb2wgYXMgdGhlIGFwcGxpY2F0aW9uXG4gKiBkb2N1bWVudC4gIFRoaXMgaXMgZG9uZSBieSBjYWxsaW5nIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxuICogJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmx9IG9uIHRoZSB0ZW1wbGF0ZSBVUkwuICBUbyBsb2FkIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgYW5kL29yXG4gKiBwcm90b2NvbHMsIHlvdSBtYXkgZWl0aGVyIGVpdGhlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0XG4gKiB0aGVtfSBvciB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmwgd3JhcCBpdH0gaW50byBhIHRydXN0ZWQgdmFsdWUuXG4gKlxuICogKlBsZWFzZSBub3RlKjpcbiAqIFRoZSBicm93c2VyJ3NcbiAqIFtTYW1lIE9yaWdpbiBQb2xpY3ldKGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvYnJvd3NlcnNlYy93aWtpL1BhcnQyI1NhbWUtb3JpZ2luX3BvbGljeV9mb3JfWE1MSHR0cFJlcXVlc3QpXG4gKiBhbmQgW0Nyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nIChDT1JTKV0oaHR0cDovL3d3dy53My5vcmcvVFIvY29ycy8pXG4gKiBwb2xpY3kgYXBwbHkgaW4gYWRkaXRpb24gdG8gdGhpcyBhbmQgbWF5IGZ1cnRoZXIgcmVzdHJpY3Qgd2hldGhlciB0aGUgdGVtcGxhdGUgaXMgc3VjY2Vzc2Z1bGx5XG4gKiBsb2FkZWQuICBUaGlzIG1lYW5zIHRoYXQgd2l0aG91dCB0aGUgcmlnaHQgQ09SUyBwb2xpY3ksIGxvYWRpbmcgdGVtcGxhdGVzIGZyb20gYSBkaWZmZXJlbnQgZG9tYWluXG4gKiB3b24ndCB3b3JrIG9uIGFsbCBicm93c2Vycy4gIEFsc28sIGxvYWRpbmcgdGVtcGxhdGVzIGZyb20gYGZpbGU6Ly9gIFVSTCBkb2VzIG5vdCB3b3JrIG9uIHNvbWVcbiAqIGJyb3dzZXJzLlxuICpcbiAqICMjIFRoaXMgZmVlbHMgbGlrZSB0b28gbXVjaCBvdmVyaGVhZFxuICpcbiAqIEl0J3MgaW1wb3J0YW50IHRvIHJlbWVtYmVyIHRoYXQgU0NFIG9ubHkgYXBwbGllcyB0byBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb25zLlxuICpcbiAqIElmIHlvdXIgZXhwcmVzc2lvbnMgYXJlIGNvbnN0YW50IGxpdGVyYWxzLCB0aGV5J3JlIGF1dG9tYXRpY2FsbHkgdHJ1c3RlZCBhbmQgeW91IGRvbid0IG5lZWQgdG9cbiAqIGNhbGwgYCRzY2UudHJ1c3RBc2Agb24gdGhlbSAocmVtZW1iZXIgdG8gaW5jbHVkZSB0aGUgYG5nU2FuaXRpemVgIG1vZHVsZSkgKGUuZy5cbiAqIGA8ZGl2IG5nLWJpbmQtaHRtbD1cIic8Yj5pbXBsaWNpdGx5IHRydXN0ZWQ8L2I+J1wiPjwvZGl2PmApIGp1c3Qgd29ya3MuXG4gKlxuICogQWRkaXRpb25hbGx5LCBgYVtocmVmXWAgYW5kIGBpbWdbc3JjXWAgYXV0b21hdGljYWxseSBzYW5pdGl6ZSB0aGVpciBVUkxzIGFuZCBkbyBub3QgcGFzcyB0aGVtXG4gKiB0aHJvdWdoIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkfS4gIFNDRSBkb2Vzbid0IHBsYXkgYSByb2xlIGhlcmUuXG4gKlxuICogVGhlIGluY2x1ZGVkIHtAbGluayBuZy4kc2NlRGVsZWdhdGUgJHNjZURlbGVnYXRlfSBjb21lcyB3aXRoIHNhbmUgZGVmYXVsdHMgdG8gYWxsb3cgeW91IHRvIGxvYWRcbiAqIHRlbXBsYXRlcyBpbiBgbmctaW5jbHVkZWAgZnJvbSB5b3VyIGFwcGxpY2F0aW9uJ3MgZG9tYWluIHdpdGhvdXQgaGF2aW5nIHRvIGV2ZW4ga25vdyBhYm91dCBTQ0UuXG4gKiBJdCBibG9ja3MgbG9hZGluZyB0ZW1wbGF0ZXMgZnJvbSBvdGhlciBkb21haW5zIG9yIGxvYWRpbmcgdGVtcGxhdGVzIG92ZXIgaHR0cCBmcm9tIGFuIGh0dHBzXG4gKiBzZXJ2ZWQgZG9jdW1lbnQuICBZb3UgY2FuIGNoYW5nZSB0aGVzZSBieSBzZXR0aW5nIHlvdXIgb3duIGN1c3RvbSB7QGxpbmtcbiAqIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHdoaXRlbGlzdHN9IGFuZCB7QGxpbmtcbiAqIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0IGJsYWNrbGlzdHN9IGZvciBtYXRjaGluZyBzdWNoIFVSTHMuXG4gKlxuICogVGhpcyBzaWduaWZpY2FudGx5IHJlZHVjZXMgdGhlIG92ZXJoZWFkLiAgSXQgaXMgZmFyIGVhc2llciB0byBwYXkgdGhlIHNtYWxsIG92ZXJoZWFkIGFuZCBoYXZlIGFuXG4gKiBhcHBsaWNhdGlvbiB0aGF0J3Mgc2VjdXJlIGFuZCBjYW4gYmUgYXVkaXRlZCB0byB2ZXJpZnkgdGhhdCB3aXRoIG11Y2ggbW9yZSBlYXNlIHRoYW4gYm9sdGluZ1xuICogc2VjdXJpdHkgb250byBhbiBhcHBsaWNhdGlvbiBsYXRlci5cbiAqXG4gKiA8YSBuYW1lPVwiY29udGV4dHNcIj48L2E+XG4gKiAjIyBXaGF0IHRydXN0ZWQgY29udGV4dCB0eXBlcyBhcmUgc3VwcG9ydGVkP1xuICpcbiAqIHwgQ29udGV4dCAgICAgICAgICAgICB8IE5vdGVzICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgYCRzY2UuSFRNTGAgICAgICAgICB8IEZvciBIVE1MIHRoYXQncyBzYWZlIHRvIHNvdXJjZSBpbnRvIHRoZSBhcHBsaWNhdGlvbi4gIFRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQmluZEh0bWwgbmdCaW5kSHRtbH0gZGlyZWN0aXZlIHVzZXMgdGhpcyBjb250ZXh0IGZvciBiaW5kaW5ncy4gSWYgYW4gdW5zYWZlIHZhbHVlIGlzIGVuY291bnRlcmVkIGFuZCB0aGUge0BsaW5rIG5nU2FuaXRpemUgJHNhbml0aXplfSBtb2R1bGUgaXMgcHJlc2VudCB0aGlzIHdpbGwgc2FuaXRpemUgdGhlIHZhbHVlIGluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3IuIHxcbiAqIHwgYCRzY2UuQ1NTYCAgICAgICAgICB8IEZvciBDU1MgdGhhdCdzIHNhZmUgdG8gc291cmNlIGludG8gdGhlIGFwcGxpY2F0aW9uLiAgQ3VycmVudGx5IHVudXNlZC4gIEZlZWwgZnJlZSB0byB1c2UgaXQgaW4geW91ciBvd24gZGlyZWN0aXZlcy4gfFxuICogfCBgJHNjZS5VUkxgICAgICAgICAgIHwgRm9yIFVSTHMgdGhhdCBhcmUgc2FmZSB0byBmb2xsb3cgYXMgbGlua3MuICBDdXJyZW50bHkgdW51c2VkIChgPGEgaHJlZj1gIGFuZCBgPGltZyBzcmM9YCBzYW5pdGl6ZSB0aGVpciB1cmxzIGFuZCBkb24ndCBjb25zdGl0dXRlIGFuIFNDRSBjb250ZXh0LiB8XG4gKiB8IGAkc2NlLlJFU09VUkNFX1VSTGAgfCBGb3IgVVJMcyB0aGF0IGFyZSBub3Qgb25seSBzYWZlIHRvIGZvbGxvdyBhcyBsaW5rcywgYnV0IHdob3NlIGNvbnRlbnRzIGFyZSBhbHNvIHNhZmUgdG8gaW5jbHVkZSBpbiB5b3VyIGFwcGxpY2F0aW9uLiAgRXhhbXBsZXMgaW5jbHVkZSBgbmctaW5jbHVkZWAsIGBzcmNgIC8gYG5nU3JjYCBiaW5kaW5ncyBmb3IgdGFncyBvdGhlciB0aGFuIGBJTUdgIChlLmcuIGBJRlJBTUVgLCBgT0JKRUNUYCwgZXRjLikgIDxicj48YnI+Tm90ZSB0aGF0IGAkc2NlLlJFU09VUkNFX1VSTGAgbWFrZXMgYSBzdHJvbmdlciBzdGF0ZW1lbnQgYWJvdXQgdGhlIFVSTCB0aGFuIGAkc2NlLlVSTGAgZG9lcyBhbmQgdGhlcmVmb3JlIGNvbnRleHRzIHJlcXVpcmluZyB2YWx1ZXMgdHJ1c3RlZCBmb3IgYCRzY2UuUkVTT1VSQ0VfVVJMYCBjYW4gYmUgdXNlZCBhbnl3aGVyZSB0aGF0IHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5VUkxgIGFyZSByZXF1aXJlZC4gfFxuICogfCBgJHNjZS5KU2AgICAgICAgICAgIHwgRm9yIEphdmFTY3JpcHQgdGhhdCBpcyBzYWZlIHRvIGV4ZWN1dGUgaW4geW91ciBhcHBsaWNhdGlvbidzIGNvbnRleHQuICBDdXJyZW50bHkgdW51c2VkLiAgRmVlbCBmcmVlIHRvIHVzZSBpdCBpbiB5b3VyIG93biBkaXJlY3RpdmVzLiB8XG4gKlxuICogIyMgRm9ybWF0IG9mIGl0ZW1zIGluIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCByZXNvdXJjZVVybFdoaXRlbGlzdH0ve0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0IEJsYWNrbGlzdH0gPGEgbmFtZT1cInJlc291cmNlVXJsUGF0dGVybkl0ZW1cIj48L2E+XG4gKlxuICogIEVhY2ggZWxlbWVudCBpbiB0aGVzZSBhcnJheXMgbXVzdCBiZSBvbmUgb2YgdGhlIGZvbGxvd2luZzpcbiAqXG4gKiAgLSAqKidzZWxmJyoqXG4gKiAgICAtIFRoZSBzcGVjaWFsICoqc3RyaW5nKiosIGAnc2VsZidgLCBjYW4gYmUgdXNlZCB0byBtYXRjaCBhZ2FpbnN0IGFsbCBVUkxzIG9mIHRoZSAqKnNhbWVcbiAqICAgICAgZG9tYWluKiogYXMgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50IHVzaW5nIHRoZSAqKnNhbWUgcHJvdG9jb2wqKi5cbiAqICAtICoqU3RyaW5nKiogKGV4Y2VwdCB0aGUgc3BlY2lhbCB2YWx1ZSBgJ3NlbGYnYClcbiAqICAgIC0gVGhlIHN0cmluZyBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGZ1bGwgKm5vcm1hbGl6ZWQgLyBhYnNvbHV0ZSBVUkwqIG9mIHRoZSByZXNvdXJjZVxuICogICAgICBiZWluZyB0ZXN0ZWQgKHN1YnN0cmluZyBtYXRjaGVzIGFyZSBub3QgZ29vZCBlbm91Z2guKVxuICogICAgLSBUaGVyZSBhcmUgZXhhY3RseSAqKnR3byB3aWxkY2FyZCBzZXF1ZW5jZXMqKiAtIGAqYCBhbmQgYCoqYC4gIEFsbCBvdGhlciBjaGFyYWN0ZXJzXG4gKiAgICAgIG1hdGNoIHRoZW1zZWx2ZXMuXG4gKiAgICAtIGAqYDogbWF0Y2hlcyB6ZXJvIG9yIG1vcmUgb2NjdXJyZW5jZXMgb2YgYW55IGNoYXJhY3RlciBvdGhlciB0aGFuIG9uZSBvZiB0aGUgZm9sbG93aW5nIDZcbiAqICAgICAgY2hhcmFjdGVyczogJ2A6YCcsICdgL2AnLCAnYC5gJywgJ2A/YCcsICdgJmAnIGFuZCAnOycuICBJdCdzIGEgdXNlZnVsIHdpbGRjYXJkIGZvciB1c2VcbiAqICAgICAgaW4gYSB3aGl0ZWxpc3QuXG4gKiAgICAtIGAqKmA6IG1hdGNoZXMgemVybyBvciBtb3JlIG9jY3VycmVuY2VzIG9mICphbnkqIGNoYXJhY3Rlci4gIEFzIHN1Y2gsIGl0J3Mgbm90XG4gKiAgICAgIG5vdCBhcHByb3ByaWF0ZSB0byB1c2UgaW4gZm9yIGEgc2NoZW1lLCBkb21haW4sIGV0Yy4gYXMgaXQgd291bGQgbWF0Y2ggdG9vIG11Y2guICAoZS5nLlxuICogICAgICBodHRwOi8vKiouZXhhbXBsZS5jb20vIHdvdWxkIG1hdGNoIGh0dHA6Ly9ldmlsLmNvbS8/aWdub3JlPS5leGFtcGxlLmNvbS8gYW5kIHRoYXQgbWlnaHRcbiAqICAgICAgbm90IGhhdmUgYmVlbiB0aGUgaW50ZW50aW9uLikgIEl0cyB1c2FnZSBhdCB0aGUgdmVyeSBlbmQgb2YgdGhlIHBhdGggaXMgb2suICAoZS5nLlxuICogICAgICBodHRwOi8vZm9vLmV4YW1wbGUuY29tL3RlbXBsYXRlcy8qKikuXG4gKiAgLSAqKlJlZ0V4cCoqICgqc2VlIGNhdmVhdCBiZWxvdyopXG4gKiAgICAtICpDYXZlYXQqOiAgV2hpbGUgcmVndWxhciBleHByZXNzaW9ucyBhcmUgcG93ZXJmdWwgYW5kIG9mZmVyIGdyZWF0IGZsZXhpYmlsaXR5LCAgdGhlaXIgc3ludGF4XG4gKiAgICAgIChhbmQgYWxsIHRoZSBpbmV2aXRhYmxlIGVzY2FwaW5nKSBtYWtlcyB0aGVtICpoYXJkZXIgdG8gbWFpbnRhaW4qLiAgSXQncyBlYXN5IHRvXG4gKiAgICAgIGFjY2lkZW50YWxseSBpbnRyb2R1Y2UgYSBidWcgd2hlbiBvbmUgdXBkYXRlcyBhIGNvbXBsZXggZXhwcmVzc2lvbiAoaW1obywgYWxsIHJlZ2V4ZXMgc2hvdWxkXG4gKiAgICAgIGhhdmUgZ29vZCB0ZXN0IGNvdmVyYWdlLikuICBGb3IgaW5zdGFuY2UsIHRoZSB1c2Ugb2YgYC5gIGluIHRoZSByZWdleCBpcyBjb3JyZWN0IG9ubHkgaW4gYVxuICogICAgICBzbWFsbCBudW1iZXIgb2YgY2FzZXMuICBBIGAuYCBjaGFyYWN0ZXIgaW4gdGhlIHJlZ2V4IHVzZWQgd2hlbiBtYXRjaGluZyB0aGUgc2NoZW1lIG9yIGFcbiAqICAgICAgc3ViZG9tYWluIGNvdWxkIGJlIG1hdGNoZWQgYWdhaW5zdCBhIGA6YCBvciBsaXRlcmFsIGAuYCB0aGF0IHdhcyBsaWtlbHkgbm90IGludGVuZGVkLiAgIEl0XG4gKiAgICAgIGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgdGhlIHN0cmluZyBwYXR0ZXJucyBhbmQgb25seSBmYWxsIGJhY2sgdG8gcmVndWxhciBleHByZXNzaW9uc1xuICogICAgICBpZiB0aGV5IGFzIGEgbGFzdCByZXNvcnQuXG4gKiAgICAtIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBSZWdFeHAgKGkuZS4gbm90IGEgc3RyaW5nLikgIEl0IGlzXG4gKiAgICAgIG1hdGNoZWQgYWdhaW5zdCB0aGUgKiplbnRpcmUqKiAqbm9ybWFsaXplZCAvIGFic29sdXRlIFVSTCogb2YgdGhlIHJlc291cmNlIGJlaW5nIHRlc3RlZFxuICogICAgICAoZXZlbiB3aGVuIHRoZSBSZWdFeHAgZGlkIG5vdCBoYXZlIHRoZSBgXmAgYW5kIGAkYCBjb2Rlcy4pICBJbiBhZGRpdGlvbiwgYW55IGZsYWdzXG4gKiAgICAgIHByZXNlbnQgb24gdGhlIFJlZ0V4cCAoc3VjaCBhcyBtdWx0aWxpbmUsIGdsb2JhbCwgaWdub3JlQ2FzZSkgYXJlIGlnbm9yZWQuXG4gKiAgICAtIElmIHlvdSBhcmUgZ2VuZXJhdGluZyB5b3VyIEphdmFTY3JpcHQgZnJvbSBzb21lIG90aGVyIHRlbXBsYXRpbmcgZW5naW5lIChub3RcbiAqICAgICAgcmVjb21tZW5kZWQsIGUuZy4gaW4gaXNzdWUgWyM0MDA2XShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy80MDA2KSksXG4gKiAgICAgIHJlbWVtYmVyIHRvIGVzY2FwZSB5b3VyIHJlZ3VsYXIgZXhwcmVzc2lvbiAoYW5kIGJlIGF3YXJlIHRoYXQgeW91IG1pZ2h0IG5lZWQgbW9yZSB0aGFuXG4gKiAgICAgIG9uZSBsZXZlbCBvZiBlc2NhcGluZyBkZXBlbmRpbmcgb24geW91ciB0ZW1wbGF0aW5nIGVuZ2luZSBhbmQgdGhlIHdheSB5b3UgaW50ZXJwb2xhdGVkXG4gKiAgICAgIHRoZSB2YWx1ZS4pICBEbyBtYWtlIHVzZSBvZiB5b3VyIHBsYXRmb3JtJ3MgZXNjYXBpbmcgbWVjaGFuaXNtIGFzIGl0IG1pZ2h0IGJlIGdvb2RcbiAqICAgICAgZW5vdWdoIGJlZm9yZSBjb2RpbmcgeW91ciBvd24uICBlLmcuIFJ1YnkgaGFzXG4gKiAgICAgIFtSZWdleHAuZXNjYXBlKHN0cildKGh0dHA6Ly93d3cucnVieS1kb2Mub3JnL2NvcmUtMi4wLjAvUmVnZXhwLmh0bWwjbWV0aG9kLWMtZXNjYXBlKVxuICogICAgICBhbmQgUHl0aG9uIGhhcyBbcmUuZXNjYXBlXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvcmUuaHRtbCNyZS5lc2NhcGUpLlxuICogICAgICBKYXZhc2NyaXB0IGxhY2tzIGEgc2ltaWxhciBidWlsdCBpbiBmdW5jdGlvbiBmb3IgZXNjYXBpbmcuICBUYWtlIGEgbG9vayBhdCBHb29nbGVcbiAqICAgICAgQ2xvc3VyZSBsaWJyYXJ5J3MgW2dvb2cuc3RyaW5nLnJlZ0V4cEVzY2FwZShzKV0oXG4gKiAgICAgIGh0dHA6Ly9kb2NzLmNsb3N1cmUtbGlicmFyeS5nb29nbGVjb2RlLmNvbS9naXQvY2xvc3VyZV9nb29nX3N0cmluZ19zdHJpbmcuanMuc291cmNlLmh0bWwjbGluZTk2MikuXG4gKlxuICogUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSBmb3IgYW4gZXhhbXBsZS5cbiAqXG4gKiAjIyBTaG93IG1lIGFuIGV4YW1wbGUgdXNpbmcgU0NFLlxuICpcbiAqIDxleGFtcGxlIG1vZHVsZT1cIm15U2NlQXBwXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgIDxkaXYgbmctY29udHJvbGxlcj1cIkFwcENvbnRyb2xsZXIgYXMgbXlDdHJsXCI+XG4gKiAgICAgPGkgbmctYmluZC1odG1sPVwibXlDdHJsLmV4cGxpY2l0bHlUcnVzdGVkSHRtbFwiIGlkPVwiZXhwbGljaXRseVRydXN0ZWRIdG1sXCI+PC9pPjxicj48YnI+XG4gKiAgICAgPGI+VXNlciBjb21tZW50czwvYj48YnI+XG4gKiAgICAgQnkgZGVmYXVsdCwgSFRNTCB0aGF0IGlzbid0IGV4cGxpY2l0bHkgdHJ1c3RlZCAoZS5nLiBBbGljZSdzIGNvbW1lbnQpIGlzIHNhbml0aXplZCB3aGVuXG4gKiAgICAgJHNhbml0aXplIGlzIGF2YWlsYWJsZS4gIElmICRzYW5pdGl6ZSBpc24ndCBhdmFpbGFibGUsIHRoaXMgcmVzdWx0cyBpbiBhbiBlcnJvciBpbnN0ZWFkIG9mIGFuXG4gKiAgICAgZXhwbG9pdC5cbiAqICAgICA8ZGl2IGNsYXNzPVwid2VsbFwiPlxuICogICAgICAgPGRpdiBuZy1yZXBlYXQ9XCJ1c2VyQ29tbWVudCBpbiBteUN0cmwudXNlckNvbW1lbnRzXCI+XG4gKiAgICAgICAgIDxiPnt7dXNlckNvbW1lbnQubmFtZX19PC9iPjpcbiAqICAgICAgICAgPHNwYW4gbmctYmluZC1odG1sPVwidXNlckNvbW1lbnQuaHRtbENvbW1lbnRcIiBjbGFzcz1cImh0bWxDb21tZW50XCI+PC9zcGFuPlxuICogICAgICAgICA8YnI+XG4gKiAgICAgICA8L2Rpdj5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKlxuICogPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICogICBhbmd1bGFyLm1vZHVsZSgnbXlTY2VBcHAnLCBbJ25nU2FuaXRpemUnXSlcbiAqICAgICAuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIFsnJGh0dHAnLCAnJHRlbXBsYXRlQ2FjaGUnLCAnJHNjZScsXG4gKiAgICAgICBmdW5jdGlvbigkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRzY2UpIHtcbiAqICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICogICAgICAgICAkaHR0cC5nZXQoXCJ0ZXN0X2RhdGEuanNvblwiLCB7Y2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSkuc3VjY2VzcyhmdW5jdGlvbih1c2VyQ29tbWVudHMpIHtcbiAqICAgICAgICAgICBzZWxmLnVzZXJDb21tZW50cyA9IHVzZXJDb21tZW50cztcbiAqICAgICAgICAgfSk7XG4gKiAgICAgICAgIHNlbGYuZXhwbGljaXRseVRydXN0ZWRIdG1sID0gJHNjZS50cnVzdEFzSHRtbChcbiAqICAgICAgICAgICAgICc8c3BhbiBvbm1vdXNlb3Zlcj1cInRoaXMudGV4dENvbnRlbnQ9JnF1b3Q7RXhwbGljaXRseSB0cnVzdGVkIEhUTUwgYnlwYXNzZXMgJyArXG4gKiAgICAgICAgICAgICAnc2FuaXRpemF0aW9uLiZxdW90O1wiPkhvdmVyIG92ZXIgdGhpcyB0ZXh0Ljwvc3Bhbj4nKTtcbiAqICAgICAgIH1dKTtcbiAqIDwvZmlsZT5cbiAqXG4gKiA8ZmlsZSBuYW1lPVwidGVzdF9kYXRhLmpzb25cIj5cbiAqIFtcbiAqICAgeyBcIm5hbWVcIjogXCJBbGljZVwiLFxuICogICAgIFwiaHRtbENvbW1lbnRcIjpcbiAqICAgICAgICAgXCI8c3BhbiBvbm1vdXNlb3Zlcj0ndGhpcy50ZXh0Q29udGVudD1cXFwiUFdOM0QhXFxcIic+SXMgPGk+YW55b25lPC9pPiByZWFkaW5nIHRoaXM/PC9zcGFuPlwiXG4gKiAgIH0sXG4gKiAgIHsgXCJuYW1lXCI6IFwiQm9iXCIsXG4gKiAgICAgXCJodG1sQ29tbWVudFwiOiBcIjxpPlllcyE8L2k+ICBBbSBJIHRoZSBvbmx5IG90aGVyIG9uZT9cIlxuICogICB9XG4gKiBdXG4gKiA8L2ZpbGU+XG4gKlxuICogPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICBkZXNjcmliZSgnU0NFIGRvYyBkZW1vJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSB1bnRydXN0ZWQgdmFsdWVzJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCcuaHRtbENvbW1lbnQnKSkuZmlyc3QoKS5nZXRJbm5lckh0bWwoKSlcbiAqICAgICAgICAgICAudG9CZSgnPHNwYW4+SXMgPGk+YW55b25lPC9pPiByZWFkaW5nIHRoaXM/PC9zcGFuPicpO1xuICogICAgIH0pO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIE5PVCBzYW5pdGl6ZSBleHBsaWNpdGx5IHRydXN0ZWQgdmFsdWVzJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZXhwbGljaXRseVRydXN0ZWRIdG1sJykpLmdldElubmVySHRtbCgpKS50b0JlKFxuICogICAgICAgICAgICc8c3BhbiBvbm1vdXNlb3Zlcj1cInRoaXMudGV4dENvbnRlbnQ9JnF1b3Q7RXhwbGljaXRseSB0cnVzdGVkIEhUTUwgYnlwYXNzZXMgJyArXG4gKiAgICAgICAgICAgJ3Nhbml0aXphdGlvbi4mcXVvdDtcIj5Ib3ZlciBvdmVyIHRoaXMgdGV4dC48L3NwYW4+Jyk7XG4gKiAgICAgfSk7XG4gKiAgIH0pO1xuICogPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqXG4gKlxuICogIyMgQ2FuIEkgZGlzYWJsZSBTQ0UgY29tcGxldGVseT9cbiAqXG4gKiBZZXMsIHlvdSBjYW4uICBIb3dldmVyLCB0aGlzIGlzIHN0cm9uZ2x5IGRpc2NvdXJhZ2VkLiAgU0NFIGdpdmVzIHlvdSBhIGxvdCBvZiBzZWN1cml0eSBiZW5lZml0c1xuICogZm9yIGxpdHRsZSBjb2Rpbmcgb3ZlcmhlYWQuICBJdCB3aWxsIGJlIG11Y2ggaGFyZGVyIHRvIHRha2UgYW4gU0NFIGRpc2FibGVkIGFwcGxpY2F0aW9uIGFuZFxuICogZWl0aGVyIHNlY3VyZSBpdCBvbiB5b3VyIG93biBvciBlbmFibGUgU0NFIGF0IGEgbGF0ZXIgc3RhZ2UuICBJdCBtaWdodCBtYWtlIHNlbnNlIHRvIGRpc2FibGUgU0NFXG4gKiBmb3IgY2FzZXMgd2hlcmUgeW91IGhhdmUgYSBsb3Qgb2YgZXhpc3RpbmcgY29kZSB0aGF0IHdhcyB3cml0dGVuIGJlZm9yZSBTQ0Ugd2FzIGludHJvZHVjZWQgYW5kXG4gKiB5b3UncmUgbWlncmF0aW5nIHRoZW0gYSBtb2R1bGUgYXQgYSB0aW1lLlxuICpcbiAqIFRoYXQgc2FpZCwgaGVyZSdzIGhvdyB5b3UgY2FuIGNvbXBsZXRlbHkgZGlzYWJsZSBTQ0U6XG4gKlxuICogYGBgXG4gKiBhbmd1bGFyLm1vZHVsZSgnbXlBcHBXaXRoU2NlRGlzYWJsZWRteUFwcCcsIFtdKS5jb25maWcoZnVuY3Rpb24oJHNjZVByb3ZpZGVyKSB7XG4gKiAgIC8vIENvbXBsZXRlbHkgZGlzYWJsZSBTQ0UuICBGb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IVxuICogICAvLyBEbyBub3QgdXNlIGluIG5ldyBwcm9qZWN0cy5cbiAqICAgJHNjZVByb3ZpZGVyLmVuYWJsZWQoZmFsc2UpO1xuICogfSk7XG4gKiBgYGBcbiAqXG4gKi9cbi8qIGpzaGludCBtYXhsZW46IDEwMCAqL1xuXG5mdW5jdGlvbiAkU2NlUHJvdmlkZXIoKSB7XG4gIHZhciBlbmFibGVkID0gdHJ1ZTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkc2NlUHJvdmlkZXIjZW5hYmxlZFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiBwcm92aWRlZCwgdGhlbiBlbmFibGVzL2Rpc2FibGVzIFNDRS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBTQ0UgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRW5hYmxlcy9kaXNhYmxlcyBTQ0UgYW5kIHJldHVybnMgdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAqL1xuICB0aGlzLmVuYWJsZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBlbmFibGVkID0gISF2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGVuYWJsZWQ7XG4gIH07XG5cblxuICAvKiBEZXNpZ24gbm90ZXMgb24gdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gZm9yIFNDRS5cbiAgICpcbiAgICogVGhlIEFQSSBjb250cmFjdCBmb3IgdGhlIFNDRSBkZWxlZ2F0ZVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIFRoZSBTQ0UgZGVsZWdhdGUgb2JqZWN0IG11c3QgcHJvdmlkZSB0aGUgZm9sbG93aW5nIDMgbWV0aG9kczpcbiAgICpcbiAgICogLSB0cnVzdEFzKGNvbnRleHRFbnVtLCB2YWx1ZSlcbiAgICogICAgIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gdGVsbCB0aGUgU0NFIHNlcnZpY2UgdGhhdCB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgT0sgdG8gdXNlIGluIHRoZVxuICAgKiAgICAgY29udGV4dHMgc3BlY2lmaWVkIGJ5IGNvbnRleHRFbnVtLiAgSXQgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBhY2NlcHRlZCBieVxuICAgKiAgICAgZ2V0VHJ1c3RlZCgpIGZvciBhIGNvbXBhdGlibGUgY29udGV4dEVudW0gYW5kIHJldHVybiB0aGlzIHZhbHVlLlxuICAgKlxuICAgKiAtIHZhbHVlT2YodmFsdWUpXG4gICAqICAgICBGb3IgdmFsdWVzIHRoYXQgd2VyZSBub3QgcHJvZHVjZWQgYnkgdHJ1c3RBcygpLCByZXR1cm4gdGhlbSBhcyBpcy4gIEZvciB2YWx1ZXMgdGhhdCB3ZXJlXG4gICAqICAgICBwcm9kdWNlZCBieSB0cnVzdEFzKCksIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyBpbnB1dCB2YWx1ZSB0byB0cnVzdEFzLiAgQmFzaWNhbGx5LCBpZlxuICAgKiAgICAgdHJ1c3RBcyBpcyB3cmFwcGluZyB0aGUgZ2l2ZW4gdmFsdWVzIGludG8gc29tZSB0eXBlLCB0aGlzIG9wZXJhdGlvbiB1bndyYXBzIGl0IHdoZW4gZ2l2ZW5cbiAgICogICAgIHN1Y2ggYSB2YWx1ZS5cbiAgICpcbiAgICogLSBnZXRUcnVzdGVkKGNvbnRleHRFbnVtLCB2YWx1ZSlcbiAgICogICAgIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHJldHVybiB0aGUgYSB2YWx1ZSB0aGF0IGlzIHNhZmUgdG8gdXNlIGluIHRoZSBjb250ZXh0IHNwZWNpZmllZCBieVxuICAgKiAgICAgY29udGV4dEVudW0gb3IgdGhyb3cgYW5kIGV4Y2VwdGlvbiBvdGhlcndpc2UuXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgY29udHJhY3QgZGVsaWJlcmF0ZWx5IGRvZXMgTk9UIHN0YXRlIHRoYXQgdmFsdWVzIHJldHVybmVkIGJ5IHRydXN0QXMoKSBtdXN0IGJlXG4gICAqIG9wYXF1ZSBvciB3cmFwcGVkIGluIHNvbWUgaG9sZGVyIG9iamVjdC4gIFRoYXQgaGFwcGVucyB0byBiZSBhbiBpbXBsZW1lbnRhdGlvbiBkZXRhaWwuICBGb3JcbiAgICogaW5zdGFuY2UsIGFuIGltcGxlbWVudGF0aW9uIGNvdWxkIG1haW50YWluIGEgcmVnaXN0cnkgb2YgYWxsIHRydXN0ZWQgb2JqZWN0cyBieSBjb250ZXh0LiAgSW5cbiAgICogc3VjaCBhIGNhc2UsIHRydXN0QXMoKSB3b3VsZCByZXR1cm4gdGhlIHNhbWUgb2JqZWN0IHRoYXQgd2FzIHBhc3NlZCBpbi4gIGdldFRydXN0ZWQoKSB3b3VsZFxuICAgKiByZXR1cm4gdGhlIHNhbWUgb2JqZWN0IHBhc3NlZCBpbiBpZiBpdCB3YXMgZm91bmQgaW4gdGhlIHJlZ2lzdHJ5IHVuZGVyIGEgY29tcGF0aWJsZSBjb250ZXh0IG9yXG4gICAqIHRocm93IGFuIGV4Y2VwdGlvbiBvdGhlcndpc2UuICBBbiBpbXBsZW1lbnRhdGlvbiBtaWdodCBvbmx5IHdyYXAgdmFsdWVzIHNvbWUgb2YgdGhlIHRpbWUgYmFzZWRcbiAgICogb24gc29tZSBjcml0ZXJpYS4gIGdldFRydXN0ZWQoKSBtaWdodCByZXR1cm4gYSB2YWx1ZSBhbmQgbm90IHRocm93IGFuIGV4Y2VwdGlvbiBmb3Igc3BlY2lhbFxuICAgKiBjb25zdGFudHMgb3Igb2JqZWN0cyBldmVuIGlmIG5vdCB3cmFwcGVkLiAgQWxsIHN1Y2ggaW1wbGVtZW50YXRpb25zIGZ1bGZpbGwgdGhpcyBjb250cmFjdC5cbiAgICpcbiAgICpcbiAgICogQSBub3RlIG9uIHRoZSBpbmhlcml0YW5jZSBtb2RlbCBmb3IgU0NFIGNvbnRleHRzXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBJJ3ZlIHVzZWQgaW5oZXJpdGFuY2UgYW5kIG1hZGUgUkVTT1VSQ0VfVVJMIHdyYXBwZWQgdHlwZXMgYSBzdWJ0eXBlIG9mIFVSTCB3cmFwcGVkIHR5cGVzLiAgVGhpc1xuICAgKiBpcyBwdXJlbHkgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlscy5cbiAgICpcbiAgICogVGhlIGNvbnRyYWN0IGlzIHNpbXBseSB0aGlzOlxuICAgKlxuICAgKiAgICAgZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpIHN1Y2NlZWRpbmcgaW1wbGllcyB0aGF0IGdldFRydXN0ZWQoJHNjZS5VUkwsIHZhbHVlKVxuICAgKiAgICAgd2lsbCBhbHNvIHN1Y2NlZWQuXG4gICAqXG4gICAqIEluaGVyaXRhbmNlIGhhcHBlbnMgdG8gY2FwdHVyZSB0aGlzIGluIGEgbmF0dXJhbCB3YXkuICBJbiBzb21lIGZ1dHVyZSwgd2VcbiAgICogbWF5IG5vdCB1c2UgaW5oZXJpdGFuY2UgYW55bW9yZS4gIFRoYXQgaXMgT0sgYmVjYXVzZSBubyBjb2RlIG91dHNpZGUgb2ZcbiAgICogc2NlLmpzIGFuZCBzY2VTcGVjcy5qcyB3b3VsZCBuZWVkIHRvIGJlIGF3YXJlIG9mIHRoaXMgZGV0YWlsLlxuICAgKi9cblxuICB0aGlzLiRnZXQgPSBbJyRwYXJzZScsICckc2NlRGVsZWdhdGUnLCBmdW5jdGlvbihcbiAgICAgICAgICAgICAgICAkcGFyc2UsICAgJHNjZURlbGVnYXRlKSB7XG4gICAgLy8gUHJlcmVxOiBFbnN1cmUgdGhhdCB3ZSdyZSBub3QgcnVubmluZyBpbiBJRTwxMSBxdWlya3MgbW9kZS4gIEluIHRoYXQgbW9kZSwgSUUgPCAxMSBhbGxvd1xuICAgIC8vIHRoZSBcImV4cHJlc3Npb24oamF2YXNjcmlwdCBleHByZXNzaW9uKVwiIHN5bnRheCB3aGljaCBpcyBpbnNlY3VyZS5cbiAgICBpZiAoZW5hYmxlZCAmJiBtc2llIDwgOCkge1xuICAgICAgdGhyb3cgJHNjZU1pbkVycignaWVxdWlya3MnLFxuICAgICAgICAnU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgZG9lcyBub3Qgc3VwcG9ydCBJbnRlcm5ldCBFeHBsb3JlciB2ZXJzaW9uIDwgMTEgaW4gcXVpcmtzICcgK1xuICAgICAgICAnbW9kZS4gIFlvdSBjYW4gZml4IHRoaXMgYnkgYWRkaW5nIHRoZSB0ZXh0IDwhZG9jdHlwZSBodG1sPiB0byB0aGUgdG9wIG9mIHlvdXIgSFRNTCAnICtcbiAgICAgICAgJ2RvY3VtZW50LiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIHNjZSA9IHNoYWxsb3dDb3B5KFNDRV9DT05URVhUUyk7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNpc0VuYWJsZWRcbiAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBTQ0UgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLiAgSWYgeW91IHdhbnQgdG8gc2V0IHRoZSB2YWx1ZSwgeW91XG4gICAgICogaGF2ZSB0byBkbyBpdCBhdCBtb2R1bGUgY29uZmlnIHRpbWUgb24ge0BsaW5rIG5nLiRzY2VQcm92aWRlciAkc2NlUHJvdmlkZXJ9LlxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiBTQ0UgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBzY2UuaXNFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICB9O1xuICAgIHNjZS50cnVzdEFzID0gJHNjZURlbGVnYXRlLnRydXN0QXM7XG4gICAgc2NlLmdldFRydXN0ZWQgPSAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZDtcbiAgICBzY2UudmFsdWVPZiA9ICRzY2VEZWxlZ2F0ZS52YWx1ZU9mO1xuXG4gICAgaWYgKCFlbmFibGVkKSB7XG4gICAgICBzY2UudHJ1c3RBcyA9IHNjZS5nZXRUcnVzdGVkID0gZnVuY3Rpb24odHlwZSwgdmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuICAgICAgc2NlLnZhbHVlT2YgPSBpZGVudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBDb252ZXJ0cyBBbmd1bGFyIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGludG8gYSBmdW5jdGlvbi4gIFRoaXMgaXMgbGlrZSB7QGxpbmtcbiAgICAgKiBuZy4kcGFyc2UgJHBhcnNlfSBhbmQgaXMgaWRlbnRpY2FsIHdoZW4gdGhlIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIGNvbnN0YW50LiAgT3RoZXJ3aXNlLCBpdFxuICAgICAqIHdyYXBzIHRoZSBleHByZXNzaW9uIGluIGEgY2FsbCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZCgqdHlwZSosXG4gICAgICogKnJlc3VsdCopfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgU0NFIGNvbnRleHQgaW4gd2hpY2ggdGhpcyByZXN1bHQgd2lsbCBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IGEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ3NcbiAgICAgKiAgICAgIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXG4gICAgICogICAgICBgY29udGV4dGAuXG4gICAgICovXG4gICAgc2NlLnBhcnNlQXMgPSBmdW5jdGlvbiBzY2VQYXJzZUFzKHR5cGUsIGV4cHIpIHtcbiAgICAgIHZhciBwYXJzZWQgPSAkcGFyc2UoZXhwcik7XG4gICAgICBpZiAocGFyc2VkLmxpdGVyYWwgJiYgcGFyc2VkLmNvbnN0YW50KSB7XG4gICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHBhcnNlKGV4cHIsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHNjZS5nZXRUcnVzdGVkKHR5cGUsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIERlbGVnYXRlcyB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0uICBBcyBzdWNoLFxuICAgICAqIHJldHVybnMgYW4gb2JqZWN0IHRoYXQgaXMgdHJ1c3RlZCBieSBhbmd1bGFyIGZvciB1c2UgaW4gc3BlY2lmaWVkIHN0cmljdCBjb250ZXh0dWFsXG4gICAgICogZXNjYXBpbmcgY29udGV4dHMgKHN1Y2ggYXMgbmctYmluZC1odG1sLCBuZy1pbmNsdWRlLCBhbnkgc3JjIGF0dHJpYnV0ZVxuICAgICAqIGludGVycG9sYXRpb24sIGFueSBkb20gZXZlbnQgYmluZGluZyBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBzdWNoIGFzIGZvciBvbmNsaWNrLCAgZXRjLilcbiAgICAgKiB0aGF0IHVzZXMgdGhlIHByb3ZpZGVkIHZhbHVlLiAgU2VlICoge0BsaW5rIG5nLiRzY2UgJHNjZX0gZm9yIGVuYWJsaW5nIHN0cmljdCBjb250ZXh0dWFsXG4gICAgICogZXNjYXBpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUga2luZCBvZiBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgc2FmZSBmb3IgdXNlLiAgZS5nLiB1cmwsXG4gICAgICogICByZXNvdXJjZV91cmwsIGh0bWwsIGpzIGFuZCBjc3MuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdGhhdCB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkIHRydXN0ZWQvc2FmZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gQSB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHRvIHN0YW5kIGluIGZvciB0aGUgcHJvdmlkZWQgYHZhbHVlYCBpbiBwbGFjZXNcbiAgICAgKiB3aGVyZSBBbmd1bGFyIGV4cGVjdHMgYSAkc2NlLnRydXN0QXMoKSByZXR1cm4gdmFsdWUuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzSHRtbFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNIdG1sKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5IVE1MLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gdHJ1c3RBcy5cbiAgICAgKiBAcmV0dXJucyB7Kn0gQW4gb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkSHRtbFxuICAgICAqICAgICAkc2NlLmdldFRydXN0ZWRIdG1sKHZhbHVlKX0gdG8gb2J0YWluIHRoZSBvcmlnaW5hbCB2YWx1ZS4gIChwcml2aWxlZ2VkIGRpcmVjdGl2ZXNcbiAgICAgKiAgICAgb25seSBhY2NlcHQgZXhwcmVzc2lvbnMgdGhhdCBhcmUgZWl0aGVyIGxpdGVyYWwgY29uc3RhbnRzIG9yIGFyZSB0aGVcbiAgICAgKiAgICAgcmV0dXJuIHZhbHVlIG9mIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfS4pXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UudHJ1c3RBc1VybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gdHJ1c3RBcy5cbiAgICAgKiBAcmV0dXJucyB7Kn0gQW4gb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkVXJsXG4gICAgICogICAgICRzY2UuZ2V0VHJ1c3RlZFVybCh2YWx1ZSl9IHRvIG9idGFpbiB0aGUgb3JpZ2luYWwgdmFsdWUuICAocHJpdmlsZWdlZCBkaXJlY3RpdmVzXG4gICAgICogICAgIG9ubHkgYWNjZXB0IGV4cHJlc3Npb25zIHRoYXQgYXJlIGVpdGhlciBsaXRlcmFsIGNvbnN0YW50cyBvciBhcmUgdGhlXG4gICAgICogICAgIHJldHVybiB2YWx1ZSBvZiB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc30uKVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc1Jlc291cmNlVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB0cnVzdEFzLlxuICAgICAqIEByZXR1cm5zIHsqfSBBbiBvYmplY3QgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxuICAgICAqICAgICAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybCh2YWx1ZSl9IHRvIG9idGFpbiB0aGUgb3JpZ2luYWwgdmFsdWUuICAocHJpdmlsZWdlZCBkaXJlY3RpdmVzXG4gICAgICogICAgIG9ubHkgYWNjZXB0IGV4cHJlc3Npb25zIHRoYXQgYXJlIGVpdGhlciBsaXRlcmFsIGNvbnN0YW50cyBvciBhcmUgdGhlIHJldHVyblxuICAgICAqICAgICB2YWx1ZSBvZiB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc30uKVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc0pzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UudHJ1c3RBc0pzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5KUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRydXN0QXMuXG4gICAgICogQHJldHVybnMgeyp9IEFuIG9iamVjdCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8ge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZEpzXG4gICAgICogICAgICRzY2UuZ2V0VHJ1c3RlZEpzKHZhbHVlKX0gdG8gb2J0YWluIHRoZSBvcmlnaW5hbCB2YWx1ZS4gIChwcml2aWxlZ2VkIGRpcmVjdGl2ZXNcbiAgICAgKiAgICAgb25seSBhY2NlcHQgZXhwcmVzc2lvbnMgdGhhdCBhcmUgZWl0aGVyIGxpdGVyYWwgY29uc3RhbnRzIG9yIGFyZSB0aGVcbiAgICAgKiAgICAgcmV0dXJuIHZhbHVlIG9mIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfS4pXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBEZWxlZ2F0ZXMgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZGB9LiAgQXMgc3VjaCxcbiAgICAgKiB0YWtlcyB0aGUgcmVzdWx0IG9mIGEge0BsaW5rIG5nLiRzY2UjdHJ1c3RBcyBgJHNjZS50cnVzdEFzYH0oKSBjYWxsIGFuZCByZXR1cm5zIHRoZVxuICAgICAqIG9yaWdpbmFsbHkgc3VwcGxpZWQgdmFsdWUgaWYgdGhlIHF1ZXJpZWQgY29udGV4dCB0eXBlIGlzIGEgc3VwZXJ0eXBlIG9mIHRoZSBjcmVhdGVkIHR5cGUuXG4gICAgICogSWYgdGhpcyBjb25kaXRpb24gaXNuJ3Qgc2F0aXNmaWVkLCB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHRvIGJlIHVzZWQuXG4gICAgICogQHBhcmFtIHsqfSBtYXliZVRydXN0ZWQgVGhlIHJlc3VsdCBvZiBhIHByaW9yIHtAbGluayBuZy4kc2NlI3RydXN0QXMgYCRzY2UudHJ1c3RBc2B9XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgY2FsbC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIHRoZSB3YXMgb3JpZ2luYWxseSBwcm92aWRlZCB0b1xuICAgICAqICAgICAgICAgICAgICB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzIGAkc2NlLnRydXN0QXNgfSBpZiB2YWxpZCBpbiB0aGlzIGNvbnRleHQuXG4gICAgICogICAgICAgICAgICAgIE90aGVyd2lzZSwgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRIdG1sXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZEh0bWwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkhUTUwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlLmdldFRydXN0ZWRgLlxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGAkc2NlLmdldFRydXN0ZWQoJHNjZS5IVE1MLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkQ3NzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZENzcyh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuQ1NTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuQ1NTLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZFVybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkUmVzb3VyY2VVcmxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkSnNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkSnModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkpTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuSlMsIHZhbHVlKWBcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNIdG1sXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc0h0bWwoZXhwcmVzc2lvbiBzdHJpbmcpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuSFRNTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IGEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ3NcbiAgICAgKiAgICAgIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXG4gICAgICogICAgICBgY29udGV4dGAuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzQ3NzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc0Nzcyh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5DU1MsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gICAgICpcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdzXG4gICAgICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpblxuICAgICAqICAgICAgYGNvbnRleHRgLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1VybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gYSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xuICAgICAqICAgICAgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW5cbiAgICAgKiAgICAgIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNSZXNvdXJjZVVybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNSZXNvdXJjZVVybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gICAgICpcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdzXG4gICAgICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpblxuICAgICAqICAgICAgYGNvbnRleHRgLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc0pzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc0pzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlQXMgYCRzY2UucGFyc2VBcygkc2NlLkpTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gYSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xuICAgICAqICAgICAgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW5cbiAgICAgKiAgICAgIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8vIFNob3J0aGFuZCBkZWxlZ2F0aW9ucy5cbiAgICB2YXIgcGFyc2UgPSBzY2UucGFyc2VBcyxcbiAgICAgICAgZ2V0VHJ1c3RlZCA9IHNjZS5nZXRUcnVzdGVkLFxuICAgICAgICB0cnVzdEFzID0gc2NlLnRydXN0QXM7XG5cbiAgICBmb3JFYWNoKFNDRV9DT05URVhUUywgZnVuY3Rpb24oZW51bVZhbHVlLCBuYW1lKSB7XG4gICAgICB2YXIgbE5hbWUgPSBsb3dlcmNhc2UobmFtZSk7XG4gICAgICBzY2VbY2FtZWxDYXNlKFwicGFyc2VfYXNfXCIgKyBsTmFtZSldID0gZnVuY3Rpb24oZXhwcikge1xuICAgICAgICByZXR1cm4gcGFyc2UoZW51bVZhbHVlLCBleHByKTtcbiAgICAgIH07XG4gICAgICBzY2VbY2FtZWxDYXNlKFwiZ2V0X3RydXN0ZWRfXCIgKyBsTmFtZSldID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGdldFRydXN0ZWQoZW51bVZhbHVlLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgc2NlW2NhbWVsQ2FzZShcInRydXN0X2FzX1wiICsgbE5hbWUpXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0cnVzdEFzKGVudW1WYWx1ZSwgdmFsdWUpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzY2U7XG4gIH1dO1xufVxuXG4vKipcbiAqICEhISBUaGlzIGlzIGFuIHVuZG9jdW1lbnRlZCBcInByaXZhdGVcIiBzZXJ2aWNlICEhIVxuICpcbiAqIEBuYW1lICRzbmlmZmVyXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xuICogQHJlcXVpcmVzICRkb2N1bWVudFxuICpcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaGlzdG9yeSBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgaHRtbDUgaGlzdG9yeSBhcGkgP1xuICogQHByb3BlcnR5IHtib29sZWFufSB0cmFuc2l0aW9ucyBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgQ1NTIHRyYW5zaXRpb24gZXZlbnRzID9cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYW5pbWF0aW9ucyBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgQ1NTIGFuaW1hdGlvbiBldmVudHMgP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBpcyB2ZXJ5IHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiB0ZXN0aW5nIGJyb3dzZXIncyBmZWF0dXJlcy5cbiAqL1xuZnVuY3Rpb24gJFNuaWZmZXJQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRkb2N1bWVudCcsIGZ1bmN0aW9uKCR3aW5kb3csICRkb2N1bWVudCkge1xuICAgIHZhciBldmVudFN1cHBvcnQgPSB7fSxcbiAgICAgICAgYW5kcm9pZCA9XG4gICAgICAgICAgaW50KCgvYW5kcm9pZCAoXFxkKykvLmV4ZWMobG93ZXJjYXNlKCgkd2luZG93Lm5hdmlnYXRvciB8fCB7fSkudXNlckFnZW50KSkgfHwgW10pWzFdKSxcbiAgICAgICAgYm94ZWUgPSAvQm94ZWUvaS50ZXN0KCgkd2luZG93Lm5hdmlnYXRvciB8fCB7fSkudXNlckFnZW50KSxcbiAgICAgICAgZG9jdW1lbnQgPSAkZG9jdW1lbnRbMF0gfHwge30sXG4gICAgICAgIHZlbmRvclByZWZpeCxcbiAgICAgICAgdmVuZG9yUmVnZXggPSAvXihNb3p8d2Via2l0fG1zKSg/PVtBLVpdKS8sXG4gICAgICAgIGJvZHlTdHlsZSA9IGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5zdHlsZSxcbiAgICAgICAgdHJhbnNpdGlvbnMgPSBmYWxzZSxcbiAgICAgICAgYW5pbWF0aW9ucyA9IGZhbHNlLFxuICAgICAgICBtYXRjaDtcblxuICAgIGlmIChib2R5U3R5bGUpIHtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gYm9keVN0eWxlKSB7XG4gICAgICAgIGlmIChtYXRjaCA9IHZlbmRvclJlZ2V4LmV4ZWMocHJvcCkpIHtcbiAgICAgICAgICB2ZW5kb3JQcmVmaXggPSBtYXRjaFswXTtcbiAgICAgICAgICB2ZW5kb3JQcmVmaXggPSB2ZW5kb3JQcmVmaXguc3Vic3RyKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyB2ZW5kb3JQcmVmaXguc3Vic3RyKDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdmVuZG9yUHJlZml4KSB7XG4gICAgICAgIHZlbmRvclByZWZpeCA9ICgnV2Via2l0T3BhY2l0eScgaW4gYm9keVN0eWxlKSAmJiAnd2Via2l0JztcbiAgICAgIH1cblxuICAgICAgdHJhbnNpdGlvbnMgPSAhISgoJ3RyYW5zaXRpb24nIGluIGJvZHlTdHlsZSkgfHwgKHZlbmRvclByZWZpeCArICdUcmFuc2l0aW9uJyBpbiBib2R5U3R5bGUpKTtcbiAgICAgIGFuaW1hdGlvbnMgID0gISEoKCdhbmltYXRpb24nIGluIGJvZHlTdHlsZSkgfHwgKHZlbmRvclByZWZpeCArICdBbmltYXRpb24nIGluIGJvZHlTdHlsZSkpO1xuXG4gICAgICBpZiAoYW5kcm9pZCAmJiAoIXRyYW5zaXRpb25zIHx8ICAhYW5pbWF0aW9ucykpIHtcbiAgICAgICAgdHJhbnNpdGlvbnMgPSBpc1N0cmluZyhkb2N1bWVudC5ib2R5LnN0eWxlLndlYmtpdFRyYW5zaXRpb24pO1xuICAgICAgICBhbmltYXRpb25zID0gaXNTdHJpbmcoZG9jdW1lbnQuYm9keS5zdHlsZS53ZWJraXRBbmltYXRpb24pO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIEFuZHJvaWQgaGFzIGhpc3RvcnkucHVzaFN0YXRlLCBidXQgaXQgZG9lcyBub3QgdXBkYXRlIGxvY2F0aW9uIGNvcnJlY3RseVxuICAgICAgLy8gc28gbGV0J3Mgbm90IHVzZSB0aGUgaGlzdG9yeSBBUEkgYXQgYWxsLlxuICAgICAgLy8gaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2FuZHJvaWQvaXNzdWVzL2RldGFpbD9pZD0xNzQ3MVxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTA0XG5cbiAgICAgIC8vIG9sZGVyIHdlYmtpdCBicm93c2VyICg1MzMuOSkgb24gQm94ZWUgYm94IGhhcyBleGFjdGx5IHRoZSBzYW1lIHByb2JsZW0gYXMgQW5kcm9pZCBoYXNcbiAgICAgIC8vIHNvIGxldCdzIG5vdCB1c2UgdGhlIGhpc3RvcnkgQVBJIGFsc29cbiAgICAgIC8vIFdlIGFyZSBwdXJwb3NlZnVsbHkgdXNpbmcgYCEoYW5kcm9pZCA8IDQpYCB0byBjb3ZlciB0aGUgY2FzZSB3aGVuIGBhbmRyb2lkYCBpcyB1bmRlZmluZWRcbiAgICAgIC8vIGpzaGludCAtVzAxOFxuICAgICAgaGlzdG9yeTogISEoJHdpbmRvdy5oaXN0b3J5ICYmICR3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUgJiYgIShhbmRyb2lkIDwgNCkgJiYgIWJveGVlKSxcbiAgICAgIC8vIGpzaGludCArVzAxOFxuICAgICAgaGFzRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIC8vIElFOSBpbXBsZW1lbnRzICdpbnB1dCcgZXZlbnQgaXQncyBzbyBmdWJhcmVkIHRoYXQgd2UgcmF0aGVyIHByZXRlbmQgdGhhdCBpdCBkb2Vzbid0IGhhdmVcbiAgICAgICAgLy8gaXQuIEluIHBhcnRpY3VsYXIgdGhlIGV2ZW50IGlzIG5vdCBmaXJlZCB3aGVuIGJhY2tzcGFjZSBvciBkZWxldGUga2V5IGFyZSBwcmVzc2VkIG9yXG4gICAgICAgIC8vIHdoZW4gY3V0IG9wZXJhdGlvbiBpcyBwZXJmb3JtZWQuXG4gICAgICAgIC8vIElFMTArIGltcGxlbWVudHMgJ2lucHV0JyBldmVudCBidXQgaXQgZXJyb25lb3VzbHkgZmlyZXMgdW5kZXIgdmFyaW91cyBzaXR1YXRpb25zLFxuICAgICAgICAvLyBlLmcuIHdoZW4gcGxhY2Vob2xkZXIgY2hhbmdlcywgb3IgYSBmb3JtIGlzIGZvY3VzZWQuXG4gICAgICAgIGlmIChldmVudCA9PT0gJ2lucHV0JyAmJiBtc2llIDw9IDExKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKGV2ZW50U3VwcG9ydFtldmVudF0pKSB7XG4gICAgICAgICAgdmFyIGRpdkVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIGV2ZW50U3VwcG9ydFtldmVudF0gPSAnb24nICsgZXZlbnQgaW4gZGl2RWxtO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV2ZW50U3VwcG9ydFtldmVudF07XG4gICAgICB9LFxuICAgICAgY3NwOiBjc3AoKSxcbiAgICAgIHZlbmRvclByZWZpeDogdmVuZG9yUHJlZml4LFxuICAgICAgdHJhbnNpdGlvbnM6IHRyYW5zaXRpb25zLFxuICAgICAgYW5pbWF0aW9uczogYW5pbWF0aW9ucyxcbiAgICAgIGFuZHJvaWQ6IGFuZHJvaWRcbiAgICB9O1xuICB9XTtcbn1cblxudmFyICRjb21waWxlTWluRXJyID0gbWluRXJyKCckY29tcGlsZScpO1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkdGVtcGxhdGVSZXF1ZXN0XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYCR0ZW1wbGF0ZVJlcXVlc3RgIHNlcnZpY2UgZG93bmxvYWRzIHRoZSBwcm92aWRlZCB0ZW1wbGF0ZSB1c2luZyBgJGh0dHBgIGFuZCwgdXBvbiBzdWNjZXNzLFxuICogc3RvcmVzIHRoZSBjb250ZW50cyBpbnNpZGUgb2YgYCR0ZW1wbGF0ZUNhY2hlYC4gSWYgdGhlIEhUVFAgcmVxdWVzdCBmYWlscyBvciB0aGUgcmVzcG9uc2UgZGF0YVxuICogb2YgdGhlIEhUVFAgcmVxdWVzdCBpcyBlbXB0eSwgYSBgJGNvbXBpbGVgIGVycm9yIHdpbGwgYmUgdGhyb3duICh0aGUgZXhjZXB0aW9uIGNhbiBiZSB0aHdhcnRlZFxuICogYnkgc2V0dGluZyB0aGUgMm5kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gdG8gdHJ1ZSkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRwbCBUaGUgSFRUUCByZXF1ZXN0IHRlbXBsYXRlIFVSTFxuICogQHBhcmFtIHtib29sZWFuPX0gaWdub3JlUmVxdWVzdEVycm9yIFdoZXRoZXIgb3Igbm90IHRvIGlnbm9yZSB0aGUgZXhjZXB0aW9uIHdoZW4gdGhlIHJlcXVlc3QgZmFpbHMgb3IgdGhlIHRlbXBsYXRlIGlzIGVtcHR5XG4gKlxuICogQHJldHVybiB7UHJvbWlzZX0gdGhlIEhUVFAgUHJvbWlzZSBmb3IgdGhlIGdpdmVuLlxuICpcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0b3RhbFBlbmRpbmdSZXF1ZXN0cyB0b3RhbCBhbW91bnQgb2YgcGVuZGluZyB0ZW1wbGF0ZSByZXF1ZXN0cyBiZWluZyBkb3dubG9hZGVkLlxuICovXG5mdW5jdGlvbiAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHRlbXBsYXRlQ2FjaGUnLCAnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSwgJGh0dHAsICRxKSB7XG4gICAgZnVuY3Rpb24gaGFuZGxlUmVxdWVzdEZuKHRwbCwgaWdub3JlUmVxdWVzdEVycm9yKSB7XG4gICAgICBoYW5kbGVSZXF1ZXN0Rm4udG90YWxQZW5kaW5nUmVxdWVzdHMrKztcblxuICAgICAgdmFyIHRyYW5zZm9ybVJlc3BvbnNlID0gJGh0dHAuZGVmYXVsdHMgJiYgJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2U7XG5cbiAgICAgIGlmIChpc0FycmF5KHRyYW5zZm9ybVJlc3BvbnNlKSkge1xuICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZSA9IHRyYW5zZm9ybVJlc3BvbnNlLmZpbHRlcihmdW5jdGlvbih0cmFuc2Zvcm1lcikge1xuICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1lciAhPT0gZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zZm9ybVJlc3BvbnNlID09PSBkZWZhdWx0SHR0cFJlc3BvbnNlVHJhbnNmb3JtKSB7XG4gICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIGh0dHBPcHRpb25zID0ge1xuICAgICAgICBjYWNoZTogJHRlbXBsYXRlQ2FjaGUsXG4gICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiB0cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuICRodHRwLmdldCh0cGwsIGh0dHBPcHRpb25zKVxuICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICBoYW5kbGVSZXF1ZXN0Rm4udG90YWxQZW5kaW5nUmVxdWVzdHMtLTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSwgaGFuZGxlRXJyb3IpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcihyZXNwKSB7XG4gICAgICAgIGlmICghaWdub3JlUmVxdWVzdEVycm9yKSB7XG4gICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbG9hZCcsICdGYWlsZWQgdG8gbG9hZCB0ZW1wbGF0ZTogezB9JywgdHBsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3ApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cyA9IDA7XG5cbiAgICByZXR1cm4gaGFuZGxlUmVxdWVzdEZuO1xuICB9XTtcbn1cblxuZnVuY3Rpb24gJCRUZXN0YWJpbGl0eVByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJGJyb3dzZXInLCAnJGxvY2F0aW9uJyxcbiAgICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAgICRicm93c2VyLCAgICRsb2NhdGlvbikge1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJHRlc3RhYmlsaXR5XG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBUaGUgcHJpdmF0ZSAkJHRlc3RhYmlsaXR5IHNlcnZpY2UgcHJvdmlkZXMgYSBjb2xsZWN0aW9uIG9mIG1ldGhvZHMgZm9yIHVzZSB3aGVuIGRlYnVnZ2luZ1xuICAgICAqIG9yIGJ5IGF1dG9tYXRlZCB0ZXN0IGFuZCBkZWJ1Z2dpbmcgdG9vbHMuXG4gICAgICovXG4gICAgdmFyIHRlc3RhYmlsaXR5ID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSAkJHRlc3RhYmlsaXR5I2ZpbmRCaW5kaW5nc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBlbGVtZW50cyB0aGF0IGFyZSBib3VuZCAodmlhIG5nLWJpbmQgb3Ige3t9fSlcbiAgICAgKiB0byBleHByZXNzaW9ucyBtYXRjaGluZyB0aGUgaW5wdXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgcm9vdCB0byBzZWFyY2ggZnJvbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBUaGUgYmluZGluZyBleHByZXNzaW9uIHRvIG1hdGNoLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0X2V4YWN0TWF0Y2ggSWYgdHJ1ZSwgb25seSByZXR1cm5zIGV4YWN0IG1hdGNoZXNcbiAgICAgKiAgICAgZm9yIHRoZSBleHByZXNzaW9uLiBGaWx0ZXJzIGFuZCB3aGl0ZXNwYWNlIGFyZSBpZ25vcmVkLlxuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LmZpbmRCaW5kaW5ncyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGV4cHJlc3Npb24sIG9wdF9leGFjdE1hdGNoKSB7XG4gICAgICB2YXIgYmluZGluZ3MgPSBlbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ25nLWJpbmRpbmcnKTtcbiAgICAgIHZhciBtYXRjaGVzID0gW107XG4gICAgICBmb3JFYWNoKGJpbmRpbmdzLCBmdW5jdGlvbihiaW5kaW5nKSB7XG4gICAgICAgIHZhciBkYXRhQmluZGluZyA9IGFuZ3VsYXIuZWxlbWVudChiaW5kaW5nKS5kYXRhKCckYmluZGluZycpO1xuICAgICAgICBpZiAoZGF0YUJpbmRpbmcpIHtcbiAgICAgICAgICBmb3JFYWNoKGRhdGFCaW5kaW5nLCBmdW5jdGlvbihiaW5kaW5nTmFtZSkge1xuICAgICAgICAgICAgaWYgKG9wdF9leGFjdE1hdGNoKSB7XG4gICAgICAgICAgICAgIHZhciBtYXRjaGVyID0gbmV3IFJlZ0V4cCgnKF58XFxcXHMpJyArIGVzY2FwZUZvclJlZ2V4cChleHByZXNzaW9uKSArICcoXFxcXHN8XFxcXHx8JCknKTtcbiAgICAgICAgICAgICAgaWYgKG1hdGNoZXIudGVzdChiaW5kaW5nTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goYmluZGluZyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChiaW5kaW5nTmFtZS5pbmRleE9mKGV4cHJlc3Npb24pICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGJpbmRpbmcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG1hdGNoZXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZmluZE1vZGVsc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBlbGVtZW50cyB0aGF0IGFyZSB0d28td2F5IGZvdW5kIHZpYSBuZy1tb2RlbCB0b1xuICAgICAqIGV4cHJlc3Npb25zIG1hdGNoaW5nIHRoZSBpbnB1dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCByb290IHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFRoZSBtb2RlbCBleHByZXNzaW9uIHRvIG1hdGNoLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0X2V4YWN0TWF0Y2ggSWYgdHJ1ZSwgb25seSByZXR1cm5zIGV4YWN0IG1hdGNoZXNcbiAgICAgKiAgICAgZm9yIHRoZSBleHByZXNzaW9uLlxuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LmZpbmRNb2RlbHMgPSBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9uLCBvcHRfZXhhY3RNYXRjaCkge1xuICAgICAgdmFyIHByZWZpeGVzID0gWyduZy0nLCAnZGF0YS1uZy0nLCAnbmdcXFxcOiddO1xuICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBwcmVmaXhlcy5sZW5ndGg7ICsrcCkge1xuICAgICAgICB2YXIgYXR0cmlidXRlRXF1YWxzID0gb3B0X2V4YWN0TWF0Y2ggPyAnPScgOiAnKj0nO1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSAnWycgKyBwcmVmaXhlc1twXSArICdtb2RlbCcgKyBhdHRyaWJ1dGVFcXVhbHMgKyAnXCInICsgZXhwcmVzc2lvbiArICdcIl0nO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZ2V0TG9jYXRpb25cbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IGZvciBnZXR0aW5nIHRoZSBsb2NhdGlvbiBpbiBhIGJyb3dzZXIgYWdub3N0aWMgd2F5LiBSZXR1cm5zXG4gICAgICogICAgIHRoZSBwYXRoLCBzZWFyY2gsIGFuZCBoYXNoLiAoZS5nLiAvcGF0aD9hPWIjaGFzaClcbiAgICAgKi9cbiAgICB0ZXN0YWJpbGl0eS5nZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRsb2NhdGlvbi51cmwoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNzZXRMb2NhdGlvblxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgZm9yIG5hdmlnYXRpbmcgdG8gYSBsb2NhdGlvbiB3aXRob3V0IGRvaW5nIGEgZnVsbCBwYWdlIHJlbG9hZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGxvY2F0aW9uIHVybCAocGF0aCwgc2VhcmNoIGFuZCBoYXNoLFxuICAgICAqICAgICBlLmcuIC9wYXRoP2E9YiNoYXNoKSB0byBnbyB0by5cbiAgICAgKi9cbiAgICB0ZXN0YWJpbGl0eS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgaWYgKHVybCAhPT0gJGxvY2F0aW9uLnVybCgpKSB7XG4gICAgICAgICRsb2NhdGlvbi51cmwodXJsKTtcbiAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjd2hlblN0YWJsZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQ2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gJHRpbWVvdXQgYW5kICRodHRwIHJlcXVlc3RzIGFyZSBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LndoZW5TdGFibGUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgJGJyb3dzZXIubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyhjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIHJldHVybiB0ZXN0YWJpbGl0eTtcbiAgfV07XG59XG5cbmZ1bmN0aW9uICRUaW1lb3V0UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckcScsICckJHEnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLFxuICAgICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICAgJGJyb3dzZXIsICAgJHEsICAgJCRxLCAgICRleGNlcHRpb25IYW5kbGVyKSB7XG4gICAgdmFyIGRlZmVycmVkcyA9IHt9O1xuXG5cbiAgICAgLyoqXG4gICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICAqIEBuYW1lICR0aW1lb3V0XG4gICAgICAqXG4gICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgKiBBbmd1bGFyJ3Mgd3JhcHBlciBmb3IgYHdpbmRvdy5zZXRUaW1lb3V0YC4gVGhlIGBmbmAgZnVuY3Rpb24gaXMgd3JhcHBlZCBpbnRvIGEgdHJ5L2NhdGNoXG4gICAgICAqIGJsb2NrIGFuZCBkZWxlZ2F0ZXMgYW55IGV4Y2VwdGlvbnMgdG9cbiAgICAgICoge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxuICAgICAgKlxuICAgICAgKiBUaGUgcmV0dXJuIHZhbHVlIG9mIHJlZ2lzdGVyaW5nIGEgdGltZW91dCBmdW5jdGlvbiBpcyBhIHByb21pc2UsIHdoaWNoIHdpbGwgYmUgcmVzb2x2ZWQgd2hlblxuICAgICAgKiB0aGUgdGltZW91dCBpcyByZWFjaGVkIGFuZCB0aGUgdGltZW91dCBmdW5jdGlvbiBpcyBleGVjdXRlZC5cbiAgICAgICpcbiAgICAgICogVG8gY2FuY2VsIGEgdGltZW91dCByZXF1ZXN0LCBjYWxsIGAkdGltZW91dC5jYW5jZWwocHJvbWlzZSlgLlxuICAgICAgKlxuICAgICAgKiBJbiB0ZXN0cyB5b3UgY2FuIHVzZSB7QGxpbmsgbmdNb2NrLiR0aW1lb3V0IGAkdGltZW91dC5mbHVzaCgpYH0gdG9cbiAgICAgICogc3luY2hyb25vdXNseSBmbHVzaCB0aGUgcXVldWUgb2YgZGVmZXJyZWQgZnVuY3Rpb25zLlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuIEEgZnVuY3Rpb24sIHdob3NlIGV4ZWN1dGlvbiBzaG91bGQgYmUgZGVsYXllZC5cbiAgICAgICogQHBhcmFtIHtudW1iZXI9fSBbZGVsYXk9MF0gRGVsYXkgaW4gbWlsbGlzZWNvbmRzLlxuICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW52b2tlQXBwbHk9dHJ1ZV0gSWYgc2V0IHRvIGBmYWxzZWAgc2tpcHMgbW9kZWwgZGlydHkgY2hlY2tpbmcsIG90aGVyd2lzZVxuICAgICAgKiAgIHdpbGwgaW52b2tlIGBmbmAgd2l0aGluIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHkgJGFwcGx5fSBibG9jay5cbiAgICAgICogQHJldHVybnMge1Byb21pc2V9IFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdoZW4gdGhlIHRpbWVvdXQgaXMgcmVhY2hlZC4gVGhlIHZhbHVlIHRoaXNcbiAgICAgICogICBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCBpcyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBgZm5gIGZ1bmN0aW9uLlxuICAgICAgKlxuICAgICAgKi9cbiAgICBmdW5jdGlvbiB0aW1lb3V0KGZuLCBkZWxheSwgaW52b2tlQXBwbHkpIHtcbiAgICAgIHZhciBza2lwQXBwbHkgPSAoaXNEZWZpbmVkKGludm9rZUFwcGx5KSAmJiAhaW52b2tlQXBwbHkpLFxuICAgICAgICAgIGRlZmVycmVkID0gKHNraXBBcHBseSA/ICQkcSA6ICRxKS5kZWZlcigpLFxuICAgICAgICAgIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlLFxuICAgICAgICAgIHRpbWVvdXRJZDtcblxuICAgICAgdGltZW91dElkID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmbigpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlKTtcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICBkZWxldGUgZGVmZXJyZWRzW3Byb21pc2UuJCR0aW1lb3V0SWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFza2lwQXBwbHkpICRyb290U2NvcGUuJGFwcGx5KCk7XG4gICAgICB9LCBkZWxheSk7XG5cbiAgICAgIHByb21pc2UuJCR0aW1lb3V0SWQgPSB0aW1lb3V0SWQ7XG4gICAgICBkZWZlcnJlZHNbdGltZW91dElkXSA9IGRlZmVycmVkO1xuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cblxuICAgICAvKipcbiAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgKiBAbmFtZSAkdGltZW91dCNjYW5jZWxcbiAgICAgICpcbiAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLiBBcyBhIHJlc3VsdCBvZiB0aGlzLCB0aGUgcHJvbWlzZSB3aWxsIGJlXG4gICAgICAqIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7UHJvbWlzZT19IHByb21pc2UgUHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYCR0aW1lb3V0YCBmdW5jdGlvbi5cbiAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB0YXNrIGhhc24ndCBleGVjdXRlZCB5ZXQgYW5kIHdhcyBzdWNjZXNzZnVsbHlcbiAgICAgICogICBjYW5jZWxlZC5cbiAgICAgICovXG4gICAgdGltZW91dC5jYW5jZWwgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICBpZiAocHJvbWlzZSAmJiBwcm9taXNlLiQkdGltZW91dElkIGluIGRlZmVycmVkcykge1xuICAgICAgICBkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF0ucmVqZWN0KCdjYW5jZWxlZCcpO1xuICAgICAgICBkZWxldGUgZGVmZXJyZWRzW3Byb21pc2UuJCR0aW1lb3V0SWRdO1xuICAgICAgICByZXR1cm4gJGJyb3dzZXIuZGVmZXIuY2FuY2VsKHByb21pc2UuJCR0aW1lb3V0SWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gdGltZW91dDtcbiAgfV07XG59XG5cbi8vIE5PVEU6ICBUaGUgdXNhZ2Ugb2Ygd2luZG93IGFuZCBkb2N1bWVudCBpbnN0ZWFkIG9mICR3aW5kb3cgYW5kICRkb2N1bWVudCBoZXJlIGlzXG4vLyBkZWxpYmVyYXRlLiAgVGhpcyBzZXJ2aWNlIGRlcGVuZHMgb24gdGhlIHNwZWNpZmljIGJlaGF2aW9yIG9mIGFuY2hvciBub2RlcyBjcmVhdGVkIGJ5IHRoZVxuLy8gYnJvd3NlciAocmVzb2x2aW5nIGFuZCBwYXJzaW5nIFVSTHMpIHRoYXQgaXMgdW5saWtlbHkgdG8gYmUgcHJvdmlkZWQgYnkgbW9jayBvYmplY3RzIGFuZFxuLy8gY2F1c2UgdXMgdG8gYnJlYWsgdGVzdHMuICBJbiBhZGRpdGlvbiwgd2hlbiB0aGUgYnJvd3NlciByZXNvbHZlcyBhIFVSTCBmb3IgWEhSLCBpdFxuLy8gZG9lc24ndCBrbm93IGFib3V0IG1vY2tlZCBsb2NhdGlvbnMgYW5kIHJlc29sdmVzIFVSTHMgdG8gdGhlIHJlYWwgZG9jdW1lbnQgLSB3aGljaCBpc1xuLy8gZXhhY3RseSB0aGUgYmVoYXZpb3IgbmVlZGVkIGhlcmUuICBUaGVyZSBpcyBsaXR0bGUgdmFsdWUgaXMgbW9ja2luZyB0aGVzZSBvdXQgZm9yIHRoaXNcbi8vIHNlcnZpY2UuXG52YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbnZhciBvcmlnaW5VcmwgPSB1cmxSZXNvbHZlKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuXG4vKipcbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBOb3RlcyBmb3Igbm9uLUlFIGJyb3dzZXJzXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBBc3NpZ25pbmcgYSBVUkwgdG8gdGhlIGhyZWYgcHJvcGVydHkgb2YgYW4gYW5jaG9yIERPTSBub2RlLCBldmVuIG9uZSBhdHRhY2hlZCB0byB0aGUgRE9NLFxuICogcmVzdWx0cyBib3RoIGluIHRoZSBub3JtYWxpemluZyBhbmQgcGFyc2luZyBvZiB0aGUgVVJMLiAgTm9ybWFsaXppbmcgbWVhbnMgdGhhdCBhIHJlbGF0aXZlXG4gKiBVUkwgd2lsbCBiZSByZXNvbHZlZCBpbnRvIGFuIGFic29sdXRlIFVSTCBpbiB0aGUgY29udGV4dCBvZiB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQuXG4gKiBQYXJzaW5nIG1lYW5zIHRoYXQgdGhlIGFuY2hvciBub2RlJ3MgaG9zdCwgaG9zdG5hbWUsIHByb3RvY29sLCBwb3J0LCBwYXRobmFtZSBhbmQgcmVsYXRlZFxuICogcHJvcGVydGllcyBhcmUgYWxsIHBvcHVsYXRlZCB0byByZWZsZWN0IHRoZSBub3JtYWxpemVkIFVSTC4gIFRoaXMgYXBwcm9hY2ggaGFzIHdpZGVcbiAqIGNvbXBhdGliaWxpdHkgLSBTYWZhcmkgMSssIE1vemlsbGEgMSssIE9wZXJhIDcrLGUgZXRjLiAgU2VlXG4gKiBodHRwOi8vd3d3LmFwdGFuYS5jb20vcmVmZXJlbmNlL2h0bWwvYXBpL0hUTUxBbmNob3JFbGVtZW50Lmh0bWxcbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBOb3RlcyBmb3IgSUVcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogSUUgPj0gOCBhbmQgPD0gMTAgbm9ybWFsaXplcyB0aGUgVVJMIHdoZW4gYXNzaWduZWQgdG8gdGhlIGFuY2hvciBub2RlIHNpbWlsYXIgdG8gdGhlIG90aGVyXG4gKiBicm93c2Vycy4gIEhvd2V2ZXIsIHRoZSBwYXJzZWQgY29tcG9uZW50cyB3aWxsIG5vdCBiZSBzZXQgaWYgdGhlIFVSTCBhc3NpZ25lZCBkaWQgbm90IHNwZWNpZnlcbiAqIHRoZW0uICAoZS5nLiBpZiB5b3UgYXNzaWduIGEuaHJlZiA9IFwiZm9vXCIsIHRoZW4gYS5wcm90b2NvbCwgYS5ob3N0LCBldGMuIHdpbGwgYmUgZW1wdHkuKSAgV2VcbiAqIHdvcmsgYXJvdW5kIHRoYXQgYnkgcGVyZm9ybWluZyB0aGUgcGFyc2luZyBpbiBhIDJuZCBzdGVwIGJ5IHRha2luZyBhIHByZXZpb3VzbHkgbm9ybWFsaXplZFxuICogVVJMIChlLmcuIGJ5IGFzc2lnbmluZyB0byBhLmhyZWYpIGFuZCBhc3NpZ25pbmcgaXQgYS5ocmVmIGFnYWluLiAgVGhpcyBjb3JyZWN0bHkgcG9wdWxhdGVzIHRoZVxuICogcHJvcGVydGllcyBzdWNoIGFzIHByb3RvY29sLCBob3N0bmFtZSwgcG9ydCwgZXRjLlxuICpcbiAqIElFNyBkb2VzIG5vdCBub3JtYWxpemUgdGhlIFVSTCB3aGVuIGFzc2lnbmVkIHRvIGFuIGFuY2hvciBub2RlLiAgKEFwcGFyZW50bHksIGl0IGRvZXMsIGlmIG9uZVxuICogdXNlcyB0aGUgaW5uZXIgSFRNTCBhcHByb2FjaCB0byBhc3NpZ24gdGhlIFVSTCBhcyBwYXJ0IG9mIGFuIEhUTUwgc25pcHBldCAtXG4gKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NzI3MjkpICBIb3dldmVyLCBzZXR0aW5nIGltZ1tzcmNdIGRvZXMgbm9ybWFsaXplIHRoZSBVUkwuXG4gKiBVbmZvcnR1bmF0ZWx5LCBzZXR0aW5nIGltZ1tzcmNdIHRvIHNvbWV0aGluZyBsaWtlIFwiamF2YXNjcmlwdDpmb29cIiBvbiBJRSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICogU2luY2UgdGhlIHByaW1hcnkgdXNhZ2UgZm9yIG5vcm1hbGl6aW5nIFVSTHMgaXMgdG8gc2FuaXRpemUgc3VjaCBVUkxzLCB3ZSBjYW4ndCB1c2UgdGhhdFxuICogbWV0aG9kIGFuZCBJRSA8IDggaXMgdW5zdXBwb3J0ZWQuXG4gKlxuICogUmVmZXJlbmNlczpcbiAqICAgaHR0cDovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTEFuY2hvckVsZW1lbnRcbiAqICAgaHR0cDovL3d3dy5hcHRhbmEuY29tL3JlZmVyZW5jZS9odG1sL2FwaS9IVE1MQW5jaG9yRWxlbWVudC5odG1sXG4gKiAgIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICogICBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMjkwMlxuICogICBodHRwOi8vamFtZXMucGFkb2xzZXkuY29tL2phdmFzY3JpcHQvcGFyc2luZy11cmxzLXdpdGgtdGhlLWRvbS9cbiAqXG4gKiBAa2luZCBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZC5cbiAqIEBkZXNjcmlwdGlvbiBOb3JtYWxpemVzIGFuZCBwYXJzZXMgYSBVUkwuXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBSZXR1cm5zIHRoZSBub3JtYWxpemVkIFVSTCBhcyBhIGRpY3Rpb25hcnkuXG4gKlxuICogICB8IG1lbWJlciBuYW1lICAgfCBEZXNjcmlwdGlvbiAgICB8XG4gKiAgIHwtLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLXxcbiAqICAgfCBocmVmICAgICAgICAgIHwgQSBub3JtYWxpemVkIHZlcnNpb24gb2YgdGhlIHByb3ZpZGVkIFVSTCBpZiBpdCB3YXMgbm90IGFuIGFic29sdXRlIFVSTCB8XG4gKiAgIHwgcHJvdG9jb2wgICAgICB8IFRoZSBwcm90b2NvbCBpbmNsdWRpbmcgdGhlIHRyYWlsaW5nIGNvbG9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8IGhvc3QgICAgICAgICAgfCBUaGUgaG9zdCBhbmQgcG9ydCAoaWYgdGhlIHBvcnQgaXMgbm9uLWRlZmF1bHQpIG9mIHRoZSBub3JtYWxpemVkVXJsICAgIHxcbiAqICAgfCBzZWFyY2ggICAgICAgIHwgVGhlIHNlYXJjaCBwYXJhbXMsIG1pbnVzIHRoZSBxdWVzdGlvbiBtYXJrICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgIHwgaGFzaCAgICAgICAgICB8IFRoZSBoYXNoIHN0cmluZywgbWludXMgdGhlIGhhc2ggc3ltYm9sXG4gKiAgIHwgaG9zdG5hbWUgICAgICB8IFRoZSBob3N0bmFtZVxuICogICB8IHBvcnQgICAgICAgICAgfCBUaGUgcG9ydCwgd2l0aG91dCBcIjpcIlxuICogICB8IHBhdGhuYW1lICAgICAgfCBUaGUgcGF0aG5hbWUsIGJlZ2lubmluZyB3aXRoIFwiL1wiXG4gKlxuICovXG5mdW5jdGlvbiB1cmxSZXNvbHZlKHVybCkge1xuICB2YXIgaHJlZiA9IHVybDtcblxuICBpZiAobXNpZSkge1xuICAgIC8vIE5vcm1hbGl6ZSBiZWZvcmUgcGFyc2UuICBSZWZlciBJbXBsZW1lbnRhdGlvbiBOb3RlcyBvbiB3aHkgdGhpcyBpc1xuICAgIC8vIGRvbmUgaW4gdHdvIHN0ZXBzIG9uIElFLlxuICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgaHJlZik7XG4gICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7XG4gIH1cblxuICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblxuICAvLyB1cmxQYXJzaW5nTm9kZSBwcm92aWRlcyB0aGUgVXJsVXRpbHMgaW50ZXJmYWNlIC0gaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzXG4gIHJldHVybiB7XG4gICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxuICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG4gICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsXG4gICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgcGF0aG5hbWU6ICh1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJylcbiAgICAgID8gdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgICAgIDogJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHJlcXVlc3QgVVJMIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGlzIGlzIGEgc2FtZS1vcmlnaW4gcmVxdWVzdCBhcyB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZXF1ZXN0VXJsIFRoZSB1cmwgb2YgdGhlIHJlcXVlc3QgYXMgYSBzdHJpbmcgdGhhdCB3aWxsIGJlIHJlc29sdmVkXG4gKiBvciBhIHBhcnNlZCBVUkwgb2JqZWN0LlxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHJlcXVlc3QgaXMgZm9yIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQuXG4gKi9cbmZ1bmN0aW9uIHVybElzU2FtZU9yaWdpbihyZXF1ZXN0VXJsKSB7XG4gIHZhciBwYXJzZWQgPSAoaXNTdHJpbmcocmVxdWVzdFVybCkpID8gdXJsUmVzb2x2ZShyZXF1ZXN0VXJsKSA6IHJlcXVlc3RVcmw7XG4gIHJldHVybiAocGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VcmwucHJvdG9jb2wgJiZcbiAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVXJsLmhvc3QpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkd2luZG93XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHJlZmVyZW5jZSB0byB0aGUgYnJvd3NlcidzIGB3aW5kb3dgIG9iamVjdC4gV2hpbGUgYHdpbmRvd2BcbiAqIGlzIGdsb2JhbGx5IGF2YWlsYWJsZSBpbiBKYXZhU2NyaXB0LCBpdCBjYXVzZXMgdGVzdGFiaWxpdHkgcHJvYmxlbXMsIGJlY2F1c2VcbiAqIGl0IGlzIGEgZ2xvYmFsIHZhcmlhYmxlLiBJbiBhbmd1bGFyIHdlIGFsd2F5cyByZWZlciB0byBpdCB0aHJvdWdoIHRoZVxuICogYCR3aW5kb3dgIHNlcnZpY2UsIHNvIGl0IG1heSBiZSBvdmVycmlkZGVuLCByZW1vdmVkIG9yIG1vY2tlZCBmb3IgdGVzdGluZy5cbiAqXG4gKiBFeHByZXNzaW9ucywgbGlrZSB0aGUgb25lIGRlZmluZWQgZm9yIHRoZSBgbmdDbGlja2AgZGlyZWN0aXZlIGluIHRoZSBleGFtcGxlXG4gKiBiZWxvdywgYXJlIGV2YWx1YXRlZCB3aXRoIHJlc3BlY3QgdG8gdGhlIGN1cnJlbnQgc2NvcGUuICBUaGVyZWZvcmUsIHRoZXJlIGlzXG4gKiBubyByaXNrIG9mIGluYWR2ZXJ0ZW50bHkgY29kaW5nIGluIGEgZGVwZW5kZW5jeSBvbiBhIGdsb2JhbCB2YWx1ZSBpbiBzdWNoIGFuXG4gKiBleHByZXNzaW9uLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJ3aW5kb3dFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd3aW5kb3dFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyR3aW5kb3cnLCBmdW5jdGlvbigkc2NvcGUsICR3aW5kb3cpIHtcbiAgICAgICAgICAgICAkc2NvcGUuZ3JlZXRpbmcgPSAnSGVsbG8sIFdvcmxkISc7XG4gICAgICAgICAgICAgJHNjb3BlLmRvR3JlZXRpbmcgPSBmdW5jdGlvbihncmVldGluZykge1xuICAgICAgICAgICAgICAgJHdpbmRvdy5hbGVydChncmVldGluZyk7XG4gICAgICAgICAgICAgfTtcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImdyZWV0aW5nXCIgLz5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJkb0dyZWV0aW5nKGdyZWV0aW5nKVwiPkFMRVJUPC9idXR0b24+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHRoZSBncmVldGluZyBpbiB0aGUgaW5wdXQgYm94JywgZnVuY3Rpb24oKSB7XG4gICAgICAgZWxlbWVudChieS5tb2RlbCgnZ3JlZXRpbmcnKSkuc2VuZEtleXMoJ0hlbGxvLCBFMkUgVGVzdHMnKTtcbiAgICAgICAvLyBJZiB3ZSBjbGljayB0aGUgYnV0dG9uIGl0IHdpbGwgYmxvY2sgdGhlIHRlc3QgcnVubmVyXG4gICAgICAgLy8gZWxlbWVudCgnOmJ1dHRvbicpLmNsaWNrKCk7XG4gICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiAkV2luZG93UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IHZhbHVlRm4od2luZG93KTtcbn1cblxuLyogZ2xvYmFsIGN1cnJlbmN5RmlsdGVyOiB0cnVlLFxuIGRhdGVGaWx0ZXI6IHRydWUsXG4gZmlsdGVyRmlsdGVyOiB0cnVlLFxuIGpzb25GaWx0ZXI6IHRydWUsXG4gbGltaXRUb0ZpbHRlcjogdHJ1ZSxcbiBsb3dlcmNhc2VGaWx0ZXI6IHRydWUsXG4gbnVtYmVyRmlsdGVyOiB0cnVlLFxuIG9yZGVyQnlGaWx0ZXI6IHRydWUsXG4gdXBwZXJjYXNlRmlsdGVyOiB0cnVlLFxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkZmlsdGVyUHJvdmlkZXJcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEZpbHRlcnMgYXJlIGp1c3QgZnVuY3Rpb25zIHdoaWNoIHRyYW5zZm9ybSBpbnB1dCB0byBhbiBvdXRwdXQuIEhvd2V2ZXIgZmlsdGVycyBuZWVkIHRvIGJlXG4gKiBEZXBlbmRlbmN5IEluamVjdGVkLiBUbyBhY2hpZXZlIHRoaXMgYSBmaWx0ZXIgZGVmaW5pdGlvbiBjb25zaXN0cyBvZiBhIGZhY3RvcnkgZnVuY3Rpb24gd2hpY2ggaXNcbiAqIGFubm90YXRlZCB3aXRoIGRlcGVuZGVuY2llcyBhbmQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIGEgZmlsdGVyIGZ1bmN0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiAgIC8vIEZpbHRlciByZWdpc3RyYXRpb25cbiAqICAgZnVuY3Rpb24gTXlNb2R1bGUoJHByb3ZpZGUsICRmaWx0ZXJQcm92aWRlcikge1xuICogICAgIC8vIGNyZWF0ZSBhIHNlcnZpY2UgdG8gZGVtb25zdHJhdGUgaW5qZWN0aW9uIChub3QgYWx3YXlzIG5lZWRlZClcbiAqICAgICAkcHJvdmlkZS52YWx1ZSgnZ3JlZXQnLCBmdW5jdGlvbihuYW1lKXtcbiAqICAgICAgIHJldHVybiAnSGVsbG8gJyArIG5hbWUgKyAnISc7XG4gKiAgICAgfSk7XG4gKlxuICogICAgIC8vIHJlZ2lzdGVyIGEgZmlsdGVyIGZhY3Rvcnkgd2hpY2ggdXNlcyB0aGVcbiAqICAgICAvLyBncmVldCBzZXJ2aWNlIHRvIGRlbW9uc3RyYXRlIERJLlxuICogICAgICRmaWx0ZXJQcm92aWRlci5yZWdpc3RlcignZ3JlZXQnLCBmdW5jdGlvbihncmVldCl7XG4gKiAgICAgICAvLyByZXR1cm4gdGhlIGZpbHRlciBmdW5jdGlvbiB3aGljaCB1c2VzIHRoZSBncmVldCBzZXJ2aWNlXG4gKiAgICAgICAvLyB0byBnZW5lcmF0ZSBzYWx1dGF0aW9uXG4gKiAgICAgICByZXR1cm4gZnVuY3Rpb24odGV4dCkge1xuICogICAgICAgICAvLyBmaWx0ZXJzIG5lZWQgdG8gYmUgZm9yZ2l2aW5nIHNvIGNoZWNrIGlucHV0IHZhbGlkaXR5XG4gKiAgICAgICAgIHJldHVybiB0ZXh0ICYmIGdyZWV0KHRleHQpIHx8IHRleHQ7XG4gKiAgICAgICB9O1xuICogICAgIH0pO1xuICogICB9XG4gKiBgYGBcbiAqXG4gKiBUaGUgZmlsdGVyIGZ1bmN0aW9uIGlzIHJlZ2lzdGVyZWQgd2l0aCB0aGUgYCRpbmplY3RvcmAgdW5kZXIgdGhlIGZpbHRlciBuYW1lIHN1ZmZpeCB3aXRoXG4gKiBgRmlsdGVyYC5cbiAqXG4gKiBgYGBqc1xuICogICBpdCgnc2hvdWxkIGJlIHRoZSBzYW1lIGluc3RhbmNlJywgaW5qZWN0KFxuICogICAgIGZ1bmN0aW9uKCRmaWx0ZXJQcm92aWRlcikge1xuICogICAgICAgJGZpbHRlclByb3ZpZGVyLnJlZ2lzdGVyKCdyZXZlcnNlJywgZnVuY3Rpb24oKXtcbiAqICAgICAgICAgcmV0dXJuIC4uLjtcbiAqICAgICAgIH0pO1xuICogICAgIH0sXG4gKiAgICAgZnVuY3Rpb24oJGZpbHRlciwgcmV2ZXJzZUZpbHRlcikge1xuICogICAgICAgZXhwZWN0KCRmaWx0ZXIoJ3JldmVyc2UnKSkudG9CZShyZXZlcnNlRmlsdGVyKTtcbiAqICAgICB9KTtcbiAqIGBgYFxuICpcbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgYW5ndWxhciBmaWx0ZXJzIHdvcmssIGFuZCBob3cgdG8gY3JlYXRlIHlvdXIgb3duIGZpbHRlcnMsIHNlZVxuICoge0BsaW5rIGd1aWRlL2ZpbHRlciBGaWx0ZXJzfSBpbiB0aGUgQW5ndWxhciBEZXZlbG9wZXIgR3VpZGUuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGZpbHRlclxuICogQGtpbmQgZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvblxuICogRmlsdGVycyBhcmUgdXNlZCBmb3IgZm9ybWF0dGluZyBkYXRhIGRpc3BsYXllZCB0byB0aGUgdXNlci5cbiAqXG4gKiBUaGUgZ2VuZXJhbCBzeW50YXggaW4gdGVtcGxhdGVzIGlzIGFzIGZvbGxvd3M6XG4gKlxuICogICAgICAgICB7eyBleHByZXNzaW9uIFt8IGZpbHRlcl9uYW1lWzpwYXJhbWV0ZXJfdmFsdWVdIC4uLiBdIH19XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgZmlsdGVyIGZ1bmN0aW9uIHRvIHJldHJpZXZlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGhlIGZpbHRlciBmdW5jdGlvblxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCIkZmlsdGVyXCIgbW9kdWxlPVwiZmlsdGVyRXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIk1haW5DdHJsXCI+XG4gICAgICAgIDxoMz57eyBvcmlnaW5hbFRleHQgfX08L2gzPlxuICAgICAgICA8aDM+e3sgZmlsdGVyZWRUZXh0IH19PC9oMz5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdmaWx0ZXJFeGFtcGxlJywgW10pXG4gICAgICAuY29udHJvbGxlcignTWFpbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRmaWx0ZXIpIHtcbiAgICAgICAgJHNjb3BlLm9yaWdpbmFsVGV4dCA9ICdoZWxsbyc7XG4gICAgICAgICRzY29wZS5maWx0ZXJlZFRleHQgPSAkZmlsdGVyKCd1cHBlcmNhc2UnKSgkc2NvcGUub3JpZ2luYWxUZXh0KTtcbiAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gICovXG4kRmlsdGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnXTtcbmZ1bmN0aW9uICRGaWx0ZXJQcm92aWRlcigkcHJvdmlkZSkge1xuICB2YXIgc3VmZml4ID0gJ0ZpbHRlcic7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGZpbHRlclByb3ZpZGVyI3JlZ2lzdGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBOYW1lIG9mIHRoZSBmaWx0ZXIgZnVuY3Rpb24sIG9yIGFuIG9iamVjdCBtYXAgb2YgZmlsdGVycyB3aGVyZVxuICAgKiAgICB0aGUga2V5cyBhcmUgdGhlIGZpbHRlciBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGZpbHRlciBmYWN0b3JpZXMuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFJlZ2lzdGVyZWQgZmlsdGVyIGluc3RhbmNlLCBvciBpZiBhIG1hcCBvZiBmaWx0ZXJzIHdhcyBwcm92aWRlZCB0aGVuIGEgbWFwXG4gICAqICAgIG9mIHRoZSByZWdpc3RlcmVkIGZpbHRlciBpbnN0YW5jZXMuXG4gICAqL1xuICBmdW5jdGlvbiByZWdpc3RlcihuYW1lLCBmYWN0b3J5KSB7XG4gICAgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XG4gICAgICB2YXIgZmlsdGVycyA9IHt9O1xuICAgICAgZm9yRWFjaChuYW1lLCBmdW5jdGlvbihmaWx0ZXIsIGtleSkge1xuICAgICAgICBmaWx0ZXJzW2tleV0gPSByZWdpc3RlcihrZXksIGZpbHRlcik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmaWx0ZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJHByb3ZpZGUuZmFjdG9yeShuYW1lICsgc3VmZml4LCBmYWN0b3J5KTtcbiAgICB9XG4gIH1cbiAgdGhpcy5yZWdpc3RlciA9IHJlZ2lzdGVyO1xuXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiAkaW5qZWN0b3IuZ2V0KG5hbWUgKyBzdWZmaXgpO1xuICAgIH07XG4gIH1dO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvKiBnbG9iYWxcbiAgICBjdXJyZW5jeUZpbHRlcjogZmFsc2UsXG4gICAgZGF0ZUZpbHRlcjogZmFsc2UsXG4gICAgZmlsdGVyRmlsdGVyOiBmYWxzZSxcbiAgICBqc29uRmlsdGVyOiBmYWxzZSxcbiAgICBsaW1pdFRvRmlsdGVyOiBmYWxzZSxcbiAgICBsb3dlcmNhc2VGaWx0ZXI6IGZhbHNlLFxuICAgIG51bWJlckZpbHRlcjogZmFsc2UsXG4gICAgb3JkZXJCeUZpbHRlcjogZmFsc2UsXG4gICAgdXBwZXJjYXNlRmlsdGVyOiBmYWxzZSxcbiAgKi9cblxuICByZWdpc3RlcignY3VycmVuY3knLCBjdXJyZW5jeUZpbHRlcik7XG4gIHJlZ2lzdGVyKCdkYXRlJywgZGF0ZUZpbHRlcik7XG4gIHJlZ2lzdGVyKCdmaWx0ZXInLCBmaWx0ZXJGaWx0ZXIpO1xuICByZWdpc3RlcignanNvbicsIGpzb25GaWx0ZXIpO1xuICByZWdpc3RlcignbGltaXRUbycsIGxpbWl0VG9GaWx0ZXIpO1xuICByZWdpc3RlcignbG93ZXJjYXNlJywgbG93ZXJjYXNlRmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ251bWJlcicsIG51bWJlckZpbHRlcik7XG4gIHJlZ2lzdGVyKCdvcmRlckJ5Jywgb3JkZXJCeUZpbHRlcik7XG4gIHJlZ2lzdGVyKCd1cHBlcmNhc2UnLCB1cHBlcmNhc2VGaWx0ZXIpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGZpbHRlclxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNlbGVjdHMgYSBzdWJzZXQgb2YgaXRlbXMgZnJvbSBgYXJyYXlgIGFuZCByZXR1cm5zIGl0IGFzIGEgbmV3IGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBzb3VyY2UgYXJyYXkuXG4gKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R8ZnVuY3Rpb24oKX0gZXhwcmVzc2lvbiBUaGUgcHJlZGljYXRlIHRvIGJlIHVzZWQgZm9yIHNlbGVjdGluZyBpdGVtcyBmcm9tXG4gKiAgIGBhcnJheWAuXG4gKlxuICogICBDYW4gYmUgb25lIG9mOlxuICpcbiAqICAgLSBgc3RyaW5nYDogVGhlIHN0cmluZyBpcyB1c2VkIGZvciBtYXRjaGluZyBhZ2FpbnN0IHRoZSBjb250ZW50cyBvZiB0aGUgYGFycmF5YC4gQWxsIHN0cmluZ3Mgb3JcbiAqICAgICBvYmplY3RzIHdpdGggc3RyaW5nIHByb3BlcnRpZXMgaW4gYGFycmF5YCB0aGF0IG1hdGNoIHRoaXMgc3RyaW5nIHdpbGwgYmUgcmV0dXJuZWQuIFRoaXMgYWxzb1xuICogICAgIGFwcGxpZXMgdG8gbmVzdGVkIG9iamVjdCBwcm9wZXJ0aWVzLlxuICogICAgIFRoZSBwcmVkaWNhdGUgY2FuIGJlIG5lZ2F0ZWQgYnkgcHJlZml4aW5nIHRoZSBzdHJpbmcgd2l0aCBgIWAuXG4gKlxuICogICAtIGBPYmplY3RgOiBBIHBhdHRlcm4gb2JqZWN0IGNhbiBiZSB1c2VkIHRvIGZpbHRlciBzcGVjaWZpYyBwcm9wZXJ0aWVzIG9uIG9iamVjdHMgY29udGFpbmVkXG4gKiAgICAgYnkgYGFycmF5YC4gRm9yIGV4YW1wbGUgYHtuYW1lOlwiTVwiLCBwaG9uZTpcIjFcIn1gIHByZWRpY2F0ZSB3aWxsIHJldHVybiBhbiBhcnJheSBvZiBpdGVtc1xuICogICAgIHdoaWNoIGhhdmUgcHJvcGVydHkgYG5hbWVgIGNvbnRhaW5pbmcgXCJNXCIgYW5kIHByb3BlcnR5IGBwaG9uZWAgY29udGFpbmluZyBcIjFcIi4gQSBzcGVjaWFsXG4gKiAgICAgcHJvcGVydHkgbmFtZSBgJGAgY2FuIGJlIHVzZWQgKGFzIGluIGB7JDpcInRleHRcIn1gKSB0byBhY2NlcHQgYSBtYXRjaCBhZ2FpbnN0IGFueVxuICogICAgIHByb3BlcnR5IG9mIHRoZSBvYmplY3Qgb3IgaXRzIG5lc3RlZCBvYmplY3QgcHJvcGVydGllcy4gVGhhdCdzIGVxdWl2YWxlbnQgdG8gdGhlIHNpbXBsZVxuICogICAgIHN1YnN0cmluZyBtYXRjaCB3aXRoIGEgYHN0cmluZ2AgYXMgZGVzY3JpYmVkIGFib3ZlLiBUaGUgcHJlZGljYXRlIGNhbiBiZSBuZWdhdGVkIGJ5IHByZWZpeGluZ1xuICogICAgIHRoZSBzdHJpbmcgd2l0aCBgIWAuXG4gKiAgICAgRm9yIGV4YW1wbGUgYHtuYW1lOiBcIiFNXCJ9YCBwcmVkaWNhdGUgd2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgaXRlbXMgd2hpY2ggaGF2ZSBwcm9wZXJ0eSBgbmFtZWBcbiAqICAgICBub3QgY29udGFpbmluZyBcIk1cIi5cbiAqXG4gKiAgICAgTm90ZSB0aGF0IGEgbmFtZWQgcHJvcGVydHkgd2lsbCBtYXRjaCBwcm9wZXJ0aWVzIG9uIHRoZSBzYW1lIGxldmVsIG9ubHksIHdoaWxlIHRoZSBzcGVjaWFsXG4gKiAgICAgYCRgIHByb3BlcnR5IHdpbGwgbWF0Y2ggcHJvcGVydGllcyBvbiB0aGUgc2FtZSBsZXZlbCBvciBkZWVwZXIuIEUuZy4gYW4gYXJyYXkgaXRlbSBsaWtlXG4gKiAgICAgYHtuYW1lOiB7Zmlyc3Q6ICdKb2huJywgbGFzdDogJ0RvZSd9fWAgd2lsbCAqKm5vdCoqIGJlIG1hdGNoZWQgYnkgYHtuYW1lOiAnSm9obid9YCwgYnV0XG4gKiAgICAgKip3aWxsKiogYmUgbWF0Y2hlZCBieSBgeyQ6ICdKb2huJ31gLlxuICpcbiAqICAgLSBgZnVuY3Rpb24odmFsdWUsIGluZGV4KWA6IEEgcHJlZGljYXRlIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHdyaXRlIGFyYml0cmFyeSBmaWx0ZXJzLiBUaGVcbiAqICAgICBmdW5jdGlvbiBpcyBjYWxsZWQgZm9yIGVhY2ggZWxlbWVudCBvZiBgYXJyYXlgLiBUaGUgZmluYWwgcmVzdWx0IGlzIGFuIGFycmF5IG9mIHRob3NlXG4gKiAgICAgZWxlbWVudHMgdGhhdCB0aGUgcHJlZGljYXRlIHJldHVybmVkIHRydWUgZm9yLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZCl8dHJ1ZXx1bmRlZmluZWR9IGNvbXBhcmF0b3IgQ29tcGFyYXRvciB3aGljaCBpcyB1c2VkIGluXG4gKiAgICAgZGV0ZXJtaW5pbmcgaWYgdGhlIGV4cGVjdGVkIHZhbHVlIChmcm9tIHRoZSBmaWx0ZXIgZXhwcmVzc2lvbikgYW5kIGFjdHVhbCB2YWx1ZSAoZnJvbVxuICogICAgIHRoZSBvYmplY3QgaW4gdGhlIGFycmF5KSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIG1hdGNoLlxuICpcbiAqICAgQ2FuIGJlIG9uZSBvZjpcbiAqXG4gKiAgIC0gYGZ1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpYDpcbiAqICAgICBUaGUgZnVuY3Rpb24gd2lsbCBiZSBnaXZlbiB0aGUgb2JqZWN0IHZhbHVlIGFuZCB0aGUgcHJlZGljYXRlIHZhbHVlIHRvIGNvbXBhcmUgYW5kXG4gKiAgICAgc2hvdWxkIHJldHVybiB0cnVlIGlmIGJvdGggdmFsdWVzIHNob3VsZCBiZSBjb25zaWRlcmVkIGVxdWFsLlxuICpcbiAqICAgLSBgdHJ1ZWA6IEEgc2hvcnRoYW5kIGZvciBgZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZCkgeyByZXR1cm4gYW5ndWxhci5lcXVhbHMoYWN0dWFsLCBleHBlY3RlZCl9YC5cbiAqICAgICBUaGlzIGlzIGVzc2VudGlhbGx5IHN0cmljdCBjb21wYXJpc29uIG9mIGV4cGVjdGVkIGFuZCBhY3R1YWwuXG4gKlxuICogICAtIGBmYWxzZXx1bmRlZmluZWRgOiBBIHNob3J0IGhhbmQgZm9yIGEgZnVuY3Rpb24gd2hpY2ggd2lsbCBsb29rIGZvciBhIHN1YnN0cmluZyBtYXRjaCBpbiBjYXNlXG4gKiAgICAgaW5zZW5zaXRpdmUgd2F5LlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWluaXQ9XCJmcmllbmRzID0gW3tuYW1lOidKb2huJywgcGhvbmU6JzU1NS0xMjc2J30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidNYXJ5JywgcGhvbmU6JzgwMC1CSUctTUFSWSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonTWlrZScsIHBob25lOic1NTUtNDMyMSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonQWRhbScsIHBob25lOic1NTUtNTY3OCd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonSnVsaWUnLCBwaG9uZTonNTU1LTg3NjUnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0p1bGlldHRlJywgcGhvbmU6JzU1NS01Njc4J31dXCI+PC9kaXY+XG5cbiAgICAgICBTZWFyY2g6IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaFRleHRcIj5cbiAgICAgICA8dGFibGUgaWQ9XCJzZWFyY2hUZXh0UmVzdWx0c1wiPlxuICAgICAgICAgPHRyPjx0aD5OYW1lPC90aD48dGg+UGhvbmU8L3RoPjwvdHI+XG4gICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBmaWx0ZXI6c2VhcmNoVGV4dFwiPlxuICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kLnBob25lfX08L3RkPlxuICAgICAgICAgPC90cj5cbiAgICAgICA8L3RhYmxlPlxuICAgICAgIDxocj5cbiAgICAgICBBbnk6IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaC4kXCI+IDxicj5cbiAgICAgICBOYW1lIG9ubHkgPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoLm5hbWVcIj48YnI+XG4gICAgICAgUGhvbmUgb25seSA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2gucGhvbmVcIj48YnI+XG4gICAgICAgRXF1YWxpdHkgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwic3RyaWN0XCI+PGJyPlxuICAgICAgIDx0YWJsZSBpZD1cInNlYXJjaE9ialJlc3VsdHNcIj5cbiAgICAgICAgIDx0cj48dGg+TmFtZTwvdGg+PHRoPlBob25lPC90aD48L3RyPlxuICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZE9iaiBpbiBmcmllbmRzIHwgZmlsdGVyOnNlYXJjaDpzdHJpY3RcIj5cbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kT2JqLm5hbWV9fTwvdGQ+XG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZE9iai5waG9uZX19PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgPC90YWJsZT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIGV4cGVjdEZyaWVuZE5hbWVzID0gZnVuY3Rpb24oZXhwZWN0ZWROYW1lcywga2V5KSB7XG4gICAgICAgICBlbGVtZW50LmFsbChieS5yZXBlYXRlcihrZXkgKyAnIGluIGZyaWVuZHMnKS5jb2x1bW4oa2V5ICsgJy5uYW1lJykpLnRoZW4oZnVuY3Rpb24oYXJyKSB7XG4gICAgICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uKHdkLCBpKSB7XG4gICAgICAgICAgICAgZXhwZWN0KHdkLmdldFRleHQoKSkudG9NYXRjaChleHBlY3RlZE5hbWVzW2ldKTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICB9KTtcbiAgICAgICB9O1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzZWFyY2ggYWNyb3NzIGFsbCBmaWVsZHMgd2hlbiBmaWx0ZXJpbmcgd2l0aCBhIHN0cmluZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNlYXJjaFRleHQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWFyY2hUZXh0JykpO1xuICAgICAgICAgc2VhcmNoVGV4dC5jbGVhcigpO1xuICAgICAgICAgc2VhcmNoVGV4dC5zZW5kS2V5cygnbScpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydNYXJ5JywgJ01pa2UnLCAnQWRhbSddLCAnZnJpZW5kJyk7XG5cbiAgICAgICAgIHNlYXJjaFRleHQuY2xlYXIoKTtcbiAgICAgICAgIHNlYXJjaFRleHQuc2VuZEtleXMoJzc2Jyk7XG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ0pvaG4nLCAnSnVsaWUnXSwgJ2ZyaWVuZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzZWFyY2ggaW4gc3BlY2lmaWMgZmllbGRzIHdoZW4gZmlsdGVyaW5nIHdpdGggYSBwcmVkaWNhdGUgb2JqZWN0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgc2VhcmNoQW55ID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoLiQnKSk7XG4gICAgICAgICBzZWFyY2hBbnkuY2xlYXIoKTtcbiAgICAgICAgIHNlYXJjaEFueS5zZW5kS2V5cygnaScpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydNYXJ5JywgJ01pa2UnLCAnSnVsaWUnLCAnSnVsaWV0dGUnXSwgJ2ZyaWVuZE9iaicpO1xuICAgICAgIH0pO1xuICAgICAgIGl0KCdzaG91bGQgdXNlIGEgZXF1YWwgY29tcGFyaXNvbiB3aGVuIGNvbXBhcmF0b3IgaXMgdHJ1ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNlYXJjaE5hbWUgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWFyY2gubmFtZScpKTtcbiAgICAgICAgIHZhciBzdHJpY3QgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzdHJpY3QnKSk7XG4gICAgICAgICBzZWFyY2hOYW1lLmNsZWFyKCk7XG4gICAgICAgICBzZWFyY2hOYW1lLnNlbmRLZXlzKCdKdWxpZScpO1xuICAgICAgICAgc3RyaWN0LmNsaWNrKCk7XG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ0p1bGllJ10sICdmcmllbmRPYmonKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiBmaWx0ZXJGaWx0ZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcnJheSwgZXhwcmVzc2lvbiwgY29tcGFyYXRvcikge1xuICAgIGlmICghaXNBcnJheShhcnJheSkpIHJldHVybiBhcnJheTtcblxuICAgIHZhciBwcmVkaWNhdGVGbjtcbiAgICB2YXIgbWF0Y2hBZ2FpbnN0QW55UHJvcDtcblxuICAgIHN3aXRjaCAodHlwZW9mIGV4cHJlc3Npb24pIHtcbiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgcHJlZGljYXRlRm4gPSBleHByZXNzaW9uO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIG1hdGNoQWdhaW5zdEFueVByb3AgPSB0cnVlO1xuICAgICAgICAvL2pzaGludCAtVzA4NlxuICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgLy9qc2hpbnQgK1cwODZcbiAgICAgICAgcHJlZGljYXRlRm4gPSBjcmVhdGVQcmVkaWNhdGVGbihleHByZXNzaW9uLCBjb21wYXJhdG9yLCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycmF5LmZpbHRlcihwcmVkaWNhdGVGbik7XG4gIH07XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGBmaWx0ZXJGaWx0ZXJgXG5mdW5jdGlvbiBjcmVhdGVQcmVkaWNhdGVGbihleHByZXNzaW9uLCBjb21wYXJhdG9yLCBtYXRjaEFnYWluc3RBbnlQcm9wKSB7XG4gIHZhciBzaG91bGRNYXRjaFByaW1pdGl2ZXMgPSBpc09iamVjdChleHByZXNzaW9uKSAmJiAoJyQnIGluIGV4cHJlc3Npb24pO1xuICB2YXIgcHJlZGljYXRlRm47XG5cbiAgaWYgKGNvbXBhcmF0b3IgPT09IHRydWUpIHtcbiAgICBjb21wYXJhdG9yID0gZXF1YWxzO1xuICB9IGVsc2UgaWYgKCFpc0Z1bmN0aW9uKGNvbXBhcmF0b3IpKSB7XG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHtcbiAgICAgIGlmIChpc09iamVjdChhY3R1YWwpIHx8IGlzT2JqZWN0KGV4cGVjdGVkKSkge1xuICAgICAgICAvLyBQcmV2ZW50IGFuIG9iamVjdCB0byBiZSBjb25zaWRlcmVkIGVxdWFsIHRvIGEgc3RyaW5nIGxpa2UgYCdbb2JqZWN0J2BcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBhY3R1YWwgPSBsb3dlcmNhc2UoJycgKyBhY3R1YWwpO1xuICAgICAgZXhwZWN0ZWQgPSBsb3dlcmNhc2UoJycgKyBleHBlY3RlZCk7XG4gICAgICByZXR1cm4gYWN0dWFsLmluZGV4T2YoZXhwZWN0ZWQpICE9PSAtMTtcbiAgICB9O1xuICB9XG5cbiAgcHJlZGljYXRlRm4gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgaWYgKHNob3VsZE1hdGNoUHJpbWl0aXZlcyAmJiAhaXNPYmplY3QoaXRlbSkpIHtcbiAgICAgIHJldHVybiBkZWVwQ29tcGFyZShpdGVtLCBleHByZXNzaW9uLiQsIGNvbXBhcmF0b3IsIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZXBDb21wYXJlKGl0ZW0sIGV4cHJlc3Npb24sIGNvbXBhcmF0b3IsIG1hdGNoQWdhaW5zdEFueVByb3ApO1xuICB9O1xuXG4gIHJldHVybiBwcmVkaWNhdGVGbjtcbn1cblxuZnVuY3Rpb24gZGVlcENvbXBhcmUoYWN0dWFsLCBleHBlY3RlZCwgY29tcGFyYXRvciwgbWF0Y2hBZ2FpbnN0QW55UHJvcCwgZG9udE1hdGNoV2hvbGVPYmplY3QpIHtcbiAgdmFyIGFjdHVhbFR5cGUgPSB0eXBlb2YgYWN0dWFsO1xuICB2YXIgZXhwZWN0ZWRUeXBlID0gdHlwZW9mIGV4cGVjdGVkO1xuXG4gIGlmICgoZXhwZWN0ZWRUeXBlID09PSAnc3RyaW5nJykgJiYgKGV4cGVjdGVkLmNoYXJBdCgwKSA9PT0gJyEnKSkge1xuICAgIHJldHVybiAhZGVlcENvbXBhcmUoYWN0dWFsLCBleHBlY3RlZC5zdWJzdHJpbmcoMSksIGNvbXBhcmF0b3IsIG1hdGNoQWdhaW5zdEFueVByb3ApO1xuICB9IGVsc2UgaWYgKGlzQXJyYXkoYWN0dWFsKSkge1xuICAgIC8vIEluIGNhc2UgYGFjdHVhbGAgaXMgYW4gYXJyYXksIGNvbnNpZGVyIGl0IGEgbWF0Y2hcbiAgICAvLyBpZiBBTlkgb2YgaXQncyBpdGVtcyBtYXRjaGVzIGBleHBlY3RlZGBcbiAgICByZXR1cm4gYWN0dWFsLnNvbWUoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgcmV0dXJuIGRlZXBDb21wYXJlKGl0ZW0sIGV4cGVjdGVkLCBjb21wYXJhdG9yLCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN3aXRjaCAoYWN0dWFsVHlwZSkge1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICB2YXIga2V5O1xuICAgICAgaWYgKG1hdGNoQWdhaW5zdEFueVByb3ApIHtcbiAgICAgICAgZm9yIChrZXkgaW4gYWN0dWFsKSB7XG4gICAgICAgICAgaWYgKChrZXkuY2hhckF0KDApICE9PSAnJCcpICYmIGRlZXBDb21wYXJlKGFjdHVhbFtrZXldLCBleHBlY3RlZCwgY29tcGFyYXRvciwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9udE1hdGNoV2hvbGVPYmplY3QgPyBmYWxzZSA6IGRlZXBDb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQsIGNvbXBhcmF0b3IsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3IgKGtleSBpbiBleHBlY3RlZCkge1xuICAgICAgICAgIHZhciBleHBlY3RlZFZhbCA9IGV4cGVjdGVkW2tleV07XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oZXhwZWN0ZWRWYWwpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgbWF0Y2hBbnlQcm9wZXJ0eSA9IGtleSA9PT0gJyQnO1xuICAgICAgICAgIHZhciBhY3R1YWxWYWwgPSBtYXRjaEFueVByb3BlcnR5ID8gYWN0dWFsIDogYWN0dWFsW2tleV07XG4gICAgICAgICAgaWYgKCFkZWVwQ29tcGFyZShhY3R1YWxWYWwsIGV4cGVjdGVkVmFsLCBjb21wYXJhdG9yLCBtYXRjaEFueVByb3BlcnR5LCBtYXRjaEFueVByb3BlcnR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb21wYXJhdG9yKGFjdHVhbCwgZXhwZWN0ZWQpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gY29tcGFyYXRvcihhY3R1YWwsIGV4cGVjdGVkKTtcbiAgfVxufVxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGN1cnJlbmN5XG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRm9ybWF0cyBhIG51bWJlciBhcyBhIGN1cnJlbmN5IChpZSAkMSwyMzQuNTYpLiBXaGVuIG5vIGN1cnJlbmN5IHN5bWJvbCBpcyBwcm92aWRlZCwgZGVmYXVsdFxuICogc3ltYm9sIGZvciBjdXJyZW50IGxvY2FsZSBpcyB1c2VkLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgSW5wdXQgdG8gZmlsdGVyLlxuICogQHBhcmFtIHtzdHJpbmc9fSBzeW1ib2wgQ3VycmVuY3kgc3ltYm9sIG9yIGlkZW50aWZpZXIgdG8gYmUgZGlzcGxheWVkLlxuICogQHBhcmFtIHtudW1iZXI9fSBmcmFjdGlvblNpemUgTnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHJvdW5kIHRoZSBhbW91bnQgdG8sIGRlZmF1bHRzIHRvIGRlZmF1bHQgbWF4IGZyYWN0aW9uIHNpemUgZm9yIGN1cnJlbnQgbG9jYWxlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgbnVtYmVyLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiY3VycmVuY3lFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjdXJyZW5jeUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUuYW1vdW50ID0gMTIzNC41NjtcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwiYW1vdW50XCI+IDxicj5cbiAgICAgICAgIGRlZmF1bHQgY3VycmVuY3kgc3ltYm9sICgkKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1kZWZhdWx0XCI+e3thbW91bnQgfCBjdXJyZW5jeX19PC9zcGFuPjxicj5cbiAgICAgICAgIGN1c3RvbSBjdXJyZW5jeSBpZGVudGlmaWVyIChVU0QkKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1jdXN0b21cIj57e2Ftb3VudCB8IGN1cnJlbmN5OlwiVVNEJFwifX08L3NwYW4+XG4gICAgICAgICBubyBmcmFjdGlvbnMgKDApOiA8c3BhbiBpZD1cImN1cnJlbmN5LW5vLWZyYWN0aW9uc1wiPnt7YW1vdW50IHwgY3VycmVuY3k6XCJVU0QkXCI6MH19PC9zcGFuPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGluaXQgd2l0aCAxMjM0LjU2JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJyQxLDIzNC41NicpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWN1c3RvbScpKS5nZXRUZXh0KCkpLnRvQmUoJ1VTRCQxLDIzNC41NicpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LW5vLWZyYWN0aW9ucycpKS5nZXRUZXh0KCkpLnRvQmUoJ1VTRCQxLDIzNScpO1xuICAgICAgIH0pO1xuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PSAnc2FmYXJpJykge1xuICAgICAgICAgICAvLyBTYWZhcmkgZG9lcyBub3QgdW5kZXJzdGFuZCB0aGUgbWludXMga2V5LiBTZWVcbiAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNDgxXG4gICAgICAgICAgIHJldHVybjtcbiAgICAgICAgIH1cbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2Ftb3VudCcpKS5jbGVhcigpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnYW1vdW50JykpLnNlbmRLZXlzKCctMTIzNCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCcoJDEsMjM0LjAwKScpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWN1c3RvbScpKS5nZXRUZXh0KCkpLnRvQmUoJyhVU0QkMSwyMzQuMDApJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktbm8tZnJhY3Rpb25zJykpLmdldFRleHQoKSkudG9CZSgnKFVTRCQxLDIzNCknKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5jdXJyZW5jeUZpbHRlci4kaW5qZWN0ID0gWyckbG9jYWxlJ107XG5mdW5jdGlvbiBjdXJyZW5jeUZpbHRlcigkbG9jYWxlKSB7XG4gIHZhciBmb3JtYXRzID0gJGxvY2FsZS5OVU1CRVJfRk9STUFUUztcbiAgcmV0dXJuIGZ1bmN0aW9uKGFtb3VudCwgY3VycmVuY3lTeW1ib2wsIGZyYWN0aW9uU2l6ZSkge1xuICAgIGlmIChpc1VuZGVmaW5lZChjdXJyZW5jeVN5bWJvbCkpIHtcbiAgICAgIGN1cnJlbmN5U3ltYm9sID0gZm9ybWF0cy5DVVJSRU5DWV9TWU07XG4gICAgfVxuXG4gICAgaWYgKGlzVW5kZWZpbmVkKGZyYWN0aW9uU2l6ZSkpIHtcbiAgICAgIGZyYWN0aW9uU2l6ZSA9IGZvcm1hdHMuUEFUVEVSTlNbMV0ubWF4RnJhYztcbiAgICB9XG5cbiAgICAvLyBpZiBudWxsIG9yIHVuZGVmaW5lZCBwYXNzIGl0IHRocm91Z2hcbiAgICByZXR1cm4gKGFtb3VudCA9PSBudWxsKVxuICAgICAgICA/IGFtb3VudFxuICAgICAgICA6IGZvcm1hdE51bWJlcihhbW91bnQsIGZvcm1hdHMuUEFUVEVSTlNbMV0sIGZvcm1hdHMuR1JPVVBfU0VQLCBmb3JtYXRzLkRFQ0lNQUxfU0VQLCBmcmFjdGlvblNpemUpLlxuICAgICAgICAgICAgcmVwbGFjZSgvXFx1MDBBNC9nLCBjdXJyZW5jeVN5bWJvbCk7XG4gIH07XG59XG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgbnVtYmVyXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRm9ybWF0cyBhIG51bWJlciBhcyB0ZXh0LlxuICpcbiAqIElmIHRoZSBpbnB1dCBpcyBub3QgYSBudW1iZXIgYW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gbnVtYmVyIE51bWJlciB0byBmb3JtYXQuXG4gKiBAcGFyYW0geyhudW1iZXJ8c3RyaW5nKT19IGZyYWN0aW9uU2l6ZSBOdW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMgdG8gcm91bmQgdGhlIG51bWJlciB0by5cbiAqIElmIHRoaXMgaXMgbm90IHByb3ZpZGVkIHRoZW4gdGhlIGZyYWN0aW9uIHNpemUgaXMgY29tcHV0ZWQgZnJvbSB0aGUgY3VycmVudCBsb2NhbGUncyBudW1iZXJcbiAqIGZvcm1hdHRpbmcgcGF0dGVybi4gSW4gdGhlIGNhc2Ugb2YgdGhlIGRlZmF1bHQgbG9jYWxlLCBpdCB3aWxsIGJlIDMuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBOdW1iZXIgcm91bmRlZCB0byBkZWNpbWFsUGxhY2VzIGFuZCBwbGFjZXMgYSDigJws4oCdIGFmdGVyIGVhY2ggdGhpcmQgZGlnaXQuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cIm51bWJlckZpbHRlckV4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ251bWJlckZpbHRlckV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUudmFsID0gMTIzNC41Njc4OTtcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICBFbnRlciBudW1iZXI6IDxpbnB1dCBuZy1tb2RlbD0ndmFsJz48YnI+XG4gICAgICAgICBEZWZhdWx0IGZvcm1hdHRpbmc6IDxzcGFuIGlkPSdudW1iZXItZGVmYXVsdCc+e3t2YWwgfCBudW1iZXJ9fTwvc3Bhbj48YnI+XG4gICAgICAgICBObyBmcmFjdGlvbnM6IDxzcGFuPnt7dmFsIHwgbnVtYmVyOjB9fTwvc3Bhbj48YnI+XG4gICAgICAgICBOZWdhdGl2ZSBudW1iZXI6IDxzcGFuPnt7LXZhbCB8IG51bWJlcjo0fX08L3NwYW4+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgZm9ybWF0IG51bWJlcnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdudW1iZXItZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJzEsMjM0LjU2OCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndmFsIHwgbnVtYmVyOjAnKSkuZ2V0VGV4dCgpKS50b0JlKCcxLDIzNScpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnLXZhbCB8IG51bWJlcjo0JykpLmdldFRleHQoKSkudG9CZSgnLTEsMjM0LjU2NzknKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWwnKSkuY2xlYXIoKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbCcpKS5zZW5kS2V5cygnMzM3NC4zMzMnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdudW1iZXItZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJzMsMzc0LjMzMycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndmFsIHwgbnVtYmVyOjAnKSkuZ2V0VGV4dCgpKS50b0JlKCczLDM3NCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnLXZhbCB8IG51bWJlcjo0JykpLmdldFRleHQoKSkudG9CZSgnLTMsMzc0LjMzMzAnKTtcbiAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG5udW1iZXJGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xuZnVuY3Rpb24gbnVtYmVyRmlsdGVyKCRsb2NhbGUpIHtcbiAgdmFyIGZvcm1hdHMgPSAkbG9jYWxlLk5VTUJFUl9GT1JNQVRTO1xuICByZXR1cm4gZnVuY3Rpb24obnVtYmVyLCBmcmFjdGlvblNpemUpIHtcblxuICAgIC8vIGlmIG51bGwgb3IgdW5kZWZpbmVkIHBhc3MgaXQgdGhyb3VnaFxuICAgIHJldHVybiAobnVtYmVyID09IG51bGwpXG4gICAgICAgID8gbnVtYmVyXG4gICAgICAgIDogZm9ybWF0TnVtYmVyKG51bWJlciwgZm9ybWF0cy5QQVRURVJOU1swXSwgZm9ybWF0cy5HUk9VUF9TRVAsIGZvcm1hdHMuREVDSU1BTF9TRVAsXG4gICAgICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uU2l6ZSk7XG4gIH07XG59XG5cbnZhciBERUNJTUFMX1NFUCA9ICcuJztcbmZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW1iZXIsIHBhdHRlcm4sIGdyb3VwU2VwLCBkZWNpbWFsU2VwLCBmcmFjdGlvblNpemUpIHtcbiAgaWYgKCFpc0Zpbml0ZShudW1iZXIpIHx8IGlzT2JqZWN0KG51bWJlcikpIHJldHVybiAnJztcblxuICB2YXIgaXNOZWdhdGl2ZSA9IG51bWJlciA8IDA7XG4gIG51bWJlciA9IE1hdGguYWJzKG51bWJlcik7XG4gIHZhciBudW1TdHIgPSBudW1iZXIgKyAnJyxcbiAgICAgIGZvcm1hdGVkVGV4dCA9ICcnLFxuICAgICAgcGFydHMgPSBbXTtcblxuICB2YXIgaGFzRXhwb25lbnQgPSBmYWxzZTtcbiAgaWYgKG51bVN0ci5pbmRleE9mKCdlJykgIT09IC0xKSB7XG4gICAgdmFyIG1hdGNoID0gbnVtU3RyLm1hdGNoKC8oW1xcZFxcLl0rKWUoLT8pKFxcZCspLyk7XG4gICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdID09ICctJyAmJiBtYXRjaFszXSA+IGZyYWN0aW9uU2l6ZSArIDEpIHtcbiAgICAgIG51bWJlciA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1hdGVkVGV4dCA9IG51bVN0cjtcbiAgICAgIGhhc0V4cG9uZW50ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWhhc0V4cG9uZW50KSB7XG4gICAgdmFyIGZyYWN0aW9uTGVuID0gKG51bVN0ci5zcGxpdChERUNJTUFMX1NFUClbMV0gfHwgJycpLmxlbmd0aDtcblxuICAgIC8vIGRldGVybWluZSBmcmFjdGlvblNpemUgaWYgaXQgaXMgbm90IHNwZWNpZmllZFxuICAgIGlmIChpc1VuZGVmaW5lZChmcmFjdGlvblNpemUpKSB7XG4gICAgICBmcmFjdGlvblNpemUgPSBNYXRoLm1pbihNYXRoLm1heChwYXR0ZXJuLm1pbkZyYWMsIGZyYWN0aW9uTGVuKSwgcGF0dGVybi5tYXhGcmFjKTtcbiAgICB9XG5cbiAgICAvLyBzYWZlbHkgcm91bmQgbnVtYmVycyBpbiBKUyB3aXRob3V0IGhpdHRpbmcgaW1wcmVjaXNpb25zIG9mIGZsb2F0aW5nLXBvaW50IGFyaXRobWV0aWNzXG4gICAgLy8gaW5zcGlyZWQgYnk6XG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTWF0aC9yb3VuZFxuICAgIG51bWJlciA9ICsoTWF0aC5yb3VuZCgrKG51bWJlci50b1N0cmluZygpICsgJ2UnICsgZnJhY3Rpb25TaXplKSkudG9TdHJpbmcoKSArICdlJyArIC1mcmFjdGlvblNpemUpO1xuXG4gICAgdmFyIGZyYWN0aW9uID0gKCcnICsgbnVtYmVyKS5zcGxpdChERUNJTUFMX1NFUCk7XG4gICAgdmFyIHdob2xlID0gZnJhY3Rpb25bMF07XG4gICAgZnJhY3Rpb24gPSBmcmFjdGlvblsxXSB8fCAnJztcblxuICAgIHZhciBpLCBwb3MgPSAwLFxuICAgICAgICBsZ3JvdXAgPSBwYXR0ZXJuLmxnU2l6ZSxcbiAgICAgICAgZ3JvdXAgPSBwYXR0ZXJuLmdTaXplO1xuXG4gICAgaWYgKHdob2xlLmxlbmd0aCA+PSAobGdyb3VwICsgZ3JvdXApKSB7XG4gICAgICBwb3MgPSB3aG9sZS5sZW5ndGggLSBsZ3JvdXA7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgcG9zOyBpKyspIHtcbiAgICAgICAgaWYgKChwb3MgLSBpKSAlIGdyb3VwID09PSAwICYmIGkgIT09IDApIHtcbiAgICAgICAgICBmb3JtYXRlZFRleHQgKz0gZ3JvdXBTZXA7XG4gICAgICAgIH1cbiAgICAgICAgZm9ybWF0ZWRUZXh0ICs9IHdob2xlLmNoYXJBdChpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGkgPSBwb3M7IGkgPCB3aG9sZS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCh3aG9sZS5sZW5ndGggLSBpKSAlIGxncm91cCA9PT0gMCAmJiBpICE9PSAwKSB7XG4gICAgICAgIGZvcm1hdGVkVGV4dCArPSBncm91cFNlcDtcbiAgICAgIH1cbiAgICAgIGZvcm1hdGVkVGV4dCArPSB3aG9sZS5jaGFyQXQoaSk7XG4gICAgfVxuXG4gICAgLy8gZm9ybWF0IGZyYWN0aW9uIHBhcnQuXG4gICAgd2hpbGUgKGZyYWN0aW9uLmxlbmd0aCA8IGZyYWN0aW9uU2l6ZSkge1xuICAgICAgZnJhY3Rpb24gKz0gJzAnO1xuICAgIH1cblxuICAgIGlmIChmcmFjdGlvblNpemUgJiYgZnJhY3Rpb25TaXplICE9PSBcIjBcIikgZm9ybWF0ZWRUZXh0ICs9IGRlY2ltYWxTZXAgKyBmcmFjdGlvbi5zdWJzdHIoMCwgZnJhY3Rpb25TaXplKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZnJhY3Rpb25TaXplID4gMCAmJiBudW1iZXIgPCAxKSB7XG4gICAgICBmb3JtYXRlZFRleHQgPSBudW1iZXIudG9GaXhlZChmcmFjdGlvblNpemUpO1xuICAgICAgbnVtYmVyID0gcGFyc2VGbG9hdChmb3JtYXRlZFRleHQpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChudW1iZXIgPT09IDApIHtcbiAgICBpc05lZ2F0aXZlID0gZmFsc2U7XG4gIH1cblxuICBwYXJ0cy5wdXNoKGlzTmVnYXRpdmUgPyBwYXR0ZXJuLm5lZ1ByZSA6IHBhdHRlcm4ucG9zUHJlLFxuICAgICAgICAgICAgIGZvcm1hdGVkVGV4dCxcbiAgICAgICAgICAgICBpc05lZ2F0aXZlID8gcGF0dGVybi5uZWdTdWYgOiBwYXR0ZXJuLnBvc1N1Zik7XG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKTtcbn1cblxuZnVuY3Rpb24gcGFkTnVtYmVyKG51bSwgZGlnaXRzLCB0cmltKSB7XG4gIHZhciBuZWcgPSAnJztcbiAgaWYgKG51bSA8IDApIHtcbiAgICBuZWcgPSAgJy0nO1xuICAgIG51bSA9IC1udW07XG4gIH1cbiAgbnVtID0gJycgKyBudW07XG4gIHdoaWxlIChudW0ubGVuZ3RoIDwgZGlnaXRzKSBudW0gPSAnMCcgKyBudW07XG4gIGlmICh0cmltKVxuICAgIG51bSA9IG51bS5zdWJzdHIobnVtLmxlbmd0aCAtIGRpZ2l0cyk7XG4gIHJldHVybiBuZWcgKyBudW07XG59XG5cblxuZnVuY3Rpb24gZGF0ZUdldHRlcihuYW1lLCBzaXplLCBvZmZzZXQsIHRyaW0pIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG4gIHJldHVybiBmdW5jdGlvbihkYXRlKSB7XG4gICAgdmFyIHZhbHVlID0gZGF0ZVsnZ2V0JyArIG5hbWVdKCk7XG4gICAgaWYgKG9mZnNldCA+IDAgfHwgdmFsdWUgPiAtb2Zmc2V0KVxuICAgICAgdmFsdWUgKz0gb2Zmc2V0O1xuICAgIGlmICh2YWx1ZSA9PT0gMCAmJiBvZmZzZXQgPT0gLTEyKSB2YWx1ZSA9IDEyO1xuICAgIHJldHVybiBwYWROdW1iZXIodmFsdWUsIHNpemUsIHRyaW0pO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkYXRlU3RyR2V0dGVyKG5hbWUsIHNob3J0Rm9ybSkge1xuICByZXR1cm4gZnVuY3Rpb24oZGF0ZSwgZm9ybWF0cykge1xuICAgIHZhciB2YWx1ZSA9IGRhdGVbJ2dldCcgKyBuYW1lXSgpO1xuICAgIHZhciBnZXQgPSB1cHBlcmNhc2Uoc2hvcnRGb3JtID8gKCdTSE9SVCcgKyBuYW1lKSA6IG5hbWUpO1xuXG4gICAgcmV0dXJuIGZvcm1hdHNbZ2V0XVt2YWx1ZV07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRpbWVab25lR2V0dGVyKGRhdGUpIHtcbiAgdmFyIHpvbmUgPSAtMSAqIGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgdmFyIHBhZGRlZFpvbmUgPSAoem9uZSA+PSAwKSA/IFwiK1wiIDogXCJcIjtcblxuICBwYWRkZWRab25lICs9IHBhZE51bWJlcihNYXRoW3pvbmUgPiAwID8gJ2Zsb29yJyA6ICdjZWlsJ10oem9uZSAvIDYwKSwgMikgK1xuICAgICAgICAgICAgICAgIHBhZE51bWJlcihNYXRoLmFicyh6b25lICUgNjApLCAyKTtcblxuICByZXR1cm4gcGFkZGVkWm9uZTtcbn1cblxuZnVuY3Rpb24gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcih5ZWFyKSB7XG4gICAgLy8gMCA9IGluZGV4IG9mIEphbnVhcnlcbiAgICB2YXIgZGF5T2ZXZWVrT25GaXJzdCA9IChuZXcgRGF0ZSh5ZWFyLCAwLCAxKSkuZ2V0RGF5KCk7XG4gICAgLy8gNCA9IGluZGV4IG9mIFRodXJzZGF5ICgrMSB0byBhY2NvdW50IGZvciAxc3QgPSA1KVxuICAgIC8vIDExID0gaW5kZXggb2YgKm5leHQqIFRodXJzZGF5ICgrMSBhY2NvdW50IGZvciAxc3QgPSAxMilcbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgMCwgKChkYXlPZldlZWtPbkZpcnN0IDw9IDQpID8gNSA6IDEyKSAtIGRheU9mV2Vla09uRmlyc3QpO1xufVxuXG5mdW5jdGlvbiBnZXRUaHVyc2RheVRoaXNXZWVrKGRhdGV0aW1lKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGRhdGV0aW1lLmdldEZ1bGxZZWFyKCksIGRhdGV0aW1lLmdldE1vbnRoKCksXG4gICAgICAvLyA0ID0gaW5kZXggb2YgVGh1cnNkYXlcbiAgICAgIGRhdGV0aW1lLmdldERhdGUoKSArICg0IC0gZGF0ZXRpbWUuZ2V0RGF5KCkpKTtcbn1cblxuZnVuY3Rpb24gd2Vla0dldHRlcihzaXplKSB7XG4gICByZXR1cm4gZnVuY3Rpb24oZGF0ZSkge1xuICAgICAgdmFyIGZpcnN0VGh1cnMgPSBnZXRGaXJzdFRodXJzZGF5T2ZZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSksXG4gICAgICAgICB0aGlzVGh1cnMgPSBnZXRUaHVyc2RheVRoaXNXZWVrKGRhdGUpO1xuXG4gICAgICB2YXIgZGlmZiA9ICt0aGlzVGh1cnMgLSArZmlyc3RUaHVycyxcbiAgICAgICAgIHJlc3VsdCA9IDEgKyBNYXRoLnJvdW5kKGRpZmYgLyA2LjA0OGU4KTsgLy8gNi4wNDhlOCBtcyBwZXIgd2Vla1xuXG4gICAgICByZXR1cm4gcGFkTnVtYmVyKHJlc3VsdCwgc2l6ZSk7XG4gICB9O1xufVxuXG5mdW5jdGlvbiBhbXBtR2V0dGVyKGRhdGUsIGZvcm1hdHMpIHtcbiAgcmV0dXJuIGRhdGUuZ2V0SG91cnMoKSA8IDEyID8gZm9ybWF0cy5BTVBNU1swXSA6IGZvcm1hdHMuQU1QTVNbMV07XG59XG5cbnZhciBEQVRFX0ZPUk1BVFMgPSB7XG4gIHl5eXk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgNCksXG4gICAgeXk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgMiwgMCwgdHJ1ZSksXG4gICAgIHk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgMSksXG4gIE1NTU06IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJyksXG4gICBNTU06IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJywgdHJ1ZSksXG4gICAgTU06IGRhdGVHZXR0ZXIoJ01vbnRoJywgMiwgMSksXG4gICAgIE06IGRhdGVHZXR0ZXIoJ01vbnRoJywgMSwgMSksXG4gICAgZGQ6IGRhdGVHZXR0ZXIoJ0RhdGUnLCAyKSxcbiAgICAgZDogZGF0ZUdldHRlcignRGF0ZScsIDEpLFxuICAgIEhIOiBkYXRlR2V0dGVyKCdIb3VycycsIDIpLFxuICAgICBIOiBkYXRlR2V0dGVyKCdIb3VycycsIDEpLFxuICAgIGhoOiBkYXRlR2V0dGVyKCdIb3VycycsIDIsIC0xMiksXG4gICAgIGg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMSwgLTEyKSxcbiAgICBtbTogZGF0ZUdldHRlcignTWludXRlcycsIDIpLFxuICAgICBtOiBkYXRlR2V0dGVyKCdNaW51dGVzJywgMSksXG4gICAgc3M6IGRhdGVHZXR0ZXIoJ1NlY29uZHMnLCAyKSxcbiAgICAgczogZGF0ZUdldHRlcignU2Vjb25kcycsIDEpLFxuICAgICAvLyB3aGlsZSBJU08gODYwMSByZXF1aXJlcyBmcmFjdGlvbnMgdG8gYmUgcHJlZml4ZWQgd2l0aCBgLmAgb3IgYCxgXG4gICAgIC8vIHdlIGNhbiBiZSBqdXN0IHNhZmVseSByZWx5IG9uIHVzaW5nIGBzc3NgIHNpbmNlIHdlIGN1cnJlbnRseSBkb24ndCBzdXBwb3J0IHNpbmdsZSBvciB0d28gZGlnaXQgZnJhY3Rpb25zXG4gICBzc3M6IGRhdGVHZXR0ZXIoJ01pbGxpc2Vjb25kcycsIDMpLFxuICBFRUVFOiBkYXRlU3RyR2V0dGVyKCdEYXknKSxcbiAgIEVFRTogZGF0ZVN0ckdldHRlcignRGF5JywgdHJ1ZSksXG4gICAgIGE6IGFtcG1HZXR0ZXIsXG4gICAgIFo6IHRpbWVab25lR2V0dGVyLFxuICAgIHd3OiB3ZWVrR2V0dGVyKDIpLFxuICAgICB3OiB3ZWVrR2V0dGVyKDEpXG59O1xuXG52YXIgREFURV9GT1JNQVRTX1NQTElUID0gLygoPzpbXnlNZEhobXNhWkV3J10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8ZCt8SCt8aCt8bSt8cyt8YXxafHcrKSkoLiopLyxcbiAgICBOVU1CRVJfU1RSSU5HID0gL15cXC0/XFxkKyQvO1xuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGRhdGVcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiAgIEZvcm1hdHMgYGRhdGVgIHRvIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSByZXF1ZXN0ZWQgYGZvcm1hdGAuXG4gKlxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZWxlbWVudHM6XG4gKlxuICogICAqIGAneXl5eSdgOiA0IGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIgKGUuZy4gQUQgMSA9PiAwMDAxLCBBRCAyMDEwID0+IDIwMTApXG4gKiAgICogYCd5eSdgOiAyIGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIsIHBhZGRlZCAoMDAtOTkpLiAoZS5nLiBBRCAyMDAxID0+IDAxLCBBRCAyMDEwID0+IDEwKVxuICogICAqIGAneSdgOiAxIGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIsIGUuZy4gKEFEIDEgPT4gMSwgQUQgMTk5ID0+IDE5OSlcbiAqICAgKiBgJ01NTU0nYDogTW9udGggaW4geWVhciAoSmFudWFyeS1EZWNlbWJlcilcbiAqICAgKiBgJ01NTSdgOiBNb250aCBpbiB5ZWFyIChKYW4tRGVjKVxuICogICAqIGAnTU0nYDogTW9udGggaW4geWVhciwgcGFkZGVkICgwMS0xMilcbiAqICAgKiBgJ00nYDogTW9udGggaW4geWVhciAoMS0xMilcbiAqICAgKiBgJ2RkJ2A6IERheSBpbiBtb250aCwgcGFkZGVkICgwMS0zMSlcbiAqICAgKiBgJ2QnYDogRGF5IGluIG1vbnRoICgxLTMxKVxuICogICAqIGAnRUVFRSdgOiBEYXkgaW4gV2VlaywoU3VuZGF5LVNhdHVyZGF5KVxuICogICAqIGAnRUVFJ2A6IERheSBpbiBXZWVrLCAoU3VuLVNhdClcbiAqICAgKiBgJ0hIJ2A6IEhvdXIgaW4gZGF5LCBwYWRkZWQgKDAwLTIzKVxuICogICAqIGAnSCdgOiBIb3VyIGluIGRheSAoMC0yMylcbiAqICAgKiBgJ2hoJ2A6IEhvdXIgaW4gQU0vUE0sIHBhZGRlZCAoMDEtMTIpXG4gKiAgICogYCdoJ2A6IEhvdXIgaW4gQU0vUE0sICgxLTEyKVxuICogICAqIGAnbW0nYDogTWludXRlIGluIGhvdXIsIHBhZGRlZCAoMDAtNTkpXG4gKiAgICogYCdtJ2A6IE1pbnV0ZSBpbiBob3VyICgwLTU5KVxuICogICAqIGAnc3MnYDogU2Vjb25kIGluIG1pbnV0ZSwgcGFkZGVkICgwMC01OSlcbiAqICAgKiBgJ3MnYDogU2Vjb25kIGluIG1pbnV0ZSAoMC01OSlcbiAqICAgKiBgJ3NzcydgOiBNaWxsaXNlY29uZCBpbiBzZWNvbmQsIHBhZGRlZCAoMDAwLTk5OSlcbiAqICAgKiBgJ2EnYDogQU0vUE0gbWFya2VyXG4gKiAgICogYCdaJ2A6IDQgZGlnaXQgKCtzaWduKSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGltZXpvbmUgb2Zmc2V0ICgtMTIwMC0rMTIwMClcbiAqICAgKiBgJ3d3J2A6IFdlZWsgb2YgeWVhciwgcGFkZGVkICgwMC01MykuIFdlZWsgMDEgaXMgdGhlIHdlZWsgd2l0aCB0aGUgZmlyc3QgVGh1cnNkYXkgb2YgdGhlIHllYXJcbiAqICAgKiBgJ3cnYDogV2VlayBvZiB5ZWFyICgwLTUzKS4gV2VlayAxIGlzIHRoZSB3ZWVrIHdpdGggdGhlIGZpcnN0IFRodXJzZGF5IG9mIHRoZSB5ZWFyXG4gKlxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGFsc28gYmUgb25lIG9mIHRoZSBmb2xsb3dpbmcgcHJlZGVmaW5lZFxuICogICB7QGxpbmsgZ3VpZGUvaTE4biBsb2NhbGl6YWJsZSBmb3JtYXRzfTpcbiAqXG4gKiAgICogYCdtZWRpdW0nYDogZXF1aXZhbGVudCB0byBgJ01NTSBkLCB5IGg6bW06c3MgYSdgIGZvciBlbl9VUyBsb2NhbGVcbiAqICAgICAoZS5nLiBTZXAgMywgMjAxMCAxMjowNTowOCBQTSlcbiAqICAgKiBgJ3Nob3J0J2A6IGVxdWl2YWxlbnQgdG8gYCdNL2QveXkgaDptbSBhJ2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gOS8zLzEwIDEyOjA1IFBNKVxuICogICAqIGAnZnVsbERhdGUnYDogZXF1aXZhbGVudCB0byBgJ0VFRUUsIE1NTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlXG4gKiAgICAgKGUuZy4gRnJpZGF5LCBTZXB0ZW1iZXIgMywgMjAxMClcbiAqICAgKiBgJ2xvbmdEYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU1NIGQsIHknYCBmb3IgZW5fVVMgIGxvY2FsZSAoZS5nLiBTZXB0ZW1iZXIgMywgMjAxMClcbiAqICAgKiBgJ21lZGl1bURhdGUnYDogZXF1aXZhbGVudCB0byBgJ01NTSBkLCB5J2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gU2VwIDMsIDIwMTApXG4gKiAgICogYCdzaG9ydERhdGUnYDogZXF1aXZhbGVudCB0byBgJ00vZC95eSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gOS8zLzEwKVxuICogICAqIGAnbWVkaXVtVGltZSdgOiBlcXVpdmFsZW50IHRvIGAnaDptbTpzcyBhJ2AgZm9yIGVuX1VTIGxvY2FsZSAoZS5nLiAxMjowNTowOCBQTSlcbiAqICAgKiBgJ3Nob3J0VGltZSdgOiBlcXVpdmFsZW50IHRvIGAnaDptbSBhJ2AgZm9yIGVuX1VTIGxvY2FsZSAoZS5nLiAxMjowNSBQTSlcbiAqXG4gKiAgIGBmb3JtYXRgIHN0cmluZyBjYW4gY29udGFpbiBsaXRlcmFsIHZhbHVlcy4gVGhlc2UgbmVlZCB0byBiZSBlc2NhcGVkIGJ5IHN1cnJvdW5kaW5nIHdpdGggc2luZ2xlIHF1b3RlcyAoZS5nLlxuICogICBgXCJoICdpbiB0aGUgbW9ybmluZydcImApLiBJbiBvcmRlciB0byBvdXRwdXQgYSBzaW5nbGUgcXVvdGUsIGVzY2FwZSBpdCAtIGkuZS4sIHR3byBzaW5nbGUgcXVvdGVzIGluIGEgc2VxdWVuY2VcbiAqICAgKGUuZy4gYFwiaCAnbycnY2xvY2snXCJgKS5cbiAqXG4gKiBAcGFyYW0geyhEYXRlfG51bWJlcnxzdHJpbmcpfSBkYXRlIERhdGUgdG8gZm9ybWF0IGVpdGhlciBhcyBEYXRlIG9iamVjdCwgbWlsbGlzZWNvbmRzIChzdHJpbmcgb3JcbiAqICAgIG51bWJlcikgb3IgdmFyaW91cyBJU08gODYwMSBkYXRldGltZSBzdHJpbmcgZm9ybWF0cyAoZS5nLiB5eXl5LU1NLWRkVEhIOm1tOnNzLnNzc1ogYW5kIGl0c1xuICogICAgc2hvcnRlciB2ZXJzaW9ucyBsaWtlIHl5eXktTU0tZGRUSEg6bW1aLCB5eXl5LU1NLWRkIG9yIHl5eXlNTWRkVEhIbW1zc1opLiBJZiBubyB0aW1lem9uZSBpc1xuICogICAgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaW5wdXQsIHRoZSB0aW1lIGlzIGNvbnNpZGVyZWQgdG8gYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICogQHBhcmFtIHtzdHJpbmc9fSBmb3JtYXQgRm9ybWF0dGluZyBydWxlcyAoc2VlIERlc2NyaXB0aW9uKS4gSWYgbm90IHNwZWNpZmllZCxcbiAqICAgIGBtZWRpdW1EYXRlYCBpcyB1c2VkLlxuICogQHBhcmFtIHtzdHJpbmc9fSB0aW1lem9uZSBUaW1lem9uZSB0byBiZSB1c2VkIGZvciBmb3JtYXR0aW5nLiBSaWdodCBub3csIG9ubHkgYCdVVEMnYCBpcyBzdXBwb3J0ZWQuXG4gKiAgICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIgd2lsbCBiZSB1c2VkLlxuICogQHJldHVybnMge3N0cmluZ30gRm9ybWF0dGVkIHN0cmluZyBvciB0aGUgaW5wdXQgaWYgaW5wdXQgaXMgbm90IHJlY29nbml6ZWQgYXMgZGF0ZS9taWxsaXMuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOidtZWRpdW0nfX08L3NwYW4+OlxuICAgICAgICAgICA8c3Bhbj57ezEyODgzMjM2MjMwMDYgfCBkYXRlOidtZWRpdW0nfX08L3NwYW4+PGJyPlxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOid5eXl5LU1NLWRkIEhIOm1tOnNzIFonfX08L3NwYW4+OlxuICAgICAgICAgIDxzcGFuPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J3l5eXktTU0tZGQgSEg6bW06c3MgWid9fTwvc3Bhbj48YnI+XG4gICAgICAgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J01NL2RkL3l5eXkgQCBoOm1tYSd9fTwvc3Bhbj46XG4gICAgICAgICAgPHNwYW4+e3snMTI4ODMyMzYyMzAwNicgfCBkYXRlOidNTS9kZC95eXl5IEAgaDptbWEnfX08L3NwYW4+PGJyPlxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOlwiTU0vZGQveXl5eSAnYXQnIGg6bW1hXCJ9fTwvc3Bhbj46XG4gICAgICAgICAgPHNwYW4+e3snMTI4ODMyMzYyMzAwNicgfCBkYXRlOlwiTU0vZGQveXl5eSAnYXQnIGg6bW1hXCJ9fTwvc3Bhbj48YnI+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgZm9ybWF0IGRhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCIxMjg4MzIzNjIzMDA2IHwgZGF0ZTonbWVkaXVtJ1wiKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgIHRvTWF0Y2goL09jdCAyXFxkLCAyMDEwIFxcZHsxLDJ9OlxcZHsyfTpcXGR7Mn0gKEFNfFBNKS8pO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZyhcIjEyODgzMjM2MjMwMDYgfCBkYXRlOid5eXl5LU1NLWRkIEhIOm1tOnNzIFonXCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9NYXRjaCgvMjAxMFxcLTEwXFwtMlxcZCBcXGR7Mn06XFxkezJ9OlxcZHsyfSAoXFwtfFxcKyk/XFxkezR9Lyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiJzEyODgzMjM2MjMwMDYnIHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ1wiKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgIHRvTWF0Y2goLzEwXFwvMlxcZFxcLzIwMTAgQCBcXGR7MSwyfTpcXGR7Mn0oQU18UE0pLyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiJzEyODgzMjM2MjMwMDYnIHwgZGF0ZTpcXFwiTU0vZGQveXl5eSAnYXQnIGg6bW1hXFxcIlwiKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgIHRvTWF0Y2goLzEwXFwvMlxcZFxcLzIwMTAgYXQgXFxkezEsMn06XFxkezJ9KEFNfFBNKS8pO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbmRhdGVGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xuZnVuY3Rpb24gZGF0ZUZpbHRlcigkbG9jYWxlKSB7XG5cblxuICB2YXIgUl9JU084NjAxX1NUUiA9IC9eKFxcZHs0fSktPyhcXGRcXGQpLT8oXFxkXFxkKSg/OlQoXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86XFwuKFxcZCspKT8pPyk/KFp8KFsrLV0pKFxcZFxcZCk6PyhcXGRcXGQpKT8pPyQvO1xuICAgICAgICAgICAgICAgICAgICAgLy8gMSAgICAgICAgMiAgICAgICAzICAgICAgICAgNCAgICAgICAgICA1ICAgICAgICAgIDYgICAgICAgICAgNyAgICAgICAgICA4ICA5ICAgICAxMCAgICAgIDExXG4gIGZ1bmN0aW9uIGpzb25TdHJpbmdUb0RhdGUoc3RyaW5nKSB7XG4gICAgdmFyIG1hdGNoO1xuICAgIGlmIChtYXRjaCA9IHN0cmluZy5tYXRjaChSX0lTTzg2MDFfU1RSKSkge1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKSxcbiAgICAgICAgICB0ekhvdXIgPSAwLFxuICAgICAgICAgIHR6TWluICA9IDAsXG4gICAgICAgICAgZGF0ZVNldHRlciA9IG1hdGNoWzhdID8gZGF0ZS5zZXRVVENGdWxsWWVhciA6IGRhdGUuc2V0RnVsbFllYXIsXG4gICAgICAgICAgdGltZVNldHRlciA9IG1hdGNoWzhdID8gZGF0ZS5zZXRVVENIb3VycyA6IGRhdGUuc2V0SG91cnM7XG5cbiAgICAgIGlmIChtYXRjaFs5XSkge1xuICAgICAgICB0ekhvdXIgPSBpbnQobWF0Y2hbOV0gKyBtYXRjaFsxMF0pO1xuICAgICAgICB0ek1pbiA9IGludChtYXRjaFs5XSArIG1hdGNoWzExXSk7XG4gICAgICB9XG4gICAgICBkYXRlU2V0dGVyLmNhbGwoZGF0ZSwgaW50KG1hdGNoWzFdKSwgaW50KG1hdGNoWzJdKSAtIDEsIGludChtYXRjaFszXSkpO1xuICAgICAgdmFyIGggPSBpbnQobWF0Y2hbNF0gfHwgMCkgLSB0ekhvdXI7XG4gICAgICB2YXIgbSA9IGludChtYXRjaFs1XSB8fCAwKSAtIHR6TWluO1xuICAgICAgdmFyIHMgPSBpbnQobWF0Y2hbNl0gfHwgMCk7XG4gICAgICB2YXIgbXMgPSBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoJzAuJyArIChtYXRjaFs3XSB8fCAwKSkgKiAxMDAwKTtcbiAgICAgIHRpbWVTZXR0ZXIuY2FsbChkYXRlLCBoLCBtLCBzLCBtcyk7XG4gICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfVxuXG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUsIGZvcm1hdCwgdGltZXpvbmUpIHtcbiAgICB2YXIgdGV4dCA9ICcnLFxuICAgICAgICBwYXJ0cyA9IFtdLFxuICAgICAgICBmbiwgbWF0Y2g7XG5cbiAgICBmb3JtYXQgPSBmb3JtYXQgfHwgJ21lZGl1bURhdGUnO1xuICAgIGZvcm1hdCA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUU1tmb3JtYXRdIHx8IGZvcm1hdDtcbiAgICBpZiAoaXNTdHJpbmcoZGF0ZSkpIHtcbiAgICAgIGRhdGUgPSBOVU1CRVJfU1RSSU5HLnRlc3QoZGF0ZSkgPyBpbnQoZGF0ZSkgOiBqc29uU3RyaW5nVG9EYXRlKGRhdGUpO1xuICAgIH1cblxuICAgIGlmIChpc051bWJlcihkYXRlKSkge1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuICAgIH1cblxuICAgIGlmICghaXNEYXRlKGRhdGUpKSB7XG4gICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG5cbiAgICB3aGlsZSAoZm9ybWF0KSB7XG4gICAgICBtYXRjaCA9IERBVEVfRk9STUFUU19TUExJVC5leGVjKGZvcm1hdCk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcGFydHMgPSBjb25jYXQocGFydHMsIG1hdGNoLCAxKTtcbiAgICAgICAgZm9ybWF0ID0gcGFydHMucG9wKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0cy5wdXNoKGZvcm1hdCk7XG4gICAgICAgIGZvcm1hdCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRpbWV6b25lICYmIHRpbWV6b25lID09PSAnVVRDJykge1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcbiAgICAgIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSArIGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSk7XG4gICAgfVxuICAgIGZvckVhY2gocGFydHMsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBmbiA9IERBVEVfRk9STUFUU1t2YWx1ZV07XG4gICAgICB0ZXh0ICs9IGZuID8gZm4oZGF0ZSwgJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTKVxuICAgICAgICAgICAgICAgICA6IHZhbHVlLnJlcGxhY2UoLyheJ3wnJCkvZywgJycpLnJlcGxhY2UoLycnL2csIFwiJ1wiKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0ZXh0O1xuICB9O1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUganNvblxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqICAgQWxsb3dzIHlvdSB0byBjb252ZXJ0IGEgSmF2YVNjcmlwdCBvYmplY3QgaW50byBKU09OIHN0cmluZy5cbiAqXG4gKiAgIFRoaXMgZmlsdGVyIGlzIG1vc3RseSB1c2VmdWwgZm9yIGRlYnVnZ2luZy4gV2hlbiB1c2luZyB0aGUgZG91YmxlIGN1cmx5IHt7dmFsdWV9fSBub3RhdGlvblxuICogICB0aGUgYmluZGluZyBpcyBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byBKU09OLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IEFueSBKYXZhU2NyaXB0IG9iamVjdCAoaW5jbHVkaW5nIGFycmF5cyBhbmQgcHJpbWl0aXZlIHR5cGVzKSB0byBmaWx0ZXIuXG4gKiBAcGFyYW0ge251bWJlcj19IHNwYWNpbmcgVGhlIG51bWJlciBvZiBzcGFjZXMgdG8gdXNlIHBlciBpbmRlbnRhdGlvbiwgZGVmYXVsdHMgdG8gMi5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEpTT04gc3RyaW5nLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHByZSBpZD1cImRlZmF1bHQtc3BhY2luZ1wiPnt7IHsnbmFtZSc6J3ZhbHVlJ30gfCBqc29uIH19PC9wcmU+XG4gICAgICAgPHByZSBpZD1cImN1c3RvbS1zcGFjaW5nXCI+e3sgeyduYW1lJzondmFsdWUnfSB8IGpzb246NCB9fTwvcHJlPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGpzb25pZnkgZmlsdGVyZWQgb2JqZWN0cycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RlZmF1bHQtc3BhY2luZycpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL1xce1xcbiAgXCJuYW1lXCI6ID9cInZhbHVlXCJcXG59Lyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VzdG9tLXNwYWNpbmcnKSkuZ2V0VGV4dCgpKS50b01hdGNoKC9cXHtcXG4gICAgXCJuYW1lXCI6ID9cInZhbHVlXCJcXG59Lyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqXG4gKi9cbmZ1bmN0aW9uIGpzb25GaWx0ZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QsIHNwYWNpbmcpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQoc3BhY2luZykpIHtcbiAgICAgICAgc3BhY2luZyA9IDI7XG4gICAgfVxuICAgIHJldHVybiB0b0pzb24ob2JqZWN0LCBzcGFjaW5nKTtcbiAgfTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGxvd2VyY2FzZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydHMgc3RyaW5nIHRvIGxvd2VyY2FzZS5cbiAqIEBzZWUgYW5ndWxhci5sb3dlcmNhc2VcbiAqL1xudmFyIGxvd2VyY2FzZUZpbHRlciA9IHZhbHVlRm4obG93ZXJjYXNlKTtcblxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIHVwcGVyY2FzZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydHMgc3RyaW5nIHRvIHVwcGVyY2FzZS5cbiAqIEBzZWUgYW5ndWxhci51cHBlcmNhc2VcbiAqL1xudmFyIHVwcGVyY2FzZUZpbHRlciA9IHZhbHVlRm4odXBwZXJjYXNlKTtcblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBsaW1pdFRvXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBhcnJheSBvciBzdHJpbmcgY29udGFpbmluZyBvbmx5IGEgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cy4gVGhlIGVsZW1lbnRzXG4gKiBhcmUgdGFrZW4gZnJvbSBlaXRoZXIgdGhlIGJlZ2lubmluZyBvciB0aGUgZW5kIG9mIHRoZSBzb3VyY2UgYXJyYXksIHN0cmluZyBvciBudW1iZXIsIGFzIHNwZWNpZmllZCBieVxuICogdGhlIHZhbHVlIGFuZCBzaWduIChwb3NpdGl2ZSBvciBuZWdhdGl2ZSkgb2YgYGxpbWl0YC4gSWYgYSBudW1iZXIgaXMgdXNlZCBhcyBpbnB1dCwgaXQgaXNcbiAqIGNvbnZlcnRlZCB0byBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ3xudW1iZXJ9IGlucHV0IFNvdXJjZSBhcnJheSwgc3RyaW5nIG9yIG51bWJlciB0byBiZSBsaW1pdGVkLlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBsaW1pdCBUaGUgbGVuZ3RoIG9mIHRoZSByZXR1cm5lZCBhcnJheSBvciBzdHJpbmcuIElmIHRoZSBgbGltaXRgIG51bWJlclxuICogICAgIGlzIHBvc2l0aXZlLCBgbGltaXRgIG51bWJlciBvZiBpdGVtcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBhcnJheS9zdHJpbmcgYXJlIGNvcGllZC5cbiAqICAgICBJZiB0aGUgbnVtYmVyIGlzIG5lZ2F0aXZlLCBgbGltaXRgIG51bWJlciAgb2YgaXRlbXMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2UgYXJyYXkvc3RyaW5nXG4gKiAgICAgYXJlIGNvcGllZC4gVGhlIGBsaW1pdGAgd2lsbCBiZSB0cmltbWVkIGlmIGl0IGV4Y2VlZHMgYGFycmF5Lmxlbmd0aGBcbiAqIEByZXR1cm5zIHtBcnJheXxzdHJpbmd9IEEgbmV3IHN1Yi1hcnJheSBvciBzdWJzdHJpbmcgb2YgbGVuZ3RoIGBsaW1pdGAgb3IgbGVzcyBpZiBpbnB1dCBhcnJheVxuICogICAgIGhhZCBsZXNzIHRoYW4gYGxpbWl0YCBlbGVtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibGltaXRUb0V4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2xpbWl0VG9FeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLm51bWJlcnMgPSBbMSwyLDMsNCw1LDYsNyw4LDldO1xuICAgICAgICAgICAgICRzY29wZS5sZXR0ZXJzID0gXCJhYmNkZWZnaGlcIjtcbiAgICAgICAgICAgICAkc2NvcGUubG9uZ051bWJlciA9IDIzNDU0MzIzNDI7XG4gICAgICAgICAgICAgJHNjb3BlLm51bUxpbWl0ID0gMztcbiAgICAgICAgICAgICAkc2NvcGUubGV0dGVyTGltaXQgPSAzO1xuICAgICAgICAgICAgICRzY29wZS5sb25nTnVtYmVyTGltaXQgPSAzO1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIExpbWl0IHt7bnVtYmVyc319IHRvOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0ZXA9XCIxXCIgbmctbW9kZWw9XCJudW1MaW1pdFwiPlxuICAgICAgICAgPHA+T3V0cHV0IG51bWJlcnM6IHt7IG51bWJlcnMgfCBsaW1pdFRvOm51bUxpbWl0IH19PC9wPlxuICAgICAgICAgTGltaXQge3tsZXR0ZXJzfX0gdG86IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgc3RlcD1cIjFcIiBuZy1tb2RlbD1cImxldHRlckxpbWl0XCI+XG4gICAgICAgICA8cD5PdXRwdXQgbGV0dGVyczoge3sgbGV0dGVycyB8IGxpbWl0VG86bGV0dGVyTGltaXQgfX08L3A+XG4gICAgICAgICBMaW1pdCB7e2xvbmdOdW1iZXJ9fSB0bzogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBzdGVwPVwiMVwiIG5nLW1vZGVsPVwibG9uZ051bWJlckxpbWl0XCI+XG4gICAgICAgICA8cD5PdXRwdXQgbG9uZyBudW1iZXI6IHt7IGxvbmdOdW1iZXIgfCBsaW1pdFRvOmxvbmdOdW1iZXJMaW1pdCB9fTwvcD5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIG51bUxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdudW1MaW1pdCcpKTtcbiAgICAgICB2YXIgbGV0dGVyTGltaXRJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2xldHRlckxpbWl0JykpO1xuICAgICAgIHZhciBsb25nTnVtYmVyTGltaXRJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2xvbmdOdW1iZXJMaW1pdCcpKTtcbiAgICAgICB2YXIgbGltaXRlZE51bWJlcnMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ251bWJlcnMgfCBsaW1pdFRvOm51bUxpbWl0JykpO1xuICAgICAgIHZhciBsaW1pdGVkTGV0dGVycyA9IGVsZW1lbnQoYnkuYmluZGluZygnbGV0dGVycyB8IGxpbWl0VG86bGV0dGVyTGltaXQnKSk7XG4gICAgICAgdmFyIGxpbWl0ZWRMb25nTnVtYmVyID0gZWxlbWVudChieS5iaW5kaW5nKCdsb25nTnVtYmVyIHwgbGltaXRUbzpsb25nTnVtYmVyTGltaXQnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGxpbWl0IHRoZSBudW1iZXIgYXJyYXkgdG8gZmlyc3QgdGhyZWUgaXRlbXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChudW1MaW1pdElucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnMycpO1xuICAgICAgICAgZXhwZWN0KGxldHRlckxpbWl0SW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCczJyk7XG4gICAgICAgICBleHBlY3QobG9uZ051bWJlckxpbWl0SW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCczJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZE51bWJlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbnVtYmVyczogWzEsMiwzXScpO1xuICAgICAgICAgZXhwZWN0KGxpbWl0ZWRMZXR0ZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxldHRlcnM6IGFiYycpO1xuICAgICAgICAgZXhwZWN0KGxpbWl0ZWRMb25nTnVtYmVyLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxvbmcgbnVtYmVyOiAyMzQnKTtcbiAgICAgICB9KTtcblxuICAgICAgIC8vIFRoZXJlIGlzIGEgYnVnIGluIHNhZmFyaSBhbmQgcHJvdHJhY3RvciB0aGF0IGRvZXNuJ3QgbGlrZSB0aGUgbWludXMga2V5XG4gICAgICAgLy8gaXQoJ3Nob3VsZCB1cGRhdGUgdGhlIG91dHB1dCB3aGVuIC0zIGlzIGVudGVyZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAvLyAgIG51bUxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAvLyAgIG51bUxpbWl0SW5wdXQuc2VuZEtleXMoJy0zJyk7XG4gICAgICAgLy8gICBsZXR0ZXJMaW1pdElucHV0LmNsZWFyKCk7XG4gICAgICAgLy8gICBsZXR0ZXJMaW1pdElucHV0LnNlbmRLZXlzKCctMycpO1xuICAgICAgIC8vICAgbG9uZ051bWJlckxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAvLyAgIGxvbmdOdW1iZXJMaW1pdElucHV0LnNlbmRLZXlzKCctMycpO1xuICAgICAgIC8vICAgZXhwZWN0KGxpbWl0ZWROdW1iZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IG51bWJlcnM6IFs3LDgsOV0nKTtcbiAgICAgICAvLyAgIGV4cGVjdChsaW1pdGVkTGV0dGVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsZXR0ZXJzOiBnaGknKTtcbiAgICAgICAvLyAgIGV4cGVjdChsaW1pdGVkTG9uZ051bWJlci5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsb25nIG51bWJlcjogMzQyJyk7XG4gICAgICAgLy8gfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIG5vdCBleGNlZWQgdGhlIG1heGltdW0gc2l6ZSBvZiBpbnB1dCBhcnJheScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgbnVtTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbnVtTGltaXRJbnB1dC5zZW5kS2V5cygnMTAwJyk7XG4gICAgICAgICBsZXR0ZXJMaW1pdElucHV0LmNsZWFyKCk7XG4gICAgICAgICBsZXR0ZXJMaW1pdElucHV0LnNlbmRLZXlzKCcxMDAnKTtcbiAgICAgICAgIGxvbmdOdW1iZXJMaW1pdElucHV0LmNsZWFyKCk7XG4gICAgICAgICBsb25nTnVtYmVyTGltaXRJbnB1dC5zZW5kS2V5cygnMTAwJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZE51bWJlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbnVtYmVyczogWzEsMiwzLDQsNSw2LDcsOCw5XScpO1xuICAgICAgICAgZXhwZWN0KGxpbWl0ZWRMZXR0ZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxldHRlcnM6IGFiY2RlZmdoaScpO1xuICAgICAgICAgZXhwZWN0KGxpbWl0ZWRMb25nTnVtYmVyLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxvbmcgbnVtYmVyOiAyMzQ1NDMyMzQyJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiovXG5mdW5jdGlvbiBsaW1pdFRvRmlsdGVyKCkge1xuICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIGxpbWl0KSB7XG4gICAgaWYgKGlzTnVtYmVyKGlucHV0KSkgaW5wdXQgPSBpbnB1dC50b1N0cmluZygpO1xuICAgIGlmICghaXNBcnJheShpbnB1dCkgJiYgIWlzU3RyaW5nKGlucHV0KSkgcmV0dXJuIGlucHV0O1xuXG4gICAgaWYgKE1hdGguYWJzKE51bWJlcihsaW1pdCkpID09PSBJbmZpbml0eSkge1xuICAgICAgbGltaXQgPSBOdW1iZXIobGltaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaW1pdCA9IGludChsaW1pdCk7XG4gICAgfVxuXG4gICAgLy9OYU4gY2hlY2sgb24gbGltaXRcbiAgICBpZiAobGltaXQpIHtcbiAgICAgIHJldHVybiBsaW1pdCA+IDAgPyBpbnB1dC5zbGljZSgwLCBsaW1pdCkgOiBpbnB1dC5zbGljZShsaW1pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpc1N0cmluZyhpbnB1dCkgPyBcIlwiIDogW107XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIG9yZGVyQnlcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBPcmRlcnMgYSBzcGVjaWZpZWQgYGFycmF5YCBieSB0aGUgYGV4cHJlc3Npb25gIHByZWRpY2F0ZS4gSXQgaXMgb3JkZXJlZCBhbHBoYWJldGljYWxseVxuICogZm9yIHN0cmluZ3MgYW5kIG51bWVyaWNhbGx5IGZvciBudW1iZXJzLiBOb3RlOiBpZiB5b3Ugbm90aWNlIG51bWJlcnMgYXJlIG5vdCBiZWluZyBzb3J0ZWRcbiAqIGNvcnJlY3RseSwgbWFrZSBzdXJlIHRoZXkgYXJlIGFjdHVhbGx5IGJlaW5nIHNhdmVkIGFzIG51bWJlcnMgYW5kIG5vdCBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzb3J0LlxuICogQHBhcmFtIHtmdW5jdGlvbigqKXxzdHJpbmd8QXJyYXkuPChmdW5jdGlvbigqKXxzdHJpbmcpPj19IGV4cHJlc3Npb24gQSBwcmVkaWNhdGUgdG8gYmVcbiAqICAgIHVzZWQgYnkgdGhlIGNvbXBhcmF0b3IgdG8gZGV0ZXJtaW5lIHRoZSBvcmRlciBvZiBlbGVtZW50cy5cbiAqXG4gKiAgICBDYW4gYmUgb25lIG9mOlxuICpcbiAqICAgIC0gYGZ1bmN0aW9uYDogR2V0dGVyIGZ1bmN0aW9uLiBUaGUgcmVzdWx0IG9mIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBzb3J0ZWQgdXNpbmcgdGhlXG4gKiAgICAgIGA8YCwgYD1gLCBgPmAgb3BlcmF0b3IuXG4gKiAgICAtIGBzdHJpbmdgOiBBbiBBbmd1bGFyIGV4cHJlc3Npb24uIFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIGlzIHVzZWQgdG8gY29tcGFyZSBlbGVtZW50c1xuICogICAgICAoZm9yIGV4YW1wbGUgYG5hbWVgIHRvIHNvcnQgYnkgYSBwcm9wZXJ0eSBjYWxsZWQgYG5hbWVgIG9yIGBuYW1lLnN1YnN0cigwLCAzKWAgdG8gc29ydCBieVxuICogICAgICAzIGZpcnN0IGNoYXJhY3RlcnMgb2YgYSBwcm9wZXJ0eSBjYWxsZWQgYG5hbWVgKS4gVGhlIHJlc3VsdCBvZiBhIGNvbnN0YW50IGV4cHJlc3Npb25cbiAqICAgICAgaXMgaW50ZXJwcmV0ZWQgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvIGJlIHVzZWQgaW4gY29tcGFyaXNvbnMgKGZvciBleGFtcGxlIGBcInNwZWNpYWwgbmFtZVwiYFxuICogICAgICB0byBzb3J0IG9iamVjdCBieSB0aGUgdmFsdWUgb2YgdGhlaXIgYHNwZWNpYWwgbmFtZWAgcHJvcGVydHkpLiBBbiBleHByZXNzaW9uIGNhbiBiZVxuICogICAgICBvcHRpb25hbGx5IHByZWZpeGVkIHdpdGggYCtgIG9yIGAtYCB0byBjb250cm9sIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nIHNvcnQgb3JkZXJcbiAqICAgICAgKGZvciBleGFtcGxlLCBgK25hbWVgIG9yIGAtbmFtZWApLiBJZiBubyBwcm9wZXJ0eSBpcyBwcm92aWRlZCwgKGUuZy4gYCcrJ2ApIHRoZW4gdGhlIGFycmF5XG4gKiAgICAgIGVsZW1lbnQgaXRzZWxmIGlzIHVzZWQgdG8gY29tcGFyZSB3aGVyZSBzb3J0aW5nLlxuICogICAgLSBgQXJyYXlgOiBBbiBhcnJheSBvZiBmdW5jdGlvbiBvciBzdHJpbmcgcHJlZGljYXRlcy4gVGhlIGZpcnN0IHByZWRpY2F0ZSBpbiB0aGUgYXJyYXlcbiAqICAgICAgaXMgdXNlZCBmb3Igc29ydGluZywgYnV0IHdoZW4gdHdvIGl0ZW1zIGFyZSBlcXVpdmFsZW50LCB0aGUgbmV4dCBwcmVkaWNhdGUgaXMgdXNlZC5cbiAqXG4gKiAgICBJZiB0aGUgcHJlZGljYXRlIGlzIG1pc3Npbmcgb3IgZW1wdHkgdGhlbiBpdCBkZWZhdWx0cyB0byBgJysnYC5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSByZXZlcnNlIFJldmVyc2UgdGhlIG9yZGVyIG9mIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIHtBcnJheX0gU29ydGVkIGNvcHkgb2YgdGhlIHNvdXJjZSBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwib3JkZXJCeUV4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ29yZGVyQnlFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPVxuICAgICAgICAgICAgICAgICBbe25hbWU6J0pvaG4nLCBwaG9uZTonNTU1LTEyMTInLCBhZ2U6MTB9LFxuICAgICAgICAgICAgICAgICAge25hbWU6J01hcnknLCBwaG9uZTonNTU1LTk4NzYnLCBhZ2U6MTl9LFxuICAgICAgICAgICAgICAgICAge25hbWU6J01pa2UnLCBwaG9uZTonNTU1LTQzMjEnLCBhZ2U6MjF9LFxuICAgICAgICAgICAgICAgICAge25hbWU6J0FkYW0nLCBwaG9uZTonNTU1LTU2NzgnLCBhZ2U6MzV9LFxuICAgICAgICAgICAgICAgICAge25hbWU6J0p1bGllJywgcGhvbmU6JzU1NS04NzY1JywgYWdlOjI5fV07XG4gICAgICAgICAgICAgJHNjb3BlLnByZWRpY2F0ZSA9ICctYWdlJztcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8cHJlPlNvcnRpbmcgcHJlZGljYXRlID0ge3twcmVkaWNhdGV9fTsgcmV2ZXJzZSA9IHt7cmV2ZXJzZX19PC9wcmU+XG4gICAgICAgICA8aHIvPlxuICAgICAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJwcmVkaWNhdGU9JydcIj51bnNvcnRlZDwvYT4gXVxuICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kXCI+XG4gICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICA8dGg+PGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicHJlZGljYXRlID0gJ25hbWUnOyByZXZlcnNlPWZhbHNlXCI+TmFtZTwvYT5cbiAgICAgICAgICAgICAgICAgKDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInByZWRpY2F0ZSA9ICctbmFtZSc7IHJldmVyc2U9ZmFsc2VcIj5ePC9hPik8L3RoPlxuICAgICAgICAgICAgIDx0aD48YSBocmVmPVwiXCIgbmctY2xpY2s9XCJwcmVkaWNhdGUgPSAncGhvbmUnOyByZXZlcnNlPSFyZXZlcnNlXCI+UGhvbmUgTnVtYmVyPC9hPjwvdGg+XG4gICAgICAgICAgICAgPHRoPjxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInByZWRpY2F0ZSA9ICdhZ2UnOyByZXZlcnNlPSFyZXZlcnNlXCI+QWdlPC9hPjwvdGg+XG4gICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IG9yZGVyQnk6cHJlZGljYXRlOnJldmVyc2VcIj5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmFnZX19PC90ZD5cbiAgICAgICAgICAgPC90cj5cbiAgICAgICAgIDwvdGFibGU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqXG4gKiBJdCdzIGFsc28gcG9zc2libGUgdG8gY2FsbCB0aGUgb3JkZXJCeSBmaWx0ZXIgbWFudWFsbHksIGJ5IGluamVjdGluZyBgJGZpbHRlcmAsIHJldHJpZXZpbmcgdGhlXG4gKiBmaWx0ZXIgcm91dGluZSB3aXRoIGAkZmlsdGVyKCdvcmRlckJ5JylgLCBhbmQgY2FsbGluZyB0aGUgcmV0dXJuZWQgZmlsdGVyIHJvdXRpbmUgd2l0aCB0aGVcbiAqIGRlc2lyZWQgcGFyYW1ldGVycy5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlIG1vZHVsZT1cIm9yZGVyQnlFeGFtcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgIDx0YWJsZSBjbGFzcz1cImZyaWVuZFwiPlxuICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgIDx0aD48YSBocmVmPVwiXCIgbmctY2xpY2s9XCJyZXZlcnNlPWZhbHNlO29yZGVyKCduYW1lJywgZmFsc2UpXCI+TmFtZTwvYT5cbiAgICAgICAgICAgICAgKDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cIm9yZGVyKCctbmFtZScsZmFsc2UpXCI+XjwvYT4pPC90aD5cbiAgICAgICAgICAgIDx0aD48YSBocmVmPVwiXCIgbmctY2xpY2s9XCJyZXZlcnNlPSFyZXZlcnNlO29yZGVyKCdwaG9uZScsIHJldmVyc2UpXCI+UGhvbmUgTnVtYmVyPC9hPjwvdGg+XG4gICAgICAgICAgICA8dGg+PGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicmV2ZXJzZT0hcmV2ZXJzZTtvcmRlcignYWdlJyxyZXZlcnNlKVwiPkFnZTwvYT48L3RoPlxuICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzXCI+XG4gICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cbiAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5hZ2V9fTwvdGQ+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgPC90YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cblxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckZmlsdGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkZmlsdGVyKSB7XG4gICAgICAgICAgdmFyIG9yZGVyQnkgPSAkZmlsdGVyKCdvcmRlckJ5Jyk7XG4gICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBbXG4gICAgICAgICAgICB7IG5hbWU6ICdKb2huJywgICAgcGhvbmU6ICc1NTUtMTIxMicsICAgIGFnZTogMTAgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ01hcnknLCAgICBwaG9uZTogJzU1NS05ODc2JywgICAgYWdlOiAxOSB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnTWlrZScsICAgIHBob25lOiAnNTU1LTQzMjEnLCAgICBhZ2U6IDIxIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdBZGFtJywgICAgcGhvbmU6ICc1NTUtNTY3OCcsICAgIGFnZTogMzUgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0p1bGllJywgICBwaG9uZTogJzU1NS04NzY1JywgICAgYWdlOiAyOSB9XG4gICAgICAgICAgXTtcbiAgICAgICAgICAkc2NvcGUub3JkZXIgPSBmdW5jdGlvbihwcmVkaWNhdGUsIHJldmVyc2UpIHtcbiAgICAgICAgICAgICRzY29wZS5mcmllbmRzID0gb3JkZXJCeSgkc2NvcGUuZnJpZW5kcywgcHJlZGljYXRlLCByZXZlcnNlKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgICRzY29wZS5vcmRlcignLWFnZScsZmFsc2UpO1xuICAgICAgICB9XSk7XG4gICAgPC9maWxlPlxuPC9leGFtcGxlPlxuICovXG5vcmRlckJ5RmlsdGVyLiRpbmplY3QgPSBbJyRwYXJzZSddO1xuZnVuY3Rpb24gb3JkZXJCeUZpbHRlcigkcGFyc2UpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBzb3J0UHJlZGljYXRlLCByZXZlcnNlT3JkZXIpIHtcbiAgICBpZiAoIShpc0FycmF5TGlrZShhcnJheSkpKSByZXR1cm4gYXJyYXk7XG4gICAgc29ydFByZWRpY2F0ZSA9IGlzQXJyYXkoc29ydFByZWRpY2F0ZSkgPyBzb3J0UHJlZGljYXRlIDogW3NvcnRQcmVkaWNhdGVdO1xuICAgIGlmIChzb3J0UHJlZGljYXRlLmxlbmd0aCA9PT0gMCkgeyBzb3J0UHJlZGljYXRlID0gWycrJ107IH1cbiAgICBzb3J0UHJlZGljYXRlID0gc29ydFByZWRpY2F0ZS5tYXAoZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgICB2YXIgZGVzY2VuZGluZyA9IGZhbHNlLCBnZXQgPSBwcmVkaWNhdGUgfHwgaWRlbnRpdHk7XG4gICAgICBpZiAoaXNTdHJpbmcocHJlZGljYXRlKSkge1xuICAgICAgICBpZiAoKHByZWRpY2F0ZS5jaGFyQXQoMCkgPT0gJysnIHx8IHByZWRpY2F0ZS5jaGFyQXQoMCkgPT0gJy0nKSkge1xuICAgICAgICAgIGRlc2NlbmRpbmcgPSBwcmVkaWNhdGUuY2hhckF0KDApID09ICctJztcbiAgICAgICAgICBwcmVkaWNhdGUgPSBwcmVkaWNhdGUuc3Vic3RyaW5nKDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmVkaWNhdGUgPT09ICcnKSB7XG4gICAgICAgICAgLy8gRWZmZWN0aXZlbHkgbm8gcHJlZGljYXRlIHdhcyBwYXNzZWQgc28gd2UgY29tcGFyZSBpZGVudGl0eVxuICAgICAgICAgIHJldHVybiByZXZlcnNlQ29tcGFyYXRvcihjb21wYXJlLCBkZXNjZW5kaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBnZXQgPSAkcGFyc2UocHJlZGljYXRlKTtcbiAgICAgICAgaWYgKGdldC5jb25zdGFudCkge1xuICAgICAgICAgIHZhciBrZXkgPSBnZXQoKTtcbiAgICAgICAgICByZXR1cm4gcmV2ZXJzZUNvbXBhcmF0b3IoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmUoYVtrZXldLCBiW2tleV0pO1xuICAgICAgICAgIH0sIGRlc2NlbmRpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV2ZXJzZUNvbXBhcmF0b3IoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICByZXR1cm4gY29tcGFyZShnZXQoYSksZ2V0KGIpKTtcbiAgICAgIH0sIGRlc2NlbmRpbmcpO1xuICAgIH0pO1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5KS5zb3J0KHJldmVyc2VDb21wYXJhdG9yKGNvbXBhcmF0b3IsIHJldmVyc2VPcmRlcikpO1xuXG4gICAgZnVuY3Rpb24gY29tcGFyYXRvcihvMSwgbzIpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc29ydFByZWRpY2F0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY29tcCA9IHNvcnRQcmVkaWNhdGVbaV0obzEsIG8yKTtcbiAgICAgICAgaWYgKGNvbXAgIT09IDApIHJldHVybiBjb21wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJldmVyc2VDb21wYXJhdG9yKGNvbXAsIGRlc2NlbmRpbmcpIHtcbiAgICAgIHJldHVybiBkZXNjZW5kaW5nXG4gICAgICAgICAgPyBmdW5jdGlvbihhLCBiKSB7cmV0dXJuIGNvbXAoYixhKTt9XG4gICAgICAgICAgOiBjb21wO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7XG4gICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICBjYXNlICdudW1iZXInOiAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgIGNhc2UgJ2Jvb2xlYW4nOiAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiAnbnVsbCc7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlLnZhbHVlT2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS52YWx1ZU9mKCk7XG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUudG9TdHJpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICBpZiAoaXNQcmltaXRpdmUodmFsdWUpKSByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGFyZSh2MSwgdjIpIHtcbiAgICAgIHZhciB0MSA9IHR5cGVvZiB2MTtcbiAgICAgIHZhciB0MiA9IHR5cGVvZiB2MjtcbiAgICAgIGlmICh0MSA9PT0gdDIgJiYgdDEgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdjEgPSBvYmplY3RUb1N0cmluZyh2MSk7XG4gICAgICAgIHYyID0gb2JqZWN0VG9TdHJpbmcodjIpO1xuICAgICAgfVxuICAgICAgaWYgKHQxID09PSB0Mikge1xuICAgICAgICBpZiAodDEgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgdjEgPSB2MS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICB2MiA9IHYyLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYxID09PSB2MikgcmV0dXJuIDA7XG4gICAgICAgIHJldHVybiB2MSA8IHYyID8gLTEgOiAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHQxIDwgdDIgPyAtMSA6IDE7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBuZ0RpcmVjdGl2ZShkaXJlY3RpdmUpIHtcbiAgaWYgKGlzRnVuY3Rpb24oZGlyZWN0aXZlKSkge1xuICAgIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGxpbms6IGRpcmVjdGl2ZVxuICAgIH07XG4gIH1cbiAgZGlyZWN0aXZlLnJlc3RyaWN0ID0gZGlyZWN0aXZlLnJlc3RyaWN0IHx8ICdBQyc7XG4gIHJldHVybiB2YWx1ZUZuKGRpcmVjdGl2ZSk7XG59XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgYVxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIE1vZGlmaWVzIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSBodG1sIEEgdGFnIHNvIHRoYXQgdGhlIGRlZmF1bHQgYWN0aW9uIGlzIHByZXZlbnRlZCB3aGVuXG4gKiB0aGUgaHJlZiBhdHRyaWJ1dGUgaXMgZW1wdHkuXG4gKlxuICogVGhpcyBjaGFuZ2UgcGVybWl0cyB0aGUgZWFzeSBjcmVhdGlvbiBvZiBhY3Rpb24gbGlua3Mgd2l0aCB0aGUgYG5nQ2xpY2tgIGRpcmVjdGl2ZVxuICogd2l0aG91dCBjaGFuZ2luZyB0aGUgbG9jYXRpb24gb3IgY2F1c2luZyBwYWdlIHJlbG9hZHMsIGUuZy46XG4gKiBgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwibGlzdC5hZGRJdGVtKClcIj5BZGQgSXRlbTwvYT5gXG4gKi9cbnZhciBodG1sQW5jaG9yRGlyZWN0aXZlID0gdmFsdWVGbih7XG4gIHJlc3RyaWN0OiAnRScsXG4gIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICBpZiAoIWF0dHIuaHJlZiAmJiAhYXR0ci54bGlua0hyZWYgJiYgIWF0dHIubmFtZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICAgIC8vIElmIHRoZSBsaW5rZWQgZWxlbWVudCBpcyBub3QgYW4gYW5jaG9yIHRhZyBhbnltb3JlLCBkbyBub3RoaW5nXG4gICAgICAgIGlmIChlbGVtZW50WzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdhJykgcmV0dXJuO1xuXG4gICAgICAgIC8vIFNWR0FFbGVtZW50IGRvZXMgbm90IHVzZSB0aGUgaHJlZiBhdHRyaWJ1dGUsIGJ1dCByYXRoZXIgdGhlICd4bGlua0hyZWYnIGF0dHJpYnV0ZS5cbiAgICAgICAgdmFyIGhyZWYgPSB0b1N0cmluZy5jYWxsKGVsZW1lbnQucHJvcCgnaHJlZicpKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJyA/XG4gICAgICAgICAgICAgICAgICAgJ3hsaW5rOmhyZWYnIDogJ2hyZWYnO1xuICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgLy8gaWYgd2UgaGF2ZSBubyBocmVmIHVybCwgdGhlbiBkb24ndCBuYXZpZ2F0ZSBhbnl3aGVyZS5cbiAgICAgICAgICBpZiAoIWVsZW1lbnQuYXR0cihocmVmKSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nSHJlZlxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSA5OVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNpbmcgQW5ndWxhciBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGFuIGhyZWYgYXR0cmlidXRlIHdpbGxcbiAqIG1ha2UgdGhlIGxpbmsgZ28gdG8gdGhlIHdyb25nIFVSTCBpZiB0aGUgdXNlciBjbGlja3MgaXQgYmVmb3JlXG4gKiBBbmd1bGFyIGhhcyBhIGNoYW5jZSB0byByZXBsYWNlIHRoZSBge3toYXNofX1gIG1hcmt1cCB3aXRoIGl0c1xuICogdmFsdWUuIFVudGlsIEFuZ3VsYXIgcmVwbGFjZXMgdGhlIG1hcmt1cCB0aGUgbGluayB3aWxsIGJlIGJyb2tlblxuICogYW5kIHdpbGwgbW9zdCBsaWtlbHkgcmV0dXJuIGEgNDA0IGVycm9yLiBUaGUgYG5nSHJlZmAgZGlyZWN0aXZlXG4gKiBzb2x2ZXMgdGhpcyBwcm9ibGVtLlxuICpcbiAqIFRoZSB3cm9uZyB3YXkgdG8gd3JpdGUgaXQ6XG4gKiBgYGBodG1sXG4gKiA8YSBocmVmPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCI+bGluazE8L2E+XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29ycmVjdCB3YXkgdG8gd3JpdGUgaXQ6XG4gKiBgYGBodG1sXG4gKiA8YSBuZy1ocmVmPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCI+bGluazE8L2E+XG4gKiBgYGBcbiAqXG4gKiBAZWxlbWVudCBBXG4gKiBAcGFyYW0ge3RlbXBsYXRlfSBuZ0hyZWYgYW55IHN0cmluZyB3aGljaCBjYW4gY29udGFpbiBge3t9fWAgbWFya3VwLlxuICpcbiAqIEBleGFtcGxlXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgdmFyaW91cyBjb21iaW5hdGlvbnMgb2YgYGhyZWZgLCBgbmctaHJlZmAgYW5kIGBuZy1jbGlja2AgYXR0cmlidXRlc1xuICogaW4gbGlua3MgYW5kIHRoZWlyIGRpZmZlcmVudCBiZWhhdmlvcnM6XG4gICAgPGV4YW1wbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ2YWx1ZVwiIC8+PGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay0xXCIgaHJlZiBuZy1jbGljaz1cInZhbHVlID0gMVwiPmxpbmsgMTwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTJcIiBocmVmPVwiXCIgbmctY2xpY2s9XCJ2YWx1ZSA9IDJcIj5saW5rIDI8L2E+IChsaW5rLCBkb24ndCByZWxvYWQpPGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay0zXCIgbmctaHJlZj1cIi97eycxMjMnfX1cIj5saW5rIDM8L2E+IChsaW5rLCByZWxvYWQhKTxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstNFwiIGhyZWY9XCJcIiBuYW1lPVwieHhcIiBuZy1jbGljaz1cInZhbHVlID0gNFwiPmFuY2hvcjwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTVcIiBuYW1lPVwieHh4XCIgbmctY2xpY2s9XCJ2YWx1ZSA9IDVcIj5hbmNob3I8L2E+IChubyBsaW5rKTxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstNlwiIG5nLWhyZWY9XCJ7e3ZhbHVlfX1cIj5saW5rPC9hPiAobGluaywgY2hhbmdlIGxvY2F0aW9uKVxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBocmVmIHdpdGhvdXQgdmFsdWUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTEnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCcxJyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstMScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZSgnJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay0yJykpLmNsaWNrKCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnMicpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTInKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYW5kIGNoYW5nZSB1cmwgd2hlbiBuZy1ocmVmIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTMnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvTWF0Y2goL1xcLzEyMyQvKTtcblxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstMycpKS5jbGljaygpO1xuXG4gICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCwgd2UgbmF2aWdhdGUgYXdheSBmcm9tIGFuIEFuZ3VsYXIgcGFnZSwgc28gd2UgbmVlZFxuICAgICAgICAgIC8vIHRvIHVzZSBicm93c2VyLmRyaXZlciB0byBnZXQgdGhlIGJhc2Ugd2ViZHJpdmVyLlxuXG4gICAgICAgICAgYnJvd3Nlci53YWl0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICByZXR1cm4gdXJsLm1hdGNoKC9cXC8xMjMkLyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCA1MDAwLCAncGFnZSBzaG91bGQgbmF2aWdhdGUgdG8gLzEyMycpO1xuICAgICAgICB9KTtcblxuICAgICAgICB4aXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gaHJlZiBlbXB0eSBzdHJpbmcgYW5kIG5hbWUgc3BlY2lmaWVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay00JykpLmNsaWNrKCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnNCcpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTQnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBubyBocmVmIGJ1dCBuYW1lIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNScpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzUnKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay01JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKG51bGwpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIG9ubHkgY2hhbmdlIHVybCB3aGVuIG9ubHkgbmctaHJlZicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmNsZWFyKCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuc2VuZEtleXMoJzYnKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay02JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b01hdGNoKC9cXC82JC8pO1xuXG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay02JykpLmNsaWNrKCk7XG5cbiAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB3ZSBuYXZpZ2F0ZSBhd2F5IGZyb20gYW4gQW5ndWxhciBwYWdlLCBzbyB3ZSBuZWVkXG4gICAgICAgICAgLy8gdG8gdXNlIGJyb3dzZXIuZHJpdmVyIHRvIGdldCB0aGUgYmFzZSB3ZWJkcml2ZXIuXG4gICAgICAgICAgYnJvd3Nlci53YWl0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICByZXR1cm4gdXJsLm1hdGNoKC9cXC82JC8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC82Jyk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU3JjXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDk5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2luZyBBbmd1bGFyIG1hcmt1cCBsaWtlIGB7e2hhc2h9fWAgaW4gYSBgc3JjYCBhdHRyaWJ1dGUgZG9lc24ndFxuICogd29yayByaWdodDogVGhlIGJyb3dzZXIgd2lsbCBmZXRjaCBmcm9tIHRoZSBVUkwgd2l0aCB0aGUgbGl0ZXJhbFxuICogdGV4dCBge3toYXNofX1gIHVudGlsIEFuZ3VsYXIgcmVwbGFjZXMgdGhlIGV4cHJlc3Npb24gaW5zaWRlXG4gKiBge3toYXNofX1gLiBUaGUgYG5nU3JjYCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbS5cbiAqXG4gKiBUaGUgYnVnZ3kgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGltZyBzcmM9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX1cIi8+XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29ycmVjdCB3YXkgdG8gd3JpdGUgaXQ6XG4gKiBgYGBodG1sXG4gKiA8aW1nIG5nLXNyYz1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiLz5cbiAqIGBgYFxuICpcbiAqIEBlbGVtZW50IElNR1xuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdTcmMgYW55IHN0cmluZyB3aGljaCBjYW4gY29udGFpbiBge3t9fWAgbWFya3VwLlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTcmNzZXRcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgOTlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzaW5nIEFuZ3VsYXIgbWFya3VwIGxpa2UgYHt7aGFzaH19YCBpbiBhIGBzcmNzZXRgIGF0dHJpYnV0ZSBkb2Vzbid0XG4gKiB3b3JrIHJpZ2h0OiBUaGUgYnJvd3NlciB3aWxsIGZldGNoIGZyb20gdGhlIFVSTCB3aXRoIHRoZSBsaXRlcmFsXG4gKiB0ZXh0IGB7e2hhc2h9fWAgdW50aWwgQW5ndWxhciByZXBsYWNlcyB0aGUgZXhwcmVzc2lvbiBpbnNpZGVcbiAqIGB7e2hhc2h9fWAuIFRoZSBgbmdTcmNzZXRgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtLlxuICpcbiAqIFRoZSBidWdneSB3YXkgdG8gd3JpdGUgaXQ6XG4gKiBgYGBodG1sXG4gKiA8aW1nIHNyY3NldD1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fSAyeFwiLz5cbiAqIGBgYFxuICpcbiAqIFRoZSBjb3JyZWN0IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxpbWcgbmctc3Jjc2V0PVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19IDJ4XCIvPlxuICogYGBgXG4gKlxuICogQGVsZW1lbnQgSU1HXG4gKiBAcGFyYW0ge3RlbXBsYXRlfSBuZ1NyY3NldCBhbnkgc3RyaW5nIHdoaWNoIGNhbiBjb250YWluIGB7e319YCBtYXJrdXAuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0Rpc2FibGVkXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFdlIHNob3VsZG4ndCBkbyB0aGlzLCBiZWNhdXNlIGl0IHdpbGwgbWFrZSB0aGUgYnV0dG9uIGVuYWJsZWQgb24gQ2hyb21lL0ZpcmVmb3ggYnV0IG5vdCBvbiBJRTggYW5kIG9sZGVyIElFczpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgbmctaW5pdD1cInNjb3BlID0geyBpc0Rpc2FibGVkOiBmYWxzZSB9XCI+XG4gKiAgPGJ1dHRvbiBkaXNhYmxlZD1cInt7c2NvcGUuaXNEaXNhYmxlZH19XCI+RGlzYWJsZWQ8L2J1dHRvbj5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogVGhlIEhUTUwgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCByZXF1aXJlIGJyb3dzZXJzIHRvIHByZXNlcnZlIHRoZSB2YWx1ZXMgb2YgYm9vbGVhbiBhdHRyaWJ1dGVzXG4gKiBzdWNoIGFzIGRpc2FibGVkLiAoVGhlaXIgcHJlc2VuY2UgbWVhbnMgdHJ1ZSBhbmQgdGhlaXIgYWJzZW5jZSBtZWFucyBmYWxzZS4pXG4gKiBJZiB3ZSBwdXQgYW4gQW5ndWxhciBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gaW50byBzdWNoIGFuIGF0dHJpYnV0ZSB0aGVuIHRoZVxuICogYmluZGluZyBpbmZvcm1hdGlvbiB3b3VsZCBiZSBsb3N0IHdoZW4gdGhlIGJyb3dzZXIgcmVtb3ZlcyB0aGUgYXR0cmlidXRlLlxuICogVGhlIGBuZ0Rpc2FibGVkYCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbSBmb3IgdGhlIGBkaXNhYmxlZGAgYXR0cmlidXRlLlxuICogVGhpcyBjb21wbGVtZW50YXJ5IGRpcmVjdGl2ZSBpcyBub3QgcmVtb3ZlZCBieSB0aGUgYnJvd3NlciBhbmQgc28gcHJvdmlkZXNcbiAqIGEgcGVybWFuZW50IHJlbGlhYmxlIHBsYWNlIHRvIHN0b3JlIHRoZSBiaW5kaW5nIGluZm9ybWF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICBDbGljayBtZSB0byB0b2dnbGU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIj48YnIvPlxuICAgICAgICA8YnV0dG9uIG5nLW1vZGVsPVwiYnV0dG9uXCIgbmctZGlzYWJsZWQ9XCJjaGVja2VkXCI+QnV0dG9uPC9idXR0b24+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgdG9nZ2xlIGJ1dHRvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgSU5QVVRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdEaXNhYmxlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJkaXNhYmxlZFwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2hlY2tlZFxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxMDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBIVE1MIHNwZWNpZmljYXRpb24gZG9lcyBub3QgcmVxdWlyZSBicm93c2VycyB0byBwcmVzZXJ2ZSB0aGUgdmFsdWVzIG9mIGJvb2xlYW4gYXR0cmlidXRlc1xuICogc3VjaCBhcyBjaGVja2VkLiAoVGhlaXIgcHJlc2VuY2UgbWVhbnMgdHJ1ZSBhbmQgdGhlaXIgYWJzZW5jZSBtZWFucyBmYWxzZS4pXG4gKiBJZiB3ZSBwdXQgYW4gQW5ndWxhciBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gaW50byBzdWNoIGFuIGF0dHJpYnV0ZSB0aGVuIHRoZVxuICogYmluZGluZyBpbmZvcm1hdGlvbiB3b3VsZCBiZSBsb3N0IHdoZW4gdGhlIGJyb3dzZXIgcmVtb3ZlcyB0aGUgYXR0cmlidXRlLlxuICogVGhlIGBuZ0NoZWNrZWRgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtIGZvciB0aGUgYGNoZWNrZWRgIGF0dHJpYnV0ZS5cbiAqIFRoaXMgY29tcGxlbWVudGFyeSBkaXJlY3RpdmUgaXMgbm90IHJlbW92ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIHNvIHByb3ZpZGVzXG4gKiBhIHBlcm1hbmVudCByZWxpYWJsZSBwbGFjZSB0byBzdG9yZSB0aGUgYmluZGluZyBpbmZvcm1hdGlvbi5cbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICBDaGVjayBtZSB0byBjaGVjayBib3RoOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJtYXN0ZXJcIj48YnIvPlxuICAgICAgICA8aW5wdXQgaWQ9XCJjaGVja1NsYXZlXCIgdHlwZT1cImNoZWNrYm94XCIgbmctY2hlY2tlZD1cIm1hc3RlclwiPlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIGNoZWNrIGJvdGggY2hlY2tCb3hlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjaGVja1NsYXZlJykpLmdldEF0dHJpYnV0ZSgnY2hlY2tlZCcpKS50b0JlRmFsc3koKTtcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdtYXN0ZXInKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY2hlY2tTbGF2ZScpKS5nZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgSU5QVVRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDaGVja2VkIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcImNoZWNrZWRcIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1JlYWRvbmx5XG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIEhUTUwgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCByZXF1aXJlIGJyb3dzZXJzIHRvIHByZXNlcnZlIHRoZSB2YWx1ZXMgb2YgYm9vbGVhbiBhdHRyaWJ1dGVzXG4gKiBzdWNoIGFzIHJlYWRvbmx5LiAoVGhlaXIgcHJlc2VuY2UgbWVhbnMgdHJ1ZSBhbmQgdGhlaXIgYWJzZW5jZSBtZWFucyBmYWxzZS4pXG4gKiBJZiB3ZSBwdXQgYW4gQW5ndWxhciBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gaW50byBzdWNoIGFuIGF0dHJpYnV0ZSB0aGVuIHRoZVxuICogYmluZGluZyBpbmZvcm1hdGlvbiB3b3VsZCBiZSBsb3N0IHdoZW4gdGhlIGJyb3dzZXIgcmVtb3ZlcyB0aGUgYXR0cmlidXRlLlxuICogVGhlIGBuZ1JlYWRvbmx5YCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbSBmb3IgdGhlIGByZWFkb25seWAgYXR0cmlidXRlLlxuICogVGhpcyBjb21wbGVtZW50YXJ5IGRpcmVjdGl2ZSBpcyBub3QgcmVtb3ZlZCBieSB0aGUgYnJvd3NlciBhbmQgc28gcHJvdmlkZXNcbiAqIGEgcGVybWFuZW50IHJlbGlhYmxlIHBsYWNlIHRvIHN0b3JlIHRoZSBiaW5kaW5nIGluZm9ybWF0aW9uLlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIENoZWNrIG1lIHRvIG1ha2UgdGV4dCByZWFkb25seTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjxici8+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLXJlYWRvbmx5PVwiY2hlY2tlZFwiIHZhbHVlPVwiSSdtIEFuZ3VsYXJcIi8+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgdG9nZ2xlIHJlYWRvbmx5IGF0dHInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJ1t0eXBlPVwidGV4dFwiXScpKS5nZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JykpLnRvQmVGYWxzeSgpO1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJ1t0eXBlPVwidGV4dFwiXScpKS5nZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JykpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICpcbiAqIEBlbGVtZW50IElOUFVUXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nUmVhZG9ubHkgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcbiAqICAgICB0aGVuIHNwZWNpYWwgYXR0cmlidXRlIFwicmVhZG9ubHlcIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1NlbGVjdGVkXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIEhUTUwgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCByZXF1aXJlIGJyb3dzZXJzIHRvIHByZXNlcnZlIHRoZSB2YWx1ZXMgb2YgYm9vbGVhbiBhdHRyaWJ1dGVzXG4gKiBzdWNoIGFzIHNlbGVjdGVkLiAoVGhlaXIgcHJlc2VuY2UgbWVhbnMgdHJ1ZSBhbmQgdGhlaXIgYWJzZW5jZSBtZWFucyBmYWxzZS4pXG4gKiBJZiB3ZSBwdXQgYW4gQW5ndWxhciBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gaW50byBzdWNoIGFuIGF0dHJpYnV0ZSB0aGVuIHRoZVxuICogYmluZGluZyBpbmZvcm1hdGlvbiB3b3VsZCBiZSBsb3N0IHdoZW4gdGhlIGJyb3dzZXIgcmVtb3ZlcyB0aGUgYXR0cmlidXRlLlxuICogVGhlIGBuZ1NlbGVjdGVkYCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbSBmb3IgdGhlIGBzZWxlY3RlZGAgYXR0cmlidXRlLlxuICogVGhpcyBjb21wbGVtZW50YXJ5IGRpcmVjdGl2ZSBpcyBub3QgcmVtb3ZlZCBieSB0aGUgYnJvd3NlciBhbmQgc28gcHJvdmlkZXNcbiAqIGEgcGVybWFuZW50IHJlbGlhYmxlIHBsYWNlIHRvIHN0b3JlIHRoZSBiaW5kaW5nIGluZm9ybWF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICBDaGVjayBtZSB0byBzZWxlY3Q6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInNlbGVjdGVkXCI+PGJyLz5cbiAgICAgICAgPHNlbGVjdD5cbiAgICAgICAgICA8b3B0aW9uPkhlbGxvITwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gaWQ9XCJncmVldFwiIG5nLXNlbGVjdGVkPVwic2VsZWN0ZWRcIj5HcmVldGluZ3MhPC9vcHRpb24+XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIHNlbGVjdCBHcmVldGluZ3MhJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2dyZWV0JykpLmdldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc2VsZWN0ZWQnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZ3JlZXQnKSkuZ2V0QXR0cmlidXRlKCdzZWxlY3RlZCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqXG4gKiBAZWxlbWVudCBPUFRJT05cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTZWxlY3RlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJzZWxlY3RlZFwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ09wZW5cbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgSFRNTCBzcGVjaWZpY2F0aW9uIGRvZXMgbm90IHJlcXVpcmUgYnJvd3NlcnMgdG8gcHJlc2VydmUgdGhlIHZhbHVlcyBvZiBib29sZWFuIGF0dHJpYnV0ZXNcbiAqIHN1Y2ggYXMgb3Blbi4gKFRoZWlyIHByZXNlbmNlIG1lYW5zIHRydWUgYW5kIHRoZWlyIGFic2VuY2UgbWVhbnMgZmFsc2UuKVxuICogSWYgd2UgcHV0IGFuIEFuZ3VsYXIgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uIGludG8gc3VjaCBhbiBhdHRyaWJ1dGUgdGhlbiB0aGVcbiAqIGJpbmRpbmcgaW5mb3JtYXRpb24gd291bGQgYmUgbG9zdCB3aGVuIHRoZSBicm93c2VyIHJlbW92ZXMgdGhlIGF0dHJpYnV0ZS5cbiAqIFRoZSBgbmdPcGVuYCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbSBmb3IgdGhlIGBvcGVuYCBhdHRyaWJ1dGUuXG4gKiBUaGlzIGNvbXBsZW1lbnRhcnkgZGlyZWN0aXZlIGlzIG5vdCByZW1vdmVkIGJ5IHRoZSBicm93c2VyIGFuZCBzbyBwcm92aWRlc1xuICogYSBwZXJtYW5lbnQgcmVsaWFibGUgcGxhY2UgdG8gc3RvcmUgdGhlIGJpbmRpbmcgaW5mb3JtYXRpb24uXG4gKiBAZXhhbXBsZVxuICAgICA8ZXhhbXBsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgQ2hlY2sgbWUgY2hlY2sgbXVsdGlwbGU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cIm9wZW5cIj48YnIvPlxuICAgICAgICAgPGRldGFpbHMgaWQ9XCJkZXRhaWxzXCIgbmctb3Blbj1cIm9wZW5cIj5cbiAgICAgICAgICAgIDxzdW1tYXJ5PlNob3cvSGlkZSBtZTwvc3VtbWFyeT5cbiAgICAgICAgIDwvZGV0YWlscz5cbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgb3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZGV0YWlscycpKS5nZXRBdHRyaWJ1dGUoJ29wZW4nKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ29wZW4nKSkuY2xpY2soKTtcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RldGFpbHMnKSkuZ2V0QXR0cmlidXRlKCdvcGVuJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgIH0pO1xuICAgICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICpcbiAqIEBlbGVtZW50IERFVEFJTFNcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdPcGVuIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcIm9wZW5cIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICovXG5cbnZhciBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyA9IHt9O1xuXG5cbi8vIGJvb2xlYW4gYXR0cnMgYXJlIGV2YWx1YXRlZFxuZm9yRWFjaChCT09MRUFOX0FUVFIsIGZ1bmN0aW9uKHByb3BOYW1lLCBhdHRyTmFtZSkge1xuICAvLyBiaW5kaW5nIHRvIG11bHRpcGxlIGlzIG5vdCBzdXBwb3J0ZWRcbiAgaWYgKHByb3BOYW1lID09IFwibXVsdGlwbGVcIikgcmV0dXJuO1xuXG4gIHZhciBub3JtYWxpemVkID0gZGlyZWN0aXZlTm9ybWFsaXplKCduZy0nICsgYXR0ck5hbWUpO1xuICBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlc1tub3JtYWxpemVkXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcHJpb3JpdHk6IDEwMCxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyW25vcm1hbGl6ZWRdLCBmdW5jdGlvbiBuZ0Jvb2xlYW5BdHRyV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBhdHRyLiRzZXQoYXR0ck5hbWUsICEhdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufSk7XG5cbi8vIGFsaWFzZWQgaW5wdXQgYXR0cnMgYXJlIGV2YWx1YXRlZFxuZm9yRWFjaChBTElBU0VEX0FUVFIsIGZ1bmN0aW9uKGh0bWxBdHRyLCBuZ0F0dHIpIHtcbiAgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXNbbmdBdHRyXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcmlvcml0eTogMTAwLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgLy9zcGVjaWFsIGNhc2UgbmdQYXR0ZXJuIHdoZW4gYSBsaXRlcmFsIHJlZ3VsYXIgZXhwcmVzc2lvbiB2YWx1ZVxuICAgICAgICAvL2lzIHVzZWQgYXMgdGhlIGV4cHJlc3Npb24gKHRoaXMgd2F5IHdlIGRvbid0IGhhdmUgdG8gd2F0Y2ggYW55dGhpbmcpLlxuICAgICAgICBpZiAobmdBdHRyID09PSBcIm5nUGF0dGVyblwiICYmIGF0dHIubmdQYXR0ZXJuLmNoYXJBdCgwKSA9PSBcIi9cIikge1xuICAgICAgICAgIHZhciBtYXRjaCA9IGF0dHIubmdQYXR0ZXJuLm1hdGNoKFJFR0VYX1NUUklOR19SRUdFWFApO1xuICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgYXR0ci4kc2V0KFwibmdQYXR0ZXJuXCIsIG5ldyBSZWdFeHAobWF0Y2hbMV0sIG1hdGNoWzJdKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJbbmdBdHRyXSwgZnVuY3Rpb24gbmdBdHRyQWxpYXNXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGF0dHIuJHNldChuZ0F0dHIsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn0pO1xuXG4vLyBuZy1zcmMsIG5nLXNyY3NldCwgbmctaHJlZiBhcmUgaW50ZXJwb2xhdGVkXG5mb3JFYWNoKFsnc3JjJywgJ3NyY3NldCcsICdocmVmJ10sIGZ1bmN0aW9uKGF0dHJOYW1lKSB7XG4gIHZhciBub3JtYWxpemVkID0gZGlyZWN0aXZlTm9ybWFsaXplKCduZy0nICsgYXR0ck5hbWUpO1xuICBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlc1tub3JtYWxpemVkXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcmlvcml0eTogOTksIC8vIGl0IG5lZWRzIHRvIHJ1biBhZnRlciB0aGUgYXR0cmlidXRlcyBhcmUgaW50ZXJwb2xhdGVkXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICB2YXIgcHJvcE5hbWUgPSBhdHRyTmFtZSxcbiAgICAgICAgICAgIG5hbWUgPSBhdHRyTmFtZTtcblxuICAgICAgICBpZiAoYXR0ck5hbWUgPT09ICdocmVmJyAmJlxuICAgICAgICAgICAgdG9TdHJpbmcuY2FsbChlbGVtZW50LnByb3AoJ2hyZWYnKSkgPT09ICdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXScpIHtcbiAgICAgICAgICBuYW1lID0gJ3hsaW5rSHJlZic7XG4gICAgICAgICAgYXR0ci4kYXR0cltuYW1lXSA9ICd4bGluazpocmVmJztcbiAgICAgICAgICBwcm9wTmFtZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyLiRvYnNlcnZlKG5vcm1hbGl6ZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGF0dHJOYW1lID09PSAnaHJlZicpIHtcbiAgICAgICAgICAgICAgYXR0ci4kc2V0KG5hbWUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGF0dHIuJHNldChuYW1lLCB2YWx1ZSk7XG5cbiAgICAgICAgICAvLyBvbiBJRSwgaWYgXCJuZzpzcmNcIiBkaXJlY3RpdmUgZGVjbGFyYXRpb24gaXMgdXNlZCBhbmQgXCJzcmNcIiBhdHRyaWJ1dGUgZG9lc24ndCBleGlzdFxuICAgICAgICAgIC8vIHRoZW4gY2FsbGluZyBlbGVtZW50LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ZvbycpIGRvZXNuJ3QgZG8gYW55dGhpbmcsIHNvIHdlIG5lZWRcbiAgICAgICAgICAvLyB0byBzZXQgdGhlIHByb3BlcnR5IGFzIHdlbGwgdG8gYWNoaWV2ZSB0aGUgZGVzaXJlZCBlZmZlY3QuXG4gICAgICAgICAgLy8gd2UgdXNlIGF0dHJbYXR0ck5hbWVdIHZhbHVlIHNpbmNlICRzZXQgY2FuIHNhbml0aXplIHRoZSB1cmwuXG4gICAgICAgICAgaWYgKG1zaWUgJiYgcHJvcE5hbWUpIGVsZW1lbnQucHJvcChwcm9wTmFtZSwgYXR0cltuYW1lXSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59KTtcblxuLyogZ2xvYmFsIC1udWxsRm9ybUN0cmwsIC1TVUJNSVRURURfQ0xBU1MsIGFkZFNldFZhbGlkaXR5TWV0aG9kOiB0cnVlXG4gKi9cbnZhciBudWxsRm9ybUN0cmwgPSB7XG4gICRhZGRDb250cm9sOiBub29wLFxuICAkJHJlbmFtZUNvbnRyb2w6IG51bGxGb3JtUmVuYW1lQ29udHJvbCxcbiAgJHJlbW92ZUNvbnRyb2w6IG5vb3AsXG4gICRzZXRWYWxpZGl0eTogbm9vcCxcbiAgJHNldERpcnR5OiBub29wLFxuICAkc2V0UHJpc3RpbmU6IG5vb3AsXG4gICRzZXRTdWJtaXR0ZWQ6IG5vb3Bcbn0sXG5TVUJNSVRURURfQ0xBU1MgPSAnbmctc3VibWl0dGVkJztcblxuZnVuY3Rpb24gbnVsbEZvcm1SZW5hbWVDb250cm9sKGNvbnRyb2wsIG5hbWUpIHtcbiAgY29udHJvbC4kbmFtZSA9IG5hbWU7XG59XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXJcbiAqXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRwcmlzdGluZSBUcnVlIGlmIHVzZXIgaGFzIG5vdCBpbnRlcmFjdGVkIHdpdGggdGhlIGZvcm0geWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgZm9ybS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHZhbGlkIFRydWUgaWYgYWxsIG9mIHRoZSBjb250YWluaW5nIGZvcm1zIGFuZCBjb250cm9scyBhcmUgdmFsaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRpbnZhbGlkIFRydWUgaWYgYXQgbGVhc3Qgb25lIGNvbnRhaW5pbmcgY29udHJvbCBvciBmb3JtIGlzIGludmFsaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRzdWJtaXR0ZWQgVHJ1ZSBpZiB1c2VyIGhhcyBzdWJtaXR0ZWQgdGhlIGZvcm0gZXZlbiBpZiBpdHMgaW52YWxpZC5cbiAqXG4gKiBAcHJvcGVydHkge09iamVjdH0gJGVycm9yIElzIGFuIG9iamVjdCBoYXNoLCBjb250YWluaW5nIHJlZmVyZW5jZXMgdG8gY29udHJvbHMgb3JcbiAqICBmb3JtcyB3aXRoIGZhaWxpbmcgdmFsaWRhdG9ycywgd2hlcmU6XG4gKlxuICogIC0ga2V5cyBhcmUgdmFsaWRhdGlvbiB0b2tlbnMgKGVycm9yIG5hbWVzKSxcbiAqICAtIHZhbHVlcyBhcmUgYXJyYXlzIG9mIGNvbnRyb2xzIG9yIGZvcm1zIHRoYXQgaGF2ZSBhIGZhaWxpbmcgdmFsaWRhdG9yIGZvciBnaXZlbiBlcnJvciBuYW1lLlxuICpcbiAqICBCdWlsdC1pbiB2YWxpZGF0aW9uIHRva2VuczpcbiAqXG4gKiAgLSBgZW1haWxgXG4gKiAgLSBgbWF4YFxuICogIC0gYG1heGxlbmd0aGBcbiAqICAtIGBtaW5gXG4gKiAgLSBgbWlubGVuZ3RoYFxuICogIC0gYG51bWJlcmBcbiAqICAtIGBwYXR0ZXJuYFxuICogIC0gYHJlcXVpcmVkYFxuICogIC0gYHVybGBcbiAqICAtIGBkYXRlYFxuICogIC0gYGRhdGV0aW1lbG9jYWxgXG4gKiAgLSBgdGltZWBcbiAqICAtIGB3ZWVrYFxuICogIC0gYG1vbnRoYFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogYEZvcm1Db250cm9sbGVyYCBrZWVwcyB0cmFjayBvZiBhbGwgaXRzIGNvbnRyb2xzIGFuZCBuZXN0ZWQgZm9ybXMgYXMgd2VsbCBhcyB0aGUgc3RhdGUgb2YgdGhlbSxcbiAqIHN1Y2ggYXMgYmVpbmcgdmFsaWQvaW52YWxpZCBvciBkaXJ0eS9wcmlzdGluZS5cbiAqXG4gKiBFYWNoIHtAbGluayBuZy5kaXJlY3RpdmU6Zm9ybSBmb3JtfSBkaXJlY3RpdmUgY3JlYXRlcyBhbiBpbnN0YW5jZVxuICogb2YgYEZvcm1Db250cm9sbGVyYC5cbiAqXG4gKi9cbi8vYXNrcyBmb3IgJHNjb3BlIHRvIGZvb2wgdGhlIEJDIGNvbnRyb2xsZXIgbW9kdWxlXG5Gb3JtQ29udHJvbGxlci4kaW5qZWN0ID0gWyckZWxlbWVudCcsICckYXR0cnMnLCAnJHNjb3BlJywgJyRhbmltYXRlJywgJyRpbnRlcnBvbGF0ZSddO1xuZnVuY3Rpb24gRm9ybUNvbnRyb2xsZXIoZWxlbWVudCwgYXR0cnMsICRzY29wZSwgJGFuaW1hdGUsICRpbnRlcnBvbGF0ZSkge1xuICB2YXIgZm9ybSA9IHRoaXMsXG4gICAgICBjb250cm9scyA9IFtdO1xuXG4gIHZhciBwYXJlbnRGb3JtID0gZm9ybS4kJHBhcmVudEZvcm0gPSBlbGVtZW50LnBhcmVudCgpLmNvbnRyb2xsZXIoJ2Zvcm0nKSB8fCBudWxsRm9ybUN0cmw7XG5cbiAgLy8gaW5pdCBzdGF0ZVxuICBmb3JtLiRlcnJvciA9IHt9O1xuICBmb3JtLiQkc3VjY2VzcyA9IHt9O1xuICBmb3JtLiRwZW5kaW5nID0gdW5kZWZpbmVkO1xuICBmb3JtLiRuYW1lID0gJGludGVycG9sYXRlKGF0dHJzLm5hbWUgfHwgYXR0cnMubmdGb3JtIHx8ICcnKSgkc2NvcGUpO1xuICBmb3JtLiRkaXJ0eSA9IGZhbHNlO1xuICBmb3JtLiRwcmlzdGluZSA9IHRydWU7XG4gIGZvcm0uJHZhbGlkID0gdHJ1ZTtcbiAgZm9ybS4kaW52YWxpZCA9IGZhbHNlO1xuICBmb3JtLiRzdWJtaXR0ZWQgPSBmYWxzZTtcblxuICBwYXJlbnRGb3JtLiRhZGRDb250cm9sKGZvcm0pO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHJvbGxiYWNrVmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSb2xsYmFjayBhbGwgZm9ybSBjb250cm9scyBwZW5kaW5nIHVwZGF0ZXMgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gVGhpcyBtZXRob2QgaXMgdHlwaWNhbGx5IG5lZWRlZCBieSB0aGUgcmVzZXQgYnV0dG9uIG9mXG4gICAqIGEgZm9ybSB0aGF0IHVzZXMgYG5nLW1vZGVsLW9wdGlvbnNgIHRvIHBlbmQgdXBkYXRlcy5cbiAgICovXG4gIGZvcm0uJHJvbGxiYWNrVmlld1ZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yRWFjaChjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xuICAgICAgY29udHJvbC4kcm9sbGJhY2tWaWV3VmFsdWUoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRjb21taXRWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENvbW1pdCBhbGwgZm9ybSBjb250cm9scyBwZW5kaW5nIHVwZGF0ZXMgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gVGhpcyBtZXRob2QgaXMgcmFyZWx5IG5lZWRlZCBhcyBgTmdNb2RlbENvbnRyb2xsZXJgXG4gICAqIHVzdWFsbHkgaGFuZGxlcyBjYWxsaW5nIHRoaXMgaW4gcmVzcG9uc2UgdG8gaW5wdXQgZXZlbnRzLlxuICAgKi9cbiAgZm9ybS4kY29tbWl0Vmlld1ZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yRWFjaChjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xuICAgICAgY29udHJvbC4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkYWRkQ29udHJvbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXIgYSBjb250cm9sIHdpdGggdGhlIGZvcm0uXG4gICAqXG4gICAqIElucHV0IGVsZW1lbnRzIHVzaW5nIG5nTW9kZWxDb250cm9sbGVyIGRvIHRoaXMgYXV0b21hdGljYWxseSB3aGVuIHRoZXkgYXJlIGxpbmtlZC5cbiAgICovXG4gIGZvcm0uJGFkZENvbnRyb2wgPSBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgLy8gQnJlYWtpbmcgY2hhbmdlIC0gYmVmb3JlLCBpbnB1dHMgd2hvc2UgbmFtZSB3YXMgXCJoYXNPd25Qcm9wZXJ0eVwiIHdlcmUgcXVpZXRseSBpZ25vcmVkXG4gICAgLy8gYW5kIG5vdCBhZGRlZCB0byB0aGUgc2NvcGUuICBOb3cgd2UgdGhyb3cgYW4gZXJyb3IuXG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkoY29udHJvbC4kbmFtZSwgJ2lucHV0Jyk7XG4gICAgY29udHJvbHMucHVzaChjb250cm9sKTtcblxuICAgIGlmIChjb250cm9sLiRuYW1lKSB7XG4gICAgICBmb3JtW2NvbnRyb2wuJG5hbWVdID0gY29udHJvbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUHJpdmF0ZSBBUEk6IHJlbmFtZSBhIGZvcm0gY29udHJvbFxuICBmb3JtLiQkcmVuYW1lQ29udHJvbCA9IGZ1bmN0aW9uKGNvbnRyb2wsIG5ld05hbWUpIHtcbiAgICB2YXIgb2xkTmFtZSA9IGNvbnRyb2wuJG5hbWU7XG5cbiAgICBpZiAoZm9ybVtvbGROYW1lXSA9PT0gY29udHJvbCkge1xuICAgICAgZGVsZXRlIGZvcm1bb2xkTmFtZV07XG4gICAgfVxuICAgIGZvcm1bbmV3TmFtZV0gPSBjb250cm9sO1xuICAgIGNvbnRyb2wuJG5hbWUgPSBuZXdOYW1lO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHJlbW92ZUNvbnRyb2xcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIERlcmVnaXN0ZXIgYSBjb250cm9sIGZyb20gdGhlIGZvcm0uXG4gICAqXG4gICAqIElucHV0IGVsZW1lbnRzIHVzaW5nIG5nTW9kZWxDb250cm9sbGVyIGRvIHRoaXMgYXV0b21hdGljYWxseSB3aGVuIHRoZXkgYXJlIGRlc3Ryb3llZC5cbiAgICovXG4gIGZvcm0uJHJlbW92ZUNvbnRyb2wgPSBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgaWYgKGNvbnRyb2wuJG5hbWUgJiYgZm9ybVtjb250cm9sLiRuYW1lXSA9PT0gY29udHJvbCkge1xuICAgICAgZGVsZXRlIGZvcm1bY29udHJvbC4kbmFtZV07XG4gICAgfVxuICAgIGZvckVhY2goZm9ybS4kcGVuZGluZywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIGZvcm0uJHNldFZhbGlkaXR5KG5hbWUsIG51bGwsIGNvbnRyb2wpO1xuICAgIH0pO1xuICAgIGZvckVhY2goZm9ybS4kZXJyb3IsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICBmb3JtLiRzZXRWYWxpZGl0eShuYW1lLCBudWxsLCBjb250cm9sKTtcbiAgICB9KTtcbiAgICBmb3JFYWNoKGZvcm0uJCRzdWNjZXNzLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgZm9ybS4kc2V0VmFsaWRpdHkobmFtZSwgbnVsbCwgY29udHJvbCk7XG4gICAgfSk7XG5cbiAgICBhcnJheVJlbW92ZShjb250cm9scywgY29udHJvbCk7XG4gIH07XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRWYWxpZGl0eVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgdmFsaWRpdHkgb2YgYSBmb3JtIGNvbnRyb2wuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBwcm9wYWdhdGUgdG8gcGFyZW50IGZvcm1zLlxuICAgKi9cbiAgYWRkU2V0VmFsaWRpdHlNZXRob2Qoe1xuICAgIGN0cmw6IHRoaXMsXG4gICAgJGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5LCBjb250cm9sbGVyKSB7XG4gICAgICB2YXIgbGlzdCA9IG9iamVjdFtwcm9wZXJ0eV07XG4gICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgb2JqZWN0W3Byb3BlcnR5XSA9IFtjb250cm9sbGVyXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBpbmRleCA9IGxpc3QuaW5kZXhPZihjb250cm9sbGVyKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgIGxpc3QucHVzaChjb250cm9sbGVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgdW5zZXQ6IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGNvbnRyb2xsZXIpIHtcbiAgICAgIHZhciBsaXN0ID0gb2JqZWN0W3Byb3BlcnR5XTtcbiAgICAgIGlmICghbGlzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBhcnJheVJlbW92ZShsaXN0LCBjb250cm9sbGVyKTtcbiAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWxldGUgb2JqZWN0W3Byb3BlcnR5XTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHBhcmVudEZvcm06IHBhcmVudEZvcm0sXG4gICAgJGFuaW1hdGU6ICRhbmltYXRlXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldERpcnR5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGEgZGlydHkgc3RhdGUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gYWRkIHRoZSAnbmctZGlydHknIGNsYXNzIGFuZCBzZXQgdGhlIGZvcm0gdG8gYSBkaXJ0eVxuICAgKiBzdGF0ZSAobmctZGlydHkgY2xhc3MpLiBUaGlzIG1ldGhvZCB3aWxsIGFsc28gcHJvcGFnYXRlIHRvIHBhcmVudCBmb3Jtcy5cbiAgICovXG4gIGZvcm0uJHNldERpcnR5ID0gZnVuY3Rpb24oKSB7XG4gICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3MoZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MpO1xuICAgICRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcbiAgICBmb3JtLiRkaXJ0eSA9IHRydWU7XG4gICAgZm9ybS4kcHJpc3RpbmUgPSBmYWxzZTtcbiAgICBwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFByaXN0aW5lXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlICduZy1kaXJ0eScgY2xhc3MgYW5kIHNldCB0aGUgZm9ybSB0byBpdHMgcHJpc3RpbmVcbiAgICogc3RhdGUgKG5nLXByaXN0aW5lIGNsYXNzKS4gVGhpcyBtZXRob2Qgd2lsbCBhbHNvIHByb3BhZ2F0ZSB0byBhbGwgdGhlIGNvbnRyb2xzIGNvbnRhaW5lZFxuICAgKiBpbiB0aGlzIGZvcm0uXG4gICAqXG4gICAqIFNldHRpbmcgYSBmb3JtIGJhY2sgdG8gYSBwcmlzdGluZSBzdGF0ZSBpcyBvZnRlbiB1c2VmdWwgd2hlbiB3ZSB3YW50IHRvICdyZXVzZScgYSBmb3JtIGFmdGVyXG4gICAqIHNhdmluZyBvciByZXNldHRpbmcgaXQuXG4gICAqL1xuICBmb3JtLiRzZXRQcmlzdGluZSA9IGZ1bmN0aW9uKCkge1xuICAgICRhbmltYXRlLnNldENsYXNzKGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTLCBESVJUWV9DTEFTUyArICcgJyArIFNVQk1JVFRFRF9DTEFTUyk7XG4gICAgZm9ybS4kZGlydHkgPSBmYWxzZTtcbiAgICBmb3JtLiRwcmlzdGluZSA9IHRydWU7XG4gICAgZm9ybS4kc3VibWl0dGVkID0gZmFsc2U7XG4gICAgZm9yRWFjaChjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xuICAgICAgY29udHJvbC4kc2V0UHJpc3RpbmUoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRVbnRvdWNoZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGZvcm0gdG8gaXRzIHVudG91Y2hlZCBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlICduZy10b3VjaGVkJyBjbGFzcyBhbmQgc2V0IHRoZSBmb3JtIGNvbnRyb2xzIHRvIHRoZWlyXG4gICAqIHVudG91Y2hlZCBzdGF0ZSAobmctdW50b3VjaGVkIGNsYXNzKS5cbiAgICpcbiAgICogU2V0dGluZyBhIGZvcm0gY29udHJvbHMgYmFjayB0byB0aGVpciB1bnRvdWNoZWQgc3RhdGUgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gc2V0dGluZyB0aGUgZm9ybVxuICAgKiBiYWNrIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICovXG4gIGZvcm0uJHNldFVudG91Y2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvckVhY2goY29udHJvbHMsIGZ1bmN0aW9uKGNvbnRyb2wpIHtcbiAgICAgIGNvbnRyb2wuJHNldFVudG91Y2hlZCgpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFN1Ym1pdHRlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgZm9ybSB0byBpdHMgc3VibWl0dGVkIHN0YXRlLlxuICAgKi9cbiAgZm9ybS4kc2V0U3VibWl0dGVkID0gZnVuY3Rpb24oKSB7XG4gICAgJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgU1VCTUlUVEVEX0NMQVNTKTtcbiAgICBmb3JtLiRzdWJtaXR0ZWQgPSB0cnVlO1xuICAgIHBhcmVudEZvcm0uJHNldFN1Ym1pdHRlZCgpO1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nRm9ybVxuICogQHJlc3RyaWN0IEVBQ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTmVzdGFibGUgYWxpYXMgb2Yge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGBmb3JtYH0gZGlyZWN0aXZlLiBIVE1MXG4gKiBkb2VzIG5vdCBhbGxvdyBuZXN0aW5nIG9mIGZvcm0gZWxlbWVudHMuIEl0IGlzIHVzZWZ1bCB0byBuZXN0IGZvcm1zLCBmb3IgZXhhbXBsZSBpZiB0aGUgdmFsaWRpdHkgb2YgYVxuICogc3ViLWdyb3VwIG9mIGNvbnRyb2xzIG5lZWRzIHRvIGJlIGRldGVybWluZWQuXG4gKlxuICogTm90ZTogdGhlIHB1cnBvc2Ugb2YgYG5nRm9ybWAgaXMgdG8gZ3JvdXAgY29udHJvbHMsXG4gKiBidXQgbm90IHRvIGJlIGEgcmVwbGFjZW1lbnQgZm9yIHRoZSBgPGZvcm0+YCB0YWcgd2l0aCBhbGwgb2YgaXRzIGNhcGFiaWxpdGllc1xuICogKGUuZy4gcG9zdGluZyB0byB0aGUgc2VydmVyLCAuLi4pLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdGb3JtfG5hbWUgTmFtZSBvZiB0aGUgZm9ybS4gSWYgc3BlY2lmaWVkLCB0aGUgZm9ybSBjb250cm9sbGVyIHdpbGwgYmUgcHVibGlzaGVkIGludG9cbiAqICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkIHNjb3BlLCB1bmRlciB0aGlzIG5hbWUuXG4gKlxuICovXG5cbiAvKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIGZvcm1cbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEaXJlY3RpdmUgdGhhdCBpbnN0YW50aWF0ZXNcbiAqIHtAbGluayBmb3JtLkZvcm1Db250cm9sbGVyIEZvcm1Db250cm9sbGVyfS5cbiAqXG4gKiBJZiB0aGUgYG5hbWVgIGF0dHJpYnV0ZSBpcyBzcGVjaWZpZWQsIHRoZSBmb3JtIGNvbnRyb2xsZXIgaXMgcHVibGlzaGVkIG9udG8gdGhlIGN1cnJlbnQgc2NvcGUgdW5kZXJcbiAqIHRoaXMgbmFtZS5cbiAqXG4gKiAjIEFsaWFzOiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nRm9ybSBgbmdGb3JtYH1cbiAqXG4gKiBJbiBBbmd1bGFyIGZvcm1zIGNhbiBiZSBuZXN0ZWQuIFRoaXMgbWVhbnMgdGhhdCB0aGUgb3V0ZXIgZm9ybSBpcyB2YWxpZCB3aGVuIGFsbCBvZiB0aGUgY2hpbGRcbiAqIGZvcm1zIGFyZSB2YWxpZCBhcyB3ZWxsLiBIb3dldmVyLCBicm93c2VycyBkbyBub3QgYWxsb3cgbmVzdGluZyBvZiBgPGZvcm0+YCBlbGVtZW50cywgc29cbiAqIEFuZ3VsYXIgcHJvdmlkZXMgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdGb3JtIGBuZ0Zvcm1gfSBkaXJlY3RpdmUgd2hpY2ggYmVoYXZlcyBpZGVudGljYWxseSB0b1xuICogYDxmb3JtPmAgYnV0IGNhbiBiZSBuZXN0ZWQuICBUaGlzIGFsbG93cyB5b3UgdG8gaGF2ZSBuZXN0ZWQgZm9ybXMsIHdoaWNoIGlzIHZlcnkgdXNlZnVsIHdoZW5cbiAqIHVzaW5nIEFuZ3VsYXIgdmFsaWRhdGlvbiBkaXJlY3RpdmVzIGluIGZvcm1zIHRoYXQgYXJlIGR5bmFtaWNhbGx5IGdlbmVyYXRlZCB1c2luZyB0aGVcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgYG5nUmVwZWF0YH0gZGlyZWN0aXZlLiBTaW5jZSB5b3UgY2Fubm90IGR5bmFtaWNhbGx5IGdlbmVyYXRlIHRoZSBgbmFtZWBcbiAqIGF0dHJpYnV0ZSBvZiBpbnB1dCBlbGVtZW50cyB1c2luZyBpbnRlcnBvbGF0aW9uLCB5b3UgaGF2ZSB0byB3cmFwIGVhY2ggc2V0IG9mIHJlcGVhdGVkIGlucHV0cyBpbiBhblxuICogYG5nRm9ybWAgZGlyZWN0aXZlIGFuZCBuZXN0IHRoZXNlIGluIGFuIG91dGVyIGBmb3JtYCBlbGVtZW50LlxuICpcbiAqXG4gKiAjIENTUyBjbGFzc2VzXG4gKiAgLSBgbmctdmFsaWRgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyB2YWxpZC5cbiAqICAtIGBuZy1pbnZhbGlkYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgaW52YWxpZC5cbiAqICAtIGBuZy1wcmlzdGluZWAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIHByaXN0aW5lLlxuICogIC0gYG5nLWRpcnR5YCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgZGlydHkuXG4gKiAgLSBgbmctc3VibWl0dGVkYCBpcyBzZXQgaWYgdGhlIGZvcm0gd2FzIHN1Ym1pdHRlZC5cbiAqXG4gKiBLZWVwIGluIG1pbmQgdGhhdCBuZ0FuaW1hdGUgY2FuIGRldGVjdCBlYWNoIG9mIHRoZXNlIGNsYXNzZXMgd2hlbiBhZGRlZCBhbmQgcmVtb3ZlZC5cbiAqXG4gKlxuICogIyBTdWJtaXR0aW5nIGEgZm9ybSBhbmQgcHJldmVudGluZyB0aGUgZGVmYXVsdCBhY3Rpb25cbiAqXG4gKiBTaW5jZSB0aGUgcm9sZSBvZiBmb3JtcyBpbiBjbGllbnQtc2lkZSBBbmd1bGFyIGFwcGxpY2F0aW9ucyBpcyBkaWZmZXJlbnQgdGhhbiBpbiBjbGFzc2ljYWxcbiAqIHJvdW5kdHJpcCBhcHBzLCBpdCBpcyBkZXNpcmFibGUgZm9yIHRoZSBicm93c2VyIG5vdCB0byB0cmFuc2xhdGUgdGhlIGZvcm0gc3VibWlzc2lvbiBpbnRvIGEgZnVsbFxuICogcGFnZSByZWxvYWQgdGhhdCBzZW5kcyB0aGUgZGF0YSB0byB0aGUgc2VydmVyLiBJbnN0ZWFkIHNvbWUgamF2YXNjcmlwdCBsb2dpYyBzaG91bGQgYmUgdHJpZ2dlcmVkXG4gKiB0byBoYW5kbGUgdGhlIGZvcm0gc3VibWlzc2lvbiBpbiBhbiBhcHBsaWNhdGlvbi1zcGVjaWZpYyB3YXkuXG4gKlxuICogRm9yIHRoaXMgcmVhc29uLCBBbmd1bGFyIHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbiAoZm9ybSBzdWJtaXNzaW9uIHRvIHRoZSBzZXJ2ZXIpIHVubGVzcyB0aGVcbiAqIGA8Zm9ybT5gIGVsZW1lbnQgaGFzIGFuIGBhY3Rpb25gIGF0dHJpYnV0ZSBzcGVjaWZpZWQuXG4gKlxuICogWW91IGNhbiB1c2Ugb25lIG9mIHRoZSBmb2xsb3dpbmcgdHdvIHdheXMgdG8gc3BlY2lmeSB3aGF0IGphdmFzY3JpcHQgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgd2hlblxuICogYSBmb3JtIGlzIHN1Ym1pdHRlZDpcbiAqXG4gKiAtIHtAbGluayBuZy5kaXJlY3RpdmU6bmdTdWJtaXQgbmdTdWJtaXR9IGRpcmVjdGl2ZSBvbiB0aGUgZm9ybSBlbGVtZW50XG4gKiAtIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSBkaXJlY3RpdmUgb24gdGhlIGZpcnN0XG4gICogIGJ1dHRvbiBvciBpbnB1dCBmaWVsZCBvZiB0eXBlIHN1Ym1pdCAoaW5wdXRbdHlwZT1zdWJtaXRdKVxuICpcbiAqIFRvIHByZXZlbnQgZG91YmxlIGV4ZWN1dGlvbiBvZiB0aGUgaGFuZGxlciwgdXNlIG9ubHkgb25lIG9mIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nU3VibWl0IG5nU3VibWl0fVxuICogb3Ige0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9IGRpcmVjdGl2ZXMuXG4gKiBUaGlzIGlzIGJlY2F1c2Ugb2YgdGhlIGZvbGxvd2luZyBmb3JtIHN1Ym1pc3Npb24gcnVsZXMgaW4gdGhlIEhUTUwgc3BlY2lmaWNhdGlvbjpcbiAqXG4gKiAtIElmIGEgZm9ybSBoYXMgb25seSBvbmUgaW5wdXQgZmllbGQgdGhlbiBoaXR0aW5nIGVudGVyIGluIHRoaXMgZmllbGQgdHJpZ2dlcnMgZm9ybSBzdWJtaXRcbiAqIChgbmdTdWJtaXRgKVxuICogLSBpZiBhIGZvcm0gaGFzIDIrIGlucHV0IGZpZWxkcyBhbmQgbm8gYnV0dG9ucyBvciBpbnB1dFt0eXBlPXN1Ym1pdF0gdGhlbiBoaXR0aW5nIGVudGVyXG4gKiBkb2Vzbid0IHRyaWdnZXIgc3VibWl0XG4gKiAtIGlmIGEgZm9ybSBoYXMgb25lIG9yIG1vcmUgaW5wdXQgZmllbGRzIGFuZCBvbmUgb3IgbW9yZSBidXR0b25zIG9yIGlucHV0W3R5cGU9c3VibWl0XSB0aGVuXG4gKiBoaXR0aW5nIGVudGVyIGluIGFueSBvZiB0aGUgaW5wdXQgZmllbGRzIHdpbGwgdHJpZ2dlciB0aGUgY2xpY2sgaGFuZGxlciBvbiB0aGUgKmZpcnN0KiBidXR0b24gb3JcbiAqIGlucHV0W3R5cGU9c3VibWl0XSAoYG5nQ2xpY2tgKSAqYW5kKiBhIHN1Ym1pdCBoYW5kbGVyIG9uIHRoZSBlbmNsb3NpbmcgZm9ybSAoYG5nU3VibWl0YClcbiAqXG4gKiBBbnkgcGVuZGluZyBgbmdNb2RlbE9wdGlvbnNgIGNoYW5nZXMgd2lsbCB0YWtlIHBsYWNlIGltbWVkaWF0ZWx5IHdoZW4gYW4gZW5jbG9zaW5nIGZvcm0gaXNcbiAqIHN1Ym1pdHRlZC4gTm90ZSB0aGF0IGBuZ0NsaWNrYCBldmVudHMgd2lsbCBvY2N1ciBiZWZvcmUgdGhlIG1vZGVsIGlzIHVwZGF0ZWQuIFVzZSBgbmdTdWJtaXRgXG4gKiB0byBoYXZlIGFjY2VzcyB0byB0aGUgdXBkYXRlZCBtb2RlbC5cbiAqXG4gKiAjIyBBbmltYXRpb24gSG9va3NcbiAqXG4gKiBBbmltYXRpb25zIGluIG5nRm9ybSBhcmUgdHJpZ2dlcmVkIHdoZW4gYW55IG9mIHRoZSBhc3NvY2lhdGVkIENTUyBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgcmVtb3ZlZC5cbiAqIFRoZXNlIGNsYXNzZXMgYXJlOiBgLm5nLXByaXN0aW5lYCwgYC5uZy1kaXJ0eWAsIGAubmctaW52YWxpZGAgYW5kIGAubmctdmFsaWRgIGFzIHdlbGwgYXMgYW55XG4gKiBvdGhlciB2YWxpZGF0aW9ucyB0aGF0IGFyZSBwZXJmb3JtZWQgd2l0aGluIHRoZSBmb3JtLiBBbmltYXRpb25zIGluIG5nRm9ybSBhcmUgc2ltaWxhciB0byBob3dcbiAqIHRoZXkgd29yayBpbiBuZ0NsYXNzIGFuZCBhbmltYXRpb25zIGNhbiBiZSBob29rZWQgaW50byB1c2luZyBDU1MgdHJhbnNpdGlvbnMsIGtleWZyYW1lcyBhcyB3ZWxsXG4gKiBhcyBKUyBhbmltYXRpb25zLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBhIHNpbXBsZSB3YXkgdG8gdXRpbGl6ZSBDU1MgdHJhbnNpdGlvbnMgdG8gc3R5bGUgYSBmb3JtIGVsZW1lbnRcbiAqIHRoYXQgaGFzIGJlZW4gcmVuZGVyZWQgYXMgaW52YWxpZCBhZnRlciBpdCBoYXMgYmVlbiB2YWxpZGF0ZWQ6XG4gKlxuICogPHByZT5cbiAqIC8vYmUgc3VyZSB0byBpbmNsdWRlIG5nQW5pbWF0ZSBhcyBhIG1vZHVsZSB0byBob29rIGludG8gbW9yZVxuICogLy9hZHZhbmNlZCBhbmltYXRpb25zXG4gKiAubXktZm9ybSB7XG4gKiAgIHRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xuICogICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAqIH1cbiAqIC5teS1mb3JtLm5nLWludmFsaWQge1xuICogICBiYWNrZ3JvdW5kOiByZWQ7XG4gKiAgIGNvbG9yOndoaXRlO1xuICogfVxuICogPC9wcmU+XG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBmaXhCYXNlPVwidHJ1ZVwiIG1vZHVsZT1cImZvcm1FeGFtcGxlXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZm9ybUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0Zvcm1Db250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUudXNlclR5cGUgPSAnZ3Vlc3QnO1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPHN0eWxlPlxuICAgICAgICAubXktZm9ybSB7XG4gICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcbiAgICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgfVxuICAgICAgICAubXktZm9ybS5uZy1pbnZhbGlkIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZWQ7XG4gICAgICAgIH1cbiAgICAgICA8L3N0eWxlPlxuICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRm9ybUNvbnRyb2xsZXJcIiBjbGFzcz1cIm15LWZvcm1cIj5cbiAgICAgICAgIHVzZXJUeXBlOiA8aW5wdXQgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ1c2VyVHlwZVwiIHJlcXVpcmVkPlxuICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+UmVxdWlyZWQhPC9zcGFuPjxicj5cbiAgICAgICAgIDx0dD51c2VyVHlwZSA9IHt7dXNlclR5cGV9fTwvdHQ+PGJyPlxuICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyPlxuICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyPlxuICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyPlxuICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnI+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHVzZXJUeXBlID0gZWxlbWVudChieS5iaW5kaW5nKCd1c2VyVHlwZScpKTtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2d1ZXN0Jyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB1c2VyVHlwZSA9IGVsZW1lbnQoYnkuYmluZGluZygndXNlclR5cGUnKSk7XG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuICAgICAgICAgIHZhciB1c2VySW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyVHlwZScpKTtcblxuICAgICAgICAgIHVzZXJJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIHVzZXJJbnB1dC5zZW5kS2V5cygnJyk7XG5cbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0VxdWFsKCd1c2VyVHlwZSA9Jyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsIGJlIHB1Ymxpc2hlZCBpbnRvXG4gKiAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZCBzY29wZSwgdW5kZXIgdGhpcyBuYW1lLlxuICovXG52YXIgZm9ybURpcmVjdGl2ZUZhY3RvcnkgPSBmdW5jdGlvbihpc05nRm9ybSkge1xuICByZXR1cm4gWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XG4gICAgdmFyIGZvcm1EaXJlY3RpdmUgPSB7XG4gICAgICBuYW1lOiAnZm9ybScsXG4gICAgICByZXN0cmljdDogaXNOZ0Zvcm0gPyAnRUFDJyA6ICdFJyxcbiAgICAgIGNvbnRyb2xsZXI6IEZvcm1Db250cm9sbGVyLFxuICAgICAgY29tcGlsZTogZnVuY3Rpb24gbmdGb3JtQ29tcGlsZShmb3JtRWxlbWVudCkge1xuICAgICAgICAvLyBTZXR1cCBpbml0aWFsIHN0YXRlIG9mIHRoZSBjb250cm9sXG4gICAgICAgIGZvcm1FbGVtZW50LmFkZENsYXNzKFBSSVNUSU5FX0NMQVNTKS5hZGRDbGFzcyhWQUxJRF9DTEFTUyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBwcmU6IGZ1bmN0aW9uIG5nRm9ybVByZUxpbmsoc2NvcGUsIGZvcm1FbGVtZW50LCBhdHRyLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAvLyBpZiBgYWN0aW9uYCBhdHRyIGlzIG5vdCBwcmVzZW50IG9uIHRoZSBmb3JtLCBwcmV2ZW50IHRoZSBkZWZhdWx0IGFjdGlvbiAoc3VibWlzc2lvbilcbiAgICAgICAgICAgIGlmICghKCdhY3Rpb24nIGluIGF0dHIpKSB7XG4gICAgICAgICAgICAgIC8vIHdlIGNhbid0IHVzZSBqcSBldmVudHMgYmVjYXVzZSBpZiBhIGZvcm0gaXMgZGVzdHJveWVkIGR1cmluZyBzdWJtaXNzaW9uIHRoZSBkZWZhdWx0XG4gICAgICAgICAgICAgIC8vIGFjdGlvbiBpcyBub3QgcHJldmVudGVkLiBzZWUgIzEyMzhcbiAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgLy8gSUUgOSBpcyBub3QgYWZmZWN0ZWQgYmVjYXVzZSBpdCBkb2Vzbid0IGZpcmUgYSBzdWJtaXQgZXZlbnQgYW5kIHRyeSB0byBkbyBhIGZ1bGxcbiAgICAgICAgICAgICAgLy8gcGFnZSByZWxvYWQgaWYgdGhlIGZvcm0gd2FzIGRlc3Ryb3llZCBieSBzdWJtaXNzaW9uIG9mIHRoZSBmb3JtIHZpYSBhIGNsaWNrIGhhbmRsZXJcbiAgICAgICAgICAgICAgLy8gb24gYSBidXR0b24gaW4gdGhlIGZvcm0uIExvb2tzIGxpa2UgYW4gSUU5IHNwZWNpZmljIGJ1Zy5cbiAgICAgICAgICAgICAgdmFyIGhhbmRsZUZvcm1TdWJtaXNzaW9uID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFN1Ym1pdHRlZCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyRm4oZm9ybUVsZW1lbnRbMF0sICdzdWJtaXQnLCBoYW5kbGVGb3JtU3VibWlzc2lvbik7XG5cbiAgICAgICAgICAgICAgLy8gdW5yZWdpc3RlciB0aGUgcHJldmVudERlZmF1bHQgbGlzdGVuZXIgc28gdGhhdCB3ZSBkb24ndCBub3QgbGVhayBtZW1vcnkgYnV0IGluIGFcbiAgICAgICAgICAgICAgLy8gd2F5IHRoYXQgd2lsbCBhY2hpZXZlIHRoZSBwcmV2ZW50aW9uIG9mIHRoZSBkZWZhdWx0IGFjdGlvbi5cbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyRm4oZm9ybUVsZW1lbnRbMF0sICdzdWJtaXQnLCBoYW5kbGVGb3JtU3VibWlzc2lvbik7XG4gICAgICAgICAgICAgICAgfSwgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBhcmVudEZvcm1DdHJsID0gY29udHJvbGxlci4kJHBhcmVudEZvcm0sXG4gICAgICAgICAgICAgICAgYWxpYXMgPSBjb250cm9sbGVyLiRuYW1lO1xuXG4gICAgICAgICAgICBpZiAoYWxpYXMpIHtcbiAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCBudWxsLCBhbGlhcywgY29udHJvbGxlciwgYWxpYXMpO1xuICAgICAgICAgICAgICBhdHRyLiRvYnNlcnZlKGF0dHIubmFtZSA/ICduYW1lJyA6ICduZ0Zvcm0nLCBmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChhbGlhcyA9PT0gbmV3VmFsdWUpIHJldHVybjtcbiAgICAgICAgICAgICAgICBzZXR0ZXIoc2NvcGUsIG51bGwsIGFsaWFzLCB1bmRlZmluZWQsIGFsaWFzKTtcbiAgICAgICAgICAgICAgICBhbGlhcyA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgIHNldHRlcihzY29wZSwgbnVsbCwgYWxpYXMsIGNvbnRyb2xsZXIsIGFsaWFzKTtcbiAgICAgICAgICAgICAgICBwYXJlbnRGb3JtQ3RybC4kJHJlbmFtZUNvbnRyb2woY29udHJvbGxlciwgYWxpYXMpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcm1FbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBwYXJlbnRGb3JtQ3RybC4kcmVtb3ZlQ29udHJvbChjb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgaWYgKGFsaWFzKSB7XG4gICAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCBudWxsLCBhbGlhcywgdW5kZWZpbmVkLCBhbGlhcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZXh0ZW5kKGNvbnRyb2xsZXIsIG51bGxGb3JtQ3RybCk7IC8vc3RvcCBwcm9wYWdhdGluZyBjaGlsZCBkZXN0cnVjdGlvbiBoYW5kbGVycyB1cHdhcmRzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBmb3JtRGlyZWN0aXZlO1xuICB9XTtcbn07XG5cbnZhciBmb3JtRGlyZWN0aXZlID0gZm9ybURpcmVjdGl2ZUZhY3RvcnkoKTtcbnZhciBuZ0Zvcm1EaXJlY3RpdmUgPSBmb3JtRGlyZWN0aXZlRmFjdG9yeSh0cnVlKTtcblxuLyogZ2xvYmFsIFZBTElEX0NMQVNTOiBmYWxzZSxcbiAgSU5WQUxJRF9DTEFTUzogZmFsc2UsXG4gIFBSSVNUSU5FX0NMQVNTOiBmYWxzZSxcbiAgRElSVFlfQ0xBU1M6IGZhbHNlLFxuICBVTlRPVUNIRURfQ0xBU1M6IGZhbHNlLFxuICBUT1VDSEVEX0NMQVNTOiBmYWxzZSxcbiAgJG5nTW9kZWxNaW5FcnI6IGZhbHNlLFxuKi9cblxuLy8gUmVnZXggY29kZSBpcyBvYnRhaW5lZCBmcm9tIFNPOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMTQzMDcwL2phdmFzY3JpcHQtcmVnZXgtaXNvLWRhdGV0aW1lI2Fuc3dlci0zMTQzMjMxXG52YXIgSVNPX0RBVEVfUkVHRVhQID0gL1xcZHs0fS1bMDFdXFxkLVswLTNdXFxkVFswLTJdXFxkOlswLTVdXFxkOlswLTVdXFxkXFwuXFxkKyhbKy1dWzAtMl1cXGQ6WzAtNV1cXGR8WikvO1xudmFyIFVSTF9SRUdFWFAgPSAvXihmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8kLztcbnZhciBFTUFJTF9SRUdFWFAgPSAvXlthLXowLTkhIyQlJicqK1xcLz0/Xl9ge3x9fi4tXStAW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8oXFwuW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8pKiQvaTtcbnZhciBOVU1CRVJfUkVHRVhQID0gL15cXHMqKFxcLXxcXCspPyhcXGQrfChcXGQqKFxcLlxcZCopKSlcXHMqJC87XG52YXIgREFURV9SRUdFWFAgPSAvXihcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pJC87XG52YXIgREFURVRJTUVMT0NBTF9SRUdFWFAgPSAvXihcXGR7NH0pLShcXGRcXGQpLShcXGRcXGQpVChcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvO1xudmFyIFdFRUtfUkVHRVhQID0gL14oXFxkezR9KS1XKFxcZFxcZCkkLztcbnZhciBNT05USF9SRUdFWFAgPSAvXihcXGR7NH0pLShcXGRcXGQpJC87XG52YXIgVElNRV9SRUdFWFAgPSAvXihcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvO1xuXG52YXIgaW5wdXRUeXBlID0ge1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbdGV4dF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFN0YW5kYXJkIEhUTUwgdGV4dCBpbnB1dCB3aXRoIGFuZ3VsYXIgZGF0YSBiaW5kaW5nLCBpbmhlcml0ZWQgYnkgbW9zdCBvZiB0aGUgYGlucHV0YCBlbGVtZW50cy5cbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICAgKiAgICBtaW5sZW5ndGguXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNYXhsZW5ndGggU2V0cyBgbWF4bGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbG9uZ2VyIHRoYW5cbiAgICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mXG4gICAqICAgIGFueSBsZW5ndGguXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcGF0dGVybiBTaW1pbGFyIHRvIGBuZ1BhdHRlcm5gIGV4Y2VwdCB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgaXMgdGhlIGFjdHVhbCBzdHJpbmdcbiAgICogICAgdGhhdCBjb250YWlucyB0aGUgcmVndWxhciBleHByZXNzaW9uIGJvZHkgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgKiAgICBhcyBpbiB0aGUgbmdQYXR0ZXJuIGRpcmVjdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIG5nTW9kZWwgdmFsdWUgZG9lcyBub3QgbWF0Y2hcbiAgICogICAgYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhciBleHByZXNzaW9uIGdpdmVuIGluIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGlzIGEgc3RyaW5nIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHAgYWZ0ZXIgd3JhcHBpbmcgaXQgaW4gYF5gIGFuZCBgJGBcbiAgICogICAgY2hhcmFjdGVycy4gRm9yIGluc3RhbmNlLCBgXCJhYmNcImAgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYG5ldyBSZWdFeHAoJ15hYmMkJylgLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gW25nVHJpbT10cnVlXSBJZiBzZXQgdG8gZmFsc2UgQW5ndWxhciB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxuICAgKiAgICBUaGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkIGZvciBpbnB1dFt0eXBlPXBhc3N3b3JkXSBjb250cm9scywgd2hpY2ggd2lsbCBuZXZlciB0cmltIHRoZVxuICAgKiAgICBpbnB1dC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJ0ZXh0LWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInRleHRJbnB1dEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd0ZXh0SW5wdXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICAgICB0ZXh0OiAnZ3Vlc3QnLFxuICAgICAgICAgICAgICAgICB3b3JkOiAvXlxccypcXHcqXFxzKiQvXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICBTaW5nbGUgd29yZDogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nLXBhdHRlcm49XCJleGFtcGxlLndvcmRcIiByZXF1aXJlZCBuZy10cmltPVwiZmFsc2VcIj5cbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucGF0dGVyblwiPlxuICAgICAgICAgICAgIFNpbmdsZSB3b3JkIG9ubHkhPC9zcGFuPlxuXG4gICAgICAgICAgIDx0dD50ZXh0ID0ge3tleGFtcGxlLnRleHR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudGV4dCcpKTtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG4gICAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS50ZXh0JykpO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvQ29udGFpbignZ3Vlc3QnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xuXG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3RleHQgPScpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG11bHRpIHdvcmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnaGVsbG8gd29ybGQnKTtcblxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIH0pO1xuICAgICAgICA8L2ZpbGU+XG4gICAgICA8L2V4YW1wbGU+XG4gICAqL1xuICAndGV4dCc6IHRleHRJbnB1dFR5cGUsXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgaW5wdXRcbiAgICAgKiBAbmFtZSBpbnB1dFtkYXRlXVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogSW5wdXQgd2l0aCBkYXRlIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxuICAgICAqIHRoZSBIVE1MNSBkYXRlIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxuICAgICAqIGRhdGUgZm9ybWF0ICh5eXl5LU1NLWRkKSwgZm9yIGV4YW1wbGU6IGAyMDA5LTAxLTA2YC4gU2luY2UgbWFueVxuICAgICAqIG1vZGVybiBicm93c2VycyBkbyBub3QgeWV0IHN1cHBvcnQgdGhpcyBpbnB1dCB0eXBlLCBpdCBpcyBpbXBvcnRhbnQgdG8gcHJvdmlkZSBjdWVzIHRvIHVzZXJzIG9uIHRoZVxuICAgICAqIGV4cGVjdGVkIGlucHV0IGZvcm1hdCB2aWEgYSBwbGFjZWhvbGRlciBvciBsYWJlbC5cbiAgICAgKlxuICAgICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhciB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcbiAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC4gVGhpcyBtdXN0IGJlIGFcbiAgICAgKiB2YWxpZCBJU08gZGF0ZSBzdHJpbmcgKHl5eXktTU0tZGQpLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC4gVGhpcyBtdXN0IGJlXG4gICAgICogYSB2YWxpZCBJU08gZGF0ZSBzdHJpbmcgKHl5eXktTU0tZGQpLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICA8ZXhhbXBsZSBuYW1lPVwiZGF0ZS1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJkYXRlSW5wdXRFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZGF0ZUlucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTMsIDksIDIyKVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRGF0ZUNvbnRyb2xsZXIgYXMgZGF0ZUN0cmxcIj5cbiAgICAgICAgICBQaWNrIGEgZGF0ZSBpbiAyMDEzOlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwiZXhhbXBsZUlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnZhbHVlXCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NLWRkXCIgbWluPVwiMjAxMy0wMS0wMVwiIG1heD1cIjIwMTMtMTItMzFcIiByZXF1aXJlZCAvPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLmRhdGVcIj5cbiAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFwifX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICA8L2Zvcm0+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRcIicpKTtcbiAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdleGFtcGxlLnZhbHVlJykpO1xuXG4gICAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcbiAgICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXG4gICAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEzLTEwLTIyJyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNldElucHV0KCcyMDE1LTAxLTAxJyk7XG4gICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgICA8L2V4YW1wbGU+XG4gICAgICovXG4gICdkYXRlJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnZGF0ZScsIERBVEVfUkVHRVhQLFxuICAgICAgICAgY3JlYXRlRGF0ZVBhcnNlcihEQVRFX1JFR0VYUCwgWyd5eXl5JywgJ01NJywgJ2RkJ10pLFxuICAgICAgICAgJ3l5eXktTU0tZGQnKSxcblxuICAgLyoqXG4gICAgKiBAbmdkb2MgaW5wdXRcbiAgICAqIEBuYW1lIGlucHV0W2RhdGV0aW1lLWxvY2FsXVxuICAgICpcbiAgICAqIEBkZXNjcmlwdGlvblxuICAgICogSW5wdXQgd2l0aCBkYXRldGltZSB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICAqIHRoZSBIVE1MNSBkYXRlIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICAqIGxvY2FsIGRhdGV0aW1lIGZvcm1hdCAoeXl5eS1NTS1kZFRISDptbTpzcyksIGZvciBleGFtcGxlOiBgMjAxMC0xMi0yOFQxNDo1NzowMGAuXG4gICAgKlxuICAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFyIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXG4gICAgKlxuICAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xuICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxuICAgICpcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC4gVGhpcyBtdXN0IGJlIGFcbiAgICAqIHZhbGlkIElTTyBkYXRldGltZSBmb3JtYXQgKHl5eXktTU0tZGRUSEg6bW06c3MpLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmVcbiAgICAqIGEgdmFsaWQgSVNPIGRhdGV0aW1lIGZvcm1hdCAoeXl5eS1NTS1kZFRISDptbTpzcykuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAqXG4gICAgKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJkYXRldGltZWxvY2FsLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImRhdGVFeGFtcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxzY3JpcHQ+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkYXRlRXhhbXBsZScsIFtdKVxuICAgICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTAsIDExLCAyOCwgMTQsIDU3KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XSk7XG4gICAgICA8L3NjcmlwdD5cbiAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRGF0ZUNvbnRyb2xsZXIgYXMgZGF0ZUN0cmxcIj5cbiAgICAgICAgUGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOlxuICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGV0aW1lLWxvY2FsXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCIgbWluPVwiMjAwMS0wMS0wMVQwMDowMDowMFwiIG1heD1cIjIwMTMtMTItMzFUMDA6MDA6MDBcIiByZXF1aXJlZCAvPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLmRhdGV0aW1lbG9jYWxcIj5cbiAgICAgICAgICAgIE5vdCBhIHZhbGlkIGRhdGUhPC9zcGFuPlxuICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRUSEg6bW06c3NcIn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFRISDptbTpzc1wiJykpO1xuICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS52YWx1ZScpKTtcblxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEwLTEyLTI4VDE0OjU3OjAwJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJycpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcyMDE1LTAxLTAxVDIzOjU5OjAwJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICAgICovXG4gICdkYXRldGltZS1sb2NhbCc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ2RhdGV0aW1lbG9jYWwnLCBEQVRFVElNRUxPQ0FMX1JFR0VYUCxcbiAgICAgIGNyZWF0ZURhdGVQYXJzZXIoREFURVRJTUVMT0NBTF9SRUdFWFAsIFsneXl5eScsICdNTScsICdkZCcsICdISCcsICdtbScsICdzcycsICdzc3MnXSksXG4gICAgICAneXl5eS1NTS1kZFRISDptbTpzcy5zc3MnKSxcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3RpbWVdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBJbnB1dCB3aXRoIHRpbWUgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XG4gICAqIHRoZSBIVE1MNSBkYXRlIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICogbG9jYWwgdGltZSBmb3JtYXQgKEhIOm1tOnNzKSwgZm9yIGV4YW1wbGU6IGAxNDo1NzowMGAuIE1vZGVsIG11c3QgYmUgYSBEYXRlIG9iamVjdC4gVGhpcyBiaW5kaW5nIHdpbGwgYWx3YXlzIG91dHB1dCBhXG4gICAqIERhdGUgb2JqZWN0IHRvIHRoZSBtb2RlbCBvZiBKYW51YXJ5IDEsIDE5NzAsIG9yIGxvY2FsIGRhdGUgYG5ldyBEYXRlKDE5NzAsIDAsIDEsIEhILCBtbSwgc3MpYC5cbiAgICpcbiAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFyIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICpcbiAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xuICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuIFRoaXMgbXVzdCBiZSBhXG4gICAqIHZhbGlkIElTTyB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuIFRoaXMgbXVzdCBiZSBhXG4gICAqIHZhbGlkIElTTyB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwidGltZS1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ0aW1lRXhhbXBsZVwiPlxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgPHNjcmlwdD5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCd0aW1lRXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDE5NzAsIDAsIDEsIDE0LCA1NywgMClcbiAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG4gICAgIDwvc2NyaXB0PlxuICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XG4gICAgICAgIFBpY2sgYSBiZXR3ZWVuIDhhbSBhbmQgNXBtOlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRpbWVcIiBpZD1cImV4YW1wbGVJbnB1dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkhIOm1tOnNzXCIgbWluPVwiMDg6MDA6MDBcIiBtYXg9XCIxNzowMDowMFwiIHJlcXVpcmVkIC8+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IudGltZVwiPlxuICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwiSEg6bW06c3NcIn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgIDwvZm9ybT5cbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwiSEg6bW06c3NcIicpKTtcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2V4YW1wbGUudmFsdWUnKSk7XG5cbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgIH1cblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMTQ6NTc6MDAnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJzIzOjU5OjAwJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd0aW1lJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgndGltZScsIFRJTUVfUkVHRVhQLFxuICAgICAgY3JlYXRlRGF0ZVBhcnNlcihUSU1FX1JFR0VYUCwgWydISCcsICdtbScsICdzcycsICdzc3MnXSksXG4gICAgICdISDptbTpzcy5zc3MnKSxcblxuICAgLyoqXG4gICAgKiBAbmdkb2MgaW5wdXRcbiAgICAqIEBuYW1lIGlucHV0W3dlZWtdXG4gICAgKlxuICAgICogQGRlc2NyaXB0aW9uXG4gICAgKiBJbnB1dCB3aXRoIHdlZWstb2YtdGhlLXllYXIgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24gdG8gRGF0ZS4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICAqIHRoZSBIVE1MNSB3ZWVrIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICAqIHdlZWsgZm9ybWF0ICh5eXl5LVcjIyksIGZvciBleGFtcGxlOiBgMjAxMy1XMDJgLlxuICAgICpcbiAgICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhciB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgICogSW52YWxpZCBgRGF0ZWAgb2JqZWN0cyAoZGF0ZXMgd2hvc2UgYGdldFRpbWUoKWAgaXMgYE5hTmApIHdpbGwgYmUgcmVuZGVyZWQgYXMgYW4gZW1wdHkgc3RyaW5nLlxuICAgICpcbiAgICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcbiAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cbiAgICAqXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuIFRoaXMgbXVzdCBiZSBhXG4gICAgKiB2YWxpZCBJU08gd2VlayBmb3JtYXQgKHl5eXktVyMjKS5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC4gVGhpcyBtdXN0IGJlXG4gICAgKiBhIHZhbGlkIElTTyB3ZWVrIGZvcm1hdCAoeXl5eS1XIyMpLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAgKlxuICAgICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwid2Vlay1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ3ZWVrRXhhbXBsZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8c2NyaXB0PlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ3dlZWtFeGFtcGxlJywgW10pXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMjAxMywgMCwgMylcbiAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG4gICAgICA8L3NjcmlwdD5cbiAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRGF0ZUNvbnRyb2xsZXIgYXMgZGF0ZUN0cmxcIj5cbiAgICAgICAgUGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOlxuICAgICAgICA8aW5wdXQgaWQ9XCJleGFtcGxlSW5wdXRcIiB0eXBlPVwid2Vla1wiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIllZWVktVyMjXCIgbWluPVwiMjAxMi1XMzJcIiBtYXg9XCIyMDEzLVc1MlwiIHJlcXVpcmVkIC8+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3Iud2Vla1wiPlxuICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1Xd3dcIn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1Xd3dcIicpKTtcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2V4YW1wbGUudmFsdWUnKSk7XG5cbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgIH1cblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMy1XMDEnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJzIwMTUtVzAxJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICAgICovXG4gICd3ZWVrJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnd2VlaycsIFdFRUtfUkVHRVhQLCB3ZWVrUGFyc2VyLCAneXl5eS1Xd3cnKSxcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W21vbnRoXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSW5wdXQgd2l0aCBtb250aCB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICogdGhlIEhUTUw1IG1vbnRoIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICogbW9udGggZm9ybWF0ICh5eXl5LU1NKSwgZm9yIGV4YW1wbGU6IGAyMDA5LTAxYC5cbiAgICpcbiAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFyIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICogSWYgdGhlIG1vZGVsIGlzIG5vdCBzZXQgdG8gdGhlIGZpcnN0IG9mIHRoZSBtb250aCwgdGhlIG5leHQgdmlldyB0byBtb2RlbCB1cGRhdGUgd2lsbCBzZXQgaXRcbiAgICogdG8gdGhlIGZpcnN0IG9mIHRoZSBtb250aC5cbiAgICpcbiAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xuICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuIFRoaXMgbXVzdCBiZVxuICAgKiBhIHZhbGlkIElTTyBtb250aCBmb3JtYXQgKHl5eXktTU0pLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuIFRoaXMgbXVzdFxuICAgKiBiZSBhIHZhbGlkIElTTyBtb250aCBmb3JtYXQgKHl5eXktTU0pLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibW9udGgtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwibW9udGhFeGFtcGxlXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICA8c2NyaXB0PlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ21vbnRoRXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTMsIDksIDEpXG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgICA8L3NjcmlwdD5cbiAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgIFBpY2sgYSBtb250aCBpbiAyMDEzOlxuICAgICAgIDxpbnB1dCBpZD1cImV4YW1wbGVJbnB1dFwiIHR5cGU9XCJtb250aFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NXCIgbWluPVwiMjAxMy0wMVwiIG1heD1cIjIwMTMtMTJcIiByZXF1aXJlZCAvPlxuICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IubW9udGhcIj5cbiAgICAgICAgICBOb3QgYSB2YWxpZCBtb250aCE8L3NwYW4+XG4gICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NXCJ9fTwvdHQ+PGJyLz5cbiAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgIDwvZm9ybT5cbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTVwiJykpO1xuICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS52YWx1ZScpKTtcblxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEzLTEwJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJycpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcyMDE1LTAxJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdtb250aCc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ21vbnRoJywgTU9OVEhfUkVHRVhQLFxuICAgICBjcmVhdGVEYXRlUGFyc2VyKE1PTlRIX1JFR0VYUCwgWyd5eXl5JywgJ01NJ10pLFxuICAgICAneXl5eS1NTScpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbbnVtYmVyXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGV4dCBpbnB1dCB3aXRoIG51bWJlciB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gU2V0cyB0aGUgYG51bWJlcmAgdmFsaWRhdGlvblxuICAgKiBlcnJvciBpZiBub3QgYSB2YWxpZCBudW1iZXIuXG4gICAqXG4gICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIG51bWJlciwgb3RoZXJ3aXNlIEFuZ3VsYXIgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHZhbHVlIGRvZXMgbm90IG1hdGNoXG4gICAqICAgIGEgUmVnRXhwIGZvdW5kIGJ5IGV2YWx1YXRpbmcgdGhlIEFuZ3VsYXIgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBSZWdFeHAgb2JqZWN0IHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBpcyBhIHN0cmluZyB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgXG4gICAqICAgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwibnVtYmVyLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIm51bWJlckV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICAgICB2YWx1ZTogMTJcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIE51bWJlcjogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCIgbWF4PVwiOTlcIiByZXF1aXJlZD5cbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IubnVtYmVyXCI+XG4gICAgICAgICAgICAgTm90IHZhbGlkIG51bWJlciE8L3NwYW4+XG4gICAgICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZX19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUnKSk7XG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuICAgICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2V4YW1wbGUudmFsdWUnKSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMTInKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJzEyMycpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIH0pO1xuICAgICAgICA8L2ZpbGU+XG4gICAgICA8L2V4YW1wbGU+XG4gICAqL1xuICAnbnVtYmVyJzogbnVtYmVySW5wdXRUeXBlLFxuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBpbnB1dFxuICAgKiBAbmFtZSBpbnB1dFt1cmxdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUZXh0IGlucHV0IHdpdGggVVJMIHZhbGlkYXRpb24uIFNldHMgdGhlIGB1cmxgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBjb250ZW50IGlzIG5vdCBhXG4gICAqIHZhbGlkIFVSTC5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogKipOb3RlOioqIGBpbnB1dFt1cmxdYCB1c2VzIGEgcmVnZXggdG8gdmFsaWRhdGUgdXJscyB0aGF0IGlzIGRlcml2ZWQgZnJvbSB0aGUgcmVnZXhcbiAgICogdXNlZCBpbiBDaHJvbWl1bS4gSWYgeW91IG5lZWQgc3RyaWN0ZXIgdmFsaWRhdGlvbiwgeW91IGNhbiB1c2UgYG5nLXBhdHRlcm5gIG9yIG1vZGlmeVxuICAgKiB0aGUgYnVpbHQtaW4gdmFsaWRhdG9ycyAoc2VlIHRoZSB7QGxpbmsgZ3VpZGUvZm9ybXMgRm9ybXMgZ3VpZGV9KVxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICAgKiAgICBtaW5sZW5ndGguXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNYXhsZW5ndGggU2V0cyBgbWF4bGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbG9uZ2VyIHRoYW5cbiAgICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mXG4gICAqICAgIGFueSBsZW5ndGguXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcGF0dGVybiBTaW1pbGFyIHRvIGBuZ1BhdHRlcm5gIGV4Y2VwdCB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgaXMgdGhlIGFjdHVhbCBzdHJpbmdcbiAgICogICAgdGhhdCBjb250YWlucyB0aGUgcmVndWxhciBleHByZXNzaW9uIGJvZHkgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgKiAgICBhcyBpbiB0aGUgbmdQYXR0ZXJuIGRpcmVjdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIG5nTW9kZWwgdmFsdWUgZG9lcyBub3QgbWF0Y2hcbiAgICogICAgYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhciBleHByZXNzaW9uIGdpdmVuIGluIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGlzIGEgc3RyaW5nIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHAgYWZ0ZXIgd3JhcHBpbmcgaXQgaW4gYF5gIGFuZCBgJGBcbiAgICogICAgY2hhcmFjdGVycy4gRm9yIGluc3RhbmNlLCBgXCJhYmNcImAgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYG5ldyBSZWdFeHAoJ15hYmMkJylgLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJ1cmwtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwidXJsRXhhbXBsZVwiPlxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3VybEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLnVybCA9IHtcbiAgICAgICAgICAgICAgICAgdGV4dDogJ2h0dHA6Ly9nb29nbGUuY29tJ1xuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICB9XSk7XG4gICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgVVJMOiA8aW5wdXQgdHlwZT1cInVybFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwidXJsLnRleHRcIiByZXF1aXJlZD5cbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IudXJsXCI+XG4gICAgICAgICAgICAgTm90IHZhbGlkIHVybCE8L3NwYW4+XG4gICAgICAgICAgIDx0dD50ZXh0ID0ge3t1cmwudGV4dH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnVybCA9IHt7ISFteUZvcm0uJGVycm9yLnVybH19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VybC50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1cmwudGV4dCcpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2h0dHA6Ly9nb29nbGUuY29tJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcnKTtcblxuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgdXJsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2JveCcpO1xuXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd1cmwnOiB1cmxJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W2VtYWlsXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGV4dCBpbnB1dCB3aXRoIGVtYWlsIHZhbGlkYXRpb24uIFNldHMgdGhlIGBlbWFpbGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgbm90IGEgdmFsaWQgZW1haWxcbiAgICogYWRkcmVzcy5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogKipOb3RlOioqIGBpbnB1dFtlbWFpbF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSBlbWFpbCBhZGRyZXNzZXMgdGhhdCBpcyBkZXJpdmVkIGZyb20gdGhlIHJlZ2V4XG4gICAqIHVzZWQgaW4gQ2hyb21pdW0uIElmIHlvdSBuZWVkIHN0cmljdGVyIHZhbGlkYXRpb24gKGUuZy4gcmVxdWlyaW5nIGEgdG9wLWxldmVsIGRvbWFpbiksIHlvdSBjYW5cbiAgICogdXNlIGBuZy1wYXR0ZXJuYCBvciBtb2RpZnkgdGhlIGJ1aWx0LWluIHZhbGlkYXRvcnMgKHNlZSB0aGUge0BsaW5rIGd1aWRlL2Zvcm1zIEZvcm1zIGd1aWRlfSlcbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHZhbHVlIGRvZXMgbm90IG1hdGNoXG4gICAqICAgIGEgUmVnRXhwIGZvdW5kIGJ5IGV2YWx1YXRpbmcgdGhlIEFuZ3VsYXIgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBSZWdFeHAgb2JqZWN0IHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBpcyBhIHN0cmluZyB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgXG4gICAqICAgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwiZW1haWwtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiZW1haWxFeGFtcGxlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICA8c2NyaXB0PlxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZW1haWxFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5lbWFpbCA9IHtcbiAgICAgICAgICAgICAgICAgdGV4dDogJ21lQGV4YW1wbGUuY29tJ1xuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICB9XSk7XG4gICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICAgIEVtYWlsOiA8aW5wdXQgdHlwZT1cImVtYWlsXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJlbWFpbC50ZXh0XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLmVtYWlsXCI+XG4gICAgICAgICAgICAgICBOb3QgdmFsaWQgZW1haWwhPC9zcGFuPlxuICAgICAgICAgICAgIDx0dD50ZXh0ID0ge3tlbWFpbC50ZXh0fX08L3R0Pjxici8+XG4gICAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLmVtYWlsID0ge3shIW15Rm9ybS4kZXJyb3IuZW1haWx9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2VtYWlsLnRleHQnKSk7XG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuICAgICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2VtYWlsLnRleHQnKSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9Db250YWluKCdtZUBleGFtcGxlLmNvbScpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3RleHQgPScpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG5vdCBlbWFpbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCd4eHgnKTtcblxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIH0pO1xuICAgICAgICA8L2ZpbGU+XG4gICAgICA8L2V4YW1wbGU+XG4gICAqL1xuICAnZW1haWwnOiBlbWFpbElucHV0VHlwZSxcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbcmFkaW9dXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBIVE1MIHJhZGlvIGJ1dHRvbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBleHByZXNzaW9uIHNob3VsZCBiZSBzZXQgd2hlbiBzZWxlY3RlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nVmFsdWUgQW5ndWxhciBleHByZXNzaW9uIHdoaWNoIHNldHMgdGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBleHByZXNzaW9uIHNob3VsZFxuICAgKiAgICBiZSBzZXQgd2hlbiBzZWxlY3RlZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJyYWRpby1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJyYWRpb0V4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdyYWRpb0V4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmNvbG9yID0ge1xuICAgICAgICAgICAgICAgICBuYW1lOiAnYmx1ZSdcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAkc2NvcGUuc3BlY2lhbFZhbHVlID0ge1xuICAgICAgICAgICAgICAgICBcImlkXCI6IFwiMTIzNDVcIixcbiAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBcImdyZWVuXCJcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIiB2YWx1ZT1cInJlZFwiPiAgUmVkIDxici8+XG4gICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIiBuZy12YWx1ZT1cInNwZWNpYWxWYWx1ZVwiPiBHcmVlbiA8YnIvPlxuICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJjb2xvci5uYW1lXCIgdmFsdWU9XCJibHVlXCI+IEJsdWUgPGJyLz5cbiAgICAgICAgICAgPHR0PmNvbG9yID0ge3tjb2xvci5uYW1lIHwganNvbn19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICBOb3RlIHRoYXQgYG5nLXZhbHVlPVwic3BlY2lhbFZhbHVlXCJgIHNldHMgcmFkaW8gaXRlbSdzIHZhbHVlIHRvIGJlIHRoZSB2YWx1ZSBvZiBgJHNjb3BlLnNwZWNpYWxWYWx1ZWAuXG4gICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHN0YXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvbG9yLm5hbWUnKSk7XG5cbiAgICAgICAgICAgIGV4cGVjdChjb2xvci5nZXRUZXh0KCkpLnRvQ29udGFpbignYmx1ZScpO1xuXG4gICAgICAgICAgICBlbGVtZW50LmFsbChieS5tb2RlbCgnY29sb3IubmFtZScpKS5nZXQoMCkuY2xpY2soKTtcblxuICAgICAgICAgICAgZXhwZWN0KGNvbG9yLmdldFRleHQoKSkudG9Db250YWluKCdyZWQnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgPC9maWxlPlxuICAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgJ3JhZGlvJzogcmFkaW9JbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W2NoZWNrYm94XVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSFRNTCBjaGVja2JveC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nVHJ1ZVZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgc2V0IHdoZW4gc2VsZWN0ZWQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nRmFsc2VWYWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIG5vdCBzZWxlY3RlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwiY2hlY2tib3gtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiY2hlY2tib3hFeGFtcGxlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICA8c2NyaXB0PlxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnY2hlY2tib3hFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5jaGVja2JveE1vZGVsID0ge1xuICAgICAgICAgICAgICAgIHZhbHVlMSA6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWUyIDogJ1lFUydcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICB9XSk7XG4gICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgVmFsdWUxOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2JveE1vZGVsLnZhbHVlMVwiPiA8YnIvPlxuICAgICAgICAgICBWYWx1ZTI6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrYm94TW9kZWwudmFsdWUyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmctdHJ1ZS12YWx1ZT1cIidZRVMnXCIgbmctZmFsc2UtdmFsdWU9XCInTk8nXCI+IDxici8+XG4gICAgICAgICAgIDx0dD52YWx1ZTEgPSB7e2NoZWNrYm94TW9kZWwudmFsdWUxfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD52YWx1ZTIgPSB7e2NoZWNrYm94TW9kZWwudmFsdWUyfX08L3R0Pjxici8+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgICBpdCgnc2hvdWxkIGNoYW5nZSBzdGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlMSA9IGVsZW1lbnQoYnkuYmluZGluZygnY2hlY2tib3hNb2RlbC52YWx1ZTEnKSk7XG4gICAgICAgICAgICB2YXIgdmFsdWUyID0gZWxlbWVudChieS5iaW5kaW5nKCdjaGVja2JveE1vZGVsLnZhbHVlMicpKTtcblxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMS5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMi5nZXRUZXh0KCkpLnRvQ29udGFpbignWUVTJyk7XG5cbiAgICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrYm94TW9kZWwudmFsdWUxJykpLmNsaWNrKCk7XG4gICAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2JveE1vZGVsLnZhbHVlMicpKS5jbGljaygpO1xuXG4gICAgICAgICAgICBleHBlY3QodmFsdWUxLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMi5nZXRUZXh0KCkpLnRvQ29udGFpbignTk8nKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgPC9maWxlPlxuICAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgJ2NoZWNrYm94JzogY2hlY2tib3hJbnB1dFR5cGUsXG5cbiAgJ2hpZGRlbic6IG5vb3AsXG4gICdidXR0b24nOiBub29wLFxuICAnc3VibWl0Jzogbm9vcCxcbiAgJ3Jlc2V0Jzogbm9vcCxcbiAgJ2ZpbGUnOiBub29wXG59O1xuXG5mdW5jdGlvbiBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKSB7XG4gIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSA/IHZhbHVlIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRleHRJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuICBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKTtcbn1cblxuZnVuY3Rpb24gYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XG4gIHZhciB0eXBlID0gbG93ZXJjYXNlKGVsZW1lbnRbMF0udHlwZSk7XG5cbiAgLy8gSW4gY29tcG9zaXRpb24gbW9kZSwgdXNlcnMgYXJlIHN0aWxsIGlucHV0aW5nIGludGVybWVkaWF0ZSB0ZXh0IGJ1ZmZlcixcbiAgLy8gaG9sZCB0aGUgbGlzdGVuZXIgdW50aWwgY29tcG9zaXRpb24gaXMgZG9uZS5cbiAgLy8gTW9yZSBhYm91dCBjb21wb3NpdGlvbiBldmVudHM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Db21wb3NpdGlvbkV2ZW50XG4gIGlmICghJHNuaWZmZXIuYW5kcm9pZCkge1xuICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcblxuICAgIGVsZW1lbnQub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb21wb3NpbmcgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgZWxlbWVudC5vbignY29tcG9zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgbGlzdGVuZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICRicm93c2VyLmRlZmVyLmNhbmNlbCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoY29tcG9zaW5nKSByZXR1cm47XG4gICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWwoKSxcbiAgICAgICAgZXZlbnQgPSBldiAmJiBldi50eXBlO1xuXG4gICAgLy8gQnkgZGVmYXVsdCB3ZSB3aWxsIHRyaW0gdGhlIHZhbHVlXG4gICAgLy8gSWYgdGhlIGF0dHJpYnV0ZSBuZy10cmltIGV4aXN0cyB3ZSB3aWxsIGF2b2lkIHRyaW1taW5nXG4gICAgLy8gSWYgaW5wdXQgdHlwZSBpcyAncGFzc3dvcmQnLCB0aGUgdmFsdWUgaXMgbmV2ZXIgdHJpbW1lZFxuICAgIGlmICh0eXBlICE9PSAncGFzc3dvcmQnICYmICghYXR0ci5uZ1RyaW0gfHwgYXR0ci5uZ1RyaW0gIT09ICdmYWxzZScpKSB7XG4gICAgICB2YWx1ZSA9IHRyaW0odmFsdWUpO1xuICAgIH1cblxuICAgIC8vIElmIGEgY29udHJvbCBpcyBzdWZmZXJpbmcgZnJvbSBiYWQgaW5wdXQgKGR1ZSB0byBuYXRpdmUgdmFsaWRhdG9ycyksIGJyb3dzZXJzIGRpc2NhcmQgaXRzXG4gICAgLy8gdmFsdWUsIHNvIGl0IG1heSBiZSBuZWNlc3NhcnkgdG8gcmV2YWxpZGF0ZSAoYnkgY2FsbGluZyAkc2V0Vmlld1ZhbHVlIGFnYWluKSBldmVuIGlmIHRoZVxuICAgIC8vIGNvbnRyb2wncyB2YWx1ZSBpcyB0aGUgc2FtZSBlbXB0eSB2YWx1ZSB0d2ljZSBpbiBhIHJvdy5cbiAgICBpZiAoY3RybC4kdmlld1ZhbHVlICE9PSB2YWx1ZSB8fCAodmFsdWUgPT09ICcnICYmIGN0cmwuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSkge1xuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlLCBldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIGlmIHRoZSBicm93c2VyIGRvZXMgc3VwcG9ydCBcImlucHV0XCIgZXZlbnQsIHdlIGFyZSBmaW5lIC0gZXhjZXB0IG9uIElFOSB3aGljaCBkb2Vzbid0IGZpcmUgdGhlXG4gIC8vIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZSwgZGVsZXRlIG9yIGN1dFxuICBpZiAoJHNuaWZmZXIuaGFzRXZlbnQoJ2lucHV0JykpIHtcbiAgICBlbGVtZW50Lm9uKCdpbnB1dCcsIGxpc3RlbmVyKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGltZW91dDtcblxuICAgIHZhciBkZWZlckxpc3RlbmVyID0gZnVuY3Rpb24oZXYsIGlucHV0LCBvcmlnVmFsdWUpIHtcbiAgICAgIGlmICghdGltZW91dCkge1xuICAgICAgICB0aW1lb3V0ID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgaWYgKCFpbnB1dCB8fCBpbnB1dC52YWx1ZSAhPT0gb3JpZ1ZhbHVlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihldik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZWxlbWVudC5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIga2V5ID0gZXZlbnQua2V5Q29kZTtcblxuICAgICAgLy8gaWdub3JlXG4gICAgICAvLyAgICBjb21tYW5kICAgICAgICAgICAgbW9kaWZpZXJzICAgICAgICAgICAgICAgICAgIGFycm93c1xuICAgICAgaWYgKGtleSA9PT0gOTEgfHwgKDE1IDwga2V5ICYmIGtleSA8IDE5KSB8fCAoMzcgPD0ga2V5ICYmIGtleSA8PSA0MCkpIHJldHVybjtcblxuICAgICAgZGVmZXJMaXN0ZW5lcihldmVudCwgdGhpcywgdGhpcy52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBpZiB1c2VyIG1vZGlmaWVzIGlucHV0IHZhbHVlIHVzaW5nIGNvbnRleHQgbWVudSBpbiBJRSwgd2UgbmVlZCBcInBhc3RlXCIgYW5kIFwiY3V0XCIgZXZlbnRzIHRvIGNhdGNoIGl0XG4gICAgaWYgKCRzbmlmZmVyLmhhc0V2ZW50KCdwYXN0ZScpKSB7XG4gICAgICBlbGVtZW50Lm9uKCdwYXN0ZSBjdXQnLCBkZWZlckxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB1c2VyIHBhc3RlIGludG8gaW5wdXQgdXNpbmcgbW91c2Ugb24gb2xkZXIgYnJvd3NlclxuICAvLyBvciBmb3JtIGF1dG9jb21wbGV0ZSBvbiBuZXdlciBicm93c2VyLCB3ZSBuZWVkIFwiY2hhbmdlXCIgZXZlbnQgdG8gY2F0Y2ggaXRcbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGVsZW1lbnQudmFsKGN0cmwuJGlzRW1wdHkoY3RybC4kdmlld1ZhbHVlKSA/ICcnIDogY3RybC4kdmlld1ZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gd2Vla1BhcnNlcihpc29XZWVrLCBleGlzdGluZ0RhdGUpIHtcbiAgaWYgKGlzRGF0ZShpc29XZWVrKSkge1xuICAgIHJldHVybiBpc29XZWVrO1xuICB9XG5cbiAgaWYgKGlzU3RyaW5nKGlzb1dlZWspKSB7XG4gICAgV0VFS19SRUdFWFAubGFzdEluZGV4ID0gMDtcbiAgICB2YXIgcGFydHMgPSBXRUVLX1JFR0VYUC5leGVjKGlzb1dlZWspO1xuICAgIGlmIChwYXJ0cykge1xuICAgICAgdmFyIHllYXIgPSArcGFydHNbMV0sXG4gICAgICAgICAgd2VlayA9ICtwYXJ0c1syXSxcbiAgICAgICAgICBob3VycyA9IDAsXG4gICAgICAgICAgbWludXRlcyA9IDAsXG4gICAgICAgICAgc2Vjb25kcyA9IDAsXG4gICAgICAgICAgbWlsbGlzZWNvbmRzID0gMCxcbiAgICAgICAgICBmaXJzdFRodXJzID0gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcih5ZWFyKSxcbiAgICAgICAgICBhZGREYXlzID0gKHdlZWsgLSAxKSAqIDc7XG5cbiAgICAgIGlmIChleGlzdGluZ0RhdGUpIHtcbiAgICAgICAgaG91cnMgPSBleGlzdGluZ0RhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgbWludXRlcyA9IGV4aXN0aW5nRGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIHNlY29uZHMgPSBleGlzdGluZ0RhdGUuZ2V0U2Vjb25kcygpO1xuICAgICAgICBtaWxsaXNlY29uZHMgPSBleGlzdGluZ0RhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCAwLCBmaXJzdFRodXJzLmdldERhdGUoKSArIGFkZERheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBtaWxsaXNlY29uZHMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBOYU47XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURhdGVQYXJzZXIocmVnZXhwLCBtYXBwaW5nKSB7XG4gIHJldHVybiBmdW5jdGlvbihpc28sIGRhdGUpIHtcbiAgICB2YXIgcGFydHMsIG1hcDtcblxuICAgIGlmIChpc0RhdGUoaXNvKSkge1xuICAgICAgcmV0dXJuIGlzbztcbiAgICB9XG5cbiAgICBpZiAoaXNTdHJpbmcoaXNvKSkge1xuICAgICAgLy8gV2hlbiBhIGRhdGUgaXMgSlNPTidpZmllZCB0byB3cmFwcyBpdHNlbGYgaW5zaWRlIG9mIGFuIGV4dHJhXG4gICAgICAvLyBzZXQgb2YgZG91YmxlIHF1b3Rlcy4gVGhpcyBtYWtlcyB0aGUgZGF0ZSBwYXJzaW5nIGNvZGUgdW5hYmxlXG4gICAgICAvLyB0byBtYXRjaCB0aGUgZGF0ZSBzdHJpbmcgYW5kIHBhcnNlIGl0IGFzIGEgZGF0ZS5cbiAgICAgIGlmIChpc28uY2hhckF0KDApID09ICdcIicgJiYgaXNvLmNoYXJBdChpc28ubGVuZ3RoIC0gMSkgPT0gJ1wiJykge1xuICAgICAgICBpc28gPSBpc28uc3Vic3RyaW5nKDEsIGlzby5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChJU09fREFURV9SRUdFWFAudGVzdChpc28pKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShpc28pO1xuICAgICAgfVxuICAgICAgcmVnZXhwLmxhc3RJbmRleCA9IDA7XG4gICAgICBwYXJ0cyA9IHJlZ2V4cC5leGVjKGlzbyk7XG5cbiAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgIG1hcCA9IHtcbiAgICAgICAgICAgIHl5eXk6IGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgICAgIE1NOiBkYXRlLmdldE1vbnRoKCkgKyAxLFxuICAgICAgICAgICAgZGQ6IGRhdGUuZ2V0RGF0ZSgpLFxuICAgICAgICAgICAgSEg6IGRhdGUuZ2V0SG91cnMoKSxcbiAgICAgICAgICAgIG1tOiBkYXRlLmdldE1pbnV0ZXMoKSxcbiAgICAgICAgICAgIHNzOiBkYXRlLmdldFNlY29uZHMoKSxcbiAgICAgICAgICAgIHNzczogZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSAvIDEwMDBcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hcCA9IHsgeXl5eTogMTk3MCwgTU06IDEsIGRkOiAxLCBISDogMCwgbW06IDAsIHNzOiAwLCBzc3M6IDAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvckVhY2gocGFydHMsIGZ1bmN0aW9uKHBhcnQsIGluZGV4KSB7XG4gICAgICAgICAgaWYgKGluZGV4IDwgbWFwcGluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG1hcFttYXBwaW5nW2luZGV4XV0gPSArcGFydDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IERhdGUobWFwLnl5eXksIG1hcC5NTSAtIDEsIG1hcC5kZCwgbWFwLkhILCBtYXAubW0sIG1hcC5zcyB8fCAwLCBtYXAuc3NzICogMTAwMCB8fCAwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTmFOO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEYXRlSW5wdXRUeXBlKHR5cGUsIHJlZ2V4cCwgcGFyc2VEYXRlLCBmb3JtYXQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGR5bmFtaWNEYXRlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIsICRmaWx0ZXIpIHtcbiAgICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpO1xuICAgIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG4gICAgdmFyIHRpbWV6b25lID0gY3RybCAmJiBjdHJsLiRvcHRpb25zICYmIGN0cmwuJG9wdGlvbnMudGltZXpvbmU7XG4gICAgdmFyIHByZXZpb3VzRGF0ZTtcblxuICAgIGN0cmwuJCRwYXJzZXJOYW1lID0gdHlwZTtcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChjdHJsLiRpc0VtcHR5KHZhbHVlKSkgcmV0dXJuIG51bGw7XG4gICAgICBpZiAocmVnZXhwLnRlc3QodmFsdWUpKSB7XG4gICAgICAgIC8vIE5vdGU6IFdlIGNhbm5vdCByZWFkIGN0cmwuJG1vZGVsVmFsdWUsIGFzIHRoZXJlIG1pZ2h0IGJlIGEgZGlmZmVyZW50XG4gICAgICAgIC8vIHBhcnNlci9mb3JtYXR0ZXIgaW4gdGhlIHByb2Nlc3NpbmcgY2hhaW4gc28gdGhhdCB0aGUgbW9kZWxcbiAgICAgICAgLy8gY29udGFpbnMgc29tZSBkaWZmZXJlbnQgZGF0YSBmb3JtYXQhXG4gICAgICAgIHZhciBwYXJzZWREYXRlID0gcGFyc2VEYXRlKHZhbHVlLCBwcmV2aW91c0RhdGUpO1xuICAgICAgICBpZiAodGltZXpvbmUgPT09ICdVVEMnKSB7XG4gICAgICAgICAgcGFyc2VkRGF0ZS5zZXRNaW51dGVzKHBhcnNlZERhdGUuZ2V0TWludXRlcygpIC0gcGFyc2VkRGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG5cbiAgICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSAmJiAhaXNEYXRlKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyAkbmdNb2RlbE1pbkVycignZGF0ZWZtdCcsICdFeHBlY3RlZCBgezB9YCB0byBiZSBhIGRhdGUnLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNWYWxpZERhdGUodmFsdWUpKSB7XG4gICAgICAgIHByZXZpb3VzRGF0ZSA9IHZhbHVlO1xuICAgICAgICBpZiAocHJldmlvdXNEYXRlICYmIHRpbWV6b25lID09PSAnVVRDJykge1xuICAgICAgICAgIHZhciB0aW1lem9uZU9mZnNldCA9IDYwMDAwICogcHJldmlvdXNEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gICAgICAgICAgcHJldmlvdXNEYXRlID0gbmV3IERhdGUocHJldmlvdXNEYXRlLmdldFRpbWUoKSArIHRpbWV6b25lT2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJGZpbHRlcignZGF0ZScpKHZhbHVlLCBmb3JtYXQsIHRpbWV6b25lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXZpb3VzRGF0ZSA9IG51bGw7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChpc0RlZmluZWQoYXR0ci5taW4pIHx8IGF0dHIubmdNaW4pIHtcbiAgICAgIHZhciBtaW5WYWw7XG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1pbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhaXNWYWxpZERhdGUodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1pblZhbCkgfHwgcGFyc2VEYXRlKHZhbHVlKSA+PSBtaW5WYWw7XG4gICAgICB9O1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWluJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIG1pblZhbCA9IHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKTtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChpc0RlZmluZWQoYXR0ci5tYXgpIHx8IGF0dHIubmdNYXgpIHtcbiAgICAgIHZhciBtYXhWYWw7XG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhaXNWYWxpZERhdGUodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgcGFyc2VEYXRlKHZhbHVlKSA8PSBtYXhWYWw7XG4gICAgICB9O1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWF4JywgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIG1heFZhbCA9IHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKTtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVmFsaWREYXRlKHZhbHVlKSB7XG4gICAgICAvLyBJbnZhbGlkIERhdGU6IGdldFRpbWUoKSByZXR1cm5zIE5hTlxuICAgICAgcmV0dXJuIHZhbHVlICYmICEodmFsdWUuZ2V0VGltZSAmJiB2YWx1ZS5nZXRUaW1lKCkgIT09IHZhbHVlLmdldFRpbWUoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VPYnNlcnZlZERhdGVWYWx1ZSh2YWwpIHtcbiAgICAgIHJldHVybiBpc0RlZmluZWQodmFsKSA/IChpc0RhdGUodmFsKSA/IHZhbCA6IHBhcnNlRGF0ZSh2YWwpKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGJhZElucHV0Q2hlY2tlcihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xuICB2YXIgbm9kZSA9IGVsZW1lbnRbMF07XG4gIHZhciBuYXRpdmVWYWxpZGF0aW9uID0gY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMgPSBpc09iamVjdChub2RlLnZhbGlkaXR5KTtcbiAgaWYgKG5hdGl2ZVZhbGlkYXRpb24pIHtcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciB2YWxpZGl0eSA9IGVsZW1lbnQucHJvcChWQUxJRElUWV9TVEFURV9QUk9QRVJUWSkgfHwge307XG4gICAgICAvLyBEZXRlY3QgYnVnIGluIEZGMzUgZm9yIGlucHV0W2VtYWlsXSAoaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA2NDQzMCk6XG4gICAgICAvLyAtIGFsc28gc2V0cyB2YWxpZGl0eS5iYWRJbnB1dCAoc2hvdWxkIG9ubHkgYmUgdmFsaWRpdHkudHlwZU1pc21hdGNoKS5cbiAgICAgIC8vIC0gc2VlIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjZS1tYWlsLXN0YXRlLSh0eXBlPWVtYWlsKVxuICAgICAgLy8gLSBjYW4gaWdub3JlIHRoaXMgY2FzZSBhcyB3ZSBjYW4gc3RpbGwgcmVhZCBvdXQgdGhlIGVycm9uZW91cyBlbWFpbC4uLlxuICAgICAgcmV0dXJuIHZhbGlkaXR5LmJhZElucHV0ICYmICF2YWxpZGl0eS50eXBlTWlzbWF0Y2ggPyB1bmRlZmluZWQgOiB2YWx1ZTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBudW1iZXJJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpO1xuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuXG4gIGN0cmwuJCRwYXJzZXJOYW1lID0gJ251bWJlcic7XG4gIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChjdHJsLiRpc0VtcHR5KHZhbHVlKSkgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoTlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSkgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0pO1xuXG4gIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICghY3RybC4kaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICAgIGlmICghaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgICAgIHRocm93ICRuZ01vZGVsTWluRXJyKCdudW1mbXQnLCAnRXhwZWN0ZWQgYHswfWAgdG8gYmUgYSBudW1iZXInLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSk7XG5cbiAgaWYgKGF0dHIubWluIHx8IGF0dHIubmdNaW4pIHtcbiAgICB2YXIgbWluVmFsO1xuICAgIGN0cmwuJHZhbGlkYXRvcnMubWluID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHZhbHVlID49IG1pblZhbDtcbiAgICB9O1xuXG4gICAgYXR0ci4kb2JzZXJ2ZSgnbWluJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAoaXNEZWZpbmVkKHZhbCkgJiYgIWlzTnVtYmVyKHZhbCkpIHtcbiAgICAgICAgdmFsID0gcGFyc2VGbG9hdCh2YWwsIDEwKTtcbiAgICAgIH1cbiAgICAgIG1pblZhbCA9IGlzTnVtYmVyKHZhbCkgJiYgIWlzTmFOKHZhbCkgPyB2YWwgOiB1bmRlZmluZWQ7XG4gICAgICAvLyBUT0RPKG1hdHNrbyk6IGltcGxlbWVudCB2YWxpZGF0ZUxhdGVyIHRvIHJlZHVjZSBudW1iZXIgb2YgdmFsaWRhdGlvbnNcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoYXR0ci5tYXggfHwgYXR0ci5uZ01heCkge1xuICAgIHZhciBtYXhWYWw7XG4gICAgY3RybC4kdmFsaWRhdG9ycy5tYXggPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgdmFsdWUgPD0gbWF4VmFsO1xuICAgIH07XG5cbiAgICBhdHRyLiRvYnNlcnZlKCdtYXgnLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmIChpc0RlZmluZWQodmFsKSAmJiAhaXNOdW1iZXIodmFsKSkge1xuICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KHZhbCwgMTApO1xuICAgICAgfVxuICAgICAgbWF4VmFsID0gaXNOdW1iZXIodmFsKSAmJiAhaXNOYU4odmFsKSA/IHZhbCA6IHVuZGVmaW5lZDtcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1cmxJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICAvLyBOb3RlOiBubyBiYWRJbnB1dENoZWNrZXIgaGVyZSBieSBwdXJwb3NlIGFzIGB1cmxgIGlzIG9ubHkgYSB2YWxpZGF0aW9uXG4gIC8vIGluIGJyb3dzZXJzLCBpLmUuIHdlIGNhbiBhbHdheXMgcmVhZCBvdXQgaW5wdXQudmFsdWUgZXZlbiBpZiBpdCBpcyBub3QgdmFsaWQhXG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG4gIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpO1xuXG4gIGN0cmwuJCRwYXJzZXJOYW1lID0gJ3VybCc7XG4gIGN0cmwuJHZhbGlkYXRvcnMudXJsID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XG4gICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IFVSTF9SRUdFWFAudGVzdCh2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGVtYWlsSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgLy8gTm90ZTogbm8gYmFkSW5wdXRDaGVja2VyIGhlcmUgYnkgcHVycG9zZSBhcyBgdXJsYCBpcyBvbmx5IGEgdmFsaWRhdGlvblxuICAvLyBpbiBicm93c2VycywgaS5lLiB3ZSBjYW4gYWx3YXlzIHJlYWQgb3V0IGlucHV0LnZhbHVlIGV2ZW4gaWYgaXQgaXMgbm90IHZhbGlkIVxuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuICBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKTtcblxuICBjdHJsLiQkcGFyc2VyTmFtZSA9ICdlbWFpbCc7XG4gIGN0cmwuJHZhbGlkYXRvcnMuZW1haWwgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgRU1BSUxfUkVHRVhQLnRlc3QodmFsdWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiByYWRpb0lucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xuICAvLyBtYWtlIHRoZSBuYW1lIHVuaXF1ZSwgaWYgbm90IGRlZmluZWRcbiAgaWYgKGlzVW5kZWZpbmVkKGF0dHIubmFtZSkpIHtcbiAgICBlbGVtZW50LmF0dHIoJ25hbWUnLCBuZXh0VWlkKCkpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICBpZiAoZWxlbWVudFswXS5jaGVja2VkKSB7XG4gICAgICBjdHJsLiRzZXRWaWV3VmFsdWUoYXR0ci52YWx1ZSwgZXYgJiYgZXYudHlwZSk7XG4gICAgfVxuICB9O1xuXG4gIGVsZW1lbnQub24oJ2NsaWNrJywgbGlzdGVuZXIpO1xuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgZWxlbWVudFswXS5jaGVja2VkID0gKHZhbHVlID09IGN0cmwuJHZpZXdWYWx1ZSk7XG4gIH07XG5cbiAgYXR0ci4kb2JzZXJ2ZSgndmFsdWUnLCBjdHJsLiRyZW5kZXIpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNvbnN0YW50RXhwcigkcGFyc2UsIGNvbnRleHQsIG5hbWUsIGV4cHJlc3Npb24sIGZhbGxiYWNrKSB7XG4gIHZhciBwYXJzZUZuO1xuICBpZiAoaXNEZWZpbmVkKGV4cHJlc3Npb24pKSB7XG4gICAgcGFyc2VGbiA9ICRwYXJzZShleHByZXNzaW9uKTtcbiAgICBpZiAoIXBhcnNlRm4uY29uc3RhbnQpIHtcbiAgICAgIHRocm93IG1pbkVycignbmdNb2RlbCcpKCdjb25zdGV4cHInLCAnRXhwZWN0ZWQgY29uc3RhbnQgZXhwcmVzc2lvbiBmb3IgYHswfWAsIGJ1dCBzYXcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdgezF9YC4nLCBuYW1lLCBleHByZXNzaW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlRm4oY29udGV4dCk7XG4gIH1cbiAgcmV0dXJuIGZhbGxiYWNrO1xufVxuXG5mdW5jdGlvbiBjaGVja2JveElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyLCAkZmlsdGVyLCAkcGFyc2UpIHtcbiAgdmFyIHRydWVWYWx1ZSA9IHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgc2NvcGUsICduZ1RydWVWYWx1ZScsIGF0dHIubmdUcnVlVmFsdWUsIHRydWUpO1xuICB2YXIgZmFsc2VWYWx1ZSA9IHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgc2NvcGUsICduZ0ZhbHNlVmFsdWUnLCBhdHRyLm5nRmFsc2VWYWx1ZSwgZmFsc2UpO1xuXG4gIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgY3RybC4kc2V0Vmlld1ZhbHVlKGVsZW1lbnRbMF0uY2hlY2tlZCwgZXYgJiYgZXYudHlwZSk7XG4gIH07XG5cbiAgZWxlbWVudC5vbignY2xpY2snLCBsaXN0ZW5lcik7XG5cbiAgY3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgZWxlbWVudFswXS5jaGVja2VkID0gY3RybC4kdmlld1ZhbHVlO1xuICB9O1xuXG4gIC8vIE92ZXJyaWRlIHRoZSBzdGFuZGFyZCBgJGlzRW1wdHlgIGJlY2F1c2UgdGhlICR2aWV3VmFsdWUgb2YgYW4gZW1wdHkgY2hlY2tib3ggaXMgYWx3YXlzIHNldCB0byBgZmFsc2VgXG4gIC8vIFRoaXMgaXMgYmVjYXVzZSBvZiB0aGUgcGFyc2VyIGJlbG93LCB3aGljaCBjb21wYXJlcyB0aGUgYCRtb2RlbFZhbHVlYCB3aXRoIGB0cnVlVmFsdWVgIHRvIGNvbnZlcnRcbiAgLy8gaXQgdG8gYSBib29sZWFuLlxuICBjdHJsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IGZhbHNlO1xuICB9O1xuXG4gIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBlcXVhbHModmFsdWUsIHRydWVWYWx1ZSk7XG4gIH0pO1xuXG4gIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA/IHRydWVWYWx1ZSA6IGZhbHNlVmFsdWU7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgdGV4dGFyZWFcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIVE1MIHRleHRhcmVhIGVsZW1lbnQgY29udHJvbCB3aXRoIGFuZ3VsYXIgZGF0YS1iaW5kaW5nLiBUaGUgZGF0YS1iaW5kaW5nIGFuZCB2YWxpZGF0aW9uXG4gKiBwcm9wZXJ0aWVzIG9mIHRoaXMgZWxlbWVudCBhcmUgZXhhY3RseSB0aGUgc2FtZSBhcyB0aG9zZSBvZiB0aGVcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXQgZWxlbWVudH0uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICogICAgbWlubGVuZ3RoLlxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxuICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mIGFueVxuICogICAgbGVuZ3RoLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZVxuICogICAgUmVnRXhwIHBhdHRlcm4gZXhwcmVzc2lvbi4gRXhwZWN0ZWQgdmFsdWUgaXMgYC9yZWdleHAvYCBmb3IgaW5saW5lIHBhdHRlcm5zIG9yIGByZWdleHBgIGZvclxuICogICAgcGF0dGVybnMgZGVmaW5lZCBhcyBzY29wZSBleHByZXNzaW9ucy5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IFtuZ1RyaW09dHJ1ZV0gSWYgc2V0IHRvIGZhbHNlIEFuZ3VsYXIgd2lsbCBub3QgYXV0b21hdGljYWxseSB0cmltIHRoZSBpbnB1dC5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgaW5wdXRcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIVE1MIGlucHV0IGVsZW1lbnQgY29udHJvbC4gV2hlbiB1c2VkIHRvZ2V0aGVyIHdpdGgge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfSwgaXQgcHJvdmlkZXMgZGF0YS1iaW5kaW5nLFxuICogaW5wdXQgc3RhdGUgY29udHJvbCwgYW5kIHZhbGlkYXRpb24uXG4gKiBJbnB1dCBjb250cm9sIGZvbGxvd3MgSFRNTDUgaW5wdXQgdHlwZXMgYW5kIHBvbHlmaWxscyB0aGUgSFRNTDUgdmFsaWRhdGlvbiBiZWhhdmlvciBmb3Igb2xkZXIgYnJvd3NlcnMuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBOb3QgZXZlcnkgZmVhdHVyZSBvZmZlcmVkIGlzIGF2YWlsYWJsZSBmb3IgYWxsIGlucHV0IHR5cGVzLlxuICogU3BlY2lmaWNhbGx5LCBkYXRhIGJpbmRpbmcgYW5kIGV2ZW50IGhhbmRsaW5nIHZpYSBgbmctbW9kZWxgIGlzIHVuc3VwcG9ydGVkIGZvciBgaW5wdXRbZmlsZV1gLlxuICogPC9kaXY+XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICogQHBhcmFtIHtib29sZWFuPX0gbmdSZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGlmIHNldCB0byB0cnVlXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICogICAgbWlubGVuZ3RoLlxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxuICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mIGFueVxuICogICAgbGVuZ3RoLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZVxuICogICAgUmVnRXhwIHBhdHRlcm4gZXhwcmVzc2lvbi4gRXhwZWN0ZWQgdmFsdWUgaXMgYC9yZWdleHAvYCBmb3IgaW5saW5lIHBhdHRlcm5zIG9yIGByZWdleHBgIGZvclxuICogICAgcGF0dGVybnMgZGVmaW5lZCBhcyBzY29wZSBleHByZXNzaW9ucy5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IFtuZ1RyaW09dHJ1ZV0gSWYgc2V0IHRvIGZhbHNlIEFuZ3VsYXIgd2lsbCBub3QgYXV0b21hdGljYWxseSB0cmltIHRoZSBpbnB1dC5cbiAqICAgIFRoaXMgcGFyYW1ldGVyIGlzIGlnbm9yZWQgZm9yIGlucHV0W3R5cGU9cGFzc3dvcmRdIGNvbnRyb2xzLCB3aGljaCB3aWxsIG5ldmVyIHRyaW0gdGhlXG4gKiAgICBpbnB1dC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJpbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJpbnB1dEV4YW1wbGVcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnaW5wdXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAkc2NvcGUudXNlciA9IHtuYW1lOiAnZ3Vlc3QnLCBsYXN0OiAndmlzaXRvcid9O1xuICAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gICAgICAgICAgIFVzZXIgbmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCIgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIiByZXF1aXJlZD5cbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0udXNlck5hbWUuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPjxicj5cbiAgICAgICAgICAgTGFzdCBuYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwibGFzdE5hbWVcIiBuZy1tb2RlbD1cInVzZXIubGFzdFwiXG4gICAgICAgICAgICAgbmctbWlubGVuZ3RoPVwiM1wiIG5nLW1heGxlbmd0aD1cIjEwXCI+XG4gICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmxhc3ROYW1lLiRlcnJvci5taW5sZW5ndGhcIj5cbiAgICAgICAgICAgICBUb28gc2hvcnQhPC9zcGFuPlxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5sYXN0TmFtZS4kZXJyb3IubWF4bGVuZ3RoXCI+XG4gICAgICAgICAgICAgVG9vIGxvbmchPC9zcGFuPjxicj5cbiAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgIDxocj5cbiAgICAgICAgIDx0dD51c2VyID0ge3t1c2VyfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLnVzZXJOYW1lLiR2YWxpZCA9IHt7bXlGb3JtLnVzZXJOYW1lLiR2YWxpZH19PC90dD48YnI+XG4gICAgICAgICA8dHQ+bXlGb3JtLnVzZXJOYW1lLiRlcnJvciA9IHt7bXlGb3JtLnVzZXJOYW1lLiRlcnJvcn19PC90dD48YnI+XG4gICAgICAgICA8dHQ+bXlGb3JtLmxhc3ROYW1lLiR2YWxpZCA9IHt7bXlGb3JtLmxhc3ROYW1lLiR2YWxpZH19PC90dD48YnI+XG4gICAgICAgICA8dHQ+bXlGb3JtLmxhc3ROYW1lLiRlcnJvciA9IHt7bXlGb3JtLmxhc3ROYW1lLiRlcnJvcn19PC90dD48YnI+XG4gICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnI+XG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxicj5cbiAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLm1pbmxlbmd0aCA9IHt7ISFteUZvcm0uJGVycm9yLm1pbmxlbmd0aH19PC90dD48YnI+XG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5tYXhsZW5ndGggPSB7eyEhbXlGb3JtLiRlcnJvci5tYXhsZW5ndGh9fTwvdHQ+PGJyPlxuICAgICAgIDwvZGl2PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICB2YXIgdXNlciA9IGVsZW1lbnQoYnkuZXhhY3RCaW5kaW5nKCd1c2VyJykpO1xuICAgICAgICB2YXIgdXNlck5hbWVWYWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLnVzZXJOYW1lLiR2YWxpZCcpKTtcbiAgICAgICAgdmFyIGxhc3ROYW1lVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5sYXN0TmFtZS4kdmFsaWQnKSk7XG4gICAgICAgIHZhciBsYXN0TmFtZUVycm9yID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0ubGFzdE5hbWUuJGVycm9yJykpO1xuICAgICAgICB2YXIgZm9ybVZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uJHZhbGlkJykpO1xuICAgICAgICB2YXIgdXNlck5hbWVJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIubmFtZScpKTtcbiAgICAgICAgdmFyIHVzZXJMYXN0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLmxhc3QnKSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCIsXCJsYXN0XCI6XCJ2aXNpdG9yXCJ9Jyk7XG4gICAgICAgICAgZXhwZWN0KHVzZXJOYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eSB3aGVuIHJlcXVpcmVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdXNlck5hbWVJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIHVzZXJOYW1lSW5wdXQuc2VuZEtleXMoJycpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcImxhc3RcIjpcInZpc2l0b3JcIn0nKTtcbiAgICAgICAgICBleHBlY3QodXNlck5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIHZhbGlkIGlmIGVtcHR5IHdoZW4gbWluIGxlbmd0aCBpcyBzZXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5zZW5kS2V5cygnJyk7XG5cbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIixcImxhc3RcIjpcIlwifScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbGVzcyB0aGFuIHJlcXVpcmVkIG1pbiBsZW5ndGgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5zZW5kS2V5cygneHgnKTtcblxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwifScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZUVycm9yLmdldFRleHQoKSkudG9Db250YWluKCdtaW5sZW5ndGgnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbG9uZ2VyIHRoYW4gbWF4IGxlbmd0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCdzb21lIHJpZGljdWxvdXNseSBsb25nIG5hbWUnKTtcblxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwifScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZUVycm9yLmdldFRleHQoKSkudG9Db250YWluKCdtYXhsZW5ndGgnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cbnZhciBpbnB1dERpcmVjdGl2ZSA9IFsnJGJyb3dzZXInLCAnJHNuaWZmZXInLCAnJGZpbHRlcicsICckcGFyc2UnLFxuICAgIGZ1bmN0aW9uKCRicm93c2VyLCAkc25pZmZlciwgJGZpbHRlciwgJHBhcnNlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXF1aXJlOiBbJz9uZ01vZGVsJ10sXG4gICAgbGluazoge1xuICAgICAgcHJlOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAgICAgICAgaWYgKGN0cmxzWzBdKSB7XG4gICAgICAgICAgKGlucHV0VHlwZVtsb3dlcmNhc2UoYXR0ci50eXBlKV0gfHwgaW5wdXRUeXBlLnRleHQpKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsc1swXSwgJHNuaWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRicm93c2VyLCAkZmlsdGVyLCAkcGFyc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufV07XG5cblxuXG52YXIgQ09OU1RBTlRfVkFMVUVfUkVHRVhQID0gL14odHJ1ZXxmYWxzZXxcXGQrKSQvO1xuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1ZhbHVlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBCaW5kcyB0aGUgZ2l2ZW4gZXhwcmVzc2lvbiB0byB0aGUgdmFsdWUgb2YgYDxvcHRpb24+YCBvciB7QGxpbmsgaW5wdXRbcmFkaW9dIGBpbnB1dFtyYWRpb11gfSxcbiAqIHNvIHRoYXQgd2hlbiB0aGUgZWxlbWVudCBpcyBzZWxlY3RlZCwgdGhlIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0gb2YgdGhhdCBlbGVtZW50IGlzIHNldCB0b1xuICogdGhlIGJvdW5kIHZhbHVlLlxuICpcbiAqIGBuZ1ZhbHVlYCBpcyB1c2VmdWwgd2hlbiBkeW5hbWljYWxseSBnZW5lcmF0aW5nIGxpc3RzIG9mIHJhZGlvIGJ1dHRvbnMgdXNpbmdcbiAqIHtAbGluayBuZ1JlcGVhdCBgbmdSZXBlYXRgfSwgYXMgc2hvd24gYmVsb3cuXG4gKlxuICogTGlrZXdpc2UsIGBuZ1ZhbHVlYCBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSBgPG9wdGlvbj5gIGVsZW1lbnRzIGZvclxuICogdGhlIHtAbGluayBzZWxlY3QgYHNlbGVjdGB9IGVsZW1lbnQuIEluIHRoYXQgY2FzZSBob3dldmVyLCBvbmx5IHN0cmluZ3MgYXJlIHN1cHBvcnRlZFxuICogZm9yIHRoZSBgdmFsdWUgYGF0dHJpYnV0ZSwgc28gdGhlIHJlc3VsdGluZyBgbmdNb2RlbGAgd2lsbCBhbHdheXMgYmUgYSBzdHJpbmcuXG4gKiBTdXBwb3J0IGZvciBgc2VsZWN0YCBtb2RlbHMgd2l0aCBub24tc3RyaW5nIHZhbHVlcyBpcyBhdmFpbGFibGUgdmlhIGBuZ09wdGlvbnNgLlxuICpcbiAqIEBlbGVtZW50IGlucHV0XG4gKiBAcGFyYW0ge3N0cmluZz19IG5nVmFsdWUgYW5ndWxhciBleHByZXNzaW9uLCB3aG9zZSB2YWx1ZSB3aWxsIGJlIGJvdW5kIHRvIHRoZSBgdmFsdWVgIGF0dHJpYnV0ZVxuICogICBvZiB0aGUgYGlucHV0YCBlbGVtZW50XG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmdWYWx1ZS1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ2YWx1ZUV4YW1wbGVcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgndmFsdWVFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAkc2NvcGUubmFtZXMgPSBbJ3BpenphJywgJ3VuaWNvcm5zJywgJ3JvYm90cyddO1xuICAgICAgICAgICAgICAkc2NvcGUubXkgPSB7IGZhdm9yaXRlOiAndW5pY29ybnMnIH07XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgIDxmb3JtIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgIDxoMj5XaGljaCBpcyB5b3VyIGZhdm9yaXRlPzwvaDI+XG4gICAgICAgICAgICA8bGFiZWwgbmctcmVwZWF0PVwibmFtZSBpbiBuYW1lc1wiIGZvcj1cInt7bmFtZX19XCI+XG4gICAgICAgICAgICAgIHt7bmFtZX19XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJteS5mYXZvcml0ZVwiXG4gICAgICAgICAgICAgICAgICAgICBuZy12YWx1ZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgaWQ9XCJ7e25hbWV9fVwiXG4gICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZmF2b3JpdGVcIj5cbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPGRpdj5Zb3UgY2hvc2Uge3tteS5mYXZvcml0ZX19PC9kaXY+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgdmFyIGZhdm9yaXRlID0gZWxlbWVudChieS5iaW5kaW5nKCdteS5mYXZvcml0ZScpKTtcblxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QoZmF2b3JpdGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3VuaWNvcm5zJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdCgnc2hvdWxkIGJpbmQgdGhlIHZhbHVlcyB0byB0aGUgaW5wdXRzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudC5hbGwoYnkubW9kZWwoJ215LmZhdm9yaXRlJykpLmdldCgwKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChmYXZvcml0ZS5nZXRUZXh0KCkpLnRvQ29udGFpbigncGl6emEnKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdWYWx1ZURpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcHJpb3JpdHk6IDEwMCxcbiAgICBjb21waWxlOiBmdW5jdGlvbih0cGwsIHRwbEF0dHIpIHtcbiAgICAgIGlmIChDT05TVEFOVF9WQUxVRV9SRUdFWFAudGVzdCh0cGxBdHRyLm5nVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuZ1ZhbHVlQ29uc3RhbnRMaW5rKHNjb3BlLCBlbG0sIGF0dHIpIHtcbiAgICAgICAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgc2NvcGUuJGV2YWwoYXR0ci5uZ1ZhbHVlKSk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdWYWx1ZUxpbmsoc2NvcGUsIGVsbSwgYXR0cikge1xuICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nVmFsdWUsIGZ1bmN0aW9uIHZhbHVlV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGF0dHIuJHNldCgndmFsdWUnLCB2YWx1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0JpbmRcbiAqIEByZXN0cmljdCBBQ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0JpbmRgIGF0dHJpYnV0ZSB0ZWxscyBBbmd1bGFyIHRvIHJlcGxhY2UgdGhlIHRleHQgY29udGVudCBvZiB0aGUgc3BlY2lmaWVkIEhUTUwgZWxlbWVudFxuICogd2l0aCB0aGUgdmFsdWUgb2YgYSBnaXZlbiBleHByZXNzaW9uLCBhbmQgdG8gdXBkYXRlIHRoZSB0ZXh0IGNvbnRlbnQgd2hlbiB0aGUgdmFsdWUgb2YgdGhhdFxuICogZXhwcmVzc2lvbiBjaGFuZ2VzLlxuICpcbiAqIFR5cGljYWxseSwgeW91IGRvbid0IHVzZSBgbmdCaW5kYCBkaXJlY3RseSwgYnV0IGluc3RlYWQgeW91IHVzZSB0aGUgZG91YmxlIGN1cmx5IG1hcmt1cCBsaWtlXG4gKiBge3sgZXhwcmVzc2lvbiB9fWAgd2hpY2ggaXMgc2ltaWxhciBidXQgbGVzcyB2ZXJib3NlLlxuICpcbiAqIEl0IGlzIHByZWZlcmFibGUgdG8gdXNlIGBuZ0JpbmRgIGluc3RlYWQgb2YgYHt7IGV4cHJlc3Npb24gfX1gIGlmIGEgdGVtcGxhdGUgaXMgbW9tZW50YXJpbHlcbiAqIGRpc3BsYXllZCBieSB0aGUgYnJvd3NlciBpbiBpdHMgcmF3IHN0YXRlIGJlZm9yZSBBbmd1bGFyIGNvbXBpbGVzIGl0LiBTaW5jZSBgbmdCaW5kYCBpcyBhblxuICogZWxlbWVudCBhdHRyaWJ1dGUsIGl0IG1ha2VzIHRoZSBiaW5kaW5ncyBpbnZpc2libGUgdG8gdGhlIHVzZXIgd2hpbGUgdGhlIHBhZ2UgaXMgbG9hZGluZy5cbiAqXG4gKiBBbiBhbHRlcm5hdGl2ZSBzb2x1dGlvbiB0byB0aGlzIHByb2JsZW0gd291bGQgYmUgdXNpbmcgdGhlXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xvYWsgbmdDbG9ha30gZGlyZWN0aXZlLlxuICpcbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCaW5kIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBFbnRlciBhIG5hbWUgaW4gdGhlIExpdmUgUHJldmlldyB0ZXh0IGJveDsgdGhlIGdyZWV0aW5nIGJlbG93IHRoZSB0ZXh0IGJveCBjaGFuZ2VzIGluc3RhbnRseS5cbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJ1doaXJsZWQnO1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIEVudGVyIG5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiPjxicj5cbiAgICAgICAgIEhlbGxvIDxzcGFuIG5nLWJpbmQ9XCJuYW1lXCI+PC9zcGFuPiFcbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1iaW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgbmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZScpKTtcblxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbmFtZScpKS5nZXRUZXh0KCkpLnRvQmUoJ1doaXJsZWQnKTtcbiAgICAgICAgIG5hbWVJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbmFtZUlucHV0LnNlbmRLZXlzKCd3b3JsZCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbmFtZScpKS5nZXRUZXh0KCkpLnRvQmUoJ3dvcmxkJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQmluZERpcmVjdGl2ZSA9IFsnJGNvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQUMnLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nQmluZENvbXBpbGUodGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyh0ZW1wbGF0ZUVsZW1lbnQpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBhdHRyLm5nQmluZCk7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0JpbmQsIGZ1bmN0aW9uIG5nQmluZFdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHZhbHVlID09PSB1bmRlZmluZWQgPyAnJyA6IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0JpbmRUZW1wbGF0ZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0JpbmRUZW1wbGF0ZWAgZGlyZWN0aXZlIHNwZWNpZmllcyB0aGF0IHRoZSBlbGVtZW50XG4gKiB0ZXh0IGNvbnRlbnQgc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGggdGhlIGludGVycG9sYXRpb24gb2YgdGhlIHRlbXBsYXRlXG4gKiBpbiB0aGUgYG5nQmluZFRlbXBsYXRlYCBhdHRyaWJ1dGUuXG4gKiBVbmxpa2UgYG5nQmluZGAsIHRoZSBgbmdCaW5kVGVtcGxhdGVgIGNhbiBjb250YWluIG11bHRpcGxlIGB7e2AgYH19YFxuICogZXhwcmVzc2lvbnMuIFRoaXMgZGlyZWN0aXZlIGlzIG5lZWRlZCBzaW5jZSBzb21lIEhUTUwgZWxlbWVudHNcbiAqIChzdWNoIGFzIFRJVExFIGFuZCBPUFRJT04pIGNhbm5vdCBjb250YWluIFNQQU4gZWxlbWVudHMuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdCaW5kVGVtcGxhdGUgdGVtcGxhdGUgb2YgZm9ybVxuICogICA8dHQ+e3s8L3R0PiA8dHQ+ZXhwcmVzc2lvbjwvdHQ+IDx0dD59fTwvdHQ+IHRvIGV2YWwuXG4gKlxuICogQGV4YW1wbGVcbiAqIFRyeSBpdCBoZXJlOiBlbnRlciB0ZXh0IGluIHRleHQgYm94IGFuZCB3YXRjaCB0aGUgZ3JlZXRpbmcgY2hhbmdlLlxuICAgPGV4YW1wbGUgbW9kdWxlPVwiYmluZEV4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2JpbmRFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnNhbHV0YXRpb24gPSAnSGVsbG8nO1xuICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJ1dvcmxkJztcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgIFNhbHV0YXRpb246IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwic2FsdXRhdGlvblwiPjxicj5cbiAgICAgICAgTmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJuYW1lXCI+PGJyPlxuICAgICAgICA8cHJlIG5nLWJpbmQtdGVtcGxhdGU9XCJ7e3NhbHV0YXRpb259fSB7e25hbWV9fSFcIj48L3ByZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1iaW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgc2FsdXRhdGlvbkVsZW0gPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3NhbHV0YXRpb24nKSk7XG4gICAgICAgICB2YXIgc2FsdXRhdGlvbklucHV0ID0gZWxlbWVudChieS5tb2RlbCgnc2FsdXRhdGlvbicpKTtcbiAgICAgICAgIHZhciBuYW1lSW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCduYW1lJykpO1xuXG4gICAgICAgICBleHBlY3Qoc2FsdXRhdGlvbkVsZW0uZ2V0VGV4dCgpKS50b0JlKCdIZWxsbyBXb3JsZCEnKTtcblxuICAgICAgICAgc2FsdXRhdGlvbklucHV0LmNsZWFyKCk7XG4gICAgICAgICBzYWx1dGF0aW9uSW5wdXQuc2VuZEtleXMoJ0dyZWV0aW5ncycpO1xuICAgICAgICAgbmFtZUlucHV0LmNsZWFyKCk7XG4gICAgICAgICBuYW1lSW5wdXQuc2VuZEtleXMoJ3VzZXInKTtcblxuICAgICAgICAgZXhwZWN0KHNhbHV0YXRpb25FbGVtLmdldFRleHQoKSkudG9CZSgnR3JlZXRpbmdzIHVzZXIhJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlID0gWyckaW50ZXJwb2xhdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkaW50ZXJwb2xhdGUsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kVGVtcGxhdGVDb21waWxlKHRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModGVtcGxhdGVFbGVtZW50KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0JpbmRUZW1wbGF0ZUxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUoZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBpbnRlcnBvbGF0ZUZuLmV4cHJlc3Npb25zKTtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRbMF07XG4gICAgICAgIGF0dHIuJG9ic2VydmUoJ25nQmluZFRlbXBsYXRlJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/ICcnIDogdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmluZEh0bWxcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEV2YWx1YXRlcyB0aGUgZXhwcmVzc2lvbiBhbmQgaW5zZXJ0cyB0aGUgcmVzdWx0aW5nIEhUTUwgaW50byB0aGUgZWxlbWVudCBpbiBhIHNlY3VyZSB3YXkuIEJ5IGRlZmF1bHQsXG4gKiB0aGUgcmVzdWx0aW5nIEhUTUwgY29udGVudCB3aWxsIGJlIHNhbml0aXplZCB1c2luZyB0aGUge0BsaW5rIG5nU2FuaXRpemUuJHNhbml0aXplICRzYW5pdGl6ZX0gc2VydmljZS5cbiAqIFRvIHV0aWxpemUgdGhpcyBmdW5jdGlvbmFsaXR5LCBlbnN1cmUgdGhhdCBgJHNhbml0aXplYCBpcyBhdmFpbGFibGUsIGZvciBleGFtcGxlLCBieSBpbmNsdWRpbmcge0BsaW5rXG4gKiBuZ1Nhbml0aXplfSBpbiB5b3VyIG1vZHVsZSdzIGRlcGVuZGVuY2llcyAobm90IGluIGNvcmUgQW5ndWxhcikuIEluIG9yZGVyIHRvIHVzZSB7QGxpbmsgbmdTYW5pdGl6ZX1cbiAqIGluIHlvdXIgbW9kdWxlJ3MgZGVwZW5kZW5jaWVzLCB5b3UgbmVlZCB0byBpbmNsdWRlIFwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiIGluIHlvdXIgYXBwbGljYXRpb24uXG4gKlxuICogWW91IG1heSBhbHNvIGJ5cGFzcyBzYW5pdGl6YXRpb24gZm9yIHZhbHVlcyB5b3Uga25vdyBhcmUgc2FmZS4gVG8gZG8gc28sIGJpbmQgdG9cbiAqIGFuIGV4cGxpY2l0bHkgdHJ1c3RlZCB2YWx1ZSB2aWEge0BsaW5rIG5nLiRzY2UjdHJ1c3RBc0h0bWwgJHNjZS50cnVzdEFzSHRtbH0uICBTZWUgdGhlIGV4YW1wbGVcbiAqIHVuZGVyIHtAbGluayBuZy4kc2NlI3Nob3ctbWUtYW4tZXhhbXBsZS11c2luZy1zY2UtIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqXG4gKiBOb3RlOiBJZiBhIGAkc2FuaXRpemVgIHNlcnZpY2UgaXMgdW5hdmFpbGFibGUgYW5kIHRoZSBib3VuZCB2YWx1ZSBpc24ndCBleHBsaWNpdGx5IHRydXN0ZWQsIHlvdVxuICogd2lsbCBoYXZlIGFuIGV4Y2VwdGlvbiAoaW5zdGVhZCBvZiBhbiBleHBsb2l0LilcbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCaW5kSHRtbCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJiaW5kSHRtbEV4YW1wbGVcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgIDxwIG5nLWJpbmQtaHRtbD1cIm15SFRNTFwiPjwvcD5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnYmluZEh0bWxFeGFtcGxlJywgWyduZ1Nhbml0aXplJ10pXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAkc2NvcGUubXlIVE1MID1cbiAgICAgICAgICAgICAgJ0kgYW0gYW4gPGNvZGU+SFRNTDwvY29kZT5zdHJpbmcgd2l0aCAnICtcbiAgICAgICAgICAgICAgJzxhIGhyZWY9XCIjXCI+bGlua3MhPC9hPiBhbmQgb3RoZXIgPGVtPnN0dWZmPC9lbT4nO1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctYmluZC1odG1sJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdteUhUTUwnKSkuZ2V0VGV4dCgpKS50b0JlKFxuICAgICAgICAgICAgICdJIGFtIGFuIEhUTUxzdHJpbmcgd2l0aCBsaW5rcyEgYW5kIG90aGVyIHN0dWZmJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQmluZEh0bWxEaXJlY3RpdmUgPSBbJyRzY2UnLCAnJHBhcnNlJywgJyRjb21waWxlJywgZnVuY3Rpb24oJHNjZSwgJHBhcnNlLCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kSHRtbENvbXBpbGUodEVsZW1lbnQsIHRBdHRycykge1xuICAgICAgdmFyIG5nQmluZEh0bWxHZXR0ZXIgPSAkcGFyc2UodEF0dHJzLm5nQmluZEh0bWwpO1xuICAgICAgdmFyIG5nQmluZEh0bWxXYXRjaCA9ICRwYXJzZSh0QXR0cnMubmdCaW5kSHRtbCwgZnVuY3Rpb24gZ2V0U3RyaW5nVmFsdWUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICh2YWx1ZSB8fCAnJykudG9TdHJpbmcoKTtcbiAgICAgIH0pO1xuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModEVsZW1lbnQpO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdCaW5kSHRtbExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBhdHRyLm5nQmluZEh0bWwpO1xuXG4gICAgICAgIHNjb3BlLiR3YXRjaChuZ0JpbmRIdG1sV2F0Y2gsIGZ1bmN0aW9uIG5nQmluZEh0bWxXYXRjaEFjdGlvbigpIHtcbiAgICAgICAgICAvLyB3ZSByZS1ldmFsdWF0ZSB0aGUgZXhwciBiZWNhdXNlIHdlIHdhbnQgYSBUcnVzdGVkVmFsdWVIb2xkZXJUeXBlXG4gICAgICAgICAgLy8gZm9yICRzY2UsIG5vdCBhIHN0cmluZ1xuICAgICAgICAgIGVsZW1lbnQuaHRtbCgkc2NlLmdldFRydXN0ZWRIdG1sKG5nQmluZEh0bWxHZXR0ZXIoc2NvcGUpKSB8fCAnJyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NoYW5nZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRXZhbHVhdGUgdGhlIGdpdmVuIGV4cHJlc3Npb24gd2hlbiB0aGUgdXNlciBjaGFuZ2VzIHRoZSBpbnB1dC5cbiAqIFRoZSBleHByZXNzaW9uIGlzIGV2YWx1YXRlZCBpbW1lZGlhdGVseSwgdW5saWtlIHRoZSBKYXZhU2NyaXB0IG9uY2hhbmdlIGV2ZW50XG4gKiB3aGljaCBvbmx5IHRyaWdnZXJzIGF0IHRoZSBlbmQgb2YgYSBjaGFuZ2UgKHVzdWFsbHksIHdoZW4gdGhlIHVzZXIgbGVhdmVzIHRoZVxuICogZm9ybSBlbGVtZW50IG9yIHByZXNzZXMgdGhlIHJldHVybiBrZXkpLlxuICpcbiAqIFRoZSBgbmdDaGFuZ2VgIGV4cHJlc3Npb24gaXMgb25seSBldmFsdWF0ZWQgd2hlbiBhIGNoYW5nZSBpbiB0aGUgaW5wdXQgdmFsdWUgY2F1c2VzXG4gKiBhIG5ldyB2YWx1ZSB0byBiZSBjb21taXR0ZWQgdG8gdGhlIG1vZGVsLlxuICpcbiAqIEl0IHdpbGwgbm90IGJlIGV2YWx1YXRlZDpcbiAqICogaWYgdGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIGAkcGFyc2Vyc2AgdHJhbnNmb3JtYXRpb24gcGlwZWxpbmUgaGFzIG5vdCBjaGFuZ2VkXG4gKiAqIGlmIHRoZSBpbnB1dCBoYXMgY29udGludWVkIHRvIGJlIGludmFsaWQgc2luY2UgdGhlIG1vZGVsIHdpbGwgc3RheSBgbnVsbGBcbiAqICogaWYgdGhlIG1vZGVsIGlzIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseSBhbmQgbm90IGJ5IGEgY2hhbmdlIHRvIHRoZSBpbnB1dCB2YWx1ZVxuICpcbiAqXG4gKiBOb3RlLCB0aGlzIGRpcmVjdGl2ZSByZXF1aXJlcyBgbmdNb2RlbGAgdG8gYmUgcHJlc2VudC5cbiAqXG4gKiBAZWxlbWVudCBpbnB1dFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NoYW5nZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uIGNoYW5nZVxuICogaW4gaW5wdXQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0NoYW5nZS1kaXJlY3RpdmVcIiBtb2R1bGU9XCJjaGFuZ2VFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjaGFuZ2VFeGFtcGxlJywgW10pXG4gKiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICAgJHNjb3BlLmNvdW50ZXIgPSAwO1xuICogICAgICAgICAgICRzY29wZS5jaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAgICAgICRzY29wZS5jb3VudGVyKys7XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjb25maXJtZWRcIiBuZy1jaGFuZ2U9XCJjaGFuZ2UoKVwiIGlkPVwibmctY2hhbmdlLWV4YW1wbGUxXCIgLz5cbiAqICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNvbmZpcm1lZFwiIGlkPVwibmctY2hhbmdlLWV4YW1wbGUyXCIgLz5cbiAqICAgICAgIDxsYWJlbCBmb3I9XCJuZy1jaGFuZ2UtZXhhbXBsZTJcIj5Db25maXJtZWQ8L2xhYmVsPjxiciAvPlxuICogICAgICAgPHR0PmRlYnVnID0ge3tjb25maXJtZWR9fTwvdHQ+PGJyLz5cbiAqICAgICAgIDx0dD5jb3VudGVyID0ge3tjb3VudGVyfX08L3R0Pjxici8+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICAgIHZhciBjb3VudGVyID0gZWxlbWVudChieS5iaW5kaW5nKCdjb3VudGVyJykpO1xuICogICAgIHZhciBkZWJ1ZyA9IGVsZW1lbnQoYnkuYmluZGluZygnY29uZmlybWVkJykpO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIGV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGlmIGNoYW5naW5nIGZyb20gdmlldycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzAnKTtcbiAqXG4gKiAgICAgICBlbGVtZW50KGJ5LmlkKCduZy1jaGFuZ2UtZXhhbXBsZTEnKSkuY2xpY2soKTtcbiAqXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMScpO1xuICogICAgICAgZXhwZWN0KGRlYnVnLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gKiAgICAgfSk7XG4gKlxuICogICAgIGl0KCdzaG91bGQgbm90IGV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGlmIGNoYW5naW5nIGZyb20gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGVsZW1lbnQoYnkuaWQoJ25nLWNoYW5nZS1leGFtcGxlMicpKS5jbGljaygpO1xuXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMCcpO1xuICogICAgICAgZXhwZWN0KGRlYnVnLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQ2hhbmdlRGlyZWN0aXZlID0gdmFsdWVGbih7XG4gIHJlc3RyaWN0OiAnQScsXG4gIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcbiAgICBjdHJsLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKSB7XG4gICAgICBzY29wZS4kZXZhbChhdHRyLm5nQ2hhbmdlKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGNsYXNzRGlyZWN0aXZlKG5hbWUsIHNlbGVjdG9yKSB7XG4gIG5hbWUgPSAnbmdDbGFzcycgKyBuYW1lO1xuICByZXR1cm4gWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQUMnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgdmFyIG9sZFZhbDtcblxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0cltuYW1lXSwgbmdDbGFzc1dhdGNoQWN0aW9uLCB0cnVlKTtcblxuICAgICAgICBhdHRyLiRvYnNlcnZlKCdjbGFzcycsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgbmdDbGFzc1dhdGNoQWN0aW9uKHNjb3BlLiRldmFsKGF0dHJbbmFtZV0pKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBpZiAobmFtZSAhPT0gJ25nQ2xhc3MnKSB7XG4gICAgICAgICAgc2NvcGUuJHdhdGNoKCckaW5kZXgnLCBmdW5jdGlvbigkaW5kZXgsIG9sZCRpbmRleCkge1xuICAgICAgICAgICAgLy8ganNoaW50IGJpdHdpc2U6IGZhbHNlXG4gICAgICAgICAgICB2YXIgbW9kID0gJGluZGV4ICYgMTtcbiAgICAgICAgICAgIGlmIChtb2QgIT09IChvbGQkaW5kZXggJiAxKSkge1xuICAgICAgICAgICAgICB2YXIgY2xhc3NlcyA9IGFycmF5Q2xhc3NlcyhzY29wZS4kZXZhbChhdHRyW25hbWVdKSk7XG4gICAgICAgICAgICAgIG1vZCA9PT0gc2VsZWN0b3IgP1xuICAgICAgICAgICAgICAgIGFkZENsYXNzZXMoY2xhc3NlcykgOlxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzZXMoY2xhc3Nlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGRDbGFzc2VzKGNsYXNzZXMpIHtcbiAgICAgICAgICB2YXIgbmV3Q2xhc3NlcyA9IGRpZ2VzdENsYXNzQ291bnRzKGNsYXNzZXMsIDEpO1xuICAgICAgICAgIGF0dHIuJGFkZENsYXNzKG5ld0NsYXNzZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgICAgICAgdmFyIG5ld0NsYXNzZXMgPSBkaWdlc3RDbGFzc0NvdW50cyhjbGFzc2VzLCAtMSk7XG4gICAgICAgICAgYXR0ci4kcmVtb3ZlQ2xhc3MobmV3Q2xhc3Nlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkaWdlc3RDbGFzc0NvdW50cyhjbGFzc2VzLCBjb3VudCkge1xuICAgICAgICAgIHZhciBjbGFzc0NvdW50cyA9IGVsZW1lbnQuZGF0YSgnJGNsYXNzQ291bnRzJykgfHwge307XG4gICAgICAgICAgdmFyIGNsYXNzZXNUb1VwZGF0ZSA9IFtdO1xuICAgICAgICAgIGZvckVhY2goY2xhc3NlcywgZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICBpZiAoY291bnQgPiAwIHx8IGNsYXNzQ291bnRzW2NsYXNzTmFtZV0pIHtcbiAgICAgICAgICAgICAgY2xhc3NDb3VudHNbY2xhc3NOYW1lXSA9IChjbGFzc0NvdW50c1tjbGFzc05hbWVdIHx8IDApICsgY291bnQ7XG4gICAgICAgICAgICAgIGlmIChjbGFzc0NvdW50c1tjbGFzc05hbWVdID09PSArKGNvdW50ID4gMCkpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzVG9VcGRhdGUucHVzaChjbGFzc05hbWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZWxlbWVudC5kYXRhKCckY2xhc3NDb3VudHMnLCBjbGFzc0NvdW50cyk7XG4gICAgICAgICAgcmV0dXJuIGNsYXNzZXNUb1VwZGF0ZS5qb2luKCcgJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVDbGFzc2VzKG9sZENsYXNzZXMsIG5ld0NsYXNzZXMpIHtcbiAgICAgICAgICB2YXIgdG9BZGQgPSBhcnJheURpZmZlcmVuY2UobmV3Q2xhc3Nlcywgb2xkQ2xhc3Nlcyk7XG4gICAgICAgICAgdmFyIHRvUmVtb3ZlID0gYXJyYXlEaWZmZXJlbmNlKG9sZENsYXNzZXMsIG5ld0NsYXNzZXMpO1xuICAgICAgICAgIHRvQWRkID0gZGlnZXN0Q2xhc3NDb3VudHModG9BZGQsIDEpO1xuICAgICAgICAgIHRvUmVtb3ZlID0gZGlnZXN0Q2xhc3NDb3VudHModG9SZW1vdmUsIC0xKTtcbiAgICAgICAgICBpZiAodG9BZGQgJiYgdG9BZGQubGVuZ3RoKSB7XG4gICAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LCB0b0FkZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0b1JlbW92ZSAmJiB0b1JlbW92ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsIHRvUmVtb3ZlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBuZ0NsYXNzV2F0Y2hBY3Rpb24obmV3VmFsKSB7XG4gICAgICAgICAgaWYgKHNlbGVjdG9yID09PSB0cnVlIHx8IHNjb3BlLiRpbmRleCAlIDIgPT09IHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgbmV3Q2xhc3NlcyA9IGFycmF5Q2xhc3NlcyhuZXdWYWwgfHwgW10pO1xuICAgICAgICAgICAgaWYgKCFvbGRWYWwpIHtcbiAgICAgICAgICAgICAgYWRkQ2xhc3NlcyhuZXdDbGFzc2VzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWVxdWFscyhuZXdWYWwsb2xkVmFsKSkge1xuICAgICAgICAgICAgICB2YXIgb2xkQ2xhc3NlcyA9IGFycmF5Q2xhc3NlcyhvbGRWYWwpO1xuICAgICAgICAgICAgICB1cGRhdGVDbGFzc2VzKG9sZENsYXNzZXMsIG5ld0NsYXNzZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBvbGRWYWwgPSBzaGFsbG93Q29weShuZXdWYWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFycmF5RGlmZmVyZW5jZSh0b2tlbnMxLCB0b2tlbnMyKSB7XG4gICAgICB2YXIgdmFsdWVzID0gW107XG5cbiAgICAgIG91dGVyOlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMxLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHRva2VuczFbaV07XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdG9rZW5zMi5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGlmICh0b2tlbiA9PSB0b2tlbnMyW2pdKSBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXMucHVzaCh0b2tlbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFycmF5Q2xhc3NlcyhjbGFzc1ZhbCkge1xuICAgICAgaWYgKGlzQXJyYXkoY2xhc3NWYWwpKSB7XG4gICAgICAgIHJldHVybiBjbGFzc1ZhbDtcbiAgICAgIH0gZWxzZSBpZiAoaXNTdHJpbmcoY2xhc3NWYWwpKSB7XG4gICAgICAgIHJldHVybiBjbGFzc1ZhbC5zcGxpdCgnICcpO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChjbGFzc1ZhbCkpIHtcbiAgICAgICAgdmFyIGNsYXNzZXMgPSBbXTtcbiAgICAgICAgZm9yRWFjaChjbGFzc1ZhbCwgZnVuY3Rpb24odiwgaykge1xuICAgICAgICAgIGlmICh2KSB7XG4gICAgICAgICAgICBjbGFzc2VzID0gY2xhc3Nlcy5jb25jYXQoay5zcGxpdCgnICcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY2xhc3NlcztcbiAgICAgIH1cbiAgICAgIHJldHVybiBjbGFzc1ZhbDtcbiAgICB9XG4gIH1dO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2xhc3NcbiAqIEByZXN0cmljdCBBQ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0NsYXNzYCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBkeW5hbWljYWxseSBzZXQgQ1NTIGNsYXNzZXMgb24gYW4gSFRNTCBlbGVtZW50IGJ5IGRhdGFiaW5kaW5nXG4gKiBhbiBleHByZXNzaW9uIHRoYXQgcmVwcmVzZW50cyBhbGwgY2xhc3NlcyB0byBiZSBhZGRlZC5cbiAqXG4gKiBUaGUgZGlyZWN0aXZlIG9wZXJhdGVzIGluIHRocmVlIGRpZmZlcmVudCB3YXlzLCBkZXBlbmRpbmcgb24gd2hpY2ggb2YgdGhyZWUgdHlwZXMgdGhlIGV4cHJlc3Npb25cbiAqIGV2YWx1YXRlcyB0bzpcbiAqXG4gKiAxLiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZSBzdHJpbmcgc2hvdWxkIGJlIG9uZSBvciBtb3JlIHNwYWNlLWRlbGltaXRlZCBjbGFzc1xuICogbmFtZXMuXG4gKlxuICogMi4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGFuIGFycmF5LCBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IHNob3VsZCBiZSBhIHN0cmluZyB0aGF0IGlzXG4gKiBvbmUgb3IgbW9yZSBzcGFjZS1kZWxpbWl0ZWQgY2xhc3MgbmFtZXMuXG4gKlxuICogMy4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGFuIG9iamVjdCwgdGhlbiBmb3IgZWFjaCBrZXktdmFsdWUgcGFpciBvZiB0aGVcbiAqIG9iamVjdCB3aXRoIGEgdHJ1dGh5IHZhbHVlIHRoZSBjb3JyZXNwb25kaW5nIGtleSBpcyB1c2VkIGFzIGEgY2xhc3MgbmFtZS5cbiAqXG4gKiBUaGUgZGlyZWN0aXZlIHdvbid0IGFkZCBkdXBsaWNhdGUgY2xhc3NlcyBpZiBhIHBhcnRpY3VsYXIgY2xhc3Mgd2FzIGFscmVhZHkgc2V0LlxuICpcbiAqIFdoZW4gdGhlIGV4cHJlc3Npb24gY2hhbmdlcywgdGhlIHByZXZpb3VzbHkgYWRkZWQgY2xhc3NlcyBhcmUgcmVtb3ZlZCBhbmQgb25seSB0aGVuIHRoZVxuICogbmV3IGNsYXNzZXMgYXJlIGFkZGVkLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiAqKmFkZCoqIC0gaGFwcGVucyBqdXN0IGJlZm9yZSB0aGUgY2xhc3MgaXMgYXBwbGllZCB0byB0aGUgZWxlbWVudHNcbiAqXG4gKiAqKnJlbW92ZSoqIC0gaGFwcGVucyBqdXN0IGJlZm9yZSB0aGUgY2xhc3MgaXMgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3Mge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC4gVGhlIHJlc3VsdFxuICogICBvZiB0aGUgZXZhbHVhdGlvbiBjYW4gYmUgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHNwYWNlIGRlbGltaXRlZCBjbGFzc1xuICogICBuYW1lcywgYW4gYXJyYXksIG9yIGEgbWFwIG9mIGNsYXNzIG5hbWVzIHRvIGJvb2xlYW4gdmFsdWVzLiBJbiB0aGUgY2FzZSBvZiBhIG1hcCwgdGhlXG4gKiAgIG5hbWVzIG9mIHRoZSBwcm9wZXJ0aWVzIHdob3NlIHZhbHVlcyBhcmUgdHJ1dGh5IHdpbGwgYmUgYWRkZWQgYXMgY3NzIGNsYXNzZXMgdG8gdGhlXG4gKiAgIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGUgRXhhbXBsZSB0aGF0IGRlbW9uc3RyYXRlcyBiYXNpYyBiaW5kaW5ncyB2aWEgbmdDbGFzcyBkaXJlY3RpdmUuXG4gICA8ZXhhbXBsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8cCBuZy1jbGFzcz1cIntzdHJpa2U6IGRlbGV0ZWQsIGJvbGQ6IGltcG9ydGFudCwgcmVkOiBlcnJvcn1cIj5NYXAgU3ludGF4IEV4YW1wbGU8L3A+XG4gICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiZGVsZXRlZFwiPiBkZWxldGVkIChhcHBseSBcInN0cmlrZVwiIGNsYXNzKTxicj5cbiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJpbXBvcnRhbnRcIj4gaW1wb3J0YW50IChhcHBseSBcImJvbGRcIiBjbGFzcyk8YnI+XG4gICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiZXJyb3JcIj4gZXJyb3IgKGFwcGx5IFwicmVkXCIgY2xhc3MpXG4gICAgICAgPGhyPlxuICAgICAgIDxwIG5nLWNsYXNzPVwic3R5bGVcIj5Vc2luZyBTdHJpbmcgU3ludGF4PC9wPlxuICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwic3R5bGVcIiBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQgc3RyaWtlIHJlZFwiPlxuICAgICAgIDxocj5cbiAgICAgICA8cCBuZy1jbGFzcz1cIltzdHlsZTEsIHN0eWxlMiwgc3R5bGUzXVwiPlVzaW5nIEFycmF5IFN5bnRheDwvcD5cbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTFcIiBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIj48YnI+XG4gICAgICAgPGlucHV0IG5nLW1vZGVsPVwic3R5bGUyXCIgcGxhY2Vob2xkZXI9XCJUeXBlOiBib2xkLCBzdHJpa2Ugb3IgcmVkXCI+PGJyPlxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlM1wiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLnN0cmlrZSB7XG4gICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgICAgICB9XG4gICAgICAgLmJvbGQge1xuICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICB9XG4gICAgICAgLnJlZCB7XG4gICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICB2YXIgcHMgPSBlbGVtZW50LmFsbChieS5jc3MoJ3AnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHRoZSBjbGFzcycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9ib2xkLyk7XG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9yZWQvKTtcblxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnaW1wb3J0YW50JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL2JvbGQvKTtcblxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnZXJyb3InKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChwcy5maXJzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvcmVkLyk7XG4gICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHN0cmluZyBleGFtcGxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMuZ2V0KDEpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZScpKS5jbGVhcigpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUnKSkuc2VuZEtleXMoJ3JlZCcpO1xuICAgICAgICAgZXhwZWN0KHBzLmdldCgxKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJ3JlZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ2FycmF5IGV4YW1wbGUgc2hvdWxkIGhhdmUgMyBjbGFzc2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMubGFzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTEnKSkuc2VuZEtleXMoJ2JvbGQnKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3N0eWxlMicpKS5zZW5kS2V5cygnc3RyaWtlJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTMnKSkuc2VuZEtleXMoJ3JlZCcpO1xuICAgICAgICAgZXhwZWN0KHBzLmxhc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJ2JvbGQgc3RyaWtlIHJlZCcpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG5cbiAgICMjIEFuaW1hdGlvbnNcblxuICAgVGhlIGV4YW1wbGUgYmVsb3cgZGVtb25zdHJhdGVzIGhvdyB0byBwZXJmb3JtIGFuaW1hdGlvbnMgdXNpbmcgbmdDbGFzcy5cblxuICAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgaWQ9XCJzZXRidG5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJzZXRcIiBuZy1jbGljaz1cIm15VmFyPSdteS1jbGFzcydcIj5cbiAgICAgIDxpbnB1dCBpZD1cImNsZWFyYnRuXCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiY2xlYXJcIiBuZy1jbGljaz1cIm15VmFyPScnXCI+XG4gICAgICA8YnI+XG4gICAgICA8c3BhbiBjbGFzcz1cImJhc2UtY2xhc3NcIiBuZy1jbGFzcz1cIm15VmFyXCI+U2FtcGxlIFRleHQ8L3NwYW4+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIC5iYXNlLWNsYXNzIHtcbiAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xuICAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xuICAgICAgIH1cblxuICAgICAgIC5iYXNlLWNsYXNzLm15LWNsYXNzIHtcbiAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICBmb250LXNpemU6M2VtO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGFzcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcblxuICAgICAgICAgZWxlbWVudChieS5pZCgnc2V0YnRuJykpLmNsaWNrKCk7XG5cbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmJhc2UtY2xhc3MnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcblxuICAgICAgICAgZWxlbWVudChieS5pZCgnY2xlYXJidG4nKSkuY2xpY2soKTtcblxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuXG5cbiAgICMjIG5nQ2xhc3MgYW5kIHByZS1leGlzdGluZyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnNcbiAgIFRoZSBuZ0NsYXNzIGRpcmVjdGl2ZSBzdGlsbCBzdXBwb3J0cyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnMgZXZlbiBpZiB0aGV5IGRvIG5vdCBmb2xsb3cgdGhlIG5nQW5pbWF0ZSBDU1MgbmFtaW5nIHN0cnVjdHVyZS5cbiAgIFVwb24gYW5pbWF0aW9uIG5nQW5pbWF0ZSB3aWxsIGFwcGx5IHN1cHBsZW1lbnRhcnkgQ1NTIGNsYXNzZXMgdG8gdHJhY2sgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgYW4gYW5pbWF0aW9uLCBidXQgdGhpcyB3aWxsIG5vdCBoaW5kZXJcbiAgIGFueSBwcmUtZXhpc3RpbmcgQ1NTIHRyYW5zaXRpb25zIGFscmVhZHkgb24gdGhlIGVsZW1lbnQuIFRvIGdldCBhbiBpZGVhIG9mIHdoYXQgaGFwcGVucyBkdXJpbmcgYSBjbGFzcy1iYXNlZCBhbmltYXRpb24sIGJlIHN1cmVcbiAgIHRvIHZpZXcgdGhlIHN0ZXAgYnkgc3RlcCBkZXRhaWxzIG9mIHtAbGluayBuZy4kYW5pbWF0ZSNhZGRDbGFzcyAkYW5pbWF0ZS5hZGRDbGFzc30gYW5kXG4gICB7QGxpbmsgbmcuJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgJGFuaW1hdGUucmVtb3ZlQ2xhc3N9LlxuICovXG52YXIgbmdDbGFzc0RpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCcnLCB0cnVlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsYXNzT2RkXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdDbGFzc09kZGAgYW5kIGBuZ0NsYXNzRXZlbmAgZGlyZWN0aXZlcyB3b3JrIGV4YWN0bHkgYXNcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxuICogY29uanVuY3Rpb24gd2l0aCBgbmdSZXBlYXRgIGFuZCB0YWtlIGVmZmVjdCBvbmx5IG9uIG9kZCAoZXZlbikgcm93cy5cbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NsYXNzT2RkIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWwuIFRoZSByZXN1bHRcbiAqICAgb2YgdGhlIGV2YWx1YXRpb24gY2FuIGJlIGEgc3RyaW5nIHJlcHJlc2VudGluZyBzcGFjZSBkZWxpbWl0ZWQgY2xhc3MgbmFtZXMgb3IgYW4gYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8b2wgbmctaW5pdD1cIm5hbWVzPVsnSm9obicsICdNYXJ5JywgJ0NhdGUnLCAnU3V6J11cIj5cbiAgICAgICAgICA8bGkgbmctcmVwZWF0PVwibmFtZSBpbiBuYW1lc1wiPlxuICAgICAgICAgICA8c3BhbiBuZy1jbGFzcy1vZGQ9XCInb2RkJ1wiIG5nLWNsYXNzLWV2ZW49XCInZXZlbidcIj5cbiAgICAgICAgICAgICB7e25hbWV9fVxuICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC9vbD5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLm9kZCB7XG4gICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgIH1cbiAgICAgICAuZXZlbiB7XG4gICAgICAgICBjb2xvcjogYmx1ZTtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xhc3Mtb2RkIGFuZCBuZy1jbGFzcy1ldmVuJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygwKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvb2RkLyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygxKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvZXZlbi8pO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0NsYXNzT2RkRGlyZWN0aXZlID0gY2xhc3NEaXJlY3RpdmUoJ09kZCcsIDApO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2xhc3NFdmVuXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdDbGFzc09kZGAgYW5kIGBuZ0NsYXNzRXZlbmAgZGlyZWN0aXZlcyB3b3JrIGV4YWN0bHkgYXNcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxuICogY29uanVuY3Rpb24gd2l0aCBgbmdSZXBlYXRgIGFuZCB0YWtlIGVmZmVjdCBvbmx5IG9uIG9kZCAoZXZlbikgcm93cy5cbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NsYXNzRXZlbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLiBUaGVcbiAqICAgcmVzdWx0IG9mIHRoZSBldmFsdWF0aW9uIGNhbiBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgc3BhY2UgZGVsaW1pdGVkIGNsYXNzIG5hbWVzIG9yIGFuIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPG9sIG5nLWluaXQ9XCJuYW1lcz1bJ0pvaG4nLCAnTWFyeScsICdDYXRlJywgJ1N1eiddXCI+XG4gICAgICAgICAgPGxpIG5nLXJlcGVhdD1cIm5hbWUgaW4gbmFtZXNcIj5cbiAgICAgICAgICAgPHNwYW4gbmctY2xhc3Mtb2RkPVwiJ29kZCdcIiBuZy1jbGFzcy1ldmVuPVwiJ2V2ZW4nXCI+XG4gICAgICAgICAgICAge3tuYW1lfX0gJm5ic3A7ICZuYnNwOyAmbmJzcDtcbiAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvb2w+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIC5vZGQge1xuICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICB9XG4gICAgICAgLmV2ZW4ge1xuICAgICAgICAgY29sb3I6IGJsdWU7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWNsYXNzLW9kZCBhbmQgbmctY2xhc3MtZXZlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkucmVwZWF0ZXIoJ25hbWUgaW4gbmFtZXMnKS5yb3coMCkuY29sdW1uKCduYW1lJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXG4gICAgICAgICAgIHRvTWF0Y2goL29kZC8pO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkucmVwZWF0ZXIoJ25hbWUgaW4gbmFtZXMnKS5yb3coMSkuY29sdW1uKCduYW1lJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXG4gICAgICAgICAgIHRvTWF0Y2goL2V2ZW4vKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdDbGFzc0V2ZW5EaXJlY3RpdmUgPSBjbGFzc0RpcmVjdGl2ZSgnRXZlbicsIDEpO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2xvYWtcbiAqIEByZXN0cmljdCBBQ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0Nsb2FrYCBkaXJlY3RpdmUgaXMgdXNlZCB0byBwcmV2ZW50IHRoZSBBbmd1bGFyIGh0bWwgdGVtcGxhdGUgZnJvbSBiZWluZyBicmllZmx5XG4gKiBkaXNwbGF5ZWQgYnkgdGhlIGJyb3dzZXIgaW4gaXRzIHJhdyAodW5jb21waWxlZCkgZm9ybSB3aGlsZSB5b3VyIGFwcGxpY2F0aW9uIGlzIGxvYWRpbmcuIFVzZSB0aGlzXG4gKiBkaXJlY3RpdmUgdG8gYXZvaWQgdGhlIHVuZGVzaXJhYmxlIGZsaWNrZXIgZWZmZWN0IGNhdXNlZCBieSB0aGUgaHRtbCB0ZW1wbGF0ZSBkaXNwbGF5LlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgY2FuIGJlIGFwcGxpZWQgdG8gdGhlIGA8Ym9keT5gIGVsZW1lbnQsIGJ1dCB0aGUgcHJlZmVycmVkIHVzYWdlIGlzIHRvIGFwcGx5XG4gKiBtdWx0aXBsZSBgbmdDbG9ha2AgZGlyZWN0aXZlcyB0byBzbWFsbCBwb3J0aW9ucyBvZiB0aGUgcGFnZSB0byBwZXJtaXQgcHJvZ3Jlc3NpdmUgcmVuZGVyaW5nXG4gKiBvZiB0aGUgYnJvd3NlciB2aWV3LlxuICpcbiAqIGBuZ0Nsb2FrYCB3b3JrcyBpbiBjb29wZXJhdGlvbiB3aXRoIHRoZSBmb2xsb3dpbmcgY3NzIHJ1bGUgZW1iZWRkZWQgd2l0aGluIGBhbmd1bGFyLmpzYCBhbmRcbiAqIGBhbmd1bGFyLm1pbi5qc2AuXG4gKiBGb3IgQ1NQIG1vZGUgcGxlYXNlIGFkZCBgYW5ndWxhci1jc3AuY3NzYCB0byB5b3VyIGh0bWwgZmlsZSAoc2VlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDc3AgbmdDc3B9KS5cbiAqXG4gKiBgYGBjc3NcbiAqIFtuZ1xcOmNsb2FrXSwgW25nLWNsb2FrXSwgW2RhdGEtbmctY2xvYWtdLCBbeC1uZy1jbG9ha10sIC5uZy1jbG9haywgLngtbmctY2xvYWsge1xuICogICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBXaGVuIHRoaXMgY3NzIHJ1bGUgaXMgbG9hZGVkIGJ5IHRoZSBicm93c2VyLCBhbGwgaHRtbCBlbGVtZW50cyAoaW5jbHVkaW5nIHRoZWlyIGNoaWxkcmVuKSB0aGF0XG4gKiBhcmUgdGFnZ2VkIHdpdGggdGhlIGBuZ0Nsb2FrYCBkaXJlY3RpdmUgYXJlIGhpZGRlbi4gV2hlbiBBbmd1bGFyIGVuY291bnRlcnMgdGhpcyBkaXJlY3RpdmVcbiAqIGR1cmluZyB0aGUgY29tcGlsYXRpb24gb2YgdGhlIHRlbXBsYXRlIGl0IGRlbGV0ZXMgdGhlIGBuZ0Nsb2FrYCBlbGVtZW50IGF0dHJpYnV0ZSwgbWFraW5nXG4gKiB0aGUgY29tcGlsZWQgZWxlbWVudCB2aXNpYmxlLlxuICpcbiAqIEZvciB0aGUgYmVzdCByZXN1bHQsIHRoZSBgYW5ndWxhci5qc2Agc2NyaXB0IG11c3QgYmUgbG9hZGVkIGluIHRoZSBoZWFkIHNlY3Rpb24gb2YgdGhlIGh0bWxcbiAqIGRvY3VtZW50OyBhbHRlcm5hdGl2ZWx5LCB0aGUgY3NzIHJ1bGUgYWJvdmUgbXVzdCBiZSBpbmNsdWRlZCBpbiB0aGUgZXh0ZXJuYWwgc3R5bGVzaGVldCBvZiB0aGVcbiAqIGFwcGxpY2F0aW9uLlxuICpcbiAqIExlZ2FjeSBicm93c2VycywgbGlrZSBJRTcsIGRvIG5vdCBwcm92aWRlIGF0dHJpYnV0ZSBzZWxlY3RvciBzdXBwb3J0IChhZGRlZCBpbiBDU1MgMi4xKSBzbyB0aGV5XG4gKiBjYW5ub3QgbWF0Y2ggdGhlIGBbbmdcXDpjbG9ha11gIHNlbGVjdG9yLiBUbyB3b3JrIGFyb3VuZCB0aGlzIGxpbWl0YXRpb24sIHlvdSBtdXN0IGFkZCB0aGUgY3NzXG4gKiBjbGFzcyBgbmctY2xvYWtgIGluIGFkZGl0aW9uIHRvIHRoZSBgbmdDbG9ha2AgZGlyZWN0aXZlIGFzIHNob3duIGluIHRoZSBleGFtcGxlIGJlbG93LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGRpdiBpZD1cInRlbXBsYXRlMVwiIG5nLWNsb2FrPnt7ICdoZWxsbycgfX08L2Rpdj5cbiAgICAgICAgPGRpdiBpZD1cInRlbXBsYXRlMlwiIG5nLWNsb2FrIGNsYXNzPVwibmctY2xvYWtcIj57eyAnaGVsbG8gSUU3JyB9fTwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIHJlbW92ZSB0aGUgdGVtcGxhdGUgZGlyZWN0aXZlIGFuZCBjc3MgY2xhc3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdCgkKCcjdGVtcGxhdGUxJykuZ2V0QXR0cmlidXRlKCduZy1jbG9haycpKS5cbiAgICAgICAgICAgdG9CZU51bGwoKTtcbiAgICAgICAgIGV4cGVjdCgkKCcjdGVtcGxhdGUyJykuZ2V0QXR0cmlidXRlKCduZy1jbG9haycpKS5cbiAgICAgICAgICAgdG9CZU51bGwoKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICpcbiAqL1xudmFyIG5nQ2xvYWtEaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XG4gIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICBhdHRyLiRzZXQoJ25nQ2xvYWsnLCB1bmRlZmluZWQpO1xuICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ25nLWNsb2FrJyk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ29udHJvbGxlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZSBhdHRhY2hlcyBhIGNvbnRyb2xsZXIgY2xhc3MgdG8gdGhlIHZpZXcuIFRoaXMgaXMgYSBrZXkgYXNwZWN0IG9mIGhvdyBhbmd1bGFyXG4gKiBzdXBwb3J0cyB0aGUgcHJpbmNpcGxlcyBiZWhpbmQgdGhlIE1vZGVsLVZpZXctQ29udHJvbGxlciBkZXNpZ24gcGF0dGVybi5cbiAqXG4gKiBNVkMgY29tcG9uZW50cyBpbiBhbmd1bGFyOlxuICpcbiAqICogTW9kZWwg4oCUIE1vZGVscyBhcmUgdGhlIHByb3BlcnRpZXMgb2YgYSBzY29wZTsgc2NvcGVzIGFyZSBhdHRhY2hlZCB0byB0aGUgRE9NIHdoZXJlIHNjb3BlIHByb3BlcnRpZXNcbiAqICAgYXJlIGFjY2Vzc2VkIHRocm91Z2ggYmluZGluZ3MuXG4gKiAqIFZpZXcg4oCUIFRoZSB0ZW1wbGF0ZSAoSFRNTCB3aXRoIGRhdGEgYmluZGluZ3MpIHRoYXQgaXMgcmVuZGVyZWQgaW50byB0aGUgVmlldy5cbiAqICogQ29udHJvbGxlciDigJQgVGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZSBzcGVjaWZpZXMgYSBDb250cm9sbGVyIGNsYXNzOyB0aGUgY2xhc3MgY29udGFpbnMgYnVzaW5lc3NcbiAqICAgbG9naWMgYmVoaW5kIHRoZSBhcHBsaWNhdGlvbiB0byBkZWNvcmF0ZSB0aGUgc2NvcGUgd2l0aCBmdW5jdGlvbnMgYW5kIHZhbHVlc1xuICpcbiAqIE5vdGUgdGhhdCB5b3UgY2FuIGFsc28gYXR0YWNoIGNvbnRyb2xsZXJzIHRvIHRoZSBET00gYnkgZGVjbGFyaW5nIGl0IGluIGEgcm91dGUgZGVmaW5pdGlvblxuICogdmlhIHRoZSB7QGxpbmsgbmdSb3V0ZS4kcm91dGUgJHJvdXRlfSBzZXJ2aWNlLiBBIGNvbW1vbiBtaXN0YWtlIGlzIHRvIGRlY2xhcmUgdGhlIGNvbnRyb2xsZXJcbiAqIGFnYWluIHVzaW5nIGBuZy1jb250cm9sbGVyYCBpbiB0aGUgdGVtcGxhdGUgaXRzZWxmLiAgVGhpcyB3aWxsIGNhdXNlIHRoZSBjb250cm9sbGVyIHRvIGJlIGF0dGFjaGVkXG4gKiBhbmQgZXhlY3V0ZWQgdHdpY2UuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAc2NvcGVcbiAqIEBwcmlvcml0eSA1MDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDb250cm9sbGVyIE5hbWUgb2YgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiByZWdpc3RlcmVkIHdpdGggdGhlIGN1cnJlbnRcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyICRjb250cm9sbGVyUHJvdmlkZXJ9IG9yIGFuIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259XG4gKiB0aGF0IG9uIHRoZSBjdXJyZW50IHNjb3BlIGV2YWx1YXRlcyB0byBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICpcbiAqIFRoZSBjb250cm9sbGVyIGluc3RhbmNlIGNhbiBiZSBwdWJsaXNoZWQgaW50byBhIHNjb3BlIHByb3BlcnR5IGJ5IHNwZWNpZnlpbmdcbiAqIGBuZy1jb250cm9sbGVyPVwiYXMgcHJvcGVydHlOYW1lXCJgLlxuICpcbiAqIElmIHRoZSBjdXJyZW50IGAkY29udHJvbGxlclByb3ZpZGVyYCBpcyBjb25maWd1cmVkIHRvIHVzZSBnbG9iYWxzICh2aWFcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyI2FsbG93R2xvYmFscyBgJGNvbnRyb2xsZXJQcm92aWRlci5hbGxvd0dsb2JhbHMoKWAgfSksIHRoaXMgbWF5XG4gKiBhbHNvIGJlIHRoZSBuYW1lIG9mIGEgZ2xvYmFsbHkgYWNjZXNzaWJsZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiAobm90IHJlY29tbWVuZGVkKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSBpcyBhIHNpbXBsZSBmb3JtIGZvciBlZGl0aW5nIHVzZXIgY29udGFjdCBpbmZvcm1hdGlvbi4gQWRkaW5nLCByZW1vdmluZywgY2xlYXJpbmcsIGFuZFxuICogZ3JlZXRpbmcgYXJlIG1ldGhvZHMgZGVjbGFyZWQgb24gdGhlIGNvbnRyb2xsZXIgKHNlZSBzb3VyY2UgdGFiKS4gVGhlc2UgbWV0aG9kcyBjYW5cbiAqIGVhc2lseSBiZSBjYWxsZWQgZnJvbSB0aGUgYW5ndWxhciBtYXJrdXAuIEFueSBjaGFuZ2VzIHRvIHRoZSBkYXRhIGFyZSBhdXRvbWF0aWNhbGx5IHJlZmxlY3RlZFxuICogaW4gdGhlIFZpZXcgd2l0aG91dCB0aGUgbmVlZCBmb3IgYSBtYW51YWwgdXBkYXRlLlxuICpcbiAqIFR3byBkaWZmZXJlbnQgZGVjbGFyYXRpb24gc3R5bGVzIGFyZSBpbmNsdWRlZCBiZWxvdzpcbiAqXG4gKiAqIG9uZSBiaW5kcyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGRpcmVjdGx5IG9udG8gdGhlIGNvbnRyb2xsZXIgdXNpbmcgYHRoaXNgOlxuICogYG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIxIGFzIHNldHRpbmdzXCJgXG4gKiAqIG9uZSBpbmplY3RzIGAkc2NvcGVgIGludG8gdGhlIGNvbnRyb2xsZXI6XG4gKiBgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjJcImBcbiAqXG4gKiBUaGUgc2Vjb25kIG9wdGlvbiBpcyBtb3JlIGNvbW1vbiBpbiB0aGUgQW5ndWxhciBjb21tdW5pdHksIGFuZCBpcyBnZW5lcmFsbHkgdXNlZCBpbiBib2lsZXJwbGF0ZXNcbiAqIGFuZCBpbiB0aGlzIGd1aWRlLiBIb3dldmVyLCB0aGVyZSBhcmUgYWR2YW50YWdlcyB0byBiaW5kaW5nIHByb3BlcnRpZXMgZGlyZWN0bHkgdG8gdGhlIGNvbnRyb2xsZXJcbiAqIGFuZCBhdm9pZGluZyBzY29wZS5cbiAqXG4gKiAqIFVzaW5nIGBjb250cm9sbGVyIGFzYCBtYWtlcyBpdCBvYnZpb3VzIHdoaWNoIGNvbnRyb2xsZXIgeW91IGFyZSBhY2Nlc3NpbmcgaW4gdGhlIHRlbXBsYXRlIHdoZW5cbiAqIG11bHRpcGxlIGNvbnRyb2xsZXJzIGFwcGx5IHRvIGFuIGVsZW1lbnQuXG4gKiAqIElmIHlvdSBhcmUgd3JpdGluZyB5b3VyIGNvbnRyb2xsZXJzIGFzIGNsYXNzZXMgeW91IGhhdmUgZWFzaWVyIGFjY2VzcyB0byB0aGUgcHJvcGVydGllcyBhbmRcbiAqIG1ldGhvZHMsIHdoaWNoIHdpbGwgYXBwZWFyIG9uIHRoZSBzY29wZSwgZnJvbSBpbnNpZGUgdGhlIGNvbnRyb2xsZXIgY29kZS5cbiAqICogU2luY2UgdGhlcmUgaXMgYWx3YXlzIGEgYC5gIGluIHRoZSBiaW5kaW5ncywgeW91IGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgcHJvdG90eXBhbFxuICogaW5oZXJpdGFuY2UgbWFza2luZyBwcmltaXRpdmVzLlxuICpcbiAqIFRoaXMgZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdGhlIGBjb250cm9sbGVyIGFzYCBzeW50YXguXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cIm5nQ29udHJvbGxlckFzXCIgbW9kdWxlPVwiY29udHJvbGxlckFzRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgPGRpdiBpZD1cImN0cmwtYXMtZXhtcGxcIiBuZy1jb250cm9sbGVyPVwiU2V0dGluZ3NDb250cm9sbGVyMSBhcyBzZXR0aW5nc1wiPlxuICogICAgICBOYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInNldHRpbmdzLm5hbWVcIi8+XG4gKiAgICAgIFsgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwic2V0dGluZ3MuZ3JlZXQoKVwiPmdyZWV0PC9hPiBdPGJyLz5cbiAqICAgICAgQ29udGFjdDpcbiAqICAgICAgPHVsPlxuICogICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzXCI+XG4gKiAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwiY29udGFjdC50eXBlXCI+XG4gKiAgICAgICAgICAgICA8b3B0aW9uPnBob25lPC9vcHRpb24+XG4gKiAgICAgICAgICAgICA8b3B0aW9uPmVtYWlsPC9vcHRpb24+XG4gKiAgICAgICAgICA8L3NlbGVjdD5cbiAqICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY29udGFjdC52YWx1ZVwiLz5cbiAqICAgICAgICAgIFsgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwic2V0dGluZ3MuY2xlYXJDb250YWN0KGNvbnRhY3QpXCI+Y2xlYXI8L2E+XG4gKiAgICAgICAgICB8IDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInNldHRpbmdzLnJlbW92ZUNvbnRhY3QoY29udGFjdClcIj5YPC9hPiBdXG4gKiAgICAgICAgPC9saT5cbiAqICAgICAgICA8bGk+WyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJzZXR0aW5ncy5hZGRDb250YWN0KClcIj5hZGQ8L2E+IF08L2xpPlxuICogICAgIDwvdWw+XG4gKiAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICBhbmd1bGFyLm1vZHVsZSgnY29udHJvbGxlckFzRXhhbXBsZScsIFtdKVxuICogICAgICAuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyMScsIFNldHRpbmdzQ29udHJvbGxlcjEpO1xuICpcbiAqICAgIGZ1bmN0aW9uIFNldHRpbmdzQ29udHJvbGxlcjEoKSB7XG4gKiAgICAgIHRoaXMubmFtZSA9IFwiSm9obiBTbWl0aFwiO1xuICogICAgICB0aGlzLmNvbnRhY3RzID0gW1xuICogICAgICAgIHt0eXBlOiAncGhvbmUnLCB2YWx1ZTogJzQwOCA1NTUgMTIxMid9LFxuICogICAgICAgIHt0eXBlOiAnZW1haWwnLCB2YWx1ZTogJ2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnfSBdO1xuICogICAgfVxuICpcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmdyZWV0ID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgIGFsZXJ0KHRoaXMubmFtZSk7XG4gKiAgICB9O1xuICpcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmFkZENvbnRhY3QgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgdGhpcy5jb250YWN0cy5wdXNoKHt0eXBlOiAnZW1haWwnLCB2YWx1ZTogJ3lvdXJuYW1lQGV4YW1wbGUub3JnJ30pO1xuICogICAgfTtcbiAqXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5yZW1vdmVDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdFRvUmVtb3ZlKSB7XG4gKiAgICAgdmFyIGluZGV4ID0gdGhpcy5jb250YWN0cy5pbmRleE9mKGNvbnRhY3RUb1JlbW92ZSk7XG4gKiAgICAgIHRoaXMuY29udGFjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAqICAgIH07XG4gKlxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUuY2xlYXJDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkge1xuICogICAgICBjb250YWN0LnR5cGUgPSAncGhvbmUnO1xuICogICAgICBjb250YWN0LnZhbHVlID0gJyc7XG4gKiAgICB9O1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICBpdCgnc2hvdWxkIGNoZWNrIGNvbnRyb2xsZXIgYXMnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50KGJ5LmlkKCdjdHJsLWFzLWV4bXBsJykpO1xuICogICAgICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkubW9kZWwoJ3NldHRpbmdzLm5hbWUnKSlcbiAqICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCdKb2huIFNtaXRoJyk7XG4gKlxuICogICAgICAgdmFyIGZpcnN0UmVwZWF0ID1cbiAqICAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygwKSk7XG4gKiAgICAgICB2YXIgc2Vjb25kUmVwZWF0ID1cbiAqICAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygxKSk7XG4gKlxuICogICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgIC50b0JlKCc0MDggNTU1IDEyMTInKTtcbiAqXG4gKiAgICAgICBleHBlY3Qoc2Vjb25kUmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgIC50b0JlKCdqb2huLnNtaXRoQGV4YW1wbGUub3JnJyk7XG4gKlxuICogICAgICAgZmlyc3RSZXBlYXQuZWxlbWVudChieS5saW5rVGV4dCgnY2xlYXInKSkuY2xpY2soKTtcbiAqXG4gKiAgICAgICBleHBlY3QoZmlyc3RSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAgLnRvQmUoJycpO1xuICpcbiAqICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LmxpbmtUZXh0KCdhZGQnKSkuY2xpY2soKTtcbiAqXG4gKiAgICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHMnKS5yb3coMikpXG4gKiAgICAgICAgICAgLmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSlcbiAqICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgIC50b0JlKCd5b3VybmFtZUBleGFtcGxlLm9yZycpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB0aGUgXCJhdHRhY2ggdG8gYCRzY29wZWBcIiBzdHlsZSBvZiBjb250cm9sbGVyLlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0NvbnRyb2xsZXJcIiBtb2R1bGU9XCJjb250cm9sbGVyRXhhbXBsZVwiPlxuICogIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgIDxkaXYgaWQ9XCJjdHJsLWV4bXBsXCIgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjJcIj5cbiAqICAgICBOYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm5hbWVcIi8+XG4gKiAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJncmVldCgpXCI+Z3JlZXQ8L2E+IF08YnIvPlxuICogICAgIENvbnRhY3Q6XG4gKiAgICAgPHVsPlxuICogICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAqICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cImNvbnRhY3QudHlwZVwiPlxuICogICAgICAgICAgICA8b3B0aW9uPnBob25lPC9vcHRpb24+XG4gKiAgICAgICAgICAgIDxvcHRpb24+ZW1haWw8L29wdGlvbj5cbiAqICAgICAgICAgPC9zZWxlY3Q+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY29udGFjdC52YWx1ZVwiLz5cbiAqICAgICAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJjbGVhckNvbnRhY3QoY29udGFjdClcIj5jbGVhcjwvYT5cbiAqICAgICAgICAgfCA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJyZW1vdmVDb250YWN0KGNvbnRhY3QpXCI+WDwvYT4gXVxuICogICAgICAgPC9saT5cbiAqICAgICAgIDxsaT5bIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cImFkZENvbnRhY3QoKVwiPmFkZDwvYT4gXTwvbGk+XG4gKiAgICA8L3VsPlxuICogICA8L2Rpdj5cbiAqICA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICBhbmd1bGFyLm1vZHVsZSgnY29udHJvbGxlckV4YW1wbGUnLCBbXSlcbiAqICAgICAuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyMicsIFsnJHNjb3BlJywgU2V0dGluZ3NDb250cm9sbGVyMl0pO1xuICpcbiAqICAgZnVuY3Rpb24gU2V0dGluZ3NDb250cm9sbGVyMigkc2NvcGUpIHtcbiAqICAgICAkc2NvcGUubmFtZSA9IFwiSm9obiBTbWl0aFwiO1xuICogICAgICRzY29wZS5jb250YWN0cyA9IFtcbiAqICAgICAgIHt0eXBlOidwaG9uZScsIHZhbHVlOic0MDggNTU1IDEyMTInfSxcbiAqICAgICAgIHt0eXBlOidlbWFpbCcsIHZhbHVlOidqb2huLnNtaXRoQGV4YW1wbGUub3JnJ30gXTtcbiAqXG4gKiAgICAgJHNjb3BlLmdyZWV0ID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICBhbGVydCgkc2NvcGUubmFtZSk7XG4gKiAgICAgfTtcbiAqXG4gKiAgICAgJHNjb3BlLmFkZENvbnRhY3QgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICRzY29wZS5jb250YWN0cy5wdXNoKHt0eXBlOidlbWFpbCcsIHZhbHVlOid5b3VybmFtZUBleGFtcGxlLm9yZyd9KTtcbiAqICAgICB9O1xuICpcbiAqICAgICAkc2NvcGUucmVtb3ZlQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3RUb1JlbW92ZSkge1xuICogICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLmNvbnRhY3RzLmluZGV4T2YoY29udGFjdFRvUmVtb3ZlKTtcbiAqICAgICAgICRzY29wZS5jb250YWN0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICogICAgIH07XG4gKlxuICogICAgICRzY29wZS5jbGVhckNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XG4gKiAgICAgICBjb250YWN0LnR5cGUgPSAncGhvbmUnO1xuICogICAgICAgY29udGFjdC52YWx1ZSA9ICcnO1xuICogICAgIH07XG4gKiAgIH1cbiAqICA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICAgaXQoJ3Nob3VsZCBjaGVjayBjb250cm9sbGVyJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50KGJ5LmlkKCdjdHJsLWV4bXBsJykpO1xuICpcbiAqICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5Lm1vZGVsKCduYW1lJykpXG4gKiAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCdKb2huIFNtaXRoJyk7XG4gKlxuICogICAgICB2YXIgZmlyc3RSZXBlYXQgPVxuICogICAgICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gY29udGFjdHMnKS5yb3coMCkpO1xuICogICAgICB2YXIgc2Vjb25kUmVwZWF0ID1cbiAqICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDEpKTtcbiAqXG4gKiAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgIC50b0JlKCc0MDggNTU1IDEyMTInKTtcbiAqICAgICAgZXhwZWN0KHNlY29uZFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgIC50b0JlKCdqb2huLnNtaXRoQGV4YW1wbGUub3JnJyk7XG4gKlxuICogICAgICBmaXJzdFJlcGVhdC5lbGVtZW50KGJ5LmxpbmtUZXh0KCdjbGVhcicpKS5jbGljaygpO1xuICpcbiAqICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgLnRvQmUoJycpO1xuICpcbiAqICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkubGlua1RleHQoJ2FkZCcpKS5jbGljaygpO1xuICpcbiAqICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDIpKVxuICogICAgICAgICAgLmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSlcbiAqICAgICAgICAgIC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAudG9CZSgneW91cm5hbWVAZXhhbXBsZS5vcmcnKTtcbiAqICAgIH0pO1xuICogIDwvZmlsZT5cbiAqPC9leGFtcGxlPlxuXG4gKi9cbnZhciBuZ0NvbnRyb2xsZXJEaXJlY3RpdmUgPSBbZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBzY29wZTogdHJ1ZSxcbiAgICBjb250cm9sbGVyOiAnQCcsXG4gICAgcHJpb3JpdHk6IDUwMFxuICB9O1xufV07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDc3BcbiAqXG4gKiBAZWxlbWVudCBodG1sXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVuYWJsZXMgW0NTUCAoQ29udGVudCBTZWN1cml0eSBQb2xpY3kpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9TZWN1cml0eS9DU1ApIHN1cHBvcnQuXG4gKlxuICogVGhpcyBpcyBuZWNlc3Nhcnkgd2hlbiBkZXZlbG9waW5nIHRoaW5ncyBsaWtlIEdvb2dsZSBDaHJvbWUgRXh0ZW5zaW9ucyBvciBVbml2ZXJzYWwgV2luZG93cyBBcHBzLlxuICpcbiAqIENTUCBmb3JiaWRzIGFwcHMgdG8gdXNlIGBldmFsYCBvciBgRnVuY3Rpb24oc3RyaW5nKWAgZ2VuZXJhdGVkIGZ1bmN0aW9ucyAoYW1vbmcgb3RoZXIgdGhpbmdzKS5cbiAqIEZvciBBbmd1bGFyIHRvIGJlIENTUCBjb21wYXRpYmxlIHRoZXJlIGFyZSBvbmx5IHR3byB0aGluZ3MgdGhhdCB3ZSBuZWVkIHRvIGRvIGRpZmZlcmVudGx5OlxuICpcbiAqIC0gZG9uJ3QgdXNlIGBGdW5jdGlvbmAgY29uc3RydWN0b3IgdG8gZ2VuZXJhdGUgb3B0aW1pemVkIHZhbHVlIGdldHRlcnNcbiAqIC0gZG9uJ3QgaW5qZWN0IGN1c3RvbSBzdHlsZXNoZWV0IGludG8gdGhlIGRvY3VtZW50XG4gKlxuICogQW5ndWxhckpTIHVzZXMgYEZ1bmN0aW9uKHN0cmluZylgIGdlbmVyYXRlZCBmdW5jdGlvbnMgYXMgYSBzcGVlZCBvcHRpbWl6YXRpb24uIEFwcGx5aW5nIHRoZSBgbmdDc3BgXG4gKiBkaXJlY3RpdmUgd2lsbCBjYXVzZSBBbmd1bGFyIHRvIHVzZSBDU1AgY29tcGF0aWJpbGl0eSBtb2RlLiBXaGVuIHRoaXMgbW9kZSBpcyBvbiBBbmd1bGFySlMgd2lsbFxuICogZXZhbHVhdGUgYWxsIGV4cHJlc3Npb25zIHVwIHRvIDMwJSBzbG93ZXIgdGhhbiBpbiBub24tQ1NQIG1vZGUsIGJ1dCBubyBzZWN1cml0eSB2aW9sYXRpb25zIHdpbGxcbiAqIGJlIHJhaXNlZC5cbiAqXG4gKiBDU1AgZm9yYmlkcyBKYXZhU2NyaXB0IHRvIGlubGluZSBzdHlsZXNoZWV0IHJ1bGVzLiBJbiBub24gQ1NQIG1vZGUgQW5ndWxhciBhdXRvbWF0aWNhbGx5XG4gKiBpbmNsdWRlcyBzb21lIENTUyBydWxlcyAoZS5nLiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xvYWsgbmdDbG9ha30pLlxuICogVG8gbWFrZSB0aG9zZSBkaXJlY3RpdmVzIHdvcmsgaW4gQ1NQIG1vZGUsIGluY2x1ZGUgdGhlIGBhbmd1bGFyLWNzcC5jc3NgIG1hbnVhbGx5LlxuICpcbiAqIEFuZ3VsYXIgdHJpZXMgdG8gYXV0b2RldGVjdCBpZiBDU1AgaXMgYWN0aXZlIGFuZCBhdXRvbWF0aWNhbGx5IHR1cm4gb24gdGhlIENTUC1zYWZlIG1vZGUuIFRoaXNcbiAqIGF1dG9kZXRlY3Rpb24gaG93ZXZlciB0cmlnZ2VycyBhIENTUCBlcnJvciB0byBiZSBsb2dnZWQgaW4gdGhlIGNvbnNvbGU6XG4gKlxuICogYGBgXG4gKiBSZWZ1c2VkIHRvIGV2YWx1YXRlIGEgc3RyaW5nIGFzIEphdmFTY3JpcHQgYmVjYXVzZSAndW5zYWZlLWV2YWwnIGlzIG5vdCBhbiBhbGxvd2VkIHNvdXJjZSBvZlxuICogc2NyaXB0IGluIHRoZSBmb2xsb3dpbmcgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZGlyZWN0aXZlOiBcImRlZmF1bHQtc3JjICdzZWxmJ1wiLiBOb3RlIHRoYXRcbiAqICdzY3JpcHQtc3JjJyB3YXMgbm90IGV4cGxpY2l0bHkgc2V0LCBzbyAnZGVmYXVsdC1zcmMnIGlzIHVzZWQgYXMgYSBmYWxsYmFjay5cbiAqIGBgYFxuICpcbiAqIFRoaXMgZXJyb3IgaXMgaGFybWxlc3MgYnV0IGFubm95aW5nLiBUbyBwcmV2ZW50IHRoZSBlcnJvciBmcm9tIHNob3dpbmcgdXAsIHB1dCB0aGUgYG5nQ3NwYFxuICogZGlyZWN0aXZlIG9uIHRoZSByb290IGVsZW1lbnQgb2YgdGhlIGFwcGxpY2F0aW9uIG9yIG9uIHRoZSBgYW5ndWxhci5qc2Agc2NyaXB0IHRhZywgd2hpY2hldmVyXG4gKiBhcHBlYXJzIGZpcnN0IGluIHRoZSBodG1sIGRvY3VtZW50LlxuICpcbiAqICpOb3RlOiBUaGlzIGRpcmVjdGl2ZSBpcyBvbmx5IGF2YWlsYWJsZSBpbiB0aGUgYG5nLWNzcGAgYW5kIGBkYXRhLW5nLWNzcGAgYXR0cmlidXRlIGZvcm0uKlxuICpcbiAqIEBleGFtcGxlXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHRvIGFwcGx5IHRoZSBgbmdDc3BgIGRpcmVjdGl2ZSB0byB0aGUgYGh0bWxgIHRhZy5cbiAgIGBgYGh0bWxcbiAgICAgPCFkb2N0eXBlIGh0bWw+XG4gICAgIDxodG1sIG5nLWFwcCBuZy1jc3A+XG4gICAgIC4uLlxuICAgICAuLi5cbiAgICAgPC9odG1sPlxuICAgYGBgXG4gICogQGV4YW1wbGVcbiAgICAgIC8vIE5vdGU6IHRoZSBzdWZmaXggYC5jc3BgIGluIHRoZSBleGFtcGxlIG5hbWUgdHJpZ2dlcnNcbiAgICAgIC8vIGNzcCBtb2RlIGluIG91ciBodHRwIHNlcnZlciFcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJleGFtcGxlLmNzcFwiIG1vZHVsZT1cImNzcEV4YW1wbGVcIiBuZy1jc3A9XCJ0cnVlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTWFpbkNvbnRyb2xsZXIgYXMgY3RybFwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImN0cmwuaW5jKClcIiBpZD1cImluY1wiPkluY3JlbWVudDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8c3BhbiBpZD1cImNvdW50ZXJcIj5cbiAgICAgICAgICAgICAgICB7e2N0cmwuY291bnRlcn19XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY3RybC5ldmlsKClcIiBpZD1cImV2aWxcIj5FdmlsPC9idXR0b24+XG4gICAgICAgICAgICAgIDxzcGFuIGlkPVwiZXZpbEVycm9yXCI+XG4gICAgICAgICAgICAgICAge3tjdHJsLmV2aWxFcnJvcn19XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2NzcEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5jID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXIrKztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZXZpbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgLy8ganNoaW50IGV2aWw6dHJ1ZVxuICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZXZhbCgnMSsyJyk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZpbEVycm9yID0gZS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgICB2YXIgdXRpbCwgd2ViZHJpdmVyO1xuXG4gICAgICAgICAgdmFyIGluY0J0biA9IGVsZW1lbnQoYnkuaWQoJ2luYycpKTtcbiAgICAgICAgICB2YXIgY291bnRlciA9IGVsZW1lbnQoYnkuaWQoJ2NvdW50ZXInKSk7XG4gICAgICAgICAgdmFyIGV2aWxCdG4gPSBlbGVtZW50KGJ5LmlkKCdldmlsJykpO1xuICAgICAgICAgIHZhciBldmlsRXJyb3IgPSBlbGVtZW50KGJ5LmlkKCdldmlsRXJyb3InKSk7XG5cbiAgICAgICAgICBmdW5jdGlvbiBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpIHtcbiAgICAgICAgICAgIHJldHVybiBicm93c2VyLm1hbmFnZSgpLmxvZ3MoKS5nZXQoJ2Jyb3dzZXInKS50aGVuKGZ1bmN0aW9uKGJyb3dzZXJMb2cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXJMb2cuZmlsdGVyKGZ1bmN0aW9uKGxvZ0VudHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvZ0VudHJ5LmxldmVsLnZhbHVlID4gd2ViZHJpdmVyLmxvZ2dpbmcuTGV2ZWwuV0FSTklORy52YWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiBjbGVhckVycm9ycygpIHtcbiAgICAgICAgICAgIGdldEFuZENsZWFyU2V2ZXJlRXJyb3JzKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gZXhwZWN0Tm9FcnJvcnMoKSB7XG4gICAgICAgICAgICBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpLnRoZW4oZnVuY3Rpb24oZmlsdGVyZWRMb2cpIHtcbiAgICAgICAgICAgICAgZXhwZWN0KGZpbHRlcmVkTG9nLmxlbmd0aCkudG9FcXVhbCgwKTtcbiAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkTG9nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdicm93c2VyIGNvbnNvbGUgZXJyb3JzOiAnICsgdXRpbC5pbnNwZWN0KGZpbHRlcmVkTG9nKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIGV4cGVjdEVycm9yKHJlZ2V4KSB7XG4gICAgICAgICAgICBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpLnRoZW4oZnVuY3Rpb24oZmlsdGVyZWRMb2cpIHtcbiAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgIGZpbHRlcmVkTG9nLmZvckVhY2goZnVuY3Rpb24obG9nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxvZy5tZXNzYWdlLm1hdGNoKHJlZ2V4KSkge1xuICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V4cGVjdGVkIGFuIGVycm9yIHRoYXQgbWF0Y2hlcyAnICsgcmVnZXgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcbiAgICAgICAgICAgIHdlYmRyaXZlciA9IHJlcXVpcmUoJ3Byb3RyYWN0b3Ivbm9kZV9tb2R1bGVzL3NlbGVuaXVtLXdlYmRyaXZlcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gRm9yIG5vdywgd2Ugb25seSB0ZXN0IG9uIENocm9tZSxcbiAgICAgICAgICAvLyBhcyBTYWZhcmkgZG9lcyBub3QgbG9hZCB0aGUgcGFnZSB3aXRoIFByb3RyYWN0b3IncyBpbmplY3RlZCBzY3JpcHRzLFxuICAgICAgICAgIC8vIGFuZCBGaXJlZm94IHdlYmRyaXZlciBhbHdheXMgZGlzYWJsZXMgY29udGVudCBzZWN1cml0eSBwb2xpY3kgKCM2MzU4KVxuICAgICAgICAgIGlmIChicm93c2VyLnBhcmFtcy5icm93c2VyICE9PSAnY2hyb21lJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGl0KCdzaG91bGQgbm90IHJlcG9ydCBlcnJvcnMgd2hlbiB0aGUgcGFnZSBpcyBsb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIGNsZWFyIGVycm9ycyBzbyB3ZSBhcmUgbm90IGRlcGVuZGVudCBvbiBwcmV2aW91cyB0ZXN0c1xuICAgICAgICAgICAgY2xlYXJFcnJvcnMoKTtcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gcmVsb2FkIHRoZSBwYWdlIGFzIHRoZSBwYWdlIGlzIGFscmVhZHkgbG9hZGVkIHdoZW5cbiAgICAgICAgICAgIC8vIHdlIGNvbWUgaGVyZVxuICAgICAgICAgICAgYnJvd3Nlci5kcml2ZXIuZ2V0Q3VycmVudFVybCgpLnRoZW4oZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICAgIGJyb3dzZXIuZ2V0KHVybCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGV4cGVjdE5vRXJyb3JzKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGV2YWx1YXRlIGV4cHJlc3Npb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvRXF1YWwoJzAnKTtcbiAgICAgICAgICAgIGluY0J0bi5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCcxJyk7XG4gICAgICAgICAgICBleHBlY3ROb0Vycm9ycygpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBhbmQgcmVwb3J0IGFuIGVycm9yIHdoZW4gdXNpbmcgXCJldmFsXCInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGV2aWxCdG4uY2xpY2soKTtcbiAgICAgICAgICAgIGV4cGVjdChldmlsRXJyb3IuZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IFNlY3VyaXR5IFBvbGljeS8pO1xuICAgICAgICAgICAgZXhwZWN0RXJyb3IoL0NvbnRlbnQgU2VjdXJpdHkgUG9saWN5Lyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgKi9cblxuLy8gbmdDc3AgaXMgbm90IGltcGxlbWVudGVkIGFzIGEgcHJvcGVyIGRpcmVjdGl2ZSBhbnkgbW9yZSwgYmVjYXVzZSB3ZSBuZWVkIGl0IGJlIHByb2Nlc3NlZCB3aGlsZSB3ZVxuLy8gYm9vdHN0cmFwIHRoZSBzeXN0ZW0gKGJlZm9yZSAkcGFyc2UgaXMgaW5zdGFudGlhdGVkKSwgZm9yIHRoaXMgcmVhc29uIHdlIGp1c3QgaGF2ZVxuLy8gdGhlIGNzcC5pc0FjdGl2ZSgpIGZuIHRoYXQgbG9va3MgZm9yIG5nLWNzcCBhdHRyaWJ1dGUgYW55d2hlcmUgaW4gdGhlIGN1cnJlbnQgZG9jXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDbGlja1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIG5nQ2xpY2sgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igd2hlblxuICogYW4gZWxlbWVudCBpcyBjbGlja2VkLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGljayB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBjbGljay4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxzcGFuPlxuICAgICAgICBjb3VudDoge3tjb3VudH19XG4gICAgICA8L3NwYW4+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50JykpLmdldFRleHQoKSkudG9NYXRjaCgnMCcpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2J1dHRvbicpKS5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnY291bnQnKSkuZ2V0VGV4dCgpKS50b01hdGNoKCcxJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuLypcbiAqIEEgY29sbGVjdGlvbiBvZiBkaXJlY3RpdmVzIHRoYXQgYWxsb3dzIGNyZWF0aW9uIG9mIGN1c3RvbSBldmVudCBoYW5kbGVycyB0aGF0IGFyZSBkZWZpbmVkIGFzXG4gKiBhbmd1bGFyIGV4cHJlc3Npb25zIGFuZCBhcmUgY29tcGlsZWQgYW5kIGV4ZWN1dGVkIHdpdGhpbiB0aGUgY3VycmVudCBzY29wZS5cbiAqL1xudmFyIG5nRXZlbnREaXJlY3RpdmVzID0ge307XG5cbi8vIEZvciBldmVudHMgdGhhdCBtaWdodCBmaXJlIHN5bmNocm9ub3VzbHkgZHVyaW5nIERPTSBtYW5pcHVsYXRpb25cbi8vIHdlIG5lZWQgdG8gZXhlY3V0ZSB0aGVpciBldmVudCBoYW5kbGVycyBhc3luY2hyb25vdXNseSB1c2luZyAkZXZhbEFzeW5jLFxuLy8gc28gdGhhdCB0aGV5IGFyZSBub3QgZXhlY3V0ZWQgaW4gYW4gaW5jb25zaXN0ZW50IHN0YXRlLlxudmFyIGZvcmNlQXN5bmNFdmVudHMgPSB7XG4gICdibHVyJzogdHJ1ZSxcbiAgJ2ZvY3VzJzogdHJ1ZVxufTtcbmZvckVhY2goXG4gICdjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlJy5zcGxpdCgnICcpLFxuICBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgICB2YXIgZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZSgnbmctJyArIGV2ZW50TmFtZSk7XG4gICAgbmdFdmVudERpcmVjdGl2ZXNbZGlyZWN0aXZlTmFtZV0gPSBbJyRwYXJzZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHBhcnNlLCAkcm9vdFNjb3BlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBjb21waWxlOiBmdW5jdGlvbigkZWxlbWVudCwgYXR0cikge1xuICAgICAgICAgIC8vIFdlIGV4cG9zZSB0aGUgcG93ZXJmdWwgJGV2ZW50IG9iamVjdCBvbiB0aGUgc2NvcGUgdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gdGhlIFdpbmRvdyxcbiAgICAgICAgICAvLyBldGMuIHRoYXQgaXNuJ3QgcHJvdGVjdGVkIGJ5IHRoZSBmYXN0IHBhdGhzIGluICRwYXJzZS4gIFdlIGV4cGxpY2l0bHkgcmVxdWVzdCBiZXR0ZXJcbiAgICAgICAgICAvLyBjaGVja3MgYXQgdGhlIGNvc3Qgb2Ygc3BlZWQgc2luY2UgZXZlbnQgaGFuZGxlciBleHByZXNzaW9ucyBhcmUgbm90IGV4ZWN1dGVkIGFzXG4gICAgICAgICAgLy8gZnJlcXVlbnRseSBhcyByZWd1bGFyIGNoYW5nZSBkZXRlY3Rpb24uXG4gICAgICAgICAgdmFyIGZuID0gJHBhcnNlKGF0dHJbZGlyZWN0aXZlTmFtZV0sIC8qIGludGVyY2VwdG9yRm4gKi8gbnVsbCwgLyogZXhwZW5zaXZlQ2hlY2tzICovIHRydWUpO1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0V2ZW50SGFuZGxlcihzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5vbihldmVudE5hbWUsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGZuKHNjb3BlLCB7JGV2ZW50OmV2ZW50fSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGlmIChmb3JjZUFzeW5jRXZlbnRzW2V2ZW50TmFtZV0gJiYgJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XTtcbiAgfVxuKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0RibGNsaWNrXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nRGJsY2xpY2tgIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGEgZGJsY2xpY2sgZXZlbnQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0RibGNsaWNrIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGEgZGJsY2xpY2suIChUaGUgRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YClcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLWRibGNsaWNrPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKG9uIGRvdWJsZSBjbGljaylcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2Vkb3duXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgbmdNb3VzZWRvd24gZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2Vkb3duIGV2ZW50LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZWRvd24ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2Vkb3duLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLW1vdXNlZG93bj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50IChvbiBtb3VzZSBkb3duKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb3VzZXVwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZXVwIGV2ZW50LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZXVwIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNldXAuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2V1cD1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50IChvbiBtb3VzZSB1cClcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNlb3ZlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2VvdmVyIGV2ZW50LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZW92ZXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2VvdmVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLW1vdXNlb3Zlcj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGlzIG92ZXIpXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNlZW50ZXJcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlZW50ZXIgZXZlbnQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlZW50ZXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2VlbnRlci4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZWVudGVyPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgZW50ZXJzKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb3VzZWxlYXZlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZWxlYXZlIGV2ZW50LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZWxlYXZlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNlbGVhdmUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2VsZWF2ZT1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGxlYXZlcylcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2Vtb3ZlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZW1vdmUgZXZlbnQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlbW92ZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBtb3VzZW1vdmUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2Vtb3ZlPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgbW92ZXMpXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0tleWRvd25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGtleWRvd24gZXZlbnQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0tleWRvd24ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICoga2V5ZG93bi4gKEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGAgYW5kIGNhbiBiZSBpbnRlcnJvZ2F0ZWQgZm9yIGtleUNvZGUsIGFsdEtleSwgZXRjLilcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgbmcta2V5ZG93bj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgIGtleSBkb3duIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0tleXVwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBrZXl1cCBldmVudC5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nS2V5dXAge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICoga2V5dXAuIChFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxwPlR5cGluZyBpbiB0aGUgaW5wdXQgYm94IGJlbG93IHVwZGF0ZXMgdGhlIGtleSBjb3VudDwvcD5cbiAgICAgICA8aW5wdXQgbmcta2V5dXA9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+IGtleSB1cCBjb3VudDoge3tjb3VudH19XG5cbiAgICAgICA8cD5UeXBpbmcgaW4gdGhlIGlucHV0IGJveCBiZWxvdyB1cGRhdGVzIHRoZSBrZXljb2RlPC9wPlxuICAgICAgIDxpbnB1dCBuZy1rZXl1cD1cImV2ZW50PSRldmVudFwiPlxuICAgICAgIDxwPmV2ZW50IGtleUNvZGU6IHt7IGV2ZW50LmtleUNvZGUgfX08L3A+XG4gICAgICAgPHA+ZXZlbnQgYWx0S2V5OiB7eyBldmVudC5hbHRLZXkgfX08L3A+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdLZXlwcmVzc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24ga2V5cHJlc3MgZXZlbnQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nS2V5cHJlc3Mge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICoga2V5cHJlc3MuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9XG4gKiBhbmQgY2FuIGJlIGludGVycm9nYXRlZCBmb3Iga2V5Q29kZSwgYWx0S2V5LCBldGMuKVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBuZy1rZXlwcmVzcz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgIGtleSBwcmVzcyBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTdWJtaXRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVuYWJsZXMgYmluZGluZyBhbmd1bGFyIGV4cHJlc3Npb25zIHRvIG9uc3VibWl0IGV2ZW50cy5cbiAqXG4gKiBBZGRpdGlvbmFsbHkgaXQgcHJldmVudHMgdGhlIGRlZmF1bHQgYWN0aW9uICh3aGljaCBmb3IgZm9ybSBtZWFucyBzZW5kaW5nIHRoZSByZXF1ZXN0IHRvIHRoZVxuICogc2VydmVyIGFuZCByZWxvYWRpbmcgdGhlIGN1cnJlbnQgcGFnZSksIGJ1dCBvbmx5IGlmIHRoZSBmb3JtIGRvZXMgbm90IGNvbnRhaW4gYGFjdGlvbmAsXG4gKiBgZGF0YS1hY3Rpb25gLCBvciBgeC1hY3Rpb25gIGF0dHJpYnV0ZXMuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqV2FybmluZzoqKiBCZSBjYXJlZnVsIG5vdCB0byBjYXVzZSBcImRvdWJsZS1zdWJtaXNzaW9uXCIgYnkgdXNpbmcgYm90aCB0aGUgYG5nQ2xpY2tgIGFuZFxuICogYG5nU3VibWl0YCBoYW5kbGVycyB0b2dldGhlci4gU2VlIHRoZVxuICoge0BsaW5rIGZvcm0jc3VibWl0dGluZy1hLWZvcm0tYW5kLXByZXZlbnRpbmctdGhlLWRlZmF1bHQtYWN0aW9uIGBmb3JtYCBkaXJlY3RpdmUgZG9jdW1lbnRhdGlvbn1cbiAqIGZvciBhIGRldGFpbGVkIGRpc2N1c3Npb24gb2Ygd2hlbiBgbmdTdWJtaXRgIG1heSBiZSB0cmlnZ2VyZWQuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAZWxlbWVudCBmb3JtXG4gKiBAcHJpb3JpdHkgMFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1N1Ym1pdCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLlxuICogKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cInN1Ym1pdEV4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxzY3JpcHQ+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdzdWJtaXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS5saXN0ID0gW107XG4gICAgICAgICAgICAkc2NvcGUudGV4dCA9ICdoZWxsbyc7XG4gICAgICAgICAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICgkc2NvcGUudGV4dCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5saXN0LnB1c2godGhpcy50ZXh0KTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9ICcnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1dKTtcbiAgICAgIDwvc2NyaXB0PlxuICAgICAgPGZvcm0gbmctc3VibWl0PVwic3VibWl0KClcIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgRW50ZXIgdGV4dCBhbmQgaGl0IGVudGVyOlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInRleHRcIiBuYW1lPVwidGV4dFwiIC8+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgaWQ9XCJzdWJtaXRcIiB2YWx1ZT1cIlN1Ym1pdFwiIC8+XG4gICAgICAgIDxwcmU+bGlzdD17e2xpc3R9fTwvcHJlPlxuICAgICAgPC9mb3JtPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLXN1Ym1pdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbGlzdCcpKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3Q9W10nKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9Db250YWluKCdoZWxsbycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCcnKTtcbiAgICAgICB9KTtcbiAgICAgICBpdCgnc2hvdWxkIGlnbm9yZSBlbXB0eSBzdHJpbmdzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9CZSgnbGlzdD1bXScpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJyNzdWJtaXQnKSkuY2xpY2soKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9Db250YWluKCdoZWxsbycpO1xuICAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdGb2N1c1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gZm9jdXMgZXZlbnQuXG4gKlxuICogTm90ZTogQXMgdGhlIGBmb2N1c2AgZXZlbnQgaXMgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGNhbGxpbmcgYGlucHV0LmZvY3VzKClgXG4gKiBBbmd1bGFySlMgZXhlY3V0ZXMgdGhlIGV4cHJlc3Npb24gdXNpbmcgYHNjb3BlLiRldmFsQXN5bmNgIGlmIHRoZSBldmVudCBpcyBmaXJlZFxuICogZHVyaW5nIGFuIGAkYXBwbHlgIHRvIGVuc3VyZSBhIGNvbnNpc3RlbnQgc3RhdGUuXG4gKlxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxuICogQHByaW9yaXR5IDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdGb2N1cyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBmb2N1cy4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAqIFNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja31cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmx1clxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gYmx1ciBldmVudC5cbiAqXG4gKiBBIFtibHVyIGV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9FdmVudHMvYmx1cikgZmlyZXMgd2hlblxuICogYW4gZWxlbWVudCBoYXMgbG9zdCBmb2N1cy5cbiAqXG4gKiBOb3RlOiBBcyB0aGUgYGJsdXJgIGV2ZW50IGlzIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgYWxzbyBkdXJpbmcgRE9NIG1hbmlwdWxhdGlvbnNcbiAqIChlLmcuIHJlbW92aW5nIGEgZm9jdXNzZWQgaW5wdXQpLFxuICogQW5ndWxhckpTIGV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIHVzaW5nIGBzY29wZS4kZXZhbEFzeW5jYCBpZiB0aGUgZXZlbnQgaXMgZmlyZWRcbiAqIGR1cmluZyBhbiBgJGFwcGx5YCB0byBlbnN1cmUgYSBjb25zaXN0ZW50IHN0YXRlLlxuICpcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQmx1ciB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBibHVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICogU2VlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfVxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDb3B5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBjb3B5IGV2ZW50LlxuICpcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ29weSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBjb3B5LiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgbmctY29weT1cImNvcGllZD10cnVlXCIgbmctaW5pdD1cImNvcGllZD1mYWxzZTsgdmFsdWU9J2NvcHkgbWUnXCIgbmctbW9kZWw9XCJ2YWx1ZVwiPlxuICAgICAgY29waWVkOiB7e2NvcGllZH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ3V0XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBjdXQgZXZlbnQuXG4gKlxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxuICogQHByaW9yaXR5IDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDdXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogY3V0LiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgbmctY3V0PVwiY3V0PXRydWVcIiBuZy1pbml0PVwiY3V0PWZhbHNlOyB2YWx1ZT0nY3V0IG1lJ1wiIG5nLW1vZGVsPVwidmFsdWVcIj5cbiAgICAgIGN1dDoge3tjdXR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1Bhc3RlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBwYXN0ZSBldmVudC5cbiAqXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXG4gKiBAcHJpb3JpdHkgMFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1Bhc3RlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIHBhc3RlLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgbmctcGFzdGU9XCJwYXN0ZT10cnVlXCIgbmctaW5pdD1cInBhc3RlPWZhbHNlXCIgcGxhY2Vob2xkZXI9J3Bhc3RlIGhlcmUnPlxuICAgICAgcGFzdGVkOiB7e3Bhc3RlfX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdJZlxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdJZmAgZGlyZWN0aXZlIHJlbW92ZXMgb3IgcmVjcmVhdGVzIGEgcG9ydGlvbiBvZiB0aGUgRE9NIHRyZWUgYmFzZWQgb24gYW5cbiAqIHtleHByZXNzaW9ufS4gSWYgdGhlIGV4cHJlc3Npb24gYXNzaWduZWQgdG8gYG5nSWZgIGV2YWx1YXRlcyB0byBhIGZhbHNlXG4gKiB2YWx1ZSB0aGVuIHRoZSBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLCBvdGhlcndpc2UgYSBjbG9uZSBvZiB0aGVcbiAqIGVsZW1lbnQgaXMgcmVpbnNlcnRlZCBpbnRvIHRoZSBET00uXG4gKlxuICogYG5nSWZgIGRpZmZlcnMgZnJvbSBgbmdTaG93YCBhbmQgYG5nSGlkZWAgaW4gdGhhdCBgbmdJZmAgY29tcGxldGVseSByZW1vdmVzIGFuZCByZWNyZWF0ZXMgdGhlXG4gKiBlbGVtZW50IGluIHRoZSBET00gcmF0aGVyIHRoYW4gY2hhbmdpbmcgaXRzIHZpc2liaWxpdHkgdmlhIHRoZSBgZGlzcGxheWAgY3NzIHByb3BlcnR5LiAgQSBjb21tb25cbiAqIGNhc2Ugd2hlbiB0aGlzIGRpZmZlcmVuY2UgaXMgc2lnbmlmaWNhbnQgaXMgd2hlbiB1c2luZyBjc3Mgc2VsZWN0b3JzIHRoYXQgcmVseSBvbiBhbiBlbGVtZW50J3NcbiAqIHBvc2l0aW9uIHdpdGhpbiB0aGUgRE9NLCBzdWNoIGFzIHRoZSBgOmZpcnN0LWNoaWxkYCBvciBgOmxhc3QtY2hpbGRgIHBzZXVkby1jbGFzc2VzLlxuICpcbiAqIE5vdGUgdGhhdCB3aGVuIGFuIGVsZW1lbnQgaXMgcmVtb3ZlZCB1c2luZyBgbmdJZmAgaXRzIHNjb3BlIGlzIGRlc3Ryb3llZCBhbmQgYSBuZXcgc2NvcGVcbiAqIGlzIGNyZWF0ZWQgd2hlbiB0aGUgZWxlbWVudCBpcyByZXN0b3JlZC4gIFRoZSBzY29wZSBjcmVhdGVkIHdpdGhpbiBgbmdJZmAgaW5oZXJpdHMgZnJvbVxuICogaXRzIHBhcmVudCBzY29wZSB1c2luZ1xuICogW3Byb3RvdHlwYWwgaW5oZXJpdGFuY2VdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvd2lraS9VbmRlcnN0YW5kaW5nLVNjb3BlcyNqYXZhc2NyaXB0LXByb3RvdHlwYWwtaW5oZXJpdGFuY2UpLlxuICogQW4gaW1wb3J0YW50IGltcGxpY2F0aW9uIG9mIHRoaXMgaXMgaWYgYG5nTW9kZWxgIGlzIHVzZWQgd2l0aGluIGBuZ0lmYCB0byBiaW5kIHRvXG4gKiBhIGphdmFzY3JpcHQgcHJpbWl0aXZlIGRlZmluZWQgaW4gdGhlIHBhcmVudCBzY29wZS4gSW4gdGhpcyBjYXNlIGFueSBtb2RpZmljYXRpb25zIG1hZGUgdG8gdGhlXG4gKiB2YXJpYWJsZSB3aXRoaW4gdGhlIGNoaWxkIHNjb3BlIHdpbGwgb3ZlcnJpZGUgKGhpZGUpIHRoZSB2YWx1ZSBpbiB0aGUgcGFyZW50IHNjb3BlLlxuICpcbiAqIEFsc28sIGBuZ0lmYCByZWNyZWF0ZXMgZWxlbWVudHMgdXNpbmcgdGhlaXIgY29tcGlsZWQgc3RhdGUuIEFuIGV4YW1wbGUgb2YgdGhpcyBiZWhhdmlvclxuICogaXMgaWYgYW4gZWxlbWVudCdzIGNsYXNzIGF0dHJpYnV0ZSBpcyBkaXJlY3RseSBtb2RpZmllZCBhZnRlciBpdCdzIGNvbXBpbGVkLCB1c2luZyBzb21ldGhpbmcgbGlrZVxuICogalF1ZXJ5J3MgYC5hZGRDbGFzcygpYCBtZXRob2QsIGFuZCB0aGUgZWxlbWVudCBpcyBsYXRlciByZW1vdmVkLiBXaGVuIGBuZ0lmYCByZWNyZWF0ZXMgdGhlIGVsZW1lbnRcbiAqIHRoZSBhZGRlZCBjbGFzcyB3aWxsIGJlIGxvc3QgYmVjYXVzZSB0aGUgb3JpZ2luYWwgY29tcGlsZWQgc3RhdGUgaXMgdXNlZCB0byByZWdlbmVyYXRlIHRoZSBlbGVtZW50LlxuICpcbiAqIEFkZGl0aW9uYWxseSwgeW91IGNhbiBwcm92aWRlIGFuaW1hdGlvbnMgdmlhIHRoZSBgbmdBbmltYXRlYCBtb2R1bGUgdG8gYW5pbWF0ZSB0aGUgYGVudGVyYFxuICogYW5kIGBsZWF2ZWAgZWZmZWN0cy5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogZW50ZXIgLSBoYXBwZW5zIGp1c3QgYWZ0ZXIgdGhlIGBuZ0lmYCBjb250ZW50cyBjaGFuZ2UgYW5kIGEgbmV3IERPTSBlbGVtZW50IGlzIGNyZWF0ZWQgYW5kIGluamVjdGVkIGludG8gdGhlIGBuZ0lmYCBjb250YWluZXJcbiAqIGxlYXZlIC0gaGFwcGVucyBqdXN0IGJlZm9yZSB0aGUgYG5nSWZgIGNvbnRlbnRzIGFyZSByZW1vdmVkIGZyb20gdGhlIERPTVxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgNjAwXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSWYgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIGZhbHN5IHRoZW5cbiAqICAgICB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSB0cmVlLiBJZiBpdCBpcyB0cnV0aHkgYSBjb3B5IG9mIHRoZSBjb21waWxlZFxuICogICAgIGVsZW1lbnQgaXMgYWRkZWQgdG8gdGhlIERPTSB0cmVlLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICBDbGljayBtZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiIG5nLWluaXQ9XCJjaGVja2VkPXRydWVcIiAvPjxici8+XG4gICAgICBTaG93IHdoZW4gY2hlY2tlZDpcbiAgICAgIDxzcGFuIG5nLWlmPVwiY2hlY2tlZFwiIGNsYXNzPVwiYW5pbWF0ZS1pZlwiPlxuICAgICAgICBUaGlzIGlzIHJlbW92ZWQgd2hlbiB0aGUgY2hlY2tib3ggaXMgdW5jaGVja2VkLlxuICAgICAgPC9zcGFuPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5hbmltYXRlLWlmIHtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1lbnRlciwgLmFuaW1hdGUtaWYubmctbGVhdmUge1xuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1lbnRlcixcbiAgICAgIC5hbmltYXRlLWlmLm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSB7XG4gICAgICAgIG9wYWNpdHk6MDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtaWYubmctbGVhdmUsXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xuICAgICAgICBvcGFjaXR5OjE7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0lmRGlyZWN0aXZlID0gWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XG4gIHJldHVybiB7XG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICBwcmlvcml0eTogNjAwLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgJCR0bGI6IHRydWUsXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XG4gICAgICAgIHZhciBibG9jaywgY2hpbGRTY29wZSwgcHJldmlvdXNFbGVtZW50cztcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgkYXR0ci5uZ0lmLCBmdW5jdGlvbiBuZ0lmV2F0Y2hBY3Rpb24odmFsdWUpIHtcblxuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFjaGlsZFNjb3BlKSB7XG4gICAgICAgICAgICAgICR0cmFuc2NsdWRlKGZ1bmN0aW9uKGNsb25lLCBuZXdTY29wZSkge1xuICAgICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBuZXdTY29wZTtcbiAgICAgICAgICAgICAgICBjbG9uZVtjbG9uZS5sZW5ndGgrK10gPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCcgZW5kIG5nSWY6ICcgKyAkYXR0ci5uZ0lmICsgJyAnKTtcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBvbmx5IG5lZWQgdGhlIGZpcnN0L2xhc3Qgbm9kZSBvZiB0aGUgY2xvbmVkIG5vZGVzLlxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHdlIG5lZWQgdG8ga2VlcCB0aGUgcmVmZXJlbmNlIHRvIHRoZSBqcWxpdGUgd3JhcHBlciBhcyBpdCBtaWdodCBiZSBjaGFuZ2VkIGxhdGVyXG4gICAgICAgICAgICAgICAgLy8gYnkgYSBkaXJlY3RpdmUgd2l0aCB0ZW1wbGF0ZVVybCB3aGVuIGl0cyB0ZW1wbGF0ZSBhcnJpdmVzLlxuICAgICAgICAgICAgICAgIGJsb2NrID0ge1xuICAgICAgICAgICAgICAgICAgY2xvbmU6IGNsb25lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgJGVsZW1lbnQucGFyZW50KCksICRlbGVtZW50KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0VsZW1lbnRzKSB7XG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoaWxkU2NvcGUpIHtcbiAgICAgICAgICAgICAgY2hpbGRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgICBjaGlsZFNjb3BlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChibG9jaykge1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzID0gZ2V0QmxvY2tOb2RlcyhibG9jay5jbG9uZSk7XG4gICAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKHByZXZpb3VzRWxlbWVudHMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50cyA9IG51bGw7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBibG9jayA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0luY2x1ZGVcbiAqIEByZXN0cmljdCBFQ0FcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZldGNoZXMsIGNvbXBpbGVzIGFuZCBpbmNsdWRlcyBhbiBleHRlcm5hbCBIVE1MIGZyYWdtZW50LlxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSB0ZW1wbGF0ZSBVUkwgaXMgcmVzdHJpY3RlZCB0byB0aGUgc2FtZSBkb21haW4gYW5kIHByb3RvY29sIGFzIHRoZVxuICogYXBwbGljYXRpb24gZG9jdW1lbnQuIFRoaXMgaXMgZG9uZSBieSBjYWxsaW5nIHtAbGluayAkc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxuICogJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmx9IG9uIGl0LiBUbyBsb2FkIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgb3IgcHJvdG9jb2xzXG4gKiB5b3UgbWF5IGVpdGhlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0IHRoZW19IG9yXG4gKiB7QGxpbmsgJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmwgd3JhcCB0aGVtfSBhcyB0cnVzdGVkIHZhbHVlcy4gUmVmZXIgdG8gQW5ndWxhcidzIHtAbGlua1xuICogbmcuJHNjZSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZ30uXG4gKlxuICogSW4gYWRkaXRpb24sIHRoZSBicm93c2VyJ3NcbiAqIFtTYW1lIE9yaWdpbiBQb2xpY3ldKGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvYnJvd3NlcnNlYy93aWtpL1BhcnQyI1NhbWUtb3JpZ2luX3BvbGljeV9mb3JfWE1MSHR0cFJlcXVlc3QpXG4gKiBhbmQgW0Nyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nIChDT1JTKV0oaHR0cDovL3d3dy53My5vcmcvVFIvY29ycy8pXG4gKiBwb2xpY3kgbWF5IGZ1cnRoZXIgcmVzdHJpY3Qgd2hldGhlciB0aGUgdGVtcGxhdGUgaXMgc3VjY2Vzc2Z1bGx5IGxvYWRlZC5cbiAqIEZvciBleGFtcGxlLCBgbmdJbmNsdWRlYCB3b24ndCB3b3JrIGZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMgb24gYWxsIGJyb3dzZXJzIGFuZCBmb3IgYGZpbGU6Ly9gXG4gKiBhY2Nlc3Mgb24gc29tZSBicm93c2Vycy5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogZW50ZXIgLSBhbmltYXRpb24gaXMgdXNlZCB0byBicmluZyBuZXcgY29udGVudCBpbnRvIHRoZSBicm93c2VyLlxuICogbGVhdmUgLSBhbmltYXRpb24gaXMgdXNlZCB0byBhbmltYXRlIGV4aXN0aW5nIGNvbnRlbnQgYXdheS5cbiAqXG4gKiBUaGUgZW50ZXIgYW5kIGxlYXZlIGFuaW1hdGlvbiBvY2N1ciBjb25jdXJyZW50bHkuXG4gKlxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgNDAwXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nSW5jbHVkZXxzcmMgYW5ndWxhciBleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gVVJMLiBJZiB0aGUgc291cmNlIGlzIGEgc3RyaW5nIGNvbnN0YW50LFxuICogICAgICAgICAgICAgICAgIG1ha2Ugc3VyZSB5b3Ugd3JhcCBpdCBpbiAqKnNpbmdsZSoqIHF1b3RlcywgZS5nLiBgc3JjPVwiJ215UGFydGlhbFRlbXBsYXRlLmh0bWwnXCJgLlxuICogQHBhcmFtIHtzdHJpbmc9fSBvbmxvYWQgRXhwcmVzc2lvbiB0byBldmFsdWF0ZSB3aGVuIGEgbmV3IHBhcnRpYWwgaXMgbG9hZGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gYXV0b3Njcm9sbCBXaGV0aGVyIGBuZ0luY2x1ZGVgIHNob3VsZCBjYWxsIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsXG4gKiAgICAgICAgICAgICAgICAgICRhbmNob3JTY3JvbGx9IHRvIHNjcm9sbCB0aGUgdmlld3BvcnQgYWZ0ZXIgdGhlIGNvbnRlbnQgaXMgbG9hZGVkLlxuICpcbiAqICAgICAgICAgICAgICAgICAgLSBJZiB0aGUgYXR0cmlidXRlIGlzIG5vdCBzZXQsIGRpc2FibGUgc2Nyb2xsaW5nLlxuICogICAgICAgICAgICAgICAgICAtIElmIHRoZSBhdHRyaWJ1dGUgaXMgc2V0IHdpdGhvdXQgdmFsdWUsIGVuYWJsZSBzY3JvbGxpbmcuXG4gKiAgICAgICAgICAgICAgICAgIC0gT3RoZXJ3aXNlIGVuYWJsZSBzY3JvbGxpbmcgb25seSBpZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1dGh5IHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlIG1vZHVsZT1cImluY2x1ZGVFeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwidGVtcGxhdGVcIiBuZy1vcHRpb25zPVwidC5uYW1lIGZvciB0IGluIHRlbXBsYXRlc1wiPlxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+KGJsYW5rKTwvb3B0aW9uPlxuICAgICAgIDwvc2VsZWN0PlxuICAgICAgIHVybCBvZiB0aGUgdGVtcGxhdGU6IDxjb2RlPnt7dGVtcGxhdGUudXJsfX08L2NvZGU+XG4gICAgICAgPGhyLz5cbiAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUtYW5pbWF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1hbmltYXRlXCIgbmctaW5jbHVkZT1cInRlbXBsYXRlLnVybFwiPjwvZGl2PlxuICAgICAgIDwvZGl2PlxuICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2luY2x1ZGVFeGFtcGxlJywgWyduZ0FuaW1hdGUnXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGVzID1cbiAgICAgICAgICAgIFsgeyBuYW1lOiAndGVtcGxhdGUxLmh0bWwnLCB1cmw6ICd0ZW1wbGF0ZTEuaHRtbCd9LFxuICAgICAgICAgICAgICB7IG5hbWU6ICd0ZW1wbGF0ZTIuaHRtbCcsIHVybDogJ3RlbXBsYXRlMi5odG1sJ30gXTtcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGUgPSAkc2NvcGUudGVtcGxhdGVzWzBdO1xuICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwidGVtcGxhdGUxLmh0bWxcIj5cbiAgICAgIENvbnRlbnQgb2YgdGVtcGxhdGUxLmh0bWxcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInRlbXBsYXRlMi5odG1sXCI+XG4gICAgICBDb250ZW50IG9mIHRlbXBsYXRlMi5odG1sXG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLnNsaWRlLWFuaW1hdGUtY29udGFpbmVyIHtcbiAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGhlaWdodDo0MHB4O1xuICAgICAgICBvdmVyZmxvdzpoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlIHtcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1lbnRlciwgLnNsaWRlLWFuaW1hdGUubmctbGVhdmUge1xuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xuXG4gICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1xuICAgICAgICB0b3A6MDtcbiAgICAgICAgbGVmdDowO1xuICAgICAgICByaWdodDowO1xuICAgICAgICBib3R0b206MDtcbiAgICAgICAgZGlzcGxheTpibG9jaztcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1lbnRlciB7XG4gICAgICAgIHRvcDotNTBweDtcbiAgICAgIH1cbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XG4gICAgICAgIHRvcDowO1xuICAgICAgfVxuXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZSB7XG4gICAgICAgIHRvcDowO1xuICAgICAgfVxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctbGVhdmUubmctbGVhdmUtYWN0aXZlIHtcbiAgICAgICAgdG9wOjUwcHg7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB0ZW1wbGF0ZVNlbGVjdCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RlbXBsYXRlJykpO1xuICAgICAgdmFyIGluY2x1ZGVFbGVtID0gZWxlbWVudChieS5jc3MoJ1tuZy1pbmNsdWRlXScpKTtcblxuICAgICAgaXQoJ3Nob3VsZCBsb2FkIHRlbXBsYXRlMS5odG1sJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdChpbmNsdWRlRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL0NvbnRlbnQgb2YgdGVtcGxhdGUxLmh0bWwvKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUyLmh0bWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgICAgLy8gRmlyZWZveCBjYW4ndCBoYW5kbGUgdXNpbmcgc2VsZWN0c1xuICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODBcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgyKS5jbGljaygpO1xuICAgICAgICBleHBlY3QoaW5jbHVkZUVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IG9mIHRlbXBsYXRlMi5odG1sLyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2UgdG8gYmxhbmsnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgICAgLy8gRmlyZWZveCBjYW4ndCBoYW5kbGUgdXNpbmcgc2VsZWN0c1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5jbGljaygpO1xuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDApLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChpbmNsdWRlRWxlbS5pc1ByZXNlbnQoKSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGV2ZW50XG4gKiBAbmFtZSBuZ0luY2x1ZGUjJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXG4gKiBAZXZlbnRUeXBlIGVtaXQgb24gdGhlIHNjb3BlIG5nSW5jbHVkZSB3YXMgZGVjbGFyZWQgaW5cbiAqIEBkZXNjcmlwdGlvblxuICogRW1pdHRlZCBldmVyeSB0aW1lIHRoZSBuZ0luY2x1ZGUgY29udGVudCBpcyByZXF1ZXN0ZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZXZlbnRcbiAqIEBuYW1lIG5nSW5jbHVkZSMkaW5jbHVkZUNvbnRlbnRMb2FkZWRcbiAqIEBldmVudFR5cGUgZW1pdCBvbiB0aGUgY3VycmVudCBuZ0luY2x1ZGUgc2NvcGVcbiAqIEBkZXNjcmlwdGlvblxuICogRW1pdHRlZCBldmVyeSB0aW1lIHRoZSBuZ0luY2x1ZGUgY29udGVudCBpcyByZWxvYWRlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXG4gKiBAcGFyYW0ge1N0cmluZ30gc3JjIFVSTCBvZiBjb250ZW50IHRvIGxvYWQuXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBldmVudFxuICogQG5hbWUgbmdJbmNsdWRlIyRpbmNsdWRlQ29udGVudEVycm9yXG4gKiBAZXZlbnRUeXBlIGVtaXQgb24gdGhlIHNjb3BlIG5nSW5jbHVkZSB3YXMgZGVjbGFyZWQgaW5cbiAqIEBkZXNjcmlwdGlvblxuICogRW1pdHRlZCB3aGVuIGEgdGVtcGxhdGUgSFRUUCByZXF1ZXN0IHlpZWxkcyBhbiBlcnJvbmVvdXMgcmVzcG9uc2UgKHN0YXR1cyA8IDIwMCB8fCBzdGF0dXMgPiAyOTkpXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxuICovXG52YXIgbmdJbmNsdWRlRGlyZWN0aXZlID0gWyckdGVtcGxhdGVSZXF1ZXN0JywgJyRhbmNob3JTY3JvbGwnLCAnJGFuaW1hdGUnLCAnJHNjZScsXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbigkdGVtcGxhdGVSZXF1ZXN0LCAgICRhbmNob3JTY3JvbGwsICAgJGFuaW1hdGUsICAgJHNjZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICBwcmlvcml0eTogNDAwLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICBjb250cm9sbGVyOiBhbmd1bGFyLm5vb3AsXG4gICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xuICAgICAgdmFyIHNyY0V4cCA9IGF0dHIubmdJbmNsdWRlIHx8IGF0dHIuc3JjLFxuICAgICAgICAgIG9ubG9hZEV4cCA9IGF0dHIub25sb2FkIHx8ICcnLFxuICAgICAgICAgIGF1dG9TY3JvbGxFeHAgPSBhdHRyLmF1dG9zY3JvbGw7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xuICAgICAgICB2YXIgY2hhbmdlQ291bnRlciA9IDAsXG4gICAgICAgICAgICBjdXJyZW50U2NvcGUsXG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQsXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudDtcblxuICAgICAgICB2YXIgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChwcmV2aW91c0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShjdXJyZW50RWxlbWVudCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50ID0gY3VycmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNjb3BlLiR3YXRjaCgkc2NlLnBhcnNlQXNSZXNvdXJjZVVybChzcmNFeHApLCBmdW5jdGlvbiBuZ0luY2x1ZGVXYXRjaEFjdGlvbihzcmMpIHtcbiAgICAgICAgICB2YXIgYWZ0ZXJBbmltYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQoYXV0b1Njcm9sbEV4cCkgJiYgKCFhdXRvU2Nyb2xsRXhwIHx8IHNjb3BlLiRldmFsKGF1dG9TY3JvbGxFeHApKSkge1xuICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICB2YXIgdGhpc0NoYW5nZUlkID0gKytjaGFuZ2VDb3VudGVyO1xuXG4gICAgICAgICAgaWYgKHNyYykge1xuICAgICAgICAgICAgLy9zZXQgdGhlIDJuZCBwYXJhbSB0byB0cnVlIHRvIGlnbm9yZSB0aGUgdGVtcGxhdGUgcmVxdWVzdCBlcnJvciBzbyB0aGF0IHRoZSBpbm5lclxuICAgICAgICAgICAgLy9jb250ZW50cyBhbmQgc2NvcGUgY2FuIGJlIGNsZWFuZWQgdXAuXG4gICAgICAgICAgICAkdGVtcGxhdGVSZXF1ZXN0KHNyYywgdHJ1ZSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICBpZiAodGhpc0NoYW5nZUlkICE9PSBjaGFuZ2VDb3VudGVyKSByZXR1cm47XG4gICAgICAgICAgICAgIHZhciBuZXdTY29wZSA9IHNjb3BlLiRuZXcoKTtcbiAgICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IHJlc3BvbnNlO1xuXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFRoaXMgd2lsbCBhbHNvIGxpbmsgYWxsIGNoaWxkcmVuIG9mIG5nLWluY2x1ZGUgdGhhdCB3ZXJlIGNvbnRhaW5lZCBpbiB0aGUgb3JpZ2luYWxcbiAgICAgICAgICAgICAgLy8gaHRtbC4gSWYgdGhhdCBjb250ZW50IGNvbnRhaW5zIGNvbnRyb2xsZXJzLCAuLi4gdGhleSBjb3VsZCBwb2xsdXRlL2NoYW5nZSB0aGUgc2NvcGUuXG4gICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHVzaW5nIG5nLWluY2x1ZGUgb24gYW4gZWxlbWVudCB3aXRoIGFkZGl0aW9uYWwgY29udGVudCBkb2VzIG5vdCBtYWtlIHNlbnNlLi4uXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFdlIGNhbid0IHJlbW92ZSB0aGVtIGluIHRoZSBjbG9uZUF0dGNoRm4gb2YgJHRyYW5zY2x1ZGUgYXMgdGhhdFxuICAgICAgICAgICAgICAvLyBmdW5jdGlvbiBpcyBjYWxsZWQgYmVmb3JlIGxpbmtpbmcgdGhlIGNvbnRlbnQsIHdoaWNoIHdvdWxkIGFwcGx5IGNoaWxkXG4gICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZXMgdG8gbm9uIGV4aXN0aW5nIGVsZW1lbnRzLlxuICAgICAgICAgICAgICB2YXIgY2xvbmUgPSAkdHJhbnNjbHVkZShuZXdTY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsIG51bGwsICRlbGVtZW50KS50aGVuKGFmdGVyQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbmV3U2NvcGU7XG4gICAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY2xvbmU7XG5cbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRMb2FkZWQnLCBzcmMpO1xuICAgICAgICAgICAgICBzY29wZS4kZXZhbChvbmxvYWRFeHApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzQ2hhbmdlSWQgPT09IGNoYW5nZUNvdW50ZXIpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJyRpbmNsdWRlQ29udGVudEVycm9yJywgc3JjKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkJywgc3JjKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCgpO1xuICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbi8vIFRoaXMgZGlyZWN0aXZlIGlzIGNhbGxlZCBkdXJpbmcgdGhlICR0cmFuc2NsdWRlIGNhbGwgb2YgdGhlIGZpcnN0IGBuZ0luY2x1ZGVgIGRpcmVjdGl2ZS5cbi8vIEl0IHdpbGwgcmVwbGFjZSBhbmQgY29tcGlsZSB0aGUgY29udGVudCBvZiB0aGUgZWxlbWVudCB3aXRoIHRoZSBsb2FkZWQgdGVtcGxhdGUuXG4vLyBXZSBuZWVkIHRoaXMgZGlyZWN0aXZlIHNvIHRoYXQgdGhlIGVsZW1lbnQgY29udGVudCBpcyBhbHJlYWR5IGZpbGxlZCB3aGVuXG4vLyB0aGUgbGluayBmdW5jdGlvbiBvZiBhbm90aGVyIGRpcmVjdGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50IGFzIG5nSW5jbHVkZVxuLy8gaXMgY2FsbGVkLlxudmFyIG5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlID0gWyckY29tcGlsZScsXG4gIGZ1bmN0aW9uKCRjb21waWxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICAgIHByaW9yaXR5OiAtNDAwLFxuICAgICAgcmVxdWlyZTogJ25nSW5jbHVkZScsXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsKSB7XG4gICAgICAgIGlmICgvU1ZHLy50ZXN0KCRlbGVtZW50WzBdLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgLy8gV2ViS2l0OiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM1Njk4IC0tLSBTVkcgZWxlbWVudHMgZG8gbm90XG4gICAgICAgICAgLy8gc3VwcG9ydCBpbm5lckhUTUwsIHNvIGRldGVjdCB0aGlzIGhlcmUgYW5kIHRyeSB0byBnZW5lcmF0ZSB0aGUgY29udGVudHNcbiAgICAgICAgICAvLyBzcGVjaWFsbHkuXG4gICAgICAgICAgJGVsZW1lbnQuZW1wdHkoKTtcbiAgICAgICAgICAkY29tcGlsZShqcUxpdGVCdWlsZEZyYWdtZW50KGN0cmwudGVtcGxhdGUsIGRvY3VtZW50KS5jaGlsZE5vZGVzKShzY29wZSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gbmFtZXNwYWNlQWRhcHRlZENsb25lKGNsb25lKSB7XG4gICAgICAgICAgICAkZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xuICAgICAgICAgIH0sIHtmdXR1cmVQYXJlbnRFbGVtZW50OiAkZWxlbWVudH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICRlbGVtZW50Lmh0bWwoY3RybC50ZW1wbGF0ZSk7XG4gICAgICAgICRjb21waWxlKCRlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0luaXRcbiAqIEByZXN0cmljdCBBQ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0luaXRgIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIGV2YWx1YXRlIGFuIGV4cHJlc3Npb24gaW4gdGhlXG4gKiBjdXJyZW50IHNjb3BlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1lcnJvclwiPlxuICogVGhlIG9ubHkgYXBwcm9wcmlhdGUgdXNlIG9mIGBuZ0luaXRgIGlzIGZvciBhbGlhc2luZyBzcGVjaWFsIHByb3BlcnRpZXMgb2ZcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgYG5nUmVwZWF0YH0sIGFzIHNlZW4gaW4gdGhlIGRlbW8gYmVsb3cuIEJlc2lkZXMgdGhpcyBjYXNlLCB5b3VcbiAqIHNob3VsZCB1c2Uge0BsaW5rIGd1aWRlL2NvbnRyb2xsZXIgY29udHJvbGxlcnN9IHJhdGhlciB0aGFuIGBuZ0luaXRgXG4gKiB0byBpbml0aWFsaXplIHZhbHVlcyBvbiBhIHNjb3BlLlxuICogPC9kaXY+XG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipOb3RlKio6IElmIHlvdSBoYXZlIGFzc2lnbm1lbnQgaW4gYG5nSW5pdGAgYWxvbmcgd2l0aCB7QGxpbmsgbmcuJGZpbHRlciBgJGZpbHRlcmB9LCBtYWtlXG4gKiBzdXJlIHlvdSBoYXZlIHBhcmVudGhlc2lzIGZvciBjb3JyZWN0IHByZWNlZGVuY2U6XG4gKiA8cHJlIGNsYXNzPVwicHJldHR5cHJpbnRcIj5cbiAqIGA8ZGl2IG5nLWluaXQ9XCJ0ZXN0MSA9IChkYXRhIHwgb3JkZXJCeTonbmFtZScpXCI+PC9kaXY+YFxuICogPC9wcmU+XG4gKiA8L2Rpdj5cbiAqXG4gKiBAcHJpb3JpdHkgNDUwXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSW5pdCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJpbml0RXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgPHNjcmlwdD5cbiAgICAgYW5ndWxhci5tb2R1bGUoJ2luaXRFeGFtcGxlJywgW10pXG4gICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICRzY29wZS5saXN0ID0gW1snYScsICdiJ10sIFsnYycsICdkJ11dO1xuICAgICAgIH1dKTtcbiAgIDwvc2NyaXB0PlxuICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgPGRpdiBuZy1yZXBlYXQ9XCJpbm5lckxpc3QgaW4gbGlzdFwiIG5nLWluaXQ9XCJvdXRlckluZGV4ID0gJGluZGV4XCI+XG4gICAgICAgPGRpdiBuZy1yZXBlYXQ9XCJ2YWx1ZSBpbiBpbm5lckxpc3RcIiBuZy1pbml0PVwiaW5uZXJJbmRleCA9ICRpbmRleFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXhhbXBsZS1pbml0XCI+bGlzdFsge3tvdXRlckluZGV4fX0gXVsge3tpbm5lckluZGV4fX0gXSA9IHt7dmFsdWV9fTs8L3NwYW4+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZGl2PlxuICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgYWxpYXMgaW5kZXggcG9zaXRpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgZWxlbWVudHMgPSBlbGVtZW50LmFsbChieS5jc3MoJy5leGFtcGxlLWluaXQnKSk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMCBdWyAwIF0gPSBhOycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnRzLmdldCgxKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3RbIDAgXVsgMSBdID0gYjsnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMikuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAxIF1bIDAgXSA9IGM7Jyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDMpLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMSBdWyAxIF0gPSBkOycpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0luaXREaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XG4gIHByaW9yaXR5OiA0NTAsXG4gIGNvbXBpbGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcmU6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICBzY29wZS4kZXZhbChhdHRycy5uZ0luaXQpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTGlzdFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGV4dCBpbnB1dCB0aGF0IGNvbnZlcnRzIGJldHdlZW4gYSBkZWxpbWl0ZWQgc3RyaW5nIGFuZCBhbiBhcnJheSBvZiBzdHJpbmdzLiBUaGUgZGVmYXVsdFxuICogZGVsaW1pdGVyIGlzIGEgY29tbWEgZm9sbG93ZWQgYnkgYSBzcGFjZSAtIGVxdWl2YWxlbnQgdG8gYG5nLWxpc3Q9XCIsIFwiYC4gWW91IGNhbiBzcGVjaWZ5IGEgY3VzdG9tXG4gKiBkZWxpbWl0ZXIgYXMgdGhlIHZhbHVlIG9mIHRoZSBgbmdMaXN0YCBhdHRyaWJ1dGUgLSBmb3IgZXhhbXBsZSwgYG5nLWxpc3Q9XCIgfCBcImAuXG4gKlxuICogVGhlIGJlaGF2aW91ciBvZiB0aGUgZGlyZWN0aXZlIGlzIGFmZmVjdGVkIGJ5IHRoZSB1c2Ugb2YgdGhlIGBuZ1RyaW1gIGF0dHJpYnV0ZS5cbiAqICogSWYgYG5nVHJpbWAgaXMgc2V0IHRvIGBcImZhbHNlXCJgIHRoZW4gd2hpdGVzcGFjZSBhcm91bmQgYm90aCB0aGUgc2VwYXJhdG9yIGFuZCBlYWNoXG4gKiAgIGxpc3QgaXRlbSBpcyByZXNwZWN0ZWQuIFRoaXMgaW1wbGllcyB0aGF0IHRoZSB1c2VyIG9mIHRoZSBkaXJlY3RpdmUgaXMgcmVzcG9uc2libGUgZm9yXG4gKiAgIGRlYWxpbmcgd2l0aCB3aGl0ZXNwYWNlIGJ1dCBhbHNvIGFsbG93cyB5b3UgdG8gdXNlIHdoaXRlc3BhY2UgYXMgYSBkZWxpbWl0ZXIsIHN1Y2ggYXMgYVxuICogICB0YWIgb3IgbmV3bGluZSBjaGFyYWN0ZXIuXG4gKiAqIE90aGVyd2lzZSB3aGl0ZXNwYWNlIGFyb3VuZCB0aGUgZGVsaW1pdGVyIGlzIGlnbm9yZWQgd2hlbiBzcGxpdHRpbmcgKGFsdGhvdWdoIGl0IGlzIHJlc3BlY3RlZFxuICogICB3aGVuIGpvaW5pbmcgdGhlIGxpc3QgaXRlbXMgYmFjayB0b2dldGhlcikgYW5kIHdoaXRlc3BhY2UgYXJvdW5kIGVhY2ggbGlzdCBpdGVtIGlzIHN0cmlwcGVkXG4gKiAgIGJlZm9yZSBpdCBpcyBhZGRlZCB0byB0aGUgbW9kZWwuXG4gKlxuICogIyMjIEV4YW1wbGUgd2l0aCBWYWxpZGF0aW9uXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cIm5nTGlzdC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJsaXN0RXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgIGFuZ3VsYXIubW9kdWxlKCdsaXN0RXhhbXBsZScsIFtdKVxuICogICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICAkc2NvcGUubmFtZXMgPSBbJ21vcnBoZXVzJywgJ25lbycsICd0cmluaXR5J107XG4gKiAgICAgICAgfV0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgIExpc3Q6IDxpbnB1dCBuYW1lPVwibmFtZXNJbnB1dFwiIG5nLW1vZGVsPVwibmFtZXNcIiBuZy1saXN0IHJlcXVpcmVkPlxuICogICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5uYW1lc0lucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICogICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAqICAgICAgPGJyPlxuICogICAgICA8dHQ+bmFtZXMgPSB7e25hbWVzfX08L3R0Pjxici8+XG4gKiAgICAgIDx0dD5teUZvcm0ubmFtZXNJbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICogICAgICA8dHQ+bXlGb3JtLm5hbWVzSW5wdXQuJGVycm9yID0ge3tteUZvcm0ubmFtZXNJbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAqICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAqICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICogICAgIDwvZm9ybT5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgdmFyIGxpc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ25hbWVzJykpO1xuICogICAgIHZhciBuYW1lcyA9IGVsZW1lbnQoYnkuZXhhY3RCaW5kaW5nKCduYW1lcycpKTtcbiAqICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZCcpKTtcbiAqICAgICB2YXIgZXJyb3IgPSBlbGVtZW50KGJ5LmNzcygnc3Bhbi5lcnJvcicpKTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QobmFtZXMuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1tcIm1vcnBoZXVzXCIsXCJuZW9cIixcInRyaW5pdHlcIl0nKTtcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICogICAgICAgZXhwZWN0KGVycm9yLmdldENzc1ZhbHVlKCdkaXNwbGF5JykpLnRvQmUoJ25vbmUnKTtcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBsaXN0SW5wdXQuY2xlYXIoKTtcbiAqICAgICAgIGxpc3RJbnB1dC5zZW5kS2V5cygnJyk7XG4gKlxuICogICAgICAgZXhwZWN0KG5hbWVzLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAqICAgICAgIGV4cGVjdChlcnJvci5nZXRDc3NWYWx1ZSgnZGlzcGxheScpKS5ub3QudG9CZSgnbm9uZScpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogIyMjIEV4YW1wbGUgLSBzcGxpdHRpbmcgb24gd2hpdGVzcGFjZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nTGlzdC1kaXJlY3RpdmUtbmV3bGluZXNcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cImxpc3RcIiBuZy1saXN0PVwiJiMxMDtcIiBuZy10cmltPVwiZmFsc2VcIj48L3RleHRhcmVhPlxuICogICAgPHByZT57eyBsaXN0IHwganNvbiB9fTwvcHJlPlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICBpdChcInNob3VsZCBzcGxpdCB0aGUgdGV4dCBieSBuZXdsaW5lc1wiLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIHZhciBsaXN0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdsaXN0JykpO1xuICogICAgICAgdmFyIG91dHB1dCA9IGVsZW1lbnQoYnkuYmluZGluZygnbGlzdCB8IGpzb24nKSk7XG4gKiAgICAgICBsaXN0SW5wdXQuc2VuZEtleXMoJ2FiY1xcbmRlZlxcbmdoaScpO1xuICogICAgICAgZXhwZWN0KG91dHB1dC5nZXRUZXh0KCkpLnRvQ29udGFpbignW1xcbiAgXCJhYmNcIixcXG4gIFwiZGVmXCIsXFxuICBcImdoaVwiXFxuXScpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgaW5wdXRcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdMaXN0IG9wdGlvbmFsIGRlbGltaXRlciB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHNwbGl0IHRoZSB2YWx1ZS5cbiAqL1xudmFyIG5nTGlzdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcHJpb3JpdHk6IDEwMCxcbiAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcbiAgICAgIC8vIFdlIHdhbnQgdG8gY29udHJvbCB3aGl0ZXNwYWNlIHRyaW1taW5nIHNvIHdlIHVzZSB0aGlzIGNvbnZvbHV0ZWQgYXBwcm9hY2hcbiAgICAgIC8vIHRvIGFjY2VzcyB0aGUgbmdMaXN0IGF0dHJpYnV0ZSwgd2hpY2ggZG9lc24ndCBwcmUtdHJpbSB0aGUgYXR0cmlidXRlXG4gICAgICB2YXIgbmdMaXN0ID0gZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIubmdMaXN0KSB8fCAnLCAnO1xuICAgICAgdmFyIHRyaW1WYWx1ZXMgPSBhdHRyLm5nVHJpbSAhPT0gJ2ZhbHNlJztcbiAgICAgIHZhciBzZXBhcmF0b3IgPSB0cmltVmFsdWVzID8gdHJpbShuZ0xpc3QpIDogbmdMaXN0O1xuXG4gICAgICB2YXIgcGFyc2UgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHZpZXdWYWx1ZSBpcyBpbnZhbGlkIChzYXkgcmVxdWlyZWQgYnV0IGVtcHR5KSBpdCB3aWxsIGJlIGB1bmRlZmluZWRgXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh2aWV3VmFsdWUpKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcblxuICAgICAgICBpZiAodmlld1ZhbHVlKSB7XG4gICAgICAgICAgZm9yRWFjaCh2aWV3VmFsdWUuc3BsaXQoc2VwYXJhdG9yKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgbGlzdC5wdXNoKHRyaW1WYWx1ZXMgPyB0cmltKHZhbHVlKSA6IHZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgfTtcblxuICAgICAgY3RybC4kcGFyc2Vycy5wdXNoKHBhcnNlKTtcbiAgICAgIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuam9pbihuZ0xpc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPdmVycmlkZSB0aGUgc3RhbmRhcmQgJGlzRW1wdHkgYmVjYXVzZSBhbiBlbXB0eSBhcnJheSBtZWFucyB0aGUgaW5wdXQgaXMgZW1wdHkuXG4gICAgICBjdHJsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZSB8fCAhdmFsdWUubGVuZ3RoO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgVkFMSURfQ0xBU1M6IHRydWUsXG4gIElOVkFMSURfQ0xBU1M6IHRydWUsXG4gIFBSSVNUSU5FX0NMQVNTOiB0cnVlLFxuICBESVJUWV9DTEFTUzogdHJ1ZSxcbiAgVU5UT1VDSEVEX0NMQVNTOiB0cnVlLFxuICBUT1VDSEVEX0NMQVNTOiB0cnVlLFxuKi9cblxudmFyIFZBTElEX0NMQVNTID0gJ25nLXZhbGlkJyxcbiAgICBJTlZBTElEX0NMQVNTID0gJ25nLWludmFsaWQnLFxuICAgIFBSSVNUSU5FX0NMQVNTID0gJ25nLXByaXN0aW5lJyxcbiAgICBESVJUWV9DTEFTUyA9ICduZy1kaXJ0eScsXG4gICAgVU5UT1VDSEVEX0NMQVNTID0gJ25nLXVudG91Y2hlZCcsXG4gICAgVE9VQ0hFRF9DTEFTUyA9ICduZy10b3VjaGVkJyxcbiAgICBQRU5ESU5HX0NMQVNTID0gJ25nLXBlbmRpbmcnO1xuXG5cbnZhciAkbmdNb2RlbE1pbkVyciA9IG5ldyBtaW5FcnIoJ25nTW9kZWwnKTtcblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlclxuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSAkdmlld1ZhbHVlIEFjdHVhbCBzdHJpbmcgdmFsdWUgaW4gdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkgeyp9ICRtb2RlbFZhbHVlIFRoZSB2YWx1ZSBpbiB0aGUgbW9kZWwgdGhhdCB0aGUgY29udHJvbCBpcyBib3VuZCB0by5cbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJHBhcnNlcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUsIGFzIGEgcGlwZWxpbmUsIHdoZW5ldmVyXG4gICAgICAgdGhlIGNvbnRyb2wgcmVhZHMgdmFsdWUgZnJvbSB0aGUgRE9NLiBUaGUgZnVuY3Rpb25zIGFyZSBjYWxsZWQgaW4gYXJyYXkgb3JkZXIsIGVhY2ggcGFzc2luZ1xuICAgICAgIGl0cyByZXR1cm4gdmFsdWUgdGhyb3VnaCB0byB0aGUgbmV4dC4gVGhlIGxhc3QgcmV0dXJuIHZhbHVlIGlzIGZvcndhcmRlZCB0byB0aGVcbiAgICAgICB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyBgJHZhbGlkYXRvcnNgfSBjb2xsZWN0aW9uLlxuXG5QYXJzZXJzIGFyZSB1c2VkIHRvIHNhbml0aXplIC8gY29udmVydCB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZVxuYCR2aWV3VmFsdWVgfS5cblxuUmV0dXJuaW5nIGB1bmRlZmluZWRgIGZyb20gYSBwYXJzZXIgbWVhbnMgYSBwYXJzZSBlcnJvciBvY2N1cnJlZC4gSW4gdGhhdCBjYXNlLFxubm8ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYCR2YWxpZGF0b3JzYH0gd2lsbCBydW4gYW5kIHRoZSBgbmdNb2RlbGBcbndpbGwgYmUgc2V0IHRvIGB1bmRlZmluZWRgIHVubGVzcyB7QGxpbmsgbmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zLmFsbG93SW52YWxpZGB9XG5pcyBzZXQgdG8gYHRydWVgLiBUaGUgcGFyc2UgZXJyb3IgaXMgc3RvcmVkIGluIGBuZ01vZGVsLiRlcnJvci5wYXJzZWAuXG5cbiAqXG4gKiBAcHJvcGVydHkge0FycmF5LjxGdW5jdGlvbj59ICRmb3JtYXR0ZXJzIEFycmF5IG9mIGZ1bmN0aW9ucyB0byBleGVjdXRlLCBhcyBhIHBpcGVsaW5lLCB3aGVuZXZlclxuICAgICAgIHRoZSBtb2RlbCB2YWx1ZSBjaGFuZ2VzLiBUaGUgZnVuY3Rpb25zIGFyZSBjYWxsZWQgaW4gcmV2ZXJzZSBhcnJheSBvcmRlciwgZWFjaCBwYXNzaW5nIHRoZSB2YWx1ZSB0aHJvdWdoIHRvIHRoZVxuICAgICAgIG5leHQuIFRoZSBsYXN0IHJldHVybiB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBhY3R1YWwgRE9NIHZhbHVlLlxuICAgICAgIFVzZWQgdG8gZm9ybWF0IC8gY29udmVydCB2YWx1ZXMgZm9yIGRpc3BsYXkgaW4gdGhlIGNvbnRyb2wuXG4gKiBgYGBqc1xuICogZnVuY3Rpb24gZm9ybWF0dGVyKHZhbHVlKSB7XG4gKiAgIGlmICh2YWx1ZSkge1xuICogICAgIHJldHVybiB2YWx1ZS50b1VwcGVyQ2FzZSgpO1xuICogICB9XG4gKiB9XG4gKiBuZ01vZGVsLiRmb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcbiAqIGBgYFxuICpcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPn0gJHZhbGlkYXRvcnMgQSBjb2xsZWN0aW9uIG9mIHZhbGlkYXRvcnMgdGhhdCBhcmUgYXBwbGllZFxuICogICAgICB3aGVuZXZlciB0aGUgbW9kZWwgdmFsdWUgY2hhbmdlcy4gVGhlIGtleSB2YWx1ZSB3aXRoaW4gdGhlIG9iamVjdCByZWZlcnMgdG8gdGhlIG5hbWUgb2YgdGhlXG4gKiAgICAgIHZhbGlkYXRvciB3aGlsZSB0aGUgZnVuY3Rpb24gcmVmZXJzIHRvIHRoZSB2YWxpZGF0aW9uIG9wZXJhdGlvbi4gVGhlIHZhbGlkYXRpb24gb3BlcmF0aW9uIGlzXG4gKiAgICAgIHByb3ZpZGVkIHdpdGggdGhlIG1vZGVsIHZhbHVlIGFzIGFuIGFyZ3VtZW50IGFuZCBtdXN0IHJldHVybiBhIHRydWUgb3IgZmFsc2UgdmFsdWUgZGVwZW5kaW5nXG4gKiAgICAgIG9uIHRoZSByZXNwb25zZSBvZiB0aGF0IHZhbGlkYXRpb24uXG4gKlxuICogYGBganNcbiAqIG5nTW9kZWwuJHZhbGlkYXRvcnMudmFsaWRDaGFyYWN0ZXJzID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gKiAgIHZhciB2YWx1ZSA9IG1vZGVsVmFsdWUgfHwgdmlld1ZhbHVlO1xuICogICByZXR1cm4gL1swLTldKy8udGVzdCh2YWx1ZSkgJiZcbiAqICAgICAgICAgIC9bYS16XSsvLnRlc3QodmFsdWUpICYmXG4gKiAgICAgICAgICAvW0EtWl0rLy50ZXN0KHZhbHVlKSAmJlxuICogICAgICAgICAgL1xcVysvLnRlc3QodmFsdWUpO1xuICogfTtcbiAqIGBgYFxuICpcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPn0gJGFzeW5jVmFsaWRhdG9ycyBBIGNvbGxlY3Rpb24gb2YgdmFsaWRhdGlvbnMgdGhhdCBhcmUgZXhwZWN0ZWQgdG9cbiAqICAgICAgcGVyZm9ybSBhbiBhc3luY2hyb25vdXMgdmFsaWRhdGlvbiAoZS5nLiBhIEhUVFAgcmVxdWVzdCkuIFRoZSB2YWxpZGF0aW9uIGZ1bmN0aW9uIHRoYXQgaXMgcHJvdmlkZWRcbiAqICAgICAgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGEgcHJvbWlzZSB3aGVuIGl0IGlzIHJ1biBkdXJpbmcgdGhlIG1vZGVsIHZhbGlkYXRpb24gcHJvY2Vzcy4gT25jZSB0aGUgcHJvbWlzZVxuICogICAgICBpcyBkZWxpdmVyZWQgdGhlbiB0aGUgdmFsaWRhdGlvbiBzdGF0dXMgd2lsbCBiZSBzZXQgdG8gdHJ1ZSB3aGVuIGZ1bGZpbGxlZCBhbmQgZmFsc2Ugd2hlbiByZWplY3RlZC5cbiAqICAgICAgV2hlbiB0aGUgYXN5bmNocm9ub3VzIHZhbGlkYXRvcnMgYXJlIHRyaWdnZXJlZCwgZWFjaCBvZiB0aGUgdmFsaWRhdG9ycyB3aWxsIHJ1biBpbiBwYXJhbGxlbCBhbmQgdGhlIG1vZGVsXG4gKiAgICAgIHZhbHVlIHdpbGwgb25seSBiZSB1cGRhdGVkIG9uY2UgYWxsIHZhbGlkYXRvcnMgaGF2ZSBiZWVuIGZ1bGZpbGxlZC4gQXMgbG9uZyBhcyBhbiBhc3luY2hyb25vdXMgdmFsaWRhdG9yXG4gKiAgICAgIGlzIHVuZnVsZmlsbGVkLCBpdHMga2V5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGNvbnRyb2xsZXJzIGAkcGVuZGluZ2AgcHJvcGVydHkuIEFsc28sIGFsbCBhc3luY2hyb25vdXMgdmFsaWRhdG9yc1xuICogICAgICB3aWxsIG9ubHkgcnVuIG9uY2UgYWxsIHN5bmNocm9ub3VzIHZhbGlkYXRvcnMgaGF2ZSBwYXNzZWQuXG4gKlxuICogUGxlYXNlIG5vdGUgdGhhdCBpZiAkaHR0cCBpcyB1c2VkIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRoYXQgdGhlIHNlcnZlciByZXR1cm5zIGEgc3VjY2VzcyBIVFRQIHJlc3BvbnNlIGNvZGVcbiAqIGluIG9yZGVyIHRvIGZ1bGZpbGwgdGhlIHZhbGlkYXRpb24gYW5kIGEgc3RhdHVzIGxldmVsIG9mIGA0eHhgIGluIG9yZGVyIHRvIHJlamVjdCB0aGUgdmFsaWRhdGlvbi5cbiAqXG4gKiBgYGBqc1xuICogbmdNb2RlbC4kYXN5bmNWYWxpZGF0b3JzLnVuaXF1ZVVzZXJuYW1lID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gKiAgIHZhciB2YWx1ZSA9IG1vZGVsVmFsdWUgfHwgdmlld1ZhbHVlO1xuICpcbiAqICAgLy8gTG9va3VwIHVzZXIgYnkgdXNlcm5hbWVcbiAqICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2Vycy8nICsgdmFsdWUpLlxuICogICAgICB0aGVuKGZ1bmN0aW9uIHJlc29sdmVkKCkge1xuICogICAgICAgIC8vdXNlcm5hbWUgZXhpc3RzLCB0aGlzIG1lYW5zIHZhbGlkYXRpb24gZmFpbHNcbiAqICAgICAgICByZXR1cm4gJHEucmVqZWN0KCdleGlzdHMnKTtcbiAqICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0ZWQoKSB7XG4gKiAgICAgICAgLy91c2VybmFtZSBkb2VzIG5vdCBleGlzdCwgdGhlcmVmb3JlIHRoaXMgdmFsaWRhdGlvbiBwYXNzZXNcbiAqICAgICAgICByZXR1cm4gdHJ1ZTtcbiAqICAgICAgfSk7XG4gKiB9O1xuICogYGBgXG4gKlxuICogQHByb3BlcnR5IHtBcnJheS48RnVuY3Rpb24+fSAkdmlld0NoYW5nZUxpc3RlbmVycyBBcnJheSBvZiBmdW5jdGlvbnMgdG8gZXhlY3V0ZSB3aGVuZXZlciB0aGVcbiAqICAgICB2aWV3IHZhbHVlIGhhcyBjaGFuZ2VkLiBJdCBpcyBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIGFuZCBpdHMgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gKiAgICAgVGhpcyBjYW4gYmUgdXNlZCBpbiBwbGFjZSBvZiBhZGRpdGlvbmFsICR3YXRjaGVzIGFnYWluc3QgdGhlIG1vZGVsIHZhbHVlLlxuICpcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkZXJyb3IgQW4gb2JqZWN0IGhhc2ggd2l0aCBhbGwgZmFpbGluZyB2YWxpZGF0b3IgaWRzIGFzIGtleXMuXG4gKiBAcHJvcGVydHkge09iamVjdH0gJHBlbmRpbmcgQW4gb2JqZWN0IGhhc2ggd2l0aCBhbGwgcGVuZGluZyB2YWxpZGF0b3IgaWRzIGFzIGtleXMuXG4gKlxuICogQHByb3BlcnR5IHtib29sZWFufSAkdW50b3VjaGVkIFRydWUgaWYgY29udHJvbCBoYXMgbm90IGxvc3QgZm9jdXMgeWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkdG91Y2hlZCBUcnVlIGlmIGNvbnRyb2wgaGFzIGxvc3QgZm9jdXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRwcmlzdGluZSBUcnVlIGlmIHVzZXIgaGFzIG5vdCBpbnRlcmFjdGVkIHdpdGggdGhlIGNvbnRyb2wgeWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgY29udHJvbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHZhbGlkIFRydWUgaWYgdGhlcmUgaXMgbm8gZXJyb3IuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRpbnZhbGlkIFRydWUgaWYgYXQgbGVhc3Qgb25lIGVycm9yIG9uIHRoZSBjb250cm9sLlxuICogQHByb3BlcnR5IHtzdHJpbmd9ICRuYW1lIFRoZSBuYW1lIGF0dHJpYnV0ZSBvZiB0aGUgY29udHJvbC5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgTmdNb2RlbENvbnRyb2xsZXJgIHByb3ZpZGVzIEFQSSBmb3IgdGhlIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0gZGlyZWN0aXZlLlxuICogVGhlIGNvbnRyb2xsZXIgY29udGFpbnMgc2VydmljZXMgZm9yIGRhdGEtYmluZGluZywgdmFsaWRhdGlvbiwgQ1NTIHVwZGF0ZXMsIGFuZCB2YWx1ZSBmb3JtYXR0aW5nXG4gKiBhbmQgcGFyc2luZy4gSXQgcHVycG9zZWZ1bGx5IGRvZXMgbm90IGNvbnRhaW4gYW55IGxvZ2ljIHdoaWNoIGRlYWxzIHdpdGggRE9NIHJlbmRlcmluZyBvclxuICogbGlzdGVuaW5nIHRvIERPTSBldmVudHMuXG4gKiBTdWNoIERPTSByZWxhdGVkIGxvZ2ljIHNob3VsZCBiZSBwcm92aWRlZCBieSBvdGhlciBkaXJlY3RpdmVzIHdoaWNoIG1ha2UgdXNlIG9mXG4gKiBgTmdNb2RlbENvbnRyb2xsZXJgIGZvciBkYXRhLWJpbmRpbmcgdG8gY29udHJvbCBlbGVtZW50cy5cbiAqIEFuZ3VsYXIgcHJvdmlkZXMgdGhpcyBET00gbG9naWMgZm9yIG1vc3Qge0BsaW5rIGlucHV0IGBpbnB1dGB9IGVsZW1lbnRzLlxuICogQXQgdGhlIGVuZCBvZiB0aGlzIHBhZ2UgeW91IGNhbiBmaW5kIGEge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjY3VzdG9tLWNvbnRyb2wtZXhhbXBsZVxuICogY3VzdG9tIGNvbnRyb2wgZXhhbXBsZX0gdGhhdCB1c2VzIGBuZ01vZGVsQ29udHJvbGxlcmAgdG8gYmluZCB0byBgY29udGVudGVkaXRhYmxlYCBlbGVtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEN1c3RvbSBDb250cm9sIEV4YW1wbGVcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gdXNlIGBOZ01vZGVsQ29udHJvbGxlcmAgd2l0aCBhIGN1c3RvbSBjb250cm9sIHRvIGFjaGlldmVcbiAqIGRhdGEtYmluZGluZy4gTm90aWNlIGhvdyBkaWZmZXJlbnQgZGlyZWN0aXZlcyAoYGNvbnRlbnRlZGl0YWJsZWAsIGBuZy1tb2RlbGAsIGFuZCBgcmVxdWlyZWRgKVxuICogY29sbGFib3JhdGUgdG9nZXRoZXIgdG8gYWNoaWV2ZSB0aGUgZGVzaXJlZCByZXN1bHQuXG4gKlxuICogTm90ZSB0aGF0IGBjb250ZW50ZWRpdGFibGVgIGlzIGFuIEhUTUw1IGF0dHJpYnV0ZSwgd2hpY2ggdGVsbHMgdGhlIGJyb3dzZXIgdG8gbGV0IHRoZSBlbGVtZW50XG4gKiBjb250ZW50cyBiZSBlZGl0ZWQgaW4gcGxhY2UgYnkgdGhlIHVzZXIuICBUaGlzIHdpbGwgbm90IHdvcmsgb24gb2xkZXIgYnJvd3NlcnMuXG4gKlxuICogV2UgYXJlIHVzaW5nIHRoZSB7QGxpbmsgbmcuc2VydmljZTokc2NlICRzY2V9IHNlcnZpY2UgaGVyZSBhbmQgaW5jbHVkZSB0aGUge0BsaW5rIG5nU2FuaXRpemUgJHNhbml0aXplfVxuICogbW9kdWxlIHRvIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIFwiYmFkXCIgY29udGVudCBsaWtlIGlubGluZSBldmVudCBsaXN0ZW5lciAoZS5nLiBgPHNwYW4gb25jbGljaz1cIi4uLlwiPmApLlxuICogSG93ZXZlciwgYXMgd2UgYXJlIHVzaW5nIGAkc2NlYCB0aGUgbW9kZWwgY2FuIHN0aWxsIGRlY2lkZSB0byBwcm92aWRlIHVuc2FmZSBjb250ZW50IGlmIGl0IG1hcmtzXG4gKiB0aGF0IGNvbnRlbnQgdXNpbmcgdGhlIGAkc2NlYCBzZXJ2aWNlLlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJOZ01vZGVsQ29udHJvbGxlclwiIG1vZHVsZT1cImN1c3RvbUNvbnRyb2xcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiPlxuICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgIFtjb250ZW50ZWRpdGFibGVdIHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICBtaW4taGVpZ2h0OiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAubmctaW52YWxpZCB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJlZDtcbiAgICAgIH1cblxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tQ29udHJvbCcsIFsnbmdTYW5pdGl6ZSddKS5cbiAgICAgICAgZGlyZWN0aXZlKCdjb250ZW50ZWRpdGFibGUnLCBbJyRzY2UnLCBmdW5jdGlvbigkc2NlKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsIC8vIG9ubHkgYWN0aXZhdGUgb24gZWxlbWVudCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsIC8vIGdldCBhIGhvbGQgb2YgTmdNb2RlbENvbnRyb2xsZXJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgICBpZiAoIW5nTW9kZWwpIHJldHVybjsgLy8gZG8gbm90aGluZyBpZiBubyBuZy1tb2RlbFxuXG4gICAgICAgICAgICAgIC8vIFNwZWNpZnkgaG93IFVJIHNob3VsZCBiZSB1cGRhdGVkXG4gICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbCgkc2NlLmdldFRydXN0ZWRIdG1sKG5nTW9kZWwuJHZpZXdWYWx1ZSB8fCAnJykpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIC8vIExpc3RlbiBmb3IgY2hhbmdlIGV2ZW50cyB0byBlbmFibGUgYmluZGluZ1xuICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdibHVyIGtleXVwIGNoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMocmVhZCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZWFkKCk7IC8vIGluaXRpYWxpemVcblxuICAgICAgICAgICAgICAvLyBXcml0ZSBkYXRhIHRvIHRoZSBtb2RlbFxuICAgICAgICAgICAgICBmdW5jdGlvbiByZWFkKCkge1xuICAgICAgICAgICAgICAgIHZhciBodG1sID0gZWxlbWVudC5odG1sKCk7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB3ZSBjbGVhciB0aGUgY29udGVudCBlZGl0YWJsZSB0aGUgYnJvd3NlciBsZWF2ZXMgYSA8YnI+IGJlaGluZFxuICAgICAgICAgICAgICAgIC8vIElmIHN0cmlwLWJyIGF0dHJpYnV0ZSBpcyBwcm92aWRlZCB0aGVuIHdlIHN0cmlwIHRoaXMgb3V0XG4gICAgICAgICAgICAgICAgaWYgKCBhdHRycy5zdHJpcEJyICYmIGh0bWwgPT0gJzxicj4nICkge1xuICAgICAgICAgICAgICAgICAgaHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUoaHRtbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gICAgICAgPGRpdiBjb250ZW50ZWRpdGFibGVcbiAgICAgICAgICAgIG5hbWU9XCJteVdpZGdldFwiIG5nLW1vZGVsPVwidXNlckNvbnRlbnRcIlxuICAgICAgICAgICAgc3RyaXAtYnI9XCJ0cnVlXCJcbiAgICAgICAgICAgIHJlcXVpcmVkPkNoYW5nZSBtZSE8L2Rpdj5cbiAgICAgICAgPHNwYW4gbmctc2hvdz1cIm15Rm9ybS5teVdpZGdldC4kZXJyb3IucmVxdWlyZWRcIj5SZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgPGhyPlxuICAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInVzZXJDb250ZW50XCI+PC90ZXh0YXJlYT5cbiAgICAgIDwvZm9ybT5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgIGl0KCdzaG91bGQgZGF0YS1iaW5kIGFuZCBiZWNvbWUgaW52YWxpZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT0gJ3NhZmFyaScgfHwgYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PSAnZmlyZWZveCcpIHtcbiAgICAgICAgLy8gU2FmYXJpRHJpdmVyIGNhbid0IGhhbmRsZSBjb250ZW50ZWRpdGFibGVcbiAgICAgICAgLy8gYW5kIEZpcmVmb3ggZHJpdmVyIGNhbid0IGNsZWFyIGNvbnRlbnRlZGl0YWJsZXMgdmVyeSB3ZWxsXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBjb250ZW50RWRpdGFibGUgPSBlbGVtZW50KGJ5LmNzcygnW2NvbnRlbnRlZGl0YWJsZV0nKSk7XG4gICAgICB2YXIgY29udGVudCA9ICdDaGFuZ2UgbWUhJztcblxuICAgICAgZXhwZWN0KGNvbnRlbnRFZGl0YWJsZS5nZXRUZXh0KCkpLnRvRXF1YWwoY29udGVudCk7XG5cbiAgICAgIGNvbnRlbnRFZGl0YWJsZS5jbGVhcigpO1xuICAgICAgY29udGVudEVkaXRhYmxlLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkJBQ0tfU1BBQ0UpO1xuICAgICAgZXhwZWN0KGNvbnRlbnRFZGl0YWJsZS5nZXRUZXh0KCkpLnRvRXF1YWwoJycpO1xuICAgICAgZXhwZWN0KGNvbnRlbnRFZGl0YWJsZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL25nLWludmFsaWQtcmVxdWlyZWQvKTtcbiAgICB9KTtcbiAgICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqL1xudmFyIE5nTW9kZWxDb250cm9sbGVyID0gWyckc2NvcGUnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCAnJGF0dHJzJywgJyRlbGVtZW50JywgJyRwYXJzZScsICckYW5pbWF0ZScsICckdGltZW91dCcsICckcm9vdFNjb3BlJywgJyRxJywgJyRpbnRlcnBvbGF0ZScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkZXhjZXB0aW9uSGFuZGxlciwgJGF0dHIsICRlbGVtZW50LCAkcGFyc2UsICRhbmltYXRlLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJHEsICRpbnRlcnBvbGF0ZSkge1xuICB0aGlzLiR2aWV3VmFsdWUgPSBOdW1iZXIuTmFOO1xuICB0aGlzLiRtb2RlbFZhbHVlID0gTnVtYmVyLk5hTjtcbiAgdGhpcy4kJHJhd01vZGVsVmFsdWUgPSB1bmRlZmluZWQ7IC8vIHN0b3JlcyB0aGUgcGFyc2VkIG1vZGVsVmFsdWUgLyBtb2RlbCBzZXQgZnJvbSBzY29wZSByZWdhcmRsZXNzIG9mIHZhbGlkaXR5LlxuICB0aGlzLiR2YWxpZGF0b3JzID0ge307XG4gIHRoaXMuJGFzeW5jVmFsaWRhdG9ycyA9IHt9O1xuICB0aGlzLiRwYXJzZXJzID0gW107XG4gIHRoaXMuJGZvcm1hdHRlcnMgPSBbXTtcbiAgdGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycyA9IFtdO1xuICB0aGlzLiR1bnRvdWNoZWQgPSB0cnVlO1xuICB0aGlzLiR0b3VjaGVkID0gZmFsc2U7XG4gIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcbiAgdGhpcy4kZGlydHkgPSBmYWxzZTtcbiAgdGhpcy4kdmFsaWQgPSB0cnVlO1xuICB0aGlzLiRpbnZhbGlkID0gZmFsc2U7XG4gIHRoaXMuJGVycm9yID0ge307IC8vIGtlZXAgaW52YWxpZCBrZXlzIGhlcmVcbiAgdGhpcy4kJHN1Y2Nlc3MgPSB7fTsgLy8ga2VlcCB2YWxpZCBrZXlzIGhlcmVcbiAgdGhpcy4kcGVuZGluZyA9IHVuZGVmaW5lZDsgLy8ga2VlcCBwZW5kaW5nIGtleXMgaGVyZVxuICB0aGlzLiRuYW1lID0gJGludGVycG9sYXRlKCRhdHRyLm5hbWUgfHwgJycsIGZhbHNlKSgkc2NvcGUpO1xuXG5cbiAgdmFyIHBhcnNlZE5nTW9kZWwgPSAkcGFyc2UoJGF0dHIubmdNb2RlbCksXG4gICAgICBwYXJzZWROZ01vZGVsQXNzaWduID0gcGFyc2VkTmdNb2RlbC5hc3NpZ24sXG4gICAgICBuZ01vZGVsR2V0ID0gcGFyc2VkTmdNb2RlbCxcbiAgICAgIG5nTW9kZWxTZXQgPSBwYXJzZWROZ01vZGVsQXNzaWduLFxuICAgICAgcGVuZGluZ0RlYm91bmNlID0gbnVsbCxcbiAgICAgIGN0cmwgPSB0aGlzO1xuXG4gIHRoaXMuJCRzZXRPcHRpb25zID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGN0cmwuJG9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2V0dGVyU2V0dGVyKSB7XG4gICAgICB2YXIgaW52b2tlTW9kZWxHZXR0ZXIgPSAkcGFyc2UoJGF0dHIubmdNb2RlbCArICcoKScpLFxuICAgICAgICAgIGludm9rZU1vZGVsU2V0dGVyID0gJHBhcnNlKCRhdHRyLm5nTW9kZWwgKyAnKCQkJHApJyk7XG5cbiAgICAgIG5nTW9kZWxHZXQgPSBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgdmFyIG1vZGVsVmFsdWUgPSBwYXJzZWROZ01vZGVsKCRzY29wZSk7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG1vZGVsVmFsdWUpKSB7XG4gICAgICAgICAgbW9kZWxWYWx1ZSA9IGludm9rZU1vZGVsR2V0dGVyKCRzY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWU7XG4gICAgICB9O1xuICAgICAgbmdNb2RlbFNldCA9IGZ1bmN0aW9uKCRzY29wZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ocGFyc2VkTmdNb2RlbCgkc2NvcGUpKSkge1xuICAgICAgICAgIGludm9rZU1vZGVsU2V0dGVyKCRzY29wZSwgeyQkJHA6IGN0cmwuJG1vZGVsVmFsdWV9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJzZWROZ01vZGVsQXNzaWduKCRzY29wZSwgY3RybC4kbW9kZWxWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICghcGFyc2VkTmdNb2RlbC5hc3NpZ24pIHtcbiAgICAgIHRocm93ICRuZ01vZGVsTWluRXJyKCdub25hc3NpZ24nLCBcIkV4cHJlc3Npb24gJ3swfScgaXMgbm9uLWFzc2lnbmFibGUuIEVsZW1lbnQ6IHsxfVwiLFxuICAgICAgICAgICRhdHRyLm5nTW9kZWwsIHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHJlbmRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ2FsbGVkIHdoZW4gdGhlIHZpZXcgbmVlZHMgdG8gYmUgdXBkYXRlZC4gSXQgaXMgZXhwZWN0ZWQgdGhhdCB0aGUgdXNlciBvZiB0aGUgbmctbW9kZWxcbiAgICogZGlyZWN0aXZlIHdpbGwgaW1wbGVtZW50IHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBUaGUgYCRyZW5kZXIoKWAgbWV0aG9kIGlzIGludm9rZWQgaW4gdGhlIGZvbGxvd2luZyBzaXR1YXRpb25zOlxuICAgKlxuICAgKiAqIGAkcm9sbGJhY2tWaWV3VmFsdWUoKWAgaXMgY2FsbGVkLiAgSWYgd2UgYXJlIHJvbGxpbmcgYmFjayB0aGUgdmlldyB2YWx1ZSB0byB0aGUgbGFzdFxuICAgKiAgIGNvbW1pdHRlZCB2YWx1ZSB0aGVuIGAkcmVuZGVyKClgIGlzIGNhbGxlZCB0byB1cGRhdGUgdGhlIGlucHV0IGNvbnRyb2wuXG4gICAqICogVGhlIHZhbHVlIHJlZmVyZW5jZWQgYnkgYG5nLW1vZGVsYCBpcyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHkgYW5kIGJvdGggdGhlIGAkbW9kZWxWYWx1ZWAgYW5kXG4gICAqICAgdGhlIGAkdmlld1ZhbHVlYCBhcmUgZGlmZmVyZW50IHRvIGxhc3QgdGltZS5cbiAgICpcbiAgICogU2luY2UgYG5nLW1vZGVsYCBkb2VzIG5vdCBkbyBhIGRlZXAgd2F0Y2gsIGAkcmVuZGVyKClgIGlzIG9ubHkgaW52b2tlZCBpZiB0aGUgdmFsdWVzIG9mXG4gICAqIGAkbW9kZWxWYWx1ZWAgYW5kIGAkdmlld1ZhbHVlYCBhcmUgYWN0dWFsbHkgZGlmZmVyZW50IHRvIHRoZWlyIHByZXZpb3VzIHZhbHVlLiBJZiBgJG1vZGVsVmFsdWVgXG4gICAqIG9yIGAkdmlld1ZhbHVlYCBhcmUgb2JqZWN0cyAocmF0aGVyIHRoYW4gYSBzdHJpbmcgb3IgbnVtYmVyKSB0aGVuIGAkcmVuZGVyKClgIHdpbGwgbm90IGJlXG4gICAqIGludm9rZWQgaWYgeW91IG9ubHkgY2hhbmdlIGEgcHJvcGVydHkgb24gdGhlIG9iamVjdHMuXG4gICAqL1xuICB0aGlzLiRyZW5kZXIgPSBub29wO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGlzRW1wdHlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgaXMgY2FsbGVkIHdoZW4gd2UgbmVlZCB0byBkZXRlcm1pbmUgaWYgdGhlIHZhbHVlIG9mIGFuIGlucHV0IGlzIGVtcHR5LlxuICAgKlxuICAgKiBGb3IgaW5zdGFuY2UsIHRoZSByZXF1aXJlZCBkaXJlY3RpdmUgZG9lcyB0aGlzIHRvIHdvcmsgb3V0IGlmIHRoZSBpbnB1dCBoYXMgZGF0YSBvciBub3QuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IGAkaXNFbXB0eWAgZnVuY3Rpb24gY2hlY2tzIHdoZXRoZXIgdGhlIHZhbHVlIGlzIGB1bmRlZmluZWRgLCBgJydgLCBgbnVsbGAgb3IgYE5hTmAuXG4gICAqXG4gICAqIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBmb3IgaW5wdXQgZGlyZWN0aXZlcyB3aG9zZSBjb25jZXB0IG9mIGJlaW5nIGVtcHR5IGlzIGRpZmZlcmVudCB0byB0aGVcbiAgICogZGVmYXVsdC4gVGhlIGBjaGVja2JveElucHV0VHlwZWAgZGlyZWN0aXZlIGRvZXMgdGhpcyBiZWNhdXNlIGluIGl0cyBjYXNlIGEgdmFsdWUgb2YgYGZhbHNlYFxuICAgKiBpbXBsaWVzIGVtcHR5LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgdG8gY2hlY2sgZm9yIGVtcHRpbmVzcy5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBcImVtcHR5XCIuXG4gICAqL1xuICB0aGlzLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpIHx8IHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWU7XG4gIH07XG5cbiAgdmFyIHBhcmVudEZvcm0gPSAkZWxlbWVudC5pbmhlcml0ZWREYXRhKCckZm9ybUNvbnRyb2xsZXInKSB8fCBudWxsRm9ybUN0cmwsXG4gICAgICBjdXJyZW50VmFsaWRhdGlvblJ1bklkID0gMDtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWYWxpZGl0eVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ2hhbmdlIHRoZSB2YWxpZGl0eSBzdGF0ZSwgYW5kIG5vdGlmeSB0aGUgZm9ybS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB3aXRoaW4gJHBhcnNlcnMvJGZvcm1hdHRlcnMgb3IgYSBjdXN0b20gdmFsaWRhdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICogSG93ZXZlciwgaW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgc3VmZmljaWVudCB0byB1c2UgdGhlIGBuZ01vZGVsLiR2YWxpZGF0b3JzYCBhbmRcbiAgICogYG5nTW9kZWwuJGFzeW5jVmFsaWRhdG9yc2AgY29sbGVjdGlvbnMgd2hpY2ggd2lsbCBjYWxsIGAkc2V0VmFsaWRpdHlgIGF1dG9tYXRpY2FsbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWxpZGF0aW9uRXJyb3JLZXkgTmFtZSBvZiB0aGUgdmFsaWRhdG9yLiBUaGUgYHZhbGlkYXRpb25FcnJvcktleWAgd2lsbCBiZSBhc3NpZ25lZFxuICAgKiAgICAgICAgdG8gZWl0aGVyIGAkZXJyb3JbdmFsaWRhdGlvbkVycm9yS2V5XWAgb3IgYCRwZW5kaW5nW3ZhbGlkYXRpb25FcnJvcktleV1gXG4gICAqICAgICAgICAoZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYCksIHNvIHRoYXQgaXQgaXMgYXZhaWxhYmxlIGZvciBkYXRhLWJpbmRpbmcuXG4gICAqICAgICAgICBUaGUgYHZhbGlkYXRpb25FcnJvcktleWAgc2hvdWxkIGJlIGluIGNhbWVsQ2FzZSBhbmQgd2lsbCBnZXQgY29udmVydGVkIGludG8gZGFzaC1jYXNlXG4gICAqICAgICAgICBmb3IgY2xhc3MgbmFtZS4gRXhhbXBsZTogYG15RXJyb3JgIHdpbGwgcmVzdWx0IGluIGBuZy12YWxpZC1teS1lcnJvcmAgYW5kIGBuZy1pbnZhbGlkLW15LWVycm9yYFxuICAgKiAgICAgICAgY2xhc3MgYW5kIGNhbiBiZSBib3VuZCB0byBhcyAgYHt7c29tZUZvcm0uc29tZUNvbnRyb2wuJGVycm9yLm15RXJyb3J9fWAgLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmFsaWQgV2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBpcyB2YWxpZCAodHJ1ZSksIGludmFsaWQgKGZhbHNlKSwgcGVuZGluZyAodW5kZWZpbmVkKSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIG9yIHNraXBwZWQgKG51bGwpLiBQZW5kaW5nIGlzIHVzZWQgZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYC5cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIFNraXBwZWQgaXMgdXNlZCBieSBBbmd1bGFyIHdoZW4gdmFsaWRhdG9ycyBkbyBub3QgcnVuIGJlY2F1c2Ugb2YgcGFyc2UgZXJyb3JzIGFuZFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiBgJGFzeW5jVmFsaWRhdG9yc2AgZG8gbm90IHJ1biBiZWNhdXNlIGFueSBvZiB0aGUgYCR2YWxpZGF0b3JzYCBmYWlsZWQuXG4gICAqL1xuICBhZGRTZXRWYWxpZGl0eU1ldGhvZCh7XG4gICAgY3RybDogdGhpcyxcbiAgICAkZWxlbWVudDogJGVsZW1lbnQsXG4gICAgc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XG4gICAgICBvYmplY3RbcHJvcGVydHldID0gdHJ1ZTtcbiAgICB9LFxuICAgIHVuc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XG4gICAgICBkZWxldGUgb2JqZWN0W3Byb3BlcnR5XTtcbiAgICB9LFxuICAgIHBhcmVudEZvcm06IHBhcmVudEZvcm0sXG4gICAgJGFuaW1hdGU6ICRhbmltYXRlXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFByaXN0aW5lXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy1kaXJ0eWAgY2xhc3MgYW5kIHNldCB0aGUgY29udHJvbCB0byBpdHMgcHJpc3RpbmVcbiAgICogc3RhdGUgKGBuZy1wcmlzdGluZWAgY2xhc3MpLiBBIG1vZGVsIGlzIGNvbnNpZGVyZWQgdG8gYmUgcHJpc3RpbmUgd2hlbiB0aGUgY29udHJvbFxuICAgKiBoYXMgbm90IGJlZW4gY2hhbmdlZCBmcm9tIHdoZW4gZmlyc3QgY29tcGlsZWQuXG4gICAqL1xuICB0aGlzLiRzZXRQcmlzdGluZSA9IGZ1bmN0aW9uKCkge1xuICAgIGN0cmwuJGRpcnR5ID0gZmFsc2U7XG4gICAgY3RybC4kcHJpc3RpbmUgPSB0cnVlO1xuICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKCRlbGVtZW50LCBESVJUWV9DTEFTUyk7XG4gICAgJGFuaW1hdGUuYWRkQ2xhc3MoJGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXREaXJ0eVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgZGlydHkgc3RhdGUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSBgbmctcHJpc3RpbmVgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzIGRpcnR5XG4gICAqIHN0YXRlIChgbmctZGlydHlgIGNsYXNzKS4gQSBtb2RlbCBpcyBjb25zaWRlcmVkIHRvIGJlIGRpcnR5IHdoZW4gdGhlIGNvbnRyb2wgaGFzIGJlZW4gY2hhbmdlZFxuICAgKiBmcm9tIHdoZW4gZmlyc3QgY29tcGlsZWQuXG4gICAqL1xuICB0aGlzLiRzZXREaXJ0eSA9IGZ1bmN0aW9uKCkge1xuICAgIGN0cmwuJGRpcnR5ID0gdHJ1ZTtcbiAgICBjdHJsLiRwcmlzdGluZSA9IGZhbHNlO1xuICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKCRlbGVtZW50LCBQUklTVElORV9DTEFTUyk7XG4gICAgJGFuaW1hdGUuYWRkQ2xhc3MoJGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcbiAgICBwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFVudG91Y2hlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgdW50b3VjaGVkIHN0YXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgYG5nLXRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXG4gICAqIHVudG91Y2hlZCBzdGF0ZSAoYG5nLXVudG91Y2hlZGAgY2xhc3MpLiBVcG9uIGNvbXBpbGF0aW9uLCBhIG1vZGVsIGlzIHNldCBhcyB1bnRvdWNoZWRcbiAgICogYnkgZGVmYXVsdCwgaG93ZXZlciB0aGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHJlc3RvcmUgdGhhdCBzdGF0ZSBpZiB0aGUgbW9kZWwgaGFzXG4gICAqIGFscmVhZHkgYmVlbiB0b3VjaGVkIGJ5IHRoZSB1c2VyLlxuICAgKi9cbiAgdGhpcy4kc2V0VW50b3VjaGVkID0gZnVuY3Rpb24oKSB7XG4gICAgY3RybC4kdG91Y2hlZCA9IGZhbHNlO1xuICAgIGN0cmwuJHVudG91Y2hlZCA9IHRydWU7XG4gICAgJGFuaW1hdGUuc2V0Q2xhc3MoJGVsZW1lbnQsIFVOVE9VQ0hFRF9DTEFTUywgVE9VQ0hFRF9DTEFTUyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VG91Y2hlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgdG91Y2hlZCBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy11bnRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXG4gICAqIHRvdWNoZWQgc3RhdGUgKGBuZy10b3VjaGVkYCBjbGFzcykuIEEgbW9kZWwgaXMgY29uc2lkZXJlZCB0byBiZSB0b3VjaGVkIHdoZW4gdGhlIHVzZXIgaGFzXG4gICAqIGZpcnN0IGZvY3VzZWQgdGhlIGNvbnRyb2wgZWxlbWVudCBhbmQgdGhlbiBzaGlmdGVkIGZvY3VzIGF3YXkgZnJvbSB0aGUgY29udHJvbCAoYmx1ciBldmVudCkuXG4gICAqL1xuICB0aGlzLiRzZXRUb3VjaGVkID0gZnVuY3Rpb24oKSB7XG4gICAgY3RybC4kdG91Y2hlZCA9IHRydWU7XG4gICAgY3RybC4kdW50b3VjaGVkID0gZmFsc2U7XG4gICAgJGFuaW1hdGUuc2V0Q2xhc3MoJGVsZW1lbnQsIFRPVUNIRURfQ0xBU1MsIFVOVE9VQ0hFRF9DTEFTUyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENhbmNlbCBhbiB1cGRhdGUgYW5kIHJlc2V0IHRoZSBpbnB1dCBlbGVtZW50J3MgdmFsdWUgdG8gcHJldmVudCBhbiB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAsXG4gICAqIHdoaWNoIG1heSBiZSBjYXVzZWQgYnkgYSBwZW5kaW5nIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBhIHNvbWVcbiAgICogZnV0dXJlIGV2ZW50LlxuICAgKlxuICAgKiBJZiB5b3UgaGF2ZSBhbiBpbnB1dCB0aGF0IHVzZXMgYG5nLW1vZGVsLW9wdGlvbnNgIHRvIHNldCB1cCBkZWJvdW5jZWQgZXZlbnRzIG9yIGV2ZW50cyBzdWNoXG4gICAqIGFzIGJsdXIgeW91IGNhbiBoYXZlIGEgc2l0dWF0aW9uIHdoZXJlIHRoZXJlIGlzIGEgcGVyaW9kIHdoZW4gdGhlIGAkdmlld1ZhbHVlYFxuICAgKiBpcyBvdXQgb2Ygc3luY2ggd2l0aCB0aGUgbmdNb2RlbCdzIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIEluIHRoaXMgY2FzZSwgeW91IGNhbiBydW4gaW50byBkaWZmaWN1bHRpZXMgaWYgeW91IHRyeSB0byB1cGRhdGUgdGhlIG5nTW9kZWwncyBgJG1vZGVsVmFsdWVgXG4gICAqIHByb2dyYW1tYXRpY2FsbHkgYmVmb3JlIHRoZXNlIGRlYm91bmNlZC9mdXR1cmUgZXZlbnRzIGhhdmUgcmVzb2x2ZWQvb2NjdXJyZWQsIGJlY2F1c2UgQW5ndWxhcidzXG4gICAqIGRpcnR5IGNoZWNraW5nIG1lY2hhbmlzbSBpcyBub3QgYWJsZSB0byB0ZWxsIHdoZXRoZXIgdGhlIG1vZGVsIGhhcyBhY3R1YWxseSBjaGFuZ2VkIG9yIG5vdC5cbiAgICpcbiAgICogVGhlIGAkcm9sbGJhY2tWaWV3VmFsdWUoKWAgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIHByb2dyYW1tYXRpY2FsbHkgY2hhbmdpbmcgdGhlIG1vZGVsIG9mIGFuXG4gICAqIGlucHV0IHdoaWNoIG1heSBoYXZlIHN1Y2ggZXZlbnRzIHBlbmRpbmcuIFRoaXMgaXMgaW1wb3J0YW50IGluIG9yZGVyIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZVxuICAgKiBpbnB1dCBmaWVsZCB3aWxsIGJlIHVwZGF0ZWQgd2l0aCB0aGUgbmV3IG1vZGVsIHZhbHVlIGFuZCBhbnkgcGVuZGluZyBvcGVyYXRpb25zIGFyZSBjYW5jZWxsZWQuXG4gICAqXG4gICAqIDxleGFtcGxlIG5hbWU9XCJuZy1tb2RlbC1jYW5jZWwtdXBkYXRlXCIgbW9kdWxlPVwiY2FuY2VsLXVwZGF0ZS1leGFtcGxlXCI+XG4gICAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgKiAgICAgYW5ndWxhci5tb2R1bGUoJ2NhbmNlbC11cGRhdGUtZXhhbXBsZScsIFtdKVxuICAgKlxuICAgKiAgICAgLmNvbnRyb2xsZXIoJ0NhbmNlbFVwZGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgKiAgICAgICAkc2NvcGUucmVzZXRXaXRoQ2FuY2VsID0gZnVuY3Rpb24oZSkge1xuICAgKiAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHtcbiAgICogICAgICAgICAgICRzY29wZS5teUZvcm0ubXlJbnB1dDEuJHJvbGxiYWNrVmlld1ZhbHVlKCk7XG4gICAqICAgICAgICAgICAkc2NvcGUubXlWYWx1ZSA9ICcnO1xuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfTtcbiAgICogICAgICAgJHNjb3BlLnJlc2V0V2l0aG91dENhbmNlbCA9IGZ1bmN0aW9uKGUpIHtcbiAgICogICAgICAgICBpZiAoZS5rZXlDb2RlID09IDI3KSB7XG4gICAqICAgICAgICAgICAkc2NvcGUubXlWYWx1ZSA9ICcnO1xuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfTtcbiAgICogICAgIH1dKTtcbiAgICogICA8L2ZpbGU+XG4gICAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkNhbmNlbFVwZGF0ZUNvbnRyb2xsZXJcIj5cbiAgICogICAgICAgPHA+VHJ5IHR5cGluZyBzb21ldGhpbmcgaW4gZWFjaCBpbnB1dC4gIFNlZSB0aGF0IHRoZSBtb2RlbCBvbmx5IHVwZGF0ZXMgd2hlbiB5b3VcbiAgICogICAgICAgICAgYmx1ciBvZmYgdGhlIGlucHV0LlxuICAgKiAgICAgICAgPC9wPlxuICAgKiAgICAgICAgPHA+Tm93IHNlZSB3aGF0IGhhcHBlbnMgaWYgeW91IHN0YXJ0IHR5cGluZyB0aGVuIHByZXNzIHRoZSBFc2NhcGUga2V5PC9wPlxuICAgKlxuICAgKiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJyB9XCI+XG4gICAqICAgICAgICAgPHA+V2l0aCAkcm9sbGJhY2tWaWV3VmFsdWUoKTwvcD5cbiAgICogICAgICAgICA8aW5wdXQgbmFtZT1cIm15SW5wdXQxXCIgbmctbW9kZWw9XCJteVZhbHVlXCIgbmcta2V5ZG93bj1cInJlc2V0V2l0aENhbmNlbCgkZXZlbnQpXCI+PGJyLz5cbiAgICogICAgICAgICBteVZhbHVlOiBcInt7IG15VmFsdWUgfX1cIlxuICAgKlxuICAgKiAgICAgICAgIDxwPldpdGhvdXQgJHJvbGxiYWNrVmlld1ZhbHVlKCk8L3A+XG4gICAqICAgICAgICAgPGlucHV0IG5hbWU9XCJteUlucHV0MlwiIG5nLW1vZGVsPVwibXlWYWx1ZVwiIG5nLWtleWRvd249XCJyZXNldFdpdGhvdXRDYW5jZWwoJGV2ZW50KVwiPjxici8+XG4gICAqICAgICAgICAgbXlWYWx1ZTogXCJ7eyBteVZhbHVlIH19XCJcbiAgICogICAgICAgPC9mb3JtPlxuICAgKiAgICAgPC9kaXY+XG4gICAqICAgPC9maWxlPlxuICAgKiA8L2V4YW1wbGU+XG4gICAqL1xuICB0aGlzLiRyb2xsYmFja1ZpZXdWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICR0aW1lb3V0LmNhbmNlbChwZW5kaW5nRGVib3VuY2UpO1xuICAgIGN0cmwuJHZpZXdWYWx1ZSA9IGN0cmwuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlO1xuICAgIGN0cmwuJHJlbmRlcigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSdW5zIGVhY2ggb2YgdGhlIHJlZ2lzdGVyZWQgdmFsaWRhdG9ycyAoZmlyc3Qgc3luY2hyb25vdXMgdmFsaWRhdG9ycyBhbmQgdGhlblxuICAgKiBhc3luY2hyb25vdXMgdmFsaWRhdG9ycykuXG4gICAqIElmIHRoZSB2YWxpZGl0eSBjaGFuZ2VzIHRvIGludmFsaWQsIHRoZSBtb2RlbCB3aWxsIGJlIHNldCB0byBgdW5kZWZpbmVkYCxcbiAgICogdW5sZXNzIHtAbGluayBuZ01vZGVsT3B0aW9ucyBgbmdNb2RlbE9wdGlvbnMuYWxsb3dJbnZhbGlkYH0gaXMgYHRydWVgLlxuICAgKiBJZiB0aGUgdmFsaWRpdHkgY2hhbmdlcyB0byB2YWxpZCwgaXQgd2lsbCBzZXQgdGhlIG1vZGVsIHRvIHRoZSBsYXN0IGF2YWlsYWJsZSB2YWxpZFxuICAgKiBtb2RlbFZhbHVlLCBpLmUuIGVpdGhlciB0aGUgbGFzdCBwYXJzZWQgdmFsdWUgb3IgdGhlIGxhc3QgdmFsdWUgc2V0IGZyb20gdGhlIHNjb3BlLlxuICAgKi9cbiAgdGhpcy4kdmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBpZ25vcmUgJHZhbGlkYXRlIGJlZm9yZSBtb2RlbCBpcyBpbml0aWFsaXplZFxuICAgIGlmIChpc051bWJlcihjdHJsLiRtb2RlbFZhbHVlKSAmJiBpc05hTihjdHJsLiRtb2RlbFZhbHVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2aWV3VmFsdWUgPSBjdHJsLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtcbiAgICAvLyBOb3RlOiB3ZSB1c2UgdGhlICQkcmF3TW9kZWxWYWx1ZSBhcyAkbW9kZWxWYWx1ZSBtaWdodCBoYXZlIGJlZW5cbiAgICAvLyBzZXQgdG8gdW5kZWZpbmVkIGR1cmluZyBhIHZpZXcgLT4gbW9kZWwgdXBkYXRlIHRoYXQgZm91bmQgdmFsaWRhdGlvblxuICAgIC8vIGVycm9ycy4gV2UgY2FuJ3QgcGFyc2UgdGhlIHZpZXcgaGVyZSwgc2luY2UgdGhhdCBjb3VsZCBjaGFuZ2VcbiAgICAvLyB0aGUgbW9kZWwgYWx0aG91Z2ggbmVpdGhlciB2aWV3VmFsdWUgbm9yIHRoZSBtb2RlbCBvbiB0aGUgc2NvcGUgY2hhbmdlZFxuICAgIHZhciBtb2RlbFZhbHVlID0gY3RybC4kJHJhd01vZGVsVmFsdWU7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgdGhlcmUncyBhIHBhcnNlIGVycm9yLCBzbyB3ZSBkb24ndCB1bnNldCBpdCBhY2NpZGVudGlhbGx5XG4gICAgdmFyIHBhcnNlck5hbWUgPSBjdHJsLiQkcGFyc2VyTmFtZSB8fCAncGFyc2UnO1xuICAgIHZhciBwYXJzZXJWYWxpZCA9IGN0cmwuJGVycm9yW3BhcnNlck5hbWVdID8gZmFsc2UgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgcHJldlZhbGlkID0gY3RybC4kdmFsaWQ7XG4gICAgdmFyIHByZXZNb2RlbFZhbHVlID0gY3RybC4kbW9kZWxWYWx1ZTtcblxuICAgIHZhciBhbGxvd0ludmFsaWQgPSBjdHJsLiRvcHRpb25zICYmIGN0cmwuJG9wdGlvbnMuYWxsb3dJbnZhbGlkO1xuXG4gICAgY3RybC4kJHJ1blZhbGlkYXRvcnMocGFyc2VyVmFsaWQsIG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSwgZnVuY3Rpb24oYWxsVmFsaWQpIHtcbiAgICAgIC8vIElmIHRoZXJlIHdhcyBubyBjaGFuZ2UgaW4gdmFsaWRpdHksIGRvbid0IHVwZGF0ZSB0aGUgbW9kZWxcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgY2hhbmdpbmcgYW4gaW52YWxpZCBtb2RlbFZhbHVlIHRvIHVuZGVmaW5lZFxuICAgICAgaWYgKCFhbGxvd0ludmFsaWQgJiYgcHJldlZhbGlkICE9PSBhbGxWYWxpZCkge1xuICAgICAgICAvLyBOb3RlOiBEb24ndCBjaGVjayBjdHJsLiR2YWxpZCBoZXJlLCBhcyB3ZSBjb3VsZCBoYXZlXG4gICAgICAgIC8vIGV4dGVybmFsIHZhbGlkYXRvcnMgKGUuZy4gY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyKSxcbiAgICAgICAgLy8gdGhhdCBqdXN0IGNhbGwgJHNldFZhbGlkaXR5IGFuZCBuZWVkIHRoZSBtb2RlbCB2YWx1ZVxuICAgICAgICAvLyB0byBjYWxjdWxhdGUgdGhlaXIgdmFsaWRpdHkuXG4gICAgICAgIGN0cmwuJG1vZGVsVmFsdWUgPSBhbGxWYWxpZCA/IG1vZGVsVmFsdWUgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKGN0cmwuJG1vZGVsVmFsdWUgIT09IHByZXZNb2RlbFZhbHVlKSB7XG4gICAgICAgICAgY3RybC4kJHdyaXRlTW9kZWxUb1Njb3BlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICB9O1xuXG4gIHRoaXMuJCRydW5WYWxpZGF0b3JzID0gZnVuY3Rpb24ocGFyc2VWYWxpZCwgbW9kZWxWYWx1ZSwgdmlld1ZhbHVlLCBkb25lQ2FsbGJhY2spIHtcbiAgICBjdXJyZW50VmFsaWRhdGlvblJ1bklkKys7XG4gICAgdmFyIGxvY2FsVmFsaWRhdGlvblJ1bklkID0gY3VycmVudFZhbGlkYXRpb25SdW5JZDtcblxuICAgIC8vIGNoZWNrIHBhcnNlciBlcnJvclxuICAgIGlmICghcHJvY2Vzc1BhcnNlRXJyb3JzKHBhcnNlVmFsaWQpKSB7XG4gICAgICB2YWxpZGF0aW9uRG9uZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcHJvY2Vzc1N5bmNWYWxpZGF0b3JzKCkpIHtcbiAgICAgIHZhbGlkYXRpb25Eb25lKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJvY2Vzc0FzeW5jVmFsaWRhdG9ycygpO1xuXG4gICAgZnVuY3Rpb24gcHJvY2Vzc1BhcnNlRXJyb3JzKHBhcnNlVmFsaWQpIHtcbiAgICAgIHZhciBlcnJvcktleSA9IGN0cmwuJCRwYXJzZXJOYW1lIHx8ICdwYXJzZSc7XG4gICAgICBpZiAocGFyc2VWYWxpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNldFZhbGlkaXR5KGVycm9yS2V5LCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFZhbGlkaXR5KGVycm9yS2V5LCBwYXJzZVZhbGlkKTtcbiAgICAgICAgaWYgKCFwYXJzZVZhbGlkKSB7XG4gICAgICAgICAgZm9yRWFjaChjdHJsLiR2YWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XG4gICAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3JFYWNoKGN0cmwuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odiwgbmFtZSkge1xuICAgICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgbnVsbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzU3luY1ZhbGlkYXRvcnMoKSB7XG4gICAgICB2YXIgc3luY1ZhbGlkYXRvcnNWYWxpZCA9IHRydWU7XG4gICAgICBmb3JFYWNoKGN0cmwuJHZhbGlkYXRvcnMsIGZ1bmN0aW9uKHZhbGlkYXRvciwgbmFtZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdmFsaWRhdG9yKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSk7XG4gICAgICAgIHN5bmNWYWxpZGF0b3JzVmFsaWQgPSBzeW5jVmFsaWRhdG9yc1ZhbGlkICYmIHJlc3VsdDtcbiAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFzeW5jVmFsaWRhdG9yc1ZhbGlkKSB7XG4gICAgICAgIGZvckVhY2goY3RybC4kYXN5bmNWYWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgbnVsbCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzQXN5bmNWYWxpZGF0b3JzKCkge1xuICAgICAgdmFyIHZhbGlkYXRvclByb21pc2VzID0gW107XG4gICAgICB2YXIgYWxsVmFsaWQgPSB0cnVlO1xuICAgICAgZm9yRWFjaChjdHJsLiRhc3luY1ZhbGlkYXRvcnMsIGZ1bmN0aW9uKHZhbGlkYXRvciwgbmFtZSkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpO1xuICAgICAgICBpZiAoIWlzUHJvbWlzZUxpa2UocHJvbWlzZSkpIHtcbiAgICAgICAgICB0aHJvdyAkbmdNb2RlbE1pbkVycihcIiRhc3luY1ZhbGlkYXRvcnNcIixcbiAgICAgICAgICAgIFwiRXhwZWN0ZWQgYXN5bmNocm9ub3VzIHZhbGlkYXRvciB0byByZXR1cm4gYSBwcm9taXNlIGJ1dCBnb3QgJ3swfScgaW5zdGVhZC5cIiwgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgdmFsaWRhdG9yUHJvbWlzZXMucHVzaChwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgdHJ1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgYWxsVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBmYWxzZSk7XG4gICAgICAgIH0pKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCF2YWxpZGF0b3JQcm9taXNlcy5sZW5ndGgpIHtcbiAgICAgICAgdmFsaWRhdGlvbkRvbmUodHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkcS5hbGwodmFsaWRhdG9yUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFsaWRhdGlvbkRvbmUoYWxsVmFsaWQpO1xuICAgICAgICB9LCBub29wKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRWYWxpZGl0eShuYW1lLCBpc1ZhbGlkKSB7XG4gICAgICBpZiAobG9jYWxWYWxpZGF0aW9uUnVuSWQgPT09IGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQpIHtcbiAgICAgICAgY3RybC4kc2V0VmFsaWRpdHkobmFtZSwgaXNWYWxpZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmFsaWRhdGlvbkRvbmUoYWxsVmFsaWQpIHtcbiAgICAgIGlmIChsb2NhbFZhbGlkYXRpb25SdW5JZCA9PT0gY3VycmVudFZhbGlkYXRpb25SdW5JZCkge1xuXG4gICAgICAgIGRvbmVDYWxsYmFjayhhbGxWYWxpZCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGNvbW1pdFZpZXdWYWx1ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ29tbWl0IGEgcGVuZGluZyB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gdGhpcyBtZXRob2QgaXMgcmFyZWx5IG5lZWRlZCBhcyBgTmdNb2RlbENvbnRyb2xsZXJgXG4gICAqIHVzdWFsbHkgaGFuZGxlcyBjYWxsaW5nIHRoaXMgaW4gcmVzcG9uc2UgdG8gaW5wdXQgZXZlbnRzLlxuICAgKi9cbiAgdGhpcy4kY29tbWl0Vmlld1ZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZpZXdWYWx1ZSA9IGN0cmwuJHZpZXdWYWx1ZTtcblxuICAgICR0aW1lb3V0LmNhbmNlbChwZW5kaW5nRGVib3VuY2UpO1xuXG4gICAgLy8gSWYgdGhlIHZpZXcgdmFsdWUgaGFzIG5vdCBjaGFuZ2VkIHRoZW4gd2Ugc2hvdWxkIGp1c3QgZXhpdCwgZXhjZXB0IGluIHRoZSBjYXNlIHdoZXJlIHRoZXJlIGlzXG4gICAgLy8gYSBuYXRpdmUgdmFsaWRhdG9yIG9uIHRoZSBlbGVtZW50LiBJbiB0aGlzIGNhc2UgdGhlIHZhbGlkYXRpb24gc3RhdGUgbWF5IGhhdmUgY2hhbmdlZCBldmVuIHRob3VnaFxuICAgIC8vIHRoZSB2aWV3VmFsdWUgaGFzIHN0YXllZCBlbXB0eS5cbiAgICBpZiAoY3RybC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPT09IHZpZXdWYWx1ZSAmJiAodmlld1ZhbHVlICE9PSAnJyB8fCAhY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGN0cmwuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID0gdmlld1ZhbHVlO1xuXG4gICAgLy8gY2hhbmdlIHRvIGRpcnR5XG4gICAgaWYgKGN0cmwuJHByaXN0aW5lKSB7XG4gICAgICB0aGlzLiRzZXREaXJ0eSgpO1xuICAgIH1cbiAgICB0aGlzLiQkcGFyc2VBbmRWYWxpZGF0ZSgpO1xuICB9O1xuXG4gIHRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZpZXdWYWx1ZSA9IGN0cmwuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlO1xuICAgIHZhciBtb2RlbFZhbHVlID0gdmlld1ZhbHVlO1xuICAgIHZhciBwYXJzZXJWYWxpZCA9IGlzVW5kZWZpbmVkKG1vZGVsVmFsdWUpID8gdW5kZWZpbmVkIDogdHJ1ZTtcblxuICAgIGlmIChwYXJzZXJWYWxpZCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdHJsLiRwYXJzZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1vZGVsVmFsdWUgPSBjdHJsLiRwYXJzZXJzW2ldKG1vZGVsVmFsdWUpO1xuICAgICAgICBpZiAoaXNVbmRlZmluZWQobW9kZWxWYWx1ZSkpIHtcbiAgICAgICAgICBwYXJzZXJWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc051bWJlcihjdHJsLiRtb2RlbFZhbHVlKSAmJiBpc05hTihjdHJsLiRtb2RlbFZhbHVlKSkge1xuICAgICAgLy8gY3RybC4kbW9kZWxWYWx1ZSBoYXMgbm90IGJlZW4gdG91Y2hlZCB5ZXQuLi5cbiAgICAgIGN0cmwuJG1vZGVsVmFsdWUgPSBuZ01vZGVsR2V0KCRzY29wZSk7XG4gICAgfVxuICAgIHZhciBwcmV2TW9kZWxWYWx1ZSA9IGN0cmwuJG1vZGVsVmFsdWU7XG4gICAgdmFyIGFsbG93SW52YWxpZCA9IGN0cmwuJG9wdGlvbnMgJiYgY3RybC4kb3B0aW9ucy5hbGxvd0ludmFsaWQ7XG4gICAgY3RybC4kJHJhd01vZGVsVmFsdWUgPSBtb2RlbFZhbHVlO1xuXG4gICAgaWYgKGFsbG93SW52YWxpZCkge1xuICAgICAgY3RybC4kbW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XG4gICAgICB3cml0ZVRvTW9kZWxJZk5lZWRlZCgpO1xuICAgIH1cblxuICAgIC8vIFBhc3MgdGhlICQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSBoZXJlLCBiZWNhdXNlIHRoZSBjYWNoZWQgdmlld1ZhbHVlIG1pZ2h0IGJlIG91dCBvZiBkYXRlLlxuICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiBlLmcuICRzZXRWaWV3VmFsdWUgaXMgY2FsbGVkIGZyb20gaW5zaWRlIGEgcGFyc2VyXG4gICAgY3RybC4kJHJ1blZhbGlkYXRvcnMocGFyc2VyVmFsaWQsIG1vZGVsVmFsdWUsIGN0cmwuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlLCBmdW5jdGlvbihhbGxWYWxpZCkge1xuICAgICAgaWYgKCFhbGxvd0ludmFsaWQpIHtcbiAgICAgICAgLy8gTm90ZTogRG9uJ3QgY2hlY2sgY3RybC4kdmFsaWQgaGVyZSwgYXMgd2UgY291bGQgaGF2ZVxuICAgICAgICAvLyBleHRlcm5hbCB2YWxpZGF0b3JzIChlLmcuIGNhbGN1bGF0ZWQgb24gdGhlIHNlcnZlciksXG4gICAgICAgIC8vIHRoYXQganVzdCBjYWxsICRzZXRWYWxpZGl0eSBhbmQgbmVlZCB0aGUgbW9kZWwgdmFsdWVcbiAgICAgICAgLy8gdG8gY2FsY3VsYXRlIHRoZWlyIHZhbGlkaXR5LlxuICAgICAgICBjdHJsLiRtb2RlbFZhbHVlID0gYWxsVmFsaWQgPyBtb2RlbFZhbHVlIDogdW5kZWZpbmVkO1xuICAgICAgICB3cml0ZVRvTW9kZWxJZk5lZWRlZCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gd3JpdGVUb01vZGVsSWZOZWVkZWQoKSB7XG4gICAgICBpZiAoY3RybC4kbW9kZWxWYWx1ZSAhPT0gcHJldk1vZGVsVmFsdWUpIHtcbiAgICAgICAgY3RybC4kJHdyaXRlTW9kZWxUb1Njb3BlKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuJCR3cml0ZU1vZGVsVG9TY29wZSA9IGZ1bmN0aW9uKCkge1xuICAgIG5nTW9kZWxTZXQoJHNjb3BlLCBjdHJsLiRtb2RlbFZhbHVlKTtcbiAgICBmb3JFYWNoKGN0cmwuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMsIGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBsaXN0ZW5lcigpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFVwZGF0ZSB0aGUgdmlldyB2YWx1ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFuIGlucHV0IGRpcmVjdGl2ZSB3YW50IHRvIGNoYW5nZSB0aGUgdmlldyB2YWx1ZTsgdHlwaWNhbGx5LFxuICAgKiB0aGlzIGlzIGRvbmUgZnJvbSB3aXRoaW4gYSBET00gZXZlbnQgaGFuZGxlci5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUge0BsaW5rIG5nLmRpcmVjdGl2ZTppbnB1dCBpbnB1dH0gY2FsbHMgaXQgd2hlbiB0aGUgdmFsdWUgb2YgdGhlIGlucHV0IGNoYW5nZXMgYW5kXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6c2VsZWN0IHNlbGVjdH0gY2FsbHMgaXQgd2hlbiBhbiBvcHRpb24gaXMgc2VsZWN0ZWQuXG4gICAqXG4gICAqIElmIHRoZSBuZXcgYHZhbHVlYCBpcyBhbiBvYmplY3QgKHJhdGhlciB0aGFuIGEgc3RyaW5nIG9yIGEgbnVtYmVyKSwgd2Ugc2hvdWxkIG1ha2UgYSBjb3B5IG9mIHRoZVxuICAgKiBvYmplY3QgYmVmb3JlIHBhc3NpbmcgaXQgdG8gYCRzZXRWaWV3VmFsdWVgLiAgVGhpcyBpcyBiZWNhdXNlIGBuZ01vZGVsYCBkb2VzIG5vdCBwZXJmb3JtIGEgZGVlcFxuICAgKiB3YXRjaCBvZiBvYmplY3RzLCBpdCBvbmx5IGxvb2tzIGZvciBhIGNoYW5nZSBvZiBpZGVudGl0eS4gSWYgeW91IG9ubHkgY2hhbmdlIHRoZSBwcm9wZXJ0eSBvZlxuICAgKiB0aGUgb2JqZWN0IHRoZW4gbmdNb2RlbCB3aWxsIG5vdCByZWFsaXNlIHRoYXQgdGhlIG9iamVjdCBoYXMgY2hhbmdlZCBhbmQgd2lsbCBub3QgaW52b2tlIHRoZVxuICAgKiBgJHBhcnNlcnNgIGFuZCBgJHZhbGlkYXRvcnNgIHBpcGVsaW5lcy5cbiAgICpcbiAgICogRm9yIHRoaXMgcmVhc29uLCB5b3Ugc2hvdWxkIG5vdCBjaGFuZ2UgcHJvcGVydGllcyBvZiB0aGUgY29weSBvbmNlIGl0IGhhcyBiZWVuIHBhc3NlZCB0b1xuICAgKiBgJHNldFZpZXdWYWx1ZWAuIE90aGVyd2lzZSB5b3UgbWF5IGNhdXNlIHRoZSBtb2RlbCB2YWx1ZSBvbiB0aGUgc2NvcGUgdG8gY2hhbmdlIGluY29ycmVjdGx5LlxuICAgKlxuICAgKiBXaGVuIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCwgdGhlIG5ldyBgdmFsdWVgIHdpbGwgYmUgc3RhZ2VkIGZvciBjb21taXR0aW5nIHRocm91Z2ggdGhlIGAkcGFyc2Vyc2BcbiAgICogYW5kIGAkdmFsaWRhdG9yc2AgcGlwZWxpbmVzLiBJZiB0aGVyZSBhcmUgbm8gc3BlY2lhbCB7QGxpbmsgbmdNb2RlbE9wdGlvbnN9IHNwZWNpZmllZCB0aGVuIHRoZSBzdGFnZWRcbiAgICogdmFsdWUgc2VudCBkaXJlY3RseSBmb3IgcHJvY2Vzc2luZywgZmluYWxseSB0byBiZSBhcHBsaWVkIHRvIGAkbW9kZWxWYWx1ZWAgYW5kIHRoZW4gdGhlXG4gICAqICoqZXhwcmVzc2lvbioqIHNwZWNpZmllZCBpbiB0aGUgYG5nLW1vZGVsYCBhdHRyaWJ1dGUuXG4gICAqXG4gICAqIExhc3RseSwgYWxsIHRoZSByZWdpc3RlcmVkIGNoYW5nZSBsaXN0ZW5lcnMsIGluIHRoZSBgJHZpZXdDaGFuZ2VMaXN0ZW5lcnNgIGxpc3QsIGFyZSBjYWxsZWQuXG4gICAqXG4gICAqIEluIGNhc2UgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9IGRpcmVjdGl2ZSBpcyB1c2VkIHdpdGggYHVwZGF0ZU9uYFxuICAgKiBhbmQgdGhlIGBkZWZhdWx0YCB0cmlnZ2VyIGlzIG5vdCBsaXN0ZWQsIGFsbCB0aG9zZSBhY3Rpb25zIHdpbGwgcmVtYWluIHBlbmRpbmcgdW50aWwgb25lIG9mIHRoZVxuICAgKiBgdXBkYXRlT25gIGV2ZW50cyBpcyB0cmlnZ2VyZWQgb24gdGhlIERPTSBlbGVtZW50LlxuICAgKiBBbGwgdGhlc2UgYWN0aW9ucyB3aWxsIGJlIGRlYm91bmNlZCBpZiB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc31cbiAgICogZGlyZWN0aXZlIGlzIHVzZWQgd2l0aCBhIGN1c3RvbSBkZWJvdW5jZSBmb3IgdGhpcyBwYXJ0aWN1bGFyIGV2ZW50LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHRyaWdnZXIgYSBgJGRpZ2VzdGAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBWYWx1ZSBmcm9tIHRoZSB2aWV3LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHJpZ2dlciBFdmVudCB0aGF0IHRyaWdnZXJlZCB0aGUgdXBkYXRlLlxuICAgKi9cbiAgdGhpcy4kc2V0Vmlld1ZhbHVlID0gZnVuY3Rpb24odmFsdWUsIHRyaWdnZXIpIHtcbiAgICBjdHJsLiR2aWV3VmFsdWUgPSB2YWx1ZTtcbiAgICBpZiAoIWN0cmwuJG9wdGlvbnMgfHwgY3RybC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQpIHtcbiAgICAgIGN0cmwuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCh0cmlnZ2VyKTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0ID0gZnVuY3Rpb24odHJpZ2dlcikge1xuICAgIHZhciBkZWJvdW5jZURlbGF5ID0gMCxcbiAgICAgICAgb3B0aW9ucyA9IGN0cmwuJG9wdGlvbnMsXG4gICAgICAgIGRlYm91bmNlO1xuXG4gICAgaWYgKG9wdGlvbnMgJiYgaXNEZWZpbmVkKG9wdGlvbnMuZGVib3VuY2UpKSB7XG4gICAgICBkZWJvdW5jZSA9IG9wdGlvbnMuZGVib3VuY2U7XG4gICAgICBpZiAoaXNOdW1iZXIoZGVib3VuY2UpKSB7XG4gICAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIoZGVib3VuY2VbdHJpZ2dlcl0pKSB7XG4gICAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZVt0cmlnZ2VyXTtcbiAgICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIoZGVib3VuY2VbJ2RlZmF1bHQnXSkpIHtcbiAgICAgICAgZGVib3VuY2VEZWxheSA9IGRlYm91bmNlWydkZWZhdWx0J107XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHRpbWVvdXQuY2FuY2VsKHBlbmRpbmdEZWJvdW5jZSk7XG4gICAgaWYgKGRlYm91bmNlRGVsYXkpIHtcbiAgICAgIHBlbmRpbmdEZWJvdW5jZSA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBjdHJsLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgIH0sIGRlYm91bmNlRGVsYXkpO1xuICAgIH0gZWxzZSBpZiAoJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICBjdHJsLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgY3RybC4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLy8gbW9kZWwgLT4gdmFsdWVcbiAgLy8gTm90ZTogd2UgY2Fubm90IHVzZSBhIG5vcm1hbCBzY29wZS4kd2F0Y2ggYXMgd2Ugd2FudCB0byBkZXRlY3QgdGhlIGZvbGxvd2luZzpcbiAgLy8gMS4gc2NvcGUgdmFsdWUgaXMgJ2EnXG4gIC8vIDIuIHVzZXIgZW50ZXJzICdiJ1xuICAvLyAzLiBuZy1jaGFuZ2Uga2lja3MgaW4gYW5kIHJldmVydHMgc2NvcGUgdmFsdWUgdG8gJ2EnXG4gIC8vICAgIC0+IHNjb3BlIHZhbHVlIGRpZCBub3QgY2hhbmdlIHNpbmNlIHRoZSBsYXN0IGRpZ2VzdCBhc1xuICAvLyAgICAgICBuZy1jaGFuZ2UgZXhlY3V0ZXMgaW4gYXBwbHkgcGhhc2VcbiAgLy8gNC4gdmlldyBzaG91bGQgYmUgY2hhbmdlZCBiYWNrIHRvICdhJ1xuICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG5nTW9kZWxXYXRjaCgpIHtcbiAgICB2YXIgbW9kZWxWYWx1ZSA9IG5nTW9kZWxHZXQoJHNjb3BlKTtcblxuICAgIC8vIGlmIHNjb3BlIG1vZGVsIHZhbHVlIGFuZCBuZ01vZGVsIHZhbHVlIGFyZSBvdXQgb2Ygc3luY1xuICAgIC8vIFRPRE8ocGVyZik6IHdoeSBub3QgbW92ZSB0aGlzIHRvIHRoZSBhY3Rpb24gZm4/XG4gICAgaWYgKG1vZGVsVmFsdWUgIT09IGN0cmwuJG1vZGVsVmFsdWUpIHtcbiAgICAgIGN0cmwuJG1vZGVsVmFsdWUgPSBjdHJsLiQkcmF3TW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XG5cbiAgICAgIHZhciBmb3JtYXR0ZXJzID0gY3RybC4kZm9ybWF0dGVycyxcbiAgICAgICAgICBpZHggPSBmb3JtYXR0ZXJzLmxlbmd0aDtcblxuICAgICAgdmFyIHZpZXdWYWx1ZSA9IG1vZGVsVmFsdWU7XG4gICAgICB3aGlsZSAoaWR4LS0pIHtcbiAgICAgICAgdmlld1ZhbHVlID0gZm9ybWF0dGVyc1tpZHhdKHZpZXdWYWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoY3RybC4kdmlld1ZhbHVlICE9PSB2aWV3VmFsdWUpIHtcbiAgICAgICAgY3RybC4kdmlld1ZhbHVlID0gY3RybC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPSB2aWV3VmFsdWU7XG4gICAgICAgIGN0cmwuJHJlbmRlcigpO1xuXG4gICAgICAgIGN0cmwuJCRydW5WYWxpZGF0b3JzKHVuZGVmaW5lZCwgbW9kZWxWYWx1ZSwgdmlld1ZhbHVlLCBub29wKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbW9kZWxWYWx1ZTtcbiAgfSk7XG59XTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW9kZWxcbiAqXG4gKiBAZWxlbWVudCBpbnB1dFxuICogQHByaW9yaXR5IDFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdNb2RlbGAgZGlyZWN0aXZlIGJpbmRzIGFuIGBpbnB1dGAsYHNlbGVjdGAsIGB0ZXh0YXJlYWAgKG9yIGN1c3RvbSBmb3JtIGNvbnRyb2wpIHRvIGFcbiAqIHByb3BlcnR5IG9uIHRoZSBzY29wZSB1c2luZyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciBOZ01vZGVsQ29udHJvbGxlcn0sXG4gKiB3aGljaCBpcyBjcmVhdGVkIGFuZCBleHBvc2VkIGJ5IHRoaXMgZGlyZWN0aXZlLlxuICpcbiAqIGBuZ01vZGVsYCBpcyByZXNwb25zaWJsZSBmb3I6XG4gKlxuICogLSBCaW5kaW5nIHRoZSB2aWV3IGludG8gdGhlIG1vZGVsLCB3aGljaCBvdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYGlucHV0YCwgYHRleHRhcmVhYCBvciBgc2VsZWN0YFxuICogICByZXF1aXJlLlxuICogLSBQcm92aWRpbmcgdmFsaWRhdGlvbiBiZWhhdmlvciAoaS5lLiByZXF1aXJlZCwgbnVtYmVyLCBlbWFpbCwgdXJsKS5cbiAqIC0gS2VlcGluZyB0aGUgc3RhdGUgb2YgdGhlIGNvbnRyb2wgKHZhbGlkL2ludmFsaWQsIGRpcnR5L3ByaXN0aW5lLCB0b3VjaGVkL3VudG91Y2hlZCwgdmFsaWRhdGlvbiBlcnJvcnMpLlxuICogLSBTZXR0aW5nIHJlbGF0ZWQgY3NzIGNsYXNzZXMgb24gdGhlIGVsZW1lbnQgKGBuZy12YWxpZGAsIGBuZy1pbnZhbGlkYCwgYG5nLWRpcnR5YCwgYG5nLXByaXN0aW5lYCwgYG5nLXRvdWNoZWRgLCBgbmctdW50b3VjaGVkYCkgaW5jbHVkaW5nIGFuaW1hdGlvbnMuXG4gKiAtIFJlZ2lzdGVyaW5nIHRoZSBjb250cm9sIHdpdGggaXRzIHBhcmVudCB7QGxpbmsgbmcuZGlyZWN0aXZlOmZvcm0gZm9ybX0uXG4gKlxuICogTm90ZTogYG5nTW9kZWxgIHdpbGwgdHJ5IHRvIGJpbmQgdG8gdGhlIHByb3BlcnR5IGdpdmVuIGJ5IGV2YWx1YXRpbmcgdGhlIGV4cHJlc3Npb24gb24gdGhlXG4gKiBjdXJyZW50IHNjb3BlLiBJZiB0aGUgcHJvcGVydHkgZG9lc24ndCBhbHJlYWR5IGV4aXN0IG9uIHRoaXMgc2NvcGUsIGl0IHdpbGwgYmUgY3JlYXRlZFxuICogaW1wbGljaXRseSBhbmQgYWRkZWQgdG8gdGhlIHNjb3BlLlxuICpcbiAqIEZvciBiZXN0IHByYWN0aWNlcyBvbiB1c2luZyBgbmdNb2RlbGAsIHNlZTpcbiAqXG4gKiAgLSBbVW5kZXJzdGFuZGluZyBTY29wZXNdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvd2lraS9VbmRlcnN0YW5kaW5nLVNjb3BlcylcbiAqXG4gKiBGb3IgYmFzaWMgZXhhbXBsZXMsIGhvdyB0byB1c2UgYG5nTW9kZWxgLCBzZWU6XG4gKlxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTppbnB1dCBpbnB1dH1cbiAqICAgIC0ge0BsaW5rIGlucHV0W3RleHRdIHRleHR9XG4gKiAgICAtIHtAbGluayBpbnB1dFtjaGVja2JveF0gY2hlY2tib3h9XG4gKiAgICAtIHtAbGluayBpbnB1dFtyYWRpb10gcmFkaW99XG4gKiAgICAtIHtAbGluayBpbnB1dFtudW1iZXJdIG51bWJlcn1cbiAqICAgIC0ge0BsaW5rIGlucHV0W2VtYWlsXSBlbWFpbH1cbiAqICAgIC0ge0BsaW5rIGlucHV0W3VybF0gdXJsfVxuICogICAgLSB7QGxpbmsgaW5wdXRbZGF0ZV0gZGF0ZX1cbiAqICAgIC0ge0BsaW5rIGlucHV0W2RhdGV0aW1lLWxvY2FsXSBkYXRldGltZS1sb2NhbH1cbiAqICAgIC0ge0BsaW5rIGlucHV0W3RpbWVdIHRpbWV9XG4gKiAgICAtIHtAbGluayBpbnB1dFttb250aF0gbW9udGh9XG4gKiAgICAtIHtAbGluayBpbnB1dFt3ZWVrXSB3ZWVrfVxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTpzZWxlY3Qgc2VsZWN0fVxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTp0ZXh0YXJlYSB0ZXh0YXJlYX1cbiAqXG4gKiAjIENTUyBjbGFzc2VzXG4gKiBUaGUgZm9sbG93aW5nIENTUyBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgcmVtb3ZlZCBvbiB0aGUgYXNzb2NpYXRlZCBpbnB1dC9zZWxlY3QvdGV4dGFyZWEgZWxlbWVudFxuICogZGVwZW5kaW5nIG9uIHRoZSB2YWxpZGl0eSBvZiB0aGUgbW9kZWwuXG4gKlxuICogIC0gYG5nLXZhbGlkYDogdGhlIG1vZGVsIGlzIHZhbGlkXG4gKiAgLSBgbmctaW52YWxpZGA6IHRoZSBtb2RlbCBpcyBpbnZhbGlkXG4gKiAgLSBgbmctdmFsaWQtW2tleV1gOiBmb3IgZWFjaCB2YWxpZCBrZXkgYWRkZWQgYnkgYCRzZXRWYWxpZGl0eWBcbiAqICAtIGBuZy1pbnZhbGlkLVtrZXldYDogZm9yIGVhY2ggaW52YWxpZCBrZXkgYWRkZWQgYnkgYCRzZXRWYWxpZGl0eWBcbiAqICAtIGBuZy1wcmlzdGluZWA6IHRoZSBjb250cm9sIGhhc24ndCBiZWVuIGludGVyYWN0ZWQgd2l0aCB5ZXRcbiAqICAtIGBuZy1kaXJ0eWA6IHRoZSBjb250cm9sIGhhcyBiZWVuIGludGVyYWN0ZWQgd2l0aFxuICogIC0gYG5nLXRvdWNoZWRgOiB0aGUgY29udHJvbCBoYXMgYmVlbiBibHVycmVkXG4gKiAgLSBgbmctdW50b3VjaGVkYDogdGhlIGNvbnRyb2wgaGFzbid0IGJlZW4gYmx1cnJlZFxuICogIC0gYG5nLXBlbmRpbmdgOiBhbnkgYCRhc3luY1ZhbGlkYXRvcnNgIGFyZSB1bmZ1bGZpbGxlZFxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0IG5nQW5pbWF0ZSBjYW4gZGV0ZWN0IGVhY2ggb2YgdGhlc2UgY2xhc3NlcyB3aGVuIGFkZGVkIGFuZCByZW1vdmVkLlxuICpcbiAqICMjIEFuaW1hdGlvbiBIb29rc1xuICpcbiAqIEFuaW1hdGlvbnMgd2l0aGluIG1vZGVscyBhcmUgdHJpZ2dlcmVkIHdoZW4gYW55IG9mIHRoZSBhc3NvY2lhdGVkIENTUyBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgcmVtb3ZlZFxuICogb24gdGhlIGlucHV0IGVsZW1lbnQgd2hpY2ggaXMgYXR0YWNoZWQgdG8gdGhlIG1vZGVsLiBUaGVzZSBjbGFzc2VzIGFyZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLFxuICogYC5uZy1pbnZhbGlkYCBhbmQgYC5uZy12YWxpZGAgYXMgd2VsbCBhcyBhbnkgb3RoZXIgdmFsaWRhdGlvbnMgdGhhdCBhcmUgcGVyZm9ybWVkIG9uIHRoZSBtb2RlbCBpdHNlbGYuXG4gKiBUaGUgYW5pbWF0aW9ucyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2l0aGluIG5nTW9kZWwgYXJlIHNpbWlsYXIgdG8gaG93IHRoZXkgd29yayBpbiBuZ0NsYXNzIGFuZFxuICogYW5pbWF0aW9ucyBjYW4gYmUgaG9va2VkIGludG8gdXNpbmcgQ1NTIHRyYW5zaXRpb25zLCBrZXlmcmFtZXMgYXMgd2VsbCBhcyBKUyBhbmltYXRpb25zLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBhIHNpbXBsZSB3YXkgdG8gdXRpbGl6ZSBDU1MgdHJhbnNpdGlvbnMgdG8gc3R5bGUgYW4gaW5wdXQgZWxlbWVudFxuICogdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBhcyBpbnZhbGlkIGFmdGVyIGl0IGhhcyBiZWVuIHZhbGlkYXRlZDpcbiAqXG4gKiA8cHJlPlxuICogLy9iZSBzdXJlIHRvIGluY2x1ZGUgbmdBbmltYXRlIGFzIGEgbW9kdWxlIHRvIGhvb2sgaW50byBtb3JlXG4gKiAvL2FkdmFuY2VkIGFuaW1hdGlvbnNcbiAqIC5teS1pbnB1dCB7XG4gKiAgIHRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xuICogICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAqIH1cbiAqIC5teS1pbnB1dC5uZy1pbnZhbGlkIHtcbiAqICAgYmFja2dyb3VuZDogcmVkO1xuICogICBjb2xvcjp3aGl0ZTtcbiAqIH1cbiAqIDwvcHJlPlxuICpcbiAqIEBleGFtcGxlXG4gKiA8ZXhhbXBsZSBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBmaXhCYXNlPVwidHJ1ZVwiIG1vZHVsZT1cImlucHV0RXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdpbnB1dEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgJHNjb3BlLnZhbCA9ICcxJztcbiAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPHN0eWxlPlxuICAgICAgICAgLm15LWlucHV0IHtcbiAgICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcbiAgICAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XG4gICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICAgfVxuICAgICAgICAgLm15LWlucHV0Lm5nLWludmFsaWQge1xuICAgICAgICAgICBjb2xvcjp3aGl0ZTtcbiAgICAgICAgICAgYmFja2dyb3VuZDogcmVkO1xuICAgICAgICAgfVxuICAgICAgIDwvc3R5bGU+XG4gICAgICAgVXBkYXRlIGlucHV0IHRvIHNlZSB0cmFuc2l0aW9ucyB3aGVuIHZhbGlkL2ludmFsaWQuXG4gICAgICAgSW50ZWdlciBpcyBhIHZhbGlkIHZhbHVlLlxuICAgICAgIDxmb3JtIG5hbWU9XCJ0ZXN0Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwidmFsXCIgbmctcGF0dGVybj1cIi9eXFxkKyQvXCIgbmFtZT1cImFuaW1cIiBjbGFzcz1cIm15LWlucHV0XCIgLz5cbiAgICAgICA8L2Zvcm0+XG4gICAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiAjIyBCaW5kaW5nIHRvIGEgZ2V0dGVyL3NldHRlclxuICpcbiAqIFNvbWV0aW1lcyBpdCdzIGhlbHBmdWwgdG8gYmluZCBgbmdNb2RlbGAgdG8gYSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9uLiAgQSBnZXR0ZXIvc2V0dGVyIGlzIGFcbiAqIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtb2RlbCB3aGVuIGNhbGxlZCB3aXRoIHplcm8gYXJndW1lbnRzLCBhbmQgc2V0c1xuICogdGhlIGludGVybmFsIHN0YXRlIG9mIGEgbW9kZWwgd2hlbiBjYWxsZWQgd2l0aCBhbiBhcmd1bWVudC4gSXQncyBzb21ldGltZXMgdXNlZnVsIHRvIHVzZSB0aGlzXG4gKiBmb3IgbW9kZWxzIHRoYXQgaGF2ZSBhbiBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiB0aGF0J3MgZGlmZmVyZW50IHRoYW4gd2hhdCB0aGUgbW9kZWwgZXhwb3Nlc1xuICogdG8gdGhlIHZpZXcuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAqICoqQmVzdCBQcmFjdGljZToqKiBJdCdzIGJlc3QgdG8ga2VlcCBnZXR0ZXJzIGZhc3QgYmVjYXVzZSBBbmd1bGFyIGlzIGxpa2VseSB0byBjYWxsIHRoZW0gbW9yZVxuICogZnJlcXVlbnRseSB0aGFuIG90aGVyIHBhcnRzIG9mIHlvdXIgY29kZS5cbiAqIDwvZGl2PlxuICpcbiAqIFlvdSB1c2UgdGhpcyBiZWhhdmlvciBieSBhZGRpbmcgYG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCJgIHRvIGFuIGVsZW1lbnQgdGhhdFxuICogaGFzIGBuZy1tb2RlbGAgYXR0YWNoZWQgdG8gaXQuIFlvdSBjYW4gYWxzbyBhZGQgYG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCJgIHRvXG4gKiBhIGA8Zm9ybT5gLCB3aGljaCB3aWxsIGVuYWJsZSB0aGlzIGJlaGF2aW9yIGZvciBhbGwgYDxpbnB1dD5gcyB3aXRoaW4gaXQuIFNlZVxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBgbmdNb2RlbE9wdGlvbnNgfSBmb3IgbW9yZS5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIHVzZSBgbmdNb2RlbGAgd2l0aCBhIGdldHRlci9zZXR0ZXI6XG4gKlxuICogQGV4YW1wbGVcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsLWdldHRlci1zZXR0ZXJcIiBtb2R1bGU9XCJnZXR0ZXJTZXR0ZXJFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxuICAgICAgICAgICBOYW1lOlxuICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxuICAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxuICAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgZ2V0dGVyU2V0dGVyOiB0cnVlIH1cIiAvPlxuICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lKClcIj48L3NwYW4+PC9wcmU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdnZXR0ZXJTZXR0ZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICB2YXIgX25hbWUgPSAnQnJpYW4nO1xuICAgICAgICAgICAkc2NvcGUudXNlciA9IHtcbiAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbihuZXdOYW1lKSB7XG4gICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQobmV3TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgX25hbWUgPSBuZXdOYW1lO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgcmV0dXJuIF9uYW1lO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgbmdNb2RlbERpcmVjdGl2ZSA9IFsnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRyb290U2NvcGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6IFsnbmdNb2RlbCcsICdeP2Zvcm0nLCAnXj9uZ01vZGVsT3B0aW9ucyddLFxuICAgIGNvbnRyb2xsZXI6IE5nTW9kZWxDb250cm9sbGVyLFxuICAgIC8vIFByZWxpbmsgbmVlZHMgdG8gcnVuIGJlZm9yZSBhbnkgaW5wdXQgZGlyZWN0aXZlXG4gICAgLy8gc28gdGhhdCB3ZSBjYW4gc2V0IHRoZSBOZ01vZGVsT3B0aW9ucyBpbiBOZ01vZGVsQ29udHJvbGxlclxuICAgIC8vIGJlZm9yZSBhbnlvbmUgZWxzZSB1c2VzIGl0LlxuICAgIHByaW9yaXR5OiAxLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nTW9kZWxDb21waWxlKGVsZW1lbnQpIHtcbiAgICAgIC8vIFNldHVwIGluaXRpYWwgc3RhdGUgb2YgdGhlIGNvbnRyb2xcbiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoUFJJU1RJTkVfQ0xBU1MpLmFkZENsYXNzKFVOVE9VQ0hFRF9DTEFTUykuYWRkQ2xhc3MoVkFMSURfQ0xBU1MpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcmU6IGZ1bmN0aW9uIG5nTW9kZWxQcmVMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXSxcbiAgICAgICAgICAgICAgZm9ybUN0cmwgPSBjdHJsc1sxXSB8fCBudWxsRm9ybUN0cmw7XG5cbiAgICAgICAgICBtb2RlbEN0cmwuJCRzZXRPcHRpb25zKGN0cmxzWzJdICYmIGN0cmxzWzJdLiRvcHRpb25zKTtcblxuICAgICAgICAgIC8vIG5vdGlmeSBvdGhlcnMsIGVzcGVjaWFsbHkgcGFyZW50IGZvcm1zXG4gICAgICAgICAgZm9ybUN0cmwuJGFkZENvbnRyb2wobW9kZWxDdHJsKTtcblxuICAgICAgICAgIGF0dHIuJG9ic2VydmUoJ25hbWUnLCBmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKG1vZGVsQ3RybC4kbmFtZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgZm9ybUN0cmwuJCRyZW5hbWVDb250cm9sKG1vZGVsQ3RybCwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9ybUN0cmwuJHJlbW92ZUNvbnRyb2wobW9kZWxDdHJsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zdDogZnVuY3Rpb24gbmdNb2RlbFBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXTtcbiAgICAgICAgICBpZiAobW9kZWxDdHJsLiRvcHRpb25zICYmIG1vZGVsQ3RybC4kb3B0aW9ucy51cGRhdGVPbikge1xuICAgICAgICAgICAgZWxlbWVudC5vbihtb2RlbEN0cmwuJG9wdGlvbnMudXBkYXRlT24sIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgIG1vZGVsQ3RybC4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0KGV2ICYmIGV2LnR5cGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZWxlbWVudC5vbignYmx1cicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBpZiAobW9kZWxDdHJsLiR0b3VjaGVkKSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmICgkcm9vdFNjb3BlLiQkcGhhc2UpIHtcbiAgICAgICAgICAgICAgc2NvcGUuJGV2YWxBc3luYyhtb2RlbEN0cmwuJHNldFRvdWNoZWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KG1vZGVsQ3RybC4kc2V0VG91Y2hlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbnZhciBERUZBVUxUX1JFR0VYUCA9IC8oXFxzK3xeKWRlZmF1bHQoXFxzK3wkKS87XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb2RlbE9wdGlvbnNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFsbG93cyB0dW5pbmcgaG93IG1vZGVsIHVwZGF0ZXMgYXJlIGRvbmUuIFVzaW5nIGBuZ01vZGVsT3B0aW9uc2AgeW91IGNhbiBzcGVjaWZ5IGEgY3VzdG9tIGxpc3Qgb2ZcbiAqIGV2ZW50cyB0aGF0IHdpbGwgdHJpZ2dlciBhIG1vZGVsIHVwZGF0ZSBhbmQvb3IgYSBkZWJvdW5jaW5nIGRlbGF5IHNvIHRoYXQgdGhlIGFjdHVhbCB1cGRhdGUgb25seVxuICogdGFrZXMgcGxhY2Ugd2hlbiBhIHRpbWVyIGV4cGlyZXM7IHRoaXMgdGltZXIgd2lsbCBiZSByZXNldCBhZnRlciBhbm90aGVyIGNoYW5nZSB0YWtlcyBwbGFjZS5cbiAqXG4gKiBHaXZlbiB0aGUgbmF0dXJlIG9mIGBuZ01vZGVsT3B0aW9uc2AsIHRoZSB2YWx1ZSBkaXNwbGF5ZWQgaW5zaWRlIGlucHV0IGZpZWxkcyBpbiB0aGUgdmlldyBtaWdodFxuICogYmUgZGlmZmVyZW50IHRoYW4gdGhlIHZhbHVlIGluIHRoZSBhY3R1YWwgbW9kZWwuIFRoaXMgbWVhbnMgdGhhdCBpZiB5b3UgdXBkYXRlIHRoZSBtb2RlbCB5b3VcbiAqIHNob3VsZCBhbHNvIGludm9rZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciBgJHJvbGxiYWNrVmlld1ZhbHVlYH0gb24gdGhlIHJlbGV2YW50IGlucHV0IGZpZWxkIGluXG4gKiBvcmRlciB0byBtYWtlIHN1cmUgaXQgaXMgc3luY2hyb25pemVkIHdpdGggdGhlIG1vZGVsIGFuZCB0aGF0IGFueSBkZWJvdW5jZWQgYWN0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIFRoZSBlYXNpZXN0IHdheSB0byByZWZlcmVuY2UgdGhlIGNvbnRyb2wncyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciBgJHJvbGxiYWNrVmlld1ZhbHVlYH1cbiAqIG1ldGhvZCBpcyBieSBtYWtpbmcgc3VyZSB0aGUgaW5wdXQgaXMgcGxhY2VkIGluc2lkZSBhIGZvcm0gdGhhdCBoYXMgYSBgbmFtZWAgYXR0cmlidXRlLiBUaGlzIGlzXG4gKiBpbXBvcnRhbnQgYmVjYXVzZSBgZm9ybWAgY29udHJvbGxlcnMgYXJlIHB1Ymxpc2hlZCB0byB0aGUgcmVsYXRlZCBzY29wZSB1bmRlciB0aGUgbmFtZSBpbiB0aGVpclxuICogYG5hbWVgIGF0dHJpYnV0ZS5cbiAqXG4gKiBBbnkgcGVuZGluZyBjaGFuZ2VzIHdpbGwgdGFrZSBwbGFjZSBpbW1lZGlhdGVseSB3aGVuIGFuIGVuY2xvc2luZyBmb3JtIGlzIHN1Ym1pdHRlZCB2aWEgdGhlXG4gKiBgc3VibWl0YCBldmVudC4gTm90ZSB0aGF0IGBuZ0NsaWNrYCBldmVudHMgd2lsbCBvY2N1ciBiZWZvcmUgdGhlIG1vZGVsIGlzIHVwZGF0ZWQuIFVzZSBgbmdTdWJtaXRgXG4gKiB0byBoYXZlIGFjY2VzcyB0byB0aGUgdXBkYXRlZCBtb2RlbC5cbiAqXG4gKiBgbmdNb2RlbE9wdGlvbnNgIGhhcyBhbiBlZmZlY3Qgb24gdGhlIGVsZW1lbnQgaXQncyBkZWNsYXJlZCBvbiBhbmQgaXRzIGRlc2NlbmRhbnRzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBuZ01vZGVsT3B0aW9ucyBvcHRpb25zIHRvIGFwcGx5IHRvIHRoZSBjdXJyZW50IG1vZGVsLiBWYWxpZCBrZXlzIGFyZTpcbiAqICAgLSBgdXBkYXRlT25gOiBzdHJpbmcgc3BlY2lmeWluZyB3aGljaCBldmVudCBzaG91bGQgdGhlIGlucHV0IGJlIGJvdW5kIHRvLiBZb3UgY2FuIHNldCBzZXZlcmFsXG4gKiAgICAgZXZlbnRzIHVzaW5nIGFuIHNwYWNlIGRlbGltaXRlZCBsaXN0LiBUaGVyZSBpcyBhIHNwZWNpYWwgZXZlbnQgY2FsbGVkIGBkZWZhdWx0YCB0aGF0XG4gKiAgICAgbWF0Y2hlcyB0aGUgZGVmYXVsdCBldmVudHMgYmVsb25naW5nIG9mIHRoZSBjb250cm9sLlxuICogICAtIGBkZWJvdW5jZWA6IGludGVnZXIgdmFsdWUgd2hpY2ggY29udGFpbnMgdGhlIGRlYm91bmNlIG1vZGVsIHVwZGF0ZSB2YWx1ZSBpbiBtaWxsaXNlY29uZHMuIEFcbiAqICAgICB2YWx1ZSBvZiAwIHRyaWdnZXJzIGFuIGltbWVkaWF0ZSB1cGRhdGUuIElmIGFuIG9iamVjdCBpcyBzdXBwbGllZCBpbnN0ZWFkLCB5b3UgY2FuIHNwZWNpZnkgYVxuICogICAgIGN1c3RvbSB2YWx1ZSBmb3IgZWFjaCBldmVudC4gRm9yIGV4YW1wbGU6XG4gKiAgICAgYG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnZGVmYXVsdCBibHVyJywgZGVib3VuY2U6IHsnZGVmYXVsdCc6IDUwMCwgJ2JsdXInOiAwfSB9XCJgXG4gKiAgIC0gYGFsbG93SW52YWxpZGA6IGJvb2xlYW4gdmFsdWUgd2hpY2ggaW5kaWNhdGVzIHRoYXQgdGhlIG1vZGVsIGNhbiBiZSBzZXQgd2l0aCB2YWx1ZXMgdGhhdCBkaWRcbiAqICAgICBub3QgdmFsaWRhdGUgY29ycmVjdGx5IGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2Ygc2V0dGluZyB0aGUgbW9kZWwgdG8gdW5kZWZpbmVkLlxuICogICAtIGBnZXR0ZXJTZXR0ZXJgOiBib29sZWFuIHZhbHVlIHdoaWNoIGRldGVybWluZXMgd2hldGhlciBvciBub3QgdG8gdHJlYXQgZnVuY3Rpb25zIGJvdW5kIHRvXG4gICAgICAgYG5nTW9kZWxgIGFzIGdldHRlcnMvc2V0dGVycy5cbiAqICAgLSBgdGltZXpvbmVgOiBEZWZpbmVzIHRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgZm9yXG4gKiAgICAgYDxpbnB1dCB0eXBlPVwiZGF0ZVwiPmAsIGA8aW5wdXQgdHlwZT1cInRpbWVcIj5gLCAuLi4gLiBSaWdodCBub3csIHRoZSBvbmx5IHN1cHBvcnRlZCB2YWx1ZSBpcyBgJ1VUQydgLFxuICogICAgIG90aGVyd2lzZSB0aGUgZGVmYXVsdCB0aW1lem9uZSBvZiB0aGUgYnJvd3NlciB3aWxsIGJlIHVzZWQuXG4gKlxuICogQGV4YW1wbGVcblxuICBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIG92ZXJyaWRlIGltbWVkaWF0ZSB1cGRhdGVzLiBDaGFuZ2VzIG9uIHRoZSBpbnB1dHMgd2l0aGluIHRoZVxuICBmb3JtIHdpbGwgdXBkYXRlIHRoZSBtb2RlbCBvbmx5IHdoZW4gdGhlIGNvbnRyb2wgbG9zZXMgZm9jdXMgKGJsdXIgZXZlbnQpLiBJZiBgZXNjYXBlYCBrZXkgaXNcbiAgcHJlc3NlZCB3aGlsZSB0aGUgaW5wdXQgZmllbGQgaXMgZm9jdXNlZCwgdGhlIHZhbHVlIGlzIHJlc2V0IHRvIHRoZSB2YWx1ZSBpbiB0aGUgY3VycmVudCBtb2RlbC5cblxuICA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbE9wdGlvbnMtZGlyZWN0aXZlLWJsdXJcIiBtb2R1bGU9XCJvcHRpb25zRXhhbXBsZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cbiAgICAgICAgICBOYW1lOlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcbiAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJyB9XCJcbiAgICAgICAgICAgICAgICAgbmcta2V5dXA9XCJjYW5jZWwoJGV2ZW50KVwiIC8+PGJyIC8+XG5cbiAgICAgICAgICBPdGhlciBkYXRhOlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwidXNlci5kYXRhXCIgLz48YnIgLz5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWVcIj48L3NwYW4+PC9wcmU+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ29wdGlvbnNFeGFtcGxlJywgW10pXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLnVzZXIgPSB7IG5hbWU6ICdzYXknLCBkYXRhOiAnJyB9O1xuXG4gICAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLnVzZXJGb3JtLnVzZXJOYW1lLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1dKTtcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIG1vZGVsID0gZWxlbWVudChieS5iaW5kaW5nKCd1c2VyLm5hbWUnKSk7XG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLm5hbWUnKSk7XG4gICAgICB2YXIgb3RoZXIgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLmRhdGEnKSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWxsb3cgY3VzdG9tIGV2ZW50cycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpbnB1dC5zZW5kS2V5cygnIGhlbGxvJyk7XG4gICAgICAgIGlucHV0LmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3NheScpO1xuICAgICAgICBvdGhlci5jbGljaygpO1xuICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0VxdWFsKCdzYXkgaGVsbG8nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkICRyb2xsYmFja1ZpZXdWYWx1ZSB3aGVuIG1vZGVsIGNoYW5nZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaW5wdXQuc2VuZEtleXMoJyBoZWxsbycpO1xuICAgICAgICBleHBlY3QoaW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCdzYXkgaGVsbG8nKTtcbiAgICAgICAgaW5wdXQuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuRVNDQVBFKTtcbiAgICAgICAgZXhwZWN0KGlucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnc2F5Jyk7XG4gICAgICAgIG90aGVyLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3NheScpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG5cbiAgVGhpcyBvbmUgc2hvd3MgaG93IHRvIGRlYm91bmNlIG1vZGVsIGNoYW5nZXMuIE1vZGVsIHdpbGwgYmUgdXBkYXRlZCBvbmx5IDEgc2VjIGFmdGVyIGxhc3QgY2hhbmdlLlxuICBJZiB0aGUgYENsZWFyYCBidXR0b24gaXMgcHJlc3NlZCwgYW55IGRlYm91bmNlZCBhY3Rpb24gaXMgY2FuY2VsZWQgYW5kIHRoZSB2YWx1ZSBiZWNvbWVzIGVtcHR5LlxuXG4gIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtZGVib3VuY2VcIiBtb2R1bGU9XCJvcHRpb25zRXhhbXBsZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cbiAgICAgICAgICBOYW1lOlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcbiAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgZGVib3VuY2U6IDEwMDAgfVwiIC8+XG4gICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInVzZXJGb3JtLnVzZXJOYW1lLiRyb2xsYmFja1ZpZXdWYWx1ZSgpOyB1c2VyLm5hbWU9JydcIj5DbGVhcjwvYnV0dG9uPjxiciAvPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDxwcmU+dXNlci5uYW1lID0gPHNwYW4gbmctYmluZD1cInVzZXIubmFtZVwiPjwvc3Bhbj48L3ByZT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnb3B0aW9uc0V4YW1wbGUnLCBbXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUudXNlciA9IHsgbmFtZTogJ3NheScgfTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuXG4gIFRoaXMgb25lIHNob3dzIGhvdyB0byBiaW5kIHRvIGdldHRlci9zZXR0ZXJzOlxuXG4gIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtZ2V0dGVyLXNldHRlclwiIG1vZHVsZT1cImdldHRlclNldHRlckV4YW1wbGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XG4gICAgICAgICAgTmFtZTpcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxuICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCIgLz5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWUoKVwiPjwvc3Bhbj48L3ByZT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnZ2V0dGVyU2V0dGVyRXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgIHZhciBfbmFtZSA9ICdCcmlhbic7XG4gICAgICAgICAgJHNjb3BlLnVzZXIgPSB7XG4gICAgICAgICAgICBuYW1lOiBmdW5jdGlvbihuZXdOYW1lKSB7XG4gICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmlzRGVmaW5lZChuZXdOYW1lKSA/IChfbmFtZSA9IG5ld05hbWUpIDogX25hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG52YXIgbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRhdHRycycsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLiRvcHRpb25zID0gJHNjb3BlLiRldmFsKCRhdHRycy5uZ01vZGVsT3B0aW9ucyk7XG4gICAgICAvLyBBbGxvdyBhZGRpbmcvb3ZlcnJpZGluZyBib3VuZCBldmVudHNcbiAgICAgIGlmICh0aGlzLiRvcHRpb25zLnVwZGF0ZU9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQgPSBmYWxzZTtcbiAgICAgICAgLy8gZXh0cmFjdCBcImRlZmF1bHRcIiBwc2V1ZG8tZXZlbnQgZnJvbSBsaXN0IG9mIGV2ZW50cyB0aGF0IGNhbiB0cmlnZ2VyIGEgbW9kZWwgdXBkYXRlXG4gICAgICAgIHRoaXMuJG9wdGlvbnMudXBkYXRlT24gPSB0cmltKHRoaXMuJG9wdGlvbnMudXBkYXRlT24ucmVwbGFjZShERUZBVUxUX1JFR0VYUCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGhhdC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgIHJldHVybiAnICc7XG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XVxuICB9O1xufTtcblxuXG5cbi8vIGhlbHBlciBtZXRob2RzXG5mdW5jdGlvbiBhZGRTZXRWYWxpZGl0eU1ldGhvZChjb250ZXh0KSB7XG4gIHZhciBjdHJsID0gY29udGV4dC5jdHJsLFxuICAgICAgJGVsZW1lbnQgPSBjb250ZXh0LiRlbGVtZW50LFxuICAgICAgY2xhc3NDYWNoZSA9IHt9LFxuICAgICAgc2V0ID0gY29udGV4dC5zZXQsXG4gICAgICB1bnNldCA9IGNvbnRleHQudW5zZXQsXG4gICAgICBwYXJlbnRGb3JtID0gY29udGV4dC5wYXJlbnRGb3JtLFxuICAgICAgJGFuaW1hdGUgPSBjb250ZXh0LiRhbmltYXRlO1xuXG4gIGNsYXNzQ2FjaGVbSU5WQUxJRF9DTEFTU10gPSAhKGNsYXNzQ2FjaGVbVkFMSURfQ0xBU1NdID0gJGVsZW1lbnQuaGFzQ2xhc3MoVkFMSURfQ0xBU1MpKTtcblxuICBjdHJsLiRzZXRWYWxpZGl0eSA9IHNldFZhbGlkaXR5O1xuXG4gIGZ1bmN0aW9uIHNldFZhbGlkaXR5KHZhbGlkYXRpb25FcnJvcktleSwgc3RhdGUsIGNvbnRyb2xsZXIpIHtcbiAgICBpZiAoc3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY3JlYXRlQW5kU2V0KCckcGVuZGluZycsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVuc2V0QW5kQ2xlYW51cCgnJHBlbmRpbmcnLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgIH1cbiAgICBpZiAoIWlzQm9vbGVhbihzdGF0ZSkpIHtcbiAgICAgIHVuc2V0KGN0cmwuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgdW5zZXQoY3RybC4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICB1bnNldChjdHJsLiRlcnJvciwgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICAgICAgc2V0KGN0cmwuJCRzdWNjZXNzLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0KGN0cmwuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgICB1bnNldChjdHJsLiQkc3VjY2VzcywgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGN0cmwuJHBlbmRpbmcpIHtcbiAgICAgIGNhY2hlZFRvZ2dsZUNsYXNzKFBFTkRJTkdfQ0xBU1MsIHRydWUpO1xuICAgICAgY3RybC4kdmFsaWQgPSBjdHJsLiRpbnZhbGlkID0gdW5kZWZpbmVkO1xuICAgICAgdG9nZ2xlVmFsaWRhdGlvbkNzcygnJywgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhY2hlZFRvZ2dsZUNsYXNzKFBFTkRJTkdfQ0xBU1MsIGZhbHNlKTtcbiAgICAgIGN0cmwuJHZhbGlkID0gaXNPYmplY3RFbXB0eShjdHJsLiRlcnJvcik7XG4gICAgICBjdHJsLiRpbnZhbGlkID0gIWN0cmwuJHZhbGlkO1xuICAgICAgdG9nZ2xlVmFsaWRhdGlvbkNzcygnJywgY3RybC4kdmFsaWQpO1xuICAgIH1cblxuICAgIC8vIHJlLXJlYWQgdGhlIHN0YXRlIGFzIHRoZSBzZXQvdW5zZXQgbWV0aG9kcyBjb3VsZCBoYXZlXG4gICAgLy8gY29tYmluZWQgc3RhdGUgaW4gY3RybC4kZXJyb3JbdmFsaWRhdGlvbkVycm9yXSAodXNlZCBmb3IgZm9ybXMpLFxuICAgIC8vIHdoZXJlIHNldHRpbmcvdW5zZXR0aW5nIG9ubHkgaW5jcmVtZW50cy9kZWNyZW1lbnRzIHRoZSB2YWx1ZSxcbiAgICAvLyBhbmQgZG9lcyBub3QgcmVwbGFjZSBpdC5cbiAgICB2YXIgY29tYmluZWRTdGF0ZTtcbiAgICBpZiAoY3RybC4kcGVuZGluZyAmJiBjdHJsLiRwZW5kaW5nW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChjdHJsLiRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldKSB7XG4gICAgICBjb21iaW5lZFN0YXRlID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChjdHJsLiQkc3VjY2Vzc1t2YWxpZGF0aW9uRXJyb3JLZXldKSB7XG4gICAgICBjb21iaW5lZFN0YXRlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29tYmluZWRTdGF0ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgdG9nZ2xlVmFsaWRhdGlvbkNzcyh2YWxpZGF0aW9uRXJyb3JLZXksIGNvbWJpbmVkU3RhdGUpO1xuICAgIHBhcmVudEZvcm0uJHNldFZhbGlkaXR5KHZhbGlkYXRpb25FcnJvcktleSwgY29tYmluZWRTdGF0ZSwgY3RybCk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVBbmRTZXQobmFtZSwgdmFsdWUsIGNvbnRyb2xsZXIpIHtcbiAgICBpZiAoIWN0cmxbbmFtZV0pIHtcbiAgICAgIGN0cmxbbmFtZV0gPSB7fTtcbiAgICB9XG4gICAgc2V0KGN0cmxbbmFtZV0sIHZhbHVlLCBjb250cm9sbGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuc2V0QW5kQ2xlYW51cChuYW1lLCB2YWx1ZSwgY29udHJvbGxlcikge1xuICAgIGlmIChjdHJsW25hbWVdKSB7XG4gICAgICB1bnNldChjdHJsW25hbWVdLCB2YWx1ZSwgY29udHJvbGxlcik7XG4gICAgfVxuICAgIGlmIChpc09iamVjdEVtcHR5KGN0cmxbbmFtZV0pKSB7XG4gICAgICBjdHJsW25hbWVdID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhY2hlZFRvZ2dsZUNsYXNzKGNsYXNzTmFtZSwgc3dpdGNoVmFsdWUpIHtcbiAgICBpZiAoc3dpdGNoVmFsdWUgJiYgIWNsYXNzQ2FjaGVbY2xhc3NOYW1lXSkge1xuICAgICAgJGFuaW1hdGUuYWRkQ2xhc3MoJGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICBjbGFzc0NhY2hlW2NsYXNzTmFtZV0gPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXN3aXRjaFZhbHVlICYmIGNsYXNzQ2FjaGVbY2xhc3NOYW1lXSkge1xuICAgICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3MoJGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICBjbGFzc0NhY2hlW2NsYXNzTmFtZV0gPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGVWYWxpZGF0aW9uQ3NzKHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCkge1xuICAgIHZhbGlkYXRpb25FcnJvcktleSA9IHZhbGlkYXRpb25FcnJvcktleSA/ICctJyArIHNuYWtlX2Nhc2UodmFsaWRhdGlvbkVycm9yS2V5LCAnLScpIDogJyc7XG5cbiAgICBjYWNoZWRUb2dnbGVDbGFzcyhWQUxJRF9DTEFTUyArIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCA9PT0gdHJ1ZSk7XG4gICAgY2FjaGVkVG9nZ2xlQ2xhc3MoSU5WQUxJRF9DTEFTUyArIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCA9PT0gZmFsc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0RW1wdHkob2JqKSB7XG4gIGlmIChvYmopIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ05vbkJpbmRhYmxlXG4gKiBAcmVzdHJpY3QgQUNcbiAqIEBwcmlvcml0eSAxMDAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nTm9uQmluZGFibGVgIGRpcmVjdGl2ZSB0ZWxscyBBbmd1bGFyIG5vdCB0byBjb21waWxlIG9yIGJpbmQgdGhlIGNvbnRlbnRzIG9mIHRoZSBjdXJyZW50XG4gKiBET00gZWxlbWVudC4gVGhpcyBpcyB1c2VmdWwgaWYgdGhlIGVsZW1lbnQgY29udGFpbnMgd2hhdCBhcHBlYXJzIHRvIGJlIEFuZ3VsYXIgZGlyZWN0aXZlcyBhbmRcbiAqIGJpbmRpbmdzIGJ1dCB3aGljaCBzaG91bGQgYmUgaWdub3JlZCBieSBBbmd1bGFyLiBUaGlzIGNvdWxkIGJlIHRoZSBjYXNlIGlmIHlvdSBoYXZlIGEgc2l0ZSB0aGF0XG4gKiBkaXNwbGF5cyBzbmlwcGV0cyBvZiBjb2RlLCBmb3IgaW5zdGFuY2UuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKlxuICogQGV4YW1wbGVcbiAqIEluIHRoaXMgZXhhbXBsZSB0aGVyZSBhcmUgdHdvIGxvY2F0aW9ucyB3aGVyZSBhIHNpbXBsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmcgKGB7e319YCkgaXMgcHJlc2VudCxcbiAqIGJ1dCB0aGUgb25lIHdyYXBwZWQgaW4gYG5nTm9uQmluZGFibGVgIGlzIGxlZnQgYWxvbmUuXG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxkaXY+Tm9ybWFsOiB7ezEgKyAyfX08L2Rpdj5cbiAgICAgICAgPGRpdiBuZy1ub24tYmluZGFibGU+SWdub3JlZDoge3sxICsgMn19PC9kaXY+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1ub24tYmluZGFibGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJzEgKyAyJykpLmdldFRleHQoKSkudG9Db250YWluKCczJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCdkaXYnKSkubGFzdCgpLmdldFRleHQoKSkudG9NYXRjaCgvMSBcXCsgMi8pO1xuICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nTm9uQmluZGFibGVEaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7IHRlcm1pbmFsOiB0cnVlLCBwcmlvcml0eTogMTAwMCB9KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1BsdXJhbGl6ZVxuICogQHJlc3RyaWN0IEVBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgbmdQbHVyYWxpemVgIGlzIGEgZGlyZWN0aXZlIHRoYXQgZGlzcGxheXMgbWVzc2FnZXMgYWNjb3JkaW5nIHRvIGVuLVVTIGxvY2FsaXphdGlvbiBydWxlcy5cbiAqIFRoZXNlIHJ1bGVzIGFyZSBidW5kbGVkIHdpdGggYW5ndWxhci5qcywgYnV0IGNhbiBiZSBvdmVycmlkZGVuXG4gKiAoc2VlIHtAbGluayBndWlkZS9pMThuIEFuZ3VsYXIgaTE4bn0gZGV2IGd1aWRlKS4gWW91IGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZSBkaXJlY3RpdmVcbiAqIGJ5IHNwZWNpZnlpbmcgdGhlIG1hcHBpbmdzIGJldHdlZW5cbiAqIFtwbHVyYWwgY2F0ZWdvcmllc10oaHR0cDovL3VuaWNvZGUub3JnL3JlcG9zL2NsZHItdG1wL3RydW5rL2RpZmYvc3VwcGxlbWVudGFsL2xhbmd1YWdlX3BsdXJhbF9ydWxlcy5odG1sKVxuICogYW5kIHRoZSBzdHJpbmdzIHRvIGJlIGRpc3BsYXllZC5cbiAqXG4gKiAjIFBsdXJhbCBjYXRlZ29yaWVzIGFuZCBleHBsaWNpdCBudW1iZXIgcnVsZXNcbiAqIFRoZXJlIGFyZSB0d29cbiAqIFtwbHVyYWwgY2F0ZWdvcmllc10oaHR0cDovL3VuaWNvZGUub3JnL3JlcG9zL2NsZHItdG1wL3RydW5rL2RpZmYvc3VwcGxlbWVudGFsL2xhbmd1YWdlX3BsdXJhbF9ydWxlcy5odG1sKVxuICogaW4gQW5ndWxhcidzIGRlZmF1bHQgZW4tVVMgbG9jYWxlOiBcIm9uZVwiIGFuZCBcIm90aGVyXCIuXG4gKlxuICogV2hpbGUgYSBwbHVyYWwgY2F0ZWdvcnkgbWF5IG1hdGNoIG1hbnkgbnVtYmVycyAoZm9yIGV4YW1wbGUsIGluIGVuLVVTIGxvY2FsZSwgXCJvdGhlclwiIGNhbiBtYXRjaFxuICogYW55IG51bWJlciB0aGF0IGlzIG5vdCAxKSwgYW4gZXhwbGljaXQgbnVtYmVyIHJ1bGUgY2FuIG9ubHkgbWF0Y2ggb25lIG51bWJlci4gRm9yIGV4YW1wbGUsIHRoZVxuICogZXhwbGljaXQgbnVtYmVyIHJ1bGUgZm9yIFwiM1wiIG1hdGNoZXMgdGhlIG51bWJlciAzLiBUaGVyZSBhcmUgZXhhbXBsZXMgb2YgcGx1cmFsIGNhdGVnb3JpZXNcbiAqIGFuZCBleHBsaWNpdCBudW1iZXIgcnVsZXMgdGhyb3VnaG91dCB0aGUgcmVzdCBvZiB0aGlzIGRvY3VtZW50YXRpb24uXG4gKlxuICogIyBDb25maWd1cmluZyBuZ1BsdXJhbGl6ZVxuICogWW91IGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZSBieSBwcm92aWRpbmcgMiBhdHRyaWJ1dGVzOiBgY291bnRgIGFuZCBgd2hlbmAuXG4gKiBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBvcHRpb25hbCBhdHRyaWJ1dGUsIGBvZmZzZXRgLlxuICpcbiAqIFRoZSB2YWx1ZSBvZiB0aGUgYGNvdW50YCBhdHRyaWJ1dGUgY2FuIGJlIGVpdGhlciBhIHN0cmluZyBvciBhbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvblxuICogQW5ndWxhciBleHByZXNzaW9ufTsgdGhlc2UgYXJlIGV2YWx1YXRlZCBvbiB0aGUgY3VycmVudCBzY29wZSBmb3IgaXRzIGJvdW5kIHZhbHVlLlxuICpcbiAqIFRoZSBgd2hlbmAgYXR0cmlidXRlIHNwZWNpZmllcyB0aGUgbWFwcGluZ3MgYmV0d2VlbiBwbHVyYWwgY2F0ZWdvcmllcyBhbmQgdGhlIGFjdHVhbFxuICogc3RyaW5nIHRvIGJlIGRpc3BsYXllZC4gVGhlIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgc2hvdWxkIGJlIGEgSlNPTiBvYmplY3QuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byBjb25maWd1cmUgbmdQbHVyYWxpemU6XG4gKlxuICogYGBgaHRtbFxuICogPG5nLXBsdXJhbGl6ZSBjb3VudD1cInBlcnNvbkNvdW50XCJcbiAgICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICcxIHBlcnNvbiBpcyB2aWV3aW5nLicsXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne30gcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XG4gKiA8L25nLXBsdXJhbGl6ZT5cbiAqYGBgXG4gKlxuICogSW4gdGhlIGV4YW1wbGUsIGBcIjA6IE5vYm9keSBpcyB2aWV3aW5nLlwiYCBpcyBhbiBleHBsaWNpdCBudW1iZXIgcnVsZS4gSWYgeW91IGRpZCBub3RcbiAqIHNwZWNpZnkgdGhpcyBydWxlLCAwIHdvdWxkIGJlIG1hdGNoZWQgdG8gdGhlIFwib3RoZXJcIiBjYXRlZ29yeSBhbmQgXCIwIHBlb3BsZSBhcmUgdmlld2luZ1wiXG4gKiB3b3VsZCBiZSBzaG93biBpbnN0ZWFkIG9mIFwiTm9ib2R5IGlzIHZpZXdpbmdcIi4gWW91IGNhbiBzcGVjaWZ5IGFuIGV4cGxpY2l0IG51bWJlciBydWxlIGZvclxuICogb3RoZXIgbnVtYmVycywgZm9yIGV4YW1wbGUgMTIsIHNvIHRoYXQgaW5zdGVhZCBvZiBzaG93aW5nIFwiMTIgcGVvcGxlIGFyZSB2aWV3aW5nXCIsIHlvdSBjYW5cbiAqIHNob3cgXCJhIGRvemVuIHBlb3BsZSBhcmUgdmlld2luZ1wiLlxuICpcbiAqIFlvdSBjYW4gdXNlIGEgc2V0IG9mIGNsb3NlZCBicmFjZXMgKGB7fWApIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHRoZSBudW1iZXIgdGhhdCB5b3Ugd2FudCBzdWJzdGl0dXRlZFxuICogaW50byBwbHVyYWxpemVkIHN0cmluZ3MuIEluIHRoZSBwcmV2aW91cyBleGFtcGxlLCBBbmd1bGFyIHdpbGwgcmVwbGFjZSBge31gIHdpdGhcbiAqIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT5ge3twZXJzb25Db3VudH19YDwvc3Bhbj4uIFRoZSBjbG9zZWQgYnJhY2VzIGB7fWAgaXMgYSBwbGFjZWhvbGRlclxuICogZm9yIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57e251bWJlckV4cHJlc3Npb259fTwvc3Bhbj4uXG4gKlxuICogIyBDb25maWd1cmluZyBuZ1BsdXJhbGl6ZSB3aXRoIG9mZnNldFxuICogVGhlIGBvZmZzZXRgIGF0dHJpYnV0ZSBhbGxvd3MgZnVydGhlciBjdXN0b21pemF0aW9uIG9mIHBsdXJhbGl6ZWQgdGV4dCwgd2hpY2ggY2FuIHJlc3VsdCBpblxuICogYSBiZXR0ZXIgdXNlciBleHBlcmllbmNlLiBGb3IgZXhhbXBsZSwgaW5zdGVhZCBvZiB0aGUgbWVzc2FnZSBcIjQgcGVvcGxlIGFyZSB2aWV3aW5nIHRoaXMgZG9jdW1lbnRcIixcbiAqIHlvdSBtaWdodCBkaXNwbGF5IFwiSm9obiwgS2F0ZSBhbmQgMiBvdGhlcnMgYXJlIHZpZXdpbmcgdGhpcyBkb2N1bWVudFwiLlxuICogVGhlIG9mZnNldCBhdHRyaWJ1dGUgYWxsb3dzIHlvdSB0byBvZmZzZXQgYSBudW1iZXIgYnkgYW55IGRlc2lyZWQgdmFsdWUuXG4gKiBMZXQncyB0YWtlIGEgbG9vayBhdCBhbiBleGFtcGxlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuZy1wbHVyYWxpemUgY291bnQ9XCJwZXJzb25Db3VudFwiIG9mZnNldD0yXG4gKiAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICcxJzogJ3t7cGVyc29uMX19IGlzIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICcyJzogJ3t7cGVyc29uMX19IGFuZCB7e3BlcnNvbjJ9fSBhcmUgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIHt9IG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxuICogPC9uZy1wbHVyYWxpemU+XG4gKiBgYGBcbiAqXG4gKiBOb3RpY2UgdGhhdCB3ZSBhcmUgc3RpbGwgdXNpbmcgdHdvIHBsdXJhbCBjYXRlZ29yaWVzKG9uZSwgb3RoZXIpLCBidXQgd2UgYWRkZWRcbiAqIHRocmVlIGV4cGxpY2l0IG51bWJlciBydWxlcyAwLCAxIGFuZCAyLlxuICogV2hlbiBvbmUgcGVyc29uLCBwZXJoYXBzIEpvaG4sIHZpZXdzIHRoZSBkb2N1bWVudCwgXCJKb2huIGlzIHZpZXdpbmdcIiB3aWxsIGJlIHNob3duLlxuICogV2hlbiB0aHJlZSBwZW9wbGUgdmlldyB0aGUgZG9jdW1lbnQsIG5vIGV4cGxpY2l0IG51bWJlciBydWxlIGlzIGZvdW5kLCBzb1xuICogYW4gb2Zmc2V0IG9mIDIgaXMgdGFrZW4gb2ZmIDMsIGFuZCBBbmd1bGFyIHVzZXMgMSB0byBkZWNpZGUgdGhlIHBsdXJhbCBjYXRlZ29yeS5cbiAqIEluIHRoaXMgY2FzZSwgcGx1cmFsIGNhdGVnb3J5ICdvbmUnIGlzIG1hdGNoZWQgYW5kIFwiSm9obiwgTWFyeSBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZ1wiXG4gKiBpcyBzaG93bi5cbiAqXG4gKiBOb3RlIHRoYXQgd2hlbiB5b3Ugc3BlY2lmeSBvZmZzZXRzLCB5b3UgbXVzdCBwcm92aWRlIGV4cGxpY2l0IG51bWJlciBydWxlcyBmb3JcbiAqIG51bWJlcnMgZnJvbSAwIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhlIG9mZnNldC4gSWYgeW91IHVzZSBhbiBvZmZzZXQgb2YgMywgZm9yIGV4YW1wbGUsXG4gKiB5b3UgbXVzdCBwcm92aWRlIGV4cGxpY2l0IG51bWJlciBydWxlcyBmb3IgMCwgMSwgMiBhbmQgMy4gWW91IG11c3QgYWxzbyBwcm92aWRlIHBsdXJhbCBzdHJpbmdzIGZvclxuICogcGx1cmFsIGNhdGVnb3JpZXMgXCJvbmVcIiBhbmQgXCJvdGhlclwiLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfGV4cHJlc3Npb259IGNvdW50IFRoZSB2YXJpYWJsZSB0byBiZSBib3VuZCB0by5cbiAqIEBwYXJhbSB7c3RyaW5nfSB3aGVuIFRoZSBtYXBwaW5nIGJldHdlZW4gcGx1cmFsIGNhdGVnb3J5IHRvIGl0cyBjb3JyZXNwb25kaW5nIHN0cmluZ3MuXG4gKiBAcGFyYW0ge251bWJlcj19IG9mZnNldCBPZmZzZXQgdG8gZGVkdWN0IGZyb20gdGhlIHRvdGFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG1vZHVsZT1cInBsdXJhbGl6ZUV4YW1wbGVcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3BsdXJhbGl6ZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5wZXJzb24xID0gJ0lnb3InO1xuICAgICAgICAgICAgICAkc2NvcGUucGVyc29uMiA9ICdNaXNrbyc7XG4gICAgICAgICAgICAgICRzY29wZS5wZXJzb25Db3VudCA9IDE7XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgIDwvc2NyaXB0PlxuICAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgIFBlcnNvbiAxOjxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwicGVyc29uMVwiIHZhbHVlPVwiSWdvclwiIC8+PGJyLz5cbiAgICAgICAgICBQZXJzb24gMjo8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInBlcnNvbjJcIiB2YWx1ZT1cIk1pc2tvXCIgLz48YnIvPlxuICAgICAgICAgIE51bWJlciBvZiBQZW9wbGU6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb25Db3VudFwiIHZhbHVlPVwiMVwiIC8+PGJyLz5cblxuICAgICAgICAgIDwhLS0tIEV4YW1wbGUgd2l0aCBzaW1wbGUgcGx1cmFsaXphdGlvbiBydWxlcyBmb3IgZW4gbG9jYWxlIC0tLT5cbiAgICAgICAgICBXaXRob3V0IE9mZnNldDpcbiAgICAgICAgICA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAnMSBwZXJzb24gaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7fSBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cbiAgICAgICAgICA8L25nLXBsdXJhbGl6ZT48YnI+XG5cbiAgICAgICAgICA8IS0tLSBFeGFtcGxlIHdpdGggb2Zmc2V0IC0tLT5cbiAgICAgICAgICBXaXRoIE9mZnNldCgyKTpcbiAgICAgICAgICA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIiBvZmZzZXQ9MlxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxJzogJ3t7cGVyc29uMX19IGlzIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMic6ICd7e3BlcnNvbjF9fSBhbmQge3twZXJzb24yfX0gYXJlIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb25lJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIHt9IG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxuICAgICAgICAgIDwvbmctcGx1cmFsaXplPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCBzaG93IGNvcnJlY3QgcGx1cmFsaXplZCBzdHJpbmcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgd2l0aG91dE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgwKTtcbiAgICAgICAgICB2YXIgd2l0aE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgxKTtcbiAgICAgICAgICB2YXIgY291bnRJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbkNvdW50JykpO1xuXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCcxIHBlcnNvbiBpcyB2aWV3aW5nLicpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciBpcyB2aWV3aW5nLicpO1xuXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzAnKTtcblxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnTm9ib2R5IGlzIHZpZXdpbmcuJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdOb2JvZHkgaXMgdmlld2luZy4nKTtcblxuICAgICAgICAgIGNvdW50SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCcyJyk7XG5cbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzIgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciBhbmQgTWlza28gYXJlIHZpZXdpbmcuJyk7XG5cbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnMycpO1xuXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCczIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IsIE1pc2tvIGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nLicpO1xuXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzQnKTtcblxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnNCBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yLCBNaXNrbyBhbmQgMiBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdCgnc2hvdWxkIHNob3cgZGF0YS1ib3VuZCBuYW1lcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB3aXRoT2Zmc2V0ID0gZWxlbWVudC5hbGwoYnkuY3NzKCduZy1wbHVyYWxpemUnKSkuZ2V0KDEpO1xuICAgICAgICAgIHZhciBwZXJzb25Db3VudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbkNvdW50JykpO1xuICAgICAgICAgIHZhciBwZXJzb24xID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uMScpKTtcbiAgICAgICAgICB2YXIgcGVyc29uMiA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbjInKSk7XG4gICAgICAgICAgcGVyc29uQ291bnQuY2xlYXIoKTtcbiAgICAgICAgICBwZXJzb25Db3VudC5zZW5kS2V5cygnNCcpO1xuICAgICAgICAgIHBlcnNvbjEuY2xlYXIoKTtcbiAgICAgICAgICBwZXJzb24xLnNlbmRLZXlzKCdEaScpO1xuICAgICAgICAgIHBlcnNvbjIuY2xlYXIoKTtcbiAgICAgICAgICBwZXJzb24yLnNlbmRLZXlzKCdWb2p0YScpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnRGksIFZvanRhIGFuZCAyIG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdQbHVyYWxpemVEaXJlY3RpdmUgPSBbJyRsb2NhbGUnLCAnJGludGVycG9sYXRlJywgZnVuY3Rpb24oJGxvY2FsZSwgJGludGVycG9sYXRlKSB7XG4gIHZhciBCUkFDRSA9IC97fS9nLFxuICAgICAgSVNfV0hFTiA9IC9ed2hlbihNaW51cyk/KC4rKSQvO1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIHZhciBudW1iZXJFeHAgPSBhdHRyLmNvdW50LFxuICAgICAgICAgIHdoZW5FeHAgPSBhdHRyLiRhdHRyLndoZW4gJiYgZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIud2hlbiksIC8vIHdlIGhhdmUge3t9fSBpbiBhdHRyc1xuICAgICAgICAgIG9mZnNldCA9IGF0dHIub2Zmc2V0IHx8IDAsXG4gICAgICAgICAgd2hlbnMgPSBzY29wZS4kZXZhbCh3aGVuRXhwKSB8fCB7fSxcbiAgICAgICAgICB3aGVuc0V4cEZucyA9IHt9LFxuICAgICAgICAgIHN0YXJ0U3ltYm9sID0gJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sKCksXG4gICAgICAgICAgZW5kU3ltYm9sID0gJGludGVycG9sYXRlLmVuZFN5bWJvbCgpLFxuICAgICAgICAgIGJyYWNlUmVwbGFjZW1lbnQgPSBzdGFydFN5bWJvbCArIG51bWJlckV4cCArICctJyArIG9mZnNldCArIGVuZFN5bWJvbCxcbiAgICAgICAgICB3YXRjaFJlbW92ZXIgPSBhbmd1bGFyLm5vb3AsXG4gICAgICAgICAgbGFzdENvdW50O1xuXG4gICAgICBmb3JFYWNoKGF0dHIsIGZ1bmN0aW9uKGV4cHJlc3Npb24sIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgdmFyIHRtcE1hdGNoID0gSVNfV0hFTi5leGVjKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICBpZiAodG1wTWF0Y2gpIHtcbiAgICAgICAgICB2YXIgd2hlbktleSA9ICh0bXBNYXRjaFsxXSA/ICctJyA6ICcnKSArIGxvd2VyY2FzZSh0bXBNYXRjaFsyXSk7XG4gICAgICAgICAgd2hlbnNbd2hlbktleV0gPSBlbGVtZW50LmF0dHIoYXR0ci4kYXR0clthdHRyaWJ1dGVOYW1lXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZm9yRWFjaCh3aGVucywgZnVuY3Rpb24oZXhwcmVzc2lvbiwga2V5KSB7XG4gICAgICAgIHdoZW5zRXhwRm5zW2tleV0gPSAkaW50ZXJwb2xhdGUoZXhwcmVzc2lvbi5yZXBsYWNlKEJSQUNFLCBicmFjZVJlcGxhY2VtZW50KSk7XG5cbiAgICAgIH0pO1xuXG4gICAgICBzY29wZS4kd2F0Y2gobnVtYmVyRXhwLCBmdW5jdGlvbiBuZ1BsdXJhbGl6ZVdhdGNoQWN0aW9uKG5ld1ZhbCkge1xuICAgICAgICB2YXIgY291bnQgPSBwYXJzZUZsb2F0KG5ld1ZhbCk7XG4gICAgICAgIHZhciBjb3VudElzTmFOID0gaXNOYU4oY291bnQpO1xuXG4gICAgICAgIGlmICghY291bnRJc05hTiAmJiAhKGNvdW50IGluIHdoZW5zKSkge1xuICAgICAgICAgIC8vIElmIGFuIGV4cGxpY2l0IG51bWJlciBydWxlIHN1Y2ggYXMgMSwgMiwgMy4uLiBpcyBkZWZpbmVkLCBqdXN0IHVzZSBpdC5cbiAgICAgICAgICAvLyBPdGhlcndpc2UsIGNoZWNrIGl0IGFnYWluc3QgcGx1cmFsaXphdGlvbiBydWxlcyBpbiAkbG9jYWxlIHNlcnZpY2UuXG4gICAgICAgICAgY291bnQgPSAkbG9jYWxlLnBsdXJhbENhdChjb3VudCAtIG9mZnNldCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBib3RoIGBjb3VudGAgYW5kIGBsYXN0Q291bnRgIGFyZSBOYU4sIHdlIGRvbid0IG5lZWQgdG8gcmUtcmVnaXN0ZXIgYSB3YXRjaC5cbiAgICAgICAgLy8gSW4gSlMgYE5hTiAhPT0gTmFOYCwgc28gd2UgaGF2ZSB0byBleGxpY2l0bHkgY2hlY2suXG4gICAgICAgIGlmICgoY291bnQgIT09IGxhc3RDb3VudCkgJiYgIShjb3VudElzTmFOICYmIGlzTmFOKGxhc3RDb3VudCkpKSB7XG4gICAgICAgICAgd2F0Y2hSZW1vdmVyKCk7XG4gICAgICAgICAgd2F0Y2hSZW1vdmVyID0gc2NvcGUuJHdhdGNoKHdoZW5zRXhwRm5zW2NvdW50XSwgdXBkYXRlRWxlbWVudFRleHQpO1xuICAgICAgICAgIGxhc3RDb3VudCA9IGNvdW50O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gdXBkYXRlRWxlbWVudFRleHQobmV3VGV4dCkge1xuICAgICAgICBlbGVtZW50LnRleHQobmV3VGV4dCB8fCAnJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufV07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdSZXBlYXRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdSZXBlYXRgIGRpcmVjdGl2ZSBpbnN0YW50aWF0ZXMgYSB0ZW1wbGF0ZSBvbmNlIHBlciBpdGVtIGZyb20gYSBjb2xsZWN0aW9uLiBFYWNoIHRlbXBsYXRlXG4gKiBpbnN0YW5jZSBnZXRzIGl0cyBvd24gc2NvcGUsIHdoZXJlIHRoZSBnaXZlbiBsb29wIHZhcmlhYmxlIGlzIHNldCB0byB0aGUgY3VycmVudCBjb2xsZWN0aW9uIGl0ZW0sXG4gKiBhbmQgYCRpbmRleGAgaXMgc2V0IHRvIHRoZSBpdGVtIGluZGV4IG9yIGtleS5cbiAqXG4gKiBTcGVjaWFsIHByb3BlcnRpZXMgYXJlIGV4cG9zZWQgb24gdGhlIGxvY2FsIHNjb3BlIG9mIGVhY2ggdGVtcGxhdGUgaW5zdGFuY2UsIGluY2x1ZGluZzpcbiAqXG4gKiB8IFZhcmlhYmxlICB8IFR5cGUgICAgICAgICAgICB8IERldGFpbHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IGAkaW5kZXhgICB8IHtAdHlwZSBudW1iZXJ9ICB8IGl0ZXJhdG9yIG9mZnNldCBvZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCAoMC4ubGVuZ3RoLTEpICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAkZmlyc3RgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgZmlyc3QgaW4gdGhlIGl0ZXJhdG9yLiAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAkbWlkZGxlYCB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgaW4gdGhlIGl0ZXJhdG9yLiB8XG4gKiB8IGAkbGFzdGAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgbGFzdCBpbiB0aGUgaXRlcmF0b3IuICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAkZXZlbmAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIGl0ZXJhdG9yIHBvc2l0aW9uIGAkaW5kZXhgIGlzIGV2ZW4gKG90aGVyd2lzZSBmYWxzZSkuICAgICAgICAgICB8XG4gKiB8IGAkb2RkYCAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIGl0ZXJhdG9yIHBvc2l0aW9uIGAkaW5kZXhgIGlzIG9kZCAob3RoZXJ3aXNlIGZhbHNlKS4gICAgICAgICAgICB8XG4gKlxuICogQ3JlYXRpbmcgYWxpYXNlcyBmb3IgdGhlc2UgcHJvcGVydGllcyBpcyBwb3NzaWJsZSB3aXRoIHtAbGluayBuZy5kaXJlY3RpdmU6bmdJbml0IGBuZ0luaXRgfS5cbiAqIFRoaXMgbWF5IGJlIHVzZWZ1bCB3aGVuLCBmb3IgaW5zdGFuY2UsIG5lc3RpbmcgbmdSZXBlYXRzLlxuICpcbiAqICMgSXRlcmF0aW5nIG92ZXIgb2JqZWN0IHByb3BlcnRpZXNcbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBnZXQgYG5nUmVwZWF0YCB0byBpdGVyYXRlIG92ZXIgdGhlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0IHVzaW5nIHRoZSBmb2xsb3dpbmdcbiAqIHN5bnRheDpcbiAqXG4gKiBgYGBqc1xuICogPGRpdiBuZy1yZXBlYXQ9XCIoa2V5LCB2YWx1ZSkgaW4gbXlPYmpcIj4gLi4uIDwvZGl2PlxuICogYGBgXG4gKlxuICogWW91IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGUgSmF2YVNjcmlwdCBzcGVjaWZpY2F0aW9uIGRvZXMgbm90IGRlZmluZSB3aGF0IG9yZGVyXG4gKiBpdCB3aWxsIHJldHVybiB0aGUga2V5cyBmb3IgYW4gb2JqZWN0LiBJbiBvcmRlciB0byBoYXZlIGEgZ3VhcmFudGVlZCBkZXRlcm1pbmlzdGljIG9yZGVyXG4gKiBmb3IgdGhlIGtleXMsIEFuZ3VsYXIgdmVyc2lvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyAxLjMgKipzb3J0IHRoZSBrZXlzIGFscGhhYmV0aWNhbGx5KiouXG4gKlxuICogSWYgdGhpcyBpcyBub3QgZGVzaXJlZCwgdGhlIHJlY29tbWVuZGVkIHdvcmthcm91bmQgaXMgdG8gY29udmVydCB5b3VyIG9iamVjdCBpbnRvIGFuIGFycmF5XG4gKiB0aGF0IGlzIHNvcnRlZCBpbnRvIHRoZSBvcmRlciB0aGF0IHlvdSBwcmVmZXIgYmVmb3JlIHByb3ZpZGluZyBpdCB0byBgbmdSZXBlYXRgLiAgWW91IGNvdWxkXG4gKiBkbyB0aGlzIHdpdGggYSBmaWx0ZXIgc3VjaCBhcyBbdG9BcnJheUZpbHRlcl0oaHR0cDovL25nbW9kdWxlcy5vcmcvbW9kdWxlcy9hbmd1bGFyLXRvQXJyYXlGaWx0ZXIpXG4gKiBvciBpbXBsZW1lbnQgYSBgJHdhdGNoYCBvbiB0aGUgb2JqZWN0IHlvdXJzZWxmLlxuICpcbiAqIEluIHZlcnNpb24gMS40IHdlIHdpbGwgcmVtb3ZlIHRoZSBzb3J0aW5nLCBzaW5jZSBpdCBzZWVtcyB0aGF0IGJyb3dzZXJzIGdlbmVyYWxseSBmb2xsb3cgdGhlXG4gKiBzdHJhdGVneSBvZiBwcm92aWRpbmcga2V5cyBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIGRlZmluZWQsIGFsdGhvdWdoIHRoZXJlIGFyZSBleGNlcHRpb25zXG4gKiB3aGVuIGtleXMgYXJlIGRlbGV0ZWQgYW5kIHJlaW5zdGF0ZWQuXG4gKlxuICpcbiAqICMgU3BlY2lhbCByZXBlYXQgc3RhcnQgYW5kIGVuZCBwb2ludHNcbiAqIFRvIHJlcGVhdCBhIHNlcmllcyBvZiBlbGVtZW50cyBpbnN0ZWFkIG9mIGp1c3Qgb25lIHBhcmVudCBlbGVtZW50LCBuZ1JlcGVhdCAoYXMgd2VsbCBhcyBvdGhlciBuZyBkaXJlY3RpdmVzKSBzdXBwb3J0cyBleHRlbmRpbmdcbiAqIHRoZSByYW5nZSBvZiB0aGUgcmVwZWF0ZXIgYnkgZGVmaW5pbmcgZXhwbGljaXQgc3RhcnQgYW5kIGVuZCBwb2ludHMgYnkgdXNpbmcgKipuZy1yZXBlYXQtc3RhcnQqKiBhbmQgKipuZy1yZXBlYXQtZW5kKiogcmVzcGVjdGl2ZWx5LlxuICogVGhlICoqbmctcmVwZWF0LXN0YXJ0KiogZGlyZWN0aXZlIHdvcmtzIHRoZSBzYW1lIGFzICoqbmctcmVwZWF0KiosIGJ1dCB3aWxsIHJlcGVhdCBhbGwgdGhlIEhUTUwgY29kZSAoaW5jbHVkaW5nIHRoZSB0YWcgaXQncyBkZWZpbmVkIG9uKVxuICogdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgZW5kaW5nIEhUTUwgdGFnIHdoZXJlICoqbmctcmVwZWF0LWVuZCoqIGlzIHBsYWNlZC5cbiAqXG4gKiBUaGUgZXhhbXBsZSBiZWxvdyBtYWtlcyB1c2Ugb2YgdGhpcyBmZWF0dXJlOlxuICogYGBgaHRtbFxuICogICA8aGVhZGVyIG5nLXJlcGVhdC1zdGFydD1cIml0ZW0gaW4gaXRlbXNcIj5cbiAqICAgICBIZWFkZXIge3sgaXRlbSB9fVxuICogICA8L2hlYWRlcj5cbiAqICAgPGRpdiBjbGFzcz1cImJvZHlcIj5cbiAqICAgICBCb2R5IHt7IGl0ZW0gfX1cbiAqICAgPC9kaXY+XG4gKiAgIDxmb290ZXIgbmctcmVwZWF0LWVuZD5cbiAqICAgICBGb290ZXIge3sgaXRlbSB9fVxuICogICA8L2Zvb3Rlcj5cbiAqIGBgYFxuICpcbiAqIEFuZCB3aXRoIGFuIGlucHV0IG9mIHtAdHlwZSBbJ0EnLCdCJ119IGZvciB0aGUgaXRlbXMgdmFyaWFibGUgaW4gdGhlIGV4YW1wbGUgYWJvdmUsIHRoZSBvdXRwdXQgd2lsbCBldmFsdWF0ZSB0bzpcbiAqIGBgYGh0bWxcbiAqICAgPGhlYWRlcj5cbiAqICAgICBIZWFkZXIgQVxuICogICA8L2hlYWRlcj5cbiAqICAgPGRpdiBjbGFzcz1cImJvZHlcIj5cbiAqICAgICBCb2R5IEFcbiAqICAgPC9kaXY+XG4gKiAgIDxmb290ZXI+XG4gKiAgICAgRm9vdGVyIEFcbiAqICAgPC9mb290ZXI+XG4gKiAgIDxoZWFkZXI+XG4gKiAgICAgSGVhZGVyIEJcbiAqICAgPC9oZWFkZXI+XG4gKiAgIDxkaXYgY2xhc3M9XCJib2R5XCI+XG4gKiAgICAgQm9keSBCXG4gKiAgIDwvZGl2PlxuICogICA8Zm9vdGVyPlxuICogICAgIEZvb3RlciBCXG4gKiAgIDwvZm9vdGVyPlxuICogYGBgXG4gKlxuICogVGhlIGN1c3RvbSBzdGFydCBhbmQgZW5kIHBvaW50cyBmb3IgbmdSZXBlYXQgYWxzbyBzdXBwb3J0IGFsbCBvdGhlciBIVE1MIGRpcmVjdGl2ZSBzeW50YXggZmxhdm9ycyBwcm92aWRlZCBpbiBBbmd1bGFySlMgKHN1Y2hcbiAqIGFzICoqZGF0YS1uZy1yZXBlYXQtc3RhcnQqKiwgKip4LW5nLXJlcGVhdC1zdGFydCoqIGFuZCAqKm5nOnJlcGVhdC1zdGFydCoqKS5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogKiouZW50ZXIqKiAtIHdoZW4gYSBuZXcgaXRlbSBpcyBhZGRlZCB0byB0aGUgbGlzdCBvciB3aGVuIGFuIGl0ZW0gaXMgcmV2ZWFsZWQgYWZ0ZXIgYSBmaWx0ZXJcbiAqXG4gKiAqKi5sZWF2ZSoqIC0gd2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQgZnJvbSB0aGUgbGlzdCBvciB3aGVuIGFuIGl0ZW0gaXMgZmlsdGVyZWQgb3V0XG4gKlxuICogKioubW92ZSoqIC0gd2hlbiBhbiBhZGphY2VudCBpdGVtIGlzIGZpbHRlcmVkIG91dCBjYXVzaW5nIGEgcmVvcmRlciBvciB3aGVuIHRoZSBpdGVtIGNvbnRlbnRzIGFyZSByZW9yZGVyZWRcbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBzY29wZVxuICogQHByaW9yaXR5IDEwMDBcbiAqIEBwYXJhbSB7cmVwZWF0X2V4cHJlc3Npb259IG5nUmVwZWF0IFRoZSBleHByZXNzaW9uIGluZGljYXRpbmcgaG93IHRvIGVudW1lcmF0ZSBhIGNvbGxlY3Rpb24uIFRoZXNlXG4gKiAgIGZvcm1hdHMgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQ6XG4gKlxuICogICAqIGB2YXJpYWJsZSBpbiBleHByZXNzaW9uYCDigJMgd2hlcmUgdmFyaWFibGUgaXMgdGhlIHVzZXIgZGVmaW5lZCBsb29wIHZhcmlhYmxlIGFuZCBgZXhwcmVzc2lvbmBcbiAqICAgICBpcyBhIHNjb3BlIGV4cHJlc3Npb24gZ2l2aW5nIHRoZSBjb2xsZWN0aW9uIHRvIGVudW1lcmF0ZS5cbiAqXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBhbGJ1bSBpbiBhcnRpc3QuYWxidW1zYC5cbiAqXG4gKiAgICogYChrZXksIHZhbHVlKSBpbiBleHByZXNzaW9uYCDigJMgd2hlcmUgYGtleWAgYW5kIGB2YWx1ZWAgY2FuIGJlIGFueSB1c2VyIGRlZmluZWQgaWRlbnRpZmllcnMsXG4gKiAgICAgYW5kIGBleHByZXNzaW9uYCBpcyB0aGUgc2NvcGUgZXhwcmVzc2lvbiBnaXZpbmcgdGhlIGNvbGxlY3Rpb24gdG8gZW51bWVyYXRlLlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYChuYW1lLCBhZ2UpIGluIHsnYWRhbSc6MTAsICdhbWFsaWUnOjEyfWAuXG4gKlxuICogICAqIGB2YXJpYWJsZSBpbiBleHByZXNzaW9uIHRyYWNrIGJ5IHRyYWNraW5nX2V4cHJlc3Npb25gIOKAkyBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBvcHRpb25hbCB0cmFja2luZyBmdW5jdGlvblxuICogICAgIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGFzc29jaWF0ZSB0aGUgb2JqZWN0cyBpbiB0aGUgY29sbGVjdGlvbiB3aXRoIHRoZSBET00gZWxlbWVudHMuIElmIG5vIHRyYWNraW5nIGZ1bmN0aW9uXG4gKiAgICAgaXMgc3BlY2lmaWVkIHRoZSBuZy1yZXBlYXQgYXNzb2NpYXRlcyBlbGVtZW50cyBieSBpZGVudGl0eSBpbiB0aGUgY29sbGVjdGlvbi4gSXQgaXMgYW4gZXJyb3IgdG8gaGF2ZVxuICogICAgIG1vcmUgdGhhbiBvbmUgdHJhY2tpbmcgZnVuY3Rpb24gdG8gcmVzb2x2ZSB0byB0aGUgc2FtZSBrZXkuIChUaGlzIHdvdWxkIG1lYW4gdGhhdCB0d28gZGlzdGluY3Qgb2JqZWN0cyBhcmVcbiAqICAgICBtYXBwZWQgdG8gdGhlIHNhbWUgRE9NIGVsZW1lbnQsIHdoaWNoIGlzIG5vdCBwb3NzaWJsZS4pICBGaWx0ZXJzIHNob3VsZCBiZSBhcHBsaWVkIHRvIHRoZSBleHByZXNzaW9uLFxuICogICAgIGJlZm9yZSBzcGVjaWZ5aW5nIGEgdHJhY2tpbmcgZXhwcmVzc2lvbi5cbiAqXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zYCBpcyBlcXVpdmFsZW50IHRvIGBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5ICRpZChpdGVtKWAuIFRoaXMgaW1wbGllcyB0aGF0IHRoZSBET00gZWxlbWVudHNcbiAqICAgICB3aWxsIGJlIGFzc29jaWF0ZWQgYnkgaXRlbSBpZGVudGl0eSBpbiB0aGUgYXJyYXkuXG4gKlxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSAkaWQoaXRlbSlgLiBBIGJ1aWx0IGluIGAkaWQoKWAgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYXNzaWduIGEgdW5pcXVlXG4gKiAgICAgYCQkaGFzaEtleWAgcHJvcGVydHkgdG8gZWFjaCBpdGVtIGluIHRoZSBhcnJheS4gVGhpcyBwcm9wZXJ0eSBpcyB0aGVuIHVzZWQgYXMgYSBrZXkgdG8gYXNzb2NpYXRlZCBET00gZWxlbWVudHNcbiAqICAgICB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGl0ZW0gaW4gdGhlIGFycmF5IGJ5IGlkZW50aXR5LiBNb3ZpbmcgdGhlIHNhbWUgb2JqZWN0IGluIGFycmF5IHdvdWxkIG1vdmUgdGhlIERPTVxuICogICAgIGVsZW1lbnQgaW4gdGhlIHNhbWUgd2F5IGluIHRoZSBET00uXG4gKlxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSBpdGVtLmlkYCBpcyBhIHR5cGljYWwgcGF0dGVybiB3aGVuIHRoZSBpdGVtcyBjb21lIGZyb20gdGhlIGRhdGFiYXNlLiBJbiB0aGlzXG4gKiAgICAgY2FzZSB0aGUgb2JqZWN0IGlkZW50aXR5IGRvZXMgbm90IG1hdHRlci4gVHdvIG9iamVjdHMgYXJlIGNvbnNpZGVyZWQgZXF1aXZhbGVudCBhcyBsb25nIGFzIHRoZWlyIGBpZGBcbiAqICAgICBwcm9wZXJ0eSBpcyBzYW1lLlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgfCBmaWx0ZXI6c2VhcmNoVGV4dCB0cmFjayBieSBpdGVtLmlkYCBpcyBhIHBhdHRlcm4gdGhhdCBtaWdodCBiZSB1c2VkIHRvIGFwcGx5IGEgZmlsdGVyXG4gKiAgICAgdG8gaXRlbXMgaW4gY29uanVuY3Rpb24gd2l0aCBhIHRyYWNraW5nIGV4cHJlc3Npb24uXG4gKlxuICogICAqIGB2YXJpYWJsZSBpbiBleHByZXNzaW9uIGFzIGFsaWFzX2V4cHJlc3Npb25gIOKAkyBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBvcHRpb25hbCBhbGlhcyBleHByZXNzaW9uIHdoaWNoIHdpbGwgdGhlbiBzdG9yZSB0aGVcbiAqICAgICBpbnRlcm1lZGlhdGUgcmVzdWx0cyBvZiB0aGUgcmVwZWF0ZXIgYWZ0ZXIgdGhlIGZpbHRlcnMgaGF2ZSBiZWVuIGFwcGxpZWQuIFR5cGljYWxseSB0aGlzIGlzIHVzZWQgdG8gcmVuZGVyIGEgc3BlY2lhbCBtZXNzYWdlXG4gKiAgICAgd2hlbiBhIGZpbHRlciBpcyBhY3RpdmUgb24gdGhlIHJlcGVhdGVyLCBidXQgdGhlIGZpbHRlcmVkIHJlc3VsdCBzZXQgaXMgZW1wdHkuXG4gKlxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtcyB8IGZpbHRlcjp4IGFzIHJlc3VsdHNgIHdpbGwgc3RvcmUgdGhlIGZyYWdtZW50IG9mIHRoZSByZXBlYXRlZCBpdGVtcyBhcyBgcmVzdWx0c2AsIGJ1dCBvbmx5IGFmdGVyXG4gKiAgICAgdGhlIGl0ZW1zIGhhdmUgYmVlbiBwcm9jZXNzZWQgdGhyb3VnaCB0aGUgZmlsdGVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBUaGlzIGV4YW1wbGUgaW5pdGlhbGl6ZXMgdGhlIHNjb3BlIHRvIGEgbGlzdCBvZiBuYW1lcyBhbmRcbiAqIHRoZW4gdXNlcyBgbmdSZXBlYXRgIHRvIGRpc3BsYXkgZXZlcnkgcGVyc29uOlxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1pbml0PVwiZnJpZW5kcyA9IFtcbiAgICAgICAge25hbWU6J0pvaG4nLCBhZ2U6MjUsIGdlbmRlcjonYm95J30sXG4gICAgICAgIHtuYW1lOidKZXNzaWUnLCBhZ2U6MzAsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICB7bmFtZTonSm9oYW5uYScsIGFnZToyOCwgZ2VuZGVyOidnaXJsJ30sXG4gICAgICAgIHtuYW1lOidKb3knLCBhZ2U6MTUsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICB7bmFtZTonTWFyeScsIGFnZToyOCwgZ2VuZGVyOidnaXJsJ30sXG4gICAgICAgIHtuYW1lOidQZXRlcicsIGFnZTo5NSwgZ2VuZGVyOidib3knfSxcbiAgICAgICAge25hbWU6J1NlYmFzdGlhbicsIGFnZTo1MCwgZ2VuZGVyOidib3knfSxcbiAgICAgICAge25hbWU6J0VyaWthJywgYWdlOjI3LCBnZW5kZXI6J2dpcmwnfSxcbiAgICAgICAge25hbWU6J1BhdHJpY2snLCBhZ2U6NDAsIGdlbmRlcjonYm95J30sXG4gICAgICAgIHtuYW1lOidTYW1hbnRoYScsIGFnZTo2MCwgZ2VuZGVyOidnaXJsJ31cbiAgICAgIF1cIj5cbiAgICAgICAgSSBoYXZlIHt7ZnJpZW5kcy5sZW5ndGh9fSBmcmllbmRzLiBUaGV5IGFyZTpcbiAgICAgICAgPGlucHV0IHR5cGU9XCJzZWFyY2hcIiBuZy1tb2RlbD1cInFcIiBwbGFjZWhvbGRlcj1cImZpbHRlciBmcmllbmRzLi4uXCIgLz5cbiAgICAgICAgPHVsIGNsYXNzPVwiZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBmaWx0ZXI6cSBhcyByZXN1bHRzXCI+XG4gICAgICAgICAgICBbe3skaW5kZXggKyAxfX1dIHt7ZnJpZW5kLm5hbWV9fSB3aG8gaXMge3tmcmllbmQuYWdlfX0geWVhcnMgb2xkLlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1pZj1cInJlc3VsdHMubGVuZ3RoID09IDBcIj5cbiAgICAgICAgICAgIDxzdHJvbmc+Tm8gcmVzdWx0cyBmb3VuZC4uLjwvc3Ryb25nPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICAuZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lciB7XG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGxpc3Qtc3R5bGU6bm9uZTtcbiAgICAgICAgbWFyZ2luOjA7XG4gICAgICAgIHBhZGRpbmc6MCAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQge1xuICAgICAgICBsaW5lLWhlaWdodDo0MHB4O1xuICAgICAgICBsaXN0LXN0eWxlOm5vbmU7XG4gICAgICAgIGJveC1zaXppbmc6Ym9yZGVyLWJveDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUge1xuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xuICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyIHtcbiAgICAgICAgb3BhY2l0eTowO1xuICAgICAgICBtYXgtaGVpZ2h0OjA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLm5nLW1vdmUtYWN0aXZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XG4gICAgICAgIG9wYWNpdHk6MTtcbiAgICAgICAgbWF4LWhlaWdodDo0MHB4O1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgZnJpZW5kcyA9IGVsZW1lbnQuYWxsKGJ5LnJlcGVhdGVyKCdmcmllbmQgaW4gZnJpZW5kcycpKTtcblxuICAgICAgaXQoJ3Nob3VsZCByZW5kZXIgaW5pdGlhbCBkYXRhIHNldCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3QoZnJpZW5kcy5jb3VudCgpKS50b0JlKDEwKTtcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMuZ2V0KDApLmdldFRleHQoKSkudG9FcXVhbCgnWzFdIEpvaG4gd2hvIGlzIDI1IHllYXJzIG9sZC4nKTtcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMuZ2V0KDEpLmdldFRleHQoKSkudG9FcXVhbCgnWzJdIEplc3NpZSB3aG8gaXMgMzAgeWVhcnMgb2xkLicpO1xuICAgICAgICBleHBlY3QoZnJpZW5kcy5sYXN0KCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMTBdIFNhbWFudGhhIHdobyBpcyA2MCB5ZWFycyBvbGQuJyk7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2ZyaWVuZHMubGVuZ3RoJykpLmdldFRleHQoKSlcbiAgICAgICAgICAgIC50b01hdGNoKFwiSSBoYXZlIDEwIGZyaWVuZHMuIFRoZXkgYXJlOlwiKTtcbiAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgcmVwZWF0ZXIgd2hlbiBmaWx0ZXIgcHJlZGljYXRlIGNoYW5nZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmNvdW50KCkpLnRvQmUoMTApO1xuXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdxJykpLnNlbmRLZXlzKCdtYScpO1xuXG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5jb3VudCgpKS50b0JlKDIpO1xuICAgICAgICAgZXhwZWN0KGZyaWVuZHMuZ2V0KDApLmdldFRleHQoKSkudG9FcXVhbCgnWzFdIE1hcnkgd2hvIGlzIDI4IHllYXJzIG9sZC4nKTtcbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmxhc3QoKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1syXSBTYW1hbnRoYSB3aG8gaXMgNjAgeWVhcnMgb2xkLicpO1xuICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nUmVwZWF0RGlyZWN0aXZlID0gWyckcGFyc2UnLCAnJGFuaW1hdGUnLCBmdW5jdGlvbigkcGFyc2UsICRhbmltYXRlKSB7XG4gIHZhciBOR19SRU1PVkVEID0gJyQkTkdfUkVNT1ZFRCc7XG4gIHZhciBuZ1JlcGVhdE1pbkVyciA9IG1pbkVycignbmdSZXBlYXQnKTtcblxuICB2YXIgdXBkYXRlU2NvcGUgPSBmdW5jdGlvbihzY29wZSwgaW5kZXgsIHZhbHVlSWRlbnRpZmllciwgdmFsdWUsIGtleUlkZW50aWZpZXIsIGtleSwgYXJyYXlMZW5ndGgpIHtcbiAgICAvLyBUT0RPKHBlcmYpOiBnZW5lcmF0ZSBzZXR0ZXJzIHRvIHNoYXZlIG9mZiB+NDBtcyBvciAxLTEuNSVcbiAgICBzY29wZVt2YWx1ZUlkZW50aWZpZXJdID0gdmFsdWU7XG4gICAgaWYgKGtleUlkZW50aWZpZXIpIHNjb3BlW2tleUlkZW50aWZpZXJdID0ga2V5O1xuICAgIHNjb3BlLiRpbmRleCA9IGluZGV4O1xuICAgIHNjb3BlLiRmaXJzdCA9IChpbmRleCA9PT0gMCk7XG4gICAgc2NvcGUuJGxhc3QgPSAoaW5kZXggPT09IChhcnJheUxlbmd0aCAtIDEpKTtcbiAgICBzY29wZS4kbWlkZGxlID0gIShzY29wZS4kZmlyc3QgfHwgc2NvcGUuJGxhc3QpO1xuICAgIC8vIGpzaGludCBiaXR3aXNlOiBmYWxzZVxuICAgIHNjb3BlLiRvZGQgPSAhKHNjb3BlLiRldmVuID0gKGluZGV4JjEpID09PSAwKTtcbiAgICAvLyBqc2hpbnQgYml0d2lzZTogdHJ1ZVxuICB9O1xuXG4gIHZhciBnZXRCbG9ja1N0YXJ0ID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgICByZXR1cm4gYmxvY2suY2xvbmVbMF07XG4gIH07XG5cbiAgdmFyIGdldEJsb2NrRW5kID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgICByZXR1cm4gYmxvY2suY2xvbmVbYmxvY2suY2xvbmUubGVuZ3RoIC0gMV07XG4gIH07XG5cblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICBwcmlvcml0eTogMTAwMCxcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAkJHRsYjogdHJ1ZSxcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ1JlcGVhdENvbXBpbGUoJGVsZW1lbnQsICRhdHRyKSB7XG4gICAgICB2YXIgZXhwcmVzc2lvbiA9ICRhdHRyLm5nUmVwZWF0O1xuICAgICAgdmFyIG5nUmVwZWF0RW5kQ29tbWVudCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyBlbmQgbmdSZXBlYXQ6ICcgKyBleHByZXNzaW9uICsgJyAnKTtcblxuICAgICAgdmFyIG1hdGNoID0gZXhwcmVzc2lvbi5tYXRjaCgvXlxccyooW1xcc1xcU10rPylcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzKiQvKTtcblxuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignaWV4cCcsIFwiRXhwZWN0ZWQgZXhwcmVzc2lvbiBpbiBmb3JtIG9mICdfaXRlbV8gaW4gX2NvbGxlY3Rpb25fWyB0cmFjayBieSBfaWRfXScgYnV0IGdvdCAnezB9Jy5cIixcbiAgICAgICAgICAgIGV4cHJlc3Npb24pO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGhzID0gbWF0Y2hbMV07XG4gICAgICB2YXIgcmhzID0gbWF0Y2hbMl07XG4gICAgICB2YXIgYWxpYXNBcyA9IG1hdGNoWzNdO1xuICAgICAgdmFyIHRyYWNrQnlFeHAgPSBtYXRjaFs0XTtcblxuICAgICAgbWF0Y2ggPSBsaHMubWF0Y2goL14oPzooXFxzKltcXCRcXHddKyl8XFwoXFxzKihbXFwkXFx3XSspXFxzKixcXHMqKFtcXCRcXHddKylcXHMqXFwpKSQvKTtcblxuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignaWlkZXhwJywgXCInX2l0ZW1fJyBpbiAnX2l0ZW1fIGluIF9jb2xsZWN0aW9uXycgc2hvdWxkIGJlIGFuIGlkZW50aWZpZXIgb3IgJyhfa2V5XywgX3ZhbHVlXyknIGV4cHJlc3Npb24sIGJ1dCBnb3QgJ3swfScuXCIsXG4gICAgICAgICAgICBsaHMpO1xuICAgICAgfVxuICAgICAgdmFyIHZhbHVlSWRlbnRpZmllciA9IG1hdGNoWzNdIHx8IG1hdGNoWzFdO1xuICAgICAgdmFyIGtleUlkZW50aWZpZXIgPSBtYXRjaFsyXTtcblxuICAgICAgaWYgKGFsaWFzQXMgJiYgKCEvXlskYS16QS1aX11bJGEtekEtWjAtOV9dKiQvLnRlc3QoYWxpYXNBcykgfHxcbiAgICAgICAgICAvXihudWxsfHVuZGVmaW5lZHx0aGlzfFxcJGluZGV4fFxcJGZpcnN0fFxcJG1pZGRsZXxcXCRsYXN0fFxcJGV2ZW58XFwkb2RkfFxcJHBhcmVudHxcXCRyb290fFxcJGlkKSQvLnRlc3QoYWxpYXNBcykpKSB7XG4gICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdiYWRpZGVudCcsIFwiYWxpYXMgJ3swfScgaXMgaW52YWxpZCAtLS0gbXVzdCBiZSBhIHZhbGlkIEpTIGlkZW50aWZpZXIgd2hpY2ggaXMgbm90IGEgcmVzZXJ2ZWQgbmFtZS5cIixcbiAgICAgICAgICBhbGlhc0FzKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRyYWNrQnlFeHBHZXR0ZXIsIHRyYWNrQnlJZEV4cEZuLCB0cmFja0J5SWRBcnJheUZuLCB0cmFja0J5SWRPYmpGbjtcbiAgICAgIHZhciBoYXNoRm5Mb2NhbHMgPSB7JGlkOiBoYXNoS2V5fTtcblxuICAgICAgaWYgKHRyYWNrQnlFeHApIHtcbiAgICAgICAgdHJhY2tCeUV4cEdldHRlciA9ICRwYXJzZSh0cmFja0J5RXhwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYWNrQnlJZEFycmF5Rm4gPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGhhc2hLZXkodmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICB0cmFja0J5SWRPYmpGbiA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ1JlcGVhdExpbmsoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XG5cbiAgICAgICAgaWYgKHRyYWNrQnlFeHBHZXR0ZXIpIHtcbiAgICAgICAgICB0cmFja0J5SWRFeHBGbiA9IGZ1bmN0aW9uKGtleSwgdmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICAvLyBhc3NpZ24ga2V5LCB2YWx1ZSwgYW5kICRpbmRleCB0byB0aGUgbG9jYWxzIHNvIHRoYXQgdGhleSBjYW4gYmUgdXNlZCBpbiBoYXNoIGZ1bmN0aW9uc1xuICAgICAgICAgICAgaWYgKGtleUlkZW50aWZpZXIpIGhhc2hGbkxvY2Fsc1trZXlJZGVudGlmaWVyXSA9IGtleTtcbiAgICAgICAgICAgIGhhc2hGbkxvY2Fsc1t2YWx1ZUlkZW50aWZpZXJdID0gdmFsdWU7XG4gICAgICAgICAgICBoYXNoRm5Mb2NhbHMuJGluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICByZXR1cm4gdHJhY2tCeUV4cEdldHRlcigkc2NvcGUsIGhhc2hGbkxvY2Fscyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0b3JlIGEgbGlzdCBvZiBlbGVtZW50cyBmcm9tIHByZXZpb3VzIHJ1bi4gVGhpcyBpcyBhIGhhc2ggd2hlcmUga2V5IGlzIHRoZSBpdGVtIGZyb20gdGhlXG4gICAgICAgIC8vIGl0ZXJhdG9yLCBhbmQgdGhlIHZhbHVlIGlzIG9iamVjdHMgd2l0aCBmb2xsb3dpbmcgcHJvcGVydGllcy5cbiAgICAgICAgLy8gICAtIHNjb3BlOiBib3VuZCBzY29wZVxuICAgICAgICAvLyAgIC0gZWxlbWVudDogcHJldmlvdXMgZWxlbWVudC5cbiAgICAgICAgLy8gICAtIGluZGV4OiBwb3NpdGlvblxuICAgICAgICAvL1xuICAgICAgICAvLyBXZSBhcmUgdXNpbmcgbm8tcHJvdG8gb2JqZWN0IHNvIHRoYXQgd2UgZG9uJ3QgbmVlZCB0byBndWFyZCBhZ2FpbnN0IGluaGVyaXRlZCBwcm9wcyB2aWFcbiAgICAgICAgLy8gaGFzT3duUHJvcGVydHkuXG4gICAgICAgIHZhciBsYXN0QmxvY2tNYXAgPSBjcmVhdGVNYXAoKTtcblxuICAgICAgICAvL3dhdGNoIHByb3BzXG4gICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKHJocywgZnVuY3Rpb24gbmdSZXBlYXRBY3Rpb24oY29sbGVjdGlvbikge1xuICAgICAgICAgIHZhciBpbmRleCwgbGVuZ3RoLFxuICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSAkZWxlbWVudFswXSwgICAgIC8vIG5vZGUgdGhhdCBjbG9uZWQgbm9kZXMgc2hvdWxkIGJlIGluc2VydGVkIGFmdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZWQgdG8gdGhlIGNvbW1lbnQgbm9kZSBhbmNob3JcbiAgICAgICAgICAgICAgbmV4dE5vZGUsXG4gICAgICAgICAgICAgIC8vIFNhbWUgYXMgbGFzdEJsb2NrTWFwIGJ1dCBpdCBoYXMgdGhlIGN1cnJlbnQgc3RhdGUuIEl0IHdpbGwgYmVjb21lIHRoZVxuICAgICAgICAgICAgICAvLyBsYXN0QmxvY2tNYXAgb24gdGhlIG5leHQgaXRlcmF0aW9uLlxuICAgICAgICAgICAgICBuZXh0QmxvY2tNYXAgPSBjcmVhdGVNYXAoKSxcbiAgICAgICAgICAgICAgY29sbGVjdGlvbkxlbmd0aCxcbiAgICAgICAgICAgICAga2V5LCB2YWx1ZSwgLy8ga2V5L3ZhbHVlIG9mIGl0ZXJhdGlvblxuICAgICAgICAgICAgICB0cmFja0J5SWQsXG4gICAgICAgICAgICAgIHRyYWNrQnlJZEZuLFxuICAgICAgICAgICAgICBjb2xsZWN0aW9uS2V5cyxcbiAgICAgICAgICAgICAgYmxvY2ssICAgICAgIC8vIGxhc3Qgb2JqZWN0IGluZm9ybWF0aW9uIHtzY29wZSwgZWxlbWVudCwgaWR9XG4gICAgICAgICAgICAgIG5leHRCbG9ja09yZGVyLFxuICAgICAgICAgICAgICBlbGVtZW50c1RvUmVtb3ZlO1xuXG4gICAgICAgICAgaWYgKGFsaWFzQXMpIHtcbiAgICAgICAgICAgICRzY29wZVthbGlhc0FzXSA9IGNvbGxlY3Rpb247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uS2V5cyA9IGNvbGxlY3Rpb247XG4gICAgICAgICAgICB0cmFja0J5SWRGbiA9IHRyYWNrQnlJZEV4cEZuIHx8IHRyYWNrQnlJZEFycmF5Rm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyYWNrQnlJZEZuID0gdHJhY2tCeUlkRXhwRm4gfHwgdHJhY2tCeUlkT2JqRm47XG4gICAgICAgICAgICAvLyBpZiBvYmplY3QsIGV4dHJhY3Qga2V5cywgc29ydCB0aGVtIGFuZCB1c2UgdG8gZGV0ZXJtaW5lIG9yZGVyIG9mIGl0ZXJhdGlvbiBvdmVyIG9iaiBwcm9wc1xuICAgICAgICAgICAgY29sbGVjdGlvbktleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW1LZXkgaW4gY29sbGVjdGlvbikge1xuICAgICAgICAgICAgICBpZiAoY29sbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShpdGVtS2V5KSAmJiBpdGVtS2V5LmNoYXJBdCgwKSAhPSAnJCcpIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uS2V5cy5wdXNoKGl0ZW1LZXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xsZWN0aW9uS2V5cy5zb3J0KCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29sbGVjdGlvbkxlbmd0aCA9IGNvbGxlY3Rpb25LZXlzLmxlbmd0aDtcbiAgICAgICAgICBuZXh0QmxvY2tPcmRlciA9IG5ldyBBcnJheShjb2xsZWN0aW9uTGVuZ3RoKTtcblxuICAgICAgICAgIC8vIGxvY2F0ZSBleGlzdGluZyBpdGVtc1xuICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGNvbGxlY3Rpb25MZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGtleSA9IChjb2xsZWN0aW9uID09PSBjb2xsZWN0aW9uS2V5cykgPyBpbmRleCA6IGNvbGxlY3Rpb25LZXlzW2luZGV4XTtcbiAgICAgICAgICAgIHZhbHVlID0gY29sbGVjdGlvbltrZXldO1xuICAgICAgICAgICAgdHJhY2tCeUlkID0gdHJhY2tCeUlkRm4oa2V5LCB2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgaWYgKGxhc3RCbG9ja01hcFt0cmFja0J5SWRdKSB7XG4gICAgICAgICAgICAgIC8vIGZvdW5kIHByZXZpb3VzbHkgc2VlbiBibG9ja1xuICAgICAgICAgICAgICBibG9jayA9IGxhc3RCbG9ja01hcFt0cmFja0J5SWRdO1xuICAgICAgICAgICAgICBkZWxldGUgbGFzdEJsb2NrTWFwW3RyYWNrQnlJZF07XG4gICAgICAgICAgICAgIG5leHRCbG9ja01hcFt0cmFja0J5SWRdID0gYmxvY2s7XG4gICAgICAgICAgICAgIG5leHRCbG9ja09yZGVyW2luZGV4XSA9IGJsb2NrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXSkge1xuICAgICAgICAgICAgICAvLyBpZiBjb2xsaXNpb24gZGV0ZWN0ZWQuIHJlc3RvcmUgbGFzdEJsb2NrTWFwIGFuZCB0aHJvdyBhbiBlcnJvclxuICAgICAgICAgICAgICBmb3JFYWNoKG5leHRCbG9ja09yZGVyLCBmdW5jdGlvbihibG9jaykge1xuICAgICAgICAgICAgICAgIGlmIChibG9jayAmJiBibG9jay5zY29wZSkgbGFzdEJsb2NrTWFwW2Jsb2NrLmlkXSA9IGJsb2NrO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2R1cGVzJyxcbiAgICAgICAgICAgICAgICAgIFwiRHVwbGljYXRlcyBpbiBhIHJlcGVhdGVyIGFyZSBub3QgYWxsb3dlZC4gVXNlICd0cmFjayBieScgZXhwcmVzc2lvbiB0byBzcGVjaWZ5IHVuaXF1ZSBrZXlzLiBSZXBlYXRlcjogezB9LCBEdXBsaWNhdGUga2V5OiB7MX0sIER1cGxpY2F0ZSB2YWx1ZTogezJ9XCIsXG4gICAgICAgICAgICAgICAgICBleHByZXNzaW9uLCB0cmFja0J5SWQsIHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIG5ldyBuZXZlciBiZWZvcmUgc2VlbiBibG9ja1xuICAgICAgICAgICAgICBuZXh0QmxvY2tPcmRlcltpbmRleF0gPSB7aWQ6IHRyYWNrQnlJZCwgc2NvcGU6IHVuZGVmaW5lZCwgY2xvbmU6IHVuZGVmaW5lZH07XG4gICAgICAgICAgICAgIG5leHRCbG9ja01hcFt0cmFja0J5SWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyByZW1vdmUgbGVmdG92ZXIgaXRlbXNcbiAgICAgICAgICBmb3IgKHZhciBibG9ja0tleSBpbiBsYXN0QmxvY2tNYXApIHtcbiAgICAgICAgICAgIGJsb2NrID0gbGFzdEJsb2NrTWFwW2Jsb2NrS2V5XTtcbiAgICAgICAgICAgIGVsZW1lbnRzVG9SZW1vdmUgPSBnZXRCbG9ja05vZGVzKGJsb2NrLmNsb25lKTtcbiAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGVsZW1lbnRzVG9SZW1vdmUpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzVG9SZW1vdmVbMF0ucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAvLyBpZiB0aGUgZWxlbWVudCB3YXMgbm90IHJlbW92ZWQgeWV0IGJlY2F1c2Ugb2YgcGVuZGluZyBhbmltYXRpb24sIG1hcmsgaXQgYXMgZGVsZXRlZFxuICAgICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBpZ25vcmUgaXQgbGF0ZXJcbiAgICAgICAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzVG9SZW1vdmVbaW5kZXhdW05HX1JFTU9WRURdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxvY2suc2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB3ZSBhcmUgbm90IHVzaW5nIGZvckVhY2ggZm9yIHBlcmYgcmVhc29ucyAodHJ5aW5nIHRvIGF2b2lkICNjYWxsKVxuICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGNvbGxlY3Rpb25MZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGtleSA9IChjb2xsZWN0aW9uID09PSBjb2xsZWN0aW9uS2V5cykgPyBpbmRleCA6IGNvbGxlY3Rpb25LZXlzW2luZGV4XTtcbiAgICAgICAgICAgIHZhbHVlID0gY29sbGVjdGlvbltrZXldO1xuICAgICAgICAgICAgYmxvY2sgPSBuZXh0QmxvY2tPcmRlcltpbmRleF07XG5cbiAgICAgICAgICAgIGlmIChibG9jay5zY29wZSkge1xuICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGFscmVhZHkgc2VlbiB0aGlzIG9iamVjdCwgdGhlbiB3ZSBuZWVkIHRvIHJldXNlIHRoZVxuICAgICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHNjb3BlL2VsZW1lbnRcblxuICAgICAgICAgICAgICBuZXh0Tm9kZSA9IHByZXZpb3VzTm9kZTtcblxuICAgICAgICAgICAgICAvLyBza2lwIG5vZGVzIHRoYXQgYXJlIGFscmVhZHkgcGVuZGluZyByZW1vdmFsIHZpYSBsZWF2ZSBhbmltYXRpb25cbiAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dE5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgIH0gd2hpbGUgKG5leHROb2RlICYmIG5leHROb2RlW05HX1JFTU9WRURdKTtcblxuICAgICAgICAgICAgICBpZiAoZ2V0QmxvY2tTdGFydChibG9jaykgIT0gbmV4dE5vZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBpdGVtIHdoaWNoIGdvdCBtb3ZlZFxuICAgICAgICAgICAgICAgICRhbmltYXRlLm1vdmUoZ2V0QmxvY2tOb2RlcyhibG9jay5jbG9uZSksIG51bGwsIGpxTGl0ZShwcmV2aW91c05vZGUpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSBnZXRCbG9ja0VuZChibG9jayk7XG4gICAgICAgICAgICAgIHVwZGF0ZVNjb3BlKGJsb2NrLnNjb3BlLCBpbmRleCwgdmFsdWVJZGVudGlmaWVyLCB2YWx1ZSwga2V5SWRlbnRpZmllciwga2V5LCBjb2xsZWN0aW9uTGVuZ3RoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIG5ldyBpdGVtIHdoaWNoIHdlIGRvbid0IGtub3cgYWJvdXRcbiAgICAgICAgICAgICAgJHRyYW5zY2x1ZGUoZnVuY3Rpb24gbmdSZXBlYXRUcmFuc2NsdWRlKGNsb25lLCBzY29wZSkge1xuICAgICAgICAgICAgICAgIGJsb2NrLnNjb3BlID0gc2NvcGU7XG4gICAgICAgICAgICAgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvbmUtdnMtY3JlYXRlY29tbWVudFxuICAgICAgICAgICAgICAgIHZhciBlbmROb2RlID0gbmdSZXBlYXRFbmRDb21tZW50LmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgY2xvbmVbY2xvbmUubGVuZ3RoKytdID0gZW5kTm9kZTtcblxuICAgICAgICAgICAgICAgIC8vIFRPRE8ocGVyZik6IHN1cHBvcnQgbmFrZWQgcHJldmlvdXNOb2RlIGluIGBlbnRlcmAgdG8gYXZvaWQgY3JlYXRpb24gb2YganFMaXRlIHdyYXBwZXI/XG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsIG51bGwsIGpxTGl0ZShwcmV2aW91c05vZGUpKTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSBlbmROb2RlO1xuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFdlIG9ubHkgbmVlZCB0aGUgZmlyc3QvbGFzdCBub2RlIG9mIHRoZSBjbG9uZWQgbm9kZXMuXG4gICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgd2UgbmVlZCB0byBrZWVwIHRoZSByZWZlcmVuY2UgdG8gdGhlIGpxbGl0ZSB3cmFwcGVyIGFzIGl0IG1pZ2h0IGJlIGNoYW5nZWQgbGF0ZXJcbiAgICAgICAgICAgICAgICAvLyBieSBhIGRpcmVjdGl2ZSB3aXRoIHRlbXBsYXRlVXJsIHdoZW4gaXRzIHRlbXBsYXRlIGFycml2ZXMuXG4gICAgICAgICAgICAgICAgYmxvY2suY2xvbmUgPSBjbG9uZTtcbiAgICAgICAgICAgICAgICBuZXh0QmxvY2tNYXBbYmxvY2suaWRdID0gYmxvY2s7XG4gICAgICAgICAgICAgICAgdXBkYXRlU2NvcGUoYmxvY2suc2NvcGUsIGluZGV4LCB2YWx1ZUlkZW50aWZpZXIsIHZhbHVlLCBrZXlJZGVudGlmaWVyLCBrZXksIGNvbGxlY3Rpb25MZW5ndGgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGFzdEJsb2NrTWFwID0gbmV4dEJsb2NrTWFwO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbnZhciBOR19ISURFX0NMQVNTID0gJ25nLWhpZGUnO1xudmFyIE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1MgPSAnbmctaGlkZS1hbmltYXRlJztcbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTaG93XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nU2hvd2AgZGlyZWN0aXZlIHNob3dzIG9yIGhpZGVzIHRoZSBnaXZlbiBIVE1MIGVsZW1lbnQgYmFzZWQgb24gdGhlIGV4cHJlc3Npb25cbiAqIHByb3ZpZGVkIHRvIHRoZSBgbmdTaG93YCBhdHRyaWJ1dGUuIFRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiBieSByZW1vdmluZyBvciBhZGRpbmdcbiAqIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBvbnRvIHRoZSBlbGVtZW50LiBUaGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcHJlZGVmaW5lZFxuICogaW4gQW5ndWxhckpTIGFuZCBzZXRzIHRoZSBkaXNwbGF5IHN0eWxlIHRvIG5vbmUgKHVzaW5nIGFuICFpbXBvcnRhbnQgZmxhZykuXG4gKiBGb3IgQ1NQIG1vZGUgcGxlYXNlIGFkZCBgYW5ndWxhci1jc3AuY3NzYCB0byB5b3VyIGh0bWwgZmlsZSAoc2VlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDc3AgbmdDc3B9KS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgdHJ1dGh5IChlbGVtZW50IGlzIHZpc2libGUpIC0tPlxuICogPGRpdiBuZy1zaG93PVwibXlWYWx1ZVwiPjwvZGl2PlxuICpcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyBmYWxzeSAoZWxlbWVudCBpcyBoaWRkZW4pIC0tPlxuICogPGRpdiBuZy1zaG93PVwibXlWYWx1ZVwiIGNsYXNzPVwibmctaGlkZVwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogV2hlbiB0aGUgYG5nU2hvd2AgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBmYWxzeSB2YWx1ZSB0aGVuIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyBhZGRlZCB0byB0aGUgY2xhc3NcbiAqIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBjYXVzaW5nIGl0IHRvIGJlY29tZSBoaWRkZW4uIFdoZW4gdHJ1dGh5LCB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcmVtb3ZlZFxuICogZnJvbSB0aGUgZWxlbWVudCBjYXVzaW5nIHRoZSBlbGVtZW50IG5vdCB0byBhcHBlYXIgaGlkZGVuLlxuICpcbiAqICMjIFdoeSBpcyAhaW1wb3J0YW50IHVzZWQ/XG4gKlxuICogWW91IG1heSBiZSB3b25kZXJpbmcgd2h5ICFpbXBvcnRhbnQgaXMgdXNlZCBmb3IgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGAubmctaGlkZWAgc2VsZWN0b3JcbiAqIGNhbiBiZSBlYXNpbHkgb3ZlcnJpZGRlbiBieSBoZWF2aWVyIHNlbGVjdG9ycy4gRm9yIGV4YW1wbGUsIHNvbWV0aGluZyBhcyBzaW1wbGVcbiAqIGFzIGNoYW5naW5nIHRoZSBkaXNwbGF5IHN0eWxlIG9uIGEgSFRNTCBsaXN0IGl0ZW0gd291bGQgbWFrZSBoaWRkZW4gZWxlbWVudHMgYXBwZWFyIHZpc2libGUuXG4gKiBUaGlzIGFsc28gYmVjb21lcyBhIGJpZ2dlciBpc3N1ZSB3aGVuIGRlYWxpbmcgd2l0aCBDU1MgZnJhbWV3b3Jrcy5cbiAqXG4gKiBCeSB1c2luZyAhaW1wb3J0YW50LCB0aGUgc2hvdyBhbmQgaGlkZSBiZWhhdmlvciB3aWxsIHdvcmsgYXMgZXhwZWN0ZWQgZGVzcGl0ZSBhbnkgY2xhc2ggYmV0d2VlbiBDU1Mgc2VsZWN0b3JcbiAqIHNwZWNpZmljaXR5ICh3aGVuICFpbXBvcnRhbnQgaXNuJ3QgdXNlZCB3aXRoIGFueSBjb25mbGljdGluZyBzdHlsZXMpLiBJZiBhIGRldmVsb3BlciBjaG9vc2VzIHRvIG92ZXJyaWRlIHRoZVxuICogc3R5bGluZyB0byBjaGFuZ2UgaG93IHRvIGhpZGUgYW4gZWxlbWVudCB0aGVuIGl0IGlzIGp1c3QgYSBtYXR0ZXIgb2YgdXNpbmcgIWltcG9ydGFudCBpbiB0aGVpciBvd24gQ1NTIGNvZGUuXG4gKlxuICogIyMjIE92ZXJyaWRpbmcgYC5uZy1oaWRlYFxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSBgLm5nLWhpZGVgIGNsYXNzIHdpbGwgc3R5bGUgdGhlIGVsZW1lbnQgd2l0aCBgZGlzcGxheTogbm9uZSFpbXBvcnRhbnRgLiBJZiB5b3Ugd2lzaCB0byBjaGFuZ2VcbiAqIHRoZSBoaWRlIGJlaGF2aW9yIHdpdGggbmdTaG93L25nSGlkZSB0aGVuIHRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJlc3RhdGluZyB0aGUgc3R5bGVzIGZvciB0aGUgYC5uZy1oaWRlYFxuICogY2xhc3MgQ1NTLiBOb3RlIHRoYXQgdGhlIHNlbGVjdG9yIHRoYXQgbmVlZHMgdG8gYmUgdXNlZCBpcyBhY3R1YWxseSBgLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpYCB0byBjb3BlXG4gKiB3aXRoIGV4dHJhIGFuaW1hdGlvbiBjbGFzc2VzIHRoYXQgY2FuIGJlIGFkZGVkLlxuICpcbiAqIGBgYGNzc1xuICogLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpIHtcbiAqICAgLyYjNDI7IHRoaXMgaXMganVzdCBhbm90aGVyIGZvcm0gb2YgaGlkaW5nIGFuIGVsZW1lbnQgJiM0MjsvXG4gKiAgIGRpc3BsYXk6IGJsb2NrIWltcG9ydGFudDtcbiAqICAgcG9zaXRpb246IGFic29sdXRlO1xuICogICB0b3A6IC05OTk5cHg7XG4gKiAgIGxlZnQ6IC05OTk5cHg7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBCeSBkZWZhdWx0IHlvdSBkb24ndCBuZWVkIHRvIG92ZXJyaWRlIGluIENTUyBhbnl0aGluZyBhbmQgdGhlIGFuaW1hdGlvbnMgd2lsbCB3b3JrIGFyb3VuZCB0aGUgZGlzcGxheSBzdHlsZS5cbiAqXG4gKiAjIyBBIG5vdGUgYWJvdXQgYW5pbWF0aW9ucyB3aXRoIGBuZ1Nob3dgXG4gKlxuICogQW5pbWF0aW9ucyBpbiBuZ1Nob3cvbmdIaWRlIHdvcmsgd2l0aCB0aGUgc2hvdyBhbmQgaGlkZSBldmVudHMgdGhhdCBhcmUgdHJpZ2dlcmVkIHdoZW4gdGhlIGRpcmVjdGl2ZSBleHByZXNzaW9uXG4gKiBpcyB0cnVlIGFuZCBmYWxzZS4gVGhpcyBzeXN0ZW0gd29ya3MgbGlrZSB0aGUgYW5pbWF0aW9uIHN5c3RlbSBwcmVzZW50IHdpdGggbmdDbGFzcyBleGNlcHQgdGhhdFxuICogeW91IG11c3QgYWxzbyBpbmNsdWRlIHRoZSAhaW1wb3J0YW50IGZsYWcgdG8gb3ZlcnJpZGUgdGhlIGRpc3BsYXkgcHJvcGVydHlcbiAqIHNvIHRoYXQgeW91IGNhbiBwZXJmb3JtIGFuIGFuaW1hdGlvbiB3aGVuIHRoZSBlbGVtZW50IGlzIGhpZGRlbiBkdXJpbmcgdGhlIHRpbWUgb2YgdGhlIGFuaW1hdGlvbi5cbiAqXG4gKiBgYGBjc3NcbiAqIC8vXG4gKiAvL2Egd29ya2luZyBleGFtcGxlIGNhbiBiZSBmb3VuZCBhdCB0aGUgYm90dG9tIG9mIHRoaXMgcGFnZVxuICogLy9cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLCAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7XG4gKiAgIC8mIzQyOyB0aGlzIGlzIHJlcXVpcmVkIGFzIG9mIDEuM3ggdG8gcHJvcGVybHlcbiAqICAgICAgYXBwbHkgYWxsIHN0eWxpbmcgaW4gYSBzaG93L2hpZGUgYW5pbWF0aW9uICYjNDI7L1xuICogICB0cmFuc2l0aW9uOiAwcyBsaW5lYXIgYWxsO1xuICogfVxuICpcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLWFjdGl2ZSxcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7XG4gKiAgIC8mIzQyOyB0aGUgdHJhbnNpdGlvbiBpcyBkZWZpbmVkIGluIHRoZSBhY3RpdmUgY2xhc3MgJiM0MjsvXG4gKiAgIHRyYW5zaXRpb246IDFzIGxpbmVhciBhbGw7XG4gKiB9XG4gKlxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlLm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7IC4uLiB9XG4gKiBgYGBcbiAqXG4gKiBLZWVwIGluIG1pbmQgdGhhdCwgYXMgb2YgQW5ndWxhckpTIHZlcnNpb24gMS4zLjAtYmV0YS4xMSwgdGhlcmUgaXMgbm8gbmVlZCB0byBjaGFuZ2UgdGhlIGRpc3BsYXlcbiAqIHByb3BlcnR5IHRvIGJsb2NrIGR1cmluZyBhbmltYXRpb24gc3RhdGVzLS1uZ0FuaW1hdGUgd2lsbCBoYW5kbGUgdGhlIHN0eWxlIHRvZ2dsaW5nIGF1dG9tYXRpY2FsbHkgZm9yIHlvdS5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogYWRkQ2xhc3M6IGAubmctaGlkZWAgLSBoYXBwZW5zIGFmdGVyIHRoZSBgbmdTaG93YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSBhbmQgdGhlIGp1c3QgYmVmb3JlIGNvbnRlbnRzIGFyZSBzZXQgdG8gdmlzaWJsZVxuICogcmVtb3ZlQ2xhc3M6IGAubmctaGlkZWAgLSBoYXBwZW5zIGFmdGVyIHRoZSBgbmdTaG93YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIG5vbiB0cnV0aHkgdmFsdWUgYW5kIGp1c3QgYmVmb3JlIHRoZSBjb250ZW50cyBhcmUgc2V0IHRvIGhpZGRlblxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1Nob3cgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeVxuICogICAgIHRoZW4gdGhlIGVsZW1lbnQgaXMgc2hvd24gb3IgaGlkZGVuIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBAZXhhbXBsZVxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgQ2xpY2sgbWU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIj48YnIvPlxuICAgICAgPGRpdj5cbiAgICAgICAgU2hvdzpcbiAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgYW5pbWF0ZS1zaG93XCIgbmctc2hvdz1cImNoZWNrZWRcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdGh1bWJzLXVwXCI+PC9zcGFuPiBJIHNob3cgdXAgd2hlbiB5b3VyIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICBIaWRlOlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLXNob3dcIiBuZy1oaWRlPVwiY2hlY2tlZFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10aHVtYnMtZG93blwiPjwvc3Bhbj4gSSBoaWRlIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiZ2x5cGhpY29ucy5jc3NcIj5cbiAgICAgIEBpbXBvcnQgdXJsKC4uLy4uL2NvbXBvbmVudHMvYm9vdHN0cmFwLTMuMS4xL2Nzcy9ib290c3RyYXAuY3NzKTtcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICAuYW5pbWF0ZS1zaG93IHtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtc2hvdy5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1zaG93Lm5nLWhpZGUtcmVtb3ZlLm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7XG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIGxpbmVhciAwLjVzO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgbGluZWFyIDAuNXM7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXNob3cubmctaGlkZSB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAwO1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICBwYWRkaW5nOiAwIDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jaGVjay1lbGVtZW50IHtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdGh1bWJzVXAgPSBlbGVtZW50KGJ5LmNzcygnc3Bhbi5nbHlwaGljb24tdGh1bWJzLXVwJykpO1xuICAgICAgdmFyIHRodW1ic0Rvd24gPSBlbGVtZW50KGJ5LmNzcygnc3Bhbi5nbHlwaGljb24tdGh1bWJzLWRvd24nKSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctc2hvdyAvIG5nLWhpZGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KHRodW1ic1VwLmlzRGlzcGxheWVkKCkpLnRvQmVGYWxzeSgpO1xuICAgICAgICBleHBlY3QodGh1bWJzRG93bi5pc0Rpc3BsYXllZCgpKS50b0JlVHJ1dGh5KCk7XG5cbiAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xuXG4gICAgICAgIGV4cGVjdCh0aHVtYnNVcC5pc0Rpc3BsYXllZCgpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIGV4cGVjdCh0aHVtYnNEb3duLmlzRGlzcGxheWVkKCkpLnRvQmVGYWxzeSgpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1Nob3dEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdTaG93LCBmdW5jdGlvbiBuZ1Nob3dXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICAvLyB3ZSdyZSBhZGRpbmcgYSB0ZW1wb3JhcnksIGFuaW1hdGlvbi1zcGVjaWZpYyBjbGFzcyBmb3IgbmctaGlkZSBzaW5jZSB0aGlzIHdheVxuICAgICAgICAvLyB3ZSBjYW4gY29udHJvbCB3aGVuIHRoZSBlbGVtZW50IGlzIGFjdHVhbGx5IGRpc3BsYXllZCBvbiBzY3JlZW4gd2l0aG91dCBoYXZpbmdcbiAgICAgICAgLy8gdG8gaGF2ZSBhIGdsb2JhbC9ncmVlZHkgQ1NTIHNlbGVjdG9yIHRoYXQgYnJlYWtzIHdoZW4gb3RoZXIgYW5pbWF0aW9ucyBhcmUgcnVuLlxuICAgICAgICAvLyBSZWFkOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy85MTAzI2lzc3VlY29tbWVudC01ODMzNTg0NVxuICAgICAgICAkYW5pbWF0ZVt2YWx1ZSA/ICdyZW1vdmVDbGFzcycgOiAnYWRkQ2xhc3MnXShlbGVtZW50LCBOR19ISURFX0NMQVNTLCB7XG4gICAgICAgICAgdGVtcENsYXNzZXM6IE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1NcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nSGlkZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0hpZGVgIGRpcmVjdGl2ZSBzaG93cyBvciBoaWRlcyB0aGUgZ2l2ZW4gSFRNTCBlbGVtZW50IGJhc2VkIG9uIHRoZSBleHByZXNzaW9uXG4gKiBwcm92aWRlZCB0byB0aGUgYG5nSGlkZWAgYXR0cmlidXRlLiBUaGUgZWxlbWVudCBpcyBzaG93biBvciBoaWRkZW4gYnkgcmVtb3Zpbmcgb3IgYWRkaW5nXG4gKiB0aGUgYG5nLWhpZGVgIENTUyBjbGFzcyBvbnRvIHRoZSBlbGVtZW50LiBUaGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcHJlZGVmaW5lZFxuICogaW4gQW5ndWxhckpTIGFuZCBzZXRzIHRoZSBkaXNwbGF5IHN0eWxlIHRvIG5vbmUgKHVzaW5nIGFuICFpbXBvcnRhbnQgZmxhZykuXG4gKiBGb3IgQ1NQIG1vZGUgcGxlYXNlIGFkZCBgYW5ndWxhci1jc3AuY3NzYCB0byB5b3VyIGh0bWwgZmlsZSAoc2VlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDc3AgbmdDc3B9KS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgdHJ1dGh5IChlbGVtZW50IGlzIGhpZGRlbikgLS0+XG4gKiA8ZGl2IG5nLWhpZGU9XCJteVZhbHVlXCIgY2xhc3M9XCJuZy1oaWRlXCI+PC9kaXY+XG4gKlxuICogPCEtLSB3aGVuICRzY29wZS5teVZhbHVlIGlzIGZhbHN5IChlbGVtZW50IGlzIHZpc2libGUpIC0tPlxuICogPGRpdiBuZy1oaWRlPVwibXlWYWx1ZVwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogV2hlbiB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSB0cnV0aHkgdmFsdWUgdGhlbiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGNsYXNzXG4gKiBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgY2F1c2luZyBpdCB0byBiZWNvbWUgaGlkZGVuLiBXaGVuIGZhbHN5LCB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcmVtb3ZlZFxuICogZnJvbSB0aGUgZWxlbWVudCBjYXVzaW5nIHRoZSBlbGVtZW50IG5vdCB0byBhcHBlYXIgaGlkZGVuLlxuICpcbiAqICMjIFdoeSBpcyAhaW1wb3J0YW50IHVzZWQ/XG4gKlxuICogWW91IG1heSBiZSB3b25kZXJpbmcgd2h5ICFpbXBvcnRhbnQgaXMgdXNlZCBmb3IgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGAubmctaGlkZWAgc2VsZWN0b3JcbiAqIGNhbiBiZSBlYXNpbHkgb3ZlcnJpZGRlbiBieSBoZWF2aWVyIHNlbGVjdG9ycy4gRm9yIGV4YW1wbGUsIHNvbWV0aGluZyBhcyBzaW1wbGVcbiAqIGFzIGNoYW5naW5nIHRoZSBkaXNwbGF5IHN0eWxlIG9uIGEgSFRNTCBsaXN0IGl0ZW0gd291bGQgbWFrZSBoaWRkZW4gZWxlbWVudHMgYXBwZWFyIHZpc2libGUuXG4gKiBUaGlzIGFsc28gYmVjb21lcyBhIGJpZ2dlciBpc3N1ZSB3aGVuIGRlYWxpbmcgd2l0aCBDU1MgZnJhbWV3b3Jrcy5cbiAqXG4gKiBCeSB1c2luZyAhaW1wb3J0YW50LCB0aGUgc2hvdyBhbmQgaGlkZSBiZWhhdmlvciB3aWxsIHdvcmsgYXMgZXhwZWN0ZWQgZGVzcGl0ZSBhbnkgY2xhc2ggYmV0d2VlbiBDU1Mgc2VsZWN0b3JcbiAqIHNwZWNpZmljaXR5ICh3aGVuICFpbXBvcnRhbnQgaXNuJ3QgdXNlZCB3aXRoIGFueSBjb25mbGljdGluZyBzdHlsZXMpLiBJZiBhIGRldmVsb3BlciBjaG9vc2VzIHRvIG92ZXJyaWRlIHRoZVxuICogc3R5bGluZyB0byBjaGFuZ2UgaG93IHRvIGhpZGUgYW4gZWxlbWVudCB0aGVuIGl0IGlzIGp1c3QgYSBtYXR0ZXIgb2YgdXNpbmcgIWltcG9ydGFudCBpbiB0aGVpciBvd24gQ1NTIGNvZGUuXG4gKlxuICogIyMjIE92ZXJyaWRpbmcgYC5uZy1oaWRlYFxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSBgLm5nLWhpZGVgIGNsYXNzIHdpbGwgc3R5bGUgdGhlIGVsZW1lbnQgd2l0aCBgZGlzcGxheTogbm9uZSFpbXBvcnRhbnRgLiBJZiB5b3Ugd2lzaCB0byBjaGFuZ2VcbiAqIHRoZSBoaWRlIGJlaGF2aW9yIHdpdGggbmdTaG93L25nSGlkZSB0aGVuIHRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJlc3RhdGluZyB0aGUgc3R5bGVzIGZvciB0aGUgYC5uZy1oaWRlYFxuICogY2xhc3MgaW4gQ1NTOlxuICpcbiAqIGBgYGNzc1xuICogLm5nLWhpZGUge1xuICogICAvJiM0MjsgdGhpcyBpcyBqdXN0IGFub3RoZXIgZm9ybSBvZiBoaWRpbmcgYW4gZWxlbWVudCAmIzQyOy9cbiAqICAgZGlzcGxheTogYmxvY2shaW1wb3J0YW50O1xuICogICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gKiAgIHRvcDogLTk5OTlweDtcbiAqICAgbGVmdDogLTk5OTlweDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEJ5IGRlZmF1bHQgeW91IGRvbid0IG5lZWQgdG8gb3ZlcnJpZGUgaW4gQ1NTIGFueXRoaW5nIGFuZCB0aGUgYW5pbWF0aW9ucyB3aWxsIHdvcmsgYXJvdW5kIHRoZSBkaXNwbGF5IHN0eWxlLlxuICpcbiAqICMjIEEgbm90ZSBhYm91dCBhbmltYXRpb25zIHdpdGggYG5nSGlkZWBcbiAqXG4gKiBBbmltYXRpb25zIGluIG5nU2hvdy9uZ0hpZGUgd29yayB3aXRoIHRoZSBzaG93IGFuZCBoaWRlIGV2ZW50cyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2hlbiB0aGUgZGlyZWN0aXZlIGV4cHJlc3Npb25cbiAqIGlzIHRydWUgYW5kIGZhbHNlLiBUaGlzIHN5c3RlbSB3b3JrcyBsaWtlIHRoZSBhbmltYXRpb24gc3lzdGVtIHByZXNlbnQgd2l0aCBuZ0NsYXNzLCBleGNlcHQgdGhhdCB0aGUgYC5uZy1oaWRlYFxuICogQ1NTIGNsYXNzIGlzIGFkZGVkIGFuZCByZW1vdmVkIGZvciB5b3UgaW5zdGVhZCBvZiB5b3VyIG93biBDU1MgY2xhc3MuXG4gKlxuICogYGBgY3NzXG4gKiAvL1xuICogLy9hIHdvcmtpbmcgZXhhbXBsZSBjYW4gYmUgZm91bmQgYXQgdGhlIGJvdHRvbSBvZiB0aGlzIHBhZ2VcbiAqIC8vXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZCwgLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUge1xuICogICB0cmFuc2l0aW9uOiAwLjVzIGxpbmVhciBhbGw7XG4gKiB9XG4gKlxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlLm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7IC4uLiB9XG4gKiBgYGBcbiAqXG4gKiBLZWVwIGluIG1pbmQgdGhhdCwgYXMgb2YgQW5ndWxhckpTIHZlcnNpb24gMS4zLjAtYmV0YS4xMSwgdGhlcmUgaXMgbm8gbmVlZCB0byBjaGFuZ2UgdGhlIGRpc3BsYXlcbiAqIHByb3BlcnR5IHRvIGJsb2NrIGR1cmluZyBhbmltYXRpb24gc3RhdGVzLS1uZ0FuaW1hdGUgd2lsbCBoYW5kbGUgdGhlIHN0eWxlIHRvZ2dsaW5nIGF1dG9tYXRpY2FsbHkgZm9yIHlvdS5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogcmVtb3ZlQ2xhc3M6IGAubmctaGlkZWAgLSBoYXBwZW5zIGFmdGVyIHRoZSBgbmdIaWRlYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gaGlkZGVuXG4gKiBhZGRDbGFzczogYC5uZy1oaWRlYCAtIGhhcHBlbnMgYWZ0ZXIgdGhlIGBuZ0hpZGVgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgbm9uIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gdmlzaWJsZVxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0hpZGUgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSB0aGVuXG4gKiAgICAgdGhlIGVsZW1lbnQgaXMgc2hvd24gb3IgaGlkZGVuIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBAZXhhbXBsZVxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgQ2xpY2sgbWU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIj48YnIvPlxuICAgICAgPGRpdj5cbiAgICAgICAgU2hvdzpcbiAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgYW5pbWF0ZS1oaWRlXCIgbmctc2hvdz1cImNoZWNrZWRcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdGh1bWJzLXVwXCI+PC9zcGFuPiBJIHNob3cgdXAgd2hlbiB5b3VyIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICBIaWRlOlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLWhpZGVcIiBuZy1oaWRlPVwiY2hlY2tlZFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi10aHVtYnMtZG93blwiPjwvc3Bhbj4gSSBoaWRlIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiZ2x5cGhpY29ucy5jc3NcIj5cbiAgICAgIEBpbXBvcnQgdXJsKC4uLy4uL2NvbXBvbmVudHMvYm9vdHN0cmFwLTMuMS4xL2Nzcy9ib290c3RyYXAuY3NzKTtcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICAuYW5pbWF0ZS1oaWRlIHtcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgbGluZWFyIDAuNXM7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCBsaW5lYXIgMC41cztcbiAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtaGlkZS5uZy1oaWRlIHtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDA7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgICAgIH1cblxuICAgICAgLmNoZWNrLWVsZW1lbnQge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB0aHVtYnNVcCA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmdseXBoaWNvbi10aHVtYnMtdXAnKSk7XG4gICAgICB2YXIgdGh1bWJzRG93biA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmdseXBoaWNvbi10aHVtYnMtZG93bicpKTtcblxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1zaG93IC8gbmctaGlkZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3QodGh1bWJzVXAuaXNEaXNwbGF5ZWQoKSkudG9CZUZhbHN5KCk7XG4gICAgICAgIGV4cGVjdCh0aHVtYnNEb3duLmlzRGlzcGxheWVkKCkpLnRvQmVUcnV0aHkoKTtcblxuICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpLmNsaWNrKCk7XG5cbiAgICAgICAgZXhwZWN0KHRodW1ic1VwLmlzRGlzcGxheWVkKCkpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgZXhwZWN0KHRodW1ic0Rvd24uaXNEaXNwbGF5ZWQoKSkudG9CZUZhbHN5KCk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nSGlkZURpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCBmdW5jdGlvbigkYW5pbWF0ZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0hpZGUsIGZ1bmN0aW9uIG5nSGlkZVdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIFRoZSBjb21tZW50IGluc2lkZSBvZiB0aGUgbmdTaG93RGlyZWN0aXZlIGV4cGxhaW5zIHdoeSB3ZSBhZGQgYW5kXG4gICAgICAgIC8vIHJlbW92ZSBhIHRlbXBvcmFyeSBjbGFzcyBmb3IgdGhlIHNob3cvaGlkZSBhbmltYXRpb25cbiAgICAgICAgJGFuaW1hdGVbdmFsdWUgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10oZWxlbWVudCxOR19ISURFX0NMQVNTLCB7XG4gICAgICAgICAgdGVtcENsYXNzZXM6IE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1NcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1N0eWxlXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdTdHlsZWAgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc2V0IENTUyBzdHlsZSBvbiBhbiBIVE1MIGVsZW1lbnQgY29uZGl0aW9uYWxseS5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTdHlsZVxuICpcbiAqIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHdoaWNoIGV2YWxzIHRvIGFuXG4gKiBvYmplY3Qgd2hvc2Uga2V5cyBhcmUgQ1NTIHN0eWxlIG5hbWVzIGFuZCB2YWx1ZXMgYXJlIGNvcnJlc3BvbmRpbmcgdmFsdWVzIGZvciB0aG9zZSBDU1NcbiAqIGtleXMuXG4gKlxuICogU2luY2Ugc29tZSBDU1Mgc3R5bGUgbmFtZXMgYXJlIG5vdCB2YWxpZCBrZXlzIGZvciBhbiBvYmplY3QsIHRoZXkgbXVzdCBiZSBxdW90ZWQuXG4gKiBTZWUgdGhlICdiYWNrZ3JvdW5kLWNvbG9yJyBzdHlsZSBpbiB0aGUgZXhhbXBsZSBiZWxvdy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJzZXQgY29sb3JcIiBuZy1jbGljaz1cIm15U3R5bGU9e2NvbG9yOidyZWQnfVwiPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwic2V0IGJhY2tncm91bmRcIiBuZy1jbGljaz1cIm15U3R5bGU9eydiYWNrZ3JvdW5kLWNvbG9yJzonYmx1ZSd9XCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJjbGVhclwiIG5nLWNsaWNrPVwibXlTdHlsZT17fVwiPlxuICAgICAgICA8YnIvPlxuICAgICAgICA8c3BhbiBuZy1zdHlsZT1cIm15U3R5bGVcIj5TYW1wbGUgVGV4dDwvc3Bhbj5cbiAgICAgICAgPHByZT5teVN0eWxlPXt7bXlTdHlsZX19PC9wcmU+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIHNwYW4ge1xuICAgICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIGNvbG9yU3BhbiA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuJykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1zdHlsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGNvbG9yU3Bhbi5nZXRDc3NWYWx1ZSgnY29sb3InKSkudG9CZSgncmdiYSgwLCAwLCAwLCAxKScpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2lucHV0W3ZhbHVlPVxcJ3NldCBjb2xvclxcJ10nKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChjb2xvclNwYW4uZ2V0Q3NzVmFsdWUoJ2NvbG9yJykpLnRvQmUoJ3JnYmEoMjU1LCAwLCAwLCAxKScpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2lucHV0W3ZhbHVlPWNsZWFyXScpKS5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGNvbG9yU3Bhbi5nZXRDc3NWYWx1ZSgnY29sb3InKSkudG9CZSgncmdiYSgwLCAwLCAwLCAxKScpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1N0eWxlRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihhdHRyLm5nU3R5bGUsIGZ1bmN0aW9uIG5nU3R5bGVXYXRjaEFjdGlvbihuZXdTdHlsZXMsIG9sZFN0eWxlcykge1xuICAgIGlmIChvbGRTdHlsZXMgJiYgKG5ld1N0eWxlcyAhPT0gb2xkU3R5bGVzKSkge1xuICAgICAgZm9yRWFjaChvbGRTdHlsZXMsIGZ1bmN0aW9uKHZhbCwgc3R5bGUpIHsgZWxlbWVudC5jc3Moc3R5bGUsICcnKTt9KTtcbiAgICB9XG4gICAgaWYgKG5ld1N0eWxlcykgZWxlbWVudC5jc3MobmV3U3R5bGVzKTtcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1N3aXRjaFxuICogQHJlc3RyaWN0IEVBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nU3dpdGNoYCBkaXJlY3RpdmUgaXMgdXNlZCB0byBjb25kaXRpb25hbGx5IHN3YXAgRE9NIHN0cnVjdHVyZSBvbiB5b3VyIHRlbXBsYXRlIGJhc2VkIG9uIGEgc2NvcGUgZXhwcmVzc2lvbi5cbiAqIEVsZW1lbnRzIHdpdGhpbiBgbmdTd2l0Y2hgIGJ1dCB3aXRob3V0IGBuZ1N3aXRjaFdoZW5gIG9yIGBuZ1N3aXRjaERlZmF1bHRgIGRpcmVjdGl2ZXMgd2lsbCBiZSBwcmVzZXJ2ZWQgYXQgdGhlIGxvY2F0aW9uXG4gKiBhcyBzcGVjaWZpZWQgaW4gdGhlIHRlbXBsYXRlLlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgaXRzZWxmIHdvcmtzIHNpbWlsYXIgdG8gbmdJbmNsdWRlLCBob3dldmVyLCBpbnN0ZWFkIG9mIGRvd25sb2FkaW5nIHRlbXBsYXRlIGNvZGUgKG9yIGxvYWRpbmcgaXRcbiAqIGZyb20gdGhlIHRlbXBsYXRlIGNhY2hlKSwgYG5nU3dpdGNoYCBzaW1wbHkgY2hvb3NlcyBvbmUgb2YgdGhlIG5lc3RlZCBlbGVtZW50cyBhbmQgbWFrZXMgaXQgdmlzaWJsZSBiYXNlZCBvbiB3aGljaCBlbGVtZW50XG4gKiBtYXRjaGVzIHRoZSB2YWx1ZSBvYnRhaW5lZCBmcm9tIHRoZSBldmFsdWF0ZWQgZXhwcmVzc2lvbi4gSW4gb3RoZXIgd29yZHMsIHlvdSBkZWZpbmUgYSBjb250YWluZXIgZWxlbWVudFxuICogKHdoZXJlIHlvdSBwbGFjZSB0aGUgZGlyZWN0aXZlKSwgcGxhY2UgYW4gZXhwcmVzc2lvbiBvbiB0aGUgKipgb249XCIuLi5cImAgYXR0cmlidXRlKipcbiAqIChvciB0aGUgKipgbmctc3dpdGNoPVwiLi4uXCJgIGF0dHJpYnV0ZSoqKSwgZGVmaW5lIGFueSBpbm5lciBlbGVtZW50cyBpbnNpZGUgb2YgdGhlIGRpcmVjdGl2ZSBhbmQgcGxhY2VcbiAqIGEgd2hlbiBhdHRyaWJ1dGUgcGVyIGVsZW1lbnQuIFRoZSB3aGVuIGF0dHJpYnV0ZSBpcyB1c2VkIHRvIGluZm9ybSBuZ1N3aXRjaCB3aGljaCBlbGVtZW50IHRvIGRpc3BsYXkgd2hlbiB0aGUgb25cbiAqIGV4cHJlc3Npb24gaXMgZXZhbHVhdGVkLiBJZiBhIG1hdGNoaW5nIGV4cHJlc3Npb24gaXMgbm90IGZvdW5kIHZpYSBhIHdoZW4gYXR0cmlidXRlIHRoZW4gYW4gZWxlbWVudCB3aXRoIHRoZSBkZWZhdWx0XG4gKiBhdHRyaWJ1dGUgaXMgZGlzcGxheWVkLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiBCZSBhd2FyZSB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWVzIHRvIG1hdGNoIGFnYWluc3QgY2Fubm90IGJlIGV4cHJlc3Npb25zLiBUaGV5IGFyZSBpbnRlcnByZXRlZFxuICogYXMgbGl0ZXJhbCBzdHJpbmcgdmFsdWVzIHRvIG1hdGNoIGFnYWluc3QuXG4gKiBGb3IgZXhhbXBsZSwgKipgbmctc3dpdGNoLXdoZW49XCJzb21lVmFsXCJgKiogd2lsbCBtYXRjaCBhZ2FpbnN0IHRoZSBzdHJpbmcgYFwic29tZVZhbFwiYCBub3QgYWdhaW5zdCB0aGVcbiAqIHZhbHVlIG9mIHRoZSBleHByZXNzaW9uIGAkc2NvcGUuc29tZVZhbGAuXG4gKiA8L2Rpdj5cblxuICogQGFuaW1hdGlvbnNcbiAqIGVudGVyIC0gaGFwcGVucyBhZnRlciB0aGUgbmdTd2l0Y2ggY29udGVudHMgY2hhbmdlIGFuZCB0aGUgbWF0Y2hlZCBjaGlsZCBlbGVtZW50IGlzIHBsYWNlZCBpbnNpZGUgdGhlIGNvbnRhaW5lclxuICogbGVhdmUgLSBoYXBwZW5zIGp1c3QgYWZ0ZXIgdGhlIG5nU3dpdGNoIGNvbnRlbnRzIGNoYW5nZSBhbmQganVzdCBiZWZvcmUgdGhlIGZvcm1lciBjb250ZW50cyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cbiAqXG4gKiBAdXNhZ2VcbiAqXG4gKiBgYGBcbiAqIDxBTlkgbmctc3dpdGNoPVwiZXhwcmVzc2lvblwiPlxuICogICA8QU5ZIG5nLXN3aXRjaC13aGVuPVwibWF0Y2hWYWx1ZTFcIj4uLi48L0FOWT5cbiAqICAgPEFOWSBuZy1zd2l0Y2gtd2hlbj1cIm1hdGNoVmFsdWUyXCI+Li4uPC9BTlk+XG4gKiAgIDxBTlkgbmctc3dpdGNoLWRlZmF1bHQ+Li4uPC9BTlk+XG4gKiA8L0FOWT5cbiAqIGBgYFxuICpcbiAqXG4gKiBAc2NvcGVcbiAqIEBwcmlvcml0eSAxMjAwXG4gKiBAcGFyYW0geyp9IG5nU3dpdGNofG9uIGV4cHJlc3Npb24gdG8gbWF0Y2ggYWdhaW5zdCA8dHQ+bmctc3dpdGNoLXdoZW48L3R0Pi5cbiAqIE9uIGNoaWxkIGVsZW1lbnRzIGFkZDpcbiAqXG4gKiAqIGBuZ1N3aXRjaFdoZW5gOiB0aGUgY2FzZSBzdGF0ZW1lbnQgdG8gbWF0Y2ggYWdhaW5zdC4gSWYgbWF0Y2ggdGhlbiB0aGlzXG4gKiAgIGNhc2Ugd2lsbCBiZSBkaXNwbGF5ZWQuIElmIHRoZSBzYW1lIG1hdGNoIGFwcGVhcnMgbXVsdGlwbGUgdGltZXMsIGFsbCB0aGVcbiAqICAgZWxlbWVudHMgd2lsbCBiZSBkaXNwbGF5ZWQuXG4gKiAqIGBuZ1N3aXRjaERlZmF1bHRgOiB0aGUgZGVmYXVsdCBjYXNlIHdoZW4gbm8gb3RoZXIgY2FzZSBtYXRjaC4gSWYgdGhlcmVcbiAqICAgYXJlIG11bHRpcGxlIGRlZmF1bHQgY2FzZXMsIGFsbCBvZiB0aGVtIHdpbGwgYmUgZGlzcGxheWVkIHdoZW4gbm8gb3RoZXJcbiAqICAgY2FzZSBtYXRjaC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAgPGV4YW1wbGUgbW9kdWxlPVwic3dpdGNoRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwic2VsZWN0aW9uXCIgbmctb3B0aW9ucz1cIml0ZW0gZm9yIGl0ZW0gaW4gaXRlbXNcIj5cbiAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgIDx0dD5zZWxlY3Rpb249e3tzZWxlY3Rpb259fTwvdHQ+XG4gICAgICAgIDxoci8+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXN3aXRjaC1jb250YWluZXJcIlxuICAgICAgICAgIG5nLXN3aXRjaCBvbj1cInNlbGVjdGlvblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoXCIgbmctc3dpdGNoLXdoZW49XCJzZXR0aW5nc1wiPlNldHRpbmdzIERpdjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoXCIgbmctc3dpdGNoLXdoZW49XCJob21lXCI+SG9tZSBTcGFuPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2hcIiBuZy1zd2l0Y2gtZGVmYXVsdD5kZWZhdWx0PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdzd2l0Y2hFeGFtcGxlJywgWyduZ0FuaW1hdGUnXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbJ3NldHRpbmdzJywgJ2hvbWUnLCAnb3RoZXInXTtcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0aW9uID0gJHNjb3BlLml0ZW1zWzBdO1xuICAgICAgICB9XSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLmFuaW1hdGUtc3dpdGNoLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBoZWlnaHQ6NDBweDtcbiAgICAgICAgb3ZlcmZsb3c6aGlkZGVuO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gge1xuICAgICAgICBwYWRkaW5nOjEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1hbmltYXRlIHtcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcblxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgdG9wOjA7XG4gICAgICAgIGxlZnQ6MDtcbiAgICAgICAgcmlnaHQ6MDtcbiAgICAgICAgYm90dG9tOjA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIge1xuICAgICAgICB0b3A6LTUwcHg7XG4gICAgICB9XG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctbGVhdmUsXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciBzd2l0Y2hFbGVtID0gZWxlbWVudChieS5jc3MoJ1tuZy1zd2l0Y2hdJykpO1xuICAgICAgdmFyIHNlbGVjdCA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlbGVjdGlvbicpKTtcblxuICAgICAgaXQoJ3Nob3VsZCBzdGFydCBpbiBzZXR0aW5ncycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL1NldHRpbmdzIERpdi8pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGNoYW5nZSB0byBob21lJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDEpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvSG9tZSBTcGFuLyk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgc2VsZWN0IGRlZmF1bHQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZWN0LmFsbChieS5jc3MoJ29wdGlvbicpKS5nZXQoMikuY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KHN3aXRjaEVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9kZWZhdWx0Lyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nU3dpdGNoRGlyZWN0aXZlID0gWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVxdWlyZTogJ25nU3dpdGNoJyxcblxuICAgIC8vIGFza3MgZm9yICRzY29wZSB0byBmb29sIHRoZSBCQyBjb250cm9sbGVyIG1vZHVsZVxuICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgZnVuY3Rpb24gbmdTd2l0Y2hDb250cm9sbGVyKCkge1xuICAgICB0aGlzLmNhc2VzID0ge307XG4gICAgfV0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG5nU3dpdGNoQ29udHJvbGxlcikge1xuICAgICAgdmFyIHdhdGNoRXhwciA9IGF0dHIubmdTd2l0Y2ggfHwgYXR0ci5vbixcbiAgICAgICAgICBzZWxlY3RlZFRyYW5zY2x1ZGVzID0gW10sXG4gICAgICAgICAgc2VsZWN0ZWRFbGVtZW50cyA9IFtdLFxuICAgICAgICAgIHByZXZpb3VzTGVhdmVBbmltYXRpb25zID0gW10sXG4gICAgICAgICAgc2VsZWN0ZWRTY29wZXMgPSBbXTtcblxuICAgICAgdmFyIHNwbGljZUZhY3RvcnkgPSBmdW5jdGlvbihhcnJheSwgaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7IGFycmF5LnNwbGljZShpbmRleCwgMSk7IH07XG4gICAgICB9O1xuXG4gICAgICBzY29wZS4kd2F0Y2god2F0Y2hFeHByLCBmdW5jdGlvbiBuZ1N3aXRjaFdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciBpLCBpaTtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBwcmV2aW91c0xlYXZlQW5pbWF0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgJGFuaW1hdGUuY2FuY2VsKHByZXZpb3VzTGVhdmVBbmltYXRpb25zW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91c0xlYXZlQW5pbWF0aW9ucy5sZW5ndGggPSAwO1xuXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gc2VsZWN0ZWRTY29wZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGdldEJsb2NrTm9kZXMoc2VsZWN0ZWRFbGVtZW50c1tpXS5jbG9uZSk7XG4gICAgICAgICAgc2VsZWN0ZWRTY29wZXNbaV0uJGRlc3Ryb3koKTtcbiAgICAgICAgICB2YXIgcHJvbWlzZSA9IHByZXZpb3VzTGVhdmVBbmltYXRpb25zW2ldID0gJGFuaW1hdGUubGVhdmUoc2VsZWN0ZWQpO1xuICAgICAgICAgIHByb21pc2UudGhlbihzcGxpY2VGYWN0b3J5KHByZXZpb3VzTGVhdmVBbmltYXRpb25zLCBpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIHNlbGVjdGVkU2NvcGVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgaWYgKChzZWxlY3RlZFRyYW5zY2x1ZGVzID0gbmdTd2l0Y2hDb250cm9sbGVyLmNhc2VzWychJyArIHZhbHVlXSB8fCBuZ1N3aXRjaENvbnRyb2xsZXIuY2FzZXNbJz8nXSkpIHtcbiAgICAgICAgICBmb3JFYWNoKHNlbGVjdGVkVHJhbnNjbHVkZXMsIGZ1bmN0aW9uKHNlbGVjdGVkVHJhbnNjbHVkZSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRUcmFuc2NsdWRlLnRyYW5zY2x1ZGUoZnVuY3Rpb24oY2FzZUVsZW1lbnQsIHNlbGVjdGVkU2NvcGUpIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTY29wZXMucHVzaChzZWxlY3RlZFNjb3BlKTtcbiAgICAgICAgICAgICAgdmFyIGFuY2hvciA9IHNlbGVjdGVkVHJhbnNjbHVkZS5lbGVtZW50O1xuICAgICAgICAgICAgICBjYXNlRWxlbWVudFtjYXNlRWxlbWVudC5sZW5ndGgrK10gPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCcgZW5kIG5nU3dpdGNoV2hlbjogJyk7XG4gICAgICAgICAgICAgIHZhciBibG9jayA9IHsgY2xvbmU6IGNhc2VFbGVtZW50IH07XG5cbiAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50cy5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2FzZUVsZW1lbnQsIGFuY2hvci5wYXJlbnQoKSwgYW5jaG9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxudmFyIG5nU3dpdGNoV2hlbkRpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcbiAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxuICBwcmlvcml0eTogMTIwMCxcbiAgcmVxdWlyZTogJ15uZ1N3aXRjaCcsXG4gIG11bHRpRWxlbWVudDogdHJ1ZSxcbiAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xuICAgIGN0cmwuY2FzZXNbJyEnICsgYXR0cnMubmdTd2l0Y2hXaGVuXSA9IChjdHJsLmNhc2VzWychJyArIGF0dHJzLm5nU3dpdGNoV2hlbl0gfHwgW10pO1xuICAgIGN0cmwuY2FzZXNbJyEnICsgYXR0cnMubmdTd2l0Y2hXaGVuXS5wdXNoKHsgdHJhbnNjbHVkZTogJHRyYW5zY2x1ZGUsIGVsZW1lbnQ6IGVsZW1lbnQgfSk7XG4gIH1cbn0pO1xuXG52YXIgbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xuICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gIHByaW9yaXR5OiAxMjAwLFxuICByZXF1aXJlOiAnXm5nU3dpdGNoJyxcbiAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcbiAgICBjdHJsLmNhc2VzWyc/J10gPSAoY3RybC5jYXNlc1snPyddIHx8IFtdKTtcbiAgICBjdHJsLmNhc2VzWyc/J10ucHVzaCh7IHRyYW5zY2x1ZGU6ICR0cmFuc2NsdWRlLCBlbGVtZW50OiBlbGVtZW50IH0pO1xuICAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdUcmFuc2NsdWRlXG4gKiBAcmVzdHJpY3QgRUFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEaXJlY3RpdmUgdGhhdCBtYXJrcyB0aGUgaW5zZXJ0aW9uIHBvaW50IGZvciB0aGUgdHJhbnNjbHVkZWQgRE9NIG9mIHRoZSBuZWFyZXN0IHBhcmVudCBkaXJlY3RpdmUgdGhhdCB1c2VzIHRyYW5zY2x1c2lvbi5cbiAqXG4gKiBBbnkgZXhpc3RpbmcgY29udGVudCBvZiB0aGUgZWxlbWVudCB0aGF0IHRoaXMgZGlyZWN0aXZlIGlzIHBsYWNlZCBvbiB3aWxsIGJlIHJlbW92ZWQgYmVmb3JlIHRoZSB0cmFuc2NsdWRlZCBjb250ZW50IGlzIGluc2VydGVkLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJ0cmFuc2NsdWRlRXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgndHJhbnNjbHVkZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAuZGlyZWN0aXZlKCdwYW5lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgICAgICAgICBzY29wZTogeyB0aXRsZTonQCcgfSxcbiAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBzdHlsZT1cImJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiBncmF5XCI+e3t0aXRsZX19PC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPG5nLXRyYW5zY2x1ZGU+PC9uZy10cmFuc2NsdWRlPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgICAgICAgfTtcbiAgICAgICAgIH0pXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAkc2NvcGUudGl0bGUgPSAnTG9yZW0gSXBzdW0nO1xuICAgICAgICAgICAkc2NvcGUudGV4dCA9ICdOZXF1ZSBwb3JybyBxdWlzcXVhbSBlc3QgcXVpIGRvbG9yZW0gaXBzdW0gcXVpYSBkb2xvci4uLic7XG4gICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInRpdGxlXCI+IDxici8+XG4gICAgICAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJ0ZXh0XCI+PC90ZXh0YXJlYT4gPGJyLz5cbiAgICAgICAgIDxwYW5lIHRpdGxlPVwie3t0aXRsZX19XCI+e3t0ZXh0fX08L3BhbmU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIGhhdmUgdHJhbnNjbHVkZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgdGl0bGVFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGl0bGUnKSk7XG4gICAgICAgICAgdGl0bGVFbGVtZW50LmNsZWFyKCk7XG4gICAgICAgICAgdGl0bGVFbGVtZW50LnNlbmRLZXlzKCdUSVRMRScpO1xuICAgICAgICAgIHZhciB0ZXh0RWxlbWVudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSk7XG4gICAgICAgICAgdGV4dEVsZW1lbnQuY2xlYXIoKTtcbiAgICAgICAgICB0ZXh0RWxlbWVudC5zZW5kS2V5cygnVEVYVCcpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3RpdGxlJykpLmdldFRleHQoKSkudG9FcXVhbCgnVElUTEUnKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd0ZXh0JykpLmdldFRleHQoKSkudG9FcXVhbCgnVEVYVCcpO1xuICAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICpcbiAqL1xudmFyIG5nVHJhbnNjbHVkZURpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcbiAgcmVzdHJpY3Q6ICdFQUMnLFxuICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsIGNvbnRyb2xsZXIsICR0cmFuc2NsdWRlKSB7XG4gICAgaWYgKCEkdHJhbnNjbHVkZSkge1xuICAgICAgdGhyb3cgbWluRXJyKCduZ1RyYW5zY2x1ZGUnKSgnb3JwaGFuJyxcbiAgICAgICAnSWxsZWdhbCB1c2Ugb2YgbmdUcmFuc2NsdWRlIGRpcmVjdGl2ZSBpbiB0aGUgdGVtcGxhdGUhICcgK1xuICAgICAgICdObyBwYXJlbnQgZGlyZWN0aXZlIHRoYXQgcmVxdWlyZXMgYSB0cmFuc2NsdXNpb24gZm91bmQuICcgK1xuICAgICAgICdFbGVtZW50OiB7MH0nLFxuICAgICAgIHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7XG4gICAgfVxuXG4gICAgJHRyYW5zY2x1ZGUoZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICRlbGVtZW50LmVtcHR5KCk7XG4gICAgICAkZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBzY3JpcHRcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBMb2FkIHRoZSBjb250ZW50IG9mIGEgYDxzY3JpcHQ+YCBlbGVtZW50IGludG8ge0BsaW5rIG5nLiR0ZW1wbGF0ZUNhY2hlIGAkdGVtcGxhdGVDYWNoZWB9LCBzbyB0aGF0IHRoZVxuICogdGVtcGxhdGUgY2FuIGJlIHVzZWQgYnkge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0luY2x1ZGUgYG5nSW5jbHVkZWB9LFxuICoge0BsaW5rIG5nUm91dGUuZGlyZWN0aXZlOm5nVmlldyBgbmdWaWV3YH0sIG9yIHtAbGluayBndWlkZS9kaXJlY3RpdmUgZGlyZWN0aXZlc30uIFRoZSB0eXBlIG9mIHRoZVxuICogYDxzY3JpcHQ+YCBlbGVtZW50IG11c3QgYmUgc3BlY2lmaWVkIGFzIGB0ZXh0L25nLXRlbXBsYXRlYCwgYW5kIGEgY2FjaGUgbmFtZSBmb3IgdGhlIHRlbXBsYXRlIG11c3QgYmVcbiAqIGFzc2lnbmVkIHRocm91Z2ggdGhlIGVsZW1lbnQncyBgaWRgLCB3aGljaCBjYW4gdGhlbiBiZSB1c2VkIGFzIGEgZGlyZWN0aXZlJ3MgYHRlbXBsYXRlVXJsYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBNdXN0IGJlIHNldCB0byBgJ3RleHQvbmctdGVtcGxhdGUnYC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBDYWNoZSBuYW1lIG9mIHRoZSB0ZW1wbGF0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICA8ZXhhbXBsZT5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC9uZy10ZW1wbGF0ZVwiIGlkPVwiL3RwbC5odG1sXCI+XG4gICAgICAgIENvbnRlbnQgb2YgdGhlIHRlbXBsYXRlLlxuICAgICAgPC9zY3JpcHQ+XG5cbiAgICAgIDxhIG5nLWNsaWNrPVwiY3VycmVudFRwbD0nL3RwbC5odG1sJ1wiIGlkPVwidHBsLWxpbmtcIj5Mb2FkIGlubGluZWQgdGVtcGxhdGU8L2E+XG4gICAgICA8ZGl2IGlkPVwidHBsLWNvbnRlbnRcIiBuZy1pbmNsdWRlIHNyYz1cImN1cnJlbnRUcGxcIj48L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBsb2FkIHRlbXBsYXRlIGRlZmluZWQgaW5zaWRlIHNjcmlwdCB0YWcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZWxlbWVudChieS5jc3MoJyN0cGwtbGluaycpKS5jbGljaygpO1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyN0cGwtY29udGVudCcpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL0NvbnRlbnQgb2YgdGhlIHRlbXBsYXRlLyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xudmFyIHNjcmlwdERpcmVjdGl2ZSA9IFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgdGVybWluYWw6IHRydWUsXG4gICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xuICAgICAgaWYgKGF0dHIudHlwZSA9PSAndGV4dC9uZy10ZW1wbGF0ZScpIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlVXJsID0gYXR0ci5pZCxcbiAgICAgICAgICAgIHRleHQgPSBlbGVtZW50WzBdLnRleHQ7XG5cbiAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlVXJsLCB0ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XTtcblxudmFyIG5nT3B0aW9uc01pbkVyciA9IG1pbkVycignbmdPcHRpb25zJyk7XG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHNlbGVjdFxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEhUTUwgYFNFTEVDVGAgZWxlbWVudCB3aXRoIGFuZ3VsYXIgZGF0YS1iaW5kaW5nLlxuICpcbiAqICMgYG5nT3B0aW9uc2BcbiAqXG4gKiBUaGUgYG5nT3B0aW9uc2AgYXR0cmlidXRlIGNhbiBiZSB1c2VkIHRvIGR5bmFtaWNhbGx5IGdlbmVyYXRlIGEgbGlzdCBvZiBgPG9wdGlvbj5gXG4gKiBlbGVtZW50cyBmb3IgdGhlIGA8c2VsZWN0PmAgZWxlbWVudCB1c2luZyB0aGUgYXJyYXkgb3Igb2JqZWN0IG9idGFpbmVkIGJ5IGV2YWx1YXRpbmcgdGhlXG4gKiBgbmdPcHRpb25zYCBjb21wcmVoZW5zaW9uIGV4cHJlc3Npb24uXG4gKlxuICogSW4gbWFueSBjYXNlcywgYG5nUmVwZWF0YCBjYW4gYmUgdXNlZCBvbiBgPG9wdGlvbj5gIGVsZW1lbnRzIGluc3RlYWQgb2YgYG5nT3B0aW9uc2AgdG8gYWNoaWV2ZSBhXG4gKiBzaW1pbGFyIHJlc3VsdC4gSG93ZXZlciwgYG5nT3B0aW9uc2AgcHJvdmlkZXMgc29tZSBiZW5lZml0cyBzdWNoIGFzIHJlZHVjaW5nIG1lbW9yeSBhbmRcbiAqIGluY3JlYXNpbmcgc3BlZWQgYnkgbm90IGNyZWF0aW5nIGEgbmV3IHNjb3BlIGZvciBlYWNoIHJlcGVhdGVkIGluc3RhbmNlLCBhcyB3ZWxsIGFzIHByb3ZpZGluZ1xuICogbW9yZSBmbGV4aWJpbGl0eSBpbiBob3cgdGhlIGA8c2VsZWN0PmAncyBtb2RlbCBpcyBhc3NpZ25lZCB2aWEgdGhlIGBzZWxlY3RgICoqYGFzYCoqIHBhcnQgb2YgdGhlXG4gKiBjb21wcmVoZW5zaW9uIGV4cHJlc3Npb24uIGBuZ09wdGlvbnNgIHNob3VsZCBiZSB1c2VkIHdoZW4gdGhlIGA8c2VsZWN0PmAgbW9kZWwgbmVlZHMgdG8gYmUgYm91bmRcbiAqICB0byBhIG5vbi1zdHJpbmcgdmFsdWUuIFRoaXMgaXMgYmVjYXVzZSBhbiBvcHRpb24gZWxlbWVudCBjYW4gb25seSBiZSBib3VuZCB0byBzdHJpbmcgdmFsdWVzIGF0XG4gKiBwcmVzZW50LlxuICpcbiAqIFdoZW4gYW4gaXRlbSBpbiB0aGUgYDxzZWxlY3Q+YCBtZW51IGlzIHNlbGVjdGVkLCB0aGUgYXJyYXkgZWxlbWVudCBvciBvYmplY3QgcHJvcGVydHlcbiAqIHJlcHJlc2VudGVkIGJ5IHRoZSBzZWxlY3RlZCBvcHRpb24gd2lsbCBiZSBib3VuZCB0byB0aGUgbW9kZWwgaWRlbnRpZmllZCBieSB0aGUgYG5nTW9kZWxgXG4gKiBkaXJlY3RpdmUuXG4gKlxuICogT3B0aW9uYWxseSwgYSBzaW5nbGUgaGFyZC1jb2RlZCBgPG9wdGlvbj5gIGVsZW1lbnQsIHdpdGggdGhlIHZhbHVlIHNldCB0byBhbiBlbXB0eSBzdHJpbmcsIGNhblxuICogYmUgbmVzdGVkIGludG8gdGhlIGA8c2VsZWN0PmAgZWxlbWVudC4gVGhpcyBlbGVtZW50IHdpbGwgdGhlbiByZXByZXNlbnQgdGhlIGBudWxsYCBvciBcIm5vdCBzZWxlY3RlZFwiXG4gKiBvcHRpb24uIFNlZSBleGFtcGxlIGJlbG93IGZvciBkZW1vbnN0cmF0aW9uLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogYG5nTW9kZWxgIGNvbXBhcmVzIGJ5IHJlZmVyZW5jZSwgbm90IHZhbHVlLiBUaGlzIGlzIGltcG9ydGFudCB3aGVuIGJpbmRpbmcgdG8gYW5cbiAqIGFycmF5IG9mIG9iamVjdHMuIFNlZSBhbiBleGFtcGxlIFtpbiB0aGlzIGpzZmlkZGxlXShodHRwOi8vanNmaWRkbGUubmV0L3FXelRiLykuXG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyBgc2VsZWN0YCAqKmBhc2AqKlxuICpcbiAqIFVzaW5nIGBzZWxlY3RgICoqYGFzYCoqIHdpbGwgYmluZCB0aGUgcmVzdWx0IG9mIHRoZSBgc2VsZWN0YCBleHByZXNzaW9uIHRvIHRoZSBtb2RlbCwgYnV0XG4gKiB0aGUgdmFsdWUgb2YgdGhlIGA8c2VsZWN0PmAgYW5kIGA8b3B0aW9uPmAgaHRtbCBlbGVtZW50cyB3aWxsIGJlIGVpdGhlciB0aGUgaW5kZXggKGZvciBhcnJheSBkYXRhIHNvdXJjZXMpXG4gKiBvciBwcm9wZXJ0eSBuYW1lIChmb3Igb2JqZWN0IGRhdGEgc291cmNlcykgb2YgdGhlIHZhbHVlIHdpdGhpbiB0aGUgY29sbGVjdGlvbi4gSWYgYSAqKmB0cmFjayBieWAqKiBleHByZXNzaW9uXG4gKiBpcyB1c2VkLCB0aGUgcmVzdWx0IG9mIHRoYXQgZXhwcmVzc2lvbiB3aWxsIGJlIHNldCBhcyB0aGUgdmFsdWUgb2YgdGhlIGBvcHRpb25gIGFuZCBgc2VsZWN0YCBlbGVtZW50cy5cbiAqXG4gKlxuICogIyMjIGBzZWxlY3RgICoqYGFzYCoqIGFuZCAqKmB0cmFjayBieWAqKlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiBEbyBub3QgdXNlIGBzZWxlY3RgICoqYGFzYCoqIGFuZCAqKmB0cmFjayBieWAqKiBpbiB0aGUgc2FtZSBleHByZXNzaW9uLiBUaGV5IGFyZSBub3QgZGVzaWduZWQgdG8gd29yayB0b2dldGhlci5cbiAqIDwvZGl2PlxuICpcbiAqIENvbnNpZGVyIHRoZSBmb2xsb3dpbmcgZXhhbXBsZTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8c2VsZWN0IG5nLW9wdGlvbnM9XCJpdGVtLnN1Ykl0ZW0gYXMgaXRlbS5sYWJlbCBmb3IgaXRlbSBpbiB2YWx1ZXMgdHJhY2sgYnkgaXRlbS5pZFwiIG5nLW1vZGVsPVwic2VsZWN0ZWRcIj5cbiAqIGBgYFxuICpcbiAqIGBgYGpzXG4gKiAkc2NvcGUudmFsdWVzID0gW3tcbiAqICAgaWQ6IDEsXG4gKiAgIGxhYmVsOiAnYUxhYmVsJyxcbiAqICAgc3ViSXRlbTogeyBuYW1lOiAnYVN1Ykl0ZW0nIH1cbiAqIH0sIHtcbiAqICAgaWQ6IDIsXG4gKiAgIGxhYmVsOiAnYkxhYmVsJyxcbiAqICAgc3ViSXRlbTogeyBuYW1lOiAnYlN1Ykl0ZW0nIH1cbiAqIH1dO1xuICpcbiAqICRzY29wZS5zZWxlY3RlZCA9IHsgbmFtZTogJ2FTdWJJdGVtJyB9O1xuICogYGBgXG4gKlxuICogV2l0aCB0aGUgcHVycG9zZSBvZiBwcmVzZXJ2aW5nIHRoZSBzZWxlY3Rpb24sIHRoZSAqKmB0cmFjayBieWAqKiBleHByZXNzaW9uIGlzIGFsd2F5cyBhcHBsaWVkIHRvIHRoZSBlbGVtZW50XG4gKiBvZiB0aGUgZGF0YSBzb3VyY2UgKHRvIGBpdGVtYCBpbiB0aGlzIGV4YW1wbGUpLiBUbyBjYWxjdWxhdGUgd2hldGhlciBhbiBlbGVtZW50IGlzIHNlbGVjdGVkLCB3ZSBkbyB0aGVcbiAqIGZvbGxvd2luZzpcbiAqXG4gKiAxLiBBcHBseSAqKmB0cmFjayBieWAqKiB0byB0aGUgZWxlbWVudHMgaW4gdGhlIGFycmF5LiBJbiB0aGUgZXhhbXBsZTogYFsxLCAyXWBcbiAqIDIuIEFwcGx5ICoqYHRyYWNrIGJ5YCoqIHRvIHRoZSBhbHJlYWR5IHNlbGVjdGVkIHZhbHVlIGluIGBuZ01vZGVsYC5cbiAqICAgIEluIHRoZSBleGFtcGxlOiB0aGlzIGlzIG5vdCBwb3NzaWJsZSBhcyAqKmB0cmFjayBieWAqKiByZWZlcnMgdG8gYGl0ZW0uaWRgLCBidXQgdGhlIHNlbGVjdGVkXG4gKiAgICB2YWx1ZSBmcm9tIGBuZ01vZGVsYCBpcyBge25hbWU6ICdhU3ViSXRlbSd9YCwgc28gdGhlICoqYHRyYWNrIGJ5YCoqIGV4cHJlc3Npb24gaXMgYXBwbGllZCB0b1xuICogICAgYSB3cm9uZyBvYmplY3QsIHRoZSBzZWxlY3RlZCBlbGVtZW50IGNhbid0IGJlIGZvdW5kLCBgPHNlbGVjdD5gIGlzIGFsd2F5cyByZXNldCB0byB0aGUgXCJub3RcbiAqICAgIHNlbGVjdGVkXCIgb3B0aW9uLlxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFRoZSBjb250cm9sIGlzIGNvbnNpZGVyZWQgdmFsaWQgb25seSBpZiB2YWx1ZSBpcyBlbnRlcmVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0ge2NvbXByZWhlbnNpb25fZXhwcmVzc2lvbj19IG5nT3B0aW9ucyBpbiBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtczpcbiAqXG4gKiAgICogZm9yIGFycmF5IGRhdGEgc291cmNlczpcbiAqICAgICAqIGBsYWJlbGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXG4gKiAgICAgKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxuICogICAgICogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWAgKipgdHJhY2sgYnlgKiogYHRyYWNrZXhwcmBcbiAqICAgICAqIGBsYWJlbGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YCB8IG9yZGVyQnk6YG9yZGVyZXhwcmAgKipgdHJhY2sgYnlgKiogYHRyYWNrZXhwcmBcbiAqICAgICAgICAoZm9yIGluY2x1ZGluZyBhIGZpbHRlciB3aXRoIGB0cmFjayBieWApXG4gKiAgICogZm9yIG9iamVjdCBkYXRhIHNvdXJjZXM6XG4gKiAgICAgKiBgbGFiZWxgICoqYGZvciAoYCoqYGtleWAgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBmb3IgKGAqKmBrZXlgICoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqICAgICAqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYCAqKmBmb3IgKGAqKmBrZXlgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgXG4gKiAgICAgICAgICoqYGZvcmAgYChgKipga2V5YCoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqXG4gKiBXaGVyZTpcbiAqXG4gKiAgICogYGFycmF5YCAvIGBvYmplY3RgOiBhbiBleHByZXNzaW9uIHdoaWNoIGV2YWx1YXRlcyB0byBhbiBhcnJheSAvIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gKiAgICogYHZhbHVlYDogbG9jYWwgdmFyaWFibGUgd2hpY2ggd2lsbCByZWZlciB0byBlYWNoIGl0ZW0gaW4gdGhlIGBhcnJheWAgb3IgZWFjaCBwcm9wZXJ0eSB2YWx1ZVxuICogICAgICBvZiBgb2JqZWN0YCBkdXJpbmcgaXRlcmF0aW9uLlxuICogICAqIGBrZXlgOiBsb2NhbCB2YXJpYWJsZSB3aGljaCB3aWxsIHJlZmVyIHRvIGEgcHJvcGVydHkgbmFtZSBpbiBgb2JqZWN0YCBkdXJpbmcgaXRlcmF0aW9uLlxuICogICAqIGBsYWJlbGA6IFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmUgdGhlIGxhYmVsIGZvciBgPG9wdGlvbj5gIGVsZW1lbnQuIFRoZVxuICogICAgIGBleHByZXNzaW9uYCB3aWxsIG1vc3QgbGlrZWx5IHJlZmVyIHRvIHRoZSBgdmFsdWVgIHZhcmlhYmxlIChlLmcuIGB2YWx1ZS5wcm9wZXJ0eU5hbWVgKS5cbiAqICAgKiBgc2VsZWN0YDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSBib3VuZCB0byB0aGUgbW9kZWwgb2YgdGhlIHBhcmVudCBgPHNlbGVjdD5gXG4gKiAgICAgIGVsZW1lbnQuIElmIG5vdCBzcGVjaWZpZWQsIGBzZWxlY3RgIGV4cHJlc3Npb24gd2lsbCBkZWZhdWx0IHRvIGB2YWx1ZWAuXG4gKiAgICogYGdyb3VwYDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSB1c2VkIHRvIGdyb3VwIG9wdGlvbnMgdXNpbmcgdGhlIGA8b3B0Z3JvdXA+YFxuICogICAgICBET00gZWxlbWVudC5cbiAqICAgKiBgdHJhY2tleHByYDogVXNlZCB3aGVuIHdvcmtpbmcgd2l0aCBhbiBhcnJheSBvZiBvYmplY3RzLiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlXG4gKiAgICAgIHVzZWQgdG8gaWRlbnRpZnkgdGhlIG9iamVjdHMgaW4gdGhlIGFycmF5LiBUaGUgYHRyYWNrZXhwcmAgd2lsbCBtb3N0IGxpa2VseSByZWZlciB0byB0aGVcbiAqICAgICBgdmFsdWVgIHZhcmlhYmxlIChlLmcuIGB2YWx1ZS5wcm9wZXJ0eU5hbWVgKS4gV2l0aCB0aGlzIHRoZSBzZWxlY3Rpb24gaXMgcHJlc2VydmVkXG4gKiAgICAgIGV2ZW4gd2hlbiB0aGUgb3B0aW9ucyBhcmUgcmVjcmVhdGVkIChlLmcuIHJlbG9hZGVkIGZyb20gdGhlIHNlcnZlcikuXG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBtb2R1bGU9XCJzZWxlY3RFeGFtcGxlXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8c2NyaXB0PlxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnc2VsZWN0RXhhbXBsZScsIFtdKVxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY29sb3JzID0gW1xuICAgICAgICAgICAgICB7bmFtZTonYmxhY2snLCBzaGFkZTonZGFyayd9LFxuICAgICAgICAgICAgICB7bmFtZTond2hpdGUnLCBzaGFkZTonbGlnaHQnfSxcbiAgICAgICAgICAgICAge25hbWU6J3JlZCcsIHNoYWRlOidkYXJrJ30sXG4gICAgICAgICAgICAgIHtuYW1lOidibHVlJywgc2hhZGU6J2RhcmsnfSxcbiAgICAgICAgICAgICAge25hbWU6J3llbGxvdycsIHNoYWRlOidsaWdodCd9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgJHNjb3BlLm15Q29sb3IgPSAkc2NvcGUuY29sb3JzWzJdOyAvLyByZWRcbiAgICAgICAgICB9XSk7XG4gICAgICAgIDwvc2NyaXB0PlxuICAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJjb2xvciBpbiBjb2xvcnNcIj5cbiAgICAgICAgICAgICAgTmFtZTogPGlucHV0IG5nLW1vZGVsPVwiY29sb3IubmFtZVwiPlxuICAgICAgICAgICAgICBbPGEgaHJlZiBuZy1jbGljaz1cImNvbG9ycy5zcGxpY2UoJGluZGV4LCAxKVwiPlg8L2E+XVxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgWzxhIGhyZWYgbmctY2xpY2s9XCJjb2xvcnMucHVzaCh7fSlcIj5hZGQ8L2E+XVxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICAgIDxoci8+XG4gICAgICAgICAgQ29sb3IgKG51bGwgbm90IGFsbG93ZWQpOlxuICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCIgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZm9yIGNvbG9yIGluIGNvbG9yc1wiPjwvc2VsZWN0Pjxicj5cblxuICAgICAgICAgIENvbG9yIChudWxsIGFsbG93ZWQpOlxuICAgICAgICAgIDxzcGFuICBjbGFzcz1cIm51bGxhYmxlXCI+XG4gICAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGZvciBjb2xvciBpbiBjb2xvcnNcIj5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPi0tIGNob29zZSBjb2xvciAtLTwvb3B0aW9uPlxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPC9zcGFuPjxici8+XG5cbiAgICAgICAgICBDb2xvciBncm91cGVkIGJ5IHNoYWRlOlxuICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCIgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZ3JvdXAgYnkgY29sb3Iuc2hhZGUgZm9yIGNvbG9yIGluIGNvbG9yc1wiPlxuICAgICAgICAgIDwvc2VsZWN0Pjxici8+XG5cblxuICAgICAgICAgIFNlbGVjdCA8YSBocmVmIG5nLWNsaWNrPVwibXlDb2xvciA9IHsgbmFtZTonbm90IGluIGxpc3QnLCBzaGFkZTogJ290aGVyJyB9XCI+Ym9ndXM8L2E+Ljxicj5cbiAgICAgICAgICA8aHIvPlxuICAgICAgICAgIEN1cnJlbnRseSBzZWxlY3RlZDoge3sge3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9IH19XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJvcmRlcjpzb2xpZCAxcHggYmxhY2s7IGhlaWdodDoyMHB4XCJcbiAgICAgICAgICAgICAgIG5nLXN0eWxlPVwieydiYWNrZ3JvdW5kLWNvbG9yJzpteUNvbG9yLm5hbWV9XCI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1vcHRpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3tzZWxlY3RlZF9jb2xvcjpteUNvbG9yfScpKS5nZXRUZXh0KCkpLnRvTWF0Y2goJ3JlZCcpO1xuICAgICAgICAgICBlbGVtZW50LmFsbChieS5tb2RlbCgnbXlDb2xvcicpKS5maXJzdCgpLmNsaWNrKCk7XG4gICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5LmNzcygnc2VsZWN0W25nLW1vZGVsPVwibXlDb2xvclwiXSBvcHRpb24nKSkuZmlyc3QoKS5jbGljaygpO1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0nKSkuZ2V0VGV4dCgpKS50b01hdGNoKCdibGFjaycpO1xuICAgICAgICAgICBlbGVtZW50KGJ5LmNzcygnLm51bGxhYmxlIHNlbGVjdFtuZy1tb2RlbD1cIm15Q29sb3JcIl0nKSkuY2xpY2soKTtcbiAgICAgICAgICAgZWxlbWVudC5hbGwoYnkuY3NzKCcubnVsbGFibGUgc2VsZWN0W25nLW1vZGVsPVwibXlDb2xvclwiXSBvcHRpb24nKSkuZmlyc3QoKS5jbGljaygpO1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0nKSkuZ2V0VGV4dCgpKS50b01hdGNoKCdudWxsJyk7XG4gICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cblxudmFyIG5nT3B0aW9uc0RpcmVjdGl2ZSA9IHZhbHVlRm4oe1xuICByZXN0cmljdDogJ0EnLFxuICB0ZXJtaW5hbDogdHJ1ZVxufSk7XG5cbi8vIGpzaGludCBtYXhsZW46IGZhbHNlXG52YXIgc2VsZWN0RGlyZWN0aXZlID0gWyckY29tcGlsZScsICckcGFyc2UnLCBmdW5jdGlvbigkY29tcGlsZSwgICAkcGFyc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAvLzAwMDAxMTExMTExMTExMDAwMDAwMDAwMDAyMjIyMjIyMjIyMDAwMDAwMDAwMDAwMDAwMDAwMDAwMzMzMzMzMzMzMzAwMDAwMDAwMDAwMDAwNDQ0NDQ0NDQ0NDQ0NDQ0MDAwMDAwMDAwNTU1NTU1NTU1NTU1NTU1MDAwMDAwMDY2NjY2NjY2NjY2NjY2NjAwMDAwMDAwMDAwMDAwMDc3Nzc3Nzc3NzcwMDAwMDAwMDAwMDAwMDAwMDAwODg4ODg4ODg4OFxuICB2YXIgTkdfT1BUSU9OU19SRUdFWFAgPSAvXlxccyooW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZ3JvdXBcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMrZm9yXFxzKyg/OihbXFwkXFx3XVtcXCRcXHddKil8KD86XFwoXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqLFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKlxcKSkpXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpPyQvLFxuICAgICAgbnVsbE1vZGVsQ3RybCA9IHskc2V0Vmlld1ZhbHVlOiBub29wfTtcbi8vIGpzaGludCBtYXhsZW46IDEwMFxuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXF1aXJlOiBbJ3NlbGVjdCcsICc/bmdNb2RlbCddLFxuICAgIGNvbnRyb2xsZXI6IFsnJGVsZW1lbnQnLCAnJHNjb3BlJywgJyRhdHRycycsIGZ1bmN0aW9uKCRlbGVtZW50LCAkc2NvcGUsICRhdHRycykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIG9wdGlvbnNNYXAgPSB7fSxcbiAgICAgICAgICBuZ01vZGVsQ3RybCA9IG51bGxNb2RlbEN0cmwsXG4gICAgICAgICAgbnVsbE9wdGlvbixcbiAgICAgICAgICB1bmtub3duT3B0aW9uO1xuXG5cbiAgICAgIHNlbGYuZGF0YWJvdW5kID0gJGF0dHJzLm5nTW9kZWw7XG5cblxuICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24obmdNb2RlbEN0cmxfLCBudWxsT3B0aW9uXywgdW5rbm93bk9wdGlvbl8pIHtcbiAgICAgICAgbmdNb2RlbEN0cmwgPSBuZ01vZGVsQ3RybF87XG4gICAgICAgIG51bGxPcHRpb24gPSBudWxsT3B0aW9uXztcbiAgICAgICAgdW5rbm93bk9wdGlvbiA9IHVua25vd25PcHRpb25fO1xuICAgICAgfTtcblxuXG4gICAgICBzZWxmLmFkZE9wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KHZhbHVlLCAnXCJvcHRpb24gdmFsdWVcIicpO1xuICAgICAgICBvcHRpb25zTWFwW3ZhbHVlXSA9IHRydWU7XG5cbiAgICAgICAgaWYgKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgPT0gdmFsdWUpIHtcbiAgICAgICAgICAkZWxlbWVudC52YWwodmFsdWUpO1xuICAgICAgICAgIGlmICh1bmtub3duT3B0aW9uLnBhcmVudCgpKSB1bmtub3duT3B0aW9uLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zODE0NTlcbiAgICAgICAgLy8gQWRkaW5nIGFuIDxvcHRpb24gc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiPiBlbGVtZW50IHRvIGEgPHNlbGVjdCByZXF1aXJlZD1cInJlcXVpcmVkXCI+IHNob3VsZFxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHNlbGVjdCB0aGUgbmV3IGVsZW1lbnRcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudFswXS5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICBlbGVtZW50WzBdLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuXG4gICAgICBzZWxmLnJlbW92ZU9wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc09wdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICBkZWxldGUgb3B0aW9uc01hcFt2YWx1ZV07XG4gICAgICAgICAgaWYgKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclVua25vd25PcHRpb24odmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuXG4gICAgICBzZWxmLnJlbmRlclVua25vd25PcHRpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdmFyIHVua25vd25WYWwgPSAnPyAnICsgaGFzaEtleSh2YWwpICsgJyA/JztcbiAgICAgICAgdW5rbm93bk9wdGlvbi52YWwodW5rbm93blZhbCk7XG4gICAgICAgICRlbGVtZW50LnByZXBlbmQodW5rbm93bk9wdGlvbik7XG4gICAgICAgICRlbGVtZW50LnZhbCh1bmtub3duVmFsKTtcbiAgICAgICAgdW5rbm93bk9wdGlvbi5wcm9wKCdzZWxlY3RlZCcsIHRydWUpOyAvLyBuZWVkZWQgZm9yIElFXG4gICAgICB9O1xuXG5cbiAgICAgIHNlbGYuaGFzT3B0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnNNYXAuaGFzT3duUHJvcGVydHkodmFsdWUpO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gZGlzYWJsZSB1bmtub3duIG9wdGlvbiBzbyB0aGF0IHdlIGRvbid0IGRvIHdvcmsgd2hlbiB0aGUgd2hvbGUgc2VsZWN0IGlzIGJlaW5nIGRlc3Ryb3llZFxuICAgICAgICBzZWxmLnJlbmRlclVua25vd25PcHRpb24gPSBub29wO1xuICAgICAgfSk7XG4gICAgfV0sXG5cbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAgICAgIC8vIGlmIG5nTW9kZWwgaXMgbm90IGRlZmluZWQsIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgICAgIGlmICghY3RybHNbMV0pIHJldHVybjtcblxuICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1swXSxcbiAgICAgICAgICBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdLFxuICAgICAgICAgIG11bHRpcGxlID0gYXR0ci5tdWx0aXBsZSxcbiAgICAgICAgICBvcHRpb25zRXhwID0gYXR0ci5uZ09wdGlvbnMsXG4gICAgICAgICAgbnVsbE9wdGlvbiA9IGZhbHNlLCAvLyBpZiBmYWxzZSwgdXNlciB3aWxsIG5vdCBiZSBhYmxlIHRvIHNlbGVjdCBpdCAodXNlZCBieSBuZ09wdGlvbnMpXG4gICAgICAgICAgZW1wdHlPcHRpb24sXG4gICAgICAgICAgcmVuZGVyU2NoZWR1bGVkID0gZmFsc2UsXG4gICAgICAgICAgLy8gd2UgY2FuJ3QganVzdCBqcUxpdGUoJzxvcHRpb24+Jykgc2luY2UganFMaXRlIGlzIG5vdCBzbWFydCBlbm91Z2hcbiAgICAgICAgICAvLyB0byBjcmVhdGUgaXQgaW4gPHNlbGVjdD4gYW5kIElFIGJhcmZzIG90aGVyd2lzZS5cbiAgICAgICAgICBvcHRpb25UZW1wbGF0ZSA9IGpxTGl0ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKSksXG4gICAgICAgICAgb3B0R3JvdXBUZW1wbGF0ZSA9anFMaXRlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGdyb3VwJykpLFxuICAgICAgICAgIHVua25vd25PcHRpb24gPSBvcHRpb25UZW1wbGF0ZS5jbG9uZSgpO1xuXG4gICAgICAvLyBmaW5kIFwibnVsbFwiIG9wdGlvblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGNoaWxkcmVuID0gZWxlbWVudC5jaGlsZHJlbigpLCBpaSA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgaWYgKGNoaWxkcmVuW2ldLnZhbHVlID09PSAnJykge1xuICAgICAgICAgIGVtcHR5T3B0aW9uID0gbnVsbE9wdGlvbiA9IGNoaWxkcmVuLmVxKGkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNlbGVjdEN0cmwuaW5pdChuZ01vZGVsQ3RybCwgbnVsbE9wdGlvbiwgdW5rbm93bk9wdGlvbik7XG5cbiAgICAgIC8vIHJlcXVpcmVkIHZhbGlkYXRvclxuICAgICAgaWYgKG11bHRpcGxlKSB7XG4gICAgICAgIG5nTW9kZWxDdHJsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnNFeHApIHNldHVwQXNPcHRpb25zKHNjb3BlLCBlbGVtZW50LCBuZ01vZGVsQ3RybCk7XG4gICAgICBlbHNlIGlmIChtdWx0aXBsZSkgc2V0dXBBc011bHRpcGxlKHNjb3BlLCBlbGVtZW50LCBuZ01vZGVsQ3RybCk7XG4gICAgICBlbHNlIHNldHVwQXNTaW5nbGUoc2NvcGUsIGVsZW1lbnQsIG5nTW9kZWxDdHJsLCBzZWxlY3RDdHJsKTtcblxuXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuXG4gICAgICBmdW5jdGlvbiBzZXR1cEFzU2luZ2xlKHNjb3BlLCBzZWxlY3RFbGVtZW50LCBuZ01vZGVsQ3RybCwgc2VsZWN0Q3RybCkge1xuICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHZpZXdWYWx1ZSA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XG5cbiAgICAgICAgICBpZiAoc2VsZWN0Q3RybC5oYXNPcHRpb24odmlld1ZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKHVua25vd25PcHRpb24ucGFyZW50KCkpIHVua25vd25PcHRpb24ucmVtb3ZlKCk7XG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50LnZhbCh2aWV3VmFsdWUpO1xuICAgICAgICAgICAgaWYgKHZpZXdWYWx1ZSA9PT0gJycpIGVtcHR5T3B0aW9uLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7IC8vIHRvIG1ha2UgSUU5IGhhcHB5XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpc1VuZGVmaW5lZCh2aWV3VmFsdWUpICYmIGVtcHR5T3B0aW9uKSB7XG4gICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQudmFsKCcnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNlbGVjdEN0cmwucmVuZGVyVW5rbm93bk9wdGlvbih2aWV3VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3RFbGVtZW50Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodW5rbm93bk9wdGlvbi5wYXJlbnQoKSkgdW5rbm93bk9wdGlvbi5yZW1vdmUoKTtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoc2VsZWN0RWxlbWVudC52YWwoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cEFzTXVsdGlwbGUoc2NvcGUsIHNlbGVjdEVsZW1lbnQsIGN0cmwpIHtcbiAgICAgICAgdmFyIGxhc3RWaWV3O1xuICAgICAgICBjdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgaXRlbXMgPSBuZXcgSGFzaE1hcChjdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgICAgIGZvckVhY2goc2VsZWN0RWxlbWVudC5maW5kKCdvcHRpb24nKSwgZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSBpc0RlZmluZWQoaXRlbXMuZ2V0KG9wdGlvbi52YWx1ZSkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHdlIGhhdmUgdG8gZG8gaXQgb24gZWFjaCB3YXRjaCBzaW5jZSBuZ01vZGVsIHdhdGNoZXMgcmVmZXJlbmNlLCBidXRcbiAgICAgICAgLy8gd2UgbmVlZCB0byB3b3JrIG9mIGFuIGFycmF5LCBzbyB3ZSBuZWVkIHRvIHNlZSBpZiBhbnl0aGluZyB3YXMgaW5zZXJ0ZWQvcmVtb3ZlZFxuICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gc2VsZWN0TXVsdGlwbGVXYXRjaCgpIHtcbiAgICAgICAgICBpZiAoIWVxdWFscyhsYXN0VmlldywgY3RybC4kdmlld1ZhbHVlKSkge1xuICAgICAgICAgICAgbGFzdFZpZXcgPSBzaGFsbG93Q29weShjdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgICAgICAgY3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzZWxlY3RFbGVtZW50Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgICAgICAgIGZvckVhY2goc2VsZWN0RWxlbWVudC5maW5kKCdvcHRpb24nKSwgZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBhcnJheS5wdXNoKG9wdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKGFycmF5KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwQXNPcHRpb25zKHNjb3BlLCBzZWxlY3RFbGVtZW50LCBjdHJsKSB7XG4gICAgICAgIHZhciBtYXRjaDtcblxuICAgICAgICBpZiAoIShtYXRjaCA9IG9wdGlvbnNFeHAubWF0Y2goTkdfT1BUSU9OU19SRUdFWFApKSkge1xuICAgICAgICAgIHRocm93IG5nT3B0aW9uc01pbkVycignaWV4cCcsXG4gICAgICAgICAgICBcIkV4cGVjdGVkIGV4cHJlc3Npb24gaW4gZm9ybSBvZiBcIiArXG4gICAgICAgICAgICBcIidfc2VsZWN0XyAoYXMgX2xhYmVsXyk/IGZvciAoX2tleV8sKT9fdmFsdWVfIGluIF9jb2xsZWN0aW9uXydcIiArXG4gICAgICAgICAgICBcIiBidXQgZ290ICd7MH0nLiBFbGVtZW50OiB7MX1cIixcbiAgICAgICAgICAgIG9wdGlvbnNFeHAsIHN0YXJ0aW5nVGFnKHNlbGVjdEVsZW1lbnQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkaXNwbGF5Rm4gPSAkcGFyc2UobWF0Y2hbMl0gfHwgbWF0Y2hbMV0pLFxuICAgICAgICAgICAgdmFsdWVOYW1lID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNl0sXG4gICAgICAgICAgICBzZWxlY3RBcyA9IC8gYXMgLy50ZXN0KG1hdGNoWzBdKSAmJiBtYXRjaFsxXSxcbiAgICAgICAgICAgIHNlbGVjdEFzRm4gPSBzZWxlY3RBcyA/ICRwYXJzZShzZWxlY3RBcykgOiBudWxsLFxuICAgICAgICAgICAga2V5TmFtZSA9IG1hdGNoWzVdLFxuICAgICAgICAgICAgZ3JvdXBCeUZuID0gJHBhcnNlKG1hdGNoWzNdIHx8ICcnKSxcbiAgICAgICAgICAgIHZhbHVlRm4gPSAkcGFyc2UobWF0Y2hbMl0gPyBtYXRjaFsxXSA6IHZhbHVlTmFtZSksXG4gICAgICAgICAgICB2YWx1ZXNGbiA9ICRwYXJzZShtYXRjaFs3XSksXG4gICAgICAgICAgICB0cmFjayA9IG1hdGNoWzhdLFxuICAgICAgICAgICAgdHJhY2tGbiA9IHRyYWNrID8gJHBhcnNlKG1hdGNoWzhdKSA6IG51bGwsXG4gICAgICAgICAgICB0cmFja0tleXNDYWNoZSA9IHt9LFxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhbiBhcnJheSBvZiBhcnJheSBvZiBleGlzdGluZyBvcHRpb24gZ3JvdXBzIGluIERPTS5cbiAgICAgICAgICAgIC8vIFdlIHRyeSB0byByZXVzZSB0aGVzZSBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgLy8gLSBvcHRpb25Hcm91cHNDYWNoZVswXSBpcyB0aGUgb3B0aW9ucyB3aXRoIG5vIG9wdGlvbiBncm91cFxuICAgICAgICAgICAgLy8gLSBvcHRpb25Hcm91cHNDYWNoZVs/XVswXSBpcyB0aGUgcGFyZW50OiBlaXRoZXIgdGhlIFNFTEVDVCBvciBPUFRHUk9VUCBlbGVtZW50XG4gICAgICAgICAgICBvcHRpb25Hcm91cHNDYWNoZSA9IFtbe2VsZW1lbnQ6IHNlbGVjdEVsZW1lbnQsIGxhYmVsOicnfV1dLFxuICAgICAgICAgICAgLy9yZS11c2FibGUgb2JqZWN0IHRvIHJlcHJlc2VudCBvcHRpb24ncyBsb2NhbHNcbiAgICAgICAgICAgIGxvY2FscyA9IHt9O1xuXG4gICAgICAgIGlmIChudWxsT3B0aW9uKSB7XG4gICAgICAgICAgLy8gY29tcGlsZSB0aGUgZWxlbWVudCBzaW5jZSB0aGVyZSBtaWdodCBiZSBiaW5kaW5ncyBpbiBpdFxuICAgICAgICAgICRjb21waWxlKG51bGxPcHRpb24pKHNjb3BlKTtcblxuICAgICAgICAgIC8vIHJlbW92ZSB0aGUgY2xhc3MsIHdoaWNoIGlzIGFkZGVkIGF1dG9tYXRpY2FsbHkgYmVjYXVzZSB3ZSByZWNvbXBpbGUgdGhlIGVsZW1lbnQgYW5kIGl0XG4gICAgICAgICAgLy8gYmVjb21lcyB0aGUgY29tcGlsYXRpb24gcm9vdFxuICAgICAgICAgIG51bGxPcHRpb24ucmVtb3ZlQ2xhc3MoJ25nLXNjb3BlJyk7XG5cbiAgICAgICAgICAvLyB3ZSBuZWVkIHRvIHJlbW92ZSBpdCBiZWZvcmUgY2FsbGluZyBzZWxlY3RFbGVtZW50LmVtcHR5KCkgYmVjYXVzZSBvdGhlcndpc2UgSUUgd2lsbFxuICAgICAgICAgIC8vIHJlbW92ZSB0aGUgbGFiZWwgZnJvbSB0aGUgZWxlbWVudC4gd3RmP1xuICAgICAgICAgIG51bGxPcHRpb24ucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGVhciBjb250ZW50cywgd2UnbGwgYWRkIHdoYXQncyBuZWVkZWQgYmFzZWQgb24gdGhlIG1vZGVsXG4gICAgICAgIHNlbGVjdEVsZW1lbnQuZW1wdHkoKTtcblxuICAgICAgICBzZWxlY3RFbGVtZW50Lm9uKCdjaGFuZ2UnLCBzZWxlY3Rpb25DaGFuZ2VkKTtcblxuICAgICAgICBjdHJsLiRyZW5kZXIgPSByZW5kZXI7XG5cbiAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbih2YWx1ZXNGbiwgc2NoZWR1bGVSZW5kZXJpbmcpO1xuICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGdldExhYmVscywgc2NoZWR1bGVSZW5kZXJpbmcpO1xuXG4gICAgICAgIGlmIChtdWx0aXBsZSkge1xuICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKSB7IHJldHVybiBjdHJsLiRtb2RlbFZhbHVlOyB9LCBzY2hlZHVsZVJlbmRlcmluZyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAgICAgICBmdW5jdGlvbiBjYWxsRXhwcmVzc2lvbihleHByRm4sIGtleSwgdmFsdWUpIHtcbiAgICAgICAgICBsb2NhbHNbdmFsdWVOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgIGlmIChrZXlOYW1lKSBsb2NhbHNba2V5TmFtZV0gPSBrZXk7XG4gICAgICAgICAgcmV0dXJuIGV4cHJGbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdGlvbkNoYW5nZWQoKSB7XG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB2YWx1ZXNGbihzY29wZSkgfHwgW107XG4gICAgICAgICAgICB2YXIgdmlld1ZhbHVlO1xuICAgICAgICAgICAgaWYgKG11bHRpcGxlKSB7XG4gICAgICAgICAgICAgIHZpZXdWYWx1ZSA9IFtdO1xuICAgICAgICAgICAgICBmb3JFYWNoKHNlbGVjdEVsZW1lbnQudmFsKCksIGZ1bmN0aW9uKHNlbGVjdGVkS2V5KSB7XG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZEtleSA9IHRyYWNrRm4gPyB0cmFja0tleXNDYWNoZVtzZWxlY3RlZEtleV0gOiBzZWxlY3RlZEtleTtcbiAgICAgICAgICAgICAgICB2aWV3VmFsdWUucHVzaChnZXRWaWV3VmFsdWUoc2VsZWN0ZWRLZXksIGNvbGxlY3Rpb25bc2VsZWN0ZWRLZXldKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkS2V5ID0gdHJhY2tGbiA/IHRyYWNrS2V5c0NhY2hlW3NlbGVjdEVsZW1lbnQudmFsKCldIDogc2VsZWN0RWxlbWVudC52YWwoKTtcbiAgICAgICAgICAgICAgdmlld1ZhbHVlID0gZ2V0Vmlld1ZhbHVlKHNlbGVjdGVkS2V5LCBjb2xsZWN0aW9uW3NlbGVjdGVkS2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHJsLiRzZXRWaWV3VmFsdWUodmlld1ZhbHVlKTtcbiAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Vmlld1ZhbHVlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICBpZiAoa2V5ID09PSAnPycpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZpZXdWYWx1ZUZuID0gc2VsZWN0QXNGbiA/IHNlbGVjdEFzRm4gOiB2YWx1ZUZuO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uKHZpZXdWYWx1ZUZuLCBrZXksIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMYWJlbHMoKSB7XG4gICAgICAgICAgdmFyIHZhbHVlcyA9IHZhbHVlc0ZuKHNjb3BlKTtcbiAgICAgICAgICB2YXIgdG9EaXNwbGF5O1xuICAgICAgICAgIGlmICh2YWx1ZXMgJiYgaXNBcnJheSh2YWx1ZXMpKSB7XG4gICAgICAgICAgICB0b0Rpc3BsYXkgPSBuZXcgQXJyYXkodmFsdWVzLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB2YWx1ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICB0b0Rpc3BsYXlbaV0gPSBjYWxsRXhwcmVzc2lvbihkaXNwbGF5Rm4sIGksIHZhbHVlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG9EaXNwbGF5O1xuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVzKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBBZGQgYSB0ZXN0IGZvciB0aGlzIGNhc2VcbiAgICAgICAgICAgIHRvRGlzcGxheSA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgICAgIHRvRGlzcGxheVtwcm9wXSA9IGNhbGxFeHByZXNzaW9uKGRpc3BsYXlGbiwgcHJvcCwgdmFsdWVzW3Byb3BdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdG9EaXNwbGF5O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlSXNTZWxlY3RlZEZuKHZpZXdWYWx1ZSkge1xuICAgICAgICAgIHZhciBzZWxlY3RlZFNldDtcbiAgICAgICAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgICAgICAgIGlmICh0cmFja0ZuICYmIGlzQXJyYXkodmlld1ZhbHVlKSkge1xuXG4gICAgICAgICAgICAgIHNlbGVjdGVkU2V0ID0gbmV3IEhhc2hNYXAoW10pO1xuICAgICAgICAgICAgICBmb3IgKHZhciB0cmFja0luZGV4ID0gMDsgdHJhY2tJbmRleCA8IHZpZXdWYWx1ZS5sZW5ndGg7IHRyYWNrSW5kZXgrKykge1xuICAgICAgICAgICAgICAgIC8vIHRyYWNraW5nIGJ5IGtleVxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU2V0LnB1dChjYWxsRXhwcmVzc2lvbih0cmFja0ZuLCBudWxsLCB2aWV3VmFsdWVbdHJhY2tJbmRleF0pLCB0cnVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTZXQgPSBuZXcgSGFzaE1hcCh2aWV3VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodHJhY2tGbikge1xuICAgICAgICAgICAgdmlld1ZhbHVlID0gY2FsbEV4cHJlc3Npb24odHJhY2tGbiwgbnVsbCwgdmlld1ZhbHVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gaXNTZWxlY3RlZChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgY29tcGFyZVZhbHVlRm47XG4gICAgICAgICAgICBpZiAodHJhY2tGbikge1xuICAgICAgICAgICAgICBjb21wYXJlVmFsdWVGbiA9IHRyYWNrRm47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdEFzRm4pIHtcbiAgICAgICAgICAgICAgY29tcGFyZVZhbHVlRm4gPSBzZWxlY3RBc0ZuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29tcGFyZVZhbHVlRm4gPSB2YWx1ZUZuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChzZWxlY3RlZFNldC5yZW1vdmUoY2FsbEV4cHJlc3Npb24oY29tcGFyZVZhbHVlRm4sIGtleSwgdmFsdWUpKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gdmlld1ZhbHVlID09PSBjYWxsRXhwcmVzc2lvbihjb21wYXJlVmFsdWVGbiwga2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVuZGVyaW5nKCkge1xuICAgICAgICAgIGlmICghcmVuZGVyU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QocmVuZGVyKTtcbiAgICAgICAgICAgIHJlbmRlclNjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbmV3IGxhYmVsTWFwIGlzIGNyZWF0ZWQgd2l0aCBlYWNoIHJlbmRlci5cbiAgICAgICAgICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZm9yIGVhY2ggZXhpc3Rpbmcgb3B0aW9uIHdpdGggYWRkZWQ9ZmFsc2UsXG4gICAgICAgICAqIGFuZCBlYWNoIG5ldyBvcHRpb24gd2l0aCBhZGRlZD10cnVlLlxuICAgICAgICAgKiAtIExhYmVscyB0aGF0IGFyZSBwYXNzZWQgdG8gdGhpcyBtZXRob2QgdHdpY2UsXG4gICAgICAgICAqIChvbmNlIHdpdGggYWRkZWQ9dHJ1ZSBhbmQgb25jZSB3aXRoIGFkZGVkPWZhbHNlKSB3aWxsIGVuZCB1cCB3aXRoIGEgdmFsdWUgb2YgMCwgYW5kXG4gICAgICAgICAqIHdpbGwgY2F1c2Ugbm8gY2hhbmdlIHRvIGhhcHBlbiB0byB0aGUgY29ycmVzcG9uZGluZyBvcHRpb24uXG4gICAgICAgICAqIC0gTGFiZWxzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGlzIG1ldGhvZCBvbmx5IG9uY2Ugd2l0aCBhZGRlZD1mYWxzZSB3aWxsIGVuZCB1cCB3aXRoIGFcbiAgICAgICAgICogdmFsdWUgb2YgLTEgYW5kIHdpbGwgZXZlbnR1YWxseSBiZSBwYXNzZWQgdG8gc2VsZWN0Q3RybC5yZW1vdmVPcHRpb24oKVxuICAgICAgICAgKiAtIExhYmVscyB0aGF0IGFyZSBwYXNzZWQgdG8gdGhpcyBtZXRob2Qgb25seSBvbmNlIHdpdGggYWRkZWQ9dHJ1ZSB3aWxsIGVuZCB1cCB3aXRoIGFcbiAgICAgICAgICogdmFsdWUgb2YgMSBhbmQgd2lsbCBldmVudHVhbGx5IGJlIHBhc3NlZCB0byBzZWxlY3RDdHJsLmFkZE9wdGlvbigpXG4gICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUxhYmVsTWFwKGxhYmVsTWFwLCBsYWJlbCwgYWRkZWQpIHtcbiAgICAgICAgICBsYWJlbE1hcFtsYWJlbF0gPSBsYWJlbE1hcFtsYWJlbF0gfHwgMDtcbiAgICAgICAgICBsYWJlbE1hcFtsYWJlbF0gKz0gKGFkZGVkID8gMSA6IC0xKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICByZW5kZXJTY2hlZHVsZWQgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIFRlbXBvcmFyeSBsb2NhdGlvbiBmb3IgdGhlIG9wdGlvbiBncm91cHMgYmVmb3JlIHdlIHJlbmRlciB0aGVtXG4gICAgICAgICAgdmFyIG9wdGlvbkdyb3VwcyA9IHsnJzpbXX0sXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3VwTmFtZXMgPSBbJyddLFxuICAgICAgICAgICAgICBvcHRpb25Hcm91cE5hbWUsXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3VwLFxuICAgICAgICAgICAgICBvcHRpb24sXG4gICAgICAgICAgICAgIGV4aXN0aW5nUGFyZW50LCBleGlzdGluZ09wdGlvbnMsIGV4aXN0aW5nT3B0aW9uLFxuICAgICAgICAgICAgICB2aWV3VmFsdWUgPSBjdHJsLiR2aWV3VmFsdWUsXG4gICAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlc0ZuKHNjb3BlKSB8fCBbXSxcbiAgICAgICAgICAgICAga2V5cyA9IGtleU5hbWUgPyBzb3J0ZWRLZXlzKHZhbHVlcykgOiB2YWx1ZXMsXG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgIGdyb3VwTGVuZ3RoLCBsZW5ndGgsXG4gICAgICAgICAgICAgIGdyb3VwSW5kZXgsIGluZGV4LFxuICAgICAgICAgICAgICBsYWJlbE1hcCA9IHt9LFxuICAgICAgICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgICAgICAgaXNTZWxlY3RlZCA9IGNyZWF0ZUlzU2VsZWN0ZWRGbih2aWV3VmFsdWUpLFxuICAgICAgICAgICAgICBhbnlTZWxlY3RlZCA9IGZhbHNlLFxuICAgICAgICAgICAgICBsYXN0RWxlbWVudCxcbiAgICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgIG9wdGlvbklkO1xuXG4gICAgICAgICAgdHJhY2tLZXlzQ2FjaGUgPSB7fTtcblxuICAgICAgICAgIC8vIFdlIG5vdyBidWlsZCB1cCB0aGUgbGlzdCBvZiBvcHRpb25zIHdlIG5lZWQgKHdlIG1lcmdlIGxhdGVyKVxuICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBsZW5ndGggPSBrZXlzLmxlbmd0aCwgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGtleSA9IGluZGV4O1xuICAgICAgICAgICAgaWYgKGtleU5hbWUpIHtcbiAgICAgICAgICAgICAga2V5ID0ga2V5c1tpbmRleF07XG4gICAgICAgICAgICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnJCcpIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZXNba2V5XTtcblxuICAgICAgICAgICAgb3B0aW9uR3JvdXBOYW1lID0gY2FsbEV4cHJlc3Npb24oZ3JvdXBCeUZuLCBrZXksIHZhbHVlKSB8fCAnJztcbiAgICAgICAgICAgIGlmICghKG9wdGlvbkdyb3VwID0gb3B0aW9uR3JvdXBzW29wdGlvbkdyb3VwTmFtZV0pKSB7XG4gICAgICAgICAgICAgIG9wdGlvbkdyb3VwID0gb3B0aW9uR3JvdXBzW29wdGlvbkdyb3VwTmFtZV0gPSBbXTtcbiAgICAgICAgICAgICAgb3B0aW9uR3JvdXBOYW1lcy5wdXNoKG9wdGlvbkdyb3VwTmFtZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGVjdGVkID0gaXNTZWxlY3RlZChrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIGFueVNlbGVjdGVkID0gYW55U2VsZWN0ZWQgfHwgc2VsZWN0ZWQ7XG5cbiAgICAgICAgICAgIGxhYmVsID0gY2FsbEV4cHJlc3Npb24oZGlzcGxheUZuLCBrZXksIHZhbHVlKTsgLy8gd2hhdCB3aWxsIGJlIHNlZW4gYnkgdGhlIHVzZXJcblxuICAgICAgICAgICAgLy8gZG9pbmcgZGlzcGxheUZuKHNjb3BlLCBsb2NhbHMpIHx8ICcnIG92ZXJ3cml0ZXMgemVybyB2YWx1ZXNcbiAgICAgICAgICAgIGxhYmVsID0gaXNEZWZpbmVkKGxhYmVsKSA/IGxhYmVsIDogJyc7XG4gICAgICAgICAgICBvcHRpb25JZCA9IHRyYWNrRm4gPyB0cmFja0ZuKHNjb3BlLCBsb2NhbHMpIDogKGtleU5hbWUgPyBrZXlzW2luZGV4XSA6IGluZGV4KTtcbiAgICAgICAgICAgIGlmICh0cmFja0ZuKSB7XG4gICAgICAgICAgICAgIHRyYWNrS2V5c0NhY2hlW29wdGlvbklkXSA9IGtleTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3B0aW9uR3JvdXAucHVzaCh7XG4gICAgICAgICAgICAgIC8vIGVpdGhlciB0aGUgaW5kZXggaW50byBhcnJheSBvciBrZXkgZnJvbSBvYmplY3RcbiAgICAgICAgICAgICAgaWQ6IG9wdGlvbklkLFxuICAgICAgICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZCAgICAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIGJlIHNlbGVjdGVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFtdWx0aXBsZSkge1xuICAgICAgICAgICAgaWYgKG51bGxPcHRpb24gfHwgdmlld1ZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIC8vIGluc2VydCBudWxsIG9wdGlvbiBpZiB3ZSBoYXZlIGEgcGxhY2Vob2xkZXIsIG9yIHRoZSBtb2RlbCBpcyBudWxsXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3Vwc1snJ10udW5zaGlmdCh7aWQ6JycsIGxhYmVsOicnLCBzZWxlY3RlZDohYW55U2VsZWN0ZWR9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFueVNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgIC8vIG9wdGlvbiBjb3VsZCBub3QgYmUgZm91bmQsIHdlIGhhdmUgdG8gaW5zZXJ0IHRoZSB1bmRlZmluZWQgaXRlbVxuICAgICAgICAgICAgICBvcHRpb25Hcm91cHNbJyddLnVuc2hpZnQoe2lkOic/JywgbGFiZWw6JycsIHNlbGVjdGVkOnRydWV9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBOb3cgd2UgbmVlZCB0byB1cGRhdGUgdGhlIGxpc3Qgb2YgRE9NIG5vZGVzIHRvIG1hdGNoIHRoZSBvcHRpb25Hcm91cHMgd2UgY29tcHV0ZWQgYWJvdmVcbiAgICAgICAgICBmb3IgKGdyb3VwSW5kZXggPSAwLCBncm91cExlbmd0aCA9IG9wdGlvbkdyb3VwTmFtZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgZ3JvdXBJbmRleCA8IGdyb3VwTGVuZ3RoO1xuICAgICAgICAgICAgICAgZ3JvdXBJbmRleCsrKSB7XG4gICAgICAgICAgICAvLyBjdXJyZW50IG9wdGlvbiBncm91cCBuYW1lIG9yICcnIGlmIG5vIGdyb3VwXG4gICAgICAgICAgICBvcHRpb25Hcm91cE5hbWUgPSBvcHRpb25Hcm91cE5hbWVzW2dyb3VwSW5kZXhdO1xuXG4gICAgICAgICAgICAvLyBsaXN0IG9mIG9wdGlvbnMgZm9yIHRoYXQgZ3JvdXAuIChmaXJzdCBpdGVtIGhhcyB0aGUgcGFyZW50KVxuICAgICAgICAgICAgb3B0aW9uR3JvdXAgPSBvcHRpb25Hcm91cHNbb3B0aW9uR3JvdXBOYW1lXTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwc0NhY2hlLmxlbmd0aCA8PSBncm91cEluZGV4KSB7XG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZ3JvdyB0aGUgb3B0aW9uR3JvdXBzXG4gICAgICAgICAgICAgIGV4aXN0aW5nUGFyZW50ID0ge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IG9wdEdyb3VwVGVtcGxhdGUuY2xvbmUoKS5hdHRyKCdsYWJlbCcsIG9wdGlvbkdyb3VwTmFtZSksXG4gICAgICAgICAgICAgICAgbGFiZWw6IG9wdGlvbkdyb3VwLmxhYmVsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGV4aXN0aW5nT3B0aW9ucyA9IFtleGlzdGluZ1BhcmVudF07XG4gICAgICAgICAgICAgIG9wdGlvbkdyb3Vwc0NhY2hlLnB1c2goZXhpc3RpbmdPcHRpb25zKTtcbiAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmQoZXhpc3RpbmdQYXJlbnQuZWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBleGlzdGluZ09wdGlvbnMgPSBvcHRpb25Hcm91cHNDYWNoZVtncm91cEluZGV4XTtcbiAgICAgICAgICAgICAgZXhpc3RpbmdQYXJlbnQgPSBleGlzdGluZ09wdGlvbnNbMF07ICAvLyBlaXRoZXIgU0VMRUNUIChubyBncm91cCkgb3IgT1BUR1JPVVAgZWxlbWVudFxuXG4gICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgT1BUR1JPVVAgbGFiZWwgaWYgbm90IHRoZSBzYW1lLlxuICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdQYXJlbnQubGFiZWwgIT0gb3B0aW9uR3JvdXBOYW1lKSB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdQYXJlbnQuZWxlbWVudC5hdHRyKCdsYWJlbCcsIGV4aXN0aW5nUGFyZW50LmxhYmVsID0gb3B0aW9uR3JvdXBOYW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXN0RWxlbWVudCA9IG51bGw7ICAvLyBzdGFydCBhdCB0aGUgYmVnaW5uaW5nXG4gICAgICAgICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb3B0aW9uR3JvdXAubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICBvcHRpb24gPSBvcHRpb25Hcm91cFtpbmRleF07XG4gICAgICAgICAgICAgIGlmICgoZXhpc3RpbmdPcHRpb24gPSBleGlzdGluZ09wdGlvbnNbaW5kZXggKyAxXSkpIHtcbiAgICAgICAgICAgICAgICAvLyByZXVzZSBlbGVtZW50c1xuICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50ID0gZXhpc3RpbmdPcHRpb24uZWxlbWVudDtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdPcHRpb24ubGFiZWwgIT09IG9wdGlvbi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlTGFiZWxNYXAobGFiZWxNYXAsIGV4aXN0aW5nT3B0aW9uLmxhYmVsLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVMYWJlbE1hcChsYWJlbE1hcCwgb3B0aW9uLmxhYmVsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LnRleHQoZXhpc3RpbmdPcHRpb24ubGFiZWwgPSBvcHRpb24ubGFiZWwpO1xuICAgICAgICAgICAgICAgICAgbGFzdEVsZW1lbnQucHJvcCgnbGFiZWwnLCBleGlzdGluZ09wdGlvbi5sYWJlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ09wdGlvbi5pZCAhPT0gb3B0aW9uLmlkKSB7XG4gICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudC52YWwoZXhpc3RpbmdPcHRpb24uaWQgPSBvcHRpb24uaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBsYXN0RWxlbWVudC5wcm9wKCdzZWxlY3RlZCcpIHByb3ZpZGVkIGJ5IGpRdWVyeSBoYXMgc2lkZS1lZmZlY3RzXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RFbGVtZW50WzBdLnNlbGVjdGVkICE9PSBvcHRpb24uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LnByb3AoJ3NlbGVjdGVkJywgKGV4aXN0aW5nT3B0aW9uLnNlbGVjdGVkID0gb3B0aW9uLnNlbGVjdGVkKSk7XG4gICAgICAgICAgICAgICAgICBpZiAobXNpZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZWUgIzc2OTJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHNlbGVjdGVkIGl0ZW0gd291bGRuJ3QgdmlzdWFsbHkgdXBkYXRlIG9uIElFIHdpdGhvdXQgdGhpcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGVzdGVkIG9uIFdpbjc6IElFOSwgSUUxMCBhbmQgSUUxMS4gRnV0dXJlIElFcyBzaG91bGQgYmUgdGVzdGVkIGFzIHdlbGxcbiAgICAgICAgICAgICAgICAgICAgbGFzdEVsZW1lbnQucHJvcCgnc2VsZWN0ZWQnLCBleGlzdGluZ09wdGlvbi5zZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGdyb3cgZWxlbWVudHNcblxuICAgICAgICAgICAgICAgIC8vIGlmIGl0J3MgYSBudWxsIG9wdGlvblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24uaWQgPT09ICcnICYmIG51bGxPcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgIC8vIHB1dCBiYWNrIHRoZSBwcmUtY29tcGlsZWQgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IG51bGxPcHRpb247XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIGpRdWVyeSh2MS40LjIpIEJ1ZzogV2Ugc2hvdWxkIGJlIGFibGUgdG8gY2hhaW4gdGhlIG1ldGhvZCBjYWxscywgYnV0XG4gICAgICAgICAgICAgICAgICAvLyBpbiB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5IG9uIHNvbWUgYnJvd3NlciB0aGUgLnRleHQoKSByZXR1cm5zIGEgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAvLyByYXRoZXIgdGhlbiB0aGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgIChlbGVtZW50ID0gb3B0aW9uVGVtcGxhdGUuY2xvbmUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAudmFsKG9wdGlvbi5pZClcbiAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnc2VsZWN0ZWQnLCBvcHRpb24uc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NlbGVjdGVkJywgb3B0aW9uLnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdsYWJlbCcsIG9wdGlvbi5sYWJlbClcbiAgICAgICAgICAgICAgICAgICAgICAudGV4dChvcHRpb24ubGFiZWwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGV4aXN0aW5nT3B0aW9ucy5wdXNoKGV4aXN0aW5nT3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogb3B0aW9uLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBpZDogb3B0aW9uLmlkLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogb3B0aW9uLnNlbGVjdGVkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdXBkYXRlTGFiZWxNYXAobGFiZWxNYXAsIG9wdGlvbi5sYWJlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudC5hZnRlcihlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQYXJlbnQuZWxlbWVudC5hcHBlbmQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSBleGNlc3NpdmUgT1BUSU9OcyBpbiBhIGdyb3VwXG4gICAgICAgICAgICBpbmRleCsrOyAvLyBpbmNyZW1lbnQgc2luY2UgdGhlIGV4aXN0aW5nT3B0aW9uc1swXSBpcyBwYXJlbnQgZWxlbWVudCBub3QgT1BUSU9OXG4gICAgICAgICAgICB3aGlsZSAoZXhpc3RpbmdPcHRpb25zLmxlbmd0aCA+IGluZGV4KSB7XG4gICAgICAgICAgICAgIG9wdGlvbiA9IGV4aXN0aW5nT3B0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgdXBkYXRlTGFiZWxNYXAobGFiZWxNYXAsIG9wdGlvbi5sYWJlbCwgZmFsc2UpO1xuICAgICAgICAgICAgICBvcHRpb24uZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gcmVtb3ZlIGFueSBleGNlc3NpdmUgT1BUR1JPVVBzIGZyb20gc2VsZWN0XG4gICAgICAgICAgd2hpbGUgKG9wdGlvbkdyb3Vwc0NhY2hlLmxlbmd0aCA+IGdyb3VwSW5kZXgpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbGwgdGhlIGxhYmVscyBpbiB0aGUgb3B0aW9uIGdyb3VwXG4gICAgICAgICAgICBvcHRpb25Hcm91cCA9IG9wdGlvbkdyb3Vwc0NhY2hlLnBvcCgpO1xuICAgICAgICAgICAgZm9yIChpbmRleCA9IDE7IGluZGV4IDwgb3B0aW9uR3JvdXAubGVuZ3RoOyArK2luZGV4KSB7XG4gICAgICAgICAgICAgIHVwZGF0ZUxhYmVsTWFwKGxhYmVsTWFwLCBvcHRpb25Hcm91cFtpbmRleF0ubGFiZWwsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbkdyb3VwWzBdLmVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvckVhY2gobGFiZWxNYXAsIGZ1bmN0aW9uKGNvdW50LCBsYWJlbCkge1xuICAgICAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICAgICAgICBzZWxlY3RDdHJsLmFkZE9wdGlvbihsYWJlbCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50IDwgMCkge1xuICAgICAgICAgICAgICBzZWxlY3RDdHJsLnJlbW92ZU9wdGlvbihsYWJlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XTtcblxudmFyIG9wdGlvbkRpcmVjdGl2ZSA9IFsnJGludGVycG9sYXRlJywgZnVuY3Rpb24oJGludGVycG9sYXRlKSB7XG4gIHZhciBudWxsU2VsZWN0Q3RybCA9IHtcbiAgICBhZGRPcHRpb246IG5vb3AsXG4gICAgcmVtb3ZlT3B0aW9uOiBub29wXG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHByaW9yaXR5OiAxMDAsXG4gICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xuICAgICAgaWYgKGlzVW5kZWZpbmVkKGF0dHIudmFsdWUpKSB7XG4gICAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKGVsZW1lbnQudGV4dCgpLCB0cnVlKTtcbiAgICAgICAgaWYgKCFpbnRlcnBvbGF0ZUZuKSB7XG4gICAgICAgICAgYXR0ci4kc2V0KCd2YWx1ZScsIGVsZW1lbnQudGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgdmFyIHNlbGVjdEN0cmxOYW1lID0gJyRzZWxlY3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHBhcmVudCA9IGVsZW1lbnQucGFyZW50KCksXG4gICAgICAgICAgICBzZWxlY3RDdHJsID0gcGFyZW50LmRhdGEoc2VsZWN0Q3RybE5hbWUpIHx8XG4gICAgICAgICAgICAgIHBhcmVudC5wYXJlbnQoKS5kYXRhKHNlbGVjdEN0cmxOYW1lKTsgLy8gaW4gY2FzZSB3ZSBhcmUgaW4gb3B0Z3JvdXBcblxuICAgICAgICBpZiAoIXNlbGVjdEN0cmwgfHwgIXNlbGVjdEN0cmwuZGF0YWJvdW5kKSB7XG4gICAgICAgICAgc2VsZWN0Q3RybCA9IG51bGxTZWxlY3RDdHJsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGludGVycG9sYXRlRm4pIHtcbiAgICAgICAgICBzY29wZS4kd2F0Y2goaW50ZXJwb2xhdGVGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVXYXRjaEFjdGlvbihuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICAgICAgYXR0ci4kc2V0KCd2YWx1ZScsIG5ld1ZhbCk7XG4gICAgICAgICAgICBpZiAob2xkVmFsICE9PSBuZXdWYWwpIHtcbiAgICAgICAgICAgICAgc2VsZWN0Q3RybC5yZW1vdmVPcHRpb24ob2xkVmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGVjdEN0cmwuYWRkT3B0aW9uKG5ld1ZhbCwgZWxlbWVudCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZWN0Q3RybC5hZGRPcHRpb24oYXR0ci52YWx1ZSwgZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGVjdEN0cmwucmVtb3ZlT3B0aW9uKGF0dHIudmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbnZhciBzdHlsZURpcmVjdGl2ZSA9IHZhbHVlRm4oe1xuICByZXN0cmljdDogJ0UnLFxuICB0ZXJtaW5hbDogZmFsc2Vcbn0pO1xuXG52YXIgcmVxdWlyZWREaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XG4gICAgICBhdHRyLnJlcXVpcmVkID0gdHJ1ZTsgLy8gZm9yY2UgdHJ1dGh5IGluIGNhc2Ugd2UgYXJlIG9uIG5vbiBpbnB1dCBlbGVtZW50XG5cbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMucmVxdWlyZWQgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICFhdHRyLnJlcXVpcmVkIHx8ICFjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSk7XG4gICAgICB9O1xuXG4gICAgICBhdHRyLiRvYnNlcnZlKCdyZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufTtcblxuXG52YXIgcGF0dGVybkRpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIHJlZ2V4cCwgcGF0dGVybkV4cCA9IGF0dHIubmdQYXR0ZXJuIHx8IGF0dHIucGF0dGVybjtcbiAgICAgIGF0dHIuJG9ic2VydmUoJ3BhdHRlcm4nLCBmdW5jdGlvbihyZWdleCkge1xuICAgICAgICBpZiAoaXNTdHJpbmcocmVnZXgpICYmIHJlZ2V4Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZWdleCA9IG5ldyBSZWdFeHAoJ14nICsgcmVnZXggKyAnJCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlZ2V4ICYmICFyZWdleC50ZXN0KSB7XG4gICAgICAgICAgdGhyb3cgbWluRXJyKCduZ1BhdHRlcm4nKSgnbm9yZWdleHAnLFxuICAgICAgICAgICAgJ0V4cGVjdGVkIHswfSB0byBiZSBhIFJlZ0V4cCBidXQgd2FzIHsxfS4gRWxlbWVudDogezJ9JywgcGF0dGVybkV4cCxcbiAgICAgICAgICAgIHJlZ2V4LCBzdGFydGluZ1RhZyhlbG0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2V4cCA9IHJlZ2V4IHx8IHVuZGVmaW5lZDtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLnBhdHRlcm4gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgaXNVbmRlZmluZWQocmVnZXhwKSB8fCByZWdleHAudGVzdCh2YWx1ZSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn07XG5cblxudmFyIG1heGxlbmd0aERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIG1heGxlbmd0aCA9IC0xO1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWF4bGVuZ3RoJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIGludFZhbCA9IGludCh2YWx1ZSk7XG4gICAgICAgIG1heGxlbmd0aCA9IGlzTmFOKGludFZhbCkgPyAtMSA6IGludFZhbDtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgICAgY3RybC4kdmFsaWRhdG9ycy5tYXhsZW5ndGggPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIChtYXhsZW5ndGggPCAwKSB8fCBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgKHZpZXdWYWx1ZS5sZW5ndGggPD0gbWF4bGVuZ3RoKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcblxudmFyIG1pbmxlbmd0aERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIG1pbmxlbmd0aCA9IDA7XG4gICAgICBhdHRyLiRvYnNlcnZlKCdtaW5sZW5ndGgnLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBtaW5sZW5ndGggPSBpbnQodmFsdWUpIHx8IDA7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMubWlubGVuZ3RoID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgdmlld1ZhbHVlLmxlbmd0aCA+PSBtaW5sZW5ndGg7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn07XG5cbiAgaWYgKHdpbmRvdy5hbmd1bGFyLmJvb3RzdHJhcCkge1xuICAgIC8vQW5ndWxhckpTIGlzIGFscmVhZHkgbG9hZGVkLCBzbyB3ZSBjYW4gcmV0dXJuIGhlcmUuLi5cbiAgICBjb25zb2xlLmxvZygnV0FSTklORzogVHJpZWQgdG8gbG9hZCBhbmd1bGFyIG1vcmUgdGhhbiBvbmNlLicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vdHJ5IHRvIGJpbmQgdG8ganF1ZXJ5IG5vdyBzbyB0aGF0IG9uZSBjYW4gd3JpdGUganFMaXRlKGRvY3VtZW50KS5yZWFkeSgpXG4gIC8vYnV0IHdlIHdpbGwgcmViaW5kIG9uIGJvb3RzdHJhcCBhZ2Fpbi5cbiAgYmluZEpRdWVyeSgpO1xuXG4gIHB1Ymxpc2hFeHRlcm5hbEFQSShhbmd1bGFyKTtcblxuICBqcUxpdGUoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXJJbml0KGRvY3VtZW50LCBib290c3RyYXApO1xuICB9KTtcblxufSkod2luZG93LCBkb2N1bWVudCk7XG5cbiF3aW5kb3cuYW5ndWxhci4kJGNzcCgpICYmIHdpbmRvdy5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoJ2hlYWQnKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+QGNoYXJzZXQgXCJVVEYtOFwiO1tuZ1xcXFw6Y2xvYWtdLFtuZy1jbG9ha10sW2RhdGEtbmctY2xvYWtdLFt4LW5nLWNsb2FrXSwubmctY2xvYWssLngtbmctY2xvYWssLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcXFw6Zm9ybXtkaXNwbGF5OmJsb2NrO308L3N0eWxlPicpOyIsIid1c2Ugc3RyaWN0JztcblxuLy8gRGVjbGFyZSBhcHAgbGV2ZWwgbW9kdWxlIHdoaWNoIGRlcGVuZHMgb24gdmlld3MsIGFuZCBjb21wb25lbnRzXG5hbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAgICduZ1JvdXRlJyxcbiAgICAnbmdNYXRlcmlhbCcsXG4gICAgJ2FwcC1jb250cm9sbGVycydcbl0pLlxuY29uZmlnKFsnJG1kVGhlbWluZ1Byb3ZpZGVyJywgZnVuY3Rpb24oJG1kVGhlbWluZ1Byb3ZpZGVyKSB7XG4gIC8vICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG4gIC8vICAgLnByaW1hcnlQYWxldHRlKCdibHVlJylcbiAgLy8gICAud2FyblBhbGV0dGUoJ2luZGlnbycpXG4gIC8vICAgLmFjY2VudFBhbGV0dGUoJ2JsdWUtZ3JleScpO1xufV0pXG4uY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuICAgIC8vICRyb3V0ZVByb3ZpZGVyLm90aGVyd2lzZSh7XG4gICAgLy8gICAgIHJlZGlyZWN0VG86ICcvaG9tZSdcbiAgICAvLyB9KTtcbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvZXZlbnQnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvZXZlbnQuaHRtbCdcbiAgICB9KTtcbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvZXZlbnQtbGlzdCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9ldmVudC1saXN0Lmh0bWwnXG4gICAgfSk7XG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignL3Rlc3QtbWFwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3Rlc3QtbWFwLmh0bWwnXG4gICAgfSk7XG4gICAgLy8gJHJvdXRlUHJvdmlkZXIud2hlbignL21lbnVJdGVtMicsIHtcbiAgICAvLyAgICAgdGVtcGxhdGU6ICc8aDIgbGF5b3V0IGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj5jb250ZW50IGZvciBNZW51SXRlbTI8L2gyPidcbiAgICAvLyB9KTtcbiAgICAvLyAkcm91dGVQcm92aWRlci53aGVuKCcvbWVudUl0ZW0zJywge1xuICAgIC8vICAgICB0ZW1wbGF0ZTogJzxoMiBsYXlvdXQgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPmNvbnRlbnQgZm9yIE1lbnVJdGVtMzwvaDI+J1xuICAgIC8vIH0pO1xuICAgIC8vICRyb3V0ZVByb3ZpZGVyLndoZW4oJy9zZXR0aW5ncycsIHtcbiAgICAvLyAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9zZXR0aW5ncy5odG1sJ1xuICAgIC8vIH0pO1xuICAgIC8vICRyb3V0ZVByb3ZpZGVyLndoZW4oJy91aS1ncmlkLXRlc3QnLCB7XG4gICAgLy8gICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdWktZ3JpZC10ZXN0Lmh0bWwnXG4gICAgLy8gfSk7XG59XSkuXG4vLyBjb25maWcoWyckdHJhbnNsYXRlUHJvdmlkZXInLCBmdW5jdGlvbigkdHJhbnNsYXRlUHJvdmlkZXIpIHtcbiAgICAvLyByZWdpc3RlciBnZXJtYW4gdHJhbnNsYXRpb24gdGFibGVcbi8vICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ2RlJywgXG4vLyAgICAgIHsnR1JFRVRJTkcnOiAnSGFsbG8gV2VsdCEnfVxuLy8gICAgKTtcbi8vICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ2RlJywge1xuLy8gICAgICAgICAgJ1VTRVJOQU1FJzogJ2RlX1VzZXJuYW1lJ1xuLy8gICAgICAgIH0pO1xuLy8gICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygnZGUnLCB7XG4vLyAgICAgICAgICAnUEFTU1dPUkQnOiAnZGVfUGFzc3dvcmQnXG4vLyAgICAgICAgfSk7XG4vLyAgICAkdHJhbnNsYXRlUHJvdmlkZXIudHJhbnNsYXRpb25zKCdkZScsIHtcbi8vICAgICAgICAgICdMT0dJTic6ICdkZV9MT0dJTidcbi8vICAgICAgICB9KTtcbi8vICAgIC8vIHJlZ2lzdGVyIGVuZ2xpc2ggdHJhbnNsYXRpb24gdGFibGVcbi8vICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ2VuJywge1xuLy8gICAgICAnR1JFRVRJTkcnOiAnSGVsbG8gV29ybGQhJ1xuLy8gICAgICAgIH0pO1xuLy8gICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygnZW4nLCB7XG4vLyAgICAgICAgICAnVVNFUk5BTUUnOiAnVXNlcm5hbWUnXG4vLyAgICAgICAgfSk7XG4vLyAgICAkdHJhbnNsYXRlUHJvdmlkZXIudHJhbnNsYXRpb25zKCdlbicsIHtcbi8vICAgICAgICAgICdQQVNTV09SRCc6ICdQYXNzd29yZCdcbi8vICAgICAgICB9KTtcbi8vICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ2VuJywge1xuLy8gICAgICAgICAgJ0xPR0lOJzogJ0xPR0lOJ1xuLy8gICAgICAgIH0pO1xuLy8gICAgLy8gcmVnaXN0ZXIgZW5nbGlzaCB0cmFuc2xhdGlvbiB0YWJsZVxuLy8gICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygnaXQnLCB7XG4vLyAgICAgICdHUkVFVElORyc6ICdDaWFvIE1vbmRvISdcbi8vICAgIH0pO1xuLy8gICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygnaXQnLCB7XG4vLyAgICAgICAgICAnVVNFUk5BTUUnOiAnVXNlcm5hbWUnXG4vLyAgICAgICAgfSk7XG4vLyAgICAkdHJhbnNsYXRlUHJvdmlkZXIudHJhbnNsYXRpb25zKCdpdCcsIHtcbi8vICAgICAgICAgICdQQVNTV09SRCc6ICdQYXNzd29yZCdcbi8vICAgICAgICB9KTtcbi8vICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ2l0Jywge1xuLy8gICAgICAgICAgJ0xPR0lOJzogJ0VOVFJBJ1xuLy8gICAgICAgIH0pO1xuICAgICAgLy8gJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZVN0YXRpY0ZpbGVzTG9hZGVyKHtcbiAgICAgIC8vICAgcHJlZml4OiAnaTE4Ti9sb2NhbGUtJyxcbiAgICAgIC8vICAgc3VmZml4OiAnLmpzb24nXG4gICAgICAvLyB9KTtcbiAgICAgIC8vIHdoaWNoIGxhbmd1YWdlIHRvIHVzZT9cbiAgICAgIC8vICR0cmFuc2xhdGVQcm92aWRlci5wcmVmZXJyZWRMYW5ndWFnZSgnZGVfREUnKTtcbi8vIH1dKS5cbmNvbmZpZyhbJyRwcm92aWRlJywgJyRodHRwUHJvdmlkZXInLCBmdW5jdGlvbigkcHJvdmlkZSwgJGh0dHBQcm92aWRlcikge1xuXG4gICAgLy8gSW50ZXJjZXB0IGh0dHAgY2FsbHMuXG4gICAgJHByb3ZpZGUuZmFjdG9yeSgnUmdpSHR0cEludGVyY2VwdG9yJywgWyckcScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHEsICRyb290U2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIE9uIHJlcXVlc3Qgc3VjY2Vzc1xuICAgICAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAkbG9nLmxvZyhjb25maWcpOyAvLyBDb250YWlucyB0aGUgZGF0YSBhYm91dCB0aGUgcmVxdWVzdCBiZWZvcmUgaXQgaXMgc2VudC5cbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmxvYWRpbmdJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIGNvbmZpZyBvciB3cmFwIGl0IGluIGEgcHJvbWlzZSBpZiBibGFuay5cbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnIHx8ICRxLndoZW4oY29uZmlnKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIE9uIHJlcXVlc3QgZmFpbHVyZVxuICAgICAgICAgICAgcmVxdWVzdEVycm9yOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICRsb2cubG9nKHJlamVjdGlvbik7IC8vIENvbnRhaW5zIHRoZSBkYXRhIGFib3V0IHRoZSBlcnJvciBvbiB0aGUgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmxvYWRpbmdJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBwcm9taXNlIHJlamVjdGlvbi5cbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBPbiByZXNwb25zZSBzdWNjZXNzXG4gICAgICAgICAgICByZXNwb25zZTogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICRsb2cubG9nKHJlc3BvbnNlKTsgLy8gQ29udGFpbnMgdGhlIGRhdGEgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5sb2FkaW5nSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiB0aGUgcmVzcG9uc2Ugb3IgcHJvbWlzZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBPbiByZXNwb25zZSBmYWlsdHVyZVxuICAgICAgICAgICAgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24ocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAkbG9nLmxvZyhyZWplY3Rpb24pOyAvLyBDb250YWlucyB0aGUgZGF0YSBhYm91dCB0aGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5sb2FkaW5nSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiB0aGUgcHJvbWlzZSByZWplY3Rpb24uXG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKTtcblxuICAgIC8vIEFkZCB0aGUgaW50ZXJjZXB0b3IgdG8gdGhlICRodHRwUHJvdmlkZXIuXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnUmdpSHR0cEludGVyY2VwdG9yJyk7XG5cbn1dKTtcbiIsIi8qKlxuICogQGxpY2Vuc2UgQW5ndWxhckpTIHYxLjMuMTNcbiAqIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgYW5ndWxhciwgdW5kZWZpbmVkKSB7J3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG5nUm91dGVcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqICMgbmdSb3V0ZVxuICpcbiAqIFRoZSBgbmdSb3V0ZWAgbW9kdWxlIHByb3ZpZGVzIHJvdXRpbmcgYW5kIGRlZXBsaW5raW5nIHNlcnZpY2VzIGFuZCBkaXJlY3RpdmVzIGZvciBhbmd1bGFyIGFwcHMuXG4gKlxuICogIyMgRXhhbXBsZVxuICogU2VlIHtAbGluayBuZ1JvdXRlLiRyb3V0ZSNleGFtcGxlICRyb3V0ZX0gZm9yIGFuIGV4YW1wbGUgb2YgY29uZmlndXJpbmcgYW5kIHVzaW5nIGBuZ1JvdXRlYC5cbiAqXG4gKlxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ1JvdXRlXCI+PC9kaXY+XG4gKi9cbiAvKiBnbG9iYWwgLW5nUm91dGVNb2R1bGUgKi9cbnZhciBuZ1JvdXRlTW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nUm91dGUnLCBbJ25nJ10pLlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIoJyRyb3V0ZScsICRSb3V0ZVByb3ZpZGVyKSxcbiAgICAkcm91dGVNaW5FcnIgPSBhbmd1bGFyLiQkbWluRXJyKCduZ1JvdXRlJyk7XG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkcm91dGVQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHJvdXRlcy5cbiAqXG4gKiAjIyBFeGFtcGxlXG4gKiBTZWUge0BsaW5rIG5nUm91dGUuJHJvdXRlI2V4YW1wbGUgJHJvdXRlfSBmb3IgYW4gZXhhbXBsZSBvZiBjb25maWd1cmluZyBhbmQgdXNpbmcgYG5nUm91dGVgLlxuICpcbiAqICMjIERlcGVuZGVuY2llc1xuICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ1JvdXRlIGBuZ1JvdXRlYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cbiAqL1xuZnVuY3Rpb24gJFJvdXRlUHJvdmlkZXIoKSB7XG4gIGZ1bmN0aW9uIGluaGVyaXQocGFyZW50LCBleHRyYSkge1xuICAgIHJldHVybiBhbmd1bGFyLmV4dGVuZChPYmplY3QuY3JlYXRlKHBhcmVudCksIGV4dHJhKTtcbiAgfVxuXG4gIHZhciByb3V0ZXMgPSB7fTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcm91dGVQcm92aWRlciN3aGVuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFJvdXRlIHBhdGggKG1hdGNoZWQgYWdhaW5zdCBgJGxvY2F0aW9uLnBhdGhgKS4gSWYgYCRsb2NhdGlvbi5wYXRoYFxuICAgKiAgICBjb250YWlucyByZWR1bmRhbnQgdHJhaWxpbmcgc2xhc2ggb3IgaXMgbWlzc2luZyBvbmUsIHRoZSByb3V0ZSB3aWxsIHN0aWxsIG1hdGNoIGFuZCB0aGVcbiAgICogICAgYCRsb2NhdGlvbi5wYXRoYCB3aWxsIGJlIHVwZGF0ZWQgdG8gYWRkIG9yIGRyb3AgdGhlIHRyYWlsaW5nIHNsYXNoIHRvIGV4YWN0bHkgbWF0Y2ggdGhlXG4gICAqICAgIHJvdXRlIGRlZmluaXRpb24uXG4gICAqXG4gICAqICAgICogYHBhdGhgIGNhbiBjb250YWluIG5hbWVkIGdyb3VwcyBzdGFydGluZyB3aXRoIGEgY29sb246IGUuZy4gYDpuYW1lYC4gQWxsIGNoYXJhY3RlcnMgdXBcbiAgICogICAgICAgIHRvIHRoZSBuZXh0IHNsYXNoIGFyZSBtYXRjaGVkIGFuZCBzdG9yZWQgaW4gYCRyb3V0ZVBhcmFtc2AgdW5kZXIgdGhlIGdpdmVuIGBuYW1lYFxuICAgKiAgICAgICAgd2hlbiB0aGUgcm91dGUgbWF0Y2hlcy5cbiAgICogICAgKiBgcGF0aGAgY2FuIGNvbnRhaW4gbmFtZWQgZ3JvdXBzIHN0YXJ0aW5nIHdpdGggYSBjb2xvbiBhbmQgZW5kaW5nIHdpdGggYSBzdGFyOlxuICAgKiAgICAgICAgZS5nLmA6bmFtZSpgLiBBbGwgY2hhcmFjdGVycyBhcmUgZWFnZXJseSBzdG9yZWQgaW4gYCRyb3V0ZVBhcmFtc2AgdW5kZXIgdGhlIGdpdmVuIGBuYW1lYFxuICAgKiAgICAgICAgd2hlbiB0aGUgcm91dGUgbWF0Y2hlcy5cbiAgICogICAgKiBgcGF0aGAgY2FuIGNvbnRhaW4gb3B0aW9uYWwgbmFtZWQgZ3JvdXBzIHdpdGggYSBxdWVzdGlvbiBtYXJrOiBlLmcuYDpuYW1lP2AuXG4gICAqXG4gICAqICAgIEZvciBleGFtcGxlLCByb3V0ZXMgbGlrZSBgL2NvbG9yLzpjb2xvci9sYXJnZWNvZGUvOmxhcmdlY29kZSpcXC9lZGl0YCB3aWxsIG1hdGNoXG4gICAqICAgIGAvY29sb3IvYnJvd24vbGFyZ2Vjb2RlL2NvZGUvd2l0aC9zbGFzaGVzL2VkaXRgIGFuZCBleHRyYWN0OlxuICAgKlxuICAgKiAgICAqIGBjb2xvcjogYnJvd25gXG4gICAqICAgICogYGxhcmdlY29kZTogY29kZS93aXRoL3NsYXNoZXNgLlxuICAgKlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcm91dGUgTWFwcGluZyBpbmZvcm1hdGlvbiB0byBiZSBhc3NpZ25lZCB0byBgJHJvdXRlLmN1cnJlbnRgIG9uIHJvdXRlXG4gICAqICAgIG1hdGNoLlxuICAgKlxuICAgKiAgICBPYmplY3QgcHJvcGVydGllczpcbiAgICpcbiAgICogICAgLSBgY29udHJvbGxlcmAg4oCTIGB7KHN0cmluZ3xmdW5jdGlvbigpPX1gIOKAkyBDb250cm9sbGVyIGZuIHRoYXQgc2hvdWxkIGJlIGFzc29jaWF0ZWQgd2l0aFxuICAgKiAgICAgIG5ld2x5IGNyZWF0ZWQgc2NvcGUgb3IgdGhlIG5hbWUgb2YgYSB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjY29udHJvbGxlciByZWdpc3RlcmVkXG4gICAqICAgICAgY29udHJvbGxlcn0gaWYgcGFzc2VkIGFzIGEgc3RyaW5nLlxuICAgKiAgICAtIGBjb250cm9sbGVyQXNgIOKAkyBge3N0cmluZz19YCDigJMgQSBjb250cm9sbGVyIGFsaWFzIG5hbWUuIElmIHByZXNlbnQgdGhlIGNvbnRyb2xsZXIgd2lsbCBiZVxuICAgKiAgICAgIHB1Ymxpc2hlZCB0byBzY29wZSB1bmRlciB0aGUgYGNvbnRyb2xsZXJBc2AgbmFtZS5cbiAgICogICAgLSBgdGVtcGxhdGVgIOKAkyBge3N0cmluZz18ZnVuY3Rpb24oKT19YCDigJMgaHRtbCB0ZW1wbGF0ZSBhcyBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRoYXRcbiAgICogICAgICByZXR1cm5zIGFuIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIHVzZWQgYnkge0BsaW5rXG4gICAqICAgICAgbmdSb3V0ZS5kaXJlY3RpdmU6bmdWaWV3IG5nVmlld30gb3Ige0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0luY2x1ZGUgbmdJbmNsdWRlfSBkaXJlY3RpdmVzLlxuICAgKiAgICAgIFRoaXMgcHJvcGVydHkgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGB0ZW1wbGF0ZVVybGAuXG4gICAqXG4gICAqICAgICAgSWYgYHRlbXBsYXRlYCBpcyBhIGZ1bmN0aW9uLCBpdCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICpcbiAgICogICAgICAtIGB7QXJyYXkuPE9iamVjdD59YCAtIHJvdXRlIHBhcmFtZXRlcnMgZXh0cmFjdGVkIGZyb20gdGhlIGN1cnJlbnRcbiAgICogICAgICAgIGAkbG9jYXRpb24ucGF0aCgpYCBieSBhcHBseWluZyB0aGUgY3VycmVudCByb3V0ZVxuICAgKlxuICAgKiAgICAtIGB0ZW1wbGF0ZVVybGAg4oCTIGB7c3RyaW5nPXxmdW5jdGlvbigpPX1gIOKAkyBwYXRoIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHBhdGggdG8gYW4gaHRtbFxuICAgKiAgICAgIHRlbXBsYXRlIHRoYXQgc2hvdWxkIGJlIHVzZWQgYnkge0BsaW5rIG5nUm91dGUuZGlyZWN0aXZlOm5nVmlldyBuZ1ZpZXd9LlxuICAgKlxuICAgKiAgICAgIElmIGB0ZW1wbGF0ZVVybGAgaXMgYSBmdW5jdGlvbiwgaXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gICAqXG4gICAqICAgICAgLSBge0FycmF5LjxPYmplY3Q+fWAgLSByb3V0ZSBwYXJhbWV0ZXJzIGV4dHJhY3RlZCBmcm9tIHRoZSBjdXJyZW50XG4gICAqICAgICAgICBgJGxvY2F0aW9uLnBhdGgoKWAgYnkgYXBwbHlpbmcgdGhlIGN1cnJlbnQgcm91dGVcbiAgICpcbiAgICogICAgLSBgcmVzb2x2ZWAgLSBge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj49fWAgLSBBbiBvcHRpb25hbCBtYXAgb2YgZGVwZW5kZW5jaWVzIHdoaWNoIHNob3VsZFxuICAgKiAgICAgIGJlIGluamVjdGVkIGludG8gdGhlIGNvbnRyb2xsZXIuIElmIGFueSBvZiB0aGVzZSBkZXBlbmRlbmNpZXMgYXJlIHByb21pc2VzLCB0aGUgcm91dGVyXG4gICAqICAgICAgd2lsbCB3YWl0IGZvciB0aGVtIGFsbCB0byBiZSByZXNvbHZlZCBvciBvbmUgdG8gYmUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBjb250cm9sbGVyIGlzXG4gICAqICAgICAgaW5zdGFudGlhdGVkLlxuICAgKiAgICAgIElmIGFsbCB0aGUgcHJvbWlzZXMgYXJlIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgdGhlIHZhbHVlcyBvZiB0aGUgcmVzb2x2ZWQgcHJvbWlzZXMgYXJlXG4gICAqICAgICAgaW5qZWN0ZWQgYW5kIHtAbGluayBuZ1JvdXRlLiRyb3V0ZSMkcm91dGVDaGFuZ2VTdWNjZXNzICRyb3V0ZUNoYW5nZVN1Y2Nlc3N9IGV2ZW50IGlzXG4gICAqICAgICAgZmlyZWQuIElmIGFueSBvZiB0aGUgcHJvbWlzZXMgYXJlIHJlamVjdGVkIHRoZVxuICAgKiAgICAgIHtAbGluayBuZ1JvdXRlLiRyb3V0ZSMkcm91dGVDaGFuZ2VFcnJvciAkcm91dGVDaGFuZ2VFcnJvcn0gZXZlbnQgaXMgZmlyZWQuIFRoZSBtYXAgb2JqZWN0XG4gICAqICAgICAgaXM6XG4gICAqXG4gICAqICAgICAgLSBga2V5YCDigJMgYHtzdHJpbmd9YDogYSBuYW1lIG9mIGEgZGVwZW5kZW5jeSB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBjb250cm9sbGVyLlxuICAgKiAgICAgIC0gYGZhY3RvcnlgIC0gYHtzdHJpbmd8ZnVuY3Rpb259YDogSWYgYHN0cmluZ2AgdGhlbiBpdCBpcyBhbiBhbGlhcyBmb3IgYSBzZXJ2aWNlLlxuICAgKiAgICAgICAgT3RoZXJ3aXNlIGlmIGZ1bmN0aW9uLCB0aGVuIGl0IGlzIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgaW5qZWN0ZWR9XG4gICAqICAgICAgICBhbmQgdGhlIHJldHVybiB2YWx1ZSBpcyB0cmVhdGVkIGFzIHRoZSBkZXBlbmRlbmN5LiBJZiB0aGUgcmVzdWx0IGlzIGEgcHJvbWlzZSwgaXQgaXNcbiAgICogICAgICAgIHJlc29sdmVkIGJlZm9yZSBpdHMgdmFsdWUgaXMgaW5qZWN0ZWQgaW50byB0aGUgY29udHJvbGxlci4gQmUgYXdhcmUgdGhhdFxuICAgKiAgICAgICAgYG5nUm91dGUuJHJvdXRlUGFyYW1zYCB3aWxsIHN0aWxsIHJlZmVyIHRvIHRoZSBwcmV2aW91cyByb3V0ZSB3aXRoaW4gdGhlc2UgcmVzb2x2ZVxuICAgKiAgICAgICAgZnVuY3Rpb25zLiAgVXNlIGAkcm91dGUuY3VycmVudC5wYXJhbXNgIHRvIGFjY2VzcyB0aGUgbmV3IHJvdXRlIHBhcmFtZXRlcnMsIGluc3RlYWQuXG4gICAqXG4gICAqICAgIC0gYHJlZGlyZWN0VG9gIOKAkyB7KHN0cmluZ3xmdW5jdGlvbigpKT19IOKAkyB2YWx1ZSB0byB1cGRhdGVcbiAgICogICAgICB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbn0gcGF0aCB3aXRoIGFuZCB0cmlnZ2VyIHJvdXRlIHJlZGlyZWN0aW9uLlxuICAgKlxuICAgKiAgICAgIElmIGByZWRpcmVjdFRvYCBpcyBhIGZ1bmN0aW9uLCBpdCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICpcbiAgICogICAgICAtIGB7T2JqZWN0LjxzdHJpbmc+fWAgLSByb3V0ZSBwYXJhbWV0ZXJzIGV4dHJhY3RlZCBmcm9tIHRoZSBjdXJyZW50XG4gICAqICAgICAgICBgJGxvY2F0aW9uLnBhdGgoKWAgYnkgYXBwbHlpbmcgdGhlIGN1cnJlbnQgcm91dGUgdGVtcGxhdGVVcmwuXG4gICAqICAgICAgLSBge3N0cmluZ31gIC0gY3VycmVudCBgJGxvY2F0aW9uLnBhdGgoKWBcbiAgICogICAgICAtIGB7T2JqZWN0fWAgLSBjdXJyZW50IGAkbG9jYXRpb24uc2VhcmNoKClgXG4gICAqXG4gICAqICAgICAgVGhlIGN1c3RvbSBgcmVkaXJlY3RUb2AgZnVuY3Rpb24gaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGEgc3RyaW5nIHdoaWNoIHdpbGwgYmUgdXNlZFxuICAgKiAgICAgIHRvIHVwZGF0ZSBgJGxvY2F0aW9uLnBhdGgoKWAgYW5kIGAkbG9jYXRpb24uc2VhcmNoKClgLlxuICAgKlxuICAgKiAgICAtIGBbcmVsb2FkT25TZWFyY2g9dHJ1ZV1gIC0ge2Jvb2xlYW49fSAtIHJlbG9hZCByb3V0ZSB3aGVuIG9ubHkgYCRsb2NhdGlvbi5zZWFyY2goKWBcbiAgICogICAgICBvciBgJGxvY2F0aW9uLmhhc2goKWAgY2hhbmdlcy5cbiAgICpcbiAgICogICAgICBJZiB0aGUgb3B0aW9uIGlzIHNldCB0byBgZmFsc2VgIGFuZCB1cmwgaW4gdGhlIGJyb3dzZXIgY2hhbmdlcywgdGhlblxuICAgKiAgICAgIGAkcm91dGVVcGRhdGVgIGV2ZW50IGlzIGJyb2FkY2FzdGVkIG9uIHRoZSByb290IHNjb3BlLlxuICAgKlxuICAgKiAgICAtIGBbY2FzZUluc2Vuc2l0aXZlTWF0Y2g9ZmFsc2VdYCAtIHtib29sZWFuPX0gLSBtYXRjaCByb3V0ZXMgd2l0aG91dCBiZWluZyBjYXNlIHNlbnNpdGl2ZVxuICAgKlxuICAgKiAgICAgIElmIHRoZSBvcHRpb24gaXMgc2V0IHRvIGB0cnVlYCwgdGhlbiB0aGUgcGFydGljdWxhciByb3V0ZSBjYW4gYmUgbWF0Y2hlZCB3aXRob3V0IGJlaW5nXG4gICAqICAgICAgY2FzZSBzZW5zaXRpdmVcbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gc2VsZlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQWRkcyBhIG5ldyByb3V0ZSBkZWZpbml0aW9uIHRvIHRoZSBgJHJvdXRlYCBzZXJ2aWNlLlxuICAgKi9cbiAgdGhpcy53aGVuID0gZnVuY3Rpb24ocGF0aCwgcm91dGUpIHtcbiAgICAvL2NvcHkgb3JpZ2luYWwgcm91dGUgb2JqZWN0IHRvIHByZXNlcnZlIHBhcmFtcyBpbmhlcml0ZWQgZnJvbSBwcm90byBjaGFpblxuICAgIHZhciByb3V0ZUNvcHkgPSBhbmd1bGFyLmNvcHkocm91dGUpO1xuICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHJvdXRlQ29weS5yZWxvYWRPblNlYXJjaCkpIHtcbiAgICAgIHJvdXRlQ29weS5yZWxvYWRPblNlYXJjaCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHJvdXRlQ29weS5jYXNlSW5zZW5zaXRpdmVNYXRjaCkpIHtcbiAgICAgIHJvdXRlQ29weS5jYXNlSW5zZW5zaXRpdmVNYXRjaCA9IHRoaXMuY2FzZUluc2Vuc2l0aXZlTWF0Y2g7XG4gICAgfVxuICAgIHJvdXRlc1twYXRoXSA9IGFuZ3VsYXIuZXh0ZW5kKFxuICAgICAgcm91dGVDb3B5LFxuICAgICAgcGF0aCAmJiBwYXRoUmVnRXhwKHBhdGgsIHJvdXRlQ29weSlcbiAgICApO1xuXG4gICAgLy8gY3JlYXRlIHJlZGlyZWN0aW9uIGZvciB0cmFpbGluZyBzbGFzaGVzXG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIHZhciByZWRpcmVjdFBhdGggPSAocGF0aFtwYXRoLmxlbmd0aCAtIDFdID09ICcvJylcbiAgICAgICAgICAgID8gcGF0aC5zdWJzdHIoMCwgcGF0aC5sZW5ndGggLSAxKVxuICAgICAgICAgICAgOiBwYXRoICsgJy8nO1xuXG4gICAgICByb3V0ZXNbcmVkaXJlY3RQYXRoXSA9IGFuZ3VsYXIuZXh0ZW5kKFxuICAgICAgICB7cmVkaXJlY3RUbzogcGF0aH0sXG4gICAgICAgIHBhdGhSZWdFeHAocmVkaXJlY3RQYXRoLCByb3V0ZUNvcHkpXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICogQG5hbWUgJHJvdXRlUHJvdmlkZXIjY2FzZUluc2Vuc2l0aXZlTWF0Y2hcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEEgYm9vbGVhbiBwcm9wZXJ0eSBpbmRpY2F0aW5nIGlmIHJvdXRlcyBkZWZpbmVkXG4gICAqIHVzaW5nIHRoaXMgcHJvdmlkZXIgc2hvdWxkIGJlIG1hdGNoZWQgdXNpbmcgYSBjYXNlIGluc2Vuc2l0aXZlXG4gICAqIGFsZ29yaXRobS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICovXG4gIHRoaXMuY2FzZUluc2Vuc2l0aXZlTWF0Y2ggPSBmYWxzZTtcblxuICAgLyoqXG4gICAgKiBAcGFyYW0gcGF0aCB7c3RyaW5nfSBwYXRoXG4gICAgKiBAcGFyYW0gb3B0cyB7T2JqZWN0fSBvcHRpb25zXG4gICAgKiBAcmV0dXJuIHs/T2JqZWN0fVxuICAgICpcbiAgICAqIEBkZXNjcmlwdGlvblxuICAgICogTm9ybWFsaXplcyB0aGUgZ2l2ZW4gcGF0aCwgcmV0dXJuaW5nIGEgcmVndWxhciBleHByZXNzaW9uXG4gICAgKiBhbmQgdGhlIG9yaWdpbmFsIHBhdGguXG4gICAgKlxuICAgICogSW5zcGlyZWQgYnkgcGF0aFJleHAgaW4gdmlzaW9ubWVkaWEvZXhwcmVzcy9saWIvdXRpbHMuanMuXG4gICAgKi9cbiAgZnVuY3Rpb24gcGF0aFJlZ0V4cChwYXRoLCBvcHRzKSB7XG4gICAgdmFyIGluc2Vuc2l0aXZlID0gb3B0cy5jYXNlSW5zZW5zaXRpdmVNYXRjaCxcbiAgICAgICAgcmV0ID0ge1xuICAgICAgICAgIG9yaWdpbmFsUGF0aDogcGF0aCxcbiAgICAgICAgICByZWdleHA6IHBhdGhcbiAgICAgICAgfSxcbiAgICAgICAga2V5cyA9IHJldC5rZXlzID0gW107XG5cbiAgICBwYXRoID0gcGF0aFxuICAgICAgLnJlcGxhY2UoLyhbKCkuXSkvZywgJ1xcXFwkMScpXG4gICAgICAucmVwbGFjZSgvKFxcLyk/OihcXHcrKShbXFw/XFwqXSk/L2csIGZ1bmN0aW9uKF8sIHNsYXNoLCBrZXksIG9wdGlvbikge1xuICAgICAgICB2YXIgb3B0aW9uYWwgPSBvcHRpb24gPT09ICc/JyA/IG9wdGlvbiA6IG51bGw7XG4gICAgICAgIHZhciBzdGFyID0gb3B0aW9uID09PSAnKicgPyBvcHRpb24gOiBudWxsO1xuICAgICAgICBrZXlzLnB1c2goeyBuYW1lOiBrZXksIG9wdGlvbmFsOiAhIW9wdGlvbmFsIH0pO1xuICAgICAgICBzbGFzaCA9IHNsYXNoIHx8ICcnO1xuICAgICAgICByZXR1cm4gJydcbiAgICAgICAgICArIChvcHRpb25hbCA/ICcnIDogc2xhc2gpXG4gICAgICAgICAgKyAnKD86J1xuICAgICAgICAgICsgKG9wdGlvbmFsID8gc2xhc2ggOiAnJylcbiAgICAgICAgICArIChzdGFyICYmICcoLis/KScgfHwgJyhbXi9dKyknKVxuICAgICAgICAgICsgKG9wdGlvbmFsIHx8ICcnKVxuICAgICAgICAgICsgJyknXG4gICAgICAgICAgKyAob3B0aW9uYWwgfHwgJycpO1xuICAgICAgfSlcbiAgICAgIC5yZXBsYWNlKC8oW1xcLyRcXCpdKS9nLCAnXFxcXCQxJyk7XG5cbiAgICByZXQucmVnZXhwID0gbmV3IFJlZ0V4cCgnXicgKyBwYXRoICsgJyQnLCBpbnNlbnNpdGl2ZSA/ICdpJyA6ICcnKTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHJvdXRlUHJvdmlkZXIjb3RoZXJ3aXNlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHJvdXRlIGRlZmluaXRpb24gdGhhdCB3aWxsIGJlIHVzZWQgb24gcm91dGUgY2hhbmdlIHdoZW4gbm8gb3RoZXIgcm91dGUgZGVmaW5pdGlvblxuICAgKiBpcyBtYXRjaGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdHxzdHJpbmd9IHBhcmFtcyBNYXBwaW5nIGluZm9ybWF0aW9uIHRvIGJlIGFzc2lnbmVkIHRvIGAkcm91dGUuY3VycmVudGAuXG4gICAqIElmIGNhbGxlZCB3aXRoIGEgc3RyaW5nLCB0aGUgdmFsdWUgbWFwcyB0byBgcmVkaXJlY3RUb2AuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IHNlbGZcbiAgICovXG4gIHRoaXMub3RoZXJ3aXNlID0gZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJhbXMgPSB7cmVkaXJlY3RUbzogcGFyYW1zfTtcbiAgICB9XG4gICAgdGhpcy53aGVuKG51bGwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cblxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLFxuICAgICAgICAgICAgICAgJyRsb2NhdGlvbicsXG4gICAgICAgICAgICAgICAnJHJvdXRlUGFyYW1zJyxcbiAgICAgICAgICAgICAgICckcScsXG4gICAgICAgICAgICAgICAnJGluamVjdG9yJyxcbiAgICAgICAgICAgICAgICckdGVtcGxhdGVSZXF1ZXN0JyxcbiAgICAgICAgICAgICAgICckc2NlJyxcbiAgICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkcSwgJGluamVjdG9yLCAkdGVtcGxhdGVSZXF1ZXN0LCAkc2NlKSB7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBuYW1lICRyb3V0ZVxuICAgICAqIEByZXF1aXJlcyAkbG9jYXRpb25cbiAgICAgKiBAcmVxdWlyZXMgJHJvdXRlUGFyYW1zXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gY3VycmVudCBSZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgcm91dGUgZGVmaW5pdGlvbi5cbiAgICAgKiBUaGUgcm91dGUgZGVmaW5pdGlvbiBjb250YWluczpcbiAgICAgKlxuICAgICAqICAgLSBgY29udHJvbGxlcmA6IFRoZSBjb250cm9sbGVyIGNvbnN0cnVjdG9yIGFzIGRlZmluZSBpbiByb3V0ZSBkZWZpbml0aW9uLlxuICAgICAqICAgLSBgbG9jYWxzYDogQSBtYXAgb2YgbG9jYWxzIHdoaWNoIGlzIHVzZWQgYnkge0BsaW5rIG5nLiRjb250cm9sbGVyICRjb250cm9sbGVyfSBzZXJ2aWNlIGZvclxuICAgICAqICAgICBjb250cm9sbGVyIGluc3RhbnRpYXRpb24uIFRoZSBgbG9jYWxzYCBjb250YWluXG4gICAgICogICAgIHRoZSByZXNvbHZlZCB2YWx1ZXMgb2YgdGhlIGByZXNvbHZlYCBtYXAuIEFkZGl0aW9uYWxseSB0aGUgYGxvY2Fsc2AgYWxzbyBjb250YWluOlxuICAgICAqXG4gICAgICogICAgIC0gYCRzY29wZWAgLSBUaGUgY3VycmVudCByb3V0ZSBzY29wZS5cbiAgICAgKiAgICAgLSBgJHRlbXBsYXRlYCAtIFRoZSBjdXJyZW50IHJvdXRlIHRlbXBsYXRlIEhUTUwuXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gcm91dGVzIE9iamVjdCB3aXRoIGFsbCByb3V0ZSBjb25maWd1cmF0aW9uIE9iamVjdHMgYXMgaXRzIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBgJHJvdXRlYCBpcyB1c2VkIGZvciBkZWVwLWxpbmtpbmcgVVJMcyB0byBjb250cm9sbGVycyBhbmQgdmlld3MgKEhUTUwgcGFydGlhbHMpLlxuICAgICAqIEl0IHdhdGNoZXMgYCRsb2NhdGlvbi51cmwoKWAgYW5kIHRyaWVzIHRvIG1hcCB0aGUgcGF0aCB0byBhbiBleGlzdGluZyByb3V0ZSBkZWZpbml0aW9uLlxuICAgICAqXG4gICAgICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ1JvdXRlIGBuZ1JvdXRlYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gZGVmaW5lIHJvdXRlcyB0aHJvdWdoIHtAbGluayBuZ1JvdXRlLiRyb3V0ZVByb3ZpZGVyICRyb3V0ZVByb3ZpZGVyfSdzIEFQSS5cbiAgICAgKlxuICAgICAqIFRoZSBgJHJvdXRlYCBzZXJ2aWNlIGlzIHR5cGljYWxseSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlXG4gICAgICoge0BsaW5rIG5nUm91dGUuZGlyZWN0aXZlOm5nVmlldyBgbmdWaWV3YH0gZGlyZWN0aXZlIGFuZCB0aGVcbiAgICAgKiB7QGxpbmsgbmdSb3V0ZS4kcm91dGVQYXJhbXMgYCRyb3V0ZVBhcmFtc2B9IHNlcnZpY2UuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgY2hhbmdpbmcgdGhlIFVSTCBoYXNoIGNhdXNlcyB0aGUgYCRyb3V0ZWAgdG8gbWF0Y2ggYSByb3V0ZSBhZ2FpbnN0IHRoZVxuICAgICAqIFVSTCwgYW5kIHRoZSBgbmdWaWV3YCBwdWxscyBpbiB0aGUgcGFydGlhbC5cbiAgICAgKlxuICAgICAqIDxleGFtcGxlIG5hbWU9XCIkcm91dGUtc2VydmljZVwiIG1vZHVsZT1cIm5nUm91dGVFeGFtcGxlXCJcbiAgICAgKiAgICAgICAgICBkZXBzPVwiYW5ndWxhci1yb3V0ZS5qc1wiIGZpeEJhc2U9XCJ0cnVlXCI+XG4gICAgICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJNYWluQ29udHJvbGxlclwiPlxuICAgICAqICAgICAgIENob29zZTpcbiAgICAgKiAgICAgICA8YSBocmVmPVwiQm9vay9Nb2J5XCI+TW9ieTwvYT4gfFxuICAgICAqICAgICAgIDxhIGhyZWY9XCJCb29rL01vYnkvY2gvMVwiPk1vYnk6IENoMTwvYT4gfFxuICAgICAqICAgICAgIDxhIGhyZWY9XCJCb29rL0dhdHNieVwiPkdhdHNieTwvYT4gfFxuICAgICAqICAgICAgIDxhIGhyZWY9XCJCb29rL0dhdHNieS9jaC80P2tleT12YWx1ZVwiPkdhdHNieTogQ2g0PC9hPiB8XG4gICAgICogICAgICAgPGEgaHJlZj1cIkJvb2svU2NhcmxldFwiPlNjYXJsZXQgTGV0dGVyPC9hPjxici8+XG4gICAgICpcbiAgICAgKiAgICAgICA8ZGl2IG5nLXZpZXc+PC9kaXY+XG4gICAgICpcbiAgICAgKiAgICAgICA8aHIgLz5cbiAgICAgKlxuICAgICAqICAgICAgIDxwcmU+JGxvY2F0aW9uLnBhdGgoKSA9IHt7JGxvY2F0aW9uLnBhdGgoKX19PC9wcmU+XG4gICAgICogICAgICAgPHByZT4kcm91dGUuY3VycmVudC50ZW1wbGF0ZVVybCA9IHt7JHJvdXRlLmN1cnJlbnQudGVtcGxhdGVVcmx9fTwvcHJlPlxuICAgICAqICAgICAgIDxwcmU+JHJvdXRlLmN1cnJlbnQucGFyYW1zID0ge3skcm91dGUuY3VycmVudC5wYXJhbXN9fTwvcHJlPlxuICAgICAqICAgICAgIDxwcmU+JHJvdXRlLmN1cnJlbnQuc2NvcGUubmFtZSA9IHt7JHJvdXRlLmN1cnJlbnQuc2NvcGUubmFtZX19PC9wcmU+XG4gICAgICogICAgICAgPHByZT4kcm91dGVQYXJhbXMgPSB7eyRyb3V0ZVBhcmFtc319PC9wcmU+XG4gICAgICogICAgIDwvZGl2PlxuICAgICAqICAgPC9maWxlPlxuICAgICAqXG4gICAgICogICA8ZmlsZSBuYW1lPVwiYm9vay5odG1sXCI+XG4gICAgICogICAgIGNvbnRyb2xsZXI6IHt7bmFtZX19PGJyIC8+XG4gICAgICogICAgIEJvb2sgSWQ6IHt7cGFyYW1zLmJvb2tJZH19PGJyIC8+XG4gICAgICogICA8L2ZpbGU+XG4gICAgICpcbiAgICAgKiAgIDxmaWxlIG5hbWU9XCJjaGFwdGVyLmh0bWxcIj5cbiAgICAgKiAgICAgY29udHJvbGxlcjoge3tuYW1lfX08YnIgLz5cbiAgICAgKiAgICAgQm9vayBJZDoge3twYXJhbXMuYm9va0lkfX08YnIgLz5cbiAgICAgKiAgICAgQ2hhcHRlciBJZDoge3twYXJhbXMuY2hhcHRlcklkfX1cbiAgICAgKiAgIDwvZmlsZT5cbiAgICAgKlxuICAgICAqICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAqICAgICBhbmd1bGFyLm1vZHVsZSgnbmdSb3V0ZUV4YW1wbGUnLCBbJ25nUm91dGUnXSlcbiAgICAgKlxuICAgICAqICAgICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkcm91dGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uKSB7XG4gICAgICogICAgICAgICAgJHNjb3BlLiRyb3V0ZSA9ICRyb3V0ZTtcbiAgICAgKiAgICAgICAgICAkc2NvcGUuJGxvY2F0aW9uID0gJGxvY2F0aW9uO1xuICAgICAqICAgICAgICAgICRzY29wZS4kcm91dGVQYXJhbXMgPSAkcm91dGVQYXJhbXM7XG4gICAgICogICAgICB9KVxuICAgICAqXG4gICAgICogICAgICAuY29udHJvbGxlcignQm9va0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRyb3V0ZVBhcmFtcykge1xuICAgICAqICAgICAgICAgICRzY29wZS5uYW1lID0gXCJCb29rQ29udHJvbGxlclwiO1xuICAgICAqICAgICAgICAgICRzY29wZS5wYXJhbXMgPSAkcm91dGVQYXJhbXM7XG4gICAgICogICAgICB9KVxuICAgICAqXG4gICAgICogICAgICAuY29udHJvbGxlcignQ2hhcHRlckNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRyb3V0ZVBhcmFtcykge1xuICAgICAqICAgICAgICAgICRzY29wZS5uYW1lID0gXCJDaGFwdGVyQ29udHJvbGxlclwiO1xuICAgICAqICAgICAgICAgICRzY29wZS5wYXJhbXMgPSAkcm91dGVQYXJhbXM7XG4gICAgICogICAgICB9KVxuICAgICAqXG4gICAgICogICAgIC5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICogICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgKiAgICAgICAgLndoZW4oJy9Cb29rLzpib29rSWQnLCB7XG4gICAgICogICAgICAgICB0ZW1wbGF0ZVVybDogJ2Jvb2suaHRtbCcsXG4gICAgICogICAgICAgICBjb250cm9sbGVyOiAnQm9va0NvbnRyb2xsZXInLFxuICAgICAqICAgICAgICAgcmVzb2x2ZToge1xuICAgICAqICAgICAgICAgICAvLyBJIHdpbGwgY2F1c2UgYSAxIHNlY29uZCBkZWxheVxuICAgICAqICAgICAgICAgICBkZWxheTogZnVuY3Rpb24oJHEsICR0aW1lb3V0KSB7XG4gICAgICogICAgICAgICAgICAgdmFyIGRlbGF5ID0gJHEuZGVmZXIoKTtcbiAgICAgKiAgICAgICAgICAgICAkdGltZW91dChkZWxheS5yZXNvbHZlLCAxMDAwKTtcbiAgICAgKiAgICAgICAgICAgICByZXR1cm4gZGVsYXkucHJvbWlzZTtcbiAgICAgKiAgICAgICAgICAgfVxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICAgIH0pXG4gICAgICogICAgICAgLndoZW4oJy9Cb29rLzpib29rSWQvY2gvOmNoYXB0ZXJJZCcsIHtcbiAgICAgKiAgICAgICAgIHRlbXBsYXRlVXJsOiAnY2hhcHRlci5odG1sJyxcbiAgICAgKiAgICAgICAgIGNvbnRyb2xsZXI6ICdDaGFwdGVyQ29udHJvbGxlcidcbiAgICAgKiAgICAgICB9KTtcbiAgICAgKlxuICAgICAqICAgICAgIC8vIGNvbmZpZ3VyZSBodG1sNSB0byBnZXQgbGlua3Mgd29ya2luZyBvbiBqc2ZpZGRsZVxuICAgICAqICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgKiAgICAgfSk7XG4gICAgICpcbiAgICAgKiAgIDwvZmlsZT5cbiAgICAgKlxuICAgICAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAqICAgICBpdCgnc2hvdWxkIGxvYWQgYW5kIGNvbXBpbGUgY29ycmVjdCB0ZW1wbGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAqICAgICAgIGVsZW1lbnQoYnkubGlua1RleHQoJ01vYnk6IENoMScpKS5jbGljaygpO1xuICAgICAqICAgICAgIHZhciBjb250ZW50ID0gZWxlbWVudChieS5jc3MoJ1tuZy12aWV3XScpKS5nZXRUZXh0KCk7XG4gICAgICogICAgICAgZXhwZWN0KGNvbnRlbnQpLnRvTWF0Y2goL2NvbnRyb2xsZXJcXDogQ2hhcHRlckNvbnRyb2xsZXIvKTtcbiAgICAgKiAgICAgICBleHBlY3QoY29udGVudCkudG9NYXRjaCgvQm9vayBJZFxcOiBNb2J5Lyk7XG4gICAgICogICAgICAgZXhwZWN0KGNvbnRlbnQpLnRvTWF0Y2goL0NoYXB0ZXIgSWRcXDogMS8pO1xuICAgICAqXG4gICAgICogICAgICAgZWxlbWVudChieS5wYXJ0aWFsTGlua1RleHQoJ1NjYXJsZXQnKSkuY2xpY2soKTtcbiAgICAgKlxuICAgICAqICAgICAgIGNvbnRlbnQgPSBlbGVtZW50KGJ5LmNzcygnW25nLXZpZXddJykpLmdldFRleHQoKTtcbiAgICAgKiAgICAgICBleHBlY3QoY29udGVudCkudG9NYXRjaCgvY29udHJvbGxlclxcOiBCb29rQ29udHJvbGxlci8pO1xuICAgICAqICAgICAgIGV4cGVjdChjb250ZW50KS50b01hdGNoKC9Cb29rIElkXFw6IFNjYXJsZXQvKTtcbiAgICAgKiAgICAgfSk7XG4gICAgICogICA8L2ZpbGU+XG4gICAgICogPC9leGFtcGxlPlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIGV2ZW50XG4gICAgICogQG5hbWUgJHJvdXRlIyRyb3V0ZUNoYW5nZVN0YXJ0XG4gICAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIEJyb2FkY2FzdGVkIGJlZm9yZSBhIHJvdXRlIGNoYW5nZS4gQXQgdGhpcyAgcG9pbnQgdGhlIHJvdXRlIHNlcnZpY2VzIHN0YXJ0c1xuICAgICAqIHJlc29sdmluZyBhbGwgb2YgdGhlIGRlcGVuZGVuY2llcyBuZWVkZWQgZm9yIHRoZSByb3V0ZSBjaGFuZ2UgdG8gb2NjdXIuXG4gICAgICogVHlwaWNhbGx5IHRoaXMgaW52b2x2ZXMgZmV0Y2hpbmcgdGhlIHZpZXcgdGVtcGxhdGUgYXMgd2VsbCBhcyBhbnkgZGVwZW5kZW5jaWVzXG4gICAgICogZGVmaW5lZCBpbiBgcmVzb2x2ZWAgcm91dGUgcHJvcGVydHkuIE9uY2UgIGFsbCBvZiB0aGUgZGVwZW5kZW5jaWVzIGFyZSByZXNvbHZlZFxuICAgICAqIGAkcm91dGVDaGFuZ2VTdWNjZXNzYCBpcyBmaXJlZC5cbiAgICAgKlxuICAgICAqIFRoZSByb3V0ZSBjaGFuZ2UgKGFuZCB0aGUgYCRsb2NhdGlvbmAgY2hhbmdlIHRoYXQgdHJpZ2dlcmVkIGl0KSBjYW4gYmUgcHJldmVudGVkXG4gICAgICogYnkgY2FsbGluZyBgcHJldmVudERlZmF1bHRgIG1ldGhvZCBvZiB0aGUgZXZlbnQuIFNlZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259XG4gICAgICogZm9yIG1vcmUgZGV0YWlscyBhYm91dCBldmVudCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXG4gICAgICogQHBhcmFtIHtSb3V0ZX0gbmV4dCBGdXR1cmUgcm91dGUgaW5mb3JtYXRpb24uXG4gICAgICogQHBhcmFtIHtSb3V0ZX0gY3VycmVudCBDdXJyZW50IHJvdXRlIGluZm9ybWF0aW9uLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIGV2ZW50XG4gICAgICogQG5hbWUgJHJvdXRlIyRyb3V0ZUNoYW5nZVN1Y2Nlc3NcbiAgICAgKiBAZXZlbnRUeXBlIGJyb2FkY2FzdCBvbiByb290IHNjb3BlXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQnJvYWRjYXN0ZWQgYWZ0ZXIgYSByb3V0ZSBkZXBlbmRlbmNpZXMgYXJlIHJlc29sdmVkLlxuICAgICAqIHtAbGluayBuZ1JvdXRlLmRpcmVjdGl2ZTpuZ1ZpZXcgbmdWaWV3fSBsaXN0ZW5zIGZvciB0aGUgZGlyZWN0aXZlXG4gICAgICogdG8gaW5zdGFudGlhdGUgdGhlIGNvbnRyb2xsZXIgYW5kIHJlbmRlciB0aGUgdmlldy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge1JvdXRlfSBjdXJyZW50IEN1cnJlbnQgcm91dGUgaW5mb3JtYXRpb24uXG4gICAgICogQHBhcmFtIHtSb3V0ZXxVbmRlZmluZWR9IHByZXZpb3VzIFByZXZpb3VzIHJvdXRlIGluZm9ybWF0aW9uLCBvciB1bmRlZmluZWQgaWYgY3VycmVudCBpc1xuICAgICAqIGZpcnN0IHJvdXRlIGVudGVyZWQuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgZXZlbnRcbiAgICAgKiBAbmFtZSAkcm91dGUjJHJvdXRlQ2hhbmdlRXJyb3JcbiAgICAgKiBAZXZlbnRUeXBlIGJyb2FkY2FzdCBvbiByb290IHNjb3BlXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQnJvYWRjYXN0ZWQgaWYgYW55IG9mIHRoZSByZXNvbHZlIHByb21pc2VzIGFyZSByZWplY3RlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdFxuICAgICAqIEBwYXJhbSB7Um91dGV9IGN1cnJlbnQgQ3VycmVudCByb3V0ZSBpbmZvcm1hdGlvbi5cbiAgICAgKiBAcGFyYW0ge1JvdXRlfSBwcmV2aW91cyBQcmV2aW91cyByb3V0ZSBpbmZvcm1hdGlvbi5cbiAgICAgKiBAcGFyYW0ge1JvdXRlfSByZWplY3Rpb24gUmVqZWN0aW9uIG9mIHRoZSBwcm9taXNlLiBVc3VhbGx5IHRoZSBlcnJvciBvZiB0aGUgZmFpbGVkIHByb21pc2UuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgZXZlbnRcbiAgICAgKiBAbmFtZSAkcm91dGUjJHJvdXRlVXBkYXRlXG4gICAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogVGhlIGByZWxvYWRPblNlYXJjaGAgcHJvcGVydHkgaGFzIGJlZW4gc2V0IHRvIGZhbHNlLCBhbmQgd2UgYXJlIHJldXNpbmcgdGhlIHNhbWVcbiAgICAgKiBpbnN0YW5jZSBvZiB0aGUgQ29udHJvbGxlci5cbiAgICAgKi9cblxuICAgIHZhciBmb3JjZVJlbG9hZCA9IGZhbHNlLFxuICAgICAgICBwcmVwYXJlZFJvdXRlLFxuICAgICAgICBwcmVwYXJlZFJvdXRlSXNVcGRhdGVPbmx5LFxuICAgICAgICAkcm91dGUgPSB7XG4gICAgICAgICAgcm91dGVzOiByb3V0ZXMsXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgJHJvdXRlI3JlbG9hZFxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogQ2F1c2VzIGAkcm91dGVgIHNlcnZpY2UgdG8gcmVsb2FkIHRoZSBjdXJyZW50IHJvdXRlIGV2ZW4gaWZcbiAgICAgICAgICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbn0gaGFzbid0IGNoYW5nZWQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBBcyBhIHJlc3VsdCBvZiB0aGF0LCB7QGxpbmsgbmdSb3V0ZS5kaXJlY3RpdmU6bmdWaWV3IG5nVmlld31cbiAgICAgICAgICAgKiBjcmVhdGVzIG5ldyBzY29wZSBhbmQgcmVpbnN0YW50aWF0ZXMgdGhlIGNvbnRyb2xsZXIuXG4gICAgICAgICAgICovXG4gICAgICAgICAgcmVsb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZvcmNlUmVsb2FkID0gdHJ1ZTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gRG9uJ3Qgc3VwcG9ydCBjYW5jZWxsYXRpb24gb2YgYSByZWxvYWQgZm9yIG5vdy4uLlxuICAgICAgICAgICAgICBwcmVwYXJlUm91dGUoKTtcbiAgICAgICAgICAgICAgY29tbWl0Um91dGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgJHJvdXRlI3VwZGF0ZVBhcmFtc1xuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogQ2F1c2VzIGAkcm91dGVgIHNlcnZpY2UgdG8gdXBkYXRlIHRoZSBjdXJyZW50IFVSTCwgcmVwbGFjaW5nXG4gICAgICAgICAgICogY3VycmVudCByb3V0ZSBwYXJhbWV0ZXJzIHdpdGggdGhvc2Ugc3BlY2lmaWVkIGluIGBuZXdQYXJhbXNgLlxuICAgICAgICAgICAqIFByb3ZpZGVkIHByb3BlcnR5IG5hbWVzIHRoYXQgbWF0Y2ggdGhlIHJvdXRlJ3MgcGF0aCBzZWdtZW50XG4gICAgICAgICAgICogZGVmaW5pdGlvbnMgd2lsbCBiZSBpbnRlcnBvbGF0ZWQgaW50byB0aGUgbG9jYXRpb24ncyBwYXRoLCB3aGlsZVxuICAgICAgICAgICAqIHJlbWFpbmluZyBwcm9wZXJ0aWVzIHdpbGwgYmUgdHJlYXRlZCBhcyBxdWVyeSBwYXJhbXMuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSBuZXdQYXJhbXMgbWFwcGluZyBvZiBVUkwgcGFyYW1ldGVyIG5hbWVzIHRvIHZhbHVlc1xuICAgICAgICAgICAqL1xuICAgICAgICAgIHVwZGF0ZVBhcmFtczogZnVuY3Rpb24obmV3UGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50ICYmIHRoaXMuY3VycmVudC4kJHJvdXRlKSB7XG4gICAgICAgICAgICAgIG5ld1BhcmFtcyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCB0aGlzLmN1cnJlbnQucGFyYW1zLCBuZXdQYXJhbXMpO1xuICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChpbnRlcnBvbGF0ZSh0aGlzLmN1cnJlbnQuJCRyb3V0ZS5vcmlnaW5hbFBhdGgsIG5ld1BhcmFtcykpO1xuICAgICAgICAgICAgICAvLyBpbnRlcnBvbGF0ZSBtb2RpZmllcyBuZXdQYXJhbXMsIG9ubHkgcXVlcnkgcGFyYW1zIGFyZSBsZWZ0XG4gICAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2gobmV3UGFyYW1zKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93ICRyb3V0ZU1pbkVycignbm9yb3V0JywgJ1RyaWVkIHVwZGF0aW5nIHJvdXRlIHdoZW4gd2l0aCBubyBjdXJyZW50IHJvdXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgcHJlcGFyZVJvdXRlKTtcbiAgICAkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGNvbW1pdFJvdXRlKTtcblxuICAgIHJldHVybiAkcm91dGU7XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIG9uIHtzdHJpbmd9IGN1cnJlbnQgdXJsXG4gICAgICogQHBhcmFtIHJvdXRlIHtPYmplY3R9IHJvdXRlIHJlZ2V4cCB0byBtYXRjaCB0aGUgdXJsIGFnYWluc3RcbiAgICAgKiBAcmV0dXJuIHs/T2JqZWN0fVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQ2hlY2sgaWYgdGhlIHJvdXRlIG1hdGNoZXMgdGhlIGN1cnJlbnQgdXJsLlxuICAgICAqXG4gICAgICogSW5zcGlyZWQgYnkgbWF0Y2ggaW5cbiAgICAgKiB2aXNpb25tZWRpYS9leHByZXNzL2xpYi9yb3V0ZXIvcm91dGVyLmpzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN3aXRjaFJvdXRlTWF0Y2hlcihvbiwgcm91dGUpIHtcbiAgICAgIHZhciBrZXlzID0gcm91dGUua2V5cyxcbiAgICAgICAgICBwYXJhbXMgPSB7fTtcblxuICAgICAgaWYgKCFyb3V0ZS5yZWdleHApIHJldHVybiBudWxsO1xuXG4gICAgICB2YXIgbSA9IHJvdXRlLnJlZ2V4cC5leGVjKG9uKTtcbiAgICAgIGlmICghbSkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSBtLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2kgLSAxXTtcblxuICAgICAgICB2YXIgdmFsID0gbVtpXTtcblxuICAgICAgICBpZiAoa2V5ICYmIHZhbCkge1xuICAgICAgICAgIHBhcmFtc1trZXkubmFtZV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJlcGFyZVJvdXRlKCRsb2NhdGlvbkV2ZW50KSB7XG4gICAgICB2YXIgbGFzdFJvdXRlID0gJHJvdXRlLmN1cnJlbnQ7XG5cbiAgICAgIHByZXBhcmVkUm91dGUgPSBwYXJzZVJvdXRlKCk7XG4gICAgICBwcmVwYXJlZFJvdXRlSXNVcGRhdGVPbmx5ID0gcHJlcGFyZWRSb3V0ZSAmJiBsYXN0Um91dGUgJiYgcHJlcGFyZWRSb3V0ZS4kJHJvdXRlID09PSBsYXN0Um91dGUuJCRyb3V0ZVxuICAgICAgICAgICYmIGFuZ3VsYXIuZXF1YWxzKHByZXBhcmVkUm91dGUucGF0aFBhcmFtcywgbGFzdFJvdXRlLnBhdGhQYXJhbXMpXG4gICAgICAgICAgJiYgIXByZXBhcmVkUm91dGUucmVsb2FkT25TZWFyY2ggJiYgIWZvcmNlUmVsb2FkO1xuXG4gICAgICBpZiAoIXByZXBhcmVkUm91dGVJc1VwZGF0ZU9ubHkgJiYgKGxhc3RSb3V0ZSB8fCBwcmVwYXJlZFJvdXRlKSkge1xuICAgICAgICBpZiAoJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckcm91dGVDaGFuZ2VTdGFydCcsIHByZXBhcmVkUm91dGUsIGxhc3RSb3V0ZSkuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgIGlmICgkbG9jYXRpb25FdmVudCkge1xuICAgICAgICAgICAgJGxvY2F0aW9uRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21taXRSb3V0ZSgpIHtcbiAgICAgIHZhciBsYXN0Um91dGUgPSAkcm91dGUuY3VycmVudDtcbiAgICAgIHZhciBuZXh0Um91dGUgPSBwcmVwYXJlZFJvdXRlO1xuXG4gICAgICBpZiAocHJlcGFyZWRSb3V0ZUlzVXBkYXRlT25seSkge1xuICAgICAgICBsYXN0Um91dGUucGFyYW1zID0gbmV4dFJvdXRlLnBhcmFtcztcbiAgICAgICAgYW5ndWxhci5jb3B5KGxhc3RSb3V0ZS5wYXJhbXMsICRyb3V0ZVBhcmFtcyk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHJvdXRlVXBkYXRlJywgbGFzdFJvdXRlKTtcbiAgICAgIH0gZWxzZSBpZiAobmV4dFJvdXRlIHx8IGxhc3RSb3V0ZSkge1xuICAgICAgICBmb3JjZVJlbG9hZCA9IGZhbHNlO1xuICAgICAgICAkcm91dGUuY3VycmVudCA9IG5leHRSb3V0ZTtcbiAgICAgICAgaWYgKG5leHRSb3V0ZSkge1xuICAgICAgICAgIGlmIChuZXh0Um91dGUucmVkaXJlY3RUbykge1xuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcobmV4dFJvdXRlLnJlZGlyZWN0VG8pKSB7XG4gICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKGludGVycG9sYXRlKG5leHRSb3V0ZS5yZWRpcmVjdFRvLCBuZXh0Um91dGUucGFyYW1zKSkuc2VhcmNoKG5leHRSb3V0ZS5wYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAkbG9jYXRpb24udXJsKG5leHRSb3V0ZS5yZWRpcmVjdFRvKG5leHRSb3V0ZS5wYXRoUGFyYW1zLCAkbG9jYXRpb24ucGF0aCgpLCAkbG9jYXRpb24uc2VhcmNoKCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICRxLndoZW4obmV4dFJvdXRlKS5cbiAgICAgICAgICB0aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKG5leHRSb3V0ZSkge1xuICAgICAgICAgICAgICB2YXIgbG9jYWxzID0gYW5ndWxhci5leHRlbmQoe30sIG5leHRSb3V0ZS5yZXNvbHZlKSxcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLCB0ZW1wbGF0ZVVybDtcblxuICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobG9jYWxzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgbG9jYWxzW2tleV0gPSBhbmd1bGFyLmlzU3RyaW5nKHZhbHVlKSA/XG4gICAgICAgICAgICAgICAgICAgICRpbmplY3Rvci5nZXQodmFsdWUpIDogJGluamVjdG9yLmludm9rZSh2YWx1ZSwgbnVsbCwgbnVsbCwga2V5KTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRlbXBsYXRlID0gbmV4dFJvdXRlLnRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24odGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlKG5leHRSb3V0ZS5wYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0ZW1wbGF0ZVVybCA9IG5leHRSb3V0ZS50ZW1wbGF0ZVVybCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKHRlbXBsYXRlVXJsKSkge1xuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgPSB0ZW1wbGF0ZVVybChuZXh0Um91dGUucGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgPSAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybCh0ZW1wbGF0ZVVybCk7XG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRlbXBsYXRlVXJsKSkge1xuICAgICAgICAgICAgICAgICAgbmV4dFJvdXRlLmxvYWRlZFRlbXBsYXRlVXJsID0gdGVtcGxhdGVVcmw7XG4gICAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9ICR0ZW1wbGF0ZVJlcXVlc3QodGVtcGxhdGVVcmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxzWyckdGVtcGxhdGUnXSA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiAkcS5hbGwobG9jYWxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5cbiAgICAgICAgICAvLyBhZnRlciByb3V0ZSBjaGFuZ2VcbiAgICAgICAgICB0aGVuKGZ1bmN0aW9uKGxvY2Fscykge1xuICAgICAgICAgICAgaWYgKG5leHRSb3V0ZSA9PSAkcm91dGUuY3VycmVudCkge1xuICAgICAgICAgICAgICBpZiAobmV4dFJvdXRlKSB7XG4gICAgICAgICAgICAgICAgbmV4dFJvdXRlLmxvY2FscyA9IGxvY2FscztcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkobmV4dFJvdXRlLnBhcmFtcywgJHJvdXRlUGFyYW1zKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBuZXh0Um91dGUsIGxhc3RSb3V0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChuZXh0Um91dGUgPT0gJHJvdXRlLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckcm91dGVDaGFuZ2VFcnJvcicsIG5leHRSb3V0ZSwgbGFzdFJvdXRlLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSB0aGUgY3VycmVudCBhY3RpdmUgcm91dGUsIGJ5IG1hdGNoaW5nIGl0IGFnYWluc3QgdGhlIFVSTFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhcnNlUm91dGUoKSB7XG4gICAgICAvLyBNYXRjaCBhIHJvdXRlXG4gICAgICB2YXIgcGFyYW1zLCBtYXRjaDtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChyb3V0ZXMsIGZ1bmN0aW9uKHJvdXRlLCBwYXRoKSB7XG4gICAgICAgIGlmICghbWF0Y2ggJiYgKHBhcmFtcyA9IHN3aXRjaFJvdXRlTWF0Y2hlcigkbG9jYXRpb24ucGF0aCgpLCByb3V0ZSkpKSB7XG4gICAgICAgICAgbWF0Y2ggPSBpbmhlcml0KHJvdXRlLCB7XG4gICAgICAgICAgICBwYXJhbXM6IGFuZ3VsYXIuZXh0ZW5kKHt9LCAkbG9jYXRpb24uc2VhcmNoKCksIHBhcmFtcyksXG4gICAgICAgICAgICBwYXRoUGFyYW1zOiBwYXJhbXN9KTtcbiAgICAgICAgICBtYXRjaC4kJHJvdXRlID0gcm91dGU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gTm8gcm91dGUgbWF0Y2hlZDsgZmFsbGJhY2sgdG8gXCJvdGhlcndpc2VcIiByb3V0ZVxuICAgICAgcmV0dXJuIG1hdGNoIHx8IHJvdXRlc1tudWxsXSAmJiBpbmhlcml0KHJvdXRlc1tudWxsXSwge3BhcmFtczoge30sIHBhdGhQYXJhbXM6e319KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBpbnRlcnBvbGF0aW9uIG9mIHRoZSByZWRpcmVjdCBwYXRoIHdpdGggdGhlIHBhcmFtZXRlcnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnRlcnBvbGF0ZShzdHJpbmcsIHBhcmFtcykge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgYW5ndWxhci5mb3JFYWNoKChzdHJpbmcgfHwgJycpLnNwbGl0KCc6JyksIGZ1bmN0aW9uKHNlZ21lbnQsIGkpIHtcbiAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICByZXN1bHQucHVzaChzZWdtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgc2VnbWVudE1hdGNoID0gc2VnbWVudC5tYXRjaCgvKFxcdyspKD86Wz8qXSk/KC4qKS8pO1xuICAgICAgICAgIHZhciBrZXkgPSBzZWdtZW50TWF0Y2hbMV07XG4gICAgICAgICAgcmVzdWx0LnB1c2gocGFyYW1zW2tleV0pO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHNlZ21lbnRNYXRjaFsyXSB8fCAnJyk7XG4gICAgICAgICAgZGVsZXRlIHBhcmFtc1trZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQuam9pbignJyk7XG4gICAgfVxuICB9XTtcbn1cblxubmdSb3V0ZU1vZHVsZS5wcm92aWRlcignJHJvdXRlUGFyYW1zJywgJFJvdXRlUGFyYW1zUHJvdmlkZXIpO1xuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRyb3V0ZVBhcmFtc1xuICogQHJlcXVpcmVzICRyb3V0ZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGAkcm91dGVQYXJhbXNgIHNlcnZpY2UgYWxsb3dzIHlvdSB0byByZXRyaWV2ZSB0aGUgY3VycmVudCBzZXQgb2Ygcm91dGUgcGFyYW1ldGVycy5cbiAqXG4gKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nUm91dGUgYG5nUm91dGVgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxuICpcbiAqIFRoZSByb3V0ZSBwYXJhbWV0ZXJzIGFyZSBhIGNvbWJpbmF0aW9uIG9mIHtAbGluayBuZy4kbG9jYXRpb24gYCRsb2NhdGlvbmB9J3NcbiAqIHtAbGluayBuZy4kbG9jYXRpb24jc2VhcmNoIGBzZWFyY2goKWB9IGFuZCB7QGxpbmsgbmcuJGxvY2F0aW9uI3BhdGggYHBhdGgoKWB9LlxuICogVGhlIGBwYXRoYCBwYXJhbWV0ZXJzIGFyZSBleHRyYWN0ZWQgd2hlbiB0aGUge0BsaW5rIG5nUm91dGUuJHJvdXRlIGAkcm91dGVgfSBwYXRoIGlzIG1hdGNoZWQuXG4gKlxuICogSW4gY2FzZSBvZiBwYXJhbWV0ZXIgbmFtZSBjb2xsaXNpb24sIGBwYXRoYCBwYXJhbXMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgYHNlYXJjaGAgcGFyYW1zLlxuICpcbiAqIFRoZSBzZXJ2aWNlIGd1YXJhbnRlZXMgdGhhdCB0aGUgaWRlbnRpdHkgb2YgdGhlIGAkcm91dGVQYXJhbXNgIG9iamVjdCB3aWxsIHJlbWFpbiB1bmNoYW5nZWRcbiAqIChidXQgaXRzIHByb3BlcnRpZXMgd2lsbCBsaWtlbHkgY2hhbmdlKSBldmVuIHdoZW4gYSByb3V0ZSBjaGFuZ2Ugb2NjdXJzLlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgYCRyb3V0ZVBhcmFtc2AgYXJlIG9ubHkgdXBkYXRlZCAqYWZ0ZXIqIGEgcm91dGUgY2hhbmdlIGNvbXBsZXRlcyBzdWNjZXNzZnVsbHkuXG4gKiBUaGlzIG1lYW5zIHRoYXQgeW91IGNhbm5vdCByZWx5IG9uIGAkcm91dGVQYXJhbXNgIGJlaW5nIGNvcnJlY3QgaW4gcm91dGUgcmVzb2x2ZSBmdW5jdGlvbnMuXG4gKiBJbnN0ZWFkIHlvdSBjYW4gdXNlIGAkcm91dGUuY3VycmVudC5wYXJhbXNgIHRvIGFjY2VzcyB0aGUgbmV3IHJvdXRlJ3MgcGFyYW1ldGVycy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBganNcbiAqICAvLyBHaXZlbjpcbiAqICAvLyBVUkw6IGh0dHA6Ly9zZXJ2ZXIuY29tL2luZGV4Lmh0bWwjL0NoYXB0ZXIvMS9TZWN0aW9uLzI/c2VhcmNoPW1vYnlcbiAqICAvLyBSb3V0ZTogL0NoYXB0ZXIvOmNoYXB0ZXJJZC9TZWN0aW9uLzpzZWN0aW9uSWRcbiAqICAvL1xuICogIC8vIFRoZW5cbiAqICAkcm91dGVQYXJhbXMgPT0+IHtjaGFwdGVySWQ6JzEnLCBzZWN0aW9uSWQ6JzInLCBzZWFyY2g6J21vYnknfVxuICogYGBgXG4gKi9cbmZ1bmN0aW9uICRSb3V0ZVBhcmFtc1Byb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHt9OyB9O1xufVxuXG5uZ1JvdXRlTW9kdWxlLmRpcmVjdGl2ZSgnbmdWaWV3JywgbmdWaWV3RmFjdG9yeSk7XG5uZ1JvdXRlTW9kdWxlLmRpcmVjdGl2ZSgnbmdWaWV3JywgbmdWaWV3RmlsbENvbnRlbnRGYWN0b3J5KTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nVmlld1xuICogQHJlc3RyaWN0IEVDQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogIyBPdmVydmlld1xuICogYG5nVmlld2AgaXMgYSBkaXJlY3RpdmUgdGhhdCBjb21wbGVtZW50cyB0aGUge0BsaW5rIG5nUm91dGUuJHJvdXRlICRyb3V0ZX0gc2VydmljZSBieVxuICogaW5jbHVkaW5nIHRoZSByZW5kZXJlZCB0ZW1wbGF0ZSBvZiB0aGUgY3VycmVudCByb3V0ZSBpbnRvIHRoZSBtYWluIGxheW91dCAoYGluZGV4Lmh0bWxgKSBmaWxlLlxuICogRXZlcnkgdGltZSB0aGUgY3VycmVudCByb3V0ZSBjaGFuZ2VzLCB0aGUgaW5jbHVkZWQgdmlldyBjaGFuZ2VzIHdpdGggaXQgYWNjb3JkaW5nIHRvIHRoZVxuICogY29uZmlndXJhdGlvbiBvZiB0aGUgYCRyb3V0ZWAgc2VydmljZS5cbiAqXG4gKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nUm91dGUgYG5nUm91dGVgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiBlbnRlciAtIGFuaW1hdGlvbiBpcyB1c2VkIHRvIGJyaW5nIG5ldyBjb250ZW50IGludG8gdGhlIGJyb3dzZXIuXG4gKiBsZWF2ZSAtIGFuaW1hdGlvbiBpcyB1c2VkIHRvIGFuaW1hdGUgZXhpc3RpbmcgY29udGVudCBhd2F5LlxuICpcbiAqIFRoZSBlbnRlciBhbmQgbGVhdmUgYW5pbWF0aW9uIG9jY3VyIGNvbmN1cnJlbnRseS5cbiAqXG4gKiBAc2NvcGVcbiAqIEBwcmlvcml0eSA0MDBcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb25sb2FkIEV4cHJlc3Npb24gdG8gZXZhbHVhdGUgd2hlbmV2ZXIgdGhlIHZpZXcgdXBkYXRlcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZz19IGF1dG9zY3JvbGwgV2hldGhlciBgbmdWaWV3YCBzaG91bGQgY2FsbCB7QGxpbmsgbmcuJGFuY2hvclNjcm9sbFxuICogICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsfSB0byBzY3JvbGwgdGhlIHZpZXdwb3J0IGFmdGVyIHRoZSB2aWV3IGlzIHVwZGF0ZWQuXG4gKlxuICogICAgICAgICAgICAgICAgICAtIElmIHRoZSBhdHRyaWJ1dGUgaXMgbm90IHNldCwgZGlzYWJsZSBzY3JvbGxpbmcuXG4gKiAgICAgICAgICAgICAgICAgIC0gSWYgdGhlIGF0dHJpYnV0ZSBpcyBzZXQgd2l0aG91dCB2YWx1ZSwgZW5hYmxlIHNjcm9sbGluZy5cbiAqICAgICAgICAgICAgICAgICAgLSBPdGhlcndpc2UgZW5hYmxlIHNjcm9sbGluZyBvbmx5IGlmIHRoZSBgYXV0b3Njcm9sbGAgYXR0cmlidXRlIHZhbHVlIGV2YWx1YXRlZFxuICogICAgICAgICAgICAgICAgICAgIGFzIGFuIGV4cHJlc3Npb24geWllbGRzIGEgdHJ1dGh5IHZhbHVlLlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmdWaWV3LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIm5nVmlld0V4YW1wbGVcIlxuICAgICAgICAgICAgIGRlcHM9XCJhbmd1bGFyLXJvdXRlLmpzO2FuZ3VsYXItYW5pbWF0ZS5qc1wiXG4gICAgICAgICAgICAgYW5pbWF0aW9ucz1cInRydWVcIiBmaXhCYXNlPVwidHJ1ZVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTWFpbkN0cmwgYXMgbWFpblwiPlxuICAgICAgICAgIENob29zZTpcbiAgICAgICAgICA8YSBocmVmPVwiQm9vay9Nb2J5XCI+TW9ieTwvYT4gfFxuICAgICAgICAgIDxhIGhyZWY9XCJCb29rL01vYnkvY2gvMVwiPk1vYnk6IENoMTwvYT4gfFxuICAgICAgICAgIDxhIGhyZWY9XCJCb29rL0dhdHNieVwiPkdhdHNieTwvYT4gfFxuICAgICAgICAgIDxhIGhyZWY9XCJCb29rL0dhdHNieS9jaC80P2tleT12YWx1ZVwiPkdhdHNieTogQ2g0PC9hPiB8XG4gICAgICAgICAgPGEgaHJlZj1cIkJvb2svU2NhcmxldFwiPlNjYXJsZXQgTGV0dGVyPC9hPjxici8+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidmlldy1hbmltYXRlLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBuZy12aWV3IGNsYXNzPVwidmlldy1hbmltYXRlXCI+PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGhyIC8+XG5cbiAgICAgICAgICA8cHJlPiRsb2NhdGlvbi5wYXRoKCkgPSB7e21haW4uJGxvY2F0aW9uLnBhdGgoKX19PC9wcmU+XG4gICAgICAgICAgPHByZT4kcm91dGUuY3VycmVudC50ZW1wbGF0ZVVybCA9IHt7bWFpbi4kcm91dGUuY3VycmVudC50ZW1wbGF0ZVVybH19PC9wcmU+XG4gICAgICAgICAgPHByZT4kcm91dGUuY3VycmVudC5wYXJhbXMgPSB7e21haW4uJHJvdXRlLmN1cnJlbnQucGFyYW1zfX08L3ByZT5cbiAgICAgICAgICA8cHJlPiRyb3V0ZVBhcmFtcyA9IHt7bWFpbi4kcm91dGVQYXJhbXN9fTwvcHJlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZmlsZT5cblxuICAgICAgPGZpbGUgbmFtZT1cImJvb2suaHRtbFwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIGNvbnRyb2xsZXI6IHt7Ym9vay5uYW1lfX08YnIgLz5cbiAgICAgICAgICBCb29rIElkOiB7e2Jvb2sucGFyYW1zLmJvb2tJZH19PGJyIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9maWxlPlxuXG4gICAgICA8ZmlsZSBuYW1lPVwiY2hhcHRlci5odG1sXCI+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgY29udHJvbGxlcjoge3tjaGFwdGVyLm5hbWV9fTxiciAvPlxuICAgICAgICAgIEJvb2sgSWQ6IHt7Y2hhcHRlci5wYXJhbXMuYm9va0lkfX08YnIgLz5cbiAgICAgICAgICBDaGFwdGVyIElkOiB7e2NoYXB0ZXIucGFyYW1zLmNoYXB0ZXJJZH19XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9maWxlPlxuXG4gICAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgICAgLnZpZXctYW5pbWF0ZS1jb250YWluZXIge1xuICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xuICAgICAgICAgIGhlaWdodDoxMDBweCFpbXBvcnRhbnQ7XG4gICAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICAgIGhlaWdodDo0MHB4O1xuICAgICAgICAgIG92ZXJmbG93OmhpZGRlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC52aWV3LWFuaW1hdGUge1xuICAgICAgICAgIHBhZGRpbmc6MTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC52aWV3LWFuaW1hdGUubmctZW50ZXIsIC52aWV3LWFuaW1hdGUubmctbGVhdmUge1xuICAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAxLjVzO1xuICAgICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMS41cztcblxuICAgICAgICAgIGRpc3BsYXk6YmxvY2s7XG4gICAgICAgICAgd2lkdGg6MTAwJTtcbiAgICAgICAgICBib3JkZXItbGVmdDoxcHggc29saWQgYmxhY2s7XG5cbiAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgICB0b3A6MDtcbiAgICAgICAgICBsZWZ0OjA7XG4gICAgICAgICAgcmlnaHQ6MDtcbiAgICAgICAgICBib3R0b206MDtcbiAgICAgICAgICBwYWRkaW5nOjEwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAudmlldy1hbmltYXRlLm5nLWVudGVyIHtcbiAgICAgICAgICBsZWZ0OjEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgLnZpZXctYW5pbWF0ZS5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xuICAgICAgICAgIGxlZnQ6MDtcbiAgICAgICAgfVxuICAgICAgICAudmlldy1hbmltYXRlLm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSB7XG4gICAgICAgICAgbGVmdDotMTAwJTtcbiAgICAgICAgfVxuICAgICAgPC9maWxlPlxuXG4gICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ1ZpZXdFeGFtcGxlJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZSddKVxuICAgICAgICAgIC5jb25maWcoWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsXG4gICAgICAgICAgICBmdW5jdGlvbigkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgICAgICAgICAud2hlbignL0Jvb2svOmJvb2tJZCcsIHtcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYm9vay5odG1sJyxcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdCb29rQ3RybCcsXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICdib29rJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLndoZW4oJy9Cb29rLzpib29rSWQvY2gvOmNoYXB0ZXJJZCcsIHtcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY2hhcHRlci5odG1sJyxcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDaGFwdGVyQ3RybCcsXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICdjaGFwdGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgICAgICB9XSlcbiAgICAgICAgICAuY29udHJvbGxlcignTWFpbkN0cmwnLCBbJyRyb3V0ZScsICckcm91dGVQYXJhbXMnLCAnJGxvY2F0aW9uJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCRyb3V0ZSwgJHJvdXRlUGFyYW1zLCAkbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy4kcm91dGUgPSAkcm91dGU7XG4gICAgICAgICAgICAgIHRoaXMuJGxvY2F0aW9uID0gJGxvY2F0aW9uO1xuICAgICAgICAgICAgICB0aGlzLiRyb3V0ZVBhcmFtcyA9ICRyb3V0ZVBhcmFtcztcbiAgICAgICAgICB9XSlcbiAgICAgICAgICAuY29udHJvbGxlcignQm9va0N0cmwnLCBbJyRyb3V0ZVBhcmFtcycsIGZ1bmN0aW9uKCRyb3V0ZVBhcmFtcykge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gXCJCb29rQ3RybFwiO1xuICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSAkcm91dGVQYXJhbXM7XG4gICAgICAgICAgfV0pXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0NoYXB0ZXJDdHJsJywgWyckcm91dGVQYXJhbXMnLCBmdW5jdGlvbigkcm91dGVQYXJhbXMpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IFwiQ2hhcHRlckN0cmxcIjtcbiAgICAgICAgICAgIHRoaXMucGFyYW1zID0gJHJvdXRlUGFyYW1zO1xuICAgICAgICAgIH1dKTtcblxuICAgICAgPC9maWxlPlxuXG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgbG9hZCBhbmQgY29tcGlsZSBjb3JyZWN0IHRlbXBsYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudChieS5saW5rVGV4dCgnTW9ieTogQ2gxJykpLmNsaWNrKCk7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSBlbGVtZW50KGJ5LmNzcygnW25nLXZpZXddJykpLmdldFRleHQoKTtcbiAgICAgICAgICBleHBlY3QoY29udGVudCkudG9NYXRjaCgvY29udHJvbGxlclxcOiBDaGFwdGVyQ3RybC8pO1xuICAgICAgICAgIGV4cGVjdChjb250ZW50KS50b01hdGNoKC9Cb29rIElkXFw6IE1vYnkvKTtcbiAgICAgICAgICBleHBlY3QoY29udGVudCkudG9NYXRjaCgvQ2hhcHRlciBJZFxcOiAxLyk7XG5cbiAgICAgICAgICBlbGVtZW50KGJ5LnBhcnRpYWxMaW5rVGV4dCgnU2NhcmxldCcpKS5jbGljaygpO1xuXG4gICAgICAgICAgY29udGVudCA9IGVsZW1lbnQoYnkuY3NzKCdbbmctdmlld10nKSkuZ2V0VGV4dCgpO1xuICAgICAgICAgIGV4cGVjdChjb250ZW50KS50b01hdGNoKC9jb250cm9sbGVyXFw6IEJvb2tDdHJsLyk7XG4gICAgICAgICAgZXhwZWN0KGNvbnRlbnQpLnRvTWF0Y2goL0Jvb2sgSWRcXDogU2NhcmxldC8pO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBldmVudFxuICogQG5hbWUgbmdWaWV3IyR2aWV3Q29udGVudExvYWRlZFxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBjdXJyZW50IG5nVmlldyBzY29wZVxuICogQGRlc2NyaXB0aW9uXG4gKiBFbWl0dGVkIGV2ZXJ5IHRpbWUgdGhlIG5nVmlldyBjb250ZW50IGlzIHJlbG9hZGVkLlxuICovXG5uZ1ZpZXdGYWN0b3J5LiRpbmplY3QgPSBbJyRyb3V0ZScsICckYW5jaG9yU2Nyb2xsJywgJyRhbmltYXRlJ107XG5mdW5jdGlvbiBuZ1ZpZXdGYWN0b3J5KCRyb3V0ZSwgJGFuY2hvclNjcm9sbCwgJGFuaW1hdGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VDQScsXG4gICAgdGVybWluYWw6IHRydWUsXG4gICAgcHJpb3JpdHk6IDQwMCxcbiAgICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsICRlbGVtZW50LCBhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xuICAgICAgICB2YXIgY3VycmVudFNjb3BlLFxuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQsXG4gICAgICAgICAgICBwcmV2aW91c0xlYXZlQW5pbWF0aW9uLFxuICAgICAgICAgICAgYXV0b1Njcm9sbEV4cCA9IGF0dHIuYXV0b3Njcm9sbCxcbiAgICAgICAgICAgIG9ubG9hZEV4cCA9IGF0dHIub25sb2FkIHx8ICcnO1xuXG4gICAgICAgIHNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIHVwZGF0ZSk7XG4gICAgICAgIHVwZGF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFudXBMYXN0VmlldygpIHtcbiAgICAgICAgICBpZiAocHJldmlvdXNMZWF2ZUFuaW1hdGlvbikge1xuICAgICAgICAgICAgJGFuaW1hdGUuY2FuY2VsKHByZXZpb3VzTGVhdmVBbmltYXRpb24pO1xuICAgICAgICAgICAgcHJldmlvdXNMZWF2ZUFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGN1cnJlbnRTY29wZSkge1xuICAgICAgICAgICAgY3VycmVudFNjb3BlLiRkZXN0cm95KCk7XG4gICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHByZXZpb3VzTGVhdmVBbmltYXRpb24gPSAkYW5pbWF0ZS5sZWF2ZShjdXJyZW50RWxlbWVudCk7XG4gICAgICAgICAgICBwcmV2aW91c0xlYXZlQW5pbWF0aW9uLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHByZXZpb3VzTGVhdmVBbmltYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICAgIHZhciBsb2NhbHMgPSAkcm91dGUuY3VycmVudCAmJiAkcm91dGUuY3VycmVudC5sb2NhbHMsXG4gICAgICAgICAgICAgIHRlbXBsYXRlID0gbG9jYWxzICYmIGxvY2Fscy4kdGVtcGxhdGU7XG5cbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGVtcGxhdGUpKSB7XG4gICAgICAgICAgICB2YXIgbmV3U2NvcGUgPSBzY29wZS4kbmV3KCk7XG4gICAgICAgICAgICB2YXIgY3VycmVudCA9ICRyb3V0ZS5jdXJyZW50O1xuXG4gICAgICAgICAgICAvLyBOb3RlOiBUaGlzIHdpbGwgYWxzbyBsaW5rIGFsbCBjaGlsZHJlbiBvZiBuZy12aWV3IHRoYXQgd2VyZSBjb250YWluZWQgaW4gdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAvLyBodG1sLiBJZiB0aGF0IGNvbnRlbnQgY29udGFpbnMgY29udHJvbGxlcnMsIC4uLiB0aGV5IGNvdWxkIHBvbGx1dGUvY2hhbmdlIHRoZSBzY29wZS5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHVzaW5nIG5nLXZpZXcgb24gYW4gZWxlbWVudCB3aXRoIGFkZGl0aW9uYWwgY29udGVudCBkb2VzIG5vdCBtYWtlIHNlbnNlLi4uXG4gICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW4ndCByZW1vdmUgdGhlbSBpbiB0aGUgY2xvbmVBdHRjaEZuIG9mICR0cmFuc2NsdWRlIGFzIHRoYXRcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIGlzIGNhbGxlZCBiZWZvcmUgbGlua2luZyB0aGUgY29udGVudCwgd2hpY2ggd291bGQgYXBwbHkgY2hpbGRcbiAgICAgICAgICAgIC8vIGRpcmVjdGl2ZXMgdG8gbm9uIGV4aXN0aW5nIGVsZW1lbnRzLlxuICAgICAgICAgICAgdmFyIGNsb25lID0gJHRyYW5zY2x1ZGUobmV3U2NvcGUsIGZ1bmN0aW9uKGNsb25lKSB7XG4gICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGNsb25lLCBudWxsLCBjdXJyZW50RWxlbWVudCB8fCAkZWxlbWVudCkudGhlbihmdW5jdGlvbiBvbk5nVmlld0VudGVyKCkge1xuICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChhdXRvU2Nyb2xsRXhwKVxuICAgICAgICAgICAgICAgICAgJiYgKCFhdXRvU2Nyb2xsRXhwIHx8IHNjb3BlLiRldmFsKGF1dG9TY3JvbGxFeHApKSkge1xuICAgICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGNsZWFudXBMYXN0VmlldygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY2xvbmU7XG4gICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBjdXJyZW50LnNjb3BlID0gbmV3U2NvcGU7XG4gICAgICAgICAgICBjdXJyZW50U2NvcGUuJGVtaXQoJyR2aWV3Q29udGVudExvYWRlZCcpO1xuICAgICAgICAgICAgY3VycmVudFNjb3BlLiRldmFsKG9ubG9hZEV4cCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsZWFudXBMYXN0VmlldygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLy8gVGhpcyBkaXJlY3RpdmUgaXMgY2FsbGVkIGR1cmluZyB0aGUgJHRyYW5zY2x1ZGUgY2FsbCBvZiB0aGUgZmlyc3QgYG5nVmlld2AgZGlyZWN0aXZlLlxuLy8gSXQgd2lsbCByZXBsYWNlIGFuZCBjb21waWxlIHRoZSBjb250ZW50IG9mIHRoZSBlbGVtZW50IHdpdGggdGhlIGxvYWRlZCB0ZW1wbGF0ZS5cbi8vIFdlIG5lZWQgdGhpcyBkaXJlY3RpdmUgc28gdGhhdCB0aGUgZWxlbWVudCBjb250ZW50IGlzIGFscmVhZHkgZmlsbGVkIHdoZW5cbi8vIHRoZSBsaW5rIGZ1bmN0aW9uIG9mIGFub3RoZXIgZGlyZWN0aXZlIG9uIHRoZSBzYW1lIGVsZW1lbnQgYXMgbmdWaWV3XG4vLyBpcyBjYWxsZWQuXG5uZ1ZpZXdGaWxsQ29udGVudEZhY3RvcnkuJGluamVjdCA9IFsnJGNvbXBpbGUnLCAnJGNvbnRyb2xsZXInLCAnJHJvdXRlJ107XG5mdW5jdGlvbiBuZ1ZpZXdGaWxsQ29udGVudEZhY3RvcnkoJGNvbXBpbGUsICRjb250cm9sbGVyLCAkcm91dGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VDQScsXG4gICAgcHJpb3JpdHk6IC00MDAsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsICRlbGVtZW50KSB7XG4gICAgICB2YXIgY3VycmVudCA9ICRyb3V0ZS5jdXJyZW50LFxuICAgICAgICAgIGxvY2FscyA9IGN1cnJlbnQubG9jYWxzO1xuXG4gICAgICAkZWxlbWVudC5odG1sKGxvY2Fscy4kdGVtcGxhdGUpO1xuXG4gICAgICB2YXIgbGluayA9ICRjb21waWxlKCRlbGVtZW50LmNvbnRlbnRzKCkpO1xuXG4gICAgICBpZiAoY3VycmVudC5jb250cm9sbGVyKSB7XG4gICAgICAgIGxvY2Fscy4kc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSAkY29udHJvbGxlcihjdXJyZW50LmNvbnRyb2xsZXIsIGxvY2Fscyk7XG4gICAgICAgIGlmIChjdXJyZW50LmNvbnRyb2xsZXJBcykge1xuICAgICAgICAgIHNjb3BlW2N1cnJlbnQuY29udHJvbGxlckFzXSA9IGNvbnRyb2xsZXI7XG4gICAgICAgIH1cbiAgICAgICAgJGVsZW1lbnQuZGF0YSgnJG5nQ29udHJvbGxlckNvbnRyb2xsZXInLCBjb250cm9sbGVyKTtcbiAgICAgICAgJGVsZW1lbnQuY2hpbGRyZW4oKS5kYXRhKCckbmdDb250cm9sbGVyQ29udHJvbGxlcicsIGNvbnRyb2xsZXIpO1xuICAgICAgfVxuXG4gICAgICBsaW5rKHNjb3BlKTtcbiAgICB9XG4gIH07XG59XG5cblxufSkod2luZG93LCB3aW5kb3cuYW5ndWxhcik7XG4iLCIvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS4zLjEzXG4gKiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbihmdW5jdGlvbih3aW5kb3csIGFuZ3VsYXIsIHVuZGVmaW5lZCkgeyd1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBuZ1RvdWNoXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiAjIG5nVG91Y2hcbiAqXG4gKiBUaGUgYG5nVG91Y2hgIG1vZHVsZSBwcm92aWRlcyB0b3VjaCBldmVudHMgYW5kIG90aGVyIGhlbHBlcnMgZm9yIHRvdWNoLWVuYWJsZWQgZGV2aWNlcy5cbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBpcyBiYXNlZCBvbiBqUXVlcnkgTW9iaWxlIHRvdWNoIGV2ZW50IGhhbmRsaW5nXG4gKiAoW2pxdWVyeW1vYmlsZS5jb21dKGh0dHA6Ly9qcXVlcnltb2JpbGUuY29tLykpLlxuICpcbiAqXG4gKiBTZWUge0BsaW5rIG5nVG91Y2guJHN3aXBlIGAkc3dpcGVgfSBmb3IgdXNhZ2UuXG4gKlxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ1RvdWNoXCI+PC9kaXY+XG4gKlxuICovXG5cbi8vIGRlZmluZSBuZ1RvdWNoIG1vZHVsZVxuLyogZ2xvYmFsIC1uZ1RvdWNoICovXG52YXIgbmdUb3VjaCA9IGFuZ3VsYXIubW9kdWxlKCduZ1RvdWNoJywgW10pO1xuXG4vKiBnbG9iYWwgbmdUb3VjaDogZmFsc2UgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJHN3aXBlXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBUaGUgYCRzd2lwZWAgc2VydmljZSBpcyBhIHNlcnZpY2UgdGhhdCBhYnN0cmFjdHMgdGhlIG1lc3NpZXIgZGV0YWlscyBvZiBob2xkLWFuZC1kcmFnIHN3aXBlXG4gICAgICogYmVoYXZpb3IsIHRvIG1ha2UgaW1wbGVtZW50aW5nIHN3aXBlLXJlbGF0ZWQgZGlyZWN0aXZlcyBtb3JlIGNvbnZlbmllbnQuXG4gICAgICpcbiAgICAgKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nVG91Y2ggYG5nVG91Y2hgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxuICAgICAqXG4gICAgICogYCRzd2lwZWAgaXMgdXNlZCBieSB0aGUgYG5nU3dpcGVMZWZ0YCBhbmQgYG5nU3dpcGVSaWdodGAgZGlyZWN0aXZlcyBpbiBgbmdUb3VjaGAsIGFuZCBieVxuICAgICAqIGBuZ0Nhcm91c2VsYCBpbiBhIHNlcGFyYXRlIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqICMgVXNhZ2VcbiAgICAgKiBUaGUgYCRzd2lwZWAgc2VydmljZSBpcyBhbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBtZXRob2Q6IGBiaW5kYC4gYGJpbmRgIHRha2VzIGFuIGVsZW1lbnRcbiAgICAgKiB3aGljaCBpcyB0byBiZSB3YXRjaGVkIGZvciBzd2lwZXMsIGFuZCBhbiBvYmplY3Qgd2l0aCBmb3VyIGhhbmRsZXIgZnVuY3Rpb25zLiBTZWUgdGhlXG4gICAgICogZG9jdW1lbnRhdGlvbiBmb3IgYGJpbmRgIGJlbG93LlxuICAgICAqL1xuXG5uZ1RvdWNoLmZhY3RvcnkoJyRzd2lwZScsIFtmdW5jdGlvbigpIHtcbiAgLy8gVGhlIHRvdGFsIGRpc3RhbmNlIGluIGFueSBkaXJlY3Rpb24gYmVmb3JlIHdlIG1ha2UgdGhlIGNhbGwgb24gc3dpcGUgdnMuIHNjcm9sbC5cbiAgdmFyIE1PVkVfQlVGRkVSX1JBRElVUyA9IDEwO1xuXG4gIHZhciBQT0lOVEVSX0VWRU5UUyA9IHtcbiAgICAnbW91c2UnOiB7XG4gICAgICBzdGFydDogJ21vdXNlZG93bicsXG4gICAgICBtb3ZlOiAnbW91c2Vtb3ZlJyxcbiAgICAgIGVuZDogJ21vdXNldXAnXG4gICAgfSxcbiAgICAndG91Y2gnOiB7XG4gICAgICBzdGFydDogJ3RvdWNoc3RhcnQnLFxuICAgICAgbW92ZTogJ3RvdWNobW92ZScsXG4gICAgICBlbmQ6ICd0b3VjaGVuZCcsXG4gICAgICBjYW5jZWw6ICd0b3VjaGNhbmNlbCdcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMoZXZlbnQpIHtcbiAgICB2YXIgdG91Y2hlcyA9IGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPyBldmVudC50b3VjaGVzIDogW2V2ZW50XTtcbiAgICB2YXIgZSA9IChldmVudC5jaGFuZ2VkVG91Y2hlcyAmJiBldmVudC5jaGFuZ2VkVG91Y2hlc1swXSkgfHxcbiAgICAgICAgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcyAmJlxuICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSkgfHxcbiAgICAgICAgdG91Y2hlc1swXS5vcmlnaW5hbEV2ZW50IHx8IHRvdWNoZXNbMF07XG5cbiAgICByZXR1cm4ge1xuICAgICAgeDogZS5jbGllbnRYLFxuICAgICAgeTogZS5jbGllbnRZXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEV2ZW50cyhwb2ludGVyVHlwZXMsIGV2ZW50VHlwZSkge1xuICAgIHZhciByZXMgPSBbXTtcbiAgICBhbmd1bGFyLmZvckVhY2gocG9pbnRlclR5cGVzLCBmdW5jdGlvbihwb2ludGVyVHlwZSkge1xuICAgICAgdmFyIGV2ZW50TmFtZSA9IFBPSU5URVJfRVZFTlRTW3BvaW50ZXJUeXBlXVtldmVudFR5cGVdO1xuICAgICAgaWYgKGV2ZW50TmFtZSkge1xuICAgICAgICByZXMucHVzaChldmVudE5hbWUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXMuam9pbignICcpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHN3aXBlI2JpbmRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFRoZSBtYWluIG1ldGhvZCBvZiBgJHN3aXBlYC4gSXQgdGFrZXMgYW4gZWxlbWVudCB0byBiZSB3YXRjaGVkIGZvciBzd2lwZSBtb3Rpb25zLCBhbmQgYW5cbiAgICAgKiBvYmplY3QgY29udGFpbmluZyBldmVudCBoYW5kbGVycy5cbiAgICAgKiBUaGUgcG9pbnRlciB0eXBlcyB0aGF0IHNob3VsZCBiZSB1c2VkIGNhbiBiZSBzcGVjaWZpZWQgdmlhIHRoZSBvcHRpb25hbFxuICAgICAqIHRoaXJkIGFyZ3VtZW50LCB3aGljaCBpcyBhbiBhcnJheSBvZiBzdHJpbmdzIGAnbW91c2UnYCBhbmQgYCd0b3VjaCdgLiBCeSBkZWZhdWx0LFxuICAgICAqIGAkc3dpcGVgIHdpbGwgbGlzdGVuIGZvciBgbW91c2VgIGFuZCBgdG91Y2hgIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIFRoZSBmb3VyIGV2ZW50cyBhcmUgYHN0YXJ0YCwgYG1vdmVgLCBgZW5kYCwgYW5kIGBjYW5jZWxgLiBgc3RhcnRgLCBgbW92ZWAsIGFuZCBgZW5kYFxuICAgICAqIHJlY2VpdmUgYXMgYSBwYXJhbWV0ZXIgYSBjb29yZGluYXRlcyBvYmplY3Qgb2YgdGhlIGZvcm0gYHsgeDogMTUwLCB5OiAzMTAgfWAuXG4gICAgICpcbiAgICAgKiBgc3RhcnRgIGlzIGNhbGxlZCBvbiBlaXRoZXIgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgLiBBZnRlciB0aGlzIGV2ZW50LCBgJHN3aXBlYCBpc1xuICAgICAqIHdhdGNoaW5nIGZvciBgdG91Y2htb3ZlYCBvciBgbW91c2Vtb3ZlYCBldmVudHMuIFRoZXNlIGV2ZW50cyBhcmUgaWdub3JlZCB1bnRpbCB0aGUgdG90YWxcbiAgICAgKiBkaXN0YW5jZSBtb3ZlZCBpbiBlaXRoZXIgZGltZW5zaW9uIGV4Y2VlZHMgYSBzbWFsbCB0aHJlc2hvbGQuXG4gICAgICpcbiAgICAgKiBPbmNlIHRoaXMgdGhyZXNob2xkIGlzIGV4Y2VlZGVkLCBlaXRoZXIgdGhlIGhvcml6b250YWwgb3IgdmVydGljYWwgZGVsdGEgaXMgZ3JlYXRlci5cbiAgICAgKiAtIElmIHRoZSBob3Jpem9udGFsIGRpc3RhbmNlIGlzIGdyZWF0ZXIsIHRoaXMgaXMgYSBzd2lwZSBhbmQgYG1vdmVgIGFuZCBgZW5kYCBldmVudHMgZm9sbG93LlxuICAgICAqIC0gSWYgdGhlIHZlcnRpY2FsIGRpc3RhbmNlIGlzIGdyZWF0ZXIsIHRoaXMgaXMgYSBzY3JvbGwsIGFuZCB3ZSBsZXQgdGhlIGJyb3dzZXIgdGFrZSBvdmVyLlxuICAgICAqICAgQSBgY2FuY2VsYCBldmVudCBpcyBzZW50LlxuICAgICAqXG4gICAgICogYG1vdmVgIGlzIGNhbGxlZCBvbiBgbW91c2Vtb3ZlYCBhbmQgYHRvdWNobW92ZWAgYWZ0ZXIgdGhlIGFib3ZlIGxvZ2ljIGhhcyBkZXRlcm1pbmVkIHRoYXRcbiAgICAgKiBhIHN3aXBlIGlzIGluIHByb2dyZXNzLlxuICAgICAqXG4gICAgICogYGVuZGAgaXMgY2FsbGVkIHdoZW4gYSBzd2lwZSBpcyBzdWNjZXNzZnVsbHkgY29tcGxldGVkIHdpdGggYSBgdG91Y2hlbmRgIG9yIGBtb3VzZXVwYC5cbiAgICAgKlxuICAgICAqIGBjYW5jZWxgIGlzIGNhbGxlZCBlaXRoZXIgb24gYSBgdG91Y2hjYW5jZWxgIGZyb20gdGhlIGJyb3dzZXIsIG9yIHdoZW4gd2UgYmVnaW4gc2Nyb2xsaW5nXG4gICAgICogYXMgZGVzY3JpYmVkIGFib3ZlLlxuICAgICAqXG4gICAgICovXG4gICAgYmluZDogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnRIYW5kbGVycywgcG9pbnRlclR5cGVzKSB7XG4gICAgICAvLyBBYnNvbHV0ZSB0b3RhbCBtb3ZlbWVudCwgdXNlZCB0byBjb250cm9sIHN3aXBlIHZzLiBzY3JvbGwuXG4gICAgICB2YXIgdG90YWxYLCB0b3RhbFk7XG4gICAgICAvLyBDb29yZGluYXRlcyBvZiB0aGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICB2YXIgc3RhcnRDb29yZHM7XG4gICAgICAvLyBMYXN0IGV2ZW50J3MgcG9zaXRpb24uXG4gICAgICB2YXIgbGFzdFBvcztcbiAgICAgIC8vIFdoZXRoZXIgYSBzd2lwZSBpcyBhY3RpdmUuXG4gICAgICB2YXIgYWN0aXZlID0gZmFsc2U7XG5cbiAgICAgIHBvaW50ZXJUeXBlcyA9IHBvaW50ZXJUeXBlcyB8fCBbJ21vdXNlJywgJ3RvdWNoJ107XG4gICAgICBlbGVtZW50Lm9uKGdldEV2ZW50cyhwb2ludGVyVHlwZXMsICdzdGFydCcpLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBzdGFydENvb3JkcyA9IGdldENvb3JkaW5hdGVzKGV2ZW50KTtcbiAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdG90YWxYID0gMDtcbiAgICAgICAgdG90YWxZID0gMDtcbiAgICAgICAgbGFzdFBvcyA9IHN0YXJ0Q29vcmRzO1xuICAgICAgICBldmVudEhhbmRsZXJzWydzdGFydCddICYmIGV2ZW50SGFuZGxlcnNbJ3N0YXJ0J10oc3RhcnRDb29yZHMsIGV2ZW50KTtcbiAgICAgIH0pO1xuICAgICAgdmFyIGV2ZW50cyA9IGdldEV2ZW50cyhwb2ludGVyVHlwZXMsICdjYW5jZWwnKTtcbiAgICAgIGlmIChldmVudHMpIHtcbiAgICAgICAgZWxlbWVudC5vbihldmVudHMsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgZXZlbnRIYW5kbGVyc1snY2FuY2VsJ10gJiYgZXZlbnRIYW5kbGVyc1snY2FuY2VsJ10oZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5vbihnZXRFdmVudHMocG9pbnRlclR5cGVzLCAnbW92ZScpLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoIWFjdGl2ZSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIEFuZHJvaWQgd2lsbCBzZW5kIGEgdG91Y2hjYW5jZWwgaWYgaXQgdGhpbmtzIHdlJ3JlIHN0YXJ0aW5nIHRvIHNjcm9sbC5cbiAgICAgICAgLy8gU28gd2hlbiB0aGUgdG90YWwgZGlzdGFuY2UgKCsgb3IgLSBvciBib3RoKSBleGNlZWRzIDEwcHggaW4gZWl0aGVyIGRpcmVjdGlvbixcbiAgICAgICAgLy8gd2UgZWl0aGVyOlxuICAgICAgICAvLyAtIE9uIHRvdGFsWCA+IHRvdGFsWSwgd2Ugc2VuZCBwcmV2ZW50RGVmYXVsdCgpIGFuZCB0cmVhdCB0aGlzIGFzIGEgc3dpcGUuXG4gICAgICAgIC8vIC0gT24gdG90YWxZID4gdG90YWxYLCB3ZSBsZXQgdGhlIGJyb3dzZXIgaGFuZGxlIGl0IGFzIGEgc2Nyb2xsLlxuXG4gICAgICAgIGlmICghc3RhcnRDb29yZHMpIHJldHVybjtcbiAgICAgICAgdmFyIGNvb3JkcyA9IGdldENvb3JkaW5hdGVzKGV2ZW50KTtcblxuICAgICAgICB0b3RhbFggKz0gTWF0aC5hYnMoY29vcmRzLnggLSBsYXN0UG9zLngpO1xuICAgICAgICB0b3RhbFkgKz0gTWF0aC5hYnMoY29vcmRzLnkgLSBsYXN0UG9zLnkpO1xuXG4gICAgICAgIGxhc3RQb3MgPSBjb29yZHM7XG5cbiAgICAgICAgaWYgKHRvdGFsWCA8IE1PVkVfQlVGRkVSX1JBRElVUyAmJiB0b3RhbFkgPCBNT1ZFX0JVRkZFUl9SQURJVVMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPbmUgb2YgdG90YWxYIG9yIHRvdGFsWSBoYXMgZXhjZWVkZWQgdGhlIGJ1ZmZlciwgc28gZGVjaWRlIG9uIHN3aXBlIHZzLiBzY3JvbGwuXG4gICAgICAgIGlmICh0b3RhbFkgPiB0b3RhbFgpIHtcbiAgICAgICAgICAvLyBBbGxvdyBuYXRpdmUgc2Nyb2xsaW5nIHRvIHRha2Ugb3Zlci5cbiAgICAgICAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICBldmVudEhhbmRsZXJzWydjYW5jZWwnXSAmJiBldmVudEhhbmRsZXJzWydjYW5jZWwnXShldmVudCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFByZXZlbnQgdGhlIGJyb3dzZXIgZnJvbSBzY3JvbGxpbmcuXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBldmVudEhhbmRsZXJzWydtb3ZlJ10gJiYgZXZlbnRIYW5kbGVyc1snbW92ZSddKGNvb3JkcywgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZWxlbWVudC5vbihnZXRFdmVudHMocG9pbnRlclR5cGVzLCAnZW5kJyksIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmICghYWN0aXZlKSByZXR1cm47XG4gICAgICAgIGFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBldmVudEhhbmRsZXJzWydlbmQnXSAmJiBldmVudEhhbmRsZXJzWydlbmQnXShnZXRDb29yZGluYXRlcyhldmVudCksIGV2ZW50KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTtcblxuLyogZ2xvYmFsIG5nVG91Y2g6IGZhbHNlICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDbGlja1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBtb3JlIHBvd2VyZnVsIHJlcGxhY2VtZW50IGZvciB0aGUgZGVmYXVsdCBuZ0NsaWNrIGRlc2lnbmVkIHRvIGJlIHVzZWQgb24gdG91Y2hzY3JlZW5cbiAqIGRldmljZXMuIE1vc3QgbW9iaWxlIGJyb3dzZXJzIHdhaXQgYWJvdXQgMzAwbXMgYWZ0ZXIgYSB0YXAtYW5kLXJlbGVhc2UgYmVmb3JlIHNlbmRpbmdcbiAqIHRoZSBjbGljayBldmVudC4gVGhpcyB2ZXJzaW9uIGhhbmRsZXMgdGhlbSBpbW1lZGlhdGVseSwgYW5kIHRoZW4gcHJldmVudHMgdGhlXG4gKiBmb2xsb3dpbmcgY2xpY2sgZXZlbnQgZnJvbSBwcm9wYWdhdGluZy5cbiAqXG4gKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nVG91Y2ggYG5nVG91Y2hgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxuICpcbiAqIFRoaXMgZGlyZWN0aXZlIGNhbiBmYWxsIGJhY2sgdG8gdXNpbmcgYW4gb3JkaW5hcnkgY2xpY2sgZXZlbnQsIGFuZCBzbyB3b3JrcyBvbiBkZXNrdG9wXG4gKiBicm93c2VycyBhcyB3ZWxsIGFzIG1vYmlsZS5cbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBhbHNvIHNldHMgdGhlIENTUyBjbGFzcyBgbmctY2xpY2stYWN0aXZlYCB3aGlsZSB0aGUgZWxlbWVudCBpcyBiZWluZyBoZWxkXG4gKiBkb3duIChieSBhIG1vdXNlIGNsaWNrIG9yIHRvdWNoKSBzbyB5b3UgY2FuIHJlc3R5bGUgdGhlIGRlcHJlc3NlZCBlbGVtZW50IGlmIHlvdSB3aXNoLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NsaWNrIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlXG4gKiB1cG9uIHRhcC4gKEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGApXG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0NsaWNrRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLXRvdWNoLmpzXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICAgIEluY3JlbWVudFxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgY291bnQ6IHt7IGNvdW50IH19XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ0NsaWNrRXhhbXBsZScsIFsnbmdUb3VjaCddKTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cblxubmdUb3VjaC5jb25maWcoWyckcHJvdmlkZScsIGZ1bmN0aW9uKCRwcm92aWRlKSB7XG4gICRwcm92aWRlLmRlY29yYXRvcignbmdDbGlja0RpcmVjdGl2ZScsIFsnJGRlbGVnYXRlJywgZnVuY3Rpb24oJGRlbGVnYXRlKSB7XG4gICAgLy8gZHJvcCB0aGUgZGVmYXVsdCBuZ0NsaWNrIGRpcmVjdGl2ZVxuICAgICRkZWxlZ2F0ZS5zaGlmdCgpO1xuICAgIHJldHVybiAkZGVsZWdhdGU7XG4gIH1dKTtcbn1dKTtcblxubmdUb3VjaC5kaXJlY3RpdmUoJ25nQ2xpY2snLCBbJyRwYXJzZScsICckdGltZW91dCcsICckcm9vdEVsZW1lbnQnLFxuICAgIGZ1bmN0aW9uKCRwYXJzZSwgJHRpbWVvdXQsICRyb290RWxlbWVudCkge1xuICB2YXIgVEFQX0RVUkFUSU9OID0gNzUwOyAvLyBTaG9ydGVyIHRoYW4gNzUwbXMgaXMgYSB0YXAsIGxvbmdlciBpcyBhIHRhcGhvbGQgb3IgZHJhZy5cbiAgdmFyIE1PVkVfVE9MRVJBTkNFID0gMTI7IC8vIDEycHggc2VlbXMgdG8gd29yayBpbiBtb3N0IG1vYmlsZSBicm93c2Vycy5cbiAgdmFyIFBSRVZFTlRfRFVSQVRJT04gPSAyNTAwOyAvLyAyLjUgc2Vjb25kcyBtYXhpbXVtIGZyb20gcHJldmVudEdob3N0Q2xpY2sgY2FsbCB0byBjbGlja1xuICB2YXIgQ0xJQ0tCVVNURVJfVEhSRVNIT0xEID0gMjU7IC8vIDI1IHBpeGVscyBpbiBhbnkgZGltZW5zaW9uIGlzIHRoZSBsaW1pdCBmb3IgYnVzdGluZyBjbGlja3MuXG5cbiAgdmFyIEFDVElWRV9DTEFTU19OQU1FID0gJ25nLWNsaWNrLWFjdGl2ZSc7XG4gIHZhciBsYXN0UHJldmVudGVkVGltZTtcbiAgdmFyIHRvdWNoQ29vcmRpbmF0ZXM7XG4gIHZhciBsYXN0TGFiZWxDbGlja0Nvb3JkaW5hdGVzO1xuXG5cbiAgLy8gVEFQIEVWRU5UUyBBTkQgR0hPU1QgQ0xJQ0tTXG4gIC8vXG4gIC8vIFdoeSB0YXAgZXZlbnRzP1xuICAvLyBNb2JpbGUgYnJvd3NlcnMgZGV0ZWN0IGEgdGFwLCB0aGVuIHdhaXQgYSBtb21lbnQgKHVzdWFsbHkgfjMwMG1zKSB0byBzZWUgaWYgeW91J3JlXG4gIC8vIGRvdWJsZS10YXBwaW5nLCBhbmQgdGhlbiBmaXJlIGEgY2xpY2sgZXZlbnQuXG4gIC8vXG4gIC8vIFRoaXMgZGVsYXkgc3Vja3MgYW5kIG1ha2VzIG1vYmlsZSBhcHBzIGZlZWwgdW5yZXNwb25zaXZlLlxuICAvLyBTbyB3ZSBkZXRlY3QgdG91Y2hzdGFydCwgdG91Y2htb3ZlLCB0b3VjaGNhbmNlbCBhbmQgdG91Y2hlbmQgb3Vyc2VsdmVzIGFuZCBkZXRlcm1pbmUgd2hlblxuICAvLyB0aGUgdXNlciBoYXMgdGFwcGVkIG9uIHNvbWV0aGluZy5cbiAgLy9cbiAgLy8gV2hhdCBoYXBwZW5zIHdoZW4gdGhlIGJyb3dzZXIgdGhlbiBnZW5lcmF0ZXMgYSBjbGljayBldmVudD9cbiAgLy8gVGhlIGJyb3dzZXIsIG9mIGNvdXJzZSwgYWxzbyBkZXRlY3RzIHRoZSB0YXAgYW5kIGZpcmVzIGEgY2xpY2sgYWZ0ZXIgYSBkZWxheS4gVGhpcyByZXN1bHRzIGluXG4gIC8vIHRhcHBpbmcvY2xpY2tpbmcgdHdpY2UuIFdlIGRvIFwiY2xpY2tidXN0aW5nXCIgdG8gcHJldmVudCBpdC5cbiAgLy9cbiAgLy8gSG93IGRvZXMgaXQgd29yaz9cbiAgLy8gV2UgYXR0YWNoIGdsb2JhbCB0b3VjaHN0YXJ0IGFuZCBjbGljayBoYW5kbGVycywgdGhhdCBydW4gZHVyaW5nIHRoZSBjYXB0dXJlIChlYXJseSkgcGhhc2UuXG4gIC8vIFNvIHRoZSBzZXF1ZW5jZSBmb3IgYSB0YXAgaXM6XG4gIC8vIC0gZ2xvYmFsIHRvdWNoc3RhcnQ6IFNldHMgYW4gXCJhbGxvd2FibGUgcmVnaW9uXCIgYXQgdGhlIHBvaW50IHRvdWNoZWQuXG4gIC8vIC0gZWxlbWVudCdzIHRvdWNoc3RhcnQ6IFN0YXJ0cyBhIHRvdWNoXG4gIC8vICgtIHRvdWNobW92ZSBvciB0b3VjaGNhbmNlbCBlbmRzIHRoZSB0b3VjaCwgbm8gY2xpY2sgZm9sbG93cylcbiAgLy8gLSBlbGVtZW50J3MgdG91Y2hlbmQ6IERldGVybWluZXMgaWYgdGhlIHRhcCBpcyB2YWxpZCAoZGlkbid0IG1vdmUgdG9vIGZhciBhd2F5LCBkaWRuJ3QgaG9sZFxuICAvLyAgIHRvbyBsb25nKSBhbmQgZmlyZXMgdGhlIHVzZXIncyB0YXAgaGFuZGxlci4gVGhlIHRvdWNoZW5kIGFsc28gY2FsbHMgcHJldmVudEdob3N0Q2xpY2soKS5cbiAgLy8gLSBwcmV2ZW50R2hvc3RDbGljaygpIHJlbW92ZXMgdGhlIGFsbG93YWJsZSByZWdpb24gdGhlIGdsb2JhbCB0b3VjaHN0YXJ0IGNyZWF0ZWQuXG4gIC8vIC0gVGhlIGJyb3dzZXIgZ2VuZXJhdGVzIGEgY2xpY2sgZXZlbnQuXG4gIC8vIC0gVGhlIGdsb2JhbCBjbGljayBoYW5kbGVyIGNhdGNoZXMgdGhlIGNsaWNrLCBhbmQgY2hlY2tzIHdoZXRoZXIgaXQgd2FzIGluIGFuIGFsbG93YWJsZSByZWdpb24uXG4gIC8vICAgICAtIElmIHByZXZlbnRHaG9zdENsaWNrIHdhcyBjYWxsZWQsIHRoZSByZWdpb24gd2lsbCBoYXZlIGJlZW4gcmVtb3ZlZCwgdGhlIGNsaWNrIGlzIGJ1c3RlZC5cbiAgLy8gICAgIC0gSWYgdGhlIHJlZ2lvbiBpcyBzdGlsbCB0aGVyZSwgdGhlIGNsaWNrIHByb2NlZWRzIG5vcm1hbGx5LiBUaGVyZWZvcmUgY2xpY2tzIG9uIGxpbmtzIGFuZFxuICAvLyAgICAgICBvdGhlciBlbGVtZW50cyB3aXRob3V0IG5nVGFwIG9uIHRoZW0gd29yayBub3JtYWxseS5cbiAgLy9cbiAgLy8gVGhpcyBpcyBhbiB1Z2x5LCB0ZXJyaWJsZSBoYWNrIVxuICAvLyBZZWFoLCB0ZWxsIG1lIGFib3V0IGl0LiBUaGUgYWx0ZXJuYXRpdmVzIGFyZSB1c2luZyB0aGUgc2xvdyBjbGljayBldmVudHMsIG9yIG1ha2luZyBvdXIgdXNlcnNcbiAgLy8gZGVhbCB3aXRoIHRoZSBnaG9zdCBjbGlja3MsIHNvIEkgY29uc2lkZXIgdGhpcyB0aGUgbGVhc3Qgb2YgZXZpbHMuIEZvcnR1bmF0ZWx5IEFuZ3VsYXJcbiAgLy8gZW5jYXBzdWxhdGVzIHRoaXMgdWdseSBsb2dpYyBhd2F5IGZyb20gdGhlIHVzZXIuXG4gIC8vXG4gIC8vIFdoeSBub3QganVzdCBwdXQgY2xpY2sgaGFuZGxlcnMgb24gdGhlIGVsZW1lbnQ/XG4gIC8vIFdlIGRvIHRoYXQgdG9vLCBqdXN0IHRvIGJlIHN1cmUuIElmIHRoZSB0YXAgZXZlbnQgY2F1c2VkIHRoZSBET00gdG8gY2hhbmdlLFxuICAvLyBpdCBpcyBwb3NzaWJsZSBhbm90aGVyIGVsZW1lbnQgaXMgbm93IGluIHRoYXQgcG9zaXRpb24uIFRvIHRha2UgYWNjb3VudCBmb3IgdGhlc2UgcG9zc2libHlcbiAgLy8gZGlzdGluY3QgZWxlbWVudHMsIHRoZSBoYW5kbGVycyBhcmUgZ2xvYmFsIGFuZCBjYXJlIG9ubHkgYWJvdXQgY29vcmRpbmF0ZXMuXG5cbiAgLy8gQ2hlY2tzIGlmIHRoZSBjb29yZGluYXRlcyBhcmUgY2xvc2UgZW5vdWdoIHRvIGJlIHdpdGhpbiB0aGUgcmVnaW9uLlxuICBmdW5jdGlvbiBoaXQoeDEsIHkxLCB4MiwgeTIpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoeDEgLSB4MikgPCBDTElDS0JVU1RFUl9USFJFU0hPTEQgJiYgTWF0aC5hYnMoeTEgLSB5MikgPCBDTElDS0JVU1RFUl9USFJFU0hPTEQ7XG4gIH1cblxuICAvLyBDaGVja3MgYSBsaXN0IG9mIGFsbG93YWJsZSByZWdpb25zIGFnYWluc3QgYSBjbGljayBsb2NhdGlvbi5cbiAgLy8gUmV0dXJucyB0cnVlIGlmIHRoZSBjbGljayBzaG91bGQgYmUgYWxsb3dlZC5cbiAgLy8gU3BsaWNlcyBvdXQgdGhlIGFsbG93YWJsZSByZWdpb24gZnJvbSB0aGUgbGlzdCBhZnRlciBpdCBoYXMgYmVlbiB1c2VkLlxuICBmdW5jdGlvbiBjaGVja0FsbG93YWJsZVJlZ2lvbnModG91Y2hDb29yZGluYXRlcywgeCwgeSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG91Y2hDb29yZGluYXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgaWYgKGhpdCh0b3VjaENvb3JkaW5hdGVzW2ldLCB0b3VjaENvb3JkaW5hdGVzW2kgKyAxXSwgeCwgeSkpIHtcbiAgICAgICAgdG91Y2hDb29yZGluYXRlcy5zcGxpY2UoaSwgaSArIDIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gYWxsb3dhYmxlIHJlZ2lvblxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7IC8vIE5vIGFsbG93YWJsZSByZWdpb247IGJ1c3QgaXQuXG4gIH1cblxuICAvLyBHbG9iYWwgY2xpY2sgaGFuZGxlciB0aGF0IHByZXZlbnRzIHRoZSBjbGljayBpZiBpdCdzIGluIGEgYnVzdGFibGUgem9uZSBhbmQgcHJldmVudEdob3N0Q2xpY2tcbiAgLy8gd2FzIGNhbGxlZCByZWNlbnRseS5cbiAgZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuICAgIGlmIChEYXRlLm5vdygpIC0gbGFzdFByZXZlbnRlZFRpbWUgPiBQUkVWRU5UX0RVUkFUSU9OKSB7XG4gICAgICByZXR1cm47IC8vIFRvbyBvbGQuXG4gICAgfVxuXG4gICAgdmFyIHRvdWNoZXMgPSBldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoID8gZXZlbnQudG91Y2hlcyA6IFtldmVudF07XG4gICAgdmFyIHggPSB0b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgdmFyIHkgPSB0b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgLy8gV29yayBhcm91bmQgZGVza3RvcCBXZWJraXQgcXVpcmsgd2hlcmUgY2xpY2tpbmcgYSBsYWJlbCB3aWxsIGZpcmUgdHdvIGNsaWNrcyAob24gdGhlIGxhYmVsXG4gICAgLy8gYW5kIG9uIHRoZSBpbnB1dCBlbGVtZW50KS4gRGVwZW5kaW5nIG9uIHRoZSBleGFjdCBicm93c2VyLCB0aGlzIHNlY29uZCBjbGljayB3ZSBkb24ndCB3YW50XG4gICAgLy8gdG8gYnVzdCBoYXMgZWl0aGVyICgwLDApLCBuZWdhdGl2ZSBjb29yZGluYXRlcywgb3IgY29vcmRpbmF0ZXMgZXF1YWwgdG8gdHJpZ2dlcmluZyBsYWJlbFxuICAgIC8vIGNsaWNrIGV2ZW50XG4gICAgaWYgKHggPCAxICYmIHkgPCAxKSB7XG4gICAgICByZXR1cm47IC8vIG9mZnNjcmVlblxuICAgIH1cbiAgICBpZiAobGFzdExhYmVsQ2xpY2tDb29yZGluYXRlcyAmJlxuICAgICAgICBsYXN0TGFiZWxDbGlja0Nvb3JkaW5hdGVzWzBdID09PSB4ICYmIGxhc3RMYWJlbENsaWNrQ29vcmRpbmF0ZXNbMV0gPT09IHkpIHtcbiAgICAgIHJldHVybjsgLy8gaW5wdXQgY2xpY2sgdHJpZ2dlcmVkIGJ5IGxhYmVsIGNsaWNrXG4gICAgfVxuICAgIC8vIHJlc2V0IGxhYmVsIGNsaWNrIGNvb3JkaW5hdGVzIG9uIGZpcnN0IHN1YnNlcXVlbnQgY2xpY2tcbiAgICBpZiAobGFzdExhYmVsQ2xpY2tDb29yZGluYXRlcykge1xuICAgICAgbGFzdExhYmVsQ2xpY2tDb29yZGluYXRlcyA9IG51bGw7XG4gICAgfVxuICAgIC8vIHJlbWVtYmVyIGxhYmVsIGNsaWNrIGNvb3JkaW5hdGVzIHRvIHByZXZlbnQgY2xpY2sgYnVzdGluZyBvZiB0cmlnZ2VyIGNsaWNrIGV2ZW50IG9uIGlucHV0XG4gICAgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdsYWJlbCcpIHtcbiAgICAgIGxhc3RMYWJlbENsaWNrQ29vcmRpbmF0ZXMgPSBbeCwgeV07XG4gICAgfVxuXG4gICAgLy8gTG9vayBmb3IgYW4gYWxsb3dhYmxlIHJlZ2lvbiBjb250YWluaW5nIHRoaXMgY2xpY2suXG4gICAgLy8gSWYgd2UgZmluZCBvbmUsIHRoYXQgbWVhbnMgaXQgd2FzIGNyZWF0ZWQgYnkgdG91Y2hzdGFydCBhbmQgbm90IHJlbW92ZWQgYnlcbiAgICAvLyBwcmV2ZW50R2hvc3RDbGljaywgc28gd2UgZG9uJ3QgYnVzdCBpdC5cbiAgICBpZiAoY2hlY2tBbGxvd2FibGVSZWdpb25zKHRvdWNoQ29vcmRpbmF0ZXMsIHgsIHkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYW4gYWxsb3dhYmxlIHJlZ2lvbiwgYnVzdCB0aGUgY2xpY2suXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIEJsdXIgZm9jdXNlZCBmb3JtIGVsZW1lbnRzXG4gICAgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5ibHVyKCk7XG4gIH1cblxuXG4gIC8vIEdsb2JhbCB0b3VjaHN0YXJ0IGhhbmRsZXIgdGhhdCBjcmVhdGVzIGFuIGFsbG93YWJsZSByZWdpb24gZm9yIGEgY2xpY2sgZXZlbnQuXG4gIC8vIFRoaXMgYWxsb3dhYmxlIHJlZ2lvbiBjYW4gYmUgcmVtb3ZlZCBieSBwcmV2ZW50R2hvc3RDbGljayBpZiB3ZSB3YW50IHRvIGJ1c3QgaXQuXG4gIGZ1bmN0aW9uIG9uVG91Y2hTdGFydChldmVudCkge1xuICAgIHZhciB0b3VjaGVzID0gZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aCA/IGV2ZW50LnRvdWNoZXMgOiBbZXZlbnRdO1xuICAgIHZhciB4ID0gdG91Y2hlc1swXS5jbGllbnRYO1xuICAgIHZhciB5ID0gdG91Y2hlc1swXS5jbGllbnRZO1xuICAgIHRvdWNoQ29vcmRpbmF0ZXMucHVzaCh4LCB5KTtcblxuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUmVtb3ZlIHRoZSBhbGxvd2FibGUgcmVnaW9uLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b3VjaENvb3JkaW5hdGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgIGlmICh0b3VjaENvb3JkaW5hdGVzW2ldID09IHggJiYgdG91Y2hDb29yZGluYXRlc1tpICsgMV0gPT0geSkge1xuICAgICAgICAgIHRvdWNoQ29vcmRpbmF0ZXMuc3BsaWNlKGksIGkgKyAyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBQUkVWRU5UX0RVUkFUSU9OLCBmYWxzZSk7XG4gIH1cblxuICAvLyBPbiB0aGUgZmlyc3QgY2FsbCwgYXR0YWNoZXMgc29tZSBldmVudCBoYW5kbGVycy4gVGhlbiB3aGVuZXZlciBpdCBnZXRzIGNhbGxlZCwgaXQgY3JlYXRlcyBhXG4gIC8vIHpvbmUgYXJvdW5kIHRoZSB0b3VjaHN0YXJ0IHdoZXJlIGNsaWNrcyB3aWxsIGdldCBidXN0ZWQuXG4gIGZ1bmN0aW9uIHByZXZlbnRHaG9zdENsaWNrKHgsIHkpIHtcbiAgICBpZiAoIXRvdWNoQ29vcmRpbmF0ZXMpIHtcbiAgICAgICRyb290RWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2ssIHRydWUpO1xuICAgICAgJHJvb3RFbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQsIHRydWUpO1xuICAgICAgdG91Y2hDb29yZGluYXRlcyA9IFtdO1xuICAgIH1cblxuICAgIGxhc3RQcmV2ZW50ZWRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIGNoZWNrQWxsb3dhYmxlUmVnaW9ucyh0b3VjaENvb3JkaW5hdGVzLCB4LCB5KTtcbiAgfVxuXG4gIC8vIEFjdHVhbCBsaW5raW5nIGZ1bmN0aW9uLlxuICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICB2YXIgY2xpY2tIYW5kbGVyID0gJHBhcnNlKGF0dHIubmdDbGljayksXG4gICAgICAgIHRhcHBpbmcgPSBmYWxzZSxcbiAgICAgICAgdGFwRWxlbWVudCwgIC8vIFVzZWQgdG8gYmx1ciB0aGUgZWxlbWVudCBhZnRlciBhIHRhcC5cbiAgICAgICAgc3RhcnRUaW1lLCAgIC8vIFVzZWQgdG8gY2hlY2sgaWYgdGhlIHRhcCB3YXMgaGVsZCB0b28gbG9uZy5cbiAgICAgICAgdG91Y2hTdGFydFgsXG4gICAgICAgIHRvdWNoU3RhcnRZO1xuXG4gICAgZnVuY3Rpb24gcmVzZXRTdGF0ZSgpIHtcbiAgICAgIHRhcHBpbmcgPSBmYWxzZTtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoQUNUSVZFX0NMQVNTX05BTUUpO1xuICAgIH1cblxuICAgIGVsZW1lbnQub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgdGFwcGluZyA9IHRydWU7XG4gICAgICB0YXBFbGVtZW50ID0gZXZlbnQudGFyZ2V0ID8gZXZlbnQudGFyZ2V0IDogZXZlbnQuc3JjRWxlbWVudDsgLy8gSUUgdXNlcyBzcmNFbGVtZW50LlxuICAgICAgLy8gSGFjayBmb3IgU2FmYXJpLCB3aGljaCBjYW4gdGFyZ2V0IHRleHQgbm9kZXMgaW5zdGVhZCBvZiBjb250YWluZXJzLlxuICAgICAgaWYgKHRhcEVsZW1lbnQubm9kZVR5cGUgPT0gMykge1xuICAgICAgICB0YXBFbGVtZW50ID0gdGFwRWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50LmFkZENsYXNzKEFDVElWRV9DTEFTU19OQU1FKTtcblxuICAgICAgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgdmFyIHRvdWNoZXMgPSBldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoID8gZXZlbnQudG91Y2hlcyA6IFtldmVudF07XG4gICAgICB2YXIgZSA9IHRvdWNoZXNbMF0ub3JpZ2luYWxFdmVudCB8fCB0b3VjaGVzWzBdO1xuICAgICAgdG91Y2hTdGFydFggPSBlLmNsaWVudFg7XG4gICAgICB0b3VjaFN0YXJ0WSA9IGUuY2xpZW50WTtcbiAgICB9KTtcblxuICAgIGVsZW1lbnQub24oJ3RvdWNobW92ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICByZXNldFN0YXRlKCk7XG4gICAgfSk7XG5cbiAgICBlbGVtZW50Lm9uKCd0b3VjaGNhbmNlbCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICByZXNldFN0YXRlKCk7XG4gICAgfSk7XG5cbiAgICBlbGVtZW50Lm9uKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgZGlmZiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgIHZhciB0b3VjaGVzID0gKGV2ZW50LmNoYW5nZWRUb3VjaGVzICYmIGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aCkgPyBldmVudC5jaGFuZ2VkVG91Y2hlcyA6XG4gICAgICAgICAgKChldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoKSA/IGV2ZW50LnRvdWNoZXMgOiBbZXZlbnRdKTtcbiAgICAgIHZhciBlID0gdG91Y2hlc1swXS5vcmlnaW5hbEV2ZW50IHx8IHRvdWNoZXNbMF07XG4gICAgICB2YXIgeCA9IGUuY2xpZW50WDtcbiAgICAgIHZhciB5ID0gZS5jbGllbnRZO1xuICAgICAgdmFyIGRpc3QgPSBNYXRoLnNxcnQoTWF0aC5wb3coeCAtIHRvdWNoU3RhcnRYLCAyKSArIE1hdGgucG93KHkgLSB0b3VjaFN0YXJ0WSwgMikpO1xuXG4gICAgICBpZiAodGFwcGluZyAmJiBkaWZmIDwgVEFQX0RVUkFUSU9OICYmIGRpc3QgPCBNT1ZFX1RPTEVSQU5DRSkge1xuICAgICAgICAvLyBDYWxsIHByZXZlbnRHaG9zdENsaWNrIHNvIHRoZSBjbGlja2J1c3RlciB3aWxsIGNhdGNoIHRoZSBjb3JyZXNwb25kaW5nIGNsaWNrLlxuICAgICAgICBwcmV2ZW50R2hvc3RDbGljayh4LCB5KTtcblxuICAgICAgICAvLyBCbHVyIHRoZSBmb2N1c2VkIGVsZW1lbnQgKHRoZSBidXR0b24sIHByb2JhYmx5KSBiZWZvcmUgZmlyaW5nIHRoZSBjYWxsYmFjay5cbiAgICAgICAgLy8gVGhpcyBkb2Vzbid0IHdvcmsgcGVyZmVjdGx5IG9uIEFuZHJvaWQgQ2hyb21lLCBidXQgc2VlbXMgdG8gd29yayBlbHNld2hlcmUuXG4gICAgICAgIC8vIEkgY291bGRuJ3QgZ2V0IGFueXRoaW5nIHRvIHdvcmsgcmVsaWFibHkgb24gQW5kcm9pZCBDaHJvbWUuXG4gICAgICAgIGlmICh0YXBFbGVtZW50KSB7XG4gICAgICAgICAgdGFwRWxlbWVudC5ibHVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKGF0dHIuZGlzYWJsZWQpIHx8IGF0dHIuZGlzYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgZWxlbWVudC50cmlnZ2VySGFuZGxlcignY2xpY2snLCBbZXZlbnRdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXNldFN0YXRlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBIYWNrIGZvciBpT1MgU2FmYXJpJ3MgYmVuZWZpdC4gSXQgZ29lcyBzZWFyY2hpbmcgZm9yIG9uY2xpY2sgaGFuZGxlcnMgYW5kIGlzIGxpYWJsZSB0byBjbGlja1xuICAgIC8vIHNvbWV0aGluZyBlbHNlIG5lYXJieS5cbiAgICBlbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgeyB9O1xuXG4gICAgLy8gQWN0dWFsIGNsaWNrIGhhbmRsZXIuXG4gICAgLy8gVGhlcmUgYXJlIHRocmVlIGRpZmZlcmVudCBraW5kcyBvZiBjbGlja3MsIG9ubHkgdHdvIG9mIHdoaWNoIHJlYWNoIHRoaXMgcG9pbnQuXG4gICAgLy8gLSBPbiBkZXNrdG9wIGJyb3dzZXJzIHdpdGhvdXQgdG91Y2ggZXZlbnRzLCB0aGVpciBjbGlja3Mgd2lsbCBhbHdheXMgY29tZSBoZXJlLlxuICAgIC8vIC0gT24gbW9iaWxlIGJyb3dzZXJzLCB0aGUgc2ltdWxhdGVkIFwiZmFzdFwiIGNsaWNrIHdpbGwgY2FsbCB0aGlzLlxuICAgIC8vIC0gQnV0IHRoZSBicm93c2VyJ3MgZm9sbG93LXVwIHNsb3cgY2xpY2sgd2lsbCBiZSBcImJ1c3RlZFwiIGJlZm9yZSBpdCByZWFjaGVzIHRoaXMgaGFuZGxlci5cbiAgICAvLyBUaGVyZWZvcmUgaXQncyBzYWZlIHRvIHVzZSB0aGlzIGRpcmVjdGl2ZSBvbiBib3RoIG1vYmlsZSBhbmQgZGVza3RvcC5cbiAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50LCB0b3VjaGVuZCkge1xuICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGlja0hhbmRsZXIoc2NvcGUsIHskZXZlbnQ6ICh0b3VjaGVuZCB8fCBldmVudCl9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZWxlbWVudC5vbignbW91c2Vkb3duJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoQUNUSVZFX0NMQVNTX05BTUUpO1xuICAgIH0pO1xuXG4gICAgZWxlbWVudC5vbignbW91c2Vtb3ZlIG1vdXNldXAnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhBQ1RJVkVfQ0xBU1NfTkFNRSk7XG4gICAgfSk7XG5cbiAgfTtcbn1dKTtcblxuLyogZ2xvYmFsIG5nVG91Y2g6IGZhbHNlICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTd2lwZUxlZnRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIHdoZW4gYW4gZWxlbWVudCBpcyBzd2lwZWQgdG8gdGhlIGxlZnQgb24gYSB0b3VjaHNjcmVlbiBkZXZpY2UuXG4gKiBBIGxlZnR3YXJkIHN3aXBlIGlzIGEgcXVpY2ssIHJpZ2h0LXRvLWxlZnQgc2xpZGUgb2YgdGhlIGZpbmdlci5cbiAqIFRob3VnaCBuZ1N3aXBlTGVmdCBpcyBkZXNpZ25lZCBmb3IgdG91Y2gtYmFzZWQgZGV2aWNlcywgaXQgd2lsbCB3b3JrIHdpdGggYSBtb3VzZSBjbGljayBhbmQgZHJhZ1xuICogdG9vLlxuICpcbiAqIFRvIGRpc2FibGUgdGhlIG1vdXNlIGNsaWNrIGFuZCBkcmFnIGZ1bmN0aW9uYWxpdHksIGFkZCBgbmctc3dpcGUtZGlzYWJsZS1tb3VzZWAgdG9cbiAqIHRoZSBgbmctc3dpcGUtbGVmdGAgb3IgYG5nLXN3aXBlLXJpZ2h0YCBET00gRWxlbWVudC5cbiAqXG4gKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nVG91Y2ggYG5nVG91Y2hgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1N3aXBlTGVmdCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZVxuICogdXBvbiBsZWZ0IHN3aXBlLiAoRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YClcbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG1vZHVsZT1cIm5nU3dpcGVMZWZ0RXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLXRvdWNoLmpzXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8ZGl2IG5nLXNob3c9XCIhc2hvd0FjdGlvbnNcIiBuZy1zd2lwZS1sZWZ0PVwic2hvd0FjdGlvbnMgPSB0cnVlXCI+XG4gICAgICAgICAgU29tZSBsaXN0IGNvbnRlbnQsIGxpa2UgYW4gZW1haWwgaW4gdGhlIGluYm94XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IG5nLXNob3c9XCJzaG93QWN0aW9uc1wiIG5nLXN3aXBlLXJpZ2h0PVwic2hvd0FjdGlvbnMgPSBmYWxzZVwiPlxuICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJyZXBseSgpXCI+UmVwbHk8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZGVsZXRlKClcIj5EZWxldGU8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ1N3aXBlTGVmdEV4YW1wbGUnLCBbJ25nVG91Y2gnXSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTd2lwZVJpZ2h0XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciB3aGVuIGFuIGVsZW1lbnQgaXMgc3dpcGVkIHRvIHRoZSByaWdodCBvbiBhIHRvdWNoc2NyZWVuIGRldmljZS5cbiAqIEEgcmlnaHR3YXJkIHN3aXBlIGlzIGEgcXVpY2ssIGxlZnQtdG8tcmlnaHQgc2xpZGUgb2YgdGhlIGZpbmdlci5cbiAqIFRob3VnaCBuZ1N3aXBlUmlnaHQgaXMgZGVzaWduZWQgZm9yIHRvdWNoLWJhc2VkIGRldmljZXMsIGl0IHdpbGwgd29yayB3aXRoIGEgbW91c2UgY2xpY2sgYW5kIGRyYWdcbiAqIHRvby5cbiAqXG4gKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nVG91Y2ggYG5nVG91Y2hgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1N3aXBlUmlnaHQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGVcbiAqIHVwb24gcmlnaHQgc3dpcGUuIChFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgKVxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbW9kdWxlPVwibmdTd2lwZVJpZ2h0RXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLXRvdWNoLmpzXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8ZGl2IG5nLXNob3c9XCIhc2hvd0FjdGlvbnNcIiBuZy1zd2lwZS1sZWZ0PVwic2hvd0FjdGlvbnMgPSB0cnVlXCI+XG4gICAgICAgICAgU29tZSBsaXN0IGNvbnRlbnQsIGxpa2UgYW4gZW1haWwgaW4gdGhlIGluYm94XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IG5nLXNob3c9XCJzaG93QWN0aW9uc1wiIG5nLXN3aXBlLXJpZ2h0PVwic2hvd0FjdGlvbnMgPSBmYWxzZVwiPlxuICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJyZXBseSgpXCI+UmVwbHk8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZGVsZXRlKClcIj5EZWxldGU8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ1N3aXBlUmlnaHRFeGFtcGxlJywgWyduZ1RvdWNoJ10pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlU3dpcGVEaXJlY3RpdmUoZGlyZWN0aXZlTmFtZSwgZGlyZWN0aW9uLCBldmVudE5hbWUpIHtcbiAgbmdUb3VjaC5kaXJlY3RpdmUoZGlyZWN0aXZlTmFtZSwgWyckcGFyc2UnLCAnJHN3aXBlJywgZnVuY3Rpb24oJHBhcnNlLCAkc3dpcGUpIHtcbiAgICAvLyBUaGUgbWF4aW11bSB2ZXJ0aWNhbCBkZWx0YSBmb3IgYSBzd2lwZSBzaG91bGQgYmUgbGVzcyB0aGFuIDc1cHguXG4gICAgdmFyIE1BWF9WRVJUSUNBTF9ESVNUQU5DRSA9IDc1O1xuICAgIC8vIFZlcnRpY2FsIGRpc3RhbmNlIHNob3VsZCBub3QgYmUgbW9yZSB0aGFuIGEgZnJhY3Rpb24gb2YgdGhlIGhvcml6b250YWwgZGlzdGFuY2UuXG4gICAgdmFyIE1BWF9WRVJUSUNBTF9SQVRJTyA9IDAuMztcbiAgICAvLyBBdCBsZWFzdCBhIDMwcHggbGF0ZXJhbCBtb3Rpb24gaXMgbmVjZXNzYXJ5IGZvciBhIHN3aXBlLlxuICAgIHZhciBNSU5fSE9SSVpPTlRBTF9ESVNUQU5DRSA9IDMwO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICB2YXIgc3dpcGVIYW5kbGVyID0gJHBhcnNlKGF0dHJbZGlyZWN0aXZlTmFtZV0pO1xuXG4gICAgICB2YXIgc3RhcnRDb29yZHMsIHZhbGlkO1xuXG4gICAgICBmdW5jdGlvbiB2YWxpZFN3aXBlKGNvb3Jkcykge1xuICAgICAgICAvLyBDaGVjayB0aGF0IGl0J3Mgd2l0aGluIHRoZSBjb29yZGluYXRlcy5cbiAgICAgICAgLy8gQWJzb2x1dGUgdmVydGljYWwgZGlzdGFuY2UgbXVzdCBiZSB3aXRoaW4gdG9sZXJhbmNlcy5cbiAgICAgICAgLy8gSG9yaXpvbnRhbCBkaXN0YW5jZSwgd2UgdGFrZSB0aGUgY3VycmVudCBYIC0gdGhlIHN0YXJ0aW5nIFguXG4gICAgICAgIC8vIFRoaXMgaXMgbmVnYXRpdmUgZm9yIGxlZnR3YXJkIHN3aXBlcyBhbmQgcG9zaXRpdmUgZm9yIHJpZ2h0d2FyZCBzd2lwZXMuXG4gICAgICAgIC8vIEFmdGVyIG11bHRpcGx5aW5nIGJ5IHRoZSBkaXJlY3Rpb24gKC0xIGZvciBsZWZ0LCArMSBmb3IgcmlnaHQpLCBsZWdhbCBzd2lwZXNcbiAgICAgICAgLy8gKGllLiBzYW1lIGRpcmVjdGlvbiBhcyB0aGUgZGlyZWN0aXZlIHdhbnRzKSB3aWxsIGhhdmUgYSBwb3NpdGl2ZSBkZWx0YSBhbmRcbiAgICAgICAgLy8gaWxsZWdhbCBvbmVzIGEgbmVnYXRpdmUgZGVsdGEuXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0aGlzIGRlbHRhIG11c3QgYmUgcG9zaXRpdmUsIGFuZCBsYXJnZXIgdGhhbiB0aGUgbWluaW11bS5cbiAgICAgICAgaWYgKCFzdGFydENvb3JkcykgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgZGVsdGFZID0gTWF0aC5hYnMoY29vcmRzLnkgLSBzdGFydENvb3Jkcy55KTtcbiAgICAgICAgdmFyIGRlbHRhWCA9IChjb29yZHMueCAtIHN0YXJ0Q29vcmRzLngpICogZGlyZWN0aW9uO1xuICAgICAgICByZXR1cm4gdmFsaWQgJiYgLy8gU2hvcnQgY2lyY3VpdCBmb3IgYWxyZWFkeS1pbnZhbGlkYXRlZCBzd2lwZXMuXG4gICAgICAgICAgICBkZWx0YVkgPCBNQVhfVkVSVElDQUxfRElTVEFOQ0UgJiZcbiAgICAgICAgICAgIGRlbHRhWCA+IDAgJiZcbiAgICAgICAgICAgIGRlbHRhWCA+IE1JTl9IT1JJWk9OVEFMX0RJU1RBTkNFICYmXG4gICAgICAgICAgICBkZWx0YVkgLyBkZWx0YVggPCBNQVhfVkVSVElDQUxfUkFUSU87XG4gICAgICB9XG5cbiAgICAgIHZhciBwb2ludGVyVHlwZXMgPSBbJ3RvdWNoJ107XG4gICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJbJ25nU3dpcGVEaXNhYmxlTW91c2UnXSkpIHtcbiAgICAgICAgcG9pbnRlclR5cGVzLnB1c2goJ21vdXNlJyk7XG4gICAgICB9XG4gICAgICAkc3dpcGUuYmluZChlbGVtZW50LCB7XG4gICAgICAgICdzdGFydCc6IGZ1bmN0aW9uKGNvb3JkcywgZXZlbnQpIHtcbiAgICAgICAgICBzdGFydENvb3JkcyA9IGNvb3JkcztcbiAgICAgICAgICB2YWxpZCA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgICdjYW5jZWwnOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgICdlbmQnOiBmdW5jdGlvbihjb29yZHMsIGV2ZW50KSB7XG4gICAgICAgICAgaWYgKHZhbGlkU3dpcGUoY29vcmRzKSkge1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBlbGVtZW50LnRyaWdnZXJIYW5kbGVyKGV2ZW50TmFtZSk7XG4gICAgICAgICAgICAgIHN3aXBlSGFuZGxlcihzY29wZSwgeyRldmVudDogZXZlbnR9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgcG9pbnRlclR5cGVzKTtcbiAgICB9O1xuICB9XSk7XG59XG5cbi8vIExlZnQgaXMgbmVnYXRpdmUgWC1jb29yZGluYXRlLCByaWdodCBpcyBwb3NpdGl2ZS5cbm1ha2VTd2lwZURpcmVjdGl2ZSgnbmdTd2lwZUxlZnQnLCAtMSwgJ3N3aXBlbGVmdCcpO1xubWFrZVN3aXBlRGlyZWN0aXZlKCduZ1N3aXBlUmlnaHQnLCAxLCAnc3dpcGVyaWdodCcpO1xuXG5cblxufSkod2luZG93LCB3aW5kb3cuYW5ndWxhcik7XG4iLCIvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS4zLjEzXG4gKiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbihmdW5jdGlvbih3aW5kb3csIGFuZ3VsYXIsIHVuZGVmaW5lZCkgeyd1c2Ugc3RyaWN0JztcblxuLyoganNoaW50IG1heGxlbjogZmFsc2UgKi9cblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBuZ0FuaW1hdGVcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoZSBgbmdBbmltYXRlYCBtb2R1bGUgcHJvdmlkZXMgc3VwcG9ydCBmb3IgSmF2YVNjcmlwdCwgQ1NTMyB0cmFuc2l0aW9uIGFuZCBDU1MzIGtleWZyYW1lIGFuaW1hdGlvbiBob29rcyB3aXRoaW4gZXhpc3RpbmcgY29yZSBhbmQgY3VzdG9tIGRpcmVjdGl2ZXMuXG4gKlxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ0FuaW1hdGVcIj48L2Rpdj5cbiAqXG4gKiAjIFVzYWdlXG4gKlxuICogVG8gc2VlIGFuaW1hdGlvbnMgaW4gYWN0aW9uLCBhbGwgdGhhdCBpcyByZXF1aXJlZCBpcyB0byBkZWZpbmUgdGhlIGFwcHJvcHJpYXRlIENTUyBjbGFzc2VzXG4gKiBvciB0byByZWdpc3RlciBhIEphdmFTY3JpcHQgYW5pbWF0aW9uIHZpYSB0aGUgYG15TW9kdWxlLmFuaW1hdGlvbigpYCBmdW5jdGlvbi4gVGhlIGRpcmVjdGl2ZXMgdGhhdCBzdXBwb3J0IGFuaW1hdGlvbiBhdXRvbWF0aWNhbGx5IGFyZTpcbiAqIGBuZ1JlcGVhdGAsIGBuZ0luY2x1ZGVgLCBgbmdJZmAsIGBuZ1N3aXRjaGAsIGBuZ1Nob3dgLCBgbmdIaWRlYCwgYG5nVmlld2AgYW5kIGBuZ0NsYXNzYC4gQ3VzdG9tIGRpcmVjdGl2ZXMgY2FuIHRha2UgYWR2YW50YWdlIG9mIGFuaW1hdGlvblxuICogYnkgdXNpbmcgdGhlIGAkYW5pbWF0ZWAgc2VydmljZS5cbiAqXG4gKiBCZWxvdyBpcyBhIG1vcmUgZGV0YWlsZWQgYnJlYWtkb3duIG9mIHRoZSBzdXBwb3J0ZWQgYW5pbWF0aW9uIGV2ZW50cyBwcm92aWRlZCBieSBwcmUtZXhpc3RpbmcgbmcgZGlyZWN0aXZlczpcbiAqXG4gKiB8IERpcmVjdGl2ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydGVkIEFuaW1hdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0I2FuaW1hdGlvbnMgbmdSZXBlYXR9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVudGVyLCBsZWF2ZSBhbmQgbW92ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IHtAbGluayBuZ1JvdXRlLmRpcmVjdGl2ZTpuZ1ZpZXcjYW5pbWF0aW9ucyBuZ1ZpZXd9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZW50ZXIgYW5kIGxlYXZlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0luY2x1ZGUjYW5pbWF0aW9ucyBuZ0luY2x1ZGV9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlbnRlciBhbmQgbGVhdmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nU3dpdGNoI2FuaW1hdGlvbnMgbmdTd2l0Y2h9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVudGVyIGFuZCBsZWF2ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdJZiNhbmltYXRpb25zIG5nSWZ9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZW50ZXIgYW5kIGxlYXZlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsYXNzI2FuaW1hdGlvbnMgbmdDbGFzc30gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhZGQgYW5kIHJlbW92ZSAodGhlIENTUyBjbGFzcyhlcykgcHJlc2VudCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nU2hvdyNhbmltYXRpb25zIG5nU2hvd30gJiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSGlkZSNhbmltYXRpb25zIG5nSGlkZX0gICAgICAgICAgICB8IGFkZCBhbmQgcmVtb3ZlICh0aGUgbmctaGlkZSBjbGFzcyB2YWx1ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6Zm9ybSNhbmltYXRpb24taG9va3MgZm9ybX0gJiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWwjYW5pbWF0aW9uLWhvb2tzIG5nTW9kZWx9ICAgIHwgYWRkIGFuZCByZW1vdmUgKGRpcnR5LCBwcmlzdGluZSwgdmFsaWQsIGludmFsaWQgJiBhbGwgb3RoZXIgdmFsaWRhdGlvbnMpIHxcbiAqIHwge0BsaW5rIG1vZHVsZTpuZ01lc3NhZ2VzI2FuaW1hdGlvbnMgbmdNZXNzYWdlc30gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhZGQgYW5kIHJlbW92ZSAobmctYWN0aXZlICYgbmctaW5hY3RpdmUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCB7QGxpbmsgbW9kdWxlOm5nTWVzc2FnZXMjYW5pbWF0aW9ucyBuZ01lc3NhZ2V9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVudGVyIGFuZCBsZWF2ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKlxuICogWW91IGNhbiBmaW5kIG91dCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGFuaW1hdGlvbnMgdXBvbiB2aXNpdGluZyBlYWNoIGRpcmVjdGl2ZSBwYWdlLlxuICpcbiAqIEJlbG93IGlzIGFuIGV4YW1wbGUgb2YgaG93IHRvIGFwcGx5IGFuaW1hdGlvbnMgdG8gYSBkaXJlY3RpdmUgdGhhdCBzdXBwb3J0cyBhbmltYXRpb24gaG9va3M6XG4gKlxuICogYGBgaHRtbFxuICogPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPlxuICogLnNsaWRlLm5nLWVudGVyLCAuc2xpZGUubmctbGVhdmUge1xuICogICAtd2Via2l0LXRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xuICogICB0cmFuc2l0aW9uOjAuNXMgbGluZWFyIGFsbDtcbiAqIH1cbiAqXG4gKiAuc2xpZGUubmctZW50ZXIgeyB9ICAgICAgICAvJiM0Mjsgc3RhcnRpbmcgYW5pbWF0aW9ucyBmb3IgZW50ZXIgJiM0MjsvXG4gKiAuc2xpZGUubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHsgfSAvJiM0MjsgdGVybWluYWwgYW5pbWF0aW9ucyBmb3IgZW50ZXIgJiM0MjsvXG4gKiAuc2xpZGUubmctbGVhdmUgeyB9ICAgICAgICAvJiM0Mjsgc3RhcnRpbmcgYW5pbWF0aW9ucyBmb3IgbGVhdmUgJiM0MjsvXG4gKiAuc2xpZGUubmctbGVhdmUubmctbGVhdmUtYWN0aXZlIHsgfSAvJiM0MjsgdGVybWluYWwgYW5pbWF0aW9ucyBmb3IgbGVhdmUgJiM0MjsvXG4gKiA8L3N0eWxlPlxuICpcbiAqIDwhLS1cbiAqIHRoZSBhbmltYXRlIHNlcnZpY2Ugd2lsbCBhdXRvbWF0aWNhbGx5IGFkZCAubmctZW50ZXIgYW5kIC5uZy1sZWF2ZSB0byB0aGUgZWxlbWVudFxuICogdG8gdHJpZ2dlciB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uc1xuICogLS0+XG4gKiA8QU5ZIGNsYXNzPVwic2xpZGVcIiBuZy1pbmNsdWRlPVwiLi4uXCI+PC9BTlk+XG4gKiBgYGBcbiAqXG4gKiBLZWVwIGluIG1pbmQgdGhhdCwgYnkgZGVmYXVsdCwgaWYgYW4gYW5pbWF0aW9uIGlzIHJ1bm5pbmcsIGFueSBjaGlsZCBlbGVtZW50cyBjYW5ub3QgYmUgYW5pbWF0ZWRcbiAqIHVudGlsIHRoZSBwYXJlbnQgZWxlbWVudCdzIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkLiBUaGlzIGJsb2NraW5nIGZlYXR1cmUgY2FuIGJlIG92ZXJyaWRkZW4gYnlcbiAqIHBsYWNpbmcgdGhlIGBuZy1hbmltYXRlLWNoaWxkcmVuYCBhdHRyaWJ1dGUgb24gYSBwYXJlbnQgY29udGFpbmVyIHRhZy5cbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGNsYXNzPVwic2xpZGUtYW5pbWF0aW9uXCIgbmctaWY9XCJvblwiIG5nLWFuaW1hdGUtY2hpbGRyZW4+XG4gKiAgIDxkaXYgY2xhc3M9XCJmYWRlLWFuaW1hdGlvblwiIG5nLWlmPVwib25cIj5cbiAqICAgICA8ZGl2IGNsYXNzPVwiZXhwbG9kZS1hbmltYXRpb25cIiBuZy1pZj1cIm9uXCI+XG4gKiAgICAgICAgLi4uXG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZGl2PlxuICogPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBXaGVuIHRoZSBgb25gIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcyBhbmQgYW4gYW5pbWF0aW9uIGlzIHRyaWdnZXJlZCB0aGVuIGVhY2ggb2YgdGhlIGVsZW1lbnRzIHdpdGhpblxuICogd2lsbCBhbGwgYW5pbWF0ZSB3aXRob3V0IHRoZSBibG9jayBiZWluZyBhcHBsaWVkIHRvIGNoaWxkIGVsZW1lbnRzLlxuICpcbiAqICMjIEFyZSBhbmltYXRpb25zIHJ1biB3aGVuIHRoZSBhcHBsaWNhdGlvbiBzdGFydHM/XG4gKiBObyB0aGV5IGFyZSBub3QuIFdoZW4gYW4gYXBwbGljYXRpb24gaXMgYm9vdHN0cmFwcGVkIEFuZ3VsYXIgd2lsbCBkaXNhYmxlIGFuaW1hdGlvbnMgZnJvbSBydW5uaW5nIHRvIGF2b2lkXG4gKiBhIGZyZW56eSBvZiBhbmltYXRpb25zIGZyb20gYmVpbmcgdHJpZ2dlcmVkIGFzIHNvb24gYXMgdGhlIGJyb3dzZXIgaGFzIHJlbmRlcmVkIHRoZSBzY3JlZW4uIEZvciB0aGlzIHRvIHdvcmssXG4gKiBBbmd1bGFyIHdpbGwgd2FpdCBmb3IgdHdvIGRpZ2VzdCBjeWNsZXMgdW50aWwgZW5hYmxpbmcgYW5pbWF0aW9ucy4gRnJvbSB0aGVyZSBvbiwgYW55IGFuaW1hdGlvbi10cmlnZ2VyaW5nXG4gKiBsYXlvdXQgY2hhbmdlcyBpbiB0aGUgYXBwbGljYXRpb24gd2lsbCB0cmlnZ2VyIGFuaW1hdGlvbnMgYXMgbm9ybWFsLlxuICpcbiAqIEluIGFkZGl0aW9uLCB1cG9uIGJvb3RzdHJhcCwgaWYgdGhlIHJvdXRpbmcgc3lzdGVtIG9yIGFueSBkaXJlY3RpdmVzIG9yIGxvYWQgcmVtb3RlIGRhdGEgKHZpYSAkaHR0cCkgdGhlbiBBbmd1bGFyXG4gKiB3aWxsIGF1dG9tYXRpY2FsbHkgZXh0ZW5kIHRoZSB3YWl0IHRpbWUgdG8gZW5hYmxlIGFuaW1hdGlvbnMgb25jZSAqKmFsbCoqIG9mIHRoZSBvdXRib3VuZCBIVFRQIHJlcXVlc3RzXG4gKiBhcmUgY29tcGxldGUuXG4gKlxuICogIyMgQ1NTLWRlZmluZWQgQW5pbWF0aW9uc1xuICogVGhlIGFuaW1hdGUgc2VydmljZSB3aWxsIGF1dG9tYXRpY2FsbHkgYXBwbHkgdHdvIENTUyBjbGFzc2VzIHRvIHRoZSBhbmltYXRlZCBlbGVtZW50IGFuZCB0aGVzZSB0d28gQ1NTIGNsYXNzZXNcbiAqIGFyZSBkZXNpZ25lZCB0byBjb250YWluIHRoZSBzdGFydCBhbmQgZW5kIENTUyBzdHlsaW5nLiBCb3RoIENTUyB0cmFuc2l0aW9ucyBhbmQga2V5ZnJhbWUgYW5pbWF0aW9ucyBhcmUgc3VwcG9ydGVkXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gcGxheSBhbG9uZyB3aXRoIHRoaXMgbmFtaW5nIHN0cnVjdHVyZS5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGNvZGUgYmVsb3cgZGVtb25zdHJhdGVzIGhvdyB0byBwZXJmb3JtIGFuaW1hdGlvbnMgdXNpbmcgKipDU1MgdHJhbnNpdGlvbnMqKiB3aXRoIEFuZ3VsYXI6XG4gKlxuICogYGBgaHRtbFxuICogPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPlxuICogLyYjNDI7XG4gKiAgVGhlIGFuaW1hdGUgY2xhc3MgaXMgYXBhcnQgb2YgdGhlIGVsZW1lbnQgYW5kIHRoZSBuZy1lbnRlciBjbGFzc1xuICogIGlzIGF0dGFjaGVkIHRvIHRoZSBlbGVtZW50IG9uY2UgdGhlIGVudGVyIGFuaW1hdGlvbiBldmVudCBpcyB0cmlnZ2VyZWRcbiAqICYjNDI7L1xuICogLnJldmVhbC1hbmltYXRpb24ubmctZW50ZXIge1xuICogIC13ZWJraXQtdHJhbnNpdGlvbjogMXMgbGluZWFyIGFsbDsgLyYjNDI7IFNhZmFyaS9DaHJvbWUgJiM0MjsvXG4gKiAgdHJhbnNpdGlvbjogMXMgbGluZWFyIGFsbDsgLyYjNDI7IEFsbCBvdGhlciBtb2Rlcm4gYnJvd3NlcnMgYW5kIElFMTArICYjNDI7L1xuICpcbiAqICAvJiM0MjsgVGhlIGFuaW1hdGlvbiBwcmVwYXJhdGlvbiBjb2RlICYjNDI7L1xuICogIG9wYWNpdHk6IDA7XG4gKiB9XG4gKlxuICogLyYjNDI7XG4gKiAgS2VlcCBpbiBtaW5kIHRoYXQgeW91IHdhbnQgdG8gY29tYmluZSBib3RoIENTU1xuICogIGNsYXNzZXMgdG9nZXRoZXIgdG8gYXZvaWQgYW55IENTUy1zcGVjaWZpY2l0eVxuICogIGNvbmZsaWN0c1xuICogJiM0MjsvXG4gKiAucmV2ZWFsLWFuaW1hdGlvbi5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xuICogIC8mIzQyOyBUaGUgYW5pbWF0aW9uIGNvZGUgaXRzZWxmICYjNDI7L1xuICogIG9wYWNpdHk6IDE7XG4gKiB9XG4gKiA8L3N0eWxlPlxuICpcbiAqIDxkaXYgY2xhc3M9XCJ2aWV3LWNvbnRhaW5lclwiPlxuICogICA8ZGl2IG5nLXZpZXcgY2xhc3M9XCJyZXZlYWwtYW5pbWF0aW9uXCI+PC9kaXY+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIFRoZSBmb2xsb3dpbmcgY29kZSBiZWxvdyBkZW1vbnN0cmF0ZXMgaG93IHRvIHBlcmZvcm0gYW5pbWF0aW9ucyB1c2luZyAqKkNTUyBhbmltYXRpb25zKiogd2l0aCBBbmd1bGFyOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5cbiAqIC5yZXZlYWwtYW5pbWF0aW9uLm5nLWVudGVyIHtcbiAqICAgLXdlYmtpdC1hbmltYXRpb246IGVudGVyX3NlcXVlbmNlIDFzIGxpbmVhcjsgLyYjNDI7IFNhZmFyaS9DaHJvbWUgJiM0MjsvXG4gKiAgIGFuaW1hdGlvbjogZW50ZXJfc2VxdWVuY2UgMXMgbGluZWFyOyAvJiM0MjsgSUUxMCsgYW5kIEZ1dHVyZSBCcm93c2VycyAmIzQyOy9cbiAqIH1cbiAqIEAtd2Via2l0LWtleWZyYW1lcyBlbnRlcl9zZXF1ZW5jZSB7XG4gKiAgIGZyb20geyBvcGFjaXR5OjA7IH1cbiAqICAgdG8geyBvcGFjaXR5OjE7IH1cbiAqIH1cbiAqIEBrZXlmcmFtZXMgZW50ZXJfc2VxdWVuY2Uge1xuICogICBmcm9tIHsgb3BhY2l0eTowOyB9XG4gKiAgIHRvIHsgb3BhY2l0eToxOyB9XG4gKiB9XG4gKiA8L3N0eWxlPlxuICpcbiAqIDxkaXYgY2xhc3M9XCJ2aWV3LWNvbnRhaW5lclwiPlxuICogICA8ZGl2IG5nLXZpZXcgY2xhc3M9XCJyZXZlYWwtYW5pbWF0aW9uXCI+PC9kaXY+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEJvdGggQ1NTMyBhbmltYXRpb25zIGFuZCB0cmFuc2l0aW9ucyBjYW4gYmUgdXNlZCB0b2dldGhlciBhbmQgdGhlIGFuaW1hdGUgc2VydmljZSB3aWxsIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgZHVyYXRpb24gYW5kIGRlbGF5IHRpbWluZy5cbiAqXG4gKiBVcG9uIERPTSBtdXRhdGlvbiwgdGhlIGV2ZW50IGNsYXNzIGlzIGFkZGVkIGZpcnN0IChzb21ldGhpbmcgbGlrZSBgbmctZW50ZXJgKSwgdGhlbiB0aGUgYnJvd3NlciBwcmVwYXJlcyBpdHNlbGYgdG8gYWRkXG4gKiB0aGUgYWN0aXZlIGNsYXNzIChpbiB0aGlzIGNhc2UgYG5nLWVudGVyLWFjdGl2ZWApIHdoaWNoIHRoZW4gdHJpZ2dlcnMgdGhlIGFuaW1hdGlvbi4gVGhlIGFuaW1hdGlvbiBtb2R1bGUgd2lsbCBhdXRvbWF0aWNhbGx5XG4gKiBkZXRlY3QgdGhlIENTUyBjb2RlIHRvIGRldGVybWluZSB3aGVuIHRoZSBhbmltYXRpb24gZW5kcy4gT25jZSB0aGUgYW5pbWF0aW9uIGlzIG92ZXIgdGhlbiBib3RoIENTUyBjbGFzc2VzIHdpbGwgYmVcbiAqIHJlbW92ZWQgZnJvbSB0aGUgRE9NLiBJZiBhIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBDU1MgdHJhbnNpdGlvbnMgb3IgQ1NTIGFuaW1hdGlvbnMgdGhlbiB0aGUgYW5pbWF0aW9uIHdpbGwgc3RhcnQgYW5kIGVuZFxuICogaW1tZWRpYXRlbHkgcmVzdWx0aW5nIGluIGEgRE9NIGVsZW1lbnQgdGhhdCBpcyBhdCBpdHMgZmluYWwgc3RhdGUuIFRoaXMgZmluYWwgc3RhdGUgaXMgd2hlbiB0aGUgRE9NIGVsZW1lbnRcbiAqIGhhcyBubyBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24gY2xhc3NlcyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqICMjIyBTdHJ1Y3R1cmFsIHRyYW5zaXRpb24gYW5pbWF0aW9uc1xuICpcbiAqIFN0cnVjdHVyYWwgdHJhbnNpdGlvbnMgKHN1Y2ggYXMgZW50ZXIsIGxlYXZlIGFuZCBtb3ZlKSB3aWxsIGFsd2F5cyBhcHBseSBhIGAwcyBub25lYCB0cmFuc2l0aW9uXG4gKiB2YWx1ZSB0byBmb3JjZSB0aGUgYnJvd3NlciBpbnRvIHJlbmRlcmluZyB0aGUgc3R5bGVzIGRlZmluZWQgaW4gdGhlIHNldHVwIChgLm5nLWVudGVyYCwgYC5uZy1sZWF2ZWBcbiAqIG9yIGAubmctbW92ZWApIGNsYXNzLiBUaGlzIG1lYW5zIHRoYXQgYW55IGFjdGl2ZSB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgb3BlcmF0aW5nIG9uIHRoZSBlbGVtZW50XG4gKiB3aWxsIGJlIGN1dCBvZmYgdG8gbWFrZSB3YXkgZm9yIHRoZSBlbnRlciwgbGVhdmUgb3IgbW92ZSBhbmltYXRpb24uXG4gKlxuICogIyMjIENsYXNzLWJhc2VkIHRyYW5zaXRpb24gYW5pbWF0aW9uc1xuICpcbiAqIENsYXNzLWJhc2VkIHRyYW5zaXRpb25zIHJlZmVyIHRvIHRyYW5zaXRpb24gYW5pbWF0aW9ucyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2hlbiBhIENTUyBjbGFzcyBpc1xuICogYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50ICh2aWEgYCRhbmltYXRlLmFkZENsYXNzYCwgYCRhbmltYXRlLnJlbW92ZUNsYXNzYCxcbiAqIGAkYW5pbWF0ZS5zZXRDbGFzc2AsIG9yIGJ5IGRpcmVjdGl2ZXMgc3VjaCBhcyBgbmdDbGFzc2AsIGBuZ01vZGVsYCBhbmQgYGZvcm1gKS5cbiAqIFRoZXkgYXJlIGRpZmZlcmVudCB3aGVuIGNvbXBhcmVkIHRvIHN0cnVjdHVyYWwgYW5pbWF0aW9ucyBzaW5jZSB0aGV5ICoqZG8gbm90IGNhbmNlbCBleGlzdGluZ1xuICogYW5pbWF0aW9ucyoqIG5vciBkbyB0aGV5ICoqYmxvY2sgc3VjY2Vzc2l2ZSB0cmFuc2l0aW9ucyoqIGZyb20gcmVuZGVyaW5nIG9uIHRoZSBzYW1lIGVsZW1lbnQuXG4gKiBUaGlzIGRpc3RpbmN0aW9uIGFsbG93cyBmb3IgKiptdWx0aXBsZSBjbGFzcy1iYXNlZCB0cmFuc2l0aW9ucyoqIHRvIGJlIHBlcmZvcm1lZCBvbiB0aGUgc2FtZSBlbGVtZW50LlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIG5nQW5pbWF0ZSBzdXBwb3J0aW5nIHRoZSBkZWZhdWx0IChuYXR1cmFsKSBmdW5jdGlvbmFsaXR5IG9mIGNsYXNzLWJhc2VkIHRyYW5zaXRpb25cbiAqIGFuaW1hdGlvbnMsIG5nQW5pbWF0ZSBhbHNvIGRlY29yYXRlcyB0aGUgZWxlbWVudCB3aXRoIHN0YXJ0aW5nIGFuZCBlbmRpbmcgQ1NTIGNsYXNzZXMgdG8gYWlkIHRoZVxuICogZGV2ZWxvcGVyIGluIGZ1cnRoZXIgc3R5bGluZyB0aGUgZWxlbWVudCB0aHJvdWdob3V0IHRoZSB0cmFuc2l0aW9uIGFuaW1hdGlvbi4gRWFybGllciB2ZXJzaW9uc1xuICogb2YgbmdBbmltYXRlIG1heSBoYXZlIGNhdXNlZCBuYXR1cmFsIENTUyB0cmFuc2l0aW9ucyB0byBicmVhayBhbmQgbm90IHJlbmRlciBwcm9wZXJseSBkdWUgdG9cbiAqICRhbmltYXRlIHRlbXBvcmFyaWx5IGJsb2NraW5nIHRyYW5zaXRpb25zIHVzaW5nIGAwcyBub25lYCBpbiBvcmRlciB0byBhbGxvdyB0aGUgc2V0dXAgQ1NTIGNsYXNzXG4gKiAodGhlIGAtYWRkYCBvciBgLXJlbW92ZWAgY2xhc3MpIHRvIGJlIGFwcGxpZWQgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGFuaW1hdGlvbi4gSG93ZXZlciwgYXMgb2ZcbiAqICoqdmVyc2lvbiAxLjMqKiwgdGhpcyB3b3JrYXJvdW5kIGhhcyBiZWVuIHJlbW92ZWQgd2l0aCBuZ0FuaW1hdGUgYW5kIGFsbCBub24tbmdBbmltYXRlIENTU1xuICogY2xhc3MgdHJhbnNpdGlvbnMgYXJlIGNvbXBhdGlibGUgd2l0aCBuZ0FuaW1hdGUuXG4gKlxuICogVGhlcmUgaXMsIGhvd2V2ZXIsIG9uZSBzcGVjaWFsIGNhc2Ugd2hlbiBkZWFsaW5nIHdpdGggY2xhc3MtYmFzZWQgdHJhbnNpdGlvbnMgaW4gbmdBbmltYXRlLlxuICogV2hlbiByZW5kZXJpbmcgY2xhc3MtYmFzZWQgdHJhbnNpdGlvbnMgdGhhdCBtYWtlIHVzZSBvZiB0aGUgc2V0dXAgYW5kIGFjdGl2ZSBDU1MgY2xhc3Nlc1xuICogKGUuZy4gYC5mYWRlLWFkZGAgYW5kIGAuZmFkZS1hZGQtYWN0aXZlYCBmb3Igd2hlbiBgLmZhZGVgIGlzIGFkZGVkKSBiZSBzdXJlIHRvIGRlZmluZVxuICogdGhlIHRyYW5zaXRpb24gdmFsdWUgKipvbiB0aGUgYWN0aXZlIENTUyBjbGFzcyoqIGFuZCBub3QgdGhlIHNldHVwIGNsYXNzLlxuICpcbiAqIGBgYGNzc1xuICogLmZhZGUtYWRkIHtcbiAqICAgLyYjNDI7IHJlbWVtYmVyIHRvIHBsYWNlIGEgMHMgdHJhbnNpdGlvbiBoZXJlXG4gKiAgICAgIHRvIGVuc3VyZSB0aGF0IHRoZSBzdHlsZXMgYXJlIGFwcGxpZWQgaW5zdGFudGx5XG4gKiAgICAgIGV2ZW4gaWYgdGhlIGVsZW1lbnQgYWxyZWFkeSBoYXMgYSB0cmFuc2l0aW9uIHN0eWxlICYjNDI7L1xuICogICB0cmFuc2l0aW9uOjBzIGxpbmVhciBhbGw7XG4gKlxuICogICAvJiM0Mjsgc3RhcnRpbmcgQ1NTIHN0eWxlcyAmIzQyOy9cbiAqICAgb3BhY2l0eToxO1xuICogfVxuICogLmZhZGUtYWRkLmZhZGUtYWRkLWFjdGl2ZSB7XG4gKiAgIC8mIzQyOyB0aGlzIHdpbGwgYmUgdGhlIGxlbmd0aCBvZiB0aGUgYW5pbWF0aW9uICYjNDI7L1xuICogICB0cmFuc2l0aW9uOjFzIGxpbmVhciBhbGw7XG4gKiAgIG9wYWNpdHk6MDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIFRoZSBzZXR1cCBDU1MgY2xhc3MgKGluIHRoaXMgY2FzZSBgLmZhZGUtYWRkYCkgYWxzbyBoYXMgYSB0cmFuc2l0aW9uIHN0eWxlIHByb3BlcnR5LCBob3dldmVyLCBpdFxuICogaGFzIGEgZHVyYXRpb24gb2YgemVyby4gVGhpcyBtYXkgbm90IGJlIHJlcXVpcmVkLCBob3dldmVyLCBpbmNhc2UgdGhlIGJyb3dzZXIgaXMgdW5hYmxlIHRvIHJlbmRlclxuICogdGhlIHN0eWxpbmcgcHJlc2VudCBpbiB0aGlzIENTUyBjbGFzcyBpbnN0YW50bHkgdGhlbiBpdCBjb3VsZCBiZSB0aGF0IHRoZSBicm93c2VyIGlzIGF0dGVtcHRpbmdcbiAqIHRvIHBlcmZvcm0gYW4gdW5uZWNlc3NhcnkgdHJhbnNpdGlvbi5cbiAqXG4gKiBUaGlzIHdvcmthcm91bmQsIGhvd2V2ZXIsIGRvZXMgbm90IGFwcGx5IHRvICBzdGFuZGFyZCBjbGFzcy1iYXNlZCB0cmFuc2l0aW9ucyB0aGF0IGFyZSByZW5kZXJlZFxuICogd2hlbiBhIENTUyBjbGFzcyBjb250YWluaW5nIGEgdHJhbnNpdGlvbiBpcyBhcHBsaWVkIHRvIGFuIGVsZW1lbnQ6XG4gKlxuICogYGBgY3NzXG4gKiAvJiM0MjsgdGhpcyB3b3JrcyBhcyBleHBlY3RlZCAmIzQyOy9cbiAqIC5mYWRlIHtcbiAqICAgdHJhbnNpdGlvbjoxcyBsaW5lYXIgYWxsO1xuICogICBvcGFjaXR5OjA7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBQbGVhc2Uga2VlcCB0aGlzIGluIG1pbmQgd2hlbiBjb2RpbmcgdGhlIENTUyBtYXJrdXAgdGhhdCB3aWxsIGJlIHVzZWQgd2l0aGluIGNsYXNzLWJhc2VkIHRyYW5zaXRpb25zLlxuICogQWxzbywgdHJ5IG5vdCB0byBtaXggdGhlIHR3byBjbGFzcy1iYXNlZCBhbmltYXRpb24gZmxhdm9ycyB0b2dldGhlciBzaW5jZSB0aGUgQ1NTIGNvZGUgbWF5IGJlY29tZVxuICogb3Zlcmx5IGNvbXBsZXguXG4gKlxuICpcbiAqICMjIyBQcmV2ZW50aW5nIENvbGxpc2lvbnMgV2l0aCBUaGlyZCBQYXJ0eSBMaWJyYXJpZXNcbiAqXG4gKiBTb21lIHRoaXJkLXBhcnR5IGZyYW1ld29ya3MgcGxhY2UgYW5pbWF0aW9uIGR1cmF0aW9uIGRlZmF1bHRzIGFjcm9zcyBtYW55IGVsZW1lbnQgb3IgY2xhc3NOYW1lXG4gKiBzZWxlY3RvcnMgaW4gb3JkZXIgdG8gbWFrZSB0aGVpciBjb2RlIHNtYWxsIGFuZCByZXVzZWFibGUuIFRoaXMgY2FuIGxlYWQgdG8gaXNzdWVzIHdpdGggbmdBbmltYXRlLCB3aGljaFxuICogaXMgZXhwZWN0aW5nIGFjdHVhbCBhbmltYXRpb25zIG9uIHRoZXNlIGVsZW1lbnRzIGFuZCBoYXMgdG8gd2FpdCBmb3IgdGhlaXIgY29tcGxldGlvbi5cbiAqXG4gKiBZb3UgY2FuIHByZXZlbnQgdGhpcyB1bndhbnRlZCBiZWhhdmlvciBieSB1c2luZyBhIHByZWZpeCBvbiBhbGwgeW91ciBhbmltYXRpb24gY2xhc3NlczpcbiAqXG4gKiBgYGBjc3NcbiAqIC8mIzQyOyBwcmVmaXhlZCB3aXRoIGFuaW1hdGUtICYjNDI7L1xuICogLmFuaW1hdGUtZmFkZS1hZGQuYW5pbWF0ZS1mYWRlLWFkZC1hY3RpdmUge1xuICogICB0cmFuc2l0aW9uOjFzIGxpbmVhciBhbGw7XG4gKiAgIG9wYWNpdHk6MDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIFlvdSB0aGVuIGNvbmZpZ3VyZSBgJGFuaW1hdGVgIHRvIGVuZm9yY2UgdGhpcyBwcmVmaXg6XG4gKlxuICogYGBganNcbiAqICRhbmltYXRlUHJvdmlkZXIuY2xhc3NOYW1lRmlsdGVyKC9hbmltYXRlLS8pO1xuICogYGBgXG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyMgQ1NTIFN0YWdnZXJpbmcgQW5pbWF0aW9uc1xuICogQSBTdGFnZ2VyaW5nIGFuaW1hdGlvbiBpcyBhIGNvbGxlY3Rpb24gb2YgYW5pbWF0aW9ucyB0aGF0IGFyZSBpc3N1ZWQgd2l0aCBhIHNsaWdodCBkZWxheSBpbiBiZXR3ZWVuIGVhY2ggc3VjY2Vzc2l2ZSBvcGVyYXRpb24gcmVzdWx0aW5nIGluIGFcbiAqIGN1cnRhaW4tbGlrZSBlZmZlY3QuIFRoZSBuZ0FuaW1hdGUgbW9kdWxlICh2ZXJzaW9ucyA+PTEuMikgc3VwcG9ydHMgc3RhZ2dlcmluZyBhbmltYXRpb25zIGFuZCB0aGUgc3RhZ2dlciBlZmZlY3QgY2FuIGJlXG4gKiBwZXJmb3JtZWQgYnkgY3JlYXRpbmcgYSAqKm5nLUVWRU5ULXN0YWdnZXIqKiBDU1MgY2xhc3MgYW5kIGF0dGFjaGluZyB0aGF0IGNsYXNzIHRvIHRoZSBiYXNlIENTUyBjbGFzcyB1c2VkIGZvclxuICogdGhlIGFuaW1hdGlvbi4gVGhlIHN0eWxlIHByb3BlcnR5IGV4cGVjdGVkIHdpdGhpbiB0aGUgc3RhZ2dlciBjbGFzcyBjYW4gZWl0aGVyIGJlIGEgKip0cmFuc2l0aW9uLWRlbGF5Kiogb3IgYW5cbiAqICoqYW5pbWF0aW9uLWRlbGF5KiogcHJvcGVydHkgKG9yIGJvdGggaWYgeW91ciBhbmltYXRpb24gY29udGFpbnMgYm90aCB0cmFuc2l0aW9ucyBhbmQga2V5ZnJhbWUgYW5pbWF0aW9ucykuXG4gKlxuICogYGBgY3NzXG4gKiAubXktYW5pbWF0aW9uLm5nLWVudGVyIHtcbiAqICAgLyYjNDI7IHN0YW5kYXJkIHRyYW5zaXRpb24gY29kZSAmIzQyOy9cbiAqICAgLXdlYmtpdC10cmFuc2l0aW9uOiAxcyBsaW5lYXIgYWxsO1xuICogICB0cmFuc2l0aW9uOiAxcyBsaW5lYXIgYWxsO1xuICogICBvcGFjaXR5OjA7XG4gKiB9XG4gKiAubXktYW5pbWF0aW9uLm5nLWVudGVyLXN0YWdnZXIge1xuICogICAvJiM0MjsgdGhpcyB3aWxsIGhhdmUgYSAxMDBtcyBkZWxheSBiZXR3ZWVuIGVhY2ggc3VjY2Vzc2l2ZSBsZWF2ZSBhbmltYXRpb24gJiM0MjsvXG4gKiAgIC13ZWJraXQtdHJhbnNpdGlvbi1kZWxheTogMC4xcztcbiAqICAgdHJhbnNpdGlvbi1kZWxheTogMC4xcztcbiAqXG4gKiAgIC8mIzQyOyBpbiBjYXNlIHRoZSBzdGFnZ2VyIGRvZXNuJ3Qgd29yayB0aGVuIHRoZXNlIHR3byB2YWx1ZXNcbiAqICAgIG11c3QgYmUgc2V0IHRvIDAgdG8gYXZvaWQgYW4gYWNjaWRlbnRhbCBDU1MgaW5oZXJpdGFuY2UgJiM0MjsvXG4gKiAgIC13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbjogMHM7XG4gKiAgIHRyYW5zaXRpb24tZHVyYXRpb246IDBzO1xuICogfVxuICogLm15LWFuaW1hdGlvbi5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xuICogICAvJiM0Mjsgc3RhbmRhcmQgdHJhbnNpdGlvbiBzdHlsZXMgJiM0MjsvXG4gKiAgIG9wYWNpdHk6MTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIFN0YWdnZXJpbmcgYW5pbWF0aW9ucyB3b3JrIGJ5IGRlZmF1bHQgaW4gbmdSZXBlYXQgKHNvIGxvbmcgYXMgdGhlIENTUyBjbGFzcyBpcyBkZWZpbmVkKS4gT3V0c2lkZSBvZiBuZ1JlcGVhdCwgdG8gdXNlIHN0YWdnZXJpbmcgYW5pbWF0aW9uc1xuICogb24geW91ciBvd24sIHRoZXkgY2FuIGJlIHRyaWdnZXJlZCBieSBmaXJpbmcgbXVsdGlwbGUgY2FsbHMgdG8gdGhlIHNhbWUgZXZlbnQgb24gJGFuaW1hdGUuIEhvd2V2ZXIsIHRoZSByZXN0cmljdGlvbnMgc3Vycm91bmRpbmcgdGhpc1xuICogYXJlIHRoYXQgZWFjaCBvZiB0aGUgZWxlbWVudHMgbXVzdCBoYXZlIHRoZSBzYW1lIENTUyBjbGFzc05hbWUgdmFsdWUgYXMgd2VsbCBhcyB0aGUgc2FtZSBwYXJlbnQgZWxlbWVudC4gQSBzdGFnZ2VyIG9wZXJhdGlvblxuICogd2lsbCBhbHNvIGJlIHJlc2V0IGlmIG1vcmUgdGhhbiAxMG1zIGhhcyBwYXNzZWQgYWZ0ZXIgdGhlIGxhc3QgYW5pbWF0aW9uIGhhcyBiZWVuIGZpcmVkLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgY29kZSB3aWxsIGlzc3VlIHRoZSAqKm5nLWxlYXZlLXN0YWdnZXIqKiBldmVudCBvbiB0aGUgZWxlbWVudCBwcm92aWRlZDpcbiAqXG4gKiBgYGBqc1xuICogdmFyIGtpZHMgPSBwYXJlbnQuY2hpbGRyZW4oKTtcbiAqXG4gKiAkYW5pbWF0ZS5sZWF2ZShraWRzWzBdKTsgLy9zdGFnZ2VyIGluZGV4PTBcbiAqICRhbmltYXRlLmxlYXZlKGtpZHNbMV0pOyAvL3N0YWdnZXIgaW5kZXg9MVxuICogJGFuaW1hdGUubGVhdmUoa2lkc1syXSk7IC8vc3RhZ2dlciBpbmRleD0yXG4gKiAkYW5pbWF0ZS5sZWF2ZShraWRzWzNdKTsgLy9zdGFnZ2VyIGluZGV4PTNcbiAqICRhbmltYXRlLmxlYXZlKGtpZHNbNF0pOyAvL3N0YWdnZXIgaW5kZXg9NFxuICpcbiAqICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICogICAvL3N0YWdnZXIgaGFzIHJlc2V0IGl0c2VsZlxuICogICAkYW5pbWF0ZS5sZWF2ZShraWRzWzVdKTsgLy9zdGFnZ2VyIGluZGV4PTBcbiAqICAgJGFuaW1hdGUubGVhdmUoa2lkc1s2XSk7IC8vc3RhZ2dlciBpbmRleD0xXG4gKiB9LCAxMDAsIGZhbHNlKTtcbiAqIGBgYFxuICpcbiAqIFN0YWdnZXIgYW5pbWF0aW9ucyBhcmUgY3VycmVudGx5IG9ubHkgc3VwcG9ydGVkIHdpdGhpbiBDU1MtZGVmaW5lZCBhbmltYXRpb25zLlxuICpcbiAqICMjIEphdmFTY3JpcHQtZGVmaW5lZCBBbmltYXRpb25zXG4gKiBJbiB0aGUgZXZlbnQgdGhhdCB5b3UgZG8gbm90IHdhbnQgdG8gdXNlIENTUzMgdHJhbnNpdGlvbnMgb3IgQ1NTMyBhbmltYXRpb25zIG9yIGlmIHlvdSB3aXNoIHRvIG9mZmVyIGFuaW1hdGlvbnMgb24gYnJvd3NlcnMgdGhhdCBkbyBub3RcbiAqIHlldCBzdXBwb3J0IENTUyB0cmFuc2l0aW9ucy9hbmltYXRpb25zLCB0aGVuIHlvdSBjYW4gbWFrZSB1c2Ugb2YgSmF2YVNjcmlwdCBhbmltYXRpb25zIGRlZmluZWQgaW5zaWRlIG9mIHlvdXIgQW5ndWxhckpTIG1vZHVsZS5cbiAqXG4gKiBgYGBqc1xuICogLy8hYW5ub3RhdGU9XCJZb3VyQXBwXCIgWW91ciBBbmd1bGFySlMgTW9kdWxlfFJlcGxhY2UgdGhpcyBvciBuZ01vZHVsZSB3aXRoIHRoZSBtb2R1bGUgdGhhdCB5b3UgdXNlZCB0byBkZWZpbmUgeW91ciBhcHBsaWNhdGlvbi5cbiAqIHZhciBuZ01vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdZb3VyQXBwJywgWyduZ0FuaW1hdGUnXSk7XG4gKiBuZ01vZHVsZS5hbmltYXRpb24oJy5teS1jcmF6eS1hbmltYXRpb24nLCBmdW5jdGlvbigpIHtcbiAqICAgcmV0dXJuIHtcbiAqICAgICBlbnRlcjogZnVuY3Rpb24oZWxlbWVudCwgZG9uZSkge1xuICogICAgICAgLy9ydW4gdGhlIGFuaW1hdGlvbiBoZXJlIGFuZCBjYWxsIGRvbmUgd2hlbiB0aGUgYW5pbWF0aW9uIGlzIGNvbXBsZXRlXG4gKiAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FuY2VsbGVkKSB7XG4gKiAgICAgICAgIC8vdGhpcyAob3B0aW9uYWwpIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGFuaW1hdGlvblxuICogICAgICAgICAvL2NvbXBsZXRlcyBvciB3aGVuIHRoZSBhbmltYXRpb24gaXMgY2FuY2VsbGVkICh0aGUgY2FuY2VsbGVkXG4gKiAgICAgICAgIC8vZmxhZyB3aWxsIGJlIHNldCB0byB0cnVlIGlmIGNhbmNlbGxlZCkuXG4gKiAgICAgICB9O1xuICogICAgIH0sXG4gKiAgICAgbGVhdmU6IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHsgfSxcbiAqICAgICBtb3ZlOiBmdW5jdGlvbihlbGVtZW50LCBkb25lKSB7IH0sXG4gKlxuICogICAgIC8vYW5pbWF0aW9uIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIGNsYXNzIGlzIGFkZGVkXG4gKiAgICAgYmVmb3JlQWRkQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgZG9uZSkgeyB9LFxuICpcbiAqICAgICAvL2FuaW1hdGlvbiB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYWZ0ZXIgdGhlIGNsYXNzIGlzIGFkZGVkXG4gKiAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgZG9uZSkgeyB9LFxuICpcbiAqICAgICAvL2FuaW1hdGlvbiB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYmVmb3JlIHRoZSBjbGFzcyBpcyByZW1vdmVkXG4gKiAgICAgYmVmb3JlUmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgZG9uZSkgeyB9LFxuICpcbiAqICAgICAvL2FuaW1hdGlvbiB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYWZ0ZXIgdGhlIGNsYXNzIGlzIHJlbW92ZWRcbiAqICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBkb25lKSB7IH1cbiAqICAgfTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogSmF2YVNjcmlwdC1kZWZpbmVkIGFuaW1hdGlvbnMgYXJlIGNyZWF0ZWQgd2l0aCBhIENTUy1saWtlIGNsYXNzIHNlbGVjdG9yIGFuZCBhIGNvbGxlY3Rpb24gb2YgZXZlbnRzIHdoaWNoIGFyZSBzZXQgdG8gcnVuXG4gKiBhIGphdmFzY3JpcHQgY2FsbGJhY2sgZnVuY3Rpb24uIFdoZW4gYW4gYW5pbWF0aW9uIGlzIHRyaWdnZXJlZCwgJGFuaW1hdGUgd2lsbCBsb29rIGZvciBhIG1hdGNoaW5nIGFuaW1hdGlvbiB3aGljaCBmaXRzXG4gKiB0aGUgZWxlbWVudCdzIENTUyBjbGFzcyBhdHRyaWJ1dGUgdmFsdWUgYW5kIHRoZW4gcnVuIHRoZSBtYXRjaGluZyBhbmltYXRpb24gZXZlbnQgZnVuY3Rpb24gKGlmIGZvdW5kKS5cbiAqIEluIG90aGVyIHdvcmRzLCBpZiB0aGUgQ1NTIGNsYXNzZXMgcHJlc2VudCBvbiB0aGUgYW5pbWF0ZWQgZWxlbWVudCBtYXRjaCBhbnkgb2YgdGhlIEphdmFTY3JpcHQgYW5pbWF0aW9ucyB0aGVuIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsXG4gKiBiZSBleGVjdXRlZC4gSXQgc2hvdWxkIGJlIGFsc28gbm90ZWQgdGhhdCBvbmx5IHNpbXBsZSwgc2luZ2xlIGNsYXNzIHNlbGVjdG9ycyBhcmUgYWxsb3dlZCAoY29tcG91bmQgY2xhc3Mgc2VsZWN0b3JzIGFyZSBub3Qgc3VwcG9ydGVkKS5cbiAqXG4gKiBXaXRoaW4gYSBKYXZhU2NyaXB0IGFuaW1hdGlvbiwgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdmFyaW91cyBldmVudCBjYWxsYmFjayBhbmltYXRpb24gZnVuY3Rpb25zIGlzIGV4cGVjdGVkIHRvIGJlIHJldHVybmVkLlxuICogQXMgZXhwbGFpbmVkIGFib3ZlLCB0aGVzZSBjYWxsYmFja3MgYXJlIHRyaWdnZXJlZCBiYXNlZCBvbiB0aGUgYW5pbWF0aW9uIGV2ZW50LiBUaGVyZWZvcmUgaWYgYW4gZW50ZXIgYW5pbWF0aW9uIGlzIHJ1bixcbiAqIGFuZCB0aGUgSmF2YVNjcmlwdCBhbmltYXRpb24gaXMgZm91bmQsIHRoZW4gdGhlIGVudGVyIGNhbGxiYWNrIHdpbGwgaGFuZGxlIHRoYXQgYW5pbWF0aW9uIChpbiBhZGRpdGlvbiB0byB0aGUgQ1NTIGtleWZyYW1lIGFuaW1hdGlvblxuICogb3IgdHJhbnNpdGlvbiBjb2RlIHRoYXQgaXMgZGVmaW5lZCB2aWEgYSBzdHlsZXNoZWV0KS5cbiAqXG4gKlxuICogIyMjIEFwcGx5aW5nIERpcmVjdGl2ZS1zcGVjaWZpYyBTdHlsZXMgdG8gYW4gQW5pbWF0aW9uXG4gKiBJbiBzb21lIGNhc2VzIGEgZGlyZWN0aXZlIG9yIHNlcnZpY2UgbWF5IHdhbnQgdG8gcHJvdmlkZSBgJGFuaW1hdGVgIHdpdGggZXh0cmEgZGV0YWlscyB0aGF0IHRoZSBhbmltYXRpb24gd2lsbFxuICogaW5jbHVkZSBpbnRvIGl0cyBhbmltYXRpb24uIExldCdzIHNheSBmb3IgZXhhbXBsZSB3ZSB3YW50ZWQgdG8gcmVuZGVyIGFuIGFuaW1hdGlvbiB0aGF0IGFuaW1hdGVzIGFuIGVsZW1lbnRcbiAqIHRvd2FyZHMgdGhlIG1vdXNlIGNvb3JkaW5hdGVzIGFzIHRvIHdoZXJlIHRoZSB1c2VyIGNsaWNrZWQgbGFzdC4gQnkgY29sbGVjdGluZyB0aGUgWC9ZIGNvb3JkaW5hdGVzIG9mIHRoZSBjbGlja1xuICogKHZpYSB0aGUgZXZlbnQgcGFyYW1ldGVyKSB3ZSBjYW4gc2V0IHRoZSBgdG9wYCBhbmQgYGxlZnRgIHN0eWxlcyBpbnRvIGFuIG9iamVjdCBhbmQgcGFzcyB0aGF0IGludG8gb3VyIGZ1bmN0aW9uXG4gKiBjYWxsIHRvIGAkYW5pbWF0ZS5hZGRDbGFzc2AuXG4gKlxuICogYGBganNcbiAqIGNhbnZhcy5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gKiAgICRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsICdvbicsIHtcbiAqICAgICB0bzoge1xuICogICAgICAgbGVmdCA6IGUuY2xpZW50LnggKyAncHgnLFxuICogICAgICAgdG9wIDogZS5jbGllbnQueSArICdweCdcbiAqICAgICB9XG4gKiAgIH0pOlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBOb3cgd2hlbiB0aGUgYW5pbWF0aW9uIHJ1bnMsIGFuZCBhIHRyYW5zaXRpb24gb3Iga2V5ZnJhbWUgYW5pbWF0aW9uIGlzIHBpY2tlZCB1cCwgdGhlbiB0aGUgYW5pbWF0aW9uIGl0c2VsZiB3aWxsXG4gKiBhbHNvIGluY2x1ZGUgYW5kIHRyYW5zaXRpb24gdGhlIHN0eWxpbmcgb2YgdGhlIGBsZWZ0YCBhbmQgYHRvcGAgcHJvcGVydGllcyBpbnRvIGl0cyBydW5uaW5nIGFuaW1hdGlvbi4gSWYgd2Ugd2FudFxuICogdG8gcHJvdmlkZSBzb21lIHN0YXJ0aW5nIGFuaW1hdGlvbiB2YWx1ZXMgdGhlbiB3ZSBjYW4gZG8gc28gYnkgcGxhY2luZyB0aGUgc3RhcnRpbmcgYW5pbWF0aW9ucyBzdHlsZXMgaW50byBhbiBvYmplY3RcbiAqIGNhbGxlZCBgZnJvbWAgaW4gdGhlIHNhbWUgb2JqZWN0IGFzIHRoZSBgdG9gIGFuaW1hdGlvbnMuXG4gKlxuICogYGBganNcbiAqIGNhbnZhcy5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gKiAgICRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsICdvbicsIHtcbiAqICAgICBmcm9tOiB7XG4gKiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gKiAgICAgICAgbGVmdDogJzBweCcsXG4gKiAgICAgICAgdG9wOiAnMHB4J1xuICogICAgIH0sXG4gKiAgICAgdG86IHtcbiAqICAgICAgIGxlZnQgOiBlLmNsaWVudC54ICsgJ3B4JyxcbiAqICAgICAgIHRvcCA6IGUuY2xpZW50LnkgKyAncHgnXG4gKiAgICAgfVxuICogICB9KTpcbiAqIH0pO1xuICogYGBgXG4gKlxuICogT25jZSB0aGUgYW5pbWF0aW9uIGlzIGNvbXBsZXRlIG9yIGNhbmNlbGxlZCB0aGVuIHRoZSB1bmlvbiBvZiBib3RoIHRoZSBiZWZvcmUgYW5kIGFmdGVyIHN0eWxlcyBhcmUgYXBwbGllZCB0byB0aGVcbiAqIGVsZW1lbnQuIElmIGBuZ0FuaW1hdGVgIGlzIG5vdCBwcmVzZW50IHRoZW4gdGhlIHN0eWxlcyB3aWxsIGJlIGFwcGxpZWQgaW1tZWRpYXRlbHkuXG4gKlxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCduZ0FuaW1hdGUnLCBbJ25nJ10pXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBwcm92aWRlclxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBUaGUgYCRhbmltYXRlUHJvdmlkZXJgIGFsbG93cyBkZXZlbG9wZXJzIHRvIHJlZ2lzdGVyIEphdmFTY3JpcHQgYW5pbWF0aW9uIGV2ZW50IGhhbmRsZXJzIGRpcmVjdGx5IGluc2lkZSBvZiBhIG1vZHVsZS5cbiAgICogV2hlbiBhbiBhbmltYXRpb24gaXMgdHJpZ2dlcmVkLCB0aGUgJGFuaW1hdGUgc2VydmljZSB3aWxsIHF1ZXJ5IHRoZSAkYW5pbWF0ZSBzZXJ2aWNlIHRvIGZpbmQgYW55IGFuaW1hdGlvbnMgdGhhdCBtYXRjaFxuICAgKiB0aGUgcHJvdmlkZWQgbmFtZSB2YWx1ZS5cbiAgICpcbiAgICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ0FuaW1hdGUgYG5nQW5pbWF0ZWB9IG1vZHVsZSB0byBiZSBpbnN0YWxsZWQuXG4gICAqXG4gICAqIFBsZWFzZSB2aXNpdCB0aGUge0BsaW5rIG5nQW5pbWF0ZSBgbmdBbmltYXRlYH0gbW9kdWxlIG92ZXJ2aWV3IHBhZ2UgbGVhcm4gbW9yZSBhYm91dCBob3cgdG8gdXNlIGFuaW1hdGlvbnMgaW4geW91ciBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICovXG4gIC5kaXJlY3RpdmUoJ25nQW5pbWF0ZUNoaWxkcmVuJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIE5HX0FOSU1BVEVfQ0hJTERSRU4gPSAnJCRuZ0FuaW1hdGVDaGlsZHJlbic7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgdmFyIHZhbCA9IGF0dHJzLm5nQW5pbWF0ZUNoaWxkcmVuO1xuICAgICAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcodmFsKSAmJiB2YWwubGVuZ3RoID09PSAwKSB7IC8vZW1wdHkgYXR0cmlidXRlXG4gICAgICAgIGVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NISUxEUkVOLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjb3BlLiR3YXRjaCh2YWwsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ0hJTERSRU4sICEhdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuXG4gIC8vdGhpcyBwcml2YXRlIHNlcnZpY2UgaXMgb25seSB1c2VkIHdpdGhpbiBDU1MtZW5hYmxlZCBhbmltYXRpb25zXG4gIC8vSUU4ICsgSUU5IGRvIG5vdCBzdXBwb3J0IHJBRiBuYXRpdmVseSwgYnV0IHRoYXQgaXMgZmluZSBzaW5jZSB0aGV5XG4gIC8vYWxzbyBkb24ndCBzdXBwb3J0IHRyYW5zaXRpb25zIGFuZCBrZXlmcmFtZXMgd2hpY2ggbWVhbnMgdGhhdCB0aGUgY29kZVxuICAvL2JlbG93IHdpbGwgbmV2ZXIgYmUgdXNlZCBieSB0aGUgdHdvIGJyb3dzZXJzLlxuICAuZmFjdG9yeSgnJCRhbmltYXRlUmVmbG93JywgWyckJHJBRicsICckZG9jdW1lbnQnLCBmdW5jdGlvbigkJHJBRiwgJGRvY3VtZW50KSB7XG4gICAgdmFyIGJvZCA9ICRkb2N1bWVudFswXS5ib2R5O1xuICAgIHJldHVybiBmdW5jdGlvbihmbikge1xuICAgICAgLy90aGUgcmV0dXJuZWQgZnVuY3Rpb24gYWN0cyBhcyB0aGUgY2FuY2VsbGF0aW9uIGZ1bmN0aW9uXG4gICAgICByZXR1cm4gJCRyQUYoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vdGhlIGxpbmUgYmVsb3cgd2lsbCBmb3JjZSB0aGUgYnJvd3NlciB0byBwZXJmb3JtIGEgcmVwYWludFxuICAgICAgICAvL3NvIHRoYXQgYWxsIHRoZSBhbmltYXRlZCBlbGVtZW50cyB3aXRoaW4gdGhlIGFuaW1hdGlvbiBmcmFtZVxuICAgICAgICAvL3dpbGwgYmUgcHJvcGVybHkgdXBkYXRlZCBhbmQgZHJhd24gb24gc2NyZWVuLiBUaGlzIGlzXG4gICAgICAgIC8vcmVxdWlyZWQgdG8gcGVyZm9ybSBtdWx0aS1jbGFzcyBDU1MgYmFzZWQgYW5pbWF0aW9ucyB3aXRoXG4gICAgICAgIC8vRmlyZWZveC4gRE8gTk9UIFJFTU9WRSBUSElTIExJTkUuXG4gICAgICAgIHZhciBhID0gYm9kLm9mZnNldFdpZHRoICsgMTtcbiAgICAgICAgZm4oKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1dKVxuXG4gIC5jb25maWcoWyckcHJvdmlkZScsICckYW5pbWF0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHByb3ZpZGUsICRhbmltYXRlUHJvdmlkZXIpIHtcbiAgICB2YXIgbm9vcCA9IGFuZ3VsYXIubm9vcDtcbiAgICB2YXIgZm9yRWFjaCA9IGFuZ3VsYXIuZm9yRWFjaDtcbiAgICB2YXIgc2VsZWN0b3JzID0gJGFuaW1hdGVQcm92aWRlci4kJHNlbGVjdG9ycztcbiAgICB2YXIgaXNBcnJheSA9IGFuZ3VsYXIuaXNBcnJheTtcbiAgICB2YXIgaXNTdHJpbmcgPSBhbmd1bGFyLmlzU3RyaW5nO1xuICAgIHZhciBpc09iamVjdCA9IGFuZ3VsYXIuaXNPYmplY3Q7XG5cbiAgICB2YXIgRUxFTUVOVF9OT0RFID0gMTtcbiAgICB2YXIgTkdfQU5JTUFURV9TVEFURSA9ICckJG5nQW5pbWF0ZVN0YXRlJztcbiAgICB2YXIgTkdfQU5JTUFURV9DSElMRFJFTiA9ICckJG5nQW5pbWF0ZUNoaWxkcmVuJztcbiAgICB2YXIgTkdfQU5JTUFURV9DTEFTU19OQU1FID0gJ25nLWFuaW1hdGUnO1xuICAgIHZhciByb290QW5pbWF0ZVN0YXRlID0ge3J1bm5pbmc6IHRydWV9O1xuXG4gICAgZnVuY3Rpb24gZXh0cmFjdEVsZW1lbnROb2RlKGVsZW1lbnQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZWxtID0gZWxlbWVudFtpXTtcbiAgICAgICAgaWYgKGVsbS5ub2RlVHlwZSA9PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICByZXR1cm4gZWxtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJlcGFyZUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQgJiYgYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0cmlwQ29tbWVudHNGcm9tRWxlbWVudChlbGVtZW50KSB7XG4gICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNNYXRjaGluZ0VsZW1lbnQoZWxtMSwgZWxtMikge1xuICAgICAgcmV0dXJuIGV4dHJhY3RFbGVtZW50Tm9kZShlbG0xKSA9PSBleHRyYWN0RWxlbWVudE5vZGUoZWxtMik7XG4gICAgfVxuICAgIHZhciAkJGpxTGl0ZTtcbiAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRhbmltYXRlJyxcbiAgICAgICAgWyckZGVsZWdhdGUnLCAnJCRxJywgJyRpbmplY3RvcicsICckc25pZmZlcicsICckcm9vdEVsZW1lbnQnLCAnJCRhc3luY0NhbGxiYWNrJywgJyRyb290U2NvcGUnLCAnJGRvY3VtZW50JywgJyR0ZW1wbGF0ZVJlcXVlc3QnLCAnJCRqcUxpdGUnLFxuIGZ1bmN0aW9uKCRkZWxlZ2F0ZSwgICAkJHEsICAgJGluamVjdG9yLCAgICRzbmlmZmVyLCAgICRyb290RWxlbWVudCwgICAkJGFzeW5jQ2FsbGJhY2ssICAgJHJvb3RTY29wZSwgICAkZG9jdW1lbnQsICAgJHRlbXBsYXRlUmVxdWVzdCwgICAkJCRqcUxpdGUpIHtcblxuICAgICAgJCRqcUxpdGUgPSAkJCRqcUxpdGU7XG4gICAgICAkcm9vdEVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFLCByb290QW5pbWF0ZVN0YXRlKTtcblxuICAgICAgLy8gV2FpdCB1bnRpbCBhbGwgZGlyZWN0aXZlIGFuZCByb3V0ZS1yZWxhdGVkIHRlbXBsYXRlcyBhcmUgZG93bmxvYWRlZCBhbmRcbiAgICAgIC8vIGNvbXBpbGVkLiBUaGUgJHRlbXBsYXRlUmVxdWVzdC50b3RhbFBlbmRpbmdSZXF1ZXN0cyB2YXJpYWJsZSBrZWVwcyB0cmFjayBvZlxuICAgICAgLy8gYWxsIG9mIHRoZSByZW1vdGUgdGVtcGxhdGVzIGJlaW5nIGN1cnJlbnRseSBkb3dubG9hZGVkLiBJZiB0aGVyZSBhcmUgbm9cbiAgICAgIC8vIHRlbXBsYXRlcyBjdXJyZW50bHkgZG93bmxvYWRpbmcgdGhlbiB0aGUgd2F0Y2hlciB3aWxsIHN0aWxsIGZpcmUgYW55d2F5LlxuICAgICAgdmFyIGRlcmVnaXN0ZXJXYXRjaCA9ICRyb290U2NvcGUuJHdhdGNoKFxuICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuICR0ZW1wbGF0ZVJlcXVlc3QudG90YWxQZW5kaW5nUmVxdWVzdHM7IH0sXG4gICAgICAgIGZ1bmN0aW9uKHZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgaWYgKHZhbCAhPT0gMCkgcmV0dXJuO1xuICAgICAgICAgIGRlcmVnaXN0ZXJXYXRjaCgpO1xuXG4gICAgICAgICAgLy8gTm93IHRoYXQgYWxsIHRlbXBsYXRlcyBoYXZlIGJlZW4gZG93bmxvYWRlZCwgJGFuaW1hdGUgd2lsbCB3YWl0IHVudGlsXG4gICAgICAgICAgLy8gdGhlIHBvc3QgZGlnZXN0IHF1ZXVlIGlzIGVtcHR5IGJlZm9yZSBlbmFibGluZyBhbmltYXRpb25zLiBCeSBoYXZpbmcgdHdvXG4gICAgICAgICAgLy8gY2FsbHMgdG8gJHBvc3REaWdlc3QgY2FsbHMgd2UgY2FuIGVuc3VyZSB0aGF0IHRoZSBmbGFnIGlzIGVuYWJsZWQgYXQgdGhlXG4gICAgICAgICAgLy8gdmVyeSBlbmQgb2YgdGhlIHBvc3QgZGlnZXN0IHF1ZXVlLiBTaW5jZSBhbGwgb2YgdGhlIGFuaW1hdGlvbnMgaW4gJGFuaW1hdGVcbiAgICAgICAgICAvLyB1c2UgJHBvc3REaWdlc3QsIGl0J3MgaW1wb3J0YW50IHRoYXQgdGhlIGNvZGUgYmVsb3cgZXhlY3V0ZXMgYXQgdGhlIGVuZC5cbiAgICAgICAgICAvLyBUaGlzIGJhc2ljYWxseSBtZWFucyB0aGF0IHRoZSBwYWdlIGlzIGZ1bGx5IGRvd25sb2FkZWQgYW5kIGNvbXBpbGVkIGJlZm9yZVxuICAgICAgICAgIC8vIGFueSBhbmltYXRpb25zIGFyZSB0cmlnZ2VyZWQuXG4gICAgICAgICAgJHJvb3RTY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcm9vdEFuaW1hdGVTdGF0ZS5ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgdmFyIGdsb2JhbEFuaW1hdGlvbkNvdW50ZXIgPSAwO1xuICAgICAgdmFyIGNsYXNzTmFtZUZpbHRlciA9ICRhbmltYXRlUHJvdmlkZXIuY2xhc3NOYW1lRmlsdGVyKCk7XG4gICAgICB2YXIgaXNBbmltYXRhYmxlQ2xhc3NOYW1lID0gIWNsYXNzTmFtZUZpbHRlclxuICAgICAgICAgICAgICA/IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgICA6IGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc05hbWVGaWx0ZXIudGVzdChjbGFzc05hbWUpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBjbGFzc0Jhc2VkQW5pbWF0aW9uc0Jsb2NrZWQoZWxlbWVudCwgc2V0dGVyKSB7XG4gICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpIHx8IHt9O1xuICAgICAgICBpZiAoc2V0dGVyKSB7XG4gICAgICAgICAgZGF0YS5ydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICBkYXRhLnN0cnVjdHVyYWwgPSB0cnVlO1xuICAgICAgICAgIGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFLCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YS5kaXNhYmxlZCB8fCAoZGF0YS5ydW5uaW5nICYmIGRhdGEuc3RydWN0dXJhbCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJ1bkFuaW1hdGlvblBvc3REaWdlc3QoZm4pIHtcbiAgICAgICAgdmFyIGNhbmNlbEZuLCBkZWZlciA9ICQkcS5kZWZlcigpO1xuICAgICAgICBkZWZlci5wcm9taXNlLiQkY2FuY2VsRm4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjYW5jZWxGbiAmJiBjYW5jZWxGbigpO1xuICAgICAgICB9O1xuICAgICAgICAkcm9vdFNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjYW5jZWxGbiA9IGZuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICAvLyBzb21lIHBsdWdpbiBjb2RlIG1heSBzdGlsbCBiZSBwYXNzaW5nIGluIHRoZSBjYWxsYmFja1xuICAgICAgICAvLyBmdW5jdGlvbiBhcyB0aGUgbGFzdCBwYXJhbSBmb3IgdGhlICRhbmltYXRlIG1ldGhvZHMgc29cbiAgICAgICAgLy8gaXQncyBiZXN0IHRvIG9ubHkgYWxsb3cgc3RyaW5nIG9yIGFycmF5IHZhbHVlcyBmb3Igbm93XG4gICAgICAgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICAgIGlmIChvcHRpb25zLnRlbXBDbGFzc2VzICYmIGlzU3RyaW5nKG9wdGlvbnMudGVtcENsYXNzZXMpKSB7XG4gICAgICAgICAgICBvcHRpb25zLnRlbXBDbGFzc2VzID0gb3B0aW9ucy50ZW1wQ2xhc3Nlcy5zcGxpdCgvXFxzKy8pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiByZXNvbHZlRWxlbWVudENsYXNzZXMoZWxlbWVudCwgY2FjaGUsIHJ1bm5pbmdBbmltYXRpb25zKSB7XG4gICAgICAgIHJ1bm5pbmdBbmltYXRpb25zID0gcnVubmluZ0FuaW1hdGlvbnMgfHwge307XG5cbiAgICAgICAgdmFyIGxvb2t1cCA9IHt9O1xuICAgICAgICBmb3JFYWNoKHJ1bm5pbmdBbmltYXRpb25zLCBmdW5jdGlvbihkYXRhLCBzZWxlY3Rvcikge1xuICAgICAgICAgIGZvckVhY2goc2VsZWN0b3Iuc3BsaXQoJyAnKSwgZnVuY3Rpb24ocykge1xuICAgICAgICAgICAgbG9va3VwW3NdPWRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBoYXNDbGFzc2VzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZm9yRWFjaCgoZWxlbWVudC5hdHRyKCdjbGFzcycpIHx8ICcnKS5zcGxpdCgvXFxzKy8pLCBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgICAgICAgICBoYXNDbGFzc2VzW2NsYXNzTmFtZV0gPSB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgdG9BZGQgPSBbXSwgdG9SZW1vdmUgPSBbXTtcbiAgICAgICAgZm9yRWFjaCgoY2FjaGUgJiYgY2FjaGUuY2xhc3NlcykgfHwgW10sIGZ1bmN0aW9uKHN0YXR1cywgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgdmFyIGhhc0NsYXNzID0gaGFzQ2xhc3Nlc1tjbGFzc05hbWVdO1xuICAgICAgICAgIHZhciBtYXRjaGluZ0FuaW1hdGlvbiA9IGxvb2t1cFtjbGFzc05hbWVdIHx8IHt9O1xuXG4gICAgICAgICAgLy8gV2hlbiBhZGRDbGFzcyBhbmQgcmVtb3ZlQ2xhc3MgaXMgY2FsbGVkIHRoZW4gJGFuaW1hdGUgd2lsbCBjaGVjayB0b1xuICAgICAgICAgIC8vIHNlZSBpZiBhZGRDbGFzcyBhbmQgcmVtb3ZlQ2xhc3MgY2FuY2VsIGVhY2ggb3RoZXIgb3V0LiBXaGVuIHRoZXJlIGFyZVxuICAgICAgICAgIC8vIG1vcmUgY2FsbHMgdG8gcmVtb3ZlQ2xhc3MgdGhhbiBhZGRDbGFzcyB0aGVuIHRoZSBjb3VudCBmYWxscyBiZWxvdyAwXG4gICAgICAgICAgLy8gYW5kIHRoZW4gdGhlIHJlbW92ZUNsYXNzIGFuaW1hdGlvbiB3aWxsIGJlIGFsbG93ZWQuIE90aGVyd2lzZSBpZiB0aGVcbiAgICAgICAgICAvLyBjb3VudCBpcyBhYm92ZSAwIHRoZW4gdGhhdCBtZWFucyBhbiBhZGRDbGFzcyBhbmltYXRpb24gd2lsbCBjb21tZW5jZS5cbiAgICAgICAgICAvLyBPbmNlIGFuIGFuaW1hdGlvbiBpcyBhbGxvd2VkIHRoZW4gdGhlIGNvZGUgd2lsbCBhbHNvIGNoZWNrIHRvIHNlZSBpZlxuICAgICAgICAgIC8vIHRoZXJlIGV4aXN0cyBhbnkgb24tZ29pbmcgYW5pbWF0aW9uIHRoYXQgaXMgYWxyZWFkeSBhZGRpbmcgb3IgcmVtdm9pbmdcbiAgICAgICAgICAvLyB0aGUgbWF0Y2hpbmcgQ1NTIGNsYXNzLlxuICAgICAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAvL2RvZXMgaXQgaGF2ZSB0aGUgY2xhc3Mgb3Igd2lsbCBpdCBoYXZlIHRoZSBjbGFzc1xuICAgICAgICAgICAgaWYgKGhhc0NsYXNzIHx8IG1hdGNoaW5nQW5pbWF0aW9uLmV2ZW50ID09ICdhZGRDbGFzcycpIHtcbiAgICAgICAgICAgICAgdG9SZW1vdmUucHVzaChjbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAvL2lzIHRoZSBjbGFzcyBtaXNzaW5nIG9yIHdpbGwgaXQgYmUgcmVtb3ZlZD9cbiAgICAgICAgICAgIGlmICghaGFzQ2xhc3MgfHwgbWF0Y2hpbmdBbmltYXRpb24uZXZlbnQgPT0gJ3JlbW92ZUNsYXNzJykge1xuICAgICAgICAgICAgICB0b0FkZC5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gKHRvQWRkLmxlbmd0aCArIHRvUmVtb3ZlLmxlbmd0aCkgPiAwICYmIFt0b0FkZC5qb2luKCcgJyksIHRvUmVtb3ZlLmpvaW4oJyAnKV07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGxvb2t1cChuYW1lKSB7XG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgdmFyIG1hdGNoZXMgPSBbXSxcbiAgICAgICAgICAgICAgZmxhZ01hcCA9IHt9LFxuICAgICAgICAgICAgICBjbGFzc2VzID0gbmFtZS5zdWJzdHIoMSkuc3BsaXQoJy4nKTtcblxuICAgICAgICAgIC8vdGhlIGVtcHR5IHN0cmluZyB2YWx1ZSBpcyB0aGUgZGVmYXVsdCBhbmltYXRpb25cbiAgICAgICAgICAvL29wZXJhdGlvbiB3aGljaCBwZXJmb3JtcyBDU1MgdHJhbnNpdGlvbiBhbmQga2V5ZnJhbWVcbiAgICAgICAgICAvL2FuaW1hdGlvbnMgc25pZmZpbmcuIFRoaXMgaXMgYWx3YXlzIGluY2x1ZGVkIGZvciBlYWNoXG4gICAgICAgICAgLy9lbGVtZW50IGFuaW1hdGlvbiBwcm9jZWR1cmUgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHNcbiAgICAgICAgICAvL3RyYW5zaXRpb25zIGFuZC9vciBrZXlmcmFtZSBhbmltYXRpb25zLiBUaGUgZGVmYXVsdFxuICAgICAgICAgIC8vYW5pbWF0aW9uIGlzIGFkZGVkIHRvIHRoZSB0b3Agb2YgdGhlIGxpc3QgdG8gcHJldmVudFxuICAgICAgICAgIC8vYW55IHByZXZpb3VzIGFuaW1hdGlvbnMgZnJvbSBhZmZlY3RpbmcgdGhlIGVsZW1lbnQgc3R5bGluZ1xuICAgICAgICAgIC8vcHJpb3IgdG8gdGhlIGVsZW1lbnQgYmVpbmcgYW5pbWF0ZWQuXG4gICAgICAgICAgaWYgKCRzbmlmZmVyLnRyYW5zaXRpb25zIHx8ICRzbmlmZmVyLmFuaW1hdGlvbnMpIHtcbiAgICAgICAgICAgIG1hdGNoZXMucHVzaCgkaW5qZWN0b3IuZ2V0KHNlbGVjdG9yc1snJ10pKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIga2xhc3MgPSBjbGFzc2VzW2ldLFxuICAgICAgICAgICAgICAgIHNlbGVjdG9yRmFjdG9yeU5hbWUgPSBzZWxlY3RvcnNba2xhc3NdO1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yRmFjdG9yeU5hbWUgJiYgIWZsYWdNYXBba2xhc3NdKSB7XG4gICAgICAgICAgICAgIG1hdGNoZXMucHVzaCgkaW5qZWN0b3IuZ2V0KHNlbGVjdG9yRmFjdG9yeU5hbWUpKTtcbiAgICAgICAgICAgICAgZmxhZ01hcFtrbGFzc10gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBhbmltYXRpb25SdW5uZXIoZWxlbWVudCwgYW5pbWF0aW9uRXZlbnQsIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgICAgICAvL3RyYW5zY2x1ZGVkIGRpcmVjdGl2ZXMgbWF5IHNvbWV0aW1lcyBmaXJlIGFuIGFuaW1hdGlvbiB1c2luZyBvbmx5IGNvbW1lbnQgbm9kZXNcbiAgICAgICAgLy9iZXN0IHRvIGNhdGNoIHRoaXMgZWFybHkgb24gdG8gcHJldmVudCBhbnkgYW5pbWF0aW9uIG9wZXJhdGlvbnMgZnJvbSBvY2N1cnJpbmdcbiAgICAgICAgdmFyIG5vZGUgPSBlbGVtZW50WzBdO1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgIG9wdGlvbnMudG8gPSBvcHRpb25zLnRvIHx8IHt9O1xuICAgICAgICAgIG9wdGlvbnMuZnJvbSA9IG9wdGlvbnMuZnJvbSB8fCB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjbGFzc05hbWVBZGQ7XG4gICAgICAgIHZhciBjbGFzc05hbWVSZW1vdmU7XG4gICAgICAgIGlmIChpc0FycmF5KGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICBjbGFzc05hbWVBZGQgPSBjbGFzc05hbWVbMF07XG4gICAgICAgICAgY2xhc3NOYW1lUmVtb3ZlID0gY2xhc3NOYW1lWzFdO1xuICAgICAgICAgIGlmICghY2xhc3NOYW1lQWRkKSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWVSZW1vdmU7XG4gICAgICAgICAgICBhbmltYXRpb25FdmVudCA9ICdyZW1vdmVDbGFzcyc7XG4gICAgICAgICAgfSBlbHNlIGlmICghY2xhc3NOYW1lUmVtb3ZlKSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWVBZGQ7XG4gICAgICAgICAgICBhbmltYXRpb25FdmVudCA9ICdhZGRDbGFzcyc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZUFkZCArICcgJyArIGNsYXNzTmFtZVJlbW92ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNTZXRDbGFzc09wZXJhdGlvbiA9IGFuaW1hdGlvbkV2ZW50ID09ICdzZXRDbGFzcyc7XG4gICAgICAgIHZhciBpc0NsYXNzQmFzZWQgPSBpc1NldENsYXNzT3BlcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBhbmltYXRpb25FdmVudCA9PSAnYWRkQ2xhc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBhbmltYXRpb25FdmVudCA9PSAncmVtb3ZlQ2xhc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBhbmltYXRpb25FdmVudCA9PSAnYW5pbWF0ZSc7XG5cbiAgICAgICAgdmFyIGN1cnJlbnRDbGFzc05hbWUgPSBlbGVtZW50LmF0dHIoJ2NsYXNzJyk7XG4gICAgICAgIHZhciBjbGFzc2VzID0gY3VycmVudENsYXNzTmFtZSArICcgJyArIGNsYXNzTmFtZTtcbiAgICAgICAgaWYgKCFpc0FuaW1hdGFibGVDbGFzc05hbWUoY2xhc3NlcykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYmVmb3JlQ29tcGxldGUgPSBub29wLFxuICAgICAgICAgICAgYmVmb3JlQ2FuY2VsID0gW10sXG4gICAgICAgICAgICBiZWZvcmUgPSBbXSxcbiAgICAgICAgICAgIGFmdGVyQ29tcGxldGUgPSBub29wLFxuICAgICAgICAgICAgYWZ0ZXJDYW5jZWwgPSBbXSxcbiAgICAgICAgICAgIGFmdGVyID0gW107XG5cbiAgICAgICAgdmFyIGFuaW1hdGlvbkxvb2t1cCA9ICgnICcgKyBjbGFzc2VzKS5yZXBsYWNlKC9cXHMrL2csJy4nKTtcbiAgICAgICAgZm9yRWFjaChsb29rdXAoYW5pbWF0aW9uTG9va3VwKSwgZnVuY3Rpb24oYW5pbWF0aW9uRmFjdG9yeSkge1xuICAgICAgICAgIHZhciBjcmVhdGVkID0gcmVnaXN0ZXJBbmltYXRpb24oYW5pbWF0aW9uRmFjdG9yeSwgYW5pbWF0aW9uRXZlbnQpO1xuICAgICAgICAgIGlmICghY3JlYXRlZCAmJiBpc1NldENsYXNzT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICByZWdpc3RlckFuaW1hdGlvbihhbmltYXRpb25GYWN0b3J5LCAnYWRkQ2xhc3MnKTtcbiAgICAgICAgICAgIHJlZ2lzdGVyQW5pbWF0aW9uKGFuaW1hdGlvbkZhY3RvcnksICdyZW1vdmVDbGFzcycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJBbmltYXRpb24oYW5pbWF0aW9uRmFjdG9yeSwgZXZlbnQpIHtcbiAgICAgICAgICB2YXIgYWZ0ZXJGbiA9IGFuaW1hdGlvbkZhY3RvcnlbZXZlbnRdO1xuICAgICAgICAgIHZhciBiZWZvcmVGbiA9IGFuaW1hdGlvbkZhY3RvcnlbJ2JlZm9yZScgKyBldmVudC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGV2ZW50LnN1YnN0cigxKV07XG4gICAgICAgICAgaWYgKGFmdGVyRm4gfHwgYmVmb3JlRm4pIHtcbiAgICAgICAgICAgIGlmIChldmVudCA9PSAnbGVhdmUnKSB7XG4gICAgICAgICAgICAgIGJlZm9yZUZuID0gYWZ0ZXJGbjtcbiAgICAgICAgICAgICAgLy93aGVuIHNldCBhcyBudWxsIHRoZW4gYW5pbWF0aW9uIGtub3dzIHRvIHNraXAgdGhpcyBwaGFzZVxuICAgICAgICAgICAgICBhZnRlckZuID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFmdGVyLnB1c2goe1xuICAgICAgICAgICAgICBldmVudDogZXZlbnQsIGZuOiBhZnRlckZuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJlZm9yZS5wdXNoKHtcbiAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LCBmbjogYmVmb3JlRm5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcnVuKGZucywgY2FuY2VsbGF0aW9ucywgYWxsQ29tcGxldGVGbikge1xuICAgICAgICAgIHZhciBhbmltYXRpb25zID0gW107XG4gICAgICAgICAgZm9yRWFjaChmbnMsIGZ1bmN0aW9uKGFuaW1hdGlvbikge1xuICAgICAgICAgICAgYW5pbWF0aW9uLmZuICYmIGFuaW1hdGlvbnMucHVzaChhbmltYXRpb24pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICBmdW5jdGlvbiBhZnRlckFuaW1hdGlvbkNvbXBsZXRlKGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoY2FuY2VsbGF0aW9ucykge1xuICAgICAgICAgICAgICAoY2FuY2VsbGF0aW9uc1tpbmRleF0gfHwgbm9vcCkoKTtcbiAgICAgICAgICAgICAgaWYgKCsrY291bnQgPCBhbmltYXRpb25zLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAgICAgICBjYW5jZWxsYXRpb25zID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFsbENvbXBsZXRlRm4oKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL1RoZSBjb2RlIGJlbG93IGFkZHMgZGlyZWN0bHkgdG8gdGhlIGFycmF5IGluIG9yZGVyIHRvIHdvcmsgd2l0aFxuICAgICAgICAgIC8vYm90aCBzeW5jIGFuZCBhc3luYyBhbmltYXRpb25zLiBTeW5jIGFuaW1hdGlvbnMgYXJlIHdoZW4gdGhlIGRvbmUoKVxuICAgICAgICAgIC8vb3BlcmF0aW9uIGlzIGNhbGxlZCByaWdodCBhd2F5LiBETyBOT1QgUkVGQUNUT1IhXG4gICAgICAgICAgZm9yRWFjaChhbmltYXRpb25zLCBmdW5jdGlvbihhbmltYXRpb24sIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgYWZ0ZXJBbmltYXRpb25Db21wbGV0ZShpbmRleCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc3dpdGNoIChhbmltYXRpb24uZXZlbnQpIHtcbiAgICAgICAgICAgICAgY2FzZSAnc2V0Q2xhc3MnOlxuICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvbnMucHVzaChhbmltYXRpb24uZm4oZWxlbWVudCwgY2xhc3NOYW1lQWRkLCBjbGFzc05hbWVSZW1vdmUsIHByb2dyZXNzLCBvcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2FuaW1hdGUnOlxuICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvbnMucHVzaChhbmltYXRpb24uZm4oZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zLmZyb20sIG9wdGlvbnMudG8sIHByb2dyZXNzKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2FkZENsYXNzJzpcbiAgICAgICAgICAgICAgICBjYW5jZWxsYXRpb25zLnB1c2goYW5pbWF0aW9uLmZuKGVsZW1lbnQsIGNsYXNzTmFtZUFkZCB8fCBjbGFzc05hbWUsICAgICBwcm9ncmVzcywgb3B0aW9ucykpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlICdyZW1vdmVDbGFzcyc6XG4gICAgICAgICAgICAgICAgY2FuY2VsbGF0aW9ucy5wdXNoKGFuaW1hdGlvbi5mbihlbGVtZW50LCBjbGFzc05hbWVSZW1vdmUgfHwgY2xhc3NOYW1lLCAgcHJvZ3Jlc3MsIG9wdGlvbnMpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjYW5jZWxsYXRpb25zLnB1c2goYW5pbWF0aW9uLmZuKGVsZW1lbnQsIHByb2dyZXNzLCBvcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoY2FuY2VsbGF0aW9ucyAmJiBjYW5jZWxsYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgYWxsQ29tcGxldGVGbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICBldmVudDogYW5pbWF0aW9uRXZlbnQsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgaXNDbGFzc0Jhc2VkOiBpc0NsYXNzQmFzZWQsXG4gICAgICAgICAgaXNTZXRDbGFzc09wZXJhdGlvbjogaXNTZXRDbGFzc09wZXJhdGlvbixcbiAgICAgICAgICBhcHBseVN0eWxlczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgICBlbGVtZW50LmNzcyhhbmd1bGFyLmV4dGVuZChvcHRpb25zLmZyb20gfHwge30sIG9wdGlvbnMudG8gfHwge30pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGJlZm9yZTogZnVuY3Rpb24oYWxsQ29tcGxldGVGbikge1xuICAgICAgICAgICAgYmVmb3JlQ29tcGxldGUgPSBhbGxDb21wbGV0ZUZuO1xuICAgICAgICAgICAgcnVuKGJlZm9yZSwgYmVmb3JlQ2FuY2VsLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgYmVmb3JlQ29tcGxldGUgPSBub29wO1xuICAgICAgICAgICAgICBhbGxDb21wbGV0ZUZuKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFmdGVyOiBmdW5jdGlvbihhbGxDb21wbGV0ZUZuKSB7XG4gICAgICAgICAgICBhZnRlckNvbXBsZXRlID0gYWxsQ29tcGxldGVGbjtcbiAgICAgICAgICAgIHJ1bihhZnRlciwgYWZ0ZXJDYW5jZWwsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBhZnRlckNvbXBsZXRlID0gbm9vcDtcbiAgICAgICAgICAgICAgYWxsQ29tcGxldGVGbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGJlZm9yZUNhbmNlbCkge1xuICAgICAgICAgICAgICBmb3JFYWNoKGJlZm9yZUNhbmNlbCwgZnVuY3Rpb24oY2FuY2VsRm4pIHtcbiAgICAgICAgICAgICAgICAoY2FuY2VsRm4gfHwgbm9vcCkodHJ1ZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBiZWZvcmVDb21wbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhZnRlckNhbmNlbCkge1xuICAgICAgICAgICAgICBmb3JFYWNoKGFmdGVyQ2FuY2VsLCBmdW5jdGlvbihjYW5jZWxGbikge1xuICAgICAgICAgICAgICAgIChjYW5jZWxGbiB8fCBub29wKSh0cnVlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGFmdGVyQ29tcGxldGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZVxuICAgICAgICogQGtpbmQgb2JqZWN0XG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBUaGUgYCRhbmltYXRlYCBzZXJ2aWNlIHByb3ZpZGVzIGFuaW1hdGlvbiBkZXRlY3Rpb24gc3VwcG9ydCB3aGlsZSBwZXJmb3JtaW5nIERPTSBvcGVyYXRpb25zIChlbnRlciwgbGVhdmUgYW5kIG1vdmUpIGFzIHdlbGwgYXMgZHVyaW5nIGFkZENsYXNzIGFuZCByZW1vdmVDbGFzcyBvcGVyYXRpb25zLlxuICAgICAgICogV2hlbiBhbnkgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgcnVuLCB0aGUgJGFuaW1hdGUgc2VydmljZVxuICAgICAgICogd2lsbCBleGFtaW5lIGFueSBKYXZhU2NyaXB0LWRlZmluZWQgYW5pbWF0aW9ucyAod2hpY2ggYXJlIGRlZmluZWQgYnkgdXNpbmcgdGhlICRhbmltYXRlUHJvdmlkZXIgcHJvdmlkZXIgb2JqZWN0KVxuICAgICAgICogYXMgd2VsbCBhcyBhbnkgQ1NTLWRlZmluZWQgYW5pbWF0aW9ucyBhZ2FpbnN0IHRoZSBDU1MgY2xhc3NlcyBwcmVzZW50IG9uIHRoZSBlbGVtZW50IG9uY2UgdGhlIERPTSBvcGVyYXRpb24gaXMgcnVuLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBgJGFuaW1hdGVgIHNlcnZpY2UgaXMgdXNlZCBiZWhpbmQgdGhlIHNjZW5lcyB3aXRoIHByZS1leGlzdGluZyBkaXJlY3RpdmVzIGFuZCBhbmltYXRpb24gd2l0aCB0aGVzZSBkaXJlY3RpdmVzXG4gICAgICAgKiB3aWxsIHdvcmsgb3V0IG9mIHRoZSBib3ggd2l0aG91dCBhbnkgZXh0cmEgY29uZmlndXJhdGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nQW5pbWF0ZSBgbmdBbmltYXRlYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cbiAgICAgICAqXG4gICAgICAgKiBQbGVhc2UgdmlzaXQgdGhlIHtAbGluayBuZ0FuaW1hdGUgYG5nQW5pbWF0ZWB9IG1vZHVsZSBvdmVydmlldyBwYWdlIGxlYXJuIG1vcmUgYWJvdXQgaG93IHRvIHVzZSBhbmltYXRpb25zIGluIHlvdXIgYXBwbGljYXRpb24uXG4gICAgICAgKiAjIyBDYWxsYmFjayBQcm9taXNlc1xuICAgICAgICogV2l0aCBBbmd1bGFySlMgMS4zLCBlYWNoIG9mIHRoZSBhbmltYXRpb24gbWV0aG9kcywgb24gdGhlIGAkYW5pbWF0ZWAgc2VydmljZSwgcmV0dXJuIGEgcHJvbWlzZSB3aGVuIGNhbGxlZC4gVGhlXG4gICAgICAgKiBwcm9taXNlIGl0c2VsZiBpcyB0aGVuIHJlc29sdmVkIG9uY2UgdGhlIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkIGl0c2VsZiwgaGFzIGJlZW4gY2FuY2VsbGVkIG9yIGhhcyBiZWVuXG4gICAgICAgKiBza2lwcGVkIGR1ZSB0byBhbmltYXRpb25zIGJlaW5nIGRpc2FibGVkLiAoTm90ZSB0aGF0IGV2ZW4gaWYgdGhlIGFuaW1hdGlvbiBpcyBjYW5jZWxsZWQgaXQgd2lsbCBzdGlsbFxuICAgICAgICogY2FsbCB0aGUgcmVzb2x2ZSBmdW5jdGlvbiBvZiB0aGUgYW5pbWF0aW9uLilcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogJGFuaW1hdGUuZW50ZXIoZWxlbWVudCwgY29udGFpbmVyKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICogICAvLy4uLnRoaXMgaXMgY2FsbGVkIG9uY2UgdGhlIGFuaW1hdGlvbiBpcyBjb21wbGV0ZS4uLlxuICAgICAgICogfSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBBbHNvIG5vdGUgdGhhdCwgZHVlIHRvIHRoZSBuYXR1cmUgb2YgdGhlIGNhbGxiYWNrIHByb21pc2UsIGlmIGFueSBBbmd1bGFyLXNwZWNpZmljIGNvZGUgKGxpa2UgY2hhbmdpbmcgdGhlIHNjb3BlLFxuICAgICAgICogbG9jYXRpb24gb2YgdGhlIHBhZ2UsIGV0Yy4uLikgaXMgZXhlY3V0ZWQgd2l0aGluIHRoZSBjYWxsYmFjayBwcm9taXNlIHRoZW4gYmUgc3VyZSB0byB3cmFwIHRoZSBjb2RlIHVzaW5nXG4gICAgICAgKiBgJHNjb3BlLiRhcHBseSguLi4pYDtcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogJGFuaW1hdGUubGVhdmUoZWxlbWVudCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAqICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAqICAgICAkbG9jYXRpb24ucGF0aCgnL25ldy1wYWdlJyk7XG4gICAgICAgKiAgIH0pO1xuICAgICAgICogfSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBBbiBhbmltYXRpb24gY2FuIGFsc28gYmUgY2FuY2VsbGVkIGJ5IGNhbGxpbmcgdGhlIGAkYW5pbWF0ZS5jYW5jZWwocHJvbWlzZSlgIG1ldGhvZCB3aXRoIHRoZSBwcm92aWRlZFxuICAgICAgICogcHJvbWlzZSB0aGF0IHdhcyByZXR1cm5lZCB3aGVuIHRoZSBhbmltYXRpb24gd2FzIHN0YXJ0ZWQuXG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqIHZhciBwcm9taXNlID0gJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgJ3N1cGVyLWxvbmctYW5pbWF0aW9uJyk7XG4gICAgICAgKiBwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgKiAgIC8vdGhpcyB3aWxsIHN0aWxsIGJlIGNhbGxlZCBldmVuIGlmIGNhbmNlbGxlZFxuICAgICAgICogfSk7XG4gICAgICAgKlxuICAgICAgICogZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAqICAgLy90b29vIGxhenkgdG8gd2FpdCBmb3IgdGhlIGFuaW1hdGlvbiB0byBlbmRcbiAgICAgICAqICAgJGFuaW1hdGUuY2FuY2VsKHByb21pc2UpO1xuICAgICAgICogfSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiAoS2VlcCBpbiBtaW5kIHRoYXQgdGhlIHByb21pc2UgY2FuY2VsbGF0aW9uIGlzIHVuaXF1ZSB0byBgJGFuaW1hdGVgIHNpbmNlIHByb21pc2VzIGluXG4gICAgICAgKiBnZW5lcmFsIGNhbm5vdCBiZSBjYW5jZWxsZWQuKVxuICAgICAgICpcbiAgICAgICAqL1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjYW5pbWF0ZVxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogUGVyZm9ybXMgYW4gaW5saW5lIGFuaW1hdGlvbiBvbiB0aGUgZWxlbWVudCB3aGljaCBhcHBsaWVzIHRoZSBwcm92aWRlZCBgdG9gIGFuZCBgZnJvbWAgQ1NTIHN0eWxlcyB0byB0aGUgZWxlbWVudC5cbiAgICAgICAgICogSWYgYW55IGRldGVjdGVkIENTUyB0cmFuc2l0aW9uLCBrZXlmcmFtZSBvciBKYXZhU2NyaXB0IG1hdGNoZXMgdGhlIHByb3ZpZGVkIGBjbGFzc05hbWVgIHZhbHVlIHRoZW4gdGhlIGFuaW1hdGlvblxuICAgICAgICAgKiB3aWxsIHRha2Ugb24gdGhlIHByb3ZpZGVkIHN0eWxlcy4gRm9yIGV4YW1wbGUsIGlmIGEgdHJhbnNpdGlvbiBhbmltYXRpb24gaXMgc2V0IGZvciB0aGUgZ2l2ZW4gY2xhc3NOYW1lIHRoZW4gdGhlXG4gICAgICAgICAqIHByb3ZpZGVkIGBmcm9tYCBhbmQgYHRvYCBzdHlsZXMgd2lsbCBiZSBhcHBsaWVkIGFsb25nc2lkZSB0aGUgZ2l2ZW4gdHJhbnNpdGlvbi4gSWYgYSBKYXZhU2NyaXB0IGFuaW1hdGlvbiBpc1xuICAgICAgICAgKiBkZXRlY3RlZCB0aGVuIHRoZSBwcm92aWRlZCBzdHlsZXMgd2lsbCBiZSBnaXZlbiBpbiBhcyBmdW5jdGlvbiBwYXJhbXRlcnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIGBgYGpzXG4gICAgICAgICAqIG5nTW9kdWxlLmFuaW1hdGlvbignLm15LWlubGluZS1hbmltYXRpb24nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICogICByZXR1cm4ge1xuICAgICAgICAgKiAgICAgYW5pbWF0ZSA6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgZnJvbSwgdG8sIGRvbmUpIHtcbiAgICAgICAgICogICAgICAgLy9zdHlsZXNcbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKiBgYGBcbiAgICAgICAgICpcbiAgICAgICAgICogQmVsb3cgaXMgYSBicmVha2Rvd24gb2YgZWFjaCBzdGVwIHRoYXQgb2NjdXJzIGR1cmluZyB0aGUgYGFuaW1hdGVgIGFuaW1hdGlvbjpcbiAgICAgICAgICpcbiAgICAgICAgICogfCBBbmltYXRpb24gU3RlcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBXaGF0IHRoZSBlbGVtZW50IGNsYXNzIGF0dHJpYnV0ZSBsb29rcyBsaWtlICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gICAgICAgICAqIHwgMS4gYCRhbmltYXRlLmFuaW1hdGUoLi4uKWAgaXMgY2FsbGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDIuIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIHRoZSBuZXh0IGRpZ2VzdCB0byBzdGFydCB0aGUgYW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCAzLiBgJGFuaW1hdGVgIHJ1bnMgdGhlIEphdmFTY3JpcHQtZGVmaW5lZCBhbmltYXRpb25zIGRldGVjdGVkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZVwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgNC4gdGhlIGBjbGFzc05hbWVgIGNsYXNzIHZhbHVlIGlzIGFkZGVkIHRvIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgY2xhc3NOYW1lXCJgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDUuIGAkYW5pbWF0ZWAgc2NhbnMgdGhlIGVsZW1lbnQgc3R5bGVzIHRvIGdldCB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uIGR1cmF0aW9uIGFuZCBkZWxheSAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIGNsYXNzTmFtZVwiYCAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA2LiBgJGFuaW1hdGVgIGJsb2NrcyBhbGwgQ1NTIHRyYW5zaXRpb25zIG9uIHRoZSBlbGVtZW50IHRvIGVuc3VyZSB0aGUgYC5jbGFzc05hbWVgIGNsYXNzIHN0eWxpbmcgaXMgYXBwbGllZCByaWdodCBhd2F5fCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBjbGFzc05hbWVcImAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgNy4gYCRhbmltYXRlYCBhcHBsaWVzIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIG9mIGBmcm9tYCBDU1Mgc3R5bGVzIHRvIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgY2xhc3NOYW1lXCJgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDguIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIGEgc2luZ2xlIGFuaW1hdGlvbiBmcmFtZSAodGhpcyBwZXJmb3JtcyBhIHJlZmxvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIGNsYXNzTmFtZVwiYCAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA5LiBgJGFuaW1hdGVgIHJlbW92ZXMgdGhlIENTUyB0cmFuc2l0aW9uIGJsb2NrIHBsYWNlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBjbGFzc05hbWVcImAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgMTAuIHRoZSBgY2xhc3NOYW1lLWFjdGl2ZWAgY2xhc3MgaXMgYWRkZWQgKHRoaXMgdHJpZ2dlcnMgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgY2xhc3NOYW1lIGNsYXNzTmFtZS1hY3RpdmVcImAgfFxuICAgICAgICAgKiB8IDExLiBgJGFuaW1hdGVgIGFwcGxpZXMgdGhlIGNvbGxlY3Rpb24gb2YgYHRvYCBDU1Mgc3R5bGVzIHRvIHRoZSBlbGVtZW50IHdoaWNoIGFyZSB0aGVuIGhhbmRsZWQgYnkgdGhlIHRyYW5zaXRpb24gICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIGNsYXNzTmFtZSBjbGFzc05hbWUtYWN0aXZlXCJgIHxcbiAgICAgICAgICogfCAxMi4gYCRhbmltYXRlYCB3YWl0cyBmb3IgdGhlIGFuaW1hdGlvbiB0byBjb21wbGV0ZSAodmlhIGV2ZW50cyBhbmQgdGltZW91dCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBjbGFzc05hbWUgY2xhc3NOYW1lLWFjdGl2ZVwiYCB8XG4gICAgICAgICAqIHwgMTMuIFRoZSBhbmltYXRpb24gZW5kcyBhbmQgYWxsIGdlbmVyYXRlZCBDU1MgY2xhc3NlcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDE0LiBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvblwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSB0aGUgZm9jdXMgb2YgdGhlIGVudGVyIGFuaW1hdGlvblxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gZnJvbSBhIGNvbGxlY3Rpb24gb2YgQ1NTIHN0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudCBhdCB0aGUgc3RhcnQgb2YgdGhlIGFuaW1hdGlvblxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gdG8gYSBjb2xsZWN0aW9uIG9mIENTUyBzdHlsZXMgdGhhdCB0aGUgZWxlbWVudCB3aWxsIGFuaW1hdGUgdG93YXJkc1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZz19IGNsYXNzTmFtZSBhbiBvcHRpb25hbCBDU1MgY2xhc3MgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50IGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiAodGhlIGRlZmF1bHQgY2xhc3MgaXMgYG5nLWlubGluZS1hbmltYXRlYClcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3Q9fSBvcHRpb25zIGFuIG9wdGlvbmFsIGNvbGxlY3Rpb24gb2Ygb3B0aW9ucyB0aGF0IHdpbGwgYmUgcGlja2VkIHVwIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb25cbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXG4gICAgICAgICovXG4gICAgICAgIGFuaW1hdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGZyb20sIHRvLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUgfHwgJ25nLWlubGluZS1hbmltYXRlJztcbiAgICAgICAgICBvcHRpb25zID0gcGFyc2VBbmltYXRlT3B0aW9ucyhvcHRpb25zKSB8fCB7fTtcbiAgICAgICAgICBvcHRpb25zLmZyb20gPSB0byA/IGZyb20gOiBudWxsO1xuICAgICAgICAgIG9wdGlvbnMudG8gICA9IHRvID8gdG8gOiBmcm9tO1xuXG4gICAgICAgICAgcmV0dXJuIHJ1bkFuaW1hdGlvblBvc3REaWdlc3QoZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIHBlcmZvcm1BbmltYXRpb24oJ2FuaW1hdGUnLCBjbGFzc05hbWUsIHN0cmlwQ29tbWVudHNGcm9tRWxlbWVudChlbGVtZW50KSwgbnVsbCwgbnVsbCwgbm9vcCwgb3B0aW9ucywgZG9uZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjZW50ZXJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIEFwcGVuZHMgdGhlIGVsZW1lbnQgdG8gdGhlIHBhcmVudEVsZW1lbnQgZWxlbWVudCB0aGF0IHJlc2lkZXMgaW4gdGhlIGRvY3VtZW50IGFuZCB0aGVuIHJ1bnMgdGhlIGVudGVyIGFuaW1hdGlvbi4gT25jZVxuICAgICAgICAgKiB0aGUgYW5pbWF0aW9uIGlzIHN0YXJ0ZWQsIHRoZSBmb2xsb3dpbmcgQ1NTIGNsYXNzZXMgd2lsbCBiZSBwcmVzZW50IG9uIHRoZSBlbGVtZW50IGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbjpcbiAgICAgICAgICpcbiAgICAgICAgICogQmVsb3cgaXMgYSBicmVha2Rvd24gb2YgZWFjaCBzdGVwIHRoYXQgb2NjdXJzIGR1cmluZyBlbnRlciBhbmltYXRpb246XG4gICAgICAgICAqXG4gICAgICAgICAqIHwgQW5pbWF0aW9uIFN0ZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgV2hhdCB0aGUgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUgbG9va3MgbGlrZSAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gICAgICAgICAqIHwgMS4gYCRhbmltYXRlLmVudGVyKC4uLilgIGlzIGNhbGxlZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCAyLiBlbGVtZW50IGlzIGluc2VydGVkIGludG8gdGhlIGBwYXJlbnRFbGVtZW50YCBlbGVtZW50IG9yIGJlc2lkZSB0aGUgYGFmdGVyRWxlbWVudGAgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb25cImAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDMuIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIHRoZSBuZXh0IGRpZ2VzdCB0byBzdGFydCB0aGUgYW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlXCJgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgNC4gYCRhbmltYXRlYCBydW5zIHRoZSBKYXZhU2NyaXB0LWRlZmluZWQgYW5pbWF0aW9ucyBkZXRlY3RlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGVcImAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA1LiB0aGUgYC5uZy1lbnRlcmAgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1lbnRlclwiYCAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDYuIGAkYW5pbWF0ZWAgc2NhbnMgdGhlIGVsZW1lbnQgc3R5bGVzIHRvIGdldCB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uIGR1cmF0aW9uIGFuZCBkZWxheSAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWVudGVyXCJgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgNy4gYCRhbmltYXRlYCBibG9ja3MgYWxsIENTUyB0cmFuc2l0aW9ucyBvbiB0aGUgZWxlbWVudCB0byBlbnN1cmUgdGhlIGAubmctZW50ZXJgIGNsYXNzIHN0eWxpbmcgaXMgYXBwbGllZCByaWdodCBhd2F5IHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctZW50ZXJcImAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA4LiBgJGFuaW1hdGVgIHdhaXRzIGZvciBhIHNpbmdsZSBhbmltYXRpb24gZnJhbWUgKHRoaXMgcGVyZm9ybXMgYSByZWZsb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1lbnRlclwiYCAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDkuIGAkYW5pbWF0ZWAgcmVtb3ZlcyB0aGUgQ1NTIHRyYW5zaXRpb24gYmxvY2sgcGxhY2VkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWVudGVyXCJgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgMTAuIHRoZSBgLm5nLWVudGVyLWFjdGl2ZWAgY2xhc3MgaXMgYWRkZWQgKHRoaXMgdHJpZ2dlcnMgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctZW50ZXIgbmctZW50ZXItYWN0aXZlXCJgIHxcbiAgICAgICAgICogfCAxMS4gYCRhbmltYXRlYCB3YWl0cyBmb3IgdGhlIGFuaW1hdGlvbiB0byBjb21wbGV0ZSAodmlhIGV2ZW50cyBhbmQgdGltZW91dCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1lbnRlciBuZy1lbnRlci1hY3RpdmVcImAgfFxuICAgICAgICAgKiB8IDEyLiBUaGUgYW5pbWF0aW9uIGVuZHMgYW5kIGFsbCBnZW5lcmF0ZWQgQ1NTIGNsYXNzZXMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvblwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgMTMuIFRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHJlc29sdmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSB0aGUgZm9jdXMgb2YgdGhlIGVudGVyIGFuaW1hdGlvblxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudEVsZW1lbnQgdGhlIHBhcmVudCBlbGVtZW50IG9mIHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSB0aGUgZm9jdXMgb2YgdGhlIGVudGVyIGFuaW1hdGlvblxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGFmdGVyRWxlbWVudCB0aGUgc2libGluZyBlbGVtZW50ICh3aGljaCBpcyB0aGUgcHJldmlvdXMgZWxlbWVudCkgb2YgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgZW50ZXIgYW5pbWF0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMgdGhhdCB3aWxsIGJlIHBpY2tlZCB1cCBieSB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxuICAgICAgICAqL1xuICAgICAgICBlbnRlcjogZnVuY3Rpb24oZWxlbWVudCwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHBhcnNlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gcHJlcGFyZUVsZW1lbnQocGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgYWZ0ZXJFbGVtZW50ID0gcHJlcGFyZUVsZW1lbnQoYWZ0ZXJFbGVtZW50KTtcblxuICAgICAgICAgIGNsYXNzQmFzZWRBbmltYXRpb25zQmxvY2tlZChlbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICAkZGVsZWdhdGUuZW50ZXIoZWxlbWVudCwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50KTtcbiAgICAgICAgICByZXR1cm4gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gcGVyZm9ybUFuaW1hdGlvbignZW50ZXInLCAnbmctZW50ZXInLCBzdHJpcENvbW1lbnRzRnJvbUVsZW1lbnQoZWxlbWVudCksIHBhcmVudEVsZW1lbnQsIGFmdGVyRWxlbWVudCwgbm9vcCwgb3B0aW9ucywgZG9uZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjbGVhdmVcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJ1bnMgdGhlIGxlYXZlIGFuaW1hdGlvbiBvcGVyYXRpb24gYW5kLCB1cG9uIGNvbXBsZXRpb24sIHJlbW92ZXMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NLiBPbmNlXG4gICAgICAgICAqIHRoZSBhbmltYXRpb24gaXMgc3RhcnRlZCwgdGhlIGZvbGxvd2luZyBDU1MgY2xhc3NlcyB3aWxsIGJlIGFkZGVkIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbjpcbiAgICAgICAgICpcbiAgICAgICAgICogQmVsb3cgaXMgYSBicmVha2Rvd24gb2YgZWFjaCBzdGVwIHRoYXQgb2NjdXJzIGR1cmluZyBsZWF2ZSBhbmltYXRpb246XG4gICAgICAgICAqXG4gICAgICAgICAqIHwgQW5pbWF0aW9uIFN0ZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgV2hhdCB0aGUgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUgbG9va3MgbGlrZSAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gICAgICAgICAqIHwgMS4gYCRhbmltYXRlLmxlYXZlKC4uLilgIGlzIGNhbGxlZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCAyLiBgJGFuaW1hdGVgIHJ1bnMgdGhlIEphdmFTY3JpcHQtZGVmaW5lZCBhbmltYXRpb25zIGRldGVjdGVkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZVwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDMuIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIHRoZSBuZXh0IGRpZ2VzdCB0byBzdGFydCB0aGUgYW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlXCJgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgNC4gdGhlIGAubmctbGVhdmVgIGNsYXNzIGlzIGFkZGVkIHRvIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbGVhdmVcImAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA1LiBgJGFuaW1hdGVgIHNjYW5zIHRoZSBlbGVtZW50IHN0eWxlcyB0byBnZXQgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbiBkdXJhdGlvbiBhbmQgZGVsYXkgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1sZWF2ZVwiYCAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDYuIGAkYW5pbWF0ZWAgYmxvY2tzIGFsbCBDU1MgdHJhbnNpdGlvbnMgb24gdGhlIGVsZW1lbnQgdG8gZW5zdXJlIHRoZSBgLm5nLWxlYXZlYCBjbGFzcyBzdHlsaW5nIGlzIGFwcGxpZWQgcmlnaHQgYXdheSB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWxlYXZlXCJgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgNy4gYCRhbmltYXRlYCB3YWl0cyBmb3IgYSBzaW5nbGUgYW5pbWF0aW9uIGZyYW1lICh0aGlzIHBlcmZvcm1zIGEgcmVmbG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbGVhdmVcImAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA4LiBgJGFuaW1hdGVgIHJlbW92ZXMgdGhlIENTUyB0cmFuc2l0aW9uIGJsb2NrIHBsYWNlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1sZWF2ZVwiYCAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDkuIHRoZSBgLm5nLWxlYXZlLWFjdGl2ZWAgY2xhc3MgaXMgYWRkZWQgKHRoaXMgdHJpZ2dlcnMgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLWxlYXZlIG5nLWxlYXZlLWFjdGl2ZVwiYCB8XG4gICAgICAgICAqIHwgMTAuIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIHRoZSBhbmltYXRpb24gdG8gY29tcGxldGUgKHZpYSBldmVudHMgYW5kIHRpbWVvdXQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbGVhdmUgbmctbGVhdmUtYWN0aXZlXCJgIHxcbiAgICAgICAgICogfCAxMS4gVGhlIGFuaW1hdGlvbiBlbmRzIGFuZCBhbGwgZ2VuZXJhdGVkIENTUyBjbGFzc2VzIGFyZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb25cImAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDEyLiBUaGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDEzLiBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgbGVhdmUgYW5pbWF0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIHN0eWxlcyB0aGF0IHdpbGwgYmUgcGlja2VkIHVwIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb25cbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXG4gICAgICAgICovXG4gICAgICAgIGxlYXZlOiBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHBhcnNlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KTtcblxuICAgICAgICAgIGNhbmNlbENoaWxkQW5pbWF0aW9ucyhlbGVtZW50KTtcbiAgICAgICAgICBjbGFzc0Jhc2VkQW5pbWF0aW9uc0Jsb2NrZWQoZWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuIHJ1bkFuaW1hdGlvblBvc3REaWdlc3QoZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIHBlcmZvcm1BbmltYXRpb24oJ2xlYXZlJywgJ25nLWxlYXZlJywgc3RyaXBDb21tZW50c0Zyb21FbGVtZW50KGVsZW1lbnQpLCBudWxsLCBudWxsLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJGRlbGVnYXRlLmxlYXZlKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSwgb3B0aW9ucywgZG9uZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjbW92ZVxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogRmlyZXMgdGhlIG1vdmUgRE9NIG9wZXJhdGlvbi4gSnVzdCBiZWZvcmUgdGhlIGFuaW1hdGlvbiBzdGFydHMsIHRoZSBhbmltYXRlIHNlcnZpY2Ugd2lsbCBlaXRoZXIgYXBwZW5kIGl0IGludG8gdGhlIHBhcmVudEVsZW1lbnQgY29udGFpbmVyIG9yXG4gICAgICAgICAqIGFkZCB0aGUgZWxlbWVudCBkaXJlY3RseSBhZnRlciB0aGUgYWZ0ZXJFbGVtZW50IGVsZW1lbnQgaWYgcHJlc2VudC4gVGhlbiB0aGUgbW92ZSBhbmltYXRpb24gd2lsbCBiZSBydW4uIE9uY2VcbiAgICAgICAgICogdGhlIGFuaW1hdGlvbiBpcyBzdGFydGVkLCB0aGUgZm9sbG93aW5nIENTUyBjbGFzc2VzIHdpbGwgYmUgYWRkZWQgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uOlxuICAgICAgICAgKlxuICAgICAgICAgKiBCZWxvdyBpcyBhIGJyZWFrZG93biBvZiBlYWNoIHN0ZXAgdGhhdCBvY2N1cnMgZHVyaW5nIG1vdmUgYW5pbWF0aW9uOlxuICAgICAgICAgKlxuICAgICAgICAgKiB8IEFuaW1hdGlvbiBTdGVwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgV2hhdCB0aGUgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUgbG9va3MgbGlrZSAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICAgICAgICAgKiB8IDEuIGAkYW5pbWF0ZS5tb3ZlKC4uLilgIGlzIGNhbGxlZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgMi4gZWxlbWVudCBpcyBtb3ZlZCBpbnRvIHRoZSBwYXJlbnRFbGVtZW50IGVsZW1lbnQgb3IgYmVzaWRlIHRoZSBhZnRlckVsZW1lbnQgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb25cImAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCAzLiBgJGFuaW1hdGVgIHdhaXRzIGZvciB0aGUgbmV4dCBkaWdlc3QgdG8gc3RhcnQgdGhlIGFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlXCJgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDQuIGAkYW5pbWF0ZWAgcnVucyB0aGUgSmF2YVNjcmlwdC1kZWZpbmVkIGFuaW1hdGlvbnMgZGV0ZWN0ZWQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGVcImAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgNS4gdGhlIGAubmctbW92ZWAgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1tb3ZlXCJgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA2LiBgJGFuaW1hdGVgIHNjYW5zIHRoZSBlbGVtZW50IHN0eWxlcyB0byBnZXQgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbiBkdXJhdGlvbiBhbmQgZGVsYXkgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLW1vdmVcImAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDcuIGAkYW5pbWF0ZWAgYmxvY2tzIGFsbCBDU1MgdHJhbnNpdGlvbnMgb24gdGhlIGVsZW1lbnQgdG8gZW5zdXJlIHRoZSBgLm5nLW1vdmVgIGNsYXNzIHN0eWxpbmcgaXMgYXBwbGllZCByaWdodCBhd2F5IHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbW92ZVwiYCAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgOC4gYCRhbmltYXRlYCB3YWl0cyBmb3IgYSBzaW5nbGUgYW5pbWF0aW9uIGZyYW1lICh0aGlzIHBlcmZvcm1zIGEgcmVmbG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1tb3ZlXCJgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA5LiBgJGFuaW1hdGVgIHJlbW92ZXMgdGhlIENTUyB0cmFuc2l0aW9uIGJsb2NrIHBsYWNlZCBvbiB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG5nLW1vdmVcImAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDEwLiB0aGUgYC5uZy1tb3ZlLWFjdGl2ZWAgY2xhc3MgaXMgYWRkZWQgKHRoaXMgdHJpZ2dlcnMgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgbmctbW92ZSBuZy1tb3ZlLWFjdGl2ZVwiYCB8XG4gICAgICAgICAqIHwgMTEuIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIHRoZSBhbmltYXRpb24gdG8gY29tcGxldGUgKHZpYSBldmVudHMgYW5kIHRpbWVvdXQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBuZy1tb3ZlIG5nLW1vdmUtYWN0aXZlXCJgIHxcbiAgICAgICAgICogfCAxMi4gVGhlIGFuaW1hdGlvbiBlbmRzIGFuZCBhbGwgZ2VuZXJhdGVkIENTUyBjbGFzc2VzIGFyZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvblwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDEzLiBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUgdGhlIGZvY3VzIG9mIHRoZSBtb3ZlIGFuaW1hdGlvblxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudEVsZW1lbnQgdGhlIHBhcmVudEVsZW1lbnQgZWxlbWVudCBvZiB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUgdGhlIGZvY3VzIG9mIHRoZSBtb3ZlIGFuaW1hdGlvblxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGFmdGVyRWxlbWVudCB0aGUgc2libGluZyBlbGVtZW50ICh3aGljaCBpcyB0aGUgcHJldmlvdXMgZWxlbWVudCkgb2YgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHRoZSBmb2N1cyBvZiB0aGUgbW92ZSBhbmltYXRpb25cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3Q9fSBvcHRpb25zIGFuIG9wdGlvbmFsIGNvbGxlY3Rpb24gb2Ygc3R5bGVzIHRoYXQgd2lsbCBiZSBwaWNrZWQgdXAgYnkgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvblxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAgKi9cbiAgICAgICAgbW92ZTogZnVuY3Rpb24oZWxlbWVudCwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHBhcnNlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gcHJlcGFyZUVsZW1lbnQocGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgYWZ0ZXJFbGVtZW50ID0gcHJlcGFyZUVsZW1lbnQoYWZ0ZXJFbGVtZW50KTtcblxuICAgICAgICAgIGNhbmNlbENoaWxkQW5pbWF0aW9ucyhlbGVtZW50KTtcbiAgICAgICAgICBjbGFzc0Jhc2VkQW5pbWF0aW9uc0Jsb2NrZWQoZWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgJGRlbGVnYXRlLm1vdmUoZWxlbWVudCwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50KTtcbiAgICAgICAgICByZXR1cm4gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gcGVyZm9ybUFuaW1hdGlvbignbW92ZScsICduZy1tb3ZlJywgc3RyaXBDb21tZW50c0Zyb21FbGVtZW50KGVsZW1lbnQpLCBwYXJlbnRFbGVtZW50LCBhZnRlckVsZW1lbnQsIG5vb3AsIG9wdGlvbnMsIGRvbmUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRhbmltYXRlI2FkZENsYXNzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBUcmlnZ2VycyBhIGN1c3RvbSBhbmltYXRpb24gZXZlbnQgYmFzZWQgb2ZmIHRoZSBjbGFzc05hbWUgdmFyaWFibGUgYW5kIHRoZW4gYXR0YWNoZXMgdGhlIGNsYXNzTmFtZSB2YWx1ZSB0byB0aGUgZWxlbWVudCBhcyBhIENTUyBjbGFzcy5cbiAgICAgICAgICogVW5saWtlIHRoZSBvdGhlciBhbmltYXRpb24gbWV0aG9kcywgdGhlIGFuaW1hdGUgc2VydmljZSB3aWxsIHN1ZmZpeCB0aGUgY2xhc3NOYW1lIHZhbHVlIHdpdGgge0B0eXBlIC1hZGR9IGluIG9yZGVyIHRvIHByb3ZpZGVcbiAgICAgICAgICogdGhlIGFuaW1hdGUgc2VydmljZSB0aGUgc2V0dXAgYW5kIGFjdGl2ZSBDU1MgY2xhc3NlcyBpbiBvcmRlciB0byB0cmlnZ2VyIHRoZSBhbmltYXRpb24gKHRoaXMgd2lsbCBiZSBza2lwcGVkIGlmIG5vIENTUyB0cmFuc2l0aW9uc1xuICAgICAgICAgKiBvciBrZXlmcmFtZXMgYXJlIGRlZmluZWQgb24gdGhlIC1hZGQtYWN0aXZlIG9yIGJhc2UgQ1NTIGNsYXNzKS5cbiAgICAgICAgICpcbiAgICAgICAgICogQmVsb3cgaXMgYSBicmVha2Rvd24gb2YgZWFjaCBzdGVwIHRoYXQgb2NjdXJzIGR1cmluZyBhZGRDbGFzcyBhbmltYXRpb246XG4gICAgICAgICAqXG4gICAgICAgICAqIHwgQW5pbWF0aW9uIFN0ZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgV2hhdCB0aGUgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUgbG9va3MgbGlrZSAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICAgICAgICAgKiB8IDEuIGAkYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LCAnc3VwZXInKWAgaXMgY2FsbGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvblwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCAyLiBgJGFuaW1hdGVgIHJ1bnMgdGhlIEphdmFTY3JpcHQtZGVmaW5lZCBhbmltYXRpb25zIGRldGVjdGVkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZVwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgMy4gdGhlIGAuc3VwZXItYWRkYCBjbGFzcyBpcyBhZGRlZCB0byB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXItYWRkXCJgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDQuIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIGEgc2luZ2xlIGFuaW1hdGlvbiBmcmFtZSAodGhpcyBwZXJmb3JtcyBhIHJlZmxvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIHN1cGVyLWFkZFwiYCAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA1LiB0aGUgYC5zdXBlcmAgYW5kIGAuc3VwZXItYWRkLWFjdGl2ZWAgY2xhc3NlcyBhcmUgYWRkZWQgKHRoaXMgdHJpZ2dlcnMgdGhlIENTUyB0cmFuc2l0aW9uL2FuaW1hdGlvbikgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBzdXBlciBzdXBlci1hZGQgc3VwZXItYWRkLWFjdGl2ZVwiYCB8XG4gICAgICAgICAqIHwgNi4gYCRhbmltYXRlYCBzY2FucyB0aGUgZWxlbWVudCBzdHlsZXMgdG8gZ2V0IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24gZHVyYXRpb24gYW5kIGRlbGF5ICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXIgc3VwZXItYWRkIHN1cGVyLWFkZC1hY3RpdmVcImAgfFxuICAgICAgICAgKiB8IDcuIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIHRoZSBhbmltYXRpb24gdG8gY29tcGxldGUgKHZpYSBldmVudHMgYW5kIHRpbWVvdXQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIHN1cGVyIHN1cGVyLWFkZCBzdXBlci1hZGQtYWN0aXZlXCJgIHxcbiAgICAgICAgICogfCA4LiBUaGUgYW5pbWF0aW9uIGVuZHMgYW5kIGFsbCBnZW5lcmF0ZWQgQ1NTIGNsYXNzZXMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gc3VwZXJcImAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgOS4gVGhlIHN1cGVyIGNsYXNzIGlzIGtlcHQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDEwLiBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBzdXBlclwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSBhbmltYXRlZFxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIHRoZSBDU1MgY2xhc3MgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50IGFuZCB0aGVuIGFuaW1hdGVkXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIHN0eWxlcyB0aGF0IHdpbGwgYmUgcGlja2VkIHVwIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb25cbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXG4gICAgICAgICovXG4gICAgICAgIGFkZENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUsIFtdLCBvcHRpb25zKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNyZW1vdmVDbGFzc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogVHJpZ2dlcnMgYSBjdXN0b20gYW5pbWF0aW9uIGV2ZW50IGJhc2VkIG9mZiB0aGUgY2xhc3NOYW1lIHZhcmlhYmxlIGFuZCB0aGVuIHJlbW92ZXMgdGhlIENTUyBjbGFzcyBwcm92aWRlZCBieSB0aGUgY2xhc3NOYW1lIHZhbHVlXG4gICAgICAgICAqIGZyb20gdGhlIGVsZW1lbnQuIFVubGlrZSB0aGUgb3RoZXIgYW5pbWF0aW9uIG1ldGhvZHMsIHRoZSBhbmltYXRlIHNlcnZpY2Ugd2lsbCBzdWZmaXggdGhlIGNsYXNzTmFtZSB2YWx1ZSB3aXRoIHtAdHlwZSAtcmVtb3ZlfSBpblxuICAgICAgICAgKiBvcmRlciB0byBwcm92aWRlIHRoZSBhbmltYXRlIHNlcnZpY2UgdGhlIHNldHVwIGFuZCBhY3RpdmUgQ1NTIGNsYXNzZXMgaW4gb3JkZXIgdG8gdHJpZ2dlciB0aGUgYW5pbWF0aW9uICh0aGlzIHdpbGwgYmUgc2tpcHBlZCBpZlxuICAgICAgICAgKiBubyBDU1MgdHJhbnNpdGlvbnMgb3Iga2V5ZnJhbWVzIGFyZSBkZWZpbmVkIG9uIHRoZSAtcmVtb3ZlIG9yIGJhc2UgQ1NTIGNsYXNzZXMpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBCZWxvdyBpcyBhIGJyZWFrZG93biBvZiBlYWNoIHN0ZXAgdGhhdCBvY2N1cnMgZHVyaW5nIHJlbW92ZUNsYXNzIGFuaW1hdGlvbjpcbiAgICAgICAgICpcbiAgICAgICAgICogfCBBbmltYXRpb24gU3RlcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFdoYXQgdGhlIGVsZW1lbnQgY2xhc3MgYXR0cmlidXRlIGxvb2tzIGxpa2UgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICAgICAgICAgKiB8IDEuIGAkYW5pbWF0ZS5yZW1vdmVDbGFzcyhlbGVtZW50LCAnc3VwZXInKWAgaXMgY2FsbGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDIuIGAkYW5pbWF0ZWAgcnVucyB0aGUgSmF2YVNjcmlwdC1kZWZpbmVkIGFuaW1hdGlvbnMgZGV0ZWN0ZWQgb24gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyIG5nLWFuaW1hdGVcImAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDMuIHRoZSBgLnN1cGVyLXJlbW92ZWAgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyIG5nLWFuaW1hdGUgc3VwZXItcmVtb3ZlXCJgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDQuIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIGEgc2luZ2xlIGFuaW1hdGlvbiBmcmFtZSAodGhpcyBwZXJmb3JtcyBhIHJlZmxvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIHN1cGVyIG5nLWFuaW1hdGUgc3VwZXItcmVtb3ZlXCJgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDUuIHRoZSBgLnN1cGVyLXJlbW92ZS1hY3RpdmVgIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCBgLnN1cGVyYCBpcyByZW1vdmVkICh0aGlzIHRyaWdnZXJzIHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb24pIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXItcmVtb3ZlIHN1cGVyLXJlbW92ZS1hY3RpdmVcImAgfFxuICAgICAgICAgKiB8IDYuIGAkYW5pbWF0ZWAgc2NhbnMgdGhlIGVsZW1lbnQgc3R5bGVzIHRvIGdldCB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uIGR1cmF0aW9uIGFuZCBkZWxheSAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXItcmVtb3ZlIHN1cGVyLXJlbW92ZS1hY3RpdmVcImAgfFxuICAgICAgICAgKiB8IDcuIGAkYW5pbWF0ZWAgd2FpdHMgZm9yIHRoZSBhbmltYXRpb24gdG8gY29tcGxldGUgKHZpYSBldmVudHMgYW5kIHRpbWVvdXQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgc3VwZXItcmVtb3ZlIHN1cGVyLXJlbW92ZS1hY3RpdmVcImAgfFxuICAgICAgICAgKiB8IDguIFRoZSBhbmltYXRpb24gZW5kcyBhbmQgYWxsIGdlbmVyYXRlZCBDU1MgY2xhc3NlcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDkuIFRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHJlc29sdmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGJlIGFuaW1hdGVkXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgdGhlIENTUyBjbGFzcyB0aGF0IHdpbGwgYmUgYW5pbWF0ZWQgYW5kIHRoZW4gcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIHN0eWxlcyB0aGF0IHdpbGwgYmUgcGlja2VkIHVwIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb25cbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXG4gICAgICAgICovXG4gICAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDbGFzcyhlbGVtZW50LCBbXSwgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNzZXRDbGFzc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gQWRkcyBhbmQvb3IgcmVtb3ZlcyB0aGUgZ2l2ZW4gQ1NTIGNsYXNzZXMgdG8gYW5kIGZyb20gdGhlIGVsZW1lbnQuXG4gICAgICAgICAqIE9uY2UgY29tcGxldGUsIHRoZSBgZG9uZSgpYCBjYWxsYmFjayB3aWxsIGJlIGZpcmVkIChpZiBwcm92aWRlZCkuXG4gICAgICAgICAqXG4gICAgICAgICAqIHwgQW5pbWF0aW9uIFN0ZXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBXaGF0IHRoZSBlbGVtZW50IGNsYXNzIGF0dHJpYnV0ZSBsb29rcyBsaWtlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gICAgICAgICAqIHwgMS4gYCRhbmltYXRlLnNldENsYXNzKGVsZW1lbnQsICdvbicsICdvZmYnKWAgaXMgY2FsbGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gb2ZmXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCAyLiBgJGFuaW1hdGVgIHJ1bnMgdGhlIEphdmFTY3JpcHQtZGVmaW5lZCBhbmltYXRpb25zIGRldGVjdGVkIG9uIHRoZSBlbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG9mZlwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDMuIHRoZSBgLm9uLWFkZGAgYW5kIGAub2ZmLXJlbW92ZWAgY2xhc3NlcyBhcmUgYWRkZWQgdG8gdGhlIGVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgb24tYWRkIG9mZi1yZW1vdmUgb2ZmXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqIHwgNC4gYCRhbmltYXRlYCB3YWl0cyBmb3IgYSBzaW5nbGUgYW5pbWF0aW9uIGZyYW1lICh0aGlzIHBlcmZvcm1zIGEgcmVmbG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBvbi1hZGQgb2ZmLXJlbW92ZSBvZmZcImAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICogfCA1LiB0aGUgYC5vbmAsIGAub24tYWRkLWFjdGl2ZWAgYW5kIGAub2ZmLXJlbW92ZS1hY3RpdmVgIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCBgLm9mZmAgaXMgcmVtb3ZlZCAodGhpcyB0cmlnZ2VycyB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uKSB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBuZy1hbmltYXRlIG9uIG9uLWFkZCBvbi1hZGQtYWN0aXZlIG9mZi1yZW1vdmUgb2ZmLXJlbW92ZS1hY3RpdmVcImAgfFxuICAgICAgICAgKiB8IDYuIGAkYW5pbWF0ZWAgc2NhbnMgdGhlIGVsZW1lbnQgc3R5bGVzIHRvIGdldCB0aGUgQ1NTIHRyYW5zaXRpb24vYW5pbWF0aW9uIGR1cmF0aW9uIGFuZCBkZWxheSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG5nLWFuaW1hdGUgb24gb24tYWRkIG9uLWFkZC1hY3RpdmUgb2ZmLXJlbW92ZSBvZmYtcmVtb3ZlLWFjdGl2ZVwiYCB8XG4gICAgICAgICAqIHwgNy4gYCRhbmltYXRlYCB3YWl0cyBmb3IgdGhlIGFuaW1hdGlvbiB0byBjb21wbGV0ZSAodmlhIGV2ZW50cyBhbmQgdGltZW91dCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgY2xhc3M9XCJteS1hbmltYXRpb24gbmctYW5pbWF0ZSBvbiBvbi1hZGQgb24tYWRkLWFjdGl2ZSBvZmYtcmVtb3ZlIG9mZi1yZW1vdmUtYWN0aXZlXCJgIHxcbiAgICAgICAgICogfCA4LiBUaGUgYW5pbWF0aW9uIGVuZHMgYW5kIGFsbCBnZW5lcmF0ZWQgQ1NTIGNsYXNzZXMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGBjbGFzcz1cIm15LWFuaW1hdGlvbiBvblwiYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgKiB8IDkuIFRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHJlc29sdmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYGNsYXNzPVwibXktYW5pbWF0aW9uIG9uXCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGhhdmUgaXRzIENTUyBjbGFzc2VzIGNoYW5nZWRcbiAgICAgICAgICogICByZW1vdmVkIGZyb20gaXRcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGFkZCB0aGUgQ1NTIGNsYXNzZXMgd2hpY2ggd2lsbCBiZSBhZGRlZCB0byB0aGUgZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVtb3ZlIHRoZSBDU1MgY2xhc3Mgd2hpY2ggd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcbiAgICAgICAgICogICBDU1MgY2xhc3NlcyBoYXZlIGJlZW4gc2V0IG9uIHRoZSBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIHN0eWxlcyB0aGF0IHdpbGwgYmUgcGlja2VkIHVwIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbi9hbmltYXRpb25cbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXG4gICAgICAgICAqL1xuICAgICAgICBzZXRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgYWRkLCByZW1vdmUsIG9wdGlvbnMpIHtcbiAgICAgICAgICBvcHRpb25zID0gcGFyc2VBbmltYXRlT3B0aW9ucyhvcHRpb25zKTtcblxuICAgICAgICAgIHZhciBTVE9SQUdFX0tFWSA9ICckJGFuaW1hdGVDbGFzc2VzJztcbiAgICAgICAgICBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICAgIGVsZW1lbnQgPSBzdHJpcENvbW1lbnRzRnJvbUVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICAgICAgICBpZiAoY2xhc3NCYXNlZEFuaW1hdGlvbnNCbG9ja2VkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gJGRlbGVnYXRlLiQkc2V0Q2xhc3NJbW1lZGlhdGVseShlbGVtZW50LCBhZGQsIHJlbW92ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gd2UncmUgdXNpbmcgYSBjb21iaW5lZCBhcnJheSBmb3IgYm90aCB0aGUgYWRkIGFuZCByZW1vdmVcbiAgICAgICAgICAvLyBvcGVyYXRpb25zIHNpbmNlIHRoZSBPUkRFUiBPRiBhZGRDbGFzcyBhbmQgcmVtb3ZlQ2xhc3MgbWF0dGVyc1xuICAgICAgICAgIHZhciBjbGFzc2VzLCBjYWNoZSA9IGVsZW1lbnQuZGF0YShTVE9SQUdFX0tFWSk7XG4gICAgICAgICAgdmFyIGhhc0NhY2hlID0gISFjYWNoZTtcbiAgICAgICAgICBpZiAoIWNhY2hlKSB7XG4gICAgICAgICAgICBjYWNoZSA9IHt9O1xuICAgICAgICAgICAgY2FjaGUuY2xhc3NlcyA9IHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjbGFzc2VzID0gY2FjaGUuY2xhc3NlcztcblxuICAgICAgICAgIGFkZCA9IGlzQXJyYXkoYWRkKSA/IGFkZCA6IGFkZC5zcGxpdCgnICcpO1xuICAgICAgICAgIGZvckVhY2goYWRkLCBmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICBpZiAoYyAmJiBjLmxlbmd0aCkge1xuICAgICAgICAgICAgICBjbGFzc2VzW2NdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJlbW92ZSA9IGlzQXJyYXkocmVtb3ZlKSA/IHJlbW92ZSA6IHJlbW92ZS5zcGxpdCgnICcpO1xuICAgICAgICAgIGZvckVhY2gocmVtb3ZlLCBmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICBpZiAoYyAmJiBjLmxlbmd0aCkge1xuICAgICAgICAgICAgICBjbGFzc2VzW2NdID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoaGFzQ2FjaGUpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zICYmIGNhY2hlLm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgY2FjaGUub3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKGNhY2hlLm9wdGlvbnMgfHwge30sIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3RoZSBkaWdlc3QgY3ljbGUgd2lsbCBjb21iaW5lIGFsbCB0aGUgYW5pbWF0aW9ucyBpbnRvIG9uZSBmdW5jdGlvblxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnByb21pc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuZGF0YShTVE9SQUdFX0tFWSwgY2FjaGUgPSB7XG4gICAgICAgICAgICAgIGNsYXNzZXM6IGNsYXNzZXMsXG4gICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBjYWNoZS5wcm9taXNlID0gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IGVsZW1lbnQucGFyZW50KCk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudE5vZGUgPSBleHRyYWN0RWxlbWVudE5vZGUoZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IGVsZW1lbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAvLyBUT0RPKG1hdHNrbyk6IG1vdmUgdGhpcyBjb2RlIGludG8gdGhlIGFuaW1hdGlvbnNEaXNhYmxlZCgpIGZ1bmN0aW9uIG9uY2UgIzgwOTIgaXMgZml4ZWRcbiAgICAgICAgICAgIGlmICghcGFyZW50Tm9kZSB8fCBwYXJlbnROb2RlWyckJE5HX1JFTU9WRUQnXSB8fCBlbGVtZW50Tm9kZVsnJCROR19SRU1PVkVEJ10pIHtcbiAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjYWNoZSA9IGVsZW1lbnQuZGF0YShTVE9SQUdFX0tFWSk7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZURhdGEoU1RPUkFHRV9LRVkpO1xuXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSkgfHwge307XG4gICAgICAgICAgICB2YXIgY2xhc3NlcyA9IHJlc29sdmVFbGVtZW50Q2xhc3NlcyhlbGVtZW50LCBjYWNoZSwgc3RhdGUuYWN0aXZlKTtcbiAgICAgICAgICAgIHJldHVybiAhY2xhc3Nlc1xuICAgICAgICAgICAgICA/IGRvbmUoKVxuICAgICAgICAgICAgICA6IHBlcmZvcm1BbmltYXRpb24oJ3NldENsYXNzJywgY2xhc3NlcywgZWxlbWVudCwgcGFyZW50RWxlbWVudCwgbnVsbCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoY2xhc3Nlc1swXSkgJGRlbGVnYXRlLiQkYWRkQ2xhc3NJbW1lZGlhdGVseShlbGVtZW50LCBjbGFzc2VzWzBdKTtcbiAgICAgICAgICAgICAgICAgIGlmIChjbGFzc2VzWzFdKSAkZGVsZWdhdGUuJCRyZW1vdmVDbGFzc0ltbWVkaWF0ZWx5KGVsZW1lbnQsIGNsYXNzZXNbMV0pO1xuICAgICAgICAgICAgICAgIH0sIGNhY2hlLm9wdGlvbnMsIGRvbmUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRhbmltYXRlI2NhbmNlbFxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge1Byb21pc2V9IGFuaW1hdGlvblByb21pc2UgVGhlIGFuaW1hdGlvbiBwcm9taXNlIHRoYXQgaXMgcmV0dXJuZWQgd2hlbiBhbiBhbmltYXRpb24gaXMgc3RhcnRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIENhbmNlbHMgdGhlIHByb3ZpZGVkIGFuaW1hdGlvbi5cbiAgICAgICAgKi9cbiAgICAgICAgY2FuY2VsOiBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICAgICAgcHJvbWlzZS4kJGNhbmNlbEZuKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjZW5hYmxlZFxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiBwcm92aWRlZCB0aGVuIHNldCB0aGUgYW5pbWF0aW9uIG9uIG9yIG9mZi5cbiAgICAgICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gZWxlbWVudCBJZiBwcm92aWRlZCB0aGVuIHRoZSBlbGVtZW50IHdpbGwgYmUgdXNlZCB0byByZXByZXNlbnQgdGhlIGVuYWJsZS9kaXNhYmxlIG9wZXJhdGlvblxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDdXJyZW50IGFuaW1hdGlvbiBzdGF0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIEdsb2JhbGx5IGVuYWJsZXMvZGlzYWJsZXMgYW5pbWF0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgKi9cbiAgICAgICAgZW5hYmxlZDogZnVuY3Rpb24odmFsdWUsIGVsZW1lbnQpIHtcbiAgICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY2xlYW51cChlbGVtZW50KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKSB8fCB7fTtcbiAgICAgICAgICAgICAgICBkYXRhLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSwgZGF0YSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgIHJvb3RBbmltYXRlU3RhdGUuZGlzYWJsZWQgPSAhdmFsdWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgdmFsdWUgPSAhcm9vdEFuaW1hdGVTdGF0ZS5kaXNhYmxlZDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gISF2YWx1ZTtcbiAgICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8qXG4gICAgICAgIGFsbCBhbmltYXRpb25zIGNhbGwgdGhpcyBzaGFyZWQgYW5pbWF0aW9uIHRyaWdnZXJpbmcgZnVuY3Rpb24gaW50ZXJuYWxseS5cbiAgICAgICAgVGhlIGFuaW1hdGlvbkV2ZW50IHZhcmlhYmxlIHJlZmVycyB0byB0aGUgSmF2YVNjcmlwdCBhbmltYXRpb24gZXZlbnQgdGhhdCB3aWxsIGJlIHRyaWdnZXJlZFxuICAgICAgICBhbmQgdGhlIGNsYXNzTmFtZSB2YWx1ZSBpcyB0aGUgbmFtZSBvZiB0aGUgYW5pbWF0aW9uIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHdpdGhpbiB0aGVcbiAgICAgICAgQ1NTIGNvZGUuIEVsZW1lbnQsIGBwYXJlbnRFbGVtZW50YCBhbmQgYGFmdGVyRWxlbWVudGAgYXJlIHByb3ZpZGVkIERPTSBlbGVtZW50cyBmb3IgdGhlIGFuaW1hdGlvblxuICAgICAgICBhbmQgdGhlIG9uQ29tcGxldGUgY2FsbGJhY2sgd2lsbCBiZSBmaXJlZCBvbmNlIHRoZSBhbmltYXRpb24gaXMgZnVsbHkgY29tcGxldGUuXG4gICAgICAqL1xuICAgICAgZnVuY3Rpb24gcGVyZm9ybUFuaW1hdGlvbihhbmltYXRpb25FdmVudCwgY2xhc3NOYW1lLCBlbGVtZW50LCBwYXJlbnRFbGVtZW50LCBhZnRlckVsZW1lbnQsIGRvbU9wZXJhdGlvbiwgb3B0aW9ucywgZG9uZUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBub29wQ2FuY2VsID0gbm9vcDtcbiAgICAgICAgdmFyIHJ1bm5lciA9IGFuaW1hdGlvblJ1bm5lcihlbGVtZW50LCBhbmltYXRpb25FdmVudCwgY2xhc3NOYW1lLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFydW5uZXIpIHtcbiAgICAgICAgICBmaXJlRE9NT3BlcmF0aW9uKCk7XG4gICAgICAgICAgZmlyZUJlZm9yZUNhbGxiYWNrQXN5bmMoKTtcbiAgICAgICAgICBmaXJlQWZ0ZXJDYWxsYmFja0FzeW5jKCk7XG4gICAgICAgICAgY2xvc2VBbmltYXRpb24oKTtcbiAgICAgICAgICByZXR1cm4gbm9vcENhbmNlbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGFuaW1hdGlvbkV2ZW50ID0gcnVubmVyLmV2ZW50O1xuICAgICAgICBjbGFzc05hbWUgPSBydW5uZXIuY2xhc3NOYW1lO1xuICAgICAgICB2YXIgZWxlbWVudEV2ZW50cyA9IGFuZ3VsYXIuZWxlbWVudC5fZGF0YShydW5uZXIubm9kZSk7XG4gICAgICAgIGVsZW1lbnRFdmVudHMgPSBlbGVtZW50RXZlbnRzICYmIGVsZW1lbnRFdmVudHMuZXZlbnRzO1xuXG4gICAgICAgIGlmICghcGFyZW50RWxlbWVudCkge1xuICAgICAgICAgIHBhcmVudEVsZW1lbnQgPSBhZnRlckVsZW1lbnQgPyBhZnRlckVsZW1lbnQucGFyZW50KCkgOiBlbGVtZW50LnBhcmVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9za2lwIHRoZSBhbmltYXRpb24gaWYgYW5pbWF0aW9ucyBhcmUgZGlzYWJsZWQsIGEgcGFyZW50IGlzIGFscmVhZHkgYmVpbmcgYW5pbWF0ZWQsXG4gICAgICAgIC8vdGhlIGVsZW1lbnQgaXMgbm90IGN1cnJlbnRseSBhdHRhY2hlZCB0byB0aGUgZG9jdW1lbnQgYm9keSBvciB0aGVuIGNvbXBsZXRlbHkgY2xvc2VcbiAgICAgICAgLy90aGUgYW5pbWF0aW9uIGlmIGFueSBtYXRjaGluZyBhbmltYXRpb25zIGFyZSBub3QgZm91bmQgYXQgYWxsLlxuICAgICAgICAvL05PVEU6IElFOCArIElFOSBzaG91bGQgY2xvc2UgcHJvcGVybHkgKHJ1biBjbG9zZUFuaW1hdGlvbigpKSBpbiBjYXNlIGFuIGFuaW1hdGlvbiB3YXMgZm91bmQuXG4gICAgICAgIGlmIChhbmltYXRpb25zRGlzYWJsZWQoZWxlbWVudCwgcGFyZW50RWxlbWVudCkpIHtcbiAgICAgICAgICBmaXJlRE9NT3BlcmF0aW9uKCk7XG4gICAgICAgICAgZmlyZUJlZm9yZUNhbGxiYWNrQXN5bmMoKTtcbiAgICAgICAgICBmaXJlQWZ0ZXJDYWxsYmFja0FzeW5jKCk7XG4gICAgICAgICAgY2xvc2VBbmltYXRpb24oKTtcbiAgICAgICAgICByZXR1cm4gbm9vcENhbmNlbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuZ0FuaW1hdGVTdGF0ZSAgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSkgfHwge307XG4gICAgICAgIHZhciBydW5uaW5nQW5pbWF0aW9ucyAgICAgPSBuZ0FuaW1hdGVTdGF0ZS5hY3RpdmUgfHwge307XG4gICAgICAgIHZhciB0b3RhbEFjdGl2ZUFuaW1hdGlvbnMgPSBuZ0FuaW1hdGVTdGF0ZS50b3RhbEFjdGl2ZSB8fCAwO1xuICAgICAgICB2YXIgbGFzdEFuaW1hdGlvbiAgICAgICAgID0gbmdBbmltYXRlU3RhdGUubGFzdDtcbiAgICAgICAgdmFyIHNraXBBbmltYXRpb24gPSBmYWxzZTtcblxuICAgICAgICBpZiAodG90YWxBY3RpdmVBbmltYXRpb25zID4gMCkge1xuICAgICAgICAgIHZhciBhbmltYXRpb25zVG9DYW5jZWwgPSBbXTtcbiAgICAgICAgICBpZiAoIXJ1bm5lci5pc0NsYXNzQmFzZWQpIHtcbiAgICAgICAgICAgIGlmIChhbmltYXRpb25FdmVudCA9PSAnbGVhdmUnICYmIHJ1bm5pbmdBbmltYXRpb25zWyduZy1sZWF2ZSddKSB7XG4gICAgICAgICAgICAgIHNraXBBbmltYXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy9jYW5jZWwgYWxsIGFuaW1hdGlvbnMgd2hlbiBhIHN0cnVjdHVyYWwgYW5pbWF0aW9uIHRha2VzIHBsYWNlXG4gICAgICAgICAgICAgIGZvciAodmFyIGtsYXNzIGluIHJ1bm5pbmdBbmltYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uc1RvQ2FuY2VsLnB1c2gocnVubmluZ0FuaW1hdGlvbnNba2xhc3NdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBuZ0FuaW1hdGVTdGF0ZSA9IHt9O1xuICAgICAgICAgICAgICBjbGVhbnVwKGVsZW1lbnQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAobGFzdEFuaW1hdGlvbi5ldmVudCA9PSAnc2V0Q2xhc3MnKSB7XG4gICAgICAgICAgICBhbmltYXRpb25zVG9DYW5jZWwucHVzaChsYXN0QW5pbWF0aW9uKTtcbiAgICAgICAgICAgIGNsZWFudXAoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHJ1bm5pbmdBbmltYXRpb25zW2NsYXNzTmFtZV0pIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gcnVubmluZ0FuaW1hdGlvbnNbY2xhc3NOYW1lXTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50LmV2ZW50ID09IGFuaW1hdGlvbkV2ZW50KSB7XG4gICAgICAgICAgICAgIHNraXBBbmltYXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYW5pbWF0aW9uc1RvQ2FuY2VsLnB1c2goY3VycmVudCk7XG4gICAgICAgICAgICAgIGNsZWFudXAoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYW5pbWF0aW9uc1RvQ2FuY2VsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvckVhY2goYW5pbWF0aW9uc1RvQ2FuY2VsLCBmdW5jdGlvbihvcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgb3BlcmF0aW9uLmNhbmNlbCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJ1bm5lci5pc0NsYXNzQmFzZWRcbiAgICAgICAgICAgICYmICFydW5uZXIuaXNTZXRDbGFzc09wZXJhdGlvblxuICAgICAgICAgICAgJiYgYW5pbWF0aW9uRXZlbnQgIT0gJ2FuaW1hdGUnXG4gICAgICAgICAgICAmJiAhc2tpcEFuaW1hdGlvbikge1xuICAgICAgICAgIHNraXBBbmltYXRpb24gPSAoYW5pbWF0aW9uRXZlbnQgPT0gJ2FkZENsYXNzJykgPT0gZWxlbWVudC5oYXNDbGFzcyhjbGFzc05hbWUpOyAvL29wcG9zaXRlIG9mIFhPUlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNraXBBbmltYXRpb24pIHtcbiAgICAgICAgICBmaXJlRE9NT3BlcmF0aW9uKCk7XG4gICAgICAgICAgZmlyZUJlZm9yZUNhbGxiYWNrQXN5bmMoKTtcbiAgICAgICAgICBmaXJlQWZ0ZXJDYWxsYmFja0FzeW5jKCk7XG4gICAgICAgICAgZmlyZURvbmVDYWxsYmFja0FzeW5jKCk7XG4gICAgICAgICAgcmV0dXJuIG5vb3BDYW5jZWw7XG4gICAgICAgIH1cblxuICAgICAgICBydW5uaW5nQW5pbWF0aW9ucyAgICAgPSBuZ0FuaW1hdGVTdGF0ZS5hY3RpdmUgfHwge307XG4gICAgICAgIHRvdGFsQWN0aXZlQW5pbWF0aW9ucyA9IG5nQW5pbWF0ZVN0YXRlLnRvdGFsQWN0aXZlIHx8IDA7XG5cbiAgICAgICAgaWYgKGFuaW1hdGlvbkV2ZW50ID09ICdsZWF2ZScpIHtcbiAgICAgICAgICAvL3RoZXJlJ3Mgbm8gbmVlZCB0byBldmVyIHJlbW92ZSB0aGUgbGlzdGVuZXIgc2luY2UgdGhlIGVsZW1lbnRcbiAgICAgICAgICAvL3dpbGwgYmUgcmVtb3ZlZCAoZGVzdHJveWVkKSBhZnRlciB0aGUgbGVhdmUgYW5pbWF0aW9uIGVuZHMgb3JcbiAgICAgICAgICAvL2lzIGNhbmNlbGxlZCBtaWR3YXlcbiAgICAgICAgICBlbGVtZW50Lm9uZSgnJGRlc3Ryb3knLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgICB2YXIgYWN0aXZlTGVhdmVBbmltYXRpb24gPSBzdGF0ZS5hY3RpdmVbJ25nLWxlYXZlJ107XG4gICAgICAgICAgICAgIGlmIChhY3RpdmVMZWF2ZUFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUxlYXZlQW5pbWF0aW9uLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgIGNsZWFudXAoZWxlbWVudCwgJ25nLWxlYXZlJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vdGhlIG5nLWFuaW1hdGUgY2xhc3MgZG9lcyBub3RoaW5nLCBidXQgaXQncyBoZXJlIHRvIGFsbG93IGZvclxuICAgICAgICAvL3BhcmVudCBhbmltYXRpb25zIHRvIGZpbmQgYW5kIGNhbmNlbCBjaGlsZCBhbmltYXRpb25zIHdoZW4gbmVlZGVkXG4gICAgICAgICQkanFMaXRlLmFkZENsYXNzKGVsZW1lbnQsIE5HX0FOSU1BVEVfQ0xBU1NfTkFNRSk7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMudGVtcENsYXNzZXMpIHtcbiAgICAgICAgICBmb3JFYWNoKG9wdGlvbnMudGVtcENsYXNzZXMsIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgJCRqcUxpdGUuYWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsb2NhbEFuaW1hdGlvbkNvdW50ID0gZ2xvYmFsQW5pbWF0aW9uQ291bnRlcisrO1xuICAgICAgICB0b3RhbEFjdGl2ZUFuaW1hdGlvbnMrKztcbiAgICAgICAgcnVubmluZ0FuaW1hdGlvbnNbY2xhc3NOYW1lXSA9IHJ1bm5lcjtcblxuICAgICAgICBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSwge1xuICAgICAgICAgIGxhc3Q6IHJ1bm5lcixcbiAgICAgICAgICBhY3RpdmU6IHJ1bm5pbmdBbmltYXRpb25zLFxuICAgICAgICAgIGluZGV4OiBsb2NhbEFuaW1hdGlvbkNvdW50LFxuICAgICAgICAgIHRvdGFsQWN0aXZlOiB0b3RhbEFjdGl2ZUFuaW1hdGlvbnNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9maXJzdCB3ZSBydW4gdGhlIGJlZm9yZSBhbmltYXRpb25zIGFuZCB3aGVuIGFsbCBvZiB0aG9zZSBhcmUgY29tcGxldGVcbiAgICAgICAgLy90aGVuIHdlIHBlcmZvcm0gdGhlIERPTSBvcGVyYXRpb24gYW5kIHJ1biB0aGUgbmV4dCBzZXQgb2YgYW5pbWF0aW9uc1xuICAgICAgICBmaXJlQmVmb3JlQ2FsbGJhY2tBc3luYygpO1xuICAgICAgICBydW5uZXIuYmVmb3JlKGZ1bmN0aW9uKGNhbmNlbGxlZCkge1xuICAgICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpO1xuICAgICAgICAgIGNhbmNlbGxlZCA9IGNhbmNlbGxlZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIWRhdGEgfHwgIWRhdGEuYWN0aXZlW2NsYXNzTmFtZV0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChydW5uZXIuaXNDbGFzc0Jhc2VkICYmIGRhdGEuYWN0aXZlW2NsYXNzTmFtZV0uZXZlbnQgIT0gYW5pbWF0aW9uRXZlbnQpO1xuXG4gICAgICAgICAgZmlyZURPTU9wZXJhdGlvbigpO1xuICAgICAgICAgIGlmIChjYW5jZWxsZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNsb3NlQW5pbWF0aW9uKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpcmVBZnRlckNhbGxiYWNrQXN5bmMoKTtcbiAgICAgICAgICAgIHJ1bm5lci5hZnRlcihjbG9zZUFuaW1hdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcnVubmVyLmNhbmNlbDtcblxuICAgICAgICBmdW5jdGlvbiBmaXJlRE9NQ2FsbGJhY2soYW5pbWF0aW9uUGhhc2UpIHtcbiAgICAgICAgICB2YXIgZXZlbnROYW1lID0gJyRhbmltYXRlOicgKyBhbmltYXRpb25QaGFzZTtcbiAgICAgICAgICBpZiAoZWxlbWVudEV2ZW50cyAmJiBlbGVtZW50RXZlbnRzW2V2ZW50TmFtZV0gJiYgZWxlbWVudEV2ZW50c1tldmVudE5hbWVdLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQkYXN5bmNDYWxsYmFjayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgZWxlbWVudC50cmlnZ2VySGFuZGxlcihldmVudE5hbWUsIHtcbiAgICAgICAgICAgICAgICBldmVudDogYW5pbWF0aW9uRXZlbnQsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmaXJlQmVmb3JlQ2FsbGJhY2tBc3luYygpIHtcbiAgICAgICAgICBmaXJlRE9NQ2FsbGJhY2soJ2JlZm9yZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmlyZUFmdGVyQ2FsbGJhY2tBc3luYygpIHtcbiAgICAgICAgICBmaXJlRE9NQ2FsbGJhY2soJ2FmdGVyJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmaXJlRG9uZUNhbGxiYWNrQXN5bmMoKSB7XG4gICAgICAgICAgZmlyZURPTUNhbGxiYWNrKCdjbG9zZScpO1xuICAgICAgICAgIGRvbmVDYWxsYmFjaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9pdCBpcyBsZXNzIGNvbXBsaWNhdGVkIHRvIHVzZSBhIGZsYWcgdGhhbiBtYW5hZ2luZyBhbmQgY2FuY2VsaW5nXG4gICAgICAgIC8vdGltZW91dHMgY29udGFpbmluZyBtdWx0aXBsZSBjYWxsYmFja3MuXG4gICAgICAgIGZ1bmN0aW9uIGZpcmVET01PcGVyYXRpb24oKSB7XG4gICAgICAgICAgaWYgKCFmaXJlRE9NT3BlcmF0aW9uLmhhc0JlZW5SdW4pIHtcbiAgICAgICAgICAgIGZpcmVET01PcGVyYXRpb24uaGFzQmVlblJ1biA9IHRydWU7XG4gICAgICAgICAgICBkb21PcGVyYXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZUFuaW1hdGlvbigpIHtcbiAgICAgICAgICBpZiAoIWNsb3NlQW5pbWF0aW9uLmhhc0JlZW5SdW4pIHtcbiAgICAgICAgICAgIGlmIChydW5uZXIpIHsgLy90aGUgcnVubmVyIGRvZXNuJ3QgZXhpc3QgaWYgaXQgZmFpbHMgdG8gaW5zdGFudGlhdGVcbiAgICAgICAgICAgICAgcnVubmVyLmFwcGx5U3R5bGVzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNsb3NlQW5pbWF0aW9uLmhhc0JlZW5SdW4gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy50ZW1wQ2xhc3Nlcykge1xuICAgICAgICAgICAgICBmb3JFYWNoKG9wdGlvbnMudGVtcENsYXNzZXMsIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgICQkanFMaXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKTtcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XG5cbiAgICAgICAgICAgICAgLyogb25seSBzdHJ1Y3R1cmFsIGFuaW1hdGlvbnMgd2FpdCBmb3IgcmVmbG93IGJlZm9yZSByZW1vdmluZyBhblxuICAgICAgICAgICAgICAgICBhbmltYXRpb24sIGJ1dCBjbGFzcy1iYXNlZCBhbmltYXRpb25zIGRvbid0LiBBbiBleGFtcGxlIG9mIHRoaXNcbiAgICAgICAgICAgICAgICAgZmFpbGluZyB3b3VsZCBiZSB3aGVuIGEgcGFyZW50IEhUTUwgdGFnIGhhcyBhIG5nLWNsYXNzIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICBjYXVzaW5nIEFMTCBkaXJlY3RpdmVzIGJlbG93IHRvIHNraXAgYW5pbWF0aW9ucyBkdXJpbmcgdGhlIGRpZ2VzdCAqL1xuICAgICAgICAgICAgICBpZiAocnVubmVyICYmIHJ1bm5lci5pc0NsYXNzQmFzZWQpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCRhc3luY0NhbGxiYWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSkgfHwge307XG4gICAgICAgICAgICAgICAgICBpZiAobG9jYWxBbmltYXRpb25Db3VudCA9PSBkYXRhLmluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25FdmVudCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUsIGRhdGEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaXJlRG9uZUNhbGxiYWNrQXN5bmMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2FuY2VsQ2hpbGRBbmltYXRpb25zKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBleHRyYWN0RWxlbWVudE5vZGUoZWxlbWVudCk7XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgdmFyIG5vZGVzID0gYW5ndWxhci5pc0Z1bmN0aW9uKG5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkgP1xuICAgICAgICAgICAgbm9kZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKE5HX0FOSU1BVEVfQ0xBU1NfTkFNRSkgOlxuICAgICAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIE5HX0FOSU1BVEVfQ0xBU1NfTkFNRSk7XG4gICAgICAgICAgZm9yRWFjaChub2RlcywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfU1RBVEUpO1xuICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgZm9yRWFjaChkYXRhLmFjdGl2ZSwgZnVuY3Rpb24ocnVubmVyKSB7XG4gICAgICAgICAgICAgICAgcnVubmVyLmNhbmNlbCgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhbnVwKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgICAgICBpZiAoaXNNYXRjaGluZ0VsZW1lbnQoZWxlbWVudCwgJHJvb3RFbGVtZW50KSkge1xuICAgICAgICAgIGlmICghcm9vdEFuaW1hdGVTdGF0ZS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcm9vdEFuaW1hdGVTdGF0ZS5ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICByb290QW5pbWF0ZVN0YXRlLnN0cnVjdHVyYWwgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9TVEFURSkgfHwge307XG5cbiAgICAgICAgICB2YXIgcmVtb3ZlQW5pbWF0aW9ucyA9IGNsYXNzTmFtZSA9PT0gdHJ1ZTtcbiAgICAgICAgICBpZiAoIXJlbW92ZUFuaW1hdGlvbnMgJiYgZGF0YS5hY3RpdmUgJiYgZGF0YS5hY3RpdmVbY2xhc3NOYW1lXSkge1xuICAgICAgICAgICAgZGF0YS50b3RhbEFjdGl2ZS0tO1xuICAgICAgICAgICAgZGVsZXRlIGRhdGEuYWN0aXZlW2NsYXNzTmFtZV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJlbW92ZUFuaW1hdGlvbnMgfHwgIWRhdGEudG90YWxBY3RpdmUpIHtcbiAgICAgICAgICAgICQkanFMaXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsIE5HX0FOSU1BVEVfQ0xBU1NfTkFNRSk7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZURhdGEoTkdfQU5JTUFURV9TVEFURSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGFuaW1hdGlvbnNEaXNhYmxlZChlbGVtZW50LCBwYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGlmIChyb290QW5pbWF0ZVN0YXRlLmRpc2FibGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNNYXRjaGluZ0VsZW1lbnQoZWxlbWVudCwgJHJvb3RFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybiByb290QW5pbWF0ZVN0YXRlLnJ1bm5pbmc7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYWxsb3dDaGlsZEFuaW1hdGlvbnMsIHBhcmVudFJ1bm5pbmdBbmltYXRpb24sIGhhc1BhcmVudDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIC8vdGhlIGVsZW1lbnQgZGlkIG5vdCByZWFjaCB0aGUgcm9vdCBlbGVtZW50IHdoaWNoIG1lYW5zIHRoYXQgaXRcbiAgICAgICAgICAvL2lzIG5vdCBhcGFydCBvZiB0aGUgRE9NLiBUaGVyZWZvcmUgdGhlcmUgaXMgbm8gcmVhc29uIHRvIGRvXG4gICAgICAgICAgLy9hbnkgYW5pbWF0aW9ucyBvbiBpdFxuICAgICAgICAgIGlmIChwYXJlbnRFbGVtZW50Lmxlbmd0aCA9PT0gMCkgYnJlYWs7XG5cbiAgICAgICAgICB2YXIgaXNSb290ID0gaXNNYXRjaGluZ0VsZW1lbnQocGFyZW50RWxlbWVudCwgJHJvb3RFbGVtZW50KTtcbiAgICAgICAgICB2YXIgc3RhdGUgPSBpc1Jvb3QgPyByb290QW5pbWF0ZVN0YXRlIDogKHBhcmVudEVsZW1lbnQuZGF0YShOR19BTklNQVRFX1NUQVRFKSB8fCB7fSk7XG4gICAgICAgICAgaWYgKHN0YXRlLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL25vIG1hdHRlciB3aGF0LCBmb3IgYW4gYW5pbWF0aW9uIHRvIHdvcmsgaXQgbXVzdCByZWFjaCB0aGUgcm9vdCBlbGVtZW50XG4gICAgICAgICAgLy90aGlzIGltcGxpZXMgdGhhdCB0aGUgZWxlbWVudCBpcyBhdHRhY2hlZCB0byB0aGUgRE9NIHdoZW4gdGhlIGFuaW1hdGlvbiBpcyBydW5cbiAgICAgICAgICBpZiAoaXNSb290KSB7XG4gICAgICAgICAgICBoYXNQYXJlbnQgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vb25jZSBhIGZsYWcgaXMgZm91bmQgdGhhdCBpcyBzdHJpY3RseSBmYWxzZSB0aGVuIGV2ZXJ5dGhpbmcgYmVmb3JlXG4gICAgICAgICAgLy9pdCB3aWxsIGJlIGRpc2NhcmRlZCBhbmQgYWxsIGNoaWxkIGFuaW1hdGlvbnMgd2lsbCBiZSByZXN0cmljdGVkXG4gICAgICAgICAgaWYgKGFsbG93Q2hpbGRBbmltYXRpb25zICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdmFyIGFuaW1hdGVDaGlsZHJlbkZsYWcgPSBwYXJlbnRFbGVtZW50LmRhdGEoTkdfQU5JTUFURV9DSElMRFJFTik7XG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoYW5pbWF0ZUNoaWxkcmVuRmxhZykpIHtcbiAgICAgICAgICAgICAgYWxsb3dDaGlsZEFuaW1hdGlvbnMgPSBhbmltYXRlQ2hpbGRyZW5GbGFnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhcmVudFJ1bm5pbmdBbmltYXRpb24gPSBwYXJlbnRSdW5uaW5nQW5pbWF0aW9uIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnJ1bm5pbmcgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLmxhc3QgJiYgIXN0YXRlLmxhc3QuaXNDbGFzc0Jhc2VkKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAocGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnQucGFyZW50KCkpO1xuXG4gICAgICAgIHJldHVybiAhaGFzUGFyZW50IHx8ICghYWxsb3dDaGlsZEFuaW1hdGlvbnMgJiYgcGFyZW50UnVubmluZ0FuaW1hdGlvbik7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgJGFuaW1hdGVQcm92aWRlci5yZWdpc3RlcignJywgWyckd2luZG93JywgJyRzbmlmZmVyJywgJyR0aW1lb3V0JywgJyQkYW5pbWF0ZVJlZmxvdycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigkd2luZG93LCAgICRzbmlmZmVyLCAgICR0aW1lb3V0LCAgICQkYW5pbWF0ZVJlZmxvdykge1xuICAgICAgLy8gRGV0ZWN0IHByb3BlciB0cmFuc2l0aW9uZW5kL2FuaW1hdGlvbmVuZCBldmVudCBuYW1lcy5cbiAgICAgIHZhciBDU1NfUFJFRklYID0gJycsIFRSQU5TSVRJT05fUFJPUCwgVFJBTlNJVElPTkVORF9FVkVOVCwgQU5JTUFUSU9OX1BST1AsIEFOSU1BVElPTkVORF9FVkVOVDtcblxuICAgICAgLy8gSWYgdW5wcmVmaXhlZCBldmVudHMgYXJlIG5vdCBzdXBwb3J0ZWQgYnV0IHdlYmtpdC1wcmVmaXhlZCBhcmUsIHVzZSB0aGUgbGF0dGVyLlxuICAgICAgLy8gT3RoZXJ3aXNlLCBqdXN0IHVzZSBXM0MgbmFtZXMsIGJyb3dzZXJzIG5vdCBzdXBwb3J0aW5nIHRoZW0gYXQgYWxsIHdpbGwganVzdCBpZ25vcmUgdGhlbS5cbiAgICAgIC8vIE5vdGU6IENocm9tZSBpbXBsZW1lbnRzIGB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmRgIGFuZCBkb2Vzbid0IGltcGxlbWVudCBgd2luZG93Lm9uYW5pbWF0aW9uZW5kYFxuICAgICAgLy8gYnV0IGF0IHRoZSBzYW1lIHRpbWUgZGlzcGF0Y2hlcyB0aGUgYGFuaW1hdGlvbmVuZGAgZXZlbnQgYW5kIG5vdCBgd2Via2l0QW5pbWF0aW9uRW5kYC5cbiAgICAgIC8vIFJlZ2lzdGVyIGJvdGggZXZlbnRzIGluIGNhc2UgYHdpbmRvdy5vbmFuaW1hdGlvbmVuZGAgaXMgbm90IHN1cHBvcnRlZCBiZWNhdXNlIG9mIHRoYXQsXG4gICAgICAvLyBkbyB0aGUgc2FtZSBmb3IgYHRyYW5zaXRpb25lbmRgIGFzIFNhZmFyaSBpcyBsaWtlbHkgdG8gZXhoaWJpdCBzaW1pbGFyIGJlaGF2aW9yLlxuICAgICAgLy8gQWxzbywgdGhlIG9ubHkgbW9kZXJuIGJyb3dzZXIgdGhhdCB1c2VzIHZlbmRvciBwcmVmaXhlcyBmb3IgdHJhbnNpdGlvbnMva2V5ZnJhbWVzIGlzIHdlYmtpdFxuICAgICAgLy8gdGhlcmVmb3JlIHRoZXJlIGlzIG5vIHJlYXNvbiB0byB0ZXN0IGFueW1vcmUgZm9yIG90aGVyIHZlbmRvciBwcmVmaXhlczogaHR0cDovL2Nhbml1c2UuY29tLyNzZWFyY2g9dHJhbnNpdGlvblxuICAgICAgaWYgKHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgQ1NTX1BSRUZJWCA9ICctd2Via2l0LSc7XG4gICAgICAgIFRSQU5TSVRJT05fUFJPUCA9ICdXZWJraXRUcmFuc2l0aW9uJztcbiAgICAgICAgVFJBTlNJVElPTkVORF9FVkVOVCA9ICd3ZWJraXRUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVFJBTlNJVElPTl9QUk9QID0gJ3RyYW5zaXRpb24nO1xuICAgICAgICBUUkFOU0lUSU9ORU5EX0VWRU5UID0gJ3RyYW5zaXRpb25lbmQnO1xuICAgICAgfVxuXG4gICAgICBpZiAod2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgQ1NTX1BSRUZJWCA9ICctd2Via2l0LSc7XG4gICAgICAgIEFOSU1BVElPTl9QUk9QID0gJ1dlYmtpdEFuaW1hdGlvbic7XG4gICAgICAgIEFOSU1BVElPTkVORF9FVkVOVCA9ICd3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEFOSU1BVElPTl9QUk9QID0gJ2FuaW1hdGlvbic7XG4gICAgICAgIEFOSU1BVElPTkVORF9FVkVOVCA9ICdhbmltYXRpb25lbmQnO1xuICAgICAgfVxuXG4gICAgICB2YXIgRFVSQVRJT05fS0VZID0gJ0R1cmF0aW9uJztcbiAgICAgIHZhciBQUk9QRVJUWV9LRVkgPSAnUHJvcGVydHknO1xuICAgICAgdmFyIERFTEFZX0tFWSA9ICdEZWxheSc7XG4gICAgICB2YXIgQU5JTUFUSU9OX0lURVJBVElPTl9DT1VOVF9LRVkgPSAnSXRlcmF0aW9uQ291bnQnO1xuICAgICAgdmFyIEFOSU1BVElPTl9QTEFZU1RBVEVfS0VZID0gJ1BsYXlTdGF0ZSc7XG4gICAgICB2YXIgTkdfQU5JTUFURV9QQVJFTlRfS0VZID0gJyQkbmdBbmltYXRlS2V5JztcbiAgICAgIHZhciBOR19BTklNQVRFX0NTU19EQVRBX0tFWSA9ICckJG5nQW5pbWF0ZUNTUzNEYXRhJztcbiAgICAgIHZhciBFTEFQU0VEX1RJTUVfTUFYX0RFQ0lNQUxfUExBQ0VTID0gMztcbiAgICAgIHZhciBDTE9TSU5HX1RJTUVfQlVGRkVSID0gMS41O1xuICAgICAgdmFyIE9ORV9TRUNPTkQgPSAxMDAwO1xuXG4gICAgICB2YXIgbG9va3VwQ2FjaGUgPSB7fTtcbiAgICAgIHZhciBwYXJlbnRDb3VudGVyID0gMDtcbiAgICAgIHZhciBhbmltYXRpb25SZWZsb3dRdWV1ZSA9IFtdO1xuICAgICAgdmFyIGNhbmNlbEFuaW1hdGlvblJlZmxvdztcbiAgICAgIGZ1bmN0aW9uIGNsZWFyQ2FjaGVBZnRlclJlZmxvdygpIHtcbiAgICAgICAgaWYgKCFjYW5jZWxBbmltYXRpb25SZWZsb3cpIHtcbiAgICAgICAgICBjYW5jZWxBbmltYXRpb25SZWZsb3cgPSAkJGFuaW1hdGVSZWZsb3coZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbmltYXRpb25SZWZsb3dRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uUmVmbG93ID0gbnVsbDtcbiAgICAgICAgICAgIGxvb2t1cENhY2hlID0ge307XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYWZ0ZXJSZWZsb3coZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbmNlbEFuaW1hdGlvblJlZmxvdykge1xuICAgICAgICAgIGNhbmNlbEFuaW1hdGlvblJlZmxvdygpO1xuICAgICAgICB9XG4gICAgICAgIGFuaW1hdGlvblJlZmxvd1F1ZXVlLnB1c2goY2FsbGJhY2spO1xuICAgICAgICBjYW5jZWxBbmltYXRpb25SZWZsb3cgPSAkJGFuaW1hdGVSZWZsb3coZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZm9yRWFjaChhbmltYXRpb25SZWZsb3dRdWV1ZSwgZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmltYXRpb25SZWZsb3dRdWV1ZSA9IFtdO1xuICAgICAgICAgIGNhbmNlbEFuaW1hdGlvblJlZmxvdyA9IG51bGw7XG4gICAgICAgICAgbG9va3VwQ2FjaGUgPSB7fTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjbG9zaW5nVGltZXIgPSBudWxsO1xuICAgICAgdmFyIGNsb3NpbmdUaW1lc3RhbXAgPSAwO1xuICAgICAgdmFyIGFuaW1hdGlvbkVsZW1lbnRRdWV1ZSA9IFtdO1xuICAgICAgZnVuY3Rpb24gYW5pbWF0aW9uQ2xvc2VIYW5kbGVyKGVsZW1lbnQsIHRvdGFsVGltZSkge1xuICAgICAgICB2YXIgbm9kZSA9IGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KTtcbiAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChub2RlKTtcblxuICAgICAgICAvL3RoaXMgaXRlbSB3aWxsIGJlIGdhcmJhZ2UgY29sbGVjdGVkIGJ5IHRoZSBjbG9zaW5nXG4gICAgICAgIC8vYW5pbWF0aW9uIHRpbWVvdXRcbiAgICAgICAgYW5pbWF0aW9uRWxlbWVudFF1ZXVlLnB1c2goZWxlbWVudCk7XG5cbiAgICAgICAgLy9idXQgaXQgbWF5IG5vdCBuZWVkIHRvIGNhbmNlbCBvdXQgdGhlIGV4aXN0aW5nIHRpbWVvdXRcbiAgICAgICAgLy9pZiB0aGUgdGltZXN0YW1wIGlzIGxlc3MgdGhhbiB0aGUgcHJldmlvdXMgb25lXG4gICAgICAgIHZhciBmdXR1cmVUaW1lc3RhbXAgPSBEYXRlLm5vdygpICsgdG90YWxUaW1lO1xuICAgICAgICBpZiAoZnV0dXJlVGltZXN0YW1wIDw9IGNsb3NpbmdUaW1lc3RhbXApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAkdGltZW91dC5jYW5jZWwoY2xvc2luZ1RpbWVyKTtcblxuICAgICAgICBjbG9zaW5nVGltZXN0YW1wID0gZnV0dXJlVGltZXN0YW1wO1xuICAgICAgICBjbG9zaW5nVGltZXIgPSAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjbG9zZUFsbEFuaW1hdGlvbnMoYW5pbWF0aW9uRWxlbWVudFF1ZXVlKTtcbiAgICAgICAgICBhbmltYXRpb25FbGVtZW50UXVldWUgPSBbXTtcbiAgICAgICAgfSwgdG90YWxUaW1lLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsb3NlQWxsQW5pbWF0aW9ucyhlbGVtZW50cykge1xuICAgICAgICBmb3JFYWNoKGVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAgdmFyIGVsZW1lbnREYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZKTtcbiAgICAgICAgICBpZiAoZWxlbWVudERhdGEpIHtcbiAgICAgICAgICAgIGZvckVhY2goZWxlbWVudERhdGEuY2xvc2VBbmltYXRpb25GbnMsIGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXRFbGVtZW50QW5pbWF0aW9uRGV0YWlscyhlbGVtZW50LCBjYWNoZUtleSkge1xuICAgICAgICB2YXIgZGF0YSA9IGNhY2hlS2V5ID8gbG9va3VwQ2FjaGVbY2FjaGVLZXldIDogbnVsbDtcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IDA7XG4gICAgICAgICAgdmFyIHRyYW5zaXRpb25EZWxheSA9IDA7XG4gICAgICAgICAgdmFyIGFuaW1hdGlvbkR1cmF0aW9uID0gMDtcbiAgICAgICAgICB2YXIgYW5pbWF0aW9uRGVsYXkgPSAwO1xuXG4gICAgICAgICAgLy93ZSB3YW50IGFsbCB0aGUgc3R5bGVzIGRlZmluZWQgYmVmb3JlIGFuZCBhZnRlclxuICAgICAgICAgIGZvckVhY2goZWxlbWVudCwgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIHZhciBlbGVtZW50U3R5bGVzID0gJHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpIHx8IHt9O1xuXG4gICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb25TdHlsZSA9IGVsZW1lbnRTdHlsZXNbVFJBTlNJVElPTl9QUk9QICsgRFVSQVRJT05fS0VZXTtcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uID0gTWF0aC5tYXgocGFyc2VNYXhUaW1lKHRyYW5zaXRpb25EdXJhdGlvblN0eWxlKSwgdHJhbnNpdGlvbkR1cmF0aW9uKTtcblxuICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbkRlbGF5U3R5bGUgPSBlbGVtZW50U3R5bGVzW1RSQU5TSVRJT05fUFJPUCArIERFTEFZX0tFWV07XG4gICAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheSAgPSBNYXRoLm1heChwYXJzZU1heFRpbWUodHJhbnNpdGlvbkRlbGF5U3R5bGUpLCB0cmFuc2l0aW9uRGVsYXkpO1xuXG4gICAgICAgICAgICAgIHZhciBhbmltYXRpb25EZWxheVN0eWxlID0gZWxlbWVudFN0eWxlc1tBTklNQVRJT05fUFJPUCArIERFTEFZX0tFWV07XG4gICAgICAgICAgICAgIGFuaW1hdGlvbkRlbGF5ICAgPSBNYXRoLm1heChwYXJzZU1heFRpbWUoZWxlbWVudFN0eWxlc1tBTklNQVRJT05fUFJPUCArIERFTEFZX0tFWV0pLCBhbmltYXRpb25EZWxheSk7XG5cbiAgICAgICAgICAgICAgdmFyIGFEdXJhdGlvbiAgPSBwYXJzZU1heFRpbWUoZWxlbWVudFN0eWxlc1tBTklNQVRJT05fUFJPUCArIERVUkFUSU9OX0tFWV0pO1xuXG4gICAgICAgICAgICAgIGlmIChhRHVyYXRpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgYUR1cmF0aW9uICo9IHBhcnNlSW50KGVsZW1lbnRTdHlsZXNbQU5JTUFUSU9OX1BST1AgKyBBTklNQVRJT05fSVRFUkFUSU9OX0NPVU5UX0tFWV0sIDEwKSB8fCAxO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uID0gTWF0aC5tYXgoYUR1cmF0aW9uLCBhbmltYXRpb25EdXJhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkRlbGF5OiB0cmFuc2l0aW9uRGVsYXksXG4gICAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IHRyYW5zaXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgIGFuaW1hdGlvbkRlbGF5OiBhbmltYXRpb25EZWxheSxcbiAgICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiBhbmltYXRpb25EdXJhdGlvblxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKGNhY2hlS2V5KSB7XG4gICAgICAgICAgICBsb29rdXBDYWNoZVtjYWNoZUtleV0gPSBkYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VNYXhUaW1lKHN0cikge1xuICAgICAgICB2YXIgbWF4VmFsdWUgPSAwO1xuICAgICAgICB2YXIgdmFsdWVzID0gaXNTdHJpbmcoc3RyKSA/XG4gICAgICAgICAgc3RyLnNwbGl0KC9cXHMqLFxccyovKSA6XG4gICAgICAgICAgW107XG4gICAgICAgIGZvckVhY2godmFsdWVzLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIG1heFZhbHVlID0gTWF0aC5tYXgocGFyc2VGbG9hdCh2YWx1ZSkgfHwgMCwgbWF4VmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1heFZhbHVlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXRDYWNoZUtleShlbGVtZW50KSB7XG4gICAgICAgIHZhciBwYXJlbnRFbGVtZW50ID0gZWxlbWVudC5wYXJlbnQoKTtcbiAgICAgICAgdmFyIHBhcmVudElEID0gcGFyZW50RWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfUEFSRU5UX0tFWSk7XG4gICAgICAgIGlmICghcGFyZW50SUQpIHtcbiAgICAgICAgICBwYXJlbnRFbGVtZW50LmRhdGEoTkdfQU5JTUFURV9QQVJFTlRfS0VZLCArK3BhcmVudENvdW50ZXIpO1xuICAgICAgICAgIHBhcmVudElEID0gcGFyZW50Q291bnRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50SUQgKyAnLScgKyBleHRyYWN0RWxlbWVudE5vZGUoZWxlbWVudCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBhbmltYXRlU2V0dXAoYW5pbWF0aW9uRXZlbnQsIGVsZW1lbnQsIGNsYXNzTmFtZSwgc3R5bGVzKSB7XG4gICAgICAgIHZhciBzdHJ1Y3R1cmFsID0gWyduZy1lbnRlcicsJ25nLWxlYXZlJywnbmctbW92ZSddLmluZGV4T2YoY2xhc3NOYW1lKSA+PSAwO1xuXG4gICAgICAgIHZhciBjYWNoZUtleSA9IGdldENhY2hlS2V5KGVsZW1lbnQpO1xuICAgICAgICB2YXIgZXZlbnRDYWNoZUtleSA9IGNhY2hlS2V5ICsgJyAnICsgY2xhc3NOYW1lO1xuICAgICAgICB2YXIgaXRlbUluZGV4ID0gbG9va3VwQ2FjaGVbZXZlbnRDYWNoZUtleV0gPyArK2xvb2t1cENhY2hlW2V2ZW50Q2FjaGVLZXldLnRvdGFsIDogMDtcblxuICAgICAgICB2YXIgc3RhZ2dlciA9IHt9O1xuICAgICAgICBpZiAoaXRlbUluZGV4ID4gMCkge1xuICAgICAgICAgIHZhciBzdGFnZ2VyQ2xhc3NOYW1lID0gY2xhc3NOYW1lICsgJy1zdGFnZ2VyJztcbiAgICAgICAgICB2YXIgc3RhZ2dlckNhY2hlS2V5ID0gY2FjaGVLZXkgKyAnICcgKyBzdGFnZ2VyQ2xhc3NOYW1lO1xuICAgICAgICAgIHZhciBhcHBseUNsYXNzZXMgPSAhbG9va3VwQ2FjaGVbc3RhZ2dlckNhY2hlS2V5XTtcblxuICAgICAgICAgIGFwcGx5Q2xhc3NlcyAmJiAkJGpxTGl0ZS5hZGRDbGFzcyhlbGVtZW50LCBzdGFnZ2VyQ2xhc3NOYW1lKTtcblxuICAgICAgICAgIHN0YWdnZXIgPSBnZXRFbGVtZW50QW5pbWF0aW9uRGV0YWlscyhlbGVtZW50LCBzdGFnZ2VyQ2FjaGVLZXkpO1xuXG4gICAgICAgICAgYXBwbHlDbGFzc2VzICYmICQkanFMaXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsIHN0YWdnZXJDbGFzc05hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCRqcUxpdGUuYWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcblxuICAgICAgICB2YXIgZm9ybWVyRGF0YSA9IGVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NTU19EQVRBX0tFWSkgfHwge307XG4gICAgICAgIHZhciB0aW1pbmdzID0gZ2V0RWxlbWVudEFuaW1hdGlvbkRldGFpbHMoZWxlbWVudCwgZXZlbnRDYWNoZUtleSk7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSB0aW1pbmdzLnRyYW5zaXRpb25EdXJhdGlvbjtcbiAgICAgICAgdmFyIGFuaW1hdGlvbkR1cmF0aW9uID0gdGltaW5ncy5hbmltYXRpb25EdXJhdGlvbjtcblxuICAgICAgICBpZiAoc3RydWN0dXJhbCAmJiB0cmFuc2l0aW9uRHVyYXRpb24gPT09IDAgJiYgYW5pbWF0aW9uRHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgICAkJGpxTGl0ZS5yZW1vdmVDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBibG9ja1RyYW5zaXRpb24gPSBzdHlsZXMgfHwgKHN0cnVjdHVyYWwgJiYgdHJhbnNpdGlvbkR1cmF0aW9uID4gMCk7XG4gICAgICAgIHZhciBibG9ja0FuaW1hdGlvbiA9IGFuaW1hdGlvbkR1cmF0aW9uID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFnZ2VyLmFuaW1hdGlvbkRlbGF5ID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFnZ2VyLmFuaW1hdGlvbkR1cmF0aW9uID09PSAwO1xuXG4gICAgICAgIHZhciBjbG9zZUFuaW1hdGlvbkZucyA9IGZvcm1lckRhdGEuY2xvc2VBbmltYXRpb25GbnMgfHwgW107XG4gICAgICAgIGVsZW1lbnQuZGF0YShOR19BTklNQVRFX0NTU19EQVRBX0tFWSwge1xuICAgICAgICAgIHN0YWdnZXI6IHN0YWdnZXIsXG4gICAgICAgICAgY2FjaGVLZXk6IGV2ZW50Q2FjaGVLZXksXG4gICAgICAgICAgcnVubmluZzogZm9ybWVyRGF0YS5ydW5uaW5nIHx8IDAsXG4gICAgICAgICAgaXRlbUluZGV4OiBpdGVtSW5kZXgsXG4gICAgICAgICAgYmxvY2tUcmFuc2l0aW9uOiBibG9ja1RyYW5zaXRpb24sXG4gICAgICAgICAgY2xvc2VBbmltYXRpb25GbnM6IGNsb3NlQW5pbWF0aW9uRm5zXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBub2RlID0gZXh0cmFjdEVsZW1lbnROb2RlKGVsZW1lbnQpO1xuXG4gICAgICAgIGlmIChibG9ja1RyYW5zaXRpb24pIHtcbiAgICAgICAgICBibG9ja1RyYW5zaXRpb25zKG5vZGUsIHRydWUpO1xuICAgICAgICAgIGlmIChzdHlsZXMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKHN0eWxlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJsb2NrQW5pbWF0aW9uKSB7XG4gICAgICAgICAgYmxvY2tBbmltYXRpb25zKG5vZGUsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGFuaW1hdGVSdW4oYW5pbWF0aW9uRXZlbnQsIGVsZW1lbnQsIGNsYXNzTmFtZSwgYWN0aXZlQW5pbWF0aW9uQ29tcGxldGUsIHN0eWxlcykge1xuICAgICAgICB2YXIgbm9kZSA9IGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KTtcbiAgICAgICAgdmFyIGVsZW1lbnREYXRhID0gZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZKTtcbiAgICAgICAgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpLmluZGV4T2YoY2xhc3NOYW1lKSA9PSAtMSB8fCAhZWxlbWVudERhdGEpIHtcbiAgICAgICAgICBhY3RpdmVBbmltYXRpb25Db21wbGV0ZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhY3RpdmVDbGFzc05hbWUgPSAnJztcbiAgICAgICAgdmFyIHBlbmRpbmdDbGFzc05hbWUgPSAnJztcbiAgICAgICAgZm9yRWFjaChjbGFzc05hbWUuc3BsaXQoJyAnKSwgZnVuY3Rpb24oa2xhc3MsIGkpIHtcbiAgICAgICAgICB2YXIgcHJlZml4ID0gKGkgPiAwID8gJyAnIDogJycpICsga2xhc3M7XG4gICAgICAgICAgYWN0aXZlQ2xhc3NOYW1lICs9IHByZWZpeCArICctYWN0aXZlJztcbiAgICAgICAgICBwZW5kaW5nQ2xhc3NOYW1lICs9IHByZWZpeCArICctcGVuZGluZyc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBzdHlsZSA9ICcnO1xuICAgICAgICB2YXIgYXBwbGllZFN0eWxlcyA9IFtdO1xuICAgICAgICB2YXIgaXRlbUluZGV4ID0gZWxlbWVudERhdGEuaXRlbUluZGV4O1xuICAgICAgICB2YXIgc3RhZ2dlciA9IGVsZW1lbnREYXRhLnN0YWdnZXI7XG4gICAgICAgIHZhciBzdGFnZ2VyVGltZSA9IDA7XG4gICAgICAgIGlmIChpdGVtSW5kZXggPiAwKSB7XG4gICAgICAgICAgdmFyIHRyYW5zaXRpb25TdGFnZ2VyRGVsYXkgPSAwO1xuICAgICAgICAgIGlmIChzdGFnZ2VyLnRyYW5zaXRpb25EZWxheSA+IDAgJiYgc3RhZ2dlci50cmFuc2l0aW9uRHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb25TdGFnZ2VyRGVsYXkgPSBzdGFnZ2VyLnRyYW5zaXRpb25EZWxheSAqIGl0ZW1JbmRleDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgYW5pbWF0aW9uU3RhZ2dlckRlbGF5ID0gMDtcbiAgICAgICAgICBpZiAoc3RhZ2dlci5hbmltYXRpb25EZWxheSA+IDAgJiYgc3RhZ2dlci5hbmltYXRpb25EdXJhdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgYW5pbWF0aW9uU3RhZ2dlckRlbGF5ID0gc3RhZ2dlci5hbmltYXRpb25EZWxheSAqIGl0ZW1JbmRleDtcbiAgICAgICAgICAgIGFwcGxpZWRTdHlsZXMucHVzaChDU1NfUFJFRklYICsgJ2FuaW1hdGlvbi1wbGF5LXN0YXRlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3RhZ2dlclRpbWUgPSBNYXRoLnJvdW5kKE1hdGgubWF4KHRyYW5zaXRpb25TdGFnZ2VyRGVsYXksIGFuaW1hdGlvblN0YWdnZXJEZWxheSkgKiAxMDApIC8gMTAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzdGFnZ2VyVGltZSkge1xuICAgICAgICAgICQkanFMaXRlLmFkZENsYXNzKGVsZW1lbnQsIGFjdGl2ZUNsYXNzTmFtZSk7XG4gICAgICAgICAgaWYgKGVsZW1lbnREYXRhLmJsb2NrVHJhbnNpdGlvbikge1xuICAgICAgICAgICAgYmxvY2tUcmFuc2l0aW9ucyhub2RlLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGV2ZW50Q2FjaGVLZXkgPSBlbGVtZW50RGF0YS5jYWNoZUtleSArICcgJyArIGFjdGl2ZUNsYXNzTmFtZTtcbiAgICAgICAgdmFyIHRpbWluZ3MgPSBnZXRFbGVtZW50QW5pbWF0aW9uRGV0YWlscyhlbGVtZW50LCBldmVudENhY2hlS2V5KTtcbiAgICAgICAgdmFyIG1heER1cmF0aW9uID0gTWF0aC5tYXgodGltaW5ncy50cmFuc2l0aW9uRHVyYXRpb24sIHRpbWluZ3MuYW5pbWF0aW9uRHVyYXRpb24pO1xuICAgICAgICBpZiAobWF4RHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgICAkJGpxTGl0ZS5yZW1vdmVDbGFzcyhlbGVtZW50LCBhY3RpdmVDbGFzc05hbWUpO1xuICAgICAgICAgIGFuaW1hdGVDbG9zZShlbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgICAgIGFjdGl2ZUFuaW1hdGlvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzdGFnZ2VyVGltZSAmJiBzdHlsZXMgJiYgT2JqZWN0LmtleXMoc3R5bGVzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKCF0aW1pbmdzLnRyYW5zaXRpb25EdXJhdGlvbikge1xuICAgICAgICAgICAgZWxlbWVudC5jc3MoJ3RyYW5zaXRpb24nLCB0aW1pbmdzLmFuaW1hdGlvbkR1cmF0aW9uICsgJ3MgbGluZWFyIGFsbCcpO1xuICAgICAgICAgICAgYXBwbGllZFN0eWxlcy5wdXNoKCd0cmFuc2l0aW9uJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnQuY3NzKHN0eWxlcyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWF4RGVsYXkgPSBNYXRoLm1heCh0aW1pbmdzLnRyYW5zaXRpb25EZWxheSwgdGltaW5ncy5hbmltYXRpb25EZWxheSk7XG4gICAgICAgIHZhciBtYXhEZWxheVRpbWUgPSBtYXhEZWxheSAqIE9ORV9TRUNPTkQ7XG5cbiAgICAgICAgaWYgKGFwcGxpZWRTdHlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vdGhlIGVsZW1lbnQgYmVpbmcgYW5pbWF0ZWQgbWF5IHNvbWV0aW1lcyBjb250YWluIGNvbW1lbnQgbm9kZXMgaW5cbiAgICAgICAgICAvL3RoZSBqcUxpdGUgb2JqZWN0LCBzbyB3ZSdyZSBzYWZlIHRvIHVzZSBhIHNpbmdsZSB2YXJpYWJsZSB0byBob3VzZVxuICAgICAgICAgIC8vdGhlIHN0eWxlcyBzaW5jZSB0aGVyZSBpcyBhbHdheXMgb25seSBvbmUgZWxlbWVudCBiZWluZyBhbmltYXRlZFxuICAgICAgICAgIHZhciBvbGRTdHlsZSA9IG5vZGUuZ2V0QXR0cmlidXRlKCdzdHlsZScpIHx8ICcnO1xuICAgICAgICAgIGlmIChvbGRTdHlsZS5jaGFyQXQob2xkU3R5bGUubGVuZ3RoIC0gMSkgIT09ICc7Jykge1xuICAgICAgICAgICAgb2xkU3R5bGUgKz0gJzsnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBvbGRTdHlsZSArICcgJyArIHN0eWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgY3NzM0FuaW1hdGlvbkV2ZW50cyA9IEFOSU1BVElPTkVORF9FVkVOVCArICcgJyArIFRSQU5TSVRJT05FTkRfRVZFTlQ7XG4gICAgICAgIHZhciBhbmltYXRpb25UaW1lICAgICA9IChtYXhEZWxheSArIG1heER1cmF0aW9uKSAqIENMT1NJTkdfVElNRV9CVUZGRVI7XG4gICAgICAgIHZhciB0b3RhbFRpbWUgICAgICAgICA9IChzdGFnZ2VyVGltZSArIGFuaW1hdGlvblRpbWUpICogT05FX1NFQ09ORDtcblxuICAgICAgICB2YXIgc3RhZ2dlclRpbWVvdXQ7XG4gICAgICAgIGlmIChzdGFnZ2VyVGltZSA+IDApIHtcbiAgICAgICAgICAkJGpxTGl0ZS5hZGRDbGFzcyhlbGVtZW50LCBwZW5kaW5nQ2xhc3NOYW1lKTtcbiAgICAgICAgICBzdGFnZ2VyVGltZW91dCA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc3RhZ2dlclRpbWVvdXQgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAodGltaW5ncy50cmFuc2l0aW9uRHVyYXRpb24gPiAwKSB7XG4gICAgICAgICAgICAgIGJsb2NrVHJhbnNpdGlvbnMobm9kZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpbWluZ3MuYW5pbWF0aW9uRHVyYXRpb24gPiAwKSB7XG4gICAgICAgICAgICAgIGJsb2NrQW5pbWF0aW9ucyhub2RlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQkanFMaXRlLmFkZENsYXNzKGVsZW1lbnQsIGFjdGl2ZUNsYXNzTmFtZSk7XG4gICAgICAgICAgICAkJGpxTGl0ZS5yZW1vdmVDbGFzcyhlbGVtZW50LCBwZW5kaW5nQ2xhc3NOYW1lKTtcblxuICAgICAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgICAgICBpZiAodGltaW5ncy50cmFuc2l0aW9uRHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNzcygndHJhbnNpdGlvbicsIHRpbWluZ3MuYW5pbWF0aW9uRHVyYXRpb24gKyAncyBsaW5lYXIgYWxsJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxlbWVudC5jc3Moc3R5bGVzKTtcbiAgICAgICAgICAgICAgYXBwbGllZFN0eWxlcy5wdXNoKCd0cmFuc2l0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgc3RhZ2dlclRpbWUgKiBPTkVfU0VDT05ELCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50Lm9uKGNzczNBbmltYXRpb25FdmVudHMsIG9uQW5pbWF0aW9uUHJvZ3Jlc3MpO1xuICAgICAgICBlbGVtZW50RGF0YS5jbG9zZUFuaW1hdGlvbkZucy5wdXNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG9uRW5kKCk7XG4gICAgICAgICAgYWN0aXZlQW5pbWF0aW9uQ29tcGxldGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZWxlbWVudERhdGEucnVubmluZysrO1xuICAgICAgICBhbmltYXRpb25DbG9zZUhhbmRsZXIoZWxlbWVudCwgdG90YWxUaW1lKTtcbiAgICAgICAgcmV0dXJuIG9uRW5kO1xuXG4gICAgICAgIC8vIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGNhbGxlZCBieSAkYW5pbWF0ZSBzb1xuICAgICAgICAvLyB0aGVyZSBpcyBubyBuZWVkIHRvIGF0dGFjaCB0aGlzIGludGVybmFsbHkgdG8gdGhlXG4gICAgICAgIC8vIHRpbWVvdXQgZG9uZSBtZXRob2QuXG4gICAgICAgIGZ1bmN0aW9uIG9uRW5kKCkge1xuICAgICAgICAgIGVsZW1lbnQub2ZmKGNzczNBbmltYXRpb25FdmVudHMsIG9uQW5pbWF0aW9uUHJvZ3Jlc3MpO1xuICAgICAgICAgICQkanFMaXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsIGFjdGl2ZUNsYXNzTmFtZSk7XG4gICAgICAgICAgJCRqcUxpdGUucmVtb3ZlQ2xhc3MoZWxlbWVudCwgcGVuZGluZ0NsYXNzTmFtZSk7XG4gICAgICAgICAgaWYgKHN0YWdnZXJUaW1lb3V0KSB7XG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoc3RhZ2dlclRpbWVvdXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhbmltYXRlQ2xvc2UoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgICB2YXIgbm9kZSA9IGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KTtcbiAgICAgICAgICBmb3IgKHZhciBpIGluIGFwcGxpZWRTdHlsZXMpIHtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUucmVtb3ZlUHJvcGVydHkoYXBwbGllZFN0eWxlc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb25BbmltYXRpb25Qcm9ncmVzcyhldmVudCkge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHZhciBldiA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQgfHwgZXZlbnQ7XG4gICAgICAgICAgdmFyIHRpbWVTdGFtcCA9IGV2LiRtYW51YWxUaW1lU3RhbXAgfHwgZXYudGltZVN0YW1wIHx8IERhdGUubm93KCk7XG5cbiAgICAgICAgICAvKiBGaXJlZm94IChvciBwb3NzaWJseSBqdXN0IEdlY2tvKSBsaWtlcyB0byBub3Qgcm91bmQgdmFsdWVzIHVwXG4gICAgICAgICAgICogd2hlbiBhIG1zIG1lYXN1cmVtZW50IGlzIHVzZWQgZm9yIHRoZSBhbmltYXRpb24gKi9cbiAgICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBwYXJzZUZsb2F0KGV2LmVsYXBzZWRUaW1lLnRvRml4ZWQoRUxBUFNFRF9USU1FX01BWF9ERUNJTUFMX1BMQUNFUykpO1xuXG4gICAgICAgICAgLyogJG1hbnVhbFRpbWVTdGFtcCBpcyBhIG1vY2tlZCB0aW1lU3RhbXAgdmFsdWUgd2hpY2ggaXMgc2V0XG4gICAgICAgICAgICogd2l0aGluIGJyb3dzZXJUcmlnZ2VyKCkuIFRoaXMgaXMgb25seSBoZXJlIHNvIHRoYXQgdGVzdHMgY2FuXG4gICAgICAgICAgICogbW9jayBhbmltYXRpb25zIHByb3Blcmx5LiBSZWFsIGV2ZW50cyBmYWxsYmFjayB0byBldmVudC50aW1lU3RhbXAsXG4gICAgICAgICAgICogb3IsIGlmIHRoZXkgZG9uJ3QsIHRoZW4gYSB0aW1lU3RhbXAgaXMgYXV0b21hdGljYWxseSBjcmVhdGVkIGZvciB0aGVtLlxuICAgICAgICAgICAqIFdlJ3JlIGNoZWNraW5nIHRvIHNlZSBpZiB0aGUgdGltZVN0YW1wIHN1cnBhc3NlcyB0aGUgZXhwZWN0ZWQgZGVsYXksXG4gICAgICAgICAgICogYnV0IHdlJ3JlIHVzaW5nIGVsYXBzZWRUaW1lIGluc3RlYWQgb2YgdGhlIHRpbWVTdGFtcCBvbiB0aGUgMm5kXG4gICAgICAgICAgICogcHJlLWNvbmRpdGlvbiBzaW5jZSBhbmltYXRpb25zIHNvbWV0aW1lcyBjbG9zZSBvZmYgZWFybHkgKi9cbiAgICAgICAgICBpZiAoTWF0aC5tYXgodGltZVN0YW1wIC0gc3RhcnRUaW1lLCAwKSA+PSBtYXhEZWxheVRpbWUgJiYgZWxhcHNlZFRpbWUgPj0gbWF4RHVyYXRpb24pIHtcbiAgICAgICAgICAgIGFjdGl2ZUFuaW1hdGlvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJsb2NrVHJhbnNpdGlvbnMobm9kZSwgYm9vbCkge1xuICAgICAgICBub2RlLnN0eWxlW1RSQU5TSVRJT05fUFJPUCArIFBST1BFUlRZX0tFWV0gPSBib29sID8gJ25vbmUnIDogJyc7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJsb2NrQW5pbWF0aW9ucyhub2RlLCBib29sKSB7XG4gICAgICAgIG5vZGUuc3R5bGVbQU5JTUFUSU9OX1BST1AgKyBBTklNQVRJT05fUExBWVNUQVRFX0tFWV0gPSBib29sID8gJ3BhdXNlZCcgOiAnJztcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYW5pbWF0ZUJlZm9yZShhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lLCBzdHlsZXMpIHtcbiAgICAgICAgaWYgKGFuaW1hdGVTZXR1cChhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lLCBzdHlsZXMpKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbmNlbGxlZCkge1xuICAgICAgICAgICAgY2FuY2VsbGVkICYmIGFuaW1hdGVDbG9zZShlbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYW5pbWF0ZUFmdGVyKGFuaW1hdGlvbkV2ZW50LCBlbGVtZW50LCBjbGFzc05hbWUsIGFmdGVyQW5pbWF0aW9uQ29tcGxldGUsIHN0eWxlcykge1xuICAgICAgICBpZiAoZWxlbWVudC5kYXRhKE5HX0FOSU1BVEVfQ1NTX0RBVEFfS0VZKSkge1xuICAgICAgICAgIHJldHVybiBhbmltYXRlUnVuKGFuaW1hdGlvbkV2ZW50LCBlbGVtZW50LCBjbGFzc05hbWUsIGFmdGVyQW5pbWF0aW9uQ29tcGxldGUsIHN0eWxlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYW5pbWF0ZUNsb3NlKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgICAgYWZ0ZXJBbmltYXRpb25Db21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGFuaW1hdGUoYW5pbWF0aW9uRXZlbnQsIGVsZW1lbnQsIGNsYXNzTmFtZSwgYW5pbWF0aW9uQ29tcGxldGUsIG9wdGlvbnMpIHtcbiAgICAgICAgLy9JZiB0aGUgYW5pbWF0ZVNldHVwIGZ1bmN0aW9uIGRvZXNuJ3QgYm90aGVyIHJldHVybmluZyBhXG4gICAgICAgIC8vY2FuY2VsbGF0aW9uIGZ1bmN0aW9uIHRoZW4gaXQgbWVhbnMgdGhhdCB0aGVyZSBpcyBubyBhbmltYXRpb25cbiAgICAgICAgLy90byBwZXJmb3JtIGF0IGFsbFxuICAgICAgICB2YXIgcHJlUmVmbG93Q2FuY2VsbGF0aW9uID0gYW5pbWF0ZUJlZm9yZShhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zLmZyb20pO1xuICAgICAgICBpZiAoIXByZVJlZmxvd0NhbmNlbGxhdGlvbikge1xuICAgICAgICAgIGNsZWFyQ2FjaGVBZnRlclJlZmxvdygpO1xuICAgICAgICAgIGFuaW1hdGlvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9UaGVyZSBhcmUgdHdvIGNhbmNlbGxhdGlvbiBmdW5jdGlvbnM6IG9uZSBpcyBiZWZvcmUgdGhlIGZpcnN0XG4gICAgICAgIC8vcmVmbG93IGFuaW1hdGlvbiBhbmQgdGhlIHNlY29uZCBpcyBkdXJpbmcgdGhlIGFjdGl2ZSBzdGF0ZVxuICAgICAgICAvL2FuaW1hdGlvbi4gVGhlIGZpcnN0IGZ1bmN0aW9uIHdpbGwgdGFrZSBjYXJlIG9mIHJlbW92aW5nIHRoZVxuICAgICAgICAvL2RhdGEgZnJvbSB0aGUgZWxlbWVudCB3aGljaCB3aWxsIG5vdCBtYWtlIHRoZSAybmQgYW5pbWF0aW9uXG4gICAgICAgIC8vaGFwcGVuIGluIHRoZSBmaXJzdCBwbGFjZVxuICAgICAgICB2YXIgY2FuY2VsID0gcHJlUmVmbG93Q2FuY2VsbGF0aW9uO1xuICAgICAgICBhZnRlclJlZmxvdyhlbGVtZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvL29uY2UgdGhlIHJlZmxvdyBpcyBjb21wbGV0ZSB0aGVuIHdlIHBvaW50IGNhbmNlbCB0b1xuICAgICAgICAgIC8vdGhlIG5ldyBjYW5jZWxsYXRpb24gZnVuY3Rpb24gd2hpY2ggd2lsbCByZW1vdmUgYWxsIG9mIHRoZVxuICAgICAgICAgIC8vYW5pbWF0aW9uIHByb3BlcnRpZXMgZnJvbSB0aGUgYWN0aXZlIGFuaW1hdGlvblxuICAgICAgICAgIGNhbmNlbCA9IGFuaW1hdGVBZnRlcihhbmltYXRpb25FdmVudCwgZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZSwgb3B0aW9ucy50byk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjYW5jZWxsZWQpIHtcbiAgICAgICAgICAoY2FuY2VsIHx8IG5vb3ApKGNhbmNlbGxlZCk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGFuaW1hdGVDbG9zZShlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICAgICAgJCRqcUxpdGUucmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgdmFyIGRhdGEgPSBlbGVtZW50LmRhdGEoTkdfQU5JTUFURV9DU1NfREFUQV9LRVkpO1xuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLnJ1bm5pbmcpIHtcbiAgICAgICAgICAgIGRhdGEucnVubmluZy0tO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWRhdGEucnVubmluZyB8fCBkYXRhLnJ1bm5pbmcgPT09IDApIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRGF0YShOR19BTklNQVRFX0NTU19EQVRBX0tFWSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFuaW1hdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgZnJvbSwgdG8sIGFuaW1hdGlvbkNvbXBsZXRlZCwgb3B0aW9ucykge1xuICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgIG9wdGlvbnMuZnJvbSA9IGZyb207XG4gICAgICAgICAgb3B0aW9ucy50byA9IHRvO1xuICAgICAgICAgIHJldHVybiBhbmltYXRlKCdhbmltYXRlJywgZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZWQsIG9wdGlvbnMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGVudGVyOiBmdW5jdGlvbihlbGVtZW50LCBhbmltYXRpb25Db21wbGV0ZWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICByZXR1cm4gYW5pbWF0ZSgnZW50ZXInLCBlbGVtZW50LCAnbmctZW50ZXInLCBhbmltYXRpb25Db21wbGV0ZWQsIG9wdGlvbnMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGxlYXZlOiBmdW5jdGlvbihlbGVtZW50LCBhbmltYXRpb25Db21wbGV0ZWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICByZXR1cm4gYW5pbWF0ZSgnbGVhdmUnLCBlbGVtZW50LCAnbmctbGVhdmUnLCBhbmltYXRpb25Db21wbGV0ZWQsIG9wdGlvbnMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG1vdmU6IGZ1bmN0aW9uKGVsZW1lbnQsIGFuaW1hdGlvbkNvbXBsZXRlZCwgb3B0aW9ucykge1xuICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgIHJldHVybiBhbmltYXRlKCdtb3ZlJywgZWxlbWVudCwgJ25nLW1vdmUnLCBhbmltYXRpb25Db21wbGV0ZWQsIG9wdGlvbnMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGJlZm9yZVNldENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBhZGQsIHJlbW92ZSwgYW5pbWF0aW9uQ29tcGxldGVkLCBvcHRpb25zKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHN1ZmZpeENsYXNzZXMocmVtb3ZlLCAnLXJlbW92ZScpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4Q2xhc3NlcyhhZGQsICctYWRkJyk7XG4gICAgICAgICAgdmFyIGNhbmNlbGxhdGlvbk1ldGhvZCA9IGFuaW1hdGVCZWZvcmUoJ3NldENsYXNzJywgZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zLmZyb20pO1xuICAgICAgICAgIGlmIChjYW5jZWxsYXRpb25NZXRob2QpIHtcbiAgICAgICAgICAgIGFmdGVyUmVmbG93KGVsZW1lbnQsIGFuaW1hdGlvbkNvbXBsZXRlZCk7XG4gICAgICAgICAgICByZXR1cm4gY2FuY2VsbGF0aW9uTWV0aG9kO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjbGVhckNhY2hlQWZ0ZXJSZWZsb3coKTtcbiAgICAgICAgICBhbmltYXRpb25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBiZWZvcmVBZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICB2YXIgY2FuY2VsbGF0aW9uTWV0aG9kID0gYW5pbWF0ZUJlZm9yZSgnYWRkQ2xhc3MnLCBlbGVtZW50LCBzdWZmaXhDbGFzc2VzKGNsYXNzTmFtZSwgJy1hZGQnKSwgb3B0aW9ucy5mcm9tKTtcbiAgICAgICAgICBpZiAoY2FuY2VsbGF0aW9uTWV0aG9kKSB7XG4gICAgICAgICAgICBhZnRlclJlZmxvdyhlbGVtZW50LCBhbmltYXRpb25Db21wbGV0ZWQpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbmNlbGxhdGlvbk1ldGhvZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2xlYXJDYWNoZUFmdGVyUmVmbG93KCk7XG4gICAgICAgICAgYW5pbWF0aW9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYmVmb3JlUmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgYW5pbWF0aW9uQ29tcGxldGVkLCBvcHRpb25zKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgdmFyIGNhbmNlbGxhdGlvbk1ldGhvZCA9IGFuaW1hdGVCZWZvcmUoJ3JlbW92ZUNsYXNzJywgZWxlbWVudCwgc3VmZml4Q2xhc3NlcyhjbGFzc05hbWUsICctcmVtb3ZlJyksIG9wdGlvbnMuZnJvbSk7XG4gICAgICAgICAgaWYgKGNhbmNlbGxhdGlvbk1ldGhvZCkge1xuICAgICAgICAgICAgYWZ0ZXJSZWZsb3coZWxlbWVudCwgYW5pbWF0aW9uQ29tcGxldGVkKTtcbiAgICAgICAgICAgIHJldHVybiBjYW5jZWxsYXRpb25NZXRob2Q7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNsZWFyQ2FjaGVBZnRlclJlZmxvdygpO1xuICAgICAgICAgIGFuaW1hdGlvbkNvbXBsZXRlZCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBhZGQsIHJlbW92ZSwgYW5pbWF0aW9uQ29tcGxldGVkLCBvcHRpb25zKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgcmVtb3ZlID0gc3VmZml4Q2xhc3NlcyhyZW1vdmUsICctcmVtb3ZlJyk7XG4gICAgICAgICAgYWRkID0gc3VmZml4Q2xhc3NlcyhhZGQsICctYWRkJyk7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHJlbW92ZSArICcgJyArIGFkZDtcbiAgICAgICAgICByZXR1cm4gYW5pbWF0ZUFmdGVyKCdzZXRDbGFzcycsIGVsZW1lbnQsIGNsYXNzTmFtZSwgYW5pbWF0aW9uQ29tcGxldGVkLCBvcHRpb25zLnRvKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBhbmltYXRpb25Db21wbGV0ZWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICByZXR1cm4gYW5pbWF0ZUFmdGVyKCdhZGRDbGFzcycsIGVsZW1lbnQsIHN1ZmZpeENsYXNzZXMoY2xhc3NOYW1lLCAnLWFkZCcpLCBhbmltYXRpb25Db21wbGV0ZWQsIG9wdGlvbnMudG8pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIGFuaW1hdGlvbkNvbXBsZXRlZCwgb3B0aW9ucykge1xuICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgIHJldHVybiBhbmltYXRlQWZ0ZXIoJ3JlbW92ZUNsYXNzJywgZWxlbWVudCwgc3VmZml4Q2xhc3NlcyhjbGFzc05hbWUsICctcmVtb3ZlJyksIGFuaW1hdGlvbkNvbXBsZXRlZCwgb3B0aW9ucy50byk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHN1ZmZpeENsYXNzZXMoY2xhc3Nlcywgc3VmZml4KSB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSAnJztcbiAgICAgICAgY2xhc3NlcyA9IGlzQXJyYXkoY2xhc3NlcykgPyBjbGFzc2VzIDogY2xhc3Nlcy5zcGxpdCgvXFxzKy8pO1xuICAgICAgICBmb3JFYWNoKGNsYXNzZXMsIGZ1bmN0aW9uKGtsYXNzLCBpKSB7XG4gICAgICAgICAgaWYgKGtsYXNzICYmIGtsYXNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSArPSAoaSA+IDAgPyAnICcgOiAnJykgKyBrbGFzcyArIHN1ZmZpeDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY2xhc3NOYW1lO1xuICAgICAgfVxuICAgIH1dKTtcbiAgfV0pO1xuXG5cbn0pKHdpbmRvdywgd2luZG93LmFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuMy4xM1xuICogKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiAqIExpY2Vuc2U6IE1JVFxuICovXG4oZnVuY3Rpb24od2luZG93LCBhbmd1bGFyLCB1bmRlZmluZWQpIHsndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbmdBcmlhXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgYG5nQXJpYWAgbW9kdWxlIHByb3ZpZGVzIHN1cHBvcnQgZm9yIGNvbW1vblxuICogWzxhYmJyIHRpdGxlPVwiQWNjZXNzaWJsZSBSaWNoIEludGVybmV0IEFwcGxpY2F0aW9uc1wiPkFSSUE8L2FiYnI+XShodHRwOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS8pXG4gKiBhdHRyaWJ1dGVzIHRoYXQgY29udmV5IHN0YXRlIG9yIHNlbWFudGljIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhcHBsaWNhdGlvbiBmb3IgdXNlcnNcbiAqIG9mIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMsIHN1Y2ggYXMgc2NyZWVuIHJlYWRlcnMuXG4gKlxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ0FyaWFcIj48L2Rpdj5cbiAqXG4gKiAjIyBVc2FnZVxuICpcbiAqIEZvciBuZ0FyaWEgdG8gZG8gaXRzIG1hZ2ljLCBzaW1wbHkgaW5jbHVkZSB0aGUgbW9kdWxlIGFzIGEgZGVwZW5kZW5jeS4gVGhlIGRpcmVjdGl2ZXMgc3VwcG9ydGVkXG4gKiBieSBuZ0FyaWEgYXJlOlxuICogYG5nTW9kZWxgLCBgbmdEaXNhYmxlZGAsIGBuZ1Nob3dgLCBgbmdIaWRlYCwgYG5nQ2xpY2tgLCBgbmdEYmxDbGlja2AsIGFuZCBgbmdNZXNzYWdlc2AuXG4gKlxuICogQmVsb3cgaXMgYSBtb3JlIGRldGFpbGVkIGJyZWFrZG93biBvZiB0aGUgYXR0cmlidXRlcyBoYW5kbGVkIGJ5IG5nQXJpYTpcbiAqXG4gKiB8IERpcmVjdGl2ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTdXBwb3J0ZWQgQXR0cmlidXRlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbCBuZ01vZGVsfSAgICAgICAgfCBhcmlhLWNoZWNrZWQsIGFyaWEtdmFsdWVtaW4sIGFyaWEtdmFsdWVtYXgsIGFyaWEtdmFsdWVub3csIGFyaWEtaW52YWxpZCwgYXJpYS1yZXF1aXJlZCB8XG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdEaXNhYmxlZCBuZ0Rpc2FibGVkfSAgfCBhcmlhLWRpc2FibGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdTaG93IG5nU2hvd30gICAgICAgICAgfCBhcmlhLWhpZGRlbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdIaWRlIG5nSGlkZX0gICAgICAgICAgfCBhcmlhLWhpZGRlbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSAgICAgICAgfCB0YWJpbmRleCwga2V5cHJlc3MgZXZlbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IHtAbGluayBuZy5kaXJlY3RpdmU6bmdEYmxjbGljayBuZ0RibGNsaWNrfSAgfCB0YWJpbmRleCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IHtAbGluayBtb2R1bGU6bmdNZXNzYWdlcyBuZ01lc3NhZ2VzfSAgICAgICAgfCBhcmlhLWxpdmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKlxuICogRmluZCBvdXQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIGRpcmVjdGl2ZSBieSByZWFkaW5nIHRoZVxuICoge0BsaW5rIGd1aWRlL2FjY2Vzc2liaWxpdHkgbmdBcmlhIERldmVsb3BlciBHdWlkZX0uXG4gKlxuICogIyNFeGFtcGxlXG4gKiBVc2luZyBuZ0Rpc2FibGVkIHdpdGggbmdBcmlhOlxuICogYGBgaHRtbFxuICogPG1kLWNoZWNrYm94IG5nLWRpc2FibGVkPVwiZGlzYWJsZWRcIj5cbiAqIGBgYFxuICogQmVjb21lczpcbiAqIGBgYGh0bWxcbiAqIDxtZC1jaGVja2JveCBuZy1kaXNhYmxlZD1cImRpc2FibGVkXCIgYXJpYS1kaXNhYmxlZD1cInRydWVcIj5cbiAqIGBgYFxuICpcbiAqICMjRGlzYWJsaW5nIEF0dHJpYnV0ZXNcbiAqIEl0J3MgcG9zc2libGUgdG8gZGlzYWJsZSBpbmRpdmlkdWFsIGF0dHJpYnV0ZXMgYWRkZWQgYnkgbmdBcmlhIHdpdGggdGhlXG4gKiB7QGxpbmsgbmdBcmlhLiRhcmlhUHJvdmlkZXIjY29uZmlnIGNvbmZpZ30gbWV0aG9kLiBGb3IgbW9yZSBkZXRhaWxzLCBzZWUgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvYWNjZXNzaWJpbGl0eSBEZXZlbG9wZXIgR3VpZGV9LlxuICovXG4gLyogZ2xvYmFsIC1uZ0FyaWFNb2R1bGUgKi9cbnZhciBuZ0FyaWFNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdBcmlhJywgWyduZyddKS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyKCckYXJpYScsICRBcmlhUHJvdmlkZXIpO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFyaWFQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHRoZSBBUklBIGF0dHJpYnV0ZXMgaW5qZWN0ZWQgYW5kIG1hbmFnZWQgYnkgbmdBcmlhLlxuICpcbiAqIGBgYGpzXG4gKiBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbJ25nQXJpYSddLCBmdW5jdGlvbiBjb25maWcoJGFyaWFQcm92aWRlcikge1xuICogICAkYXJpYVByb3ZpZGVyLmNvbmZpZyh7XG4gKiAgICAgYXJpYVZhbHVlOiB0cnVlLFxuICogICAgIHRhYmluZGV4OiBmYWxzZVxuICogICB9KTtcbiAqIH0pO1xuICpgYGBcbiAqXG4gKiAjIyBEZXBlbmRlbmNpZXNcbiAqIFJlcXVpcmVzIHRoZSB7QGxpbmsgbmdBcmlhfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxuICpcbiAqL1xuZnVuY3Rpb24gJEFyaWFQcm92aWRlcigpIHtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBhcmlhSGlkZGVuOiB0cnVlLFxuICAgIGFyaWFDaGVja2VkOiB0cnVlLFxuICAgIGFyaWFEaXNhYmxlZDogdHJ1ZSxcbiAgICBhcmlhUmVxdWlyZWQ6IHRydWUsXG4gICAgYXJpYUludmFsaWQ6IHRydWUsXG4gICAgYXJpYU11bHRpbGluZTogdHJ1ZSxcbiAgICBhcmlhVmFsdWU6IHRydWUsXG4gICAgdGFiaW5kZXg6IHRydWUsXG4gICAgYmluZEtleXByZXNzOiB0cnVlXG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFyaWFQcm92aWRlciNjb25maWdcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBvYmplY3QgdG8gZW5hYmxlL2Rpc2FibGUgc3BlY2lmaWMgQVJJQSBhdHRyaWJ1dGVzXG4gICAqXG4gICAqICAtICoqYXJpYUhpZGRlbioqIOKAkyBge2Jvb2xlYW59YCDigJMgRW5hYmxlcy9kaXNhYmxlcyBhcmlhLWhpZGRlbiB0YWdzXG4gICAqICAtICoqYXJpYUNoZWNrZWQqKiDigJMgYHtib29sZWFufWAg4oCTIEVuYWJsZXMvZGlzYWJsZXMgYXJpYS1jaGVja2VkIHRhZ3NcbiAgICogIC0gKiphcmlhRGlzYWJsZWQqKiDigJMgYHtib29sZWFufWAg4oCTIEVuYWJsZXMvZGlzYWJsZXMgYXJpYS1kaXNhYmxlZCB0YWdzXG4gICAqICAtICoqYXJpYVJlcXVpcmVkKiog4oCTIGB7Ym9vbGVhbn1gIOKAkyBFbmFibGVzL2Rpc2FibGVzIGFyaWEtcmVxdWlyZWQgdGFnc1xuICAgKiAgLSAqKmFyaWFJbnZhbGlkKiog4oCTIGB7Ym9vbGVhbn1gIOKAkyBFbmFibGVzL2Rpc2FibGVzIGFyaWEtaW52YWxpZCB0YWdzXG4gICAqICAtICoqYXJpYU11bHRpbGluZSoqIOKAkyBge2Jvb2xlYW59YCDigJMgRW5hYmxlcy9kaXNhYmxlcyBhcmlhLW11bHRpbGluZSB0YWdzXG4gICAqICAtICoqYXJpYVZhbHVlKiog4oCTIGB7Ym9vbGVhbn1gIOKAkyBFbmFibGVzL2Rpc2FibGVzIGFyaWEtdmFsdWVtaW4sIGFyaWEtdmFsdWVtYXggYW5kIGFyaWEtdmFsdWVub3cgdGFnc1xuICAgKiAgLSAqKnRhYmluZGV4Kiog4oCTIGB7Ym9vbGVhbn1gIOKAkyBFbmFibGVzL2Rpc2FibGVzIHRhYmluZGV4IHRhZ3NcbiAgICogIC0gKipiaW5kS2V5cHJlc3MqKiDigJMgYHtib29sZWFufWAg4oCTIEVuYWJsZXMvZGlzYWJsZXMga2V5cHJlc3MgZXZlbnQgYmluZGluZyBvbiBgJmx0O2RpdiZndDtgIGFuZFxuICAgKiAgICBgJmx0O2xpJmd0O2AgZWxlbWVudHMgd2l0aCBuZy1jbGlja1xuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRW5hYmxlcy9kaXNhYmxlcyB2YXJpb3VzIEFSSUEgYXR0cmlidXRlc1xuICAgKi9cbiAgdGhpcy5jb25maWcgPSBmdW5jdGlvbihuZXdDb25maWcpIHtcbiAgICBjb25maWcgPSBhbmd1bGFyLmV4dGVuZChjb25maWcsIG5ld0NvbmZpZyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gd2F0Y2hFeHByKGF0dHJOYW1lLCBhcmlhQXR0ciwgbmVnYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRyKSB7XG4gICAgICB2YXIgYXJpYUNhbWVsTmFtZSA9IGF0dHIuJG5vcm1hbGl6ZShhcmlhQXR0cik7XG4gICAgICBpZiAoY29uZmlnW2FyaWFDYW1lbE5hbWVdICYmICFhdHRyW2FyaWFDYW1lbE5hbWVdKSB7XG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyW2F0dHJOYW1lXSwgZnVuY3Rpb24oYm9vbFZhbCkge1xuICAgICAgICAgIGlmIChuZWdhdGUpIHtcbiAgICAgICAgICAgIGJvb2xWYWwgPSAhYm9vbFZhbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbS5hdHRyKGFyaWFBdHRyLCBib29sVmFsKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2Mgc2VydmljZVxuICAgKiBAbmFtZSAkYXJpYVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogVGhlICRhcmlhIHNlcnZpY2UgY29udGFpbnMgaGVscGVyIG1ldGhvZHMgZm9yIGFwcGx5aW5nIGNvbW1vblxuICAgKiBbQVJJQV0oaHR0cDovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEvKSBhdHRyaWJ1dGVzIHRvIEhUTUwgZGlyZWN0aXZlcy5cbiAgICpcbiAgICogbmdBcmlhIGluamVjdHMgY29tbW9uIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlcyB0aGF0IHRlbGwgYXNzaXN0aXZlIHRlY2hub2xvZ2llcyB3aGVuIEhUTUxcbiAgICogZWxlbWVudHMgYXJlIGVuYWJsZWQsIHNlbGVjdGVkLCBoaWRkZW4sIGFuZCBtb3JlLiBUbyBzZWUgaG93IHRoaXMgaXMgcGVyZm9ybWVkIHdpdGggbmdBcmlhLFxuICAgKiBsZXQncyByZXZpZXcgYSBjb2RlIHNuaXBwZXQgZnJvbSBuZ0FyaWEgaXRzZWxmOlxuICAgKlxuICAgKmBgYGpzXG4gICAqIG5nQXJpYU1vZHVsZS5kaXJlY3RpdmUoJ25nRGlzYWJsZWQnLCBbJyRhcmlhJywgZnVuY3Rpb24oJGFyaWEpIHtcbiAgICogICByZXR1cm4gJGFyaWEuJCR3YXRjaEV4cHIoJ25nRGlzYWJsZWQnLCAnYXJpYS1kaXNhYmxlZCcpO1xuICAgKiB9XSlcbiAgICpgYGBcbiAgICogU2hvd24gYWJvdmUsIHRoZSBuZ0FyaWEgbW9kdWxlIGNyZWF0ZXMgYSBkaXJlY3RpdmUgd2l0aCB0aGUgc2FtZSBzaWduYXR1cmUgYXMgdGhlXG4gICAqIHRyYWRpdGlvbmFsIGBuZy1kaXNhYmxlZGAgZGlyZWN0aXZlLiBCdXQgdGhpcyBuZ0FyaWEgdmVyc2lvbiBpcyBkZWRpY2F0ZWQgdG9cbiAgICogc29sZWx5IG1hbmFnaW5nIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlcy4gVGhlIGludGVybmFsIGAkYXJpYWAgc2VydmljZSBpcyB1c2VkIHRvIHdhdGNoIHRoZVxuICAgKiBib29sZWFuIGF0dHJpYnV0ZSBgbmdEaXNhYmxlZGAuIElmIGl0IGhhcyBub3QgYmVlbiBleHBsaWNpdGx5IHNldCBieSB0aGUgZGV2ZWxvcGVyLFxuICAgKiBgYXJpYS1kaXNhYmxlZGAgaXMgaW5qZWN0ZWQgYXMgYW4gYXR0cmlidXRlIHdpdGggaXRzIHZhbHVlIHN5bmNocm9uaXplZCB0byB0aGUgdmFsdWUgaW5cbiAgICogYG5nRGlzYWJsZWRgLlxuICAgKlxuICAgKiBCZWNhdXNlIG5nQXJpYSBob29rcyBpbnRvIHRoZSBgbmctZGlzYWJsZWRgIGRpcmVjdGl2ZSwgZGV2ZWxvcGVycyBkbyBub3QgaGF2ZSB0byBkb1xuICAgKiBhbnl0aGluZyB0byBlbmFibGUgdGhpcyBmZWF0dXJlLiBUaGUgYGFyaWEtZGlzYWJsZWRgIGF0dHJpYnV0ZSBpcyBhdXRvbWF0aWNhbGx5IG1hbmFnZWRcbiAgICogc2ltcGx5IGFzIGEgc2lsZW50IHNpZGUtZWZmZWN0IG9mIHVzaW5nIGBuZy1kaXNhYmxlZGAgd2l0aCB0aGUgbmdBcmlhIG1vZHVsZS5cbiAgICpcbiAgICogVGhlIGZ1bGwgbGlzdCBvZiBkaXJlY3RpdmVzIHRoYXQgaW50ZXJmYWNlIHdpdGggbmdBcmlhOlxuICAgKiAqICoqbmdNb2RlbCoqXG4gICAqICogKipuZ1Nob3cqKlxuICAgKiAqICoqbmdIaWRlKipcbiAgICogKiAqKm5nQ2xpY2sqKlxuICAgKiAqICoqbmdEYmxjbGljayoqXG4gICAqICogKipuZ01lc3NhZ2VzKipcbiAgICogKiAqKm5nRGlzYWJsZWQqKlxuICAgKlxuICAgKiBSZWFkIHRoZSB7QGxpbmsgZ3VpZGUvYWNjZXNzaWJpbGl0eSBuZ0FyaWEgRGV2ZWxvcGVyIEd1aWRlfSBmb3IgYSB0aG9yb3VnaCBleHBsYW5hdGlvbiBvZiBlYWNoXG4gICAqIGRpcmVjdGl2ZS5cbiAgICpcbiAgICpcbiAgICogIyMgRGVwZW5kZW5jaWVzXG4gICAqIFJlcXVpcmVzIHRoZSB7QGxpbmsgbmdBcmlhfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbmZpZzogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIHJldHVybiBjb25maWdba2V5XTtcbiAgICAgIH0sXG4gICAgICAkJHdhdGNoRXhwcjogd2F0Y2hFeHByXG4gICAgfTtcbiAgfTtcbn1cblxuXG5uZ0FyaWFNb2R1bGUuZGlyZWN0aXZlKCduZ1Nob3cnLCBbJyRhcmlhJywgZnVuY3Rpb24oJGFyaWEpIHtcbiAgcmV0dXJuICRhcmlhLiQkd2F0Y2hFeHByKCduZ1Nob3cnLCAnYXJpYS1oaWRkZW4nLCB0cnVlKTtcbn1dKVxuLmRpcmVjdGl2ZSgnbmdIaWRlJywgWyckYXJpYScsIGZ1bmN0aW9uKCRhcmlhKSB7XG4gIHJldHVybiAkYXJpYS4kJHdhdGNoRXhwcignbmdIaWRlJywgJ2FyaWEtaGlkZGVuJywgZmFsc2UpO1xufV0pXG4uZGlyZWN0aXZlKCduZ01vZGVsJywgWyckYXJpYScsIGZ1bmN0aW9uKCRhcmlhKSB7XG5cbiAgZnVuY3Rpb24gc2hvdWxkQXR0YWNoQXR0cihhdHRyLCBub3JtYWxpemVkQXR0ciwgZWxlbSkge1xuICAgIHJldHVybiAkYXJpYS5jb25maWcobm9ybWFsaXplZEF0dHIpICYmICFlbGVtLmF0dHIoYXR0cik7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTaGFwZShhdHRyLCBlbGVtKSB7XG4gICAgdmFyIHR5cGUgPSBhdHRyLnR5cGUsXG4gICAgICAgIHJvbGUgPSBhdHRyLnJvbGU7XG5cbiAgICByZXR1cm4gKCh0eXBlIHx8IHJvbGUpID09PSAnY2hlY2tib3gnIHx8IHJvbGUgPT09ICdtZW51aXRlbWNoZWNrYm94JykgPyAnY2hlY2tib3gnIDpcbiAgICAgICAgICAgKCh0eXBlIHx8IHJvbGUpID09PSAncmFkaW8nICAgIHx8IHJvbGUgPT09ICdtZW51aXRlbXJhZGlvJykgPyAncmFkaW8nIDpcbiAgICAgICAgICAgKHR5cGUgPT09ICdyYW5nZScgICAgICAgICAgICAgIHx8IHJvbGUgPT09ICdwcm9ncmVzc2JhcicgfHwgcm9sZSA9PT0gJ3NsaWRlcicpID8gJ3JhbmdlJyA6XG4gICAgICAgICAgICh0eXBlIHx8IHJvbGUpID09PSAndGV4dGJveCcgICB8fCBlbGVtWzBdLm5vZGVOYW1lID09PSAnVEVYVEFSRUEnID8gJ211bHRpbGluZScgOiAnJztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRyLCBuZ01vZGVsKSB7XG4gICAgICB2YXIgc2hhcGUgPSBnZXRTaGFwZShhdHRyLCBlbGVtKTtcbiAgICAgIHZhciBuZWVkc1RhYkluZGV4ID0gc2hvdWxkQXR0YWNoQXR0cigndGFiaW5kZXgnLCAndGFiaW5kZXgnLCBlbGVtKTtcblxuICAgICAgZnVuY3Rpb24gbmdBcmlhV2F0Y2hNb2RlbFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gbmdNb2RlbC4kbW9kZWxWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0UmFkaW9SZWFjdGlvbigpIHtcbiAgICAgICAgaWYgKG5lZWRzVGFiSW5kZXgpIHtcbiAgICAgICAgICBuZWVkc1RhYkluZGV4ID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQXJpYVJhZGlvUmVhY3Rpb24obmV3VmFsKSB7XG4gICAgICAgICAgICB2YXIgYm9vbFZhbCA9IG5ld1ZhbCA9PT0gYXR0ci52YWx1ZTtcbiAgICAgICAgICAgIGVsZW0uYXR0cignYXJpYS1jaGVja2VkJywgYm9vbFZhbCk7XG4gICAgICAgICAgICBlbGVtLmF0dHIoJ3RhYmluZGV4JywgMCAtICFib29sVmFsKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0FyaWFSYWRpb1JlYWN0aW9uKG5ld1ZhbCkge1xuICAgICAgICAgICAgZWxlbS5hdHRyKCdhcmlhLWNoZWNrZWQnLCBuZXdWYWwgPT09IGF0dHIudmFsdWUpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbmdBcmlhQ2hlY2tib3hSZWFjdGlvbihuZXdWYWwpIHtcbiAgICAgICAgZWxlbS5hdHRyKCdhcmlhLWNoZWNrZWQnLCAhIW5ld1ZhbCk7XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAoc2hhcGUpIHtcbiAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgaWYgKHNob3VsZEF0dGFjaEF0dHIoJ2FyaWEtY2hlY2tlZCcsICdhcmlhQ2hlY2tlZCcsIGVsZW0pKSB7XG4gICAgICAgICAgICBzY29wZS4kd2F0Y2gobmdBcmlhV2F0Y2hNb2RlbFZhbHVlLCBzaGFwZSA9PT0gJ3JhZGlvJyA/XG4gICAgICAgICAgICAgICAgZ2V0UmFkaW9SZWFjdGlvbigpIDogbmdBcmlhQ2hlY2tib3hSZWFjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyYW5nZSc6XG4gICAgICAgICAgaWYgKCRhcmlhLmNvbmZpZygnYXJpYVZhbHVlJykpIHtcbiAgICAgICAgICAgIGlmIChhdHRyLm1pbiAmJiAhZWxlbS5hdHRyKCdhcmlhLXZhbHVlbWluJykpIHtcbiAgICAgICAgICAgICAgZWxlbS5hdHRyKCdhcmlhLXZhbHVlbWluJywgYXR0ci5taW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF0dHIubWF4ICYmICFlbGVtLmF0dHIoJ2FyaWEtdmFsdWVtYXgnKSkge1xuICAgICAgICAgICAgICBlbGVtLmF0dHIoJ2FyaWEtdmFsdWVtYXgnLCBhdHRyLm1heCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVsZW0uYXR0cignYXJpYS12YWx1ZW5vdycpKSB7XG4gICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChuZ0FyaWFXYXRjaE1vZGVsVmFsdWUsIGZ1bmN0aW9uIG5nQXJpYVZhbHVlTm93UmVhY3Rpb24obmV3VmFsKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5hdHRyKCdhcmlhLXZhbHVlbm93JywgbmV3VmFsKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtdWx0aWxpbmUnOlxuICAgICAgICAgIGlmIChzaG91bGRBdHRhY2hBdHRyKCdhcmlhLW11bHRpbGluZScsICdhcmlhTXVsdGlsaW5lJywgZWxlbSkpIHtcbiAgICAgICAgICAgIGVsZW0uYXR0cignYXJpYS1tdWx0aWxpbmUnLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZWVkc1RhYkluZGV4KSB7XG4gICAgICAgIGVsZW0uYXR0cigndGFiaW5kZXgnLCAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5nTW9kZWwuJHZhbGlkYXRvcnMucmVxdWlyZWQgJiYgc2hvdWxkQXR0YWNoQXR0cignYXJpYS1yZXF1aXJlZCcsICdhcmlhUmVxdWlyZWQnLCBlbGVtKSkge1xuICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gbmdBcmlhUmVxdWlyZWRXYXRjaCgpIHtcbiAgICAgICAgICByZXR1cm4gbmdNb2RlbC4kZXJyb3IucmVxdWlyZWQ7XG4gICAgICAgIH0sIGZ1bmN0aW9uIG5nQXJpYVJlcXVpcmVkUmVhY3Rpb24obmV3VmFsKSB7XG4gICAgICAgICAgZWxlbS5hdHRyKCdhcmlhLXJlcXVpcmVkJywgISFuZXdWYWwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNob3VsZEF0dGFjaEF0dHIoJ2FyaWEtaW52YWxpZCcsICdhcmlhSW52YWxpZCcsIGVsZW0pKSB7XG4gICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBuZ0FyaWFJbnZhbGlkV2F0Y2goKSB7XG4gICAgICAgICAgcmV0dXJuIG5nTW9kZWwuJGludmFsaWQ7XG4gICAgICAgIH0sIGZ1bmN0aW9uIG5nQXJpYUludmFsaWRSZWFjdGlvbihuZXdWYWwpIHtcbiAgICAgICAgICBlbGVtLmF0dHIoJ2FyaWEtaW52YWxpZCcsICEhbmV3VmFsKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufV0pXG4uZGlyZWN0aXZlKCduZ0Rpc2FibGVkJywgWyckYXJpYScsIGZ1bmN0aW9uKCRhcmlhKSB7XG4gIHJldHVybiAkYXJpYS4kJHdhdGNoRXhwcignbmdEaXNhYmxlZCcsICdhcmlhLWRpc2FibGVkJyk7XG59XSlcbi5kaXJlY3RpdmUoJ25nTWVzc2FnZXMnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNZXNzYWdlcycsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHIsIG5nTWVzc2FnZXMpIHtcbiAgICAgIGlmICghZWxlbS5hdHRyKCdhcmlhLWxpdmUnKSkge1xuICAgICAgICBlbGVtLmF0dHIoJ2FyaWEtbGl2ZScsICdhc3NlcnRpdmUnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59KVxuLmRpcmVjdGl2ZSgnbmdDbGljaycsWyckYXJpYScsICckcGFyc2UnLCBmdW5jdGlvbigkYXJpYSwgJHBhcnNlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbGVtLCBhdHRyKSB7XG4gICAgICB2YXIgZm4gPSAkcGFyc2UoYXR0ci5uZ0NsaWNrLCAvKiBpbnRlcmNlcHRvckZuICovIG51bGwsIC8qIGV4cGVuc2l2ZUNoZWNrcyAqLyB0cnVlKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cikge1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzTm9kZU9uZU9mKGVsZW0sIG5vZGVUeXBlQXJyYXkpIHtcbiAgICAgICAgICBpZiAobm9kZVR5cGVBcnJheS5pbmRleE9mKGVsZW1bMF0ubm9kZU5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRhcmlhLmNvbmZpZygndGFiaW5kZXgnKSAmJiAhZWxlbS5hdHRyKCd0YWJpbmRleCcpKSB7XG4gICAgICAgICAgZWxlbS5hdHRyKCd0YWJpbmRleCcsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRhcmlhLmNvbmZpZygnYmluZEtleXByZXNzJykgJiYgIWF0dHIubmdLZXlwcmVzcyAmJiBpc05vZGVPbmVPZihlbGVtLCBbJ0RJVicsICdMSSddKSkge1xuICAgICAgICAgIGVsZW0ub24oJ2tleXByZXNzJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzMiB8fCBldmVudC5rZXlDb2RlID09PSAxMykge1xuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgZm4oc2NvcGUsIHsgJGV2ZW50OiBldmVudCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XSlcbi5kaXJlY3RpdmUoJ25nRGJsY2xpY2snLCBbJyRhcmlhJywgZnVuY3Rpb24oJGFyaWEpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRyKSB7XG4gICAgaWYgKCRhcmlhLmNvbmZpZygndGFiaW5kZXgnKSAmJiAhZWxlbS5hdHRyKCd0YWJpbmRleCcpKSB7XG4gICAgICBlbGVtLmF0dHIoJ3RhYmluZGV4JywgMCk7XG4gICAgfVxuICB9O1xufV0pO1xuXG5cbn0pKHdpbmRvdywgd2luZG93LmFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuMy4xM1xuICogKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiAqIExpY2Vuc2U6IE1JVFxuICovXG4oZnVuY3Rpb24od2luZG93LCBhbmd1bGFyLCB1bmRlZmluZWQpIHsndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgbmdNZXNzYWdlc1xuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhlIGBuZ01lc3NhZ2VzYCBtb2R1bGUgcHJvdmlkZXMgZW5oYW5jZWQgc3VwcG9ydCBmb3IgZGlzcGxheWluZyBtZXNzYWdlcyB3aXRoaW4gdGVtcGxhdGVzXG4gKiAodHlwaWNhbGx5IHdpdGhpbiBmb3JtcyBvciB3aGVuIHJlbmRlcmluZyBtZXNzYWdlIG9iamVjdHMgdGhhdCByZXR1cm4ga2V5L3ZhbHVlIGRhdGEpLlxuICogSW5zdGVhZCBvZiByZWx5aW5nIG9uIEphdmFTY3JpcHQgY29kZSBhbmQvb3IgY29tcGxleCBuZy1pZiBzdGF0ZW1lbnRzIHdpdGhpbiB5b3VyIGZvcm0gdGVtcGxhdGUgdG9cbiAqIHNob3cgYW5kIGhpZGUgZXJyb3IgbWVzc2FnZXMgc3BlY2lmaWMgdG8gdGhlIHN0YXRlIG9mIGFuIGlucHV0IGZpZWxkLCB0aGUgYG5nTWVzc2FnZXNgIGFuZFxuICogYG5nTWVzc2FnZWAgZGlyZWN0aXZlcyBhcmUgZGVzaWduZWQgdG8gaGFuZGxlIHRoZSBjb21wbGV4aXR5LCBpbmhlcml0YW5jZSBhbmQgcHJpb3JpdHlcbiAqIHNlcXVlbmNpbmcgYmFzZWQgb24gdGhlIG9yZGVyIG9mIGhvdyB0aGUgbWVzc2FnZXMgYXJlIGRlZmluZWQgaW4gdGhlIHRlbXBsYXRlLlxuICpcbiAqIEN1cnJlbnRseSwgdGhlIG5nTWVzc2FnZXMgbW9kdWxlIG9ubHkgY29udGFpbnMgdGhlIGNvZGUgZm9yIHRoZSBgbmdNZXNzYWdlc2BcbiAqIGFuZCBgbmdNZXNzYWdlYCBkaXJlY3RpdmVzLlxuICpcbiAqICMgVXNhZ2VcbiAqIFRoZSBgbmdNZXNzYWdlc2AgZGlyZWN0aXZlIGxpc3RlbnMgb24gYSBrZXkvdmFsdWUgY29sbGVjdGlvbiB3aGljaCBpcyBzZXQgb24gdGhlIG5nTWVzc2FnZXMgYXR0cmlidXRlLlxuICogU2luY2UgdGhlIHtAbGluayBuZ01vZGVsIG5nTW9kZWx9IGRpcmVjdGl2ZSBleHBvc2VzIGFuIGAkZXJyb3JgIG9iamVjdCwgdGhpcyBlcnJvciBvYmplY3QgY2FuIGJlXG4gKiB1c2VkIHdpdGggYG5nTWVzc2FnZXNgIHRvIGRpc3BsYXkgY29udHJvbCBlcnJvciBtZXNzYWdlcyBpbiBhbiBlYXNpZXIgd2F5IHRoYW4gd2l0aCBqdXN0IHJlZ3VsYXIgYW5ndWxhclxuICogdGVtcGxhdGUgZGlyZWN0aXZlcy5cbiAqXG4gKiBgYGBodG1sXG4gKiA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiZmllbGRcIiBuYW1lPVwibXlGaWVsZFwiIHJlcXVpcmVkIG1pbmxlbmd0aD1cIjVcIiAvPlxuICogICA8ZGl2IG5nLW1lc3NhZ2VzPVwibXlGb3JtLm15RmllbGQuJGVycm9yXCI+XG4gKiAgICAgPGRpdiBuZy1tZXNzYWdlPVwicmVxdWlyZWRcIj5Zb3UgZGlkIG5vdCBlbnRlciBhIGZpZWxkPC9kaXY+XG4gKiAgICAgPGRpdiBuZy1tZXNzYWdlPVwibWlubGVuZ3RoXCI+VGhlIHZhbHVlIGVudGVyZWQgaXMgdG9vIHNob3J0PC9kaXY+XG4gKiAgIDwvZGl2PlxuICogPC9mb3JtPlxuICogYGBgXG4gKlxuICogTm93IHdoYXRldmVyIGtleS92YWx1ZSBlbnRyaWVzIGFyZSBwcmVzZW50IHdpdGhpbiB0aGUgcHJvdmlkZWQgb2JqZWN0IChpbiB0aGlzIGNhc2UgYCRlcnJvcmApIHRoZW5cbiAqIHRoZSBuZ01lc3NhZ2VzIGRpcmVjdGl2ZSB3aWxsIHJlbmRlciB0aGUgaW5uZXIgZmlyc3QgbmdNZXNzYWdlIGRpcmVjdGl2ZSAoZGVwZW5kaW5nIGlmIHRoZSBrZXkgdmFsdWVzXG4gKiBtYXRjaCB0aGUgYXR0cmlidXRlIHZhbHVlIHByZXNlbnQgb24gZWFjaCBuZ01lc3NhZ2UgZGlyZWN0aXZlKS4gSW4gb3RoZXIgd29yZHMsIGlmIHlvdXIgZXJyb3JzXG4gKiBvYmplY3QgY29udGFpbnMgdGhlIGZvbGxvd2luZyBkYXRhOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIDwhLS0ga2VlcCBpbiBtaW5kIHRoYXQgbmdNb2RlbCBhdXRvbWF0aWNhbGx5IHNldHMgdGhlc2UgZXJyb3IgZmxhZ3MgLS0+XG4gKiBteUZpZWxkLiRlcnJvciA9IHsgbWlubGVuZ3RoIDogdHJ1ZSwgcmVxdWlyZWQgOiBmYWxzZSB9O1xuICogYGBgXG4gKlxuICogVGhlbiB0aGUgYHJlcXVpcmVkYCBtZXNzYWdlIHdpbGwgYmUgZGlzcGxheWVkIGZpcnN0LiBXaGVuIHJlcXVpcmVkIGlzIGZhbHNlIHRoZW4gdGhlIGBtaW5sZW5ndGhgIG1lc3NhZ2VcbiAqIHdpbGwgYmUgZGlzcGxheWVkIHJpZ2h0IGFmdGVyIChzaW5jZSB0aGVzZSBtZXNzYWdlcyBhcmUgb3JkZXJlZCB0aGlzIHdheSBpbiB0aGUgdGVtcGxhdGUgSFRNTCBjb2RlKS5cbiAqIFRoZSBwcmlvcml0aXphdGlvbiBvZiBlYWNoIG1lc3NhZ2UgaXMgZGV0ZXJtaW5lZCBieSB3aGF0IG9yZGVyIHRoZXkncmUgcHJlc2VudCBpbiB0aGUgRE9NLlxuICogVGhlcmVmb3JlLCBpbnN0ZWFkIG9mIGhhdmluZyBjdXN0b20gSmF2YVNjcmlwdCBjb2RlIGRldGVybWluZSB0aGUgcHJpb3JpdHkgb2Ygd2hhdCBlcnJvcnMgYXJlXG4gKiBwcmVzZW50IGJlZm9yZSBvdGhlcnMsIHRoZSBwcmVzZW50YXRpb24gb2YgdGhlIGVycm9ycyBhcmUgaGFuZGxlZCB3aXRoaW4gdGhlIHRlbXBsYXRlLlxuICpcbiAqIEJ5IGRlZmF1bHQsIG5nTWVzc2FnZXMgd2lsbCBvbmx5IGRpc3BsYXkgb25lIGVycm9yIGF0IGEgdGltZS4gSG93ZXZlciwgaWYgeW91IHdpc2ggdG8gZGlzcGxheSBhbGxcbiAqIG1lc3NhZ2VzIHRoZW4gdGhlIGBuZy1tZXNzYWdlcy1tdWx0aXBsZWAgYXR0cmlidXRlIGZsYWcgY2FuIGJlIHVzZWQgb24gdGhlIGVsZW1lbnQgY29udGFpbmluZyB0aGVcbiAqIG5nTWVzc2FnZXMgZGlyZWN0aXZlIHRvIG1ha2UgdGhpcyBoYXBwZW4uXG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1tZXNzYWdlcz1cIm15Rm9ybS5teUZpZWxkLiRlcnJvclwiIG5nLW1lc3NhZ2VzLW11bHRpcGxlPi4uLjwvZGl2PlxuICogYGBgXG4gKlxuICogIyMgUmV1c2luZyBhbmQgT3ZlcnJpZGluZyBNZXNzYWdlc1xuICogSW4gYWRkaXRpb24gdG8gcHJpb3JpdGl6YXRpb24sIG5nTWVzc2FnZXMgYWxzbyBhbGxvd3MgZm9yIGluY2x1ZGluZyBtZXNzYWdlcyBmcm9tIGEgcmVtb3RlIG9yIGFuIGlubGluZVxuICogdGVtcGxhdGUuIFRoaXMgYWxsb3dzIGZvciBnZW5lcmljIGNvbGxlY3Rpb24gb2YgbWVzc2FnZXMgdG8gYmUgcmV1c2VkIGFjcm9zcyBtdWx0aXBsZSBwYXJ0cyBvZiBhblxuICogYXBwbGljYXRpb24uXG4gKlxuICogYGBgaHRtbFxuICogPHNjcmlwdCB0eXBlPVwidGV4dC9uZy10ZW1wbGF0ZVwiIGlkPVwiZXJyb3ItbWVzc2FnZXNcIj5cbiAqICAgPGRpdiBuZy1tZXNzYWdlPVwicmVxdWlyZWRcIj5UaGlzIGZpZWxkIGlzIHJlcXVpcmVkPC9kaXY+XG4gKiAgIDxkaXYgbmctbWVzc2FnZT1cIm1pbmxlbmd0aFwiPlRoaXMgZmllbGQgaXMgdG9vIHNob3J0PC9kaXY+XG4gKiA8L3NjcmlwdD5cbiAqIDxkaXYgbmctbWVzc2FnZXM9XCJteUZvcm0ubXlGaWVsZC4kZXJyb3JcIiBuZy1tZXNzYWdlcy1pbmNsdWRlPVwiZXJyb3ItbWVzc2FnZXNcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEhvd2V2ZXIsIGluY2x1ZGluZyBnZW5lcmljIG1lc3NhZ2VzIG1heSBub3QgYmUgdXNlZnVsIGVub3VnaCB0byBtYXRjaCBhbGwgaW5wdXQgZmllbGRzLCB0aGVyZWZvcmUsXG4gKiBgbmdNZXNzYWdlc2AgcHJvdmlkZXMgdGhlIGFiaWxpdHkgdG8gb3ZlcnJpZGUgbWVzc2FnZXMgZGVmaW5lZCBpbiB0aGUgcmVtb3RlIHRlbXBsYXRlIGJ5IHJlZGVmaW5pbmdcbiAqIHRoZW4gd2l0aGluIHRoZSBkaXJlY3RpdmUgY29udGFpbmVyLlxuICpcbiAqIGBgYGh0bWxcbiAqIDwhLS0gYSBnZW5lcmljIHRlbXBsYXRlIG9mIGVycm9yIG1lc3NhZ2VzIGtub3duIGFzIFwibXktY3VzdG9tLW1lc3NhZ2VzXCIgLS0+XG4gKiA8c2NyaXB0IHR5cGU9XCJ0ZXh0L25nLXRlbXBsYXRlXCIgaWQ9XCJteS1jdXN0b20tbWVzc2FnZXNcIj5cbiAqICAgPGRpdiBuZy1tZXNzYWdlPVwicmVxdWlyZWRcIj5UaGlzIGZpZWxkIGlzIHJlcXVpcmVkPC9kaXY+XG4gKiAgIDxkaXYgbmctbWVzc2FnZT1cIm1pbmxlbmd0aFwiPlRoaXMgZmllbGQgaXMgdG9vIHNob3J0PC9kaXY+XG4gKiA8L3NjcmlwdD5cbiAqXG4gKiA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgIDxpbnB1dCB0eXBlPVwiZW1haWxcIlxuICogICAgICAgICAgaWQ9XCJlbWFpbFwiXG4gKiAgICAgICAgICBuYW1lPVwibXlFbWFpbFwiXG4gKiAgICAgICAgICBuZy1tb2RlbD1cImVtYWlsXCJcbiAqICAgICAgICAgIG1pbmxlbmd0aD1cIjVcIlxuICogICAgICAgICAgcmVxdWlyZWQgLz5cbiAqXG4gKiAgIDxkaXYgbmctbWVzc2FnZXM9XCJteUZvcm0ubXlFbWFpbC4kZXJyb3JcIiBuZy1tZXNzYWdlcy1pbmNsdWRlPVwibXktY3VzdG9tLW1lc3NhZ2VzXCI+XG4gKiAgICAgPCEtLSB0aGlzIHJlcXVpcmVkIG1lc3NhZ2UgaGFzIG92ZXJyaWRkZW4gdGhlIHRlbXBsYXRlIG1lc3NhZ2UgLS0+XG4gKiAgICAgPGRpdiBuZy1tZXNzYWdlPVwicmVxdWlyZWRcIj5Zb3UgZGlkIG5vdCBlbnRlciB5b3VyIGVtYWlsIGFkZHJlc3M8L2Rpdj5cbiAqXG4gKiAgICAgPCEtLSB0aGlzIGlzIGEgYnJhbmQgbmV3IG1lc3NhZ2UgYW5kIHdpbGwgYXBwZWFyIGxhc3QgaW4gdGhlIHByaW9yaXRpemF0aW9uIC0tPlxuICogICAgIDxkaXYgbmctbWVzc2FnZT1cImVtYWlsXCI+WW91ciBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQ8L2Rpdj5cbiAqICAgPC9kaXY+XG4gKiA8L2Zvcm0+XG4gKiBgYGBcbiAqXG4gKiBJbiB0aGUgZXhhbXBsZSBIVE1MIGNvZGUgYWJvdmUgdGhlIG1lc3NhZ2UgdGhhdCBpcyBzZXQgb24gcmVxdWlyZWQgd2lsbCBvdmVycmlkZSB0aGUgY29ycmVzcG9uZGluZ1xuICogcmVxdWlyZWQgbWVzc2FnZSBkZWZpbmVkIHdpdGhpbiB0aGUgcmVtb3RlIHRlbXBsYXRlLiBUaGVyZWZvcmUsIHdpdGggcGFydGljdWxhciBpbnB1dCBmaWVsZHMgKHN1Y2hcbiAqIGVtYWlsIGFkZHJlc3NlcywgZGF0ZSBmaWVsZHMsIGF1dG9jb21wbGV0ZSBpbnB1dHMsIGV0Yy4uLiksIHNwZWNpYWxpemVkIGVycm9yIG1lc3NhZ2VzIGNhbiBiZSBhcHBsaWVkXG4gKiB3aGlsZSBtb3JlIGdlbmVyaWMgbWVzc2FnZXMgY2FuIGJlIHVzZWQgdG8gaGFuZGxlIG90aGVyLCBtb3JlIGdlbmVyYWwgaW5wdXQgZXJyb3JzLlxuICpcbiAqICMjIEFuaW1hdGlvbnNcbiAqIElmIHRoZSBgbmdBbmltYXRlYCBtb2R1bGUgaXMgYWN0aXZlIHdpdGhpbiB0aGUgYXBwbGljYXRpb24gdGhlbiBib3RoIHRoZSBgbmdNZXNzYWdlc2AgYW5kXG4gKiBgbmdNZXNzYWdlYCBkaXJlY3RpdmVzIHdpbGwgdHJpZ2dlciBhbmltYXRpb25zIHdoZW5ldmVyIGFueSBtZXNzYWdlcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWRcbiAqIGZyb20gdGhlIERPTSBieSB0aGUgYG5nTWVzc2FnZXNgIGRpcmVjdGl2ZS5cbiAqXG4gKiBXaGVuZXZlciB0aGUgYG5nTWVzc2FnZXNgIGRpcmVjdGl2ZSBjb250YWlucyBvbmUgb3IgbW9yZSB2aXNpYmxlIG1lc3NhZ2VzIHRoZW4gdGhlIGAubmctYWN0aXZlYCBDU1NcbiAqIGNsYXNzIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVsZW1lbnQuIFRoZSBgLm5nLWluYWN0aXZlYCBDU1MgY2xhc3Mgd2lsbCBiZSBhcHBsaWVkIHdoZW4gdGhlcmUgYXJlIG5vXG4gKiBhbmltYXRpb25zIHByZXNlbnQuIFRoZXJlZm9yZSwgQ1NTIHRyYW5zaXRpb25zIGFuZCBrZXlmcmFtZXMgYXMgd2VsbCBhcyBKYXZhU2NyaXB0IGFuaW1hdGlvbnMgY2FuXG4gKiBob29rIGludG8gdGhlIGFuaW1hdGlvbnMgd2hlbmV2ZXIgdGhlc2UgY2xhc3NlcyBhcmUgYWRkZWQvcmVtb3ZlZC5cbiAqXG4gKiBMZXQncyBzYXkgdGhhdCBvdXIgSFRNTCBjb2RlIGZvciBvdXIgbWVzc2FnZXMgY29udGFpbmVyIGxvb2tzIGxpa2Ugc286XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1tZXNzYWdlcz1cIm15TWVzc2FnZXNcIiBjbGFzcz1cIm15LW1lc3NhZ2VzXCI+XG4gKiAgIDxkaXYgbmctbWVzc2FnZT1cImFsZXJ0XCIgY2xhc3M9XCJzb21lLW1lc3NhZ2VcIj4uLi48L2Rpdj5cbiAqICAgPGRpdiBuZy1tZXNzYWdlPVwiZmFpbFwiIGNsYXNzPVwic29tZS1tZXNzYWdlXCI+Li4uPC9kaXY+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIFRoZW4gdGhlIENTUyBhbmltYXRpb24gY29kZSBmb3IgdGhlIG1lc3NhZ2UgY29udGFpbmVyIGxvb2tzIGxpa2Ugc286XG4gKlxuICogYGBgY3NzXG4gKiAubXktbWVzc2FnZXMge1xuICogICB0cmFuc2l0aW9uOjFzIGxpbmVhciBhbGw7XG4gKiB9XG4gKiAubXktbWVzc2FnZXMubmctYWN0aXZlIHtcbiAqICAgLy8gbWVzc2FnZXMgYXJlIHZpc2libGVcbiAqIH1cbiAqIC5teS1tZXNzYWdlcy5uZy1pbmFjdGl2ZSB7XG4gKiAgIC8vIG1lc3NhZ2VzIGFyZSBoaWRkZW5cbiAqIH1cbiAqIGBgYFxuICpcbiAqIFdoZW5ldmVyIGFuIGlubmVyIG1lc3NhZ2UgaXMgYXR0YWNoZWQgKGJlY29tZXMgdmlzaWJsZSkgb3IgcmVtb3ZlZCAoYmVjb21lcyBoaWRkZW4pIHRoZW4gdGhlIGVudGVyXG4gKiBhbmQgbGVhdmUgYW5pbWF0aW9uIGlzIHRyaWdnZXJlZCBmb3IgZWFjaCBwYXJ0aWN1bGFyIGVsZW1lbnQgYm91bmQgdG8gdGhlIGBuZ01lc3NhZ2VgIGRpcmVjdGl2ZS5cbiAqXG4gKiBUaGVyZWZvcmUsIHRoZSBDU1MgY29kZSBmb3IgdGhlIGlubmVyIG1lc3NhZ2VzIGxvb2tzIGxpa2Ugc286XG4gKlxuICogYGBgY3NzXG4gKiAuc29tZS1tZXNzYWdlIHtcbiAqICAgdHJhbnNpdGlvbjoxcyBsaW5lYXIgYWxsO1xuICogfVxuICpcbiAqIC5zb21lLW1lc3NhZ2UubmctZW50ZXIge31cbiAqIC5zb21lLW1lc3NhZ2UubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHt9XG4gKlxuICogLnNvbWUtbWVzc2FnZS5uZy1sZWF2ZSB7fVxuICogLnNvbWUtbWVzc2FnZS5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge31cbiAqIGBgYFxuICpcbiAqIHtAbGluayBuZ0FuaW1hdGUgQ2xpY2sgaGVyZX0gdG8gbGVhcm4gaG93IHRvIHVzZSBKYXZhU2NyaXB0IGFuaW1hdGlvbnMgb3IgdG8gbGVhcm4gbW9yZSBhYm91dCBuZ0FuaW1hdGUuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCduZ01lc3NhZ2VzJywgW10pXG5cbiAgIC8qKlxuICAgICogQG5nZG9jIGRpcmVjdGl2ZVxuICAgICogQG1vZHVsZSBuZ01lc3NhZ2VzXG4gICAgKiBAbmFtZSBuZ01lc3NhZ2VzXG4gICAgKiBAcmVzdHJpY3QgQUVcbiAgICAqXG4gICAgKiBAZGVzY3JpcHRpb25cbiAgICAqIGBuZ01lc3NhZ2VzYCBpcyBhIGRpcmVjdGl2ZSB0aGF0IGlzIGRlc2lnbmVkIHRvIHNob3cgYW5kIGhpZGUgbWVzc2FnZXMgYmFzZWQgb24gdGhlIHN0YXRlXG4gICAgKiBvZiBhIGtleS92YWx1ZSBvYmplY3QgdGhhdCBpdCBsaXN0ZW5zIG9uLiBUaGUgZGlyZWN0aXZlIGl0c2VsZiBjb21wbGltZW50cyBlcnJvciBtZXNzYWdlXG4gICAgKiByZXBvcnRpbmcgd2l0aCB0aGUgYG5nTW9kZWxgICRlcnJvciBvYmplY3QgKHdoaWNoIHN0b3JlcyBhIGtleS92YWx1ZSBzdGF0ZSBvZiB2YWxpZGF0aW9uIGVycm9ycykuXG4gICAgKlxuICAgICogYG5nTWVzc2FnZXNgIG1hbmFnZXMgdGhlIHN0YXRlIG9mIGludGVybmFsIG1lc3NhZ2VzIHdpdGhpbiBpdHMgY29udGFpbmVyIGVsZW1lbnQuIFRoZSBpbnRlcm5hbFxuICAgICogbWVzc2FnZXMgdXNlIHRoZSBgbmdNZXNzYWdlYCBkaXJlY3RpdmUgYW5kIHdpbGwgYmUgaW5zZXJ0ZWQvcmVtb3ZlZCBmcm9tIHRoZSBwYWdlIGRlcGVuZGluZ1xuICAgICogb24gaWYgdGhleSdyZSBwcmVzZW50IHdpdGhpbiB0aGUga2V5L3ZhbHVlIG9iamVjdC4gQnkgZGVmYXVsdCwgb25seSBvbmUgbWVzc2FnZSB3aWxsIGJlIGRpc3BsYXllZFxuICAgICogYXQgYSB0aW1lIGFuZCB0aGlzIGRlcGVuZHMgb24gdGhlIHByaW9yaXRpemF0aW9uIG9mIHRoZSBtZXNzYWdlcyB3aXRoaW4gdGhlIHRlbXBsYXRlLiAoVGhpcyBjYW5cbiAgICAqIGJlIGNoYW5nZWQgYnkgdXNpbmcgdGhlIG5nLW1lc3NhZ2VzLW11bHRpcGxlIG9uIHRoZSBkaXJlY3RpdmUgY29udGFpbmVyLilcbiAgICAqXG4gICAgKiBBIHJlbW90ZSB0ZW1wbGF0ZSBjYW4gYWxzbyBiZSB1c2VkIHRvIHByb21vdGUgbWVzc2FnZSByZXVzYWJpbGl0eSBhbmQgbWVzc2FnZXMgY2FuIGFsc28gYmVcbiAgICAqIG92ZXJyaWRkZW4uXG4gICAgKlxuICAgICoge0BsaW5rIG1vZHVsZTpuZ01lc3NhZ2VzIENsaWNrIGhlcmV9IHRvIGxlYXJuIG1vcmUgYWJvdXQgYG5nTWVzc2FnZXNgIGFuZCBgbmdNZXNzYWdlYC5cbiAgICAqXG4gICAgKiBAdXNhZ2VcbiAgICAqIGBgYGh0bWxcbiAgICAqIDwhLS0gdXNpbmcgYXR0cmlidXRlIGRpcmVjdGl2ZXMgLS0+XG4gICAgKiA8QU5ZIG5nLW1lc3NhZ2VzPVwiZXhwcmVzc2lvblwiPlxuICAgICogICA8QU5ZIG5nLW1lc3NhZ2U9XCJrZXlWYWx1ZTFcIj4uLi48L0FOWT5cbiAgICAqICAgPEFOWSBuZy1tZXNzYWdlPVwia2V5VmFsdWUyXCI+Li4uPC9BTlk+XG4gICAgKiAgIDxBTlkgbmctbWVzc2FnZT1cImtleVZhbHVlM1wiPi4uLjwvQU5ZPlxuICAgICogPC9BTlk+XG4gICAgKlxuICAgICogPCEtLSBvciBieSB1c2luZyBlbGVtZW50IGRpcmVjdGl2ZXMgLS0+XG4gICAgKiA8bmctbWVzc2FnZXMgZm9yPVwiZXhwcmVzc2lvblwiPlxuICAgICogICA8bmctbWVzc2FnZSB3aGVuPVwia2V5VmFsdWUxXCI+Li4uPC9uZy1tZXNzYWdlPlxuICAgICogICA8bmctbWVzc2FnZSB3aGVuPVwia2V5VmFsdWUyXCI+Li4uPC9uZy1tZXNzYWdlPlxuICAgICogICA8bmctbWVzc2FnZSB3aGVuPVwia2V5VmFsdWUzXCI+Li4uPC9uZy1tZXNzYWdlPlxuICAgICogPC9uZy1tZXNzYWdlcz5cbiAgICAqIGBgYFxuICAgICpcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01lc3NhZ2VzIGFuIGFuZ3VsYXIgZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIGEga2V5L3ZhbHVlIG9iamVjdFxuICAgICogICAgICAgICAgICAgICAgICh0aGlzIGlzIHR5cGljYWxseSB0aGUgJGVycm9yIG9iamVjdCBvbiBhbiBuZ01vZGVsIGluc3RhbmNlKS5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdNZXNzYWdlc011bHRpcGxlfG11bHRpcGxlIHdoZW4gc2V0LCBhbGwgbWVzc2FnZXMgd2lsbCBiZSBkaXNwbGF5ZWQgd2l0aCB0cnVlXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nTWVzc2FnZXNJbmNsdWRlfGluY2x1ZGUgd2hlbiBzZXQsIHRoZSBzcGVjaWZpZWQgdGVtcGxhdGUgd2lsbCBiZSBpbmNsdWRlZCBpbnRvIHRoZSBuZy1tZXNzYWdlcyBjb250YWluZXJcbiAgICAqXG4gICAgKiBAZXhhbXBsZVxuICAgICogPGV4YW1wbGUgbmFtZT1cIm5nTWVzc2FnZXMtZGlyZWN0aXZlXCIgbW9kdWxlPVwibmdNZXNzYWdlc0V4YW1wbGVcIlxuICAgICogICAgICAgICAgZGVwcz1cImFuZ3VsYXItbWVzc2FnZXMuanNcIlxuICAgICogICAgICAgICAgYW5pbWF0aW9ucz1cInRydWVcIiBmaXhCYXNlPVwidHJ1ZVwiPlxuICAgICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICogICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAgICAqICAgICAgIDxsYWJlbD5FbnRlciB5b3VyIG5hbWU6PC9sYWJlbD5cbiAgICAqICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiXG4gICAgKiAgICAgICAgICAgICAgbmFtZT1cIm15TmFtZVwiXG4gICAgKiAgICAgICAgICAgICAgbmctbW9kZWw9XCJuYW1lXCJcbiAgICAqICAgICAgICAgICAgICBuZy1taW5sZW5ndGg9XCI1XCJcbiAgICAqICAgICAgICAgICAgICBuZy1tYXhsZW5ndGg9XCIyMFwiXG4gICAgKiAgICAgICAgICAgICAgcmVxdWlyZWQgLz5cbiAgICAqXG4gICAgKiAgICAgICA8cHJlPm15Rm9ybS5teU5hbWUuJGVycm9yID0ge3sgbXlGb3JtLm15TmFtZS4kZXJyb3IgfCBqc29uIH19PC9wcmU+XG4gICAgKlxuICAgICogICAgICAgPGRpdiBuZy1tZXNzYWdlcz1cIm15Rm9ybS5teU5hbWUuJGVycm9yXCIgc3R5bGU9XCJjb2xvcjptYXJvb25cIj5cbiAgICAqICAgICAgICAgPGRpdiBuZy1tZXNzYWdlPVwicmVxdWlyZWRcIj5Zb3UgZGlkIG5vdCBlbnRlciBhIGZpZWxkPC9kaXY+XG4gICAgKiAgICAgICAgIDxkaXYgbmctbWVzc2FnZT1cIm1pbmxlbmd0aFwiPllvdXIgZmllbGQgaXMgdG9vIHNob3J0PC9kaXY+XG4gICAgKiAgICAgICAgIDxkaXYgbmctbWVzc2FnZT1cIm1heGxlbmd0aFwiPllvdXIgZmllbGQgaXMgdG9vIGxvbmc8L2Rpdj5cbiAgICAqICAgICAgIDwvZGl2PlxuICAgICogICAgIDwvZm9ybT5cbiAgICAqICAgPC9maWxlPlxuICAgICogICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgKiAgICAgYW5ndWxhci5tb2R1bGUoJ25nTWVzc2FnZXNFeGFtcGxlJywgWyduZ01lc3NhZ2VzJ10pO1xuICAgICogICA8L2ZpbGU+XG4gICAgKiA8L2V4YW1wbGU+XG4gICAgKi9cbiAgLmRpcmVjdGl2ZSgnbmdNZXNzYWdlcycsIFsnJGNvbXBpbGUnLCAnJGFuaW1hdGUnLCAnJHRlbXBsYXRlUmVxdWVzdCcsXG4gICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oJGNvbXBpbGUsICAgICRhbmltYXRlLCAgICR0ZW1wbGF0ZVJlcXVlc3QpIHtcbiAgICB2YXIgQUNUSVZFX0NMQVNTID0gJ25nLWFjdGl2ZSc7XG4gICAgdmFyIElOQUNUSVZFX0NMQVNTID0gJ25nLWluYWN0aXZlJztcblxuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLiRyZW5kZXJOZ01lc3NhZ2VDbGFzc2VzID0gYW5ndWxhci5ub29wO1xuXG4gICAgICAgIHZhciBtZXNzYWdlcyA9IFtdO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyTWVzc2FnZSA9IGZ1bmN0aW9uKGluZGV4LCBtZXNzYWdlKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VzW2ldLnR5cGUgPT0gbWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgICAgIGlmIChpbmRleCAhPSBpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBtZXNzYWdlc1tpbmRleF07XG4gICAgICAgICAgICAgICAgbWVzc2FnZXNbaW5kZXhdID0gbWVzc2FnZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgbWVzc2FnZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlc1tpXSA9IHRlbXA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnNwbGljZSgwLCBpKTsgLy9yZW1vdmUgdGhlIG9sZCBvbmUgKGFuZCBzaGlmdCBsZWZ0KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2VzLnNwbGljZShpbmRleCwgMCwgbWVzc2FnZSk7IC8vYWRkIHRoZSBuZXcgb25lIChhbmQgc2hpZnQgcmlnaHQpXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZW5kZXJNZXNzYWdlcyA9IGZ1bmN0aW9uKHZhbHVlcywgbXVsdGlwbGUpIHtcbiAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMgfHwge307XG5cbiAgICAgICAgICB2YXIgZm91bmQ7XG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1lc3NhZ2VzLCBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAoKCFmb3VuZCB8fCBtdWx0aXBsZSkgJiYgdHJ1dGh5VmFsKHZhbHVlc1ttZXNzYWdlLnR5cGVdKSkge1xuICAgICAgICAgICAgICBtZXNzYWdlLmF0dGFjaCgpO1xuICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtZXNzYWdlLmRldGFjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhpcy5yZW5kZXJFbGVtZW50Q2xhc3Nlcyhmb3VuZCk7XG5cbiAgICAgICAgICBmdW5jdGlvbiB0cnV0aHlWYWwodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UgJiYgdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHJlcXVpcmU6ICduZ01lc3NhZ2VzJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgZWxlbWVudCwgJGF0dHJzLCBjdHJsKSB7XG4gICAgICAgIGN0cmwucmVuZGVyRWxlbWVudENsYXNzZXMgPSBmdW5jdGlvbihib29sKSB7XG4gICAgICAgICAgYm9vbCA/ICRhbmltYXRlLnNldENsYXNzKGVsZW1lbnQsIEFDVElWRV9DTEFTUywgSU5BQ1RJVkVfQ0xBU1MpXG4gICAgICAgICAgICAgICA6ICRhbmltYXRlLnNldENsYXNzKGVsZW1lbnQsIElOQUNUSVZFX0NMQVNTLCBBQ1RJVkVfQ0xBU1MpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vSmF2YVNjcmlwdCB0cmVhdHMgZW1wdHkgc3RyaW5ncyBhcyBmYWxzZSwgYnV0IG5nLW1lc3NhZ2UtbXVsdGlwbGUgYnkgaXRzZWxmIGlzIGFuIGVtcHR5IHN0cmluZ1xuICAgICAgICB2YXIgbXVsdGlwbGUgPSBhbmd1bGFyLmlzU3RyaW5nKCRhdHRycy5uZ01lc3NhZ2VzTXVsdGlwbGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuaXNTdHJpbmcoJGF0dHJzLm11bHRpcGxlKTtcblxuICAgICAgICB2YXIgY2FjaGVkVmFsdWVzLCB3YXRjaEF0dHIgPSAkYXR0cnMubmdNZXNzYWdlcyB8fCAkYXR0cnNbJ2ZvciddOyAvL2ZvciBpcyBhIHJlc2VydmVkIGtleXdvcmRcbiAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24od2F0Y2hBdHRyLCBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgICAgICBjYWNoZWRWYWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgICAgY3RybC5yZW5kZXJNZXNzYWdlcyh2YWx1ZXMsIG11bHRpcGxlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHRwbCA9ICRhdHRycy5uZ01lc3NhZ2VzSW5jbHVkZSB8fCAkYXR0cnMuaW5jbHVkZTtcbiAgICAgICAgaWYgKHRwbCkge1xuICAgICAgICAgICR0ZW1wbGF0ZVJlcXVlc3QodHBsKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gcHJvY2Vzc1RlbXBsYXRlKGh0bWwpIHtcbiAgICAgICAgICAgICAgdmFyIGFmdGVyLCBjb250YWluZXIgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYvPicpLmh0bWwoaHRtbCk7XG4gICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjb250YWluZXIuY2hpbGRyZW4oKSwgZnVuY3Rpb24oZWxtKSB7XG4gICAgICAgICAgICAgICBlbG0gPSBhbmd1bGFyLmVsZW1lbnQoZWxtKTtcbiAgICAgICAgICAgICAgIGFmdGVyID8gYWZ0ZXIuYWZ0ZXIoZWxtKVxuICAgICAgICAgICAgICAgICAgICAgOiBlbGVtZW50LnByZXBlbmQoZWxtKTsgLy9zdGFydCBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAgICAgICBhZnRlciA9IGVsbTtcbiAgICAgICAgICAgICAgICRjb21waWxlKGVsbSkoJHNjb3BlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGN0cmwucmVuZGVyTWVzc2FnZXMoY2FjaGVkVmFsdWVzLCBtdWx0aXBsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1dKVxuXG5cbiAgIC8qKlxuICAgICogQG5nZG9jIGRpcmVjdGl2ZVxuICAgICogQG5hbWUgbmdNZXNzYWdlXG4gICAgKiBAcmVzdHJpY3QgQUVcbiAgICAqIEBzY29wZVxuICAgICpcbiAgICAqIEBkZXNjcmlwdGlvblxuICAgICogYG5nTWVzc2FnZWAgaXMgYSBkaXJlY3RpdmUgd2l0aCB0aGUgcHVycG9zZSB0byBzaG93IGFuZCBoaWRlIGEgcGFydGljdWxhciBtZXNzYWdlLlxuICAgICogRm9yIGBuZ01lc3NhZ2VgIHRvIG9wZXJhdGUsIGEgcGFyZW50IGBuZ01lc3NhZ2VzYCBkaXJlY3RpdmUgb24gYSBwYXJlbnQgRE9NIGVsZW1lbnRcbiAgICAqIG11c3QgYmUgc2l0dWF0ZWQgc2luY2UgaXQgZGV0ZXJtaW5lcyB3aGljaCBtZXNzYWdlcyBhcmUgdmlzaWJsZSBiYXNlZCBvbiB0aGUgc3RhdGVcbiAgICAqIG9mIHRoZSBwcm92aWRlZCBrZXkvdmFsdWUgbWFwIHRoYXQgYG5nTWVzc2FnZXNgIGxpc3RlbnMgb24uXG4gICAgKlxuICAgICogQHVzYWdlXG4gICAgKiBgYGBodG1sXG4gICAgKiA8IS0tIHVzaW5nIGF0dHJpYnV0ZSBkaXJlY3RpdmVzIC0tPlxuICAgICogPEFOWSBuZy1tZXNzYWdlcz1cImV4cHJlc3Npb25cIj5cbiAgICAqICAgPEFOWSBuZy1tZXNzYWdlPVwia2V5VmFsdWUxXCI+Li4uPC9BTlk+XG4gICAgKiAgIDxBTlkgbmctbWVzc2FnZT1cImtleVZhbHVlMlwiPi4uLjwvQU5ZPlxuICAgICogICA8QU5ZIG5nLW1lc3NhZ2U9XCJrZXlWYWx1ZTNcIj4uLi48L0FOWT5cbiAgICAqIDwvQU5ZPlxuICAgICpcbiAgICAqIDwhLS0gb3IgYnkgdXNpbmcgZWxlbWVudCBkaXJlY3RpdmVzIC0tPlxuICAgICogPG5nLW1lc3NhZ2VzIGZvcj1cImV4cHJlc3Npb25cIj5cbiAgICAqICAgPG5nLW1lc3NhZ2Ugd2hlbj1cImtleVZhbHVlMVwiPi4uLjwvbmctbWVzc2FnZT5cbiAgICAqICAgPG5nLW1lc3NhZ2Ugd2hlbj1cImtleVZhbHVlMlwiPi4uLjwvbmctbWVzc2FnZT5cbiAgICAqICAgPG5nLW1lc3NhZ2Ugd2hlbj1cImtleVZhbHVlM1wiPi4uLjwvbmctbWVzc2FnZT5cbiAgICAqIDwvbmctbWVzc2FnZXM+XG4gICAgKiBgYGBcbiAgICAqXG4gICAgKiB7QGxpbmsgbW9kdWxlOm5nTWVzc2FnZXMgQ2xpY2sgaGVyZX0gdG8gbGVhcm4gbW9yZSBhYm91dCBgbmdNZXNzYWdlc2AgYW5kIGBuZ01lc3NhZ2VgLlxuICAgICpcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01lc3NhZ2UgYSBzdHJpbmcgdmFsdWUgY29ycmVzcG9uZGluZyB0byB0aGUgbWVzc2FnZSBrZXkuXG4gICAgKi9cbiAgLmRpcmVjdGl2ZSgnbmdNZXNzYWdlJywgWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XG4gICAgdmFyIENPTU1FTlRfTk9ERSA9IDg7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcXVpcmU6ICdebmdNZXNzYWdlcycsXG4gICAgICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gICAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCBuZ01lc3NhZ2VzLCAkdHJhbnNjbHVkZSkge1xuICAgICAgICB2YXIgaW5kZXgsIGVsZW1lbnQ7XG5cbiAgICAgICAgdmFyIGNvbW1lbnROb2RlID0gJGVsZW1lbnRbMF07XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gY29tbWVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSAwOyBpIDwgcGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIG5vZGUgPSBwYXJlbnROb2RlLmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gQ09NTUVOVF9OT0RFICYmIG5vZGUubm9kZVZhbHVlLmluZGV4T2YoJ25nTWVzc2FnZScpID49IDApIHtcbiAgICAgICAgICAgIGlmIChub2RlID09PSBjb21tZW50Tm9kZSkge1xuICAgICAgICAgICAgICBpbmRleCA9IGo7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaisrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG5nTWVzc2FnZXMucmVnaXN0ZXJNZXNzYWdlKGluZGV4LCB7XG4gICAgICAgICAgdHlwZTogJGF0dHJzLm5nTWVzc2FnZSB8fCAkYXR0cnMud2hlbixcbiAgICAgICAgICBhdHRhY2g6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICAgICR0cmFuc2NsdWRlKCRzY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgbnVsbCwgJGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBjbG9uZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXRhY2g6IGZ1bmN0aW9uKG5vdykge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoZWxlbWVudCk7XG4gICAgICAgICAgICAgIGVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfV0pO1xuXG5cbn0pKHdpbmRvdywgd2luZG93LmFuZ3VsYXIpO1xuIiwiLypcblx0QGxpY2Vuc2UgbWQtZGF0ZS10aW1lXG5cdEBhdXRob3IgU2ltZW9uQ1xuXHRAbGljZW5zZSAyMDE1IE1JVFxuXHRAdmVyc2lvbiAwLjAuMTFcblx0XG5cdFNlZSBSRUFETUUubWQgZm9yIHJlcXVpcmVtZW50cyBhbmQgdXNlLlxuKi9hbmd1bGFyLm1vZHVsZSgnbWREYXRlVGltZScsIFtdKS5kaXJlY3RpdmUoJ3RpbWVEYXRlUGlja2VyJywgW1xuICAnJGZpbHRlcicsICckc2NlJywgJyRyb290U2NvcGUnLCAnJHBhcnNlJywgZnVuY3Rpb24oJGZpbHRlciwgJHNjZSwgJHJvb3RTY29wZSwgJHBhcnNlKSB7XG4gICAgdmFyIF9kYXRlRmlsdGVyO1xuICAgIF9kYXRlRmlsdGVyID0gJGZpbHRlcignZGF0ZScpO1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBfbW9kZWxWYWx1ZTogJz1uZ01vZGVsJ1xuICAgICAgfSxcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnbWQtZGF0ZS10aW1lLnRwbC5odG1sJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICB2YXIgY2FuY2VsRm4sIHNhdmVGbjtcbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ2RlZmF1bHRNb2RlJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgcmV0dXJuIHNjb3BlLl9tb2RlID0gdmFsICE9IG51bGwgPyB2YWwgOiAnZGF0ZSc7XG4gICAgICAgIH0pO1xuICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnZGlzcGxheU1vZGUnLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICByZXR1cm4gc2NvcGUuX2Rpc3BsYXlNb2RlID0gdmFsO1xuICAgICAgICB9KTtcbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ29yaWVudGF0aW9uJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgcmV0dXJuIHNjb3BlLl92ZXJ0aWNhbE1vZGUgPSB2YWwgPT09ICd0cnVlJztcbiAgICAgICAgfSk7XG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCdkaXNwbGF5VHdlbnR5Zm91cicsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgIHJldHVybiBzY29wZS5faG91cnMyNCA9ICh2YWwgIT0gbnVsbCkgJiYgdmFsO1xuICAgICAgICB9KTtcbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ21pbmRhdGUnLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICBpZiAoKHZhbCAhPSBudWxsKSAmJiBhbmd1bGFyLmlzRGF0ZSh2YWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NvcGUucmVzdHJpY3Rpb25zLm1pbmRhdGUgPSB2YWw7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ21heGRhdGUnLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICBpZiAoKHZhbCAhPSBudWxsKSAmJiBhbmd1bGFyLmlzRGF0ZSh2YWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NvcGUucmVzdHJpY3Rpb25zLm1heGRhdGUgPSB2YWw7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbmdNb2RlbC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHNjb3BlLnNldERhdGUobmdNb2RlbC4kbW9kZWxWYWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHNhdmVGbiA9ICRwYXJzZShhdHRycy5vblNhdmUpO1xuICAgICAgICBjYW5jZWxGbiA9ICRwYXJzZShhdHRycy5vbkNhbmNlbCk7XG4gICAgICAgIHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzY29wZS5fbW9kZWxWYWx1ZSA9IHNjb3BlLmRhdGU7XG4gICAgICAgICAgbmdNb2RlbC4kc2V0RGlydHkoKTtcbiAgICAgICAgICByZXR1cm4gc2F2ZUZuKHNjb3BlLiRwYXJlbnQsIHtcbiAgICAgICAgICAgICR2YWx1ZTogc2NvcGUuZGF0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2FuY2VsRm4oc2NvcGUuJHBhcmVudCwge30pO1xuICAgICAgICAgIHJldHVybiBuZ01vZGVsLiRyZW5kZXIoKTtcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyOiBbXG4gICAgICAgICckc2NvcGUnLCBmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgIHZhciBpO1xuICAgICAgICAgIHNjb3BlLnJlc3RyaWN0aW9ucyA9IHtcbiAgICAgICAgICAgIG1pbmRhdGU6IHZvaWQgMCxcbiAgICAgICAgICAgIG1heGRhdGU6IHZvaWQgMFxuICAgICAgICAgIH07XG4gICAgICAgICAgc2NvcGUuc2V0RGF0ZSA9IGZ1bmN0aW9uKG5ld1ZhbCkge1xuICAgICAgICAgICAgc2NvcGUuZGF0ZSA9IG5ld1ZhbCAhPSBudWxsID8gbmV3IERhdGUobmV3VmFsKSA6IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBzY29wZS5jYWxlbmRhci5feWVhciA9IHNjb3BlLmRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHNjb3BlLmNhbGVuZGFyLl9tb250aCA9IHNjb3BlLmRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIHNjb3BlLmNsb2NrLl9taW51dGVzID0gc2NvcGUuZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgICAgICBzY29wZS5jbG9jay5faG91cnMgPSBzY29wZS5faG91cnMyNCA/IHNjb3BlLmRhdGUuZ2V0SG91cnMoKSA6IHNjb3BlLmRhdGUuZ2V0SG91cnMoKSAlIDEyO1xuICAgICAgICAgICAgaWYgKCFzY29wZS5faG91cnMyNCAmJiBzY29wZS5jbG9jay5faG91cnMgPT09IDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLmNsb2NrLl9ob3VycyA9IDEyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgc2NvcGUuZGlzcGxheSA9IHtcbiAgICAgICAgICAgIGZ1bGxUaXRsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfZGF0ZUZpbHRlcihzY29wZS5kYXRlLCAnRUVFRSBkIE1NTU0geXl5eSwgaDptbSBhJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGl0bGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAoc2NvcGUuX21vZGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfZGF0ZUZpbHRlcihzY29wZS5kYXRlLCAoc2NvcGUuX2Rpc3BsYXlNb2RlID09PSAnZGF0ZScgPyAnRUVFRScgOiAnRUVFRSBoOm1tIGEnKSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9kYXRlRmlsdGVyKHNjb3BlLmRhdGUsICdNTU1NIGQgeXl5eScpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJzdXBlclwiOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKHNjb3BlLl9tb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2RhdGVGaWx0ZXIoc2NvcGUuZGF0ZSwgJ01NTScpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1haW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHNjZS50cnVzdEFzSHRtbChzY29wZS5fbW9kZSA9PT0gJ2RhdGUnID8gX2RhdGVGaWx0ZXIoc2NvcGUuZGF0ZSwgJ2QnKSA6IFwiXCIgKyAoX2RhdGVGaWx0ZXIoc2NvcGUuZGF0ZSwgJ2g6bW0nKSkgKyBcIjxzbWFsbD5cIiArIChfZGF0ZUZpbHRlcihzY29wZS5kYXRlLCAnYScpKSArIFwiPC9zbWFsbD5cIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3ViOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKHNjb3BlLl9tb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2RhdGVGaWx0ZXIoc2NvcGUuZGF0ZSwgJ3l5eXknKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2RhdGVGaWx0ZXIoc2NvcGUuZGF0ZSwgJ0hIOm1tJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHNjb3BlLmNhbGVuZGFyID0ge1xuICAgICAgICAgICAgX21vbnRoOiAwLFxuICAgICAgICAgICAgX3llYXI6IDAsXG4gICAgICAgICAgICBfbW9udGhzOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBfaSwgX3Jlc3VsdHM7XG4gICAgICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAoaSA9IF9pID0gMDsgX2kgPD0gMTE7IGkgPSArK19pKSB7XG4gICAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChfZGF0ZUZpbHRlcihuZXcgRGF0ZSgwLCBpKSwgJ01NTU0nKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICAgICAgfSkoKSxcbiAgICAgICAgICAgIG9mZnNldE1hcmdpbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBcIlwiICsgKG5ldyBEYXRlKHRoaXMuX3llYXIsIHRoaXMuX21vbnRoKS5nZXREYXkoKSAqIDIuNykgKyBcInJlbVwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzVmlzaWJsZTogZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5feWVhciwgdGhpcy5fbW9udGgsIGQpLmdldE1vbnRoKCkgPT09IHRoaXMuX21vbnRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiY2xhc3NcIjogZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICBpZiAoKHNjb3BlLmRhdGUgIT0gbnVsbCkgJiYgbmV3IERhdGUodGhpcy5feWVhciwgdGhpcy5fbW9udGgsIGQpLmdldFRpbWUoKSA9PT0gbmV3IERhdGUoc2NvcGUuZGF0ZS5nZXRUaW1lKCkpLnNldEhvdXJzKDAsIDAsIDAsIDApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2VsZWN0ZWRcIjtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChuZXcgRGF0ZSh0aGlzLl95ZWFyLCB0aGlzLl9tb250aCwgZCkuZ2V0VGltZSgpID09PSBuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDAsIDApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidG9kYXlcIjtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbGVjdDogZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuZGF0ZS5zZXRGdWxsWWVhcih0aGlzLl95ZWFyLCB0aGlzLl9tb250aCwgZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbW9udGhDaGFuZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAoKHRoaXMuX3llYXIgPT0gbnVsbCkgfHwgaXNOYU4odGhpcy5feWVhcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl95ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNjb3BlLmRhdGUuc2V0RnVsbFllYXIodGhpcy5feWVhciwgdGhpcy5fbW9udGgpO1xuICAgICAgICAgICAgICBpZiAoc2NvcGUuZGF0ZS5nZXRNb250aCgpICE9PSB0aGlzLl9tb250aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzY29wZS5kYXRlLnNldERhdGUoMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5jTW9udGg6IGZ1bmN0aW9uKG1vbnRocykge1xuICAgICAgICAgICAgICB0aGlzLl9tb250aCArPSBtb250aHM7XG4gICAgICAgICAgICAgIHdoaWxlICh0aGlzLl9tb250aCA8IDAgfHwgdGhpcy5fbW9udGggPiAxMSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tb250aCA8IDApIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX21vbnRoICs9IDEyO1xuICAgICAgICAgICAgICAgICAgdGhpcy5feWVhci0tO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9tb250aCAtPSAxMjtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX3llYXIrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9udGhDaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHNjb3BlLmNsb2NrID0ge1xuICAgICAgICAgICAgX21pbnV0ZXM6IDAsXG4gICAgICAgICAgICBfaG91cnM6IDAsXG4gICAgICAgICAgICBfaW5jSG91cnM6IGZ1bmN0aW9uKGluYykge1xuICAgICAgICAgICAgICB0aGlzLl9ob3VycyA9IHNjb3BlLl9ob3VyczI0ID8gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjMsIHRoaXMuX2hvdXJzICsgaW5jKSkgOiBNYXRoLm1heCgxLCBNYXRoLm1pbigxMiwgdGhpcy5faG91cnMgKyBpbmMpKTtcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHRoaXMuX2hvdXJzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9ob3VycyA9IDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5jTWludXRlczogZnVuY3Rpb24oaW5jKSB7XG4gICAgICAgICAgICAgIHRoaXMuX21pbnV0ZXMgPSBNYXRoLm1heCgwLCBNYXRoLm1pbig1OSwgdGhpcy5fbWludXRlcyArIGluYykpO1xuICAgICAgICAgICAgICBpZiAoaXNOYU4odGhpcy5fbWludXRlcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWludXRlcyA9IDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRBTTogZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgICBpZiAoYiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYiA9ICF0aGlzLmlzQU0oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoYiAmJiAhdGhpcy5pc0FNKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuZGF0ZS5zZXRIb3VycyhzY29wZS5kYXRlLmdldEhvdXJzKCkgLSAxMik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWIgJiYgdGhpcy5pc0FNKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuZGF0ZS5zZXRIb3VycyhzY29wZS5kYXRlLmdldEhvdXJzKCkgKyAxMik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0FNOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLmRhdGUuZ2V0SG91cnMoKSA8IDEyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgc2NvcGUuJHdhdGNoKCdjbG9jay5fbWludXRlcycsIGZ1bmN0aW9uKHZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgICBpZiAoKHZhbCAhPSBudWxsKSAmJiB2YWwgIT09IHNjb3BlLmRhdGUuZ2V0TWludXRlcygpICYmICFpc05hTih2YWwpICYmICgwIDw9IHZhbCAmJiB2YWwgPD0gNTkpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzY29wZS5kYXRlLnNldE1pbnV0ZXModmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzY29wZS4kd2F0Y2goJ2Nsb2NrLl9ob3VycycsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgaWYgKCh2YWwgIT0gbnVsbCkgJiYgIWlzTmFOKHZhbCkpIHtcbiAgICAgICAgICAgICAgaWYgKCFzY29wZS5faG91cnMyNCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IDI0KSB7XG4gICAgICAgICAgICAgICAgICB2YWwgPSAxMjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gMTIpIHtcbiAgICAgICAgICAgICAgICAgIHZhbCA9IDA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghc2NvcGUuY2xvY2suaXNBTSgpKSB7XG4gICAgICAgICAgICAgICAgICB2YWwgKz0gMTI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh2YWwgIT09IHNjb3BlLmRhdGUuZ2V0SG91cnMoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzY29wZS5kYXRlLnNldEhvdXJzKHZhbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzY29wZS5zZXROb3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBzY29wZS5zZXREYXRlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBzY29wZS5fbW9kZSA9ICdkYXRlJztcbiAgICAgICAgICBzY29wZS5tb2RlQ2xhc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzY29wZS5fZGlzcGxheU1vZGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBzY29wZS5fbW9kZSA9IHNjb3BlLl9kaXNwbGF5TW9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIlwiICsgKChzY29wZS5fdmVydGljYWxNb2RlICE9IG51bGwpICYmIHNjb3BlLl92ZXJ0aWNhbE1vZGUgPyAndmVydGljYWwgJyA6ICcnKSArIChzY29wZS5fZGlzcGxheU1vZGUgPT09ICdmdWxsJyA/ICdmdWxsLW1vZGUnIDogc2NvcGUuX2Rpc3BsYXlNb2RlID09PSAndGltZScgPyAndGltZS1vbmx5JyA6IHNjb3BlLl9kaXNwbGF5TW9kZSA9PT0gJ2RhdGUnID8gJ2RhdGUtb25seScgOiBzY29wZS5fbW9kZSA9PT0gJ2RhdGUnID8gJ2RhdGUtbW9kZScgOiAndGltZS1tb2RlJyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBzY29wZS5tb2RlU3dpdGNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgX3JlZjtcbiAgICAgICAgICAgIHJldHVybiBzY29wZS5fbW9kZSA9IChfcmVmID0gc2NvcGUuX2Rpc3BsYXlNb2RlKSAhPSBudWxsID8gX3JlZiA6IHNjb3BlLl9tb2RlID09PSAnZGF0ZScgPyAndGltZScgOiAnZGF0ZSc7XG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gc2NvcGUubW9kZVN3aXRjaFRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzY29wZS5fbW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgIHJldHVybiAnQ2xvY2snO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuICdDYWxlbmRhcic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG4gIH1cbl0pO1xuXG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdtZERhdGVUaW1lJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuXG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbWQtZGF0ZS10aW1lLnRwbC5odG1sJywgJzxkaXYgbmctY2xhc3M9XCJtb2RlQ2xhc3MoKVwiIGNsYXNzPVwidGltZS1kYXRlXCI+PGRpdiBuZy1jbGljaz1cIm1vZGVTd2l0Y2goKVwiIGFyaWEtbGFiZWw9XCJTd2l0Y2ggdG8ge3ttb2RlU3dpdGNoVGV4dCgpfX1cIiBjbGFzcz1cImRpc3BsYXlcIj48ZGl2IGNsYXNzPVwidGl0bGVcIj57e2Rpc3BsYXkudGl0bGUoKX19PC9kaXY+PGRpdiBjbGFzcz1cImNvbnRlbnRcIj48ZGl2IGNsYXNzPVwic3VwZXItdGl0bGVcIj57e2Rpc3BsYXkuc3VwZXIoKX19PC9kaXY+PGRpdiBuZy1iaW5kLWh0bWw9XCJkaXNwbGF5Lm1haW4oKVwiIGNsYXNzPVwibWFpbi10aXRsZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJzdWItdGl0bGVcIj57e2Rpc3BsYXkuc3ViKCl9fTwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJjb250cm9sXCI+PGRpdiBjbGFzcz1cImZ1bGwtdGl0bGVcIj57e2Rpc3BsYXkuZnVsbFRpdGxlKCl9fTwvZGl2PjxkaXYgY2xhc3M9XCJzbGlkZXJcIj48ZGl2IGNsYXNzPVwiZGF0ZS1jb250cm9sXCI+PGRpdiBjbGFzcz1cInRpdGxlXCI+PG1kLWJ1dHRvbiBuZy1jbGljaz1cImNhbGVuZGFyLl9pbmNNb250aCgtMSlcIiBhcmlhLWxhYmVsPVwiUHJldmlvdXMgTW9udGhcIiBzdHlsZT1cImZsb2F0OiBsZWZ0XCI+PGkgY2xhc3M9XCJmYSBmYS1jYXJldC1sZWZ0XCI+PC9pPjwvbWQtYnV0dG9uPjxzcGFuIGNsYXNzPVwibW9udGgtcGFydFwiPnt7ZGF0ZSB8IGRhdGU6XFwnTU1NTVxcJ319PHNlbGVjdCBuZy1tb2RlbD1cImNhbGVuZGFyLl9tb250aFwiIG5nLWNoYW5nZT1cImNhbGVuZGFyLm1vbnRoQ2hhbmdlKClcIiBuZy1vcHRpb25zPVwiY2FsZW5kYXIuX21vbnRocy5pbmRleE9mKG1vbnRoKSBhcyBtb250aCBmb3IgbW9udGggaW4gY2FsZW5kYXIuX21vbnRoc1wiPjwvc2VsZWN0Pjwvc3Bhbj48aW5wdXQgbmctbW9kZWw9XCJjYWxlbmRhci5feWVhclwiIG5nLWNoYW5nZT1cImNhbGVuZGFyLm1vbnRoQ2hhbmdlKClcIiB0eXBlPVwibnVtYmVyXCIgY2xhc3M9XCJ5ZWFyLXBhcnRcIj48bWQtYnV0dG9uIG5nLWNsaWNrPVwiY2FsZW5kYXIuX2luY01vbnRoKDEpXCIgYXJpYS1sYWJlbD1cIk5leHQgTW9udGhcIiBzdHlsZT1cImZsb2F0OiByaWdodFwiPjxpIGNsYXNzPVwiZmEgZmEtY2FyZXQtcmlnaHRcIj48L2k+PC9tZC1idXR0b24+PC9kaXY+PGRpdiBjbGFzcz1cImhlYWRlcnNcIj48ZGl2IGNsYXNzPVwiZGF5LWNlbGxcIj5TPC9kaXY+PGRpdiBjbGFzcz1cImRheS1jZWxsXCI+TTwvZGl2PjxkaXYgY2xhc3M9XCJkYXktY2VsbFwiPlQ8L2Rpdj48ZGl2IGNsYXNzPVwiZGF5LWNlbGxcIj5XPC9kaXY+PGRpdiBjbGFzcz1cImRheS1jZWxsXCI+VDwvZGl2PjxkaXYgY2xhc3M9XCJkYXktY2VsbFwiPkY8L2Rpdj48ZGl2IGNsYXNzPVwiZGF5LWNlbGxcIj5TPC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImRheXNcIj48bWQtYnV0dG9uIG5nLXN0eWxlPVwie1xcJ21hcmdpbi1sZWZ0XFwnOiBjYWxlbmRhci5vZmZzZXRNYXJnaW4oKX1cIiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDEpXCIgbmctc2hvdz1cImNhbGVuZGFyLmlzVmlzaWJsZSgxKVwiIG5nLWNsaWNrPVwiY2FsZW5kYXIuc2VsZWN0KDEpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjE8L21kLWJ1dHRvbj48bWQtYnV0dG9uIG5nLWNsYXNzPVwiY2FsZW5kYXIuY2xhc3MoMilcIiBuZy1zaG93PVwiY2FsZW5kYXIuaXNWaXNpYmxlKDIpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMilcIiBjbGFzcz1cImRheS1jZWxsXCI+MjwvbWQtYnV0dG9uPjxtZC1idXR0b24gbmctY2xhc3M9XCJjYWxlbmRhci5jbGFzcygzKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMylcIiBuZy1jbGljaz1cImNhbGVuZGFyLnNlbGVjdCgzKVwiIGNsYXNzPVwiZGF5LWNlbGxcIj4zPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDQpXCIgbmctc2hvdz1cImNhbGVuZGFyLmlzVmlzaWJsZSg0KVwiIG5nLWNsaWNrPVwiY2FsZW5kYXIuc2VsZWN0KDQpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjQ8L21kLWJ1dHRvbj48bWQtYnV0dG9uIG5nLWNsYXNzPVwiY2FsZW5kYXIuY2xhc3MoNSlcIiBuZy1zaG93PVwiY2FsZW5kYXIuaXNWaXNpYmxlKDUpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoNSlcIiBjbGFzcz1cImRheS1jZWxsXCI+NTwvbWQtYnV0dG9uPjxtZC1idXR0b24gbmctY2xhc3M9XCJjYWxlbmRhci5jbGFzcyg2KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoNilcIiBuZy1jbGljaz1cImNhbGVuZGFyLnNlbGVjdCg2KVwiIGNsYXNzPVwiZGF5LWNlbGxcIj42PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDcpXCIgbmctc2hvdz1cImNhbGVuZGFyLmlzVmlzaWJsZSg3KVwiIG5nLWNsaWNrPVwiY2FsZW5kYXIuc2VsZWN0KDcpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjc8L21kLWJ1dHRvbj48bWQtYnV0dG9uIG5nLWNsYXNzPVwiY2FsZW5kYXIuY2xhc3MoOClcIiBuZy1zaG93PVwiY2FsZW5kYXIuaXNWaXNpYmxlKDgpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoOClcIiBjbGFzcz1cImRheS1jZWxsXCI+ODwvbWQtYnV0dG9uPjxtZC1idXR0b24gbmctY2xhc3M9XCJjYWxlbmRhci5jbGFzcyg5KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoOSlcIiBuZy1jbGljaz1cImNhbGVuZGFyLnNlbGVjdCg5KVwiIGNsYXNzPVwiZGF5LWNlbGxcIj45PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDEwKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTApXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTApXCIgY2xhc3M9XCJkYXktY2VsbFwiPjEwPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDExKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTEpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTEpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjExPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDEyKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTIpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTIpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjEyPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDEzKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTMpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTMpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjEzPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDE0KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTQpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTQpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjE0PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDE1KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTUpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTUpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjE1PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDE2KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTYpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTYpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjE2PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDE3KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTcpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTcpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjE3PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDE4KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTgpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTgpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjE4PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDE5KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMTkpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMTkpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjE5PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDIwKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjApXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjApXCIgY2xhc3M9XCJkYXktY2VsbFwiPjIwPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDIxKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjEpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjEpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjIxPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDIyKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjIpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjIpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjIyPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDIzKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjMpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjMpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjIzPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDI0KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjQpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjQpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjI0PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDI1KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjUpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjUpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjI1PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDI2KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjYpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjYpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjI2PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDI3KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjcpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjcpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjI3PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDI4KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjgpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjgpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjI4PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDI5KVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMjkpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMjkpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjI5PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDMwKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMzApXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMzApXCIgY2xhc3M9XCJkYXktY2VsbFwiPjMwPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGFzcz1cImNhbGVuZGFyLmNsYXNzKDMxKVwiIG5nLXNob3c9XCJjYWxlbmRhci5pc1Zpc2libGUoMzEpXCIgbmctY2xpY2s9XCJjYWxlbmRhci5zZWxlY3QoMzEpXCIgY2xhc3M9XCJkYXktY2VsbFwiPjMxPC9tZC1idXR0b24+PC9kaXY+PC9kaXY+PG1kLWJ1dHRvbiBuZy1jbGljaz1cIm1vZGVTd2l0Y2goKVwiIGFyaWEtbGFiZWw9XCJTd2l0Y2ggdG8ge3ttb2RlU3dpdGNoVGV4dCgpfX1cIiBjbGFzcz1cInN3aXRjaC1jb250cm9sXCI+PGkgY2xhc3M9XCJmYSBmYS1jbG9jay1vXCI+PC9pPjxpIGNsYXNzPVwiZmEgZmEtY2FsZW5kYXJcIj48L2k+PHNwYW4gY2xhc3M9XCJ2aXN1YWxseWhpZGRlblwiPnt7bW9kZVN3aXRjaFRleHQoKX19PC9zcGFuPjwvbWQtYnV0dG9uPjxkaXYgY2xhc3M9XCJ0aW1lLWNvbnRyb2xcIj48ZGl2IGNsYXNzPVwidGltZS1pbnB1dHNcIj48aW5wdXQgdHlwZT1cIm51bWJlclwiIG1pbj1cInt7X2hvdXJzMjQgPyAwIDogMX19XCIgbWF4PVwie3tfaG91cnMyNCA/IDIzIDogMTJ9fVwiIG5nLW1vZGVsPVwiY2xvY2suX2hvdXJzXCI+PG1kLWJ1dHRvbiBuZy1jbGljaz1cImNsb2NrLl9pbmNIb3VycygxKVwiIGFyaWEtbGFiZWw9XCJJbmNyZW1lbnQgSG91cnNcIiBjbGFzcz1cImhvdXJzIHVwXCI+PGkgY2xhc3M9XCJmYSBmYS1jYXJldC11cFwiPjwvaT48L21kLWJ1dHRvbj48bWQtYnV0dG9uIG5nLWNsaWNrPVwiY2xvY2suX2luY0hvdXJzKC0xKVwiIGFyaWEtbGFiZWw9XCJEZWNyZW1lbnQgSG91cnNcIiBjbGFzcz1cImhvdXJzIGRvd25cIj48aSBjbGFzcz1cImZhIGZhLWNhcmV0LWRvd25cIj48L2k+PC9tZC1idXR0b24+PGlucHV0IHR5cGU9XCJudW1iZXJcIiBtaW49XCIwXCIgbWF4PVwiNTlcIiBuZy1tb2RlbD1cImNsb2NrLl9taW51dGVzXCI+PG1kLWJ1dHRvbiBuZy1jbGljaz1cImNsb2NrLl9pbmNNaW51dGVzKDEpXCIgYXJpYS1sYWJlbD1cIkluY3JlbWVudCBNaW51dGVzXCIgY2xhc3M9XCJtaW51dGVzIHVwXCI+PGkgY2xhc3M9XCJmYSBmYS1jYXJldC11cFwiPjwvaT48L21kLWJ1dHRvbj48bWQtYnV0dG9uIG5nLWNsaWNrPVwiY2xvY2suX2luY01pbnV0ZXMoLTEpXCIgYXJpYS1sYWJlbD1cIkRlY3JlbWVudCBNaW51dGVzXCIgY2xhc3M9XCJtaW51dGVzIGRvd25cIj48aSBjbGFzcz1cImZhIGZhLWNhcmV0LWRvd25cIj48L2k+PC9tZC1idXR0b24+PC9kaXY+PGRpdiBuZy1pZj1cIiFfaG91cnMyNFwiIGNsYXNzPVwiYnV0dG9uc1wiPjxtZC1idXR0b24gbmctY2xpY2s9XCJjbG9jay5zZXRBTSgpXCIgYXJpYS1sYWJlbD1cIlN3aXRjaCBBTS9QTVwiPnt7ZGF0ZSB8IGRhdGU6XFwnYVxcJ319PC9tZC1idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImJ1dHRvbnNcIj48bWQtYnV0dG9uIG5nLWNsaWNrPVwic2V0Tm93KClcIiBhcmlhLWxhYmVsPVwiU2V0IFRvIEN1cnJlbnQge3sgX2Rpc3BhbHlNb2RlID09IFxcJ2RhdGVcXCcgPyBcXCdEYXRlXFwnIDogXFwnRGF0ZS9UaW1lXFwnfX1cIj5Ob3c8L21kLWJ1dHRvbj48bWQtYnV0dG9uIG5nLWNsaWNrPVwiY2FuY2VsKClcIiBhcmlhLWxhYmVsPVwiQ2FuY2VsXCI+Q2FuY2VsPC9tZC1idXR0b24+PG1kLWJ1dHRvbiBuZy1jbGljaz1cInNhdmUoKVwiIGFyaWEtbGFiZWw9XCJTYXZlXCI+U2F2ZTwvbWQtYnV0dG9uPjwvZGl2PjwvZGl2PicpO1xuXG59XSk7IiwidmFyIG5nTWFwID0gYW5ndWxhci5tb2R1bGUoJ25nTWFwJywgW10pO1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSBBdHRyMk9wdGlvbnNcbiAqIEBkZXNjcmlwdGlvbiBcbiAqICAgQ29udmVydHMgdGFnIGF0dHJpYnV0ZXMgdG8gb3B0aW9ucyB1c2VkIGJ5IGdvb2dsZSBhcGkgdjMgb2JqZWN0cywgbWFwLCBtYXJrZXIsIHBvbHlnb24sIGNpcmNsZSwgZXRjLlxuICovXG4vKmpzaGludCAtVzAzMCovXG5uZ01hcC5zZXJ2aWNlKCdBdHRyMk9wdGlvbnMnLCBbJyRwYXJzZScsICdOYXZpZ2F0b3JHZW9sb2NhdGlvbicsICdHZW9Db2RlcicsIGZ1bmN0aW9uKCRwYXJzZSwgTmF2aWdhdG9yR2VvbG9jYXRpb24sIEdlb0NvZGVyKSB7IFxuICB2YXIgU1BFQ0lBTF9DSEFSU19SRUdFWFAgPSAvKFtcXDpcXC1cXF9dKyguKSkvZztcbiAgdmFyIE1PWl9IQUNLX1JFR0VYUCA9IC9ebW96KFtBLVpdKS87ICBcblxuICB2YXIgb3JnQXR0cmlidXRlcyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgKGVsLmxlbmd0aCA+IDApICYmIChlbCA9IGVsWzBdKTtcbiAgICB2YXIgb3JnQXR0cmlidXRlcyA9IHt9O1xuICAgIGZvciAodmFyIGk9MDsgaTxlbC5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYXR0ciA9IGVsLmF0dHJpYnV0ZXNbaV07XG4gICAgICBvcmdBdHRyaWJ1dGVzW2F0dHIubmFtZV0gPSBhdHRyLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb3JnQXR0cmlidXRlcztcbiAgfVxuXG4gIHZhciBjYW1lbENhc2UgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUuXG4gICAgICByZXBsYWNlKFNQRUNJQUxfQ0hBUlNfUkVHRVhQLCBmdW5jdGlvbihfLCBzZXBhcmF0b3IsIGxldHRlciwgb2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiBvZmZzZXQgPyBsZXR0ZXIudG9VcHBlckNhc2UoKSA6IGxldHRlcjtcbiAgICAgIH0pLlxuICAgICAgcmVwbGFjZShNT1pfSEFDS19SRUdFWFAsICdNb3okMScpO1xuICB9XG5cbiAgdmFyIEpTT05pemUgPSBmdW5jdGlvbihzdHIpIHtcbiAgICB0cnkgeyAgICAgICAvLyBpZiBwYXJzYWJsZSBhbHJlYWR5LCByZXR1cm4gYXMgaXQgaXNcbiAgICAgIEpTT04ucGFyc2Uoc3RyKTtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfSBjYXRjaChlKSB7IC8vIGlmIG5vdCBwYXJzYWJsZSwgY2hhbmdlIGxpdHRsZVxuICAgICAgcmV0dXJuIHN0clxuICAgICAgICAvLyB3cmFwIGtleXMgd2l0aG91dCBxdW90ZSB3aXRoIHZhbGlkIGRvdWJsZSBxdW90ZVxuICAgICAgICAucmVwbGFjZSgvKFtcXCRcXHddKylcXHMqOi9nLCBmdW5jdGlvbihfLCAkMSl7cmV0dXJuICdcIicrJDErJ1wiOid9KVxuICAgICAgICAvLyByZXBsYWNpbmcgc2luZ2xlIHF1b3RlIHdyYXBwZWQgb25lcyB0byBkb3VibGUgcXVvdGUgXG4gICAgICAgIC5yZXBsYWNlKC8nKFteJ10rKScvZywgZnVuY3Rpb24oXywgJDEpe3JldHVybiAnXCInKyQxKydcIid9KVxuICAgIH1cbiAgfVxuXG4gIHZhciB0b09wdGlvblZhbHVlID0gZnVuY3Rpb24oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgb3V0cHV0LCBrZXk9b3B0aW9ucy5rZXksIHNjb3BlPW9wdGlvbnMuc2NvcGU7XG4gICAgdHJ5IHsgLy8gMS4gTnVtYmVyP1xuICAgICAgdmFyIG51bSA9IE51bWJlcihpbnB1dCk7XG4gICAgICBpZiAoaXNOYU4obnVtKSkge1xuICAgICAgICB0aHJvdyBcIk5vdCBhIG51bWJlclwiO1xuICAgICAgfSBlbHNlICB7XG4gICAgICAgIG91dHB1dCA9IG51bTtcbiAgICAgIH1cbiAgICB9IGNhdGNoKGVycikgeyBcbiAgICAgIHRyeSB7IC8vIDIuSlNPTj9cbiAgICAgICAgaWYgKGlucHV0Lm1hdGNoKC9eW1xcK1xcLV0/WzAtOVxcLl0rLFsgXSpcXCA/W1xcK1xcLV0/WzAtOVxcLl0rJC8pKSB7IC8vIGkuZSBcIi0xLjAsIDg5Ljg5XCJcbiAgICAgICAgICBpbnB1dCA9IFwiW1wiK2lucHV0K1wiXVwiO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dCA9IEpTT04ucGFyc2UoSlNPTml6ZShpbnB1dCkpO1xuICAgICAgICBpZiAob3V0cHV0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICB2YXIgdDFzdEVsID0gb3V0cHV0WzBdO1xuICAgICAgICAgIGlmICh0MXN0RWwuY29uc3RydWN0b3IgPT0gT2JqZWN0KSB7IC8vIFt7YToxfV0gOiBub3QgbGF0L2xuZyBvbmVzXG4gICAgICAgICAgfSBlbHNlIGlmICh0MXN0RWwuY29uc3RydWN0b3IgPT0gQXJyYXkpIHsgLy8gW1sxLDJdLFszLDRdXSBcbiAgICAgICAgICAgIG91dHB1dCA9ICBvdXRwdXQubWFwKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGVsWzBdLCBlbFsxXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgaWYoIWlzTmFOKHBhcnNlRmxvYXQodDFzdEVsKSkgJiYgaXNGaW5pdGUodDFzdEVsKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBnb29nbGUubWFwcy5MYXRMbmcob3V0cHV0WzBdLCBvdXRwdXRbMV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaChlcnIyKSB7XG4gICAgICAgIC8vIDMuIE9iamVjdCBFeHByZXNzaW9uLiBpLmUuIExhdExuZyg4MCwtNDkpXG4gICAgICAgIGlmIChpbnB1dC5tYXRjaCgvXltBLVpdW2EtekEtWjAtOV0rXFwoLipcXCkkLykpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGV4cCA9IFwibmV3IGdvb2dsZS5tYXBzLlwiK2lucHV0O1xuICAgICAgICAgICAgb3V0cHV0ID0gZXZhbChleHApOyAvLyBUT0RPLCBzdGlsbCBldmFsXG4gICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBpbnB1dDtcbiAgICAgICAgICB9IFxuICAgICAgICAvLyA0LiBPYmplY3QgRXhwcmVzc2lvbi4gaS5lLiBNYXlUeXBlSWQuSFlCUklEIFxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0Lm1hdGNoKC9eKFtBLVpdW2EtekEtWjAtOV0rKVxcLihbQS1aXSspJC8pKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gaW5wdXQubWF0Y2goL14oW0EtWl1bYS16QS1aMC05XSspXFwuKFtBLVpdKykkLyk7XG4gICAgICAgICAgICBvdXRwdXQgPSBnb29nbGUubWFwc1ttYXRjaGVzWzFdXVttYXRjaGVzWzJdXTtcbiAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIG91dHB1dCA9IGlucHV0O1xuICAgICAgICAgIH0gXG4gICAgICAgIC8vIDUuIE9iamVjdCBFeHByZXNzaW9uLiBpLmUuIEhZQlJJRCBcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5tYXRjaCgvXltBLVpdKyQvKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgY2FwaXRhbGl6ZWRLZXkgPSBrZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSk7XG4gICAgICAgICAgICBpZiAoa2V5Lm1hdGNoKC90ZW1wZXJhdHVyZVVuaXR8d2luZFNwZWVkVW5pdHxsYWJlbENvbG9yLykpIHtcbiAgICAgICAgICAgICAgY2FwaXRhbGl6ZWRLZXkgPSBjYXBpdGFsaXplZEtleS5yZXBsYWNlKC9zJC8sXCJcIik7XG4gICAgICAgICAgICAgIG91dHB1dCA9IGdvb2dsZS5tYXBzLndlYXRoZXJbY2FwaXRhbGl6ZWRLZXldW2lucHV0XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG91dHB1dCA9IGdvb2dsZS5tYXBzW2NhcGl0YWxpemVkS2V5XVtpbnB1dF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBpbnB1dDtcbiAgICAgICAgICB9IFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dHB1dCA9IGlucHV0O1xuICAgICAgICB9XG4gICAgICB9IC8vIGNhdGNoKGVycjIpXG4gICAgfSAvLyBjYXRjaChlcnIpXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICB2YXIgc2V0RGVsYXllZEdlb0xvY2F0aW9uID0gZnVuY3Rpb24ob2JqZWN0LCBtZXRob2QsIHBhcmFtLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdmFyIGNlbnRlcmVkID0gb2JqZWN0LmNlbnRlcmVkIHx8IG9wdGlvbnMuY2VudGVyZWQ7XG4gICAgdmFyIGVycm9yRnVuYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdm9pZCAwO1xuICAgICAgdmFyIGZhbGxiYWNrTG9jYXRpb24gPSBvcHRpb25zLmZhbGxiYWNrTG9jYXRpb24gfHwgbmV3IGdvb2dsZS5tYXBzLkxhdExuZygwLDApO1xuICAgICAgb2JqZWN0W21ldGhvZF0oZmFsbGJhY2tMb2NhdGlvbik7XG4gICAgfTtcbiAgICBpZiAoIXBhcmFtIHx8IHBhcmFtLm1hdGNoKC9eY3VycmVudC9pKSkgeyAvLyBzZW5zb3JlZCBwb3NpdGlvblxuICAgICAgTmF2aWdhdG9yR2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKCkudGhlbihcbiAgICAgICAgZnVuY3Rpb24ocG9zaXRpb24pIHsgLy8gc3VjY2Vzc1xuICAgICAgICAgIHZhciBsYXQgPSBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7XG4gICAgICAgICAgdmFyIGxuZyA9IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7XG4gICAgICAgICAgdmFyIGxhdExuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobGF0LGxuZyk7XG4gICAgICAgICAgb2JqZWN0W21ldGhvZF0obGF0TG5nKTtcbiAgICAgICAgICBpZiAoY2VudGVyZWQpIHtcbiAgICAgICAgICAgIG9iamVjdC5tYXAuc2V0Q2VudGVyKGxhdExuZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2sgJiYgb3B0aW9ucy5jYWxsYmFjay5hcHBseShvYmplY3QpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvckZ1bmNcbiAgICAgICk7XG4gICAgfSBlbHNlIHsgLy9hc3N1bWluZyBpdCBpcyBhZGRyZXNzXG4gICAgICBHZW9Db2Rlci5nZW9jb2RlKHthZGRyZXNzOiBwYXJhbX0pLnRoZW4oXG4gICAgICAgIGZ1bmN0aW9uKHJlc3VsdHMpIHsgLy8gc3VjY2Vzc1xuICAgICAgICAgIG9iamVjdFttZXRob2RdKHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24pO1xuICAgICAgICAgIGlmIChjZW50ZXJlZCkge1xuICAgICAgICAgICAgb2JqZWN0Lm1hcC5zZXRDZW50ZXIocmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvckZ1bmNcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG5cbiAgdmFyIGdldEF0dHJzVG9PYnNlcnZlID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICB2YXIgYXR0cnNUb09ic2VydmUgPSBbXTtcbiAgICBpZiAoYXR0cnNbXCJuZy1yZXBlYXRcIl0gfHwgYXR0cnMubmdSZXBlYXQpIHsgIC8vIGlmIGVsZW1lbnQgaXMgY3JlYXRlZCBieSBuZy1yZXBlYXQsIGRvbid0IG9ic2VydmUgYW55XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGF0dHJOYW1lIGluIGF0dHJzKSB7XG4gICAgICAgIHZhciBhdHRyVmFsdWUgPSBhdHRyc1thdHRyTmFtZV07XG4gICAgICAgIGlmIChhdHRyVmFsdWUgJiYgYXR0clZhbHVlLm1hdGNoKC9cXHtcXHsuKlxcfVxcfS8pKSB7IC8vIGlmIGF0dHIgdmFsdWUgaXMge3suLn19XG4gICAgICAgICAgdm9pZCAwO1xuICAgICAgICAgIGF0dHJzVG9PYnNlcnZlLnB1c2goY2FtZWxDYXNlKGF0dHJOYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGF0dHJzVG9PYnNlcnZlO1xuICB9O1xuXG4gIHZhciBvYnNlcnZlQXR0clNldE9iaiA9IGZ1bmN0aW9uKG9yZ0F0dHJzLCBhdHRycywgb2JqKSB7XG4gICAgdmFyIGF0dHJzVG9PYnNlcnZlID0gZ2V0QXR0cnNUb09ic2VydmUob3JnQXR0cnMpO1xuICAgIGlmIChPYmplY3Qua2V5cyhhdHRyc1RvT2JzZXJ2ZSkubGVuZ3RoKSB7XG4gICAgICB2b2lkIDA7XG4gICAgfVxuICAgIGZvciAodmFyIGk9MDsgaTxhdHRyc1RvT2JzZXJ2ZS5sZW5ndGg7IGkrKykge1xuICAgICAgb2JzZXJ2ZUFuZFNldChhdHRycywgYXR0cnNUb09ic2VydmVbaV0sIG9iaik7XG4gICAgfVxuICB9XG5cbiAgdmFyIG9ic2VydmVBbmRTZXQgPSBmdW5jdGlvbihhdHRycywgYXR0ck5hbWUsIG9iamVjdCkge1xuICAgIGF0dHJzLiRvYnNlcnZlKGF0dHJOYW1lLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgdm9pZCAwO1xuICAgICAgICB2YXIgc2V0TWV0aG9kID0gY2FtZWxDYXNlKCdzZXQtJythdHRyTmFtZSk7XG4gICAgICAgIHZhciBvcHRpb25WYWx1ZSA9IHRvT3B0aW9uVmFsdWUodmFsLCB7a2V5OiBhdHRyTmFtZX0pO1xuICAgICAgICB2b2lkIDA7XG4gICAgICAgIGlmIChvYmplY3Rbc2V0TWV0aG9kXSkgeyAvL2lmIHNldCBtZXRob2QgZG9lcyBleGlzdFxuICAgICAgICAgIC8qIGlmIGFuIGxvY2F0aW9uIGlzIGJlaW5nIG9ic2VydmVkICovXG4gICAgICAgICAgaWYgKGF0dHJOYW1lLm1hdGNoKC9jZW50ZXJ8cG9zaXRpb24vKSAmJiBcbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25WYWx1ZSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2V0RGVsYXllZEdlb0xvY2F0aW9uKG9iamVjdCwgc2V0TWV0aG9kLCBvcHRpb25WYWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9iamVjdFtzZXRNZXRob2RdKG9wdGlvblZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIGZpbHRlcnMgYXR0cmlidXRlcyBieSBza2lwcGluZyBhbmd1bGFyanMgbWV0aG9kcyAkLi4gJCQuLlxuICAgICAqIEBtZW1iZXJvZiBBdHRyMk9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge0hhc2h9IGF0dHJzIHRhZyBhdHRyaWJ1dGVzXG4gICAgICogQHJldHVybnMge0hhc2h9IGZpbHRlcmQgYXR0cmlidXRlc1xuICAgICAqL1xuICAgIGZpbHRlcjogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICBmb3IodmFyIGtleSBpbiBhdHRycykge1xuICAgICAgICBpZiAoa2V5Lm1hdGNoKC9eXFwkLykgfHwga2V5Lm1hdGNoKC9ebmdbQS1aXS8pKSB7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9uc1trZXldID0gYXR0cnNba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogY29udmVydHMgYXR0cmlidXRlcyBoYXNoIHRvIEdvb2dsZSBNYXBzIEFQSSB2MyBvcHRpb25zICBcbiAgICAgKiBgYGBcbiAgICAgKiAgLiBjb252ZXJ0cyBudW1iZXJzIHRvIG51bWJlciAgIFxuICAgICAqICAuIGNvbnZlcnRzIGNsYXNzLWxpa2Ugc3RyaW5nIHRvIGdvb2dsZSBtYXBzIGluc3RhbmNlICAgXG4gICAgICogICAgaS5lLiBgTGF0TG5nKDEsMSlgIHRvIGBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDEsMSlgICBcbiAgICAgKiAgLiBjb252ZXJ0cyBjb25zdGFudC1saWtlIHN0cmluZyB0byBnb29nbGUgbWFwcyBjb25zdGFudCAgICBcbiAgICAgKiAgICBpLmUuIGBNYXBUeXBlSWQuSFlCUklEYCB0byBgZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLkhZQlJJRGAgICBcbiAgICAgKiAgICBpLmUuIGBIWUJSSURcImAgdG8gYGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5IWUJSSURgICBcbiAgICAgKiBgYGBcbiAgICAgKiBAbWVtYmVyb2YgQXR0cjJPcHRpb25zXG4gICAgICogQHBhcmFtIHtIYXNofSBhdHRycyB0YWcgYXR0cmlidXRlc1xuICAgICAqIEBwYXJhbSB7c2NvcGV9IHNjb3BlIGFuZ3VsYXJqcyBzY29wZVxuICAgICAqIEByZXR1cm5zIHtIYXNofSBvcHRpb25zIGNvbnZlcnRlZCBhdHRyaWJ1dGVzc1xuICAgICAqL1xuICAgIGdldE9wdGlvbnM6IGZ1bmN0aW9uKGF0dHJzLCBzY29wZSkge1xuICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgIGZvcih2YXIga2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGlmIChhdHRyc1trZXldKSB7XG4gICAgICAgICAgaWYgKGtleS5tYXRjaCgvXm9uW0EtWl0vKSkgeyAvL3NraXAgZXZlbnRzLCBpLmUuIG9uLWNsaWNrXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGtleS5tYXRjaCgvQ29udHJvbE9wdGlvbnMkLykpIHsgLy8gc2tpcCBjb250cm9sT3B0aW9uc1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnNba2V5XSA9IHRvT3B0aW9uVmFsdWUoYXR0cnNba2V5XSwge3Njb3BlOnNjb3BlLCBrZXk6IGtleX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBpZiAoYXR0cnNba2V5XSlcbiAgICAgIH0gLy8gZm9yKHZhciBrZXkgaW4gYXR0cnMpXG4gICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY29udmVydHMgYXR0cmlidXRlcyBoYXNoIHRvIHNjb3BlLXNwZWNpZmljIGV2ZW50IGZ1bmN0aW9uIFxuICAgICAqIEBtZW1iZXJvZiBBdHRyMk9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge3Njb3BlfSBzY29wZSBhbmd1bGFyanMgc2NvcGVcbiAgICAgKiBAcGFyYW0ge0hhc2h9IGF0dHJzIHRhZyBhdHRyaWJ1dGVzXG4gICAgICogQHJldHVybnMge0hhc2h9IGV2ZW50cyBjb252ZXJ0ZWQgZXZlbnRzXG4gICAgICovXG4gICAgZ2V0RXZlbnRzOiBmdW5jdGlvbihzY29wZSwgYXR0cnMpIHtcbiAgICAgIHZhciBldmVudHMgPSB7fTtcbiAgICAgIHZhciB0b0xvd2VyY2FzZUZ1bmMgPSBmdW5jdGlvbigkMSl7XG4gICAgICAgIHJldHVybiBcIl9cIiskMS50b0xvd2VyQ2FzZSgpO1xuICAgICAgfTtcbiAgICAgIHZhciBldmVudEZ1bmMgPSBmdW5jdGlvbihhdHRyVmFsdWUpIHtcbiAgICAgICAgdmFyIG1hdGNoZXMgPSBhdHRyVmFsdWUubWF0Y2goLyhbXlxcKF0rKVxcKChbXlxcKV0qKVxcKS8pO1xuICAgICAgICB2YXIgZnVuY05hbWUgPSBtYXRjaGVzWzFdO1xuICAgICAgICB2YXIgYXJnc1N0ciA9IG1hdGNoZXNbMl0ucmVwbGFjZSgvZXZlbnRbICxdKi8sJycpOyAgLy9yZW1vdmUgc3RyaW5nICdldmVudCdcbiAgICAgICAgXG4gICAgICAgIHZhciBhcmdzID0gc2NvcGUuJGV2YWwoXCJbXCIrYXJnc1N0citcIl1cIik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGZ1bmN0aW9uIGluZGV4KG9iaixpKSB7cmV0dXJuIG9ialtpXX1cbiAgICAgICAgICBmID0gZnVuY05hbWUuc3BsaXQoJy4nKS5yZWR1Y2UoaW5kZXgsIHNjb3BlKVxuICAgICAgICAgIGYuYXBwbHkodGhpcywgW2V2ZW50XS5jb25jYXQoYXJncykpO1xuICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvcih2YXIga2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGlmIChhdHRyc1trZXldKSB7XG4gICAgICAgICAgaWYgKCFrZXkubWF0Y2goL15vbltBLVpdLykpIHsgLy9za2lwIGlmIG5vdCBldmVudHNcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvL2dldCBldmVudCBuYW1lIGFzIHVuZGVyc2NvcmVkLiBpLmUuIHpvb21fY2hhbmdlZFxuICAgICAgICAgIHZhciBldmVudE5hbWUgPSBrZXkucmVwbGFjZSgvXm9uLywnJyk7XG4gICAgICAgICAgZXZlbnROYW1lID0gZXZlbnROYW1lLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgZXZlbnROYW1lLnNsaWNlKDEpO1xuICAgICAgICAgIGV2ZW50TmFtZSA9IGV2ZW50TmFtZS5yZXBsYWNlKC8oW0EtWl0pL2csIHRvTG93ZXJjYXNlRnVuYyk7XG5cbiAgICAgICAgICB2YXIgYXR0clZhbHVlID0gYXR0cnNba2V5XTtcbiAgICAgICAgICBldmVudHNbZXZlbnROYW1lXSA9IG5ldyBldmVudEZ1bmMoYXR0clZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGV2ZW50cztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY29udHJvbCBtZWFucyBtYXAgY29udHJvbHMsIGkuZSBzdHJlZXR2aWV3LCBwYW4sIGV0Yywgbm90IGEgZ2VuZXJhbCBjb250cm9sXG4gICAgICogQG1lbWJlcm9mIEF0dHIyT3B0aW9uc1xuICAgICAqIEBwYXJhbSB7SGFzaH0gZmlsdGVyZWQgZmlsdGVyZWQgdGFnIGF0dHJpYnV0ZXNcbiAgICAgKiBAcmV0dXJucyB7SGFzaH0gR29vZ2xlIE1hcCBvcHRpb25zXG4gICAgICovXG4gICAgZ2V0Q29udHJvbE9wdGlvbnM6IGZ1bmN0aW9uKGZpbHRlcmVkKSB7XG4gICAgICB2YXIgY29udHJvbE9wdGlvbnMgPSB7fTtcbiAgICAgIGlmICh0eXBlb2YgZmlsdGVyZWQgIT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgZm9yICh2YXIgYXR0ciBpbiBmaWx0ZXJlZCkge1xuICAgICAgICBpZiAoZmlsdGVyZWRbYXR0cl0pIHtcbiAgICAgICAgICBpZiAoIWF0dHIubWF0Y2goLyguKilDb250cm9sT3B0aW9ucyQvKSkgeyBcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBpZiBub3QgY29udHJvbE9wdGlvbnMsIHNraXAgaXRcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL2NoYW5nZSBpbnZhbGlkIGpzb24gdG8gdmFsaWQgb25lLCBpLmUuIHtmb286MX0gdG8ge1wiZm9vXCI6IDF9XG4gICAgICAgICAgdmFyIG9yZ1ZhbHVlID0gZmlsdGVyZWRbYXR0cl07XG4gICAgICAgICAgdmFyIG5ld1ZhbHVlID0gb3JnVmFsdWUucmVwbGFjZSgvJy9nLCAnXCInKTtcbiAgICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlLnJlcGxhY2UoLyhbXlwiXSspfChcIlteXCJdK1wiKS9nLCBmdW5jdGlvbigkMCwgJDEsICQyKSB7XG4gICAgICAgICAgICBpZiAoJDEpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICQxLnJlcGxhY2UoLyhbYS16QS1aMC05XSs/KTovZywgJ1wiJDFcIjonKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAkMjsgXG4gICAgICAgICAgICB9IFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IEpTT04ucGFyc2UobmV3VmFsdWUpO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHsgLy9hc3NpZ24gdGhlIHJpZ2h0IHZhbHVlc1xuICAgICAgICAgICAgICBpZiAob3B0aW9uc1trZXldKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb3B0aW9uc1trZXldO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IFwibWFwVHlwZUlkc1wiKSB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLm1hcCggZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHIubWF0Y2goL15bQS1aXSskLykpIHsgLy8gaWYgY29uc3RhbnRcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlLm1hcHMuTWFwVHlwZUlkW3N0ci50b1VwcGVyQ2FzZSgpXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gZWxzZSwgY3VzdG9tIG1hcC10eXBlXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcInN0eWxlXCIpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSBhdHRyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYXR0ci5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgIHZhciBvYmpOYW1lID0gc3RyLnJlcGxhY2UoL09wdGlvbnMkLywnJykrXCJTdHlsZVwiO1xuICAgICAgICAgICAgICAgICAgb3B0aW9uc1trZXldID0gZ29vZ2xlLm1hcHNbb2JqTmFtZV1bdmFsdWVdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcInBvc2l0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnNba2V5XSA9IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvblt2YWx1ZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbE9wdGlvbnNbYXR0cl0gPSBvcHRpb25zO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHZvaWQgMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gLy8gZm9yXG5cbiAgICAgIHJldHVybiBjb250cm9sT3B0aW9ucztcbiAgICB9LCAvLyBmdW5jdGlvblxuXG4gICAgdG9PcHRpb25WYWx1ZTogdG9PcHRpb25WYWx1ZSxcbiAgICBjYW1lbENhc2U6IGNhbWVsQ2FzZSxcbiAgICBzZXREZWxheWVkR2VvTG9jYXRpb246IHNldERlbGF5ZWRHZW9Mb2NhdGlvbixcbiAgICBnZXRBdHRyc1RvT2JzZXJ2ZTogZ2V0QXR0cnNUb09ic2VydmUsXG4gICAgb2JzZXJ2ZUFuZFNldDogb2JzZXJ2ZUFuZFNldCxcbiAgICBvYnNlcnZlQXR0clNldE9iajogb2JzZXJ2ZUF0dHJTZXRPYmosXG4gICAgb3JnQXR0cmlidXRlczogb3JnQXR0cmlidXRlc1xuXG4gIH07IC8vIHJldHVyblxufV0pOyBcblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgR2VvQ29kZXJcbiAqIEBkZXNjcmlwdGlvblxuICogICBQcm92aWRlcyBbZGVmZXJlZC9wcm9taXNlIEFQSV0oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJHEpIHNlcnZpY2UgZm9yIEdvb2dsZSBHZW9jb2RlciBzZXJ2aWNlXG4gKi9cbm5nTWFwLnNlcnZpY2UoJ0dlb0NvZGVyJywgWyckcScsIGZ1bmN0aW9uKCRxKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIEdlb0NvZGVyXG4gICAgICogQHBhcmFtIHtIYXNofSBvcHRpb25zIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi9nZW9jb2RpbmcvI2dlb2NvZGluZ1xuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogICBHZW9Db2Rlci5nZW9jb2RlKHthZGRyZXNzOiAndGhlIGNuIHRvd2VyJ30pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICogICAgIC8vLi4uIGRvIHNvbWV0aGluZyB3aXRoIHJlc3VsdFxuICAgICAqICAgfSk7XG4gICAgICogYGBgXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XG4gICAgICovXG4gICAgZ2VvY29kZSA6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcbiAgICAgIGdlb2NvZGVyLmdlb2NvZGUob3B0aW9ucywgZnVuY3Rpb24gKHJlc3VsdHMsIHN0YXR1cykge1xuICAgICAgICBpZiAoc3RhdHVzID09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ0dlb2NvZGVyIGZhaWxlZCBkdWUgdG86ICcrIHN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICB9XG59XSk7XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lIE5hdmlnYXRvckdlb2xvY2F0aW9uXG4gKiBAZGVzY3JpcHRpb25cbiAqICBQcm92aWRlcyBbZGVmZXJlZC9wcm9taXNlIEFQSV0oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJHEpIHNlcnZpY2UgZm9yIG5hdmlnYXRvci5nZW9sb2NhdGlvbiBtZXRob2RzXG4gKi9cbm5nTWFwLnNlcnZpY2UoJ05hdmlnYXRvckdlb2xvY2F0aW9uJywgWyckcScsIGZ1bmN0aW9uKCRxKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIE5hdmlnYXRvckdlb2xvY2F0aW9uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gc3VjY2VzcyBzdWNjZXNzIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZmFpbHVyZSBmYWlsdXJlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiAgTmF2aWdhdG9yR2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKClcbiAgICAgKiAgICAudGhlbihmdW5jdGlvbihwb3NpdGlvbikge1xuICAgICAqICAgICAgdmFyIGxhdCA9IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSwgbG5nID0gcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTtcbiAgICAgKiAgICAgIC4uIGRvIHNvbWV0aGluZyBsYXQgYW5kIGxuZ1xuICAgICAqICAgIH0pO1xuICAgICAqIGBgYFxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxuICAgICAqL1xuICAgIGdldEN1cnJlbnRQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikge1xuICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKFxuICAgICAgICAgIGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHBvc2l0aW9uKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIHZvaWQgMDtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChldnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChcIkJyb3dzZXIgR2VvbG9jYXRpb24gc2VydmljZSBmYWlsZWQuXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSxcblxuICAgIHdhdGNoUG9zaXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiVE9ET1wiO1xuICAgIH0sXG5cbiAgICBjbGVhcldhdGNoOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIlRPRE9cIjtcbiAgICB9XG4gIH07XG59XSk7IFxuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lIFN0cmVldFZpZXdcbiAqIEBkZXNjcmlwdGlvblxuICogIFByb3ZpZGVzIFtkZWZlcmVkL3Byb21pc2UgQVBJXShodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcvc2VydmljZS8kcSkgc2VydmljZSBcbiAqICBmb3IgW0dvb2dsZSBTdHJlZXRWaWV3U2VydmljZV0oaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvc3RyZWV0dmlldylcbiAqL1xubmdNYXAuc2VydmljZSgnU3RyZWV0VmlldycsIFsnJHEnLCBmdW5jdGlvbigkcSkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBwYW5vcmFtYSBpZCBmcm9tIHRoZSBnaXZlbiBtYXAgKGFuZCBvciBwb3NpdGlvbilcbiAgICAgKiBAbWVtYmVyb2YgU3RyZWV0Vmlld1xuICAgICAqIEBwYXJhbSB7bWFwfSBtYXAgR29vZ2xlIG1hcCBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7TGF0TG5nfSBsYXRsbmcgR29vZ2xlIExhdExuZyBpbnN0YW5jZSAgXG4gICAgICogICBkZWZhdWx0OiB0aGUgY2VudGVyIG9mIHRoZSBtYXBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgU3RyZWV0Vmlldy5nZXRQYW5vcmFtYShtYXApLnRoZW4oZnVuY3Rpb24ocGFub0lkKSB7XG4gICAgICogICAgICRzY29wZS5wYW5vSWQgPSBwYW5vSWQ7XG4gICAgICogICB9KTtcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcbiAgICAgKi9cbiAgICBnZXRQYW5vcmFtYSA6IGZ1bmN0aW9uKG1hcCwgbGF0bG5nKSB7XG4gICAgICBsYXRsbmcgPSBsYXRsbmcgfHwgbWFwLmdldENlbnRlcigpO1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBzdnMgPSBuZXcgZ29vZ2xlLm1hcHMuU3RyZWV0Vmlld1NlcnZpY2UoKTtcbiAgICAgIHN2cy5nZXRQYW5vcmFtYUJ5TG9jYXRpb24oIChsYXRsbmd8fG1hcC5nZXRDZW50ZXIpLCAxMDAsIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgLy8gaWYgc3RyZWV0VmlldyBhdmFpbGFibGVcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gZ29vZ2xlLm1hcHMuU3RyZWV0Vmlld1N0YXR1cy5PSykge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YS5sb2NhdGlvbi5wYW5vKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBubyBzdHJlZXQgdmlldyBhdmFpbGFibGUgaW4gdGhpcyByYW5nZSwgb3Igc29tZSBlcnJvciBvY2N1cnJlZFxuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgIC8vZGVmZXJyZWQucmVqZWN0KCdHZW9jb2RlciBmYWlsZWQgZHVlIHRvOiAnKyBzdGF0dXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2V0IHBhbm9yYW1hIHZpZXcgb24gdGhlIGdpdmVuIG1hcCB3aXRoIHRoZSBwYW5vcmFtYSBpZFxuICAgICAqIEBtZW1iZXJvZiBTdHJlZXRWaWV3XG4gICAgICogQHBhcmFtIHttYXB9IG1hcCBHb29nbGUgbWFwIGluc3RhbmNlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhbm9JZCBQYW5vcmFtYSBpZCBmcm8gZ2V0UGFub3JhbWEgbWV0aG9kXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgIFN0cmVldFZpZXcuc2V0UGFub3JhbWEobWFwLCBwYW5vSWQpO1xuICAgICAqL1xuICAgIHNldFBhbm9yYW1hIDogZnVuY3Rpb24obWFwLCBwYW5vSWQpIHtcbiAgICAgIHZhciBzdnAgPSBuZXcgZ29vZ2xlLm1hcHMuU3RyZWV0Vmlld1Bhbm9yYW1hKG1hcC5nZXREaXYoKSwge2VuYWJsZUNsb3NlQnV0dG9uOiB0cnVlfSk7XG4gICAgICBzdnAuc2V0UGFubyhwYW5vSWQpO1xuICAgIH1cbiAgfTsgLy8gcmV0dXJuXG59XSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgYmljeWNsaW5nLWxheWVyXG4gKiBAcmVxdWlyZXMgQXR0cjJPcHRpb25zIFxuICogQGRlc2NyaXB0aW9uIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50XG4gKlxuICogQGV4YW1wbGVcbiAqIEV4YW1wbGU6IFxuICpcbiAqICAgPG1hcCB6b29tPVwiMTNcIiBjZW50ZXI9XCIzNC4wNDkyNDU5NDE5MzE2NCwgLTExOC4yNDEwNDMwOTA4MjAzMVwiPlxuICogICAgIDxiaWN5Y2xpbmctbGF5ZXI+PC9iaWN5Y2xpbmctbGF5ZXI+XG4gKiAgICA8L21hcD5cbiAqL1xuLypqc2hpbnQgLVcwODkqL1xubmdNYXAuZGlyZWN0aXZlKCdiaWN5Y2xpbmdMYXllcicsIFsnQXR0cjJPcHRpb25zJywgZnVuY3Rpb24oQXR0cjJPcHRpb25zKSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG4gIFxuICB2YXIgZ2V0TGF5ZXIgPSBmdW5jdGlvbihvcHRpb25zLCBldmVudHMpIHtcbiAgICB2YXIgbGF5ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuQmljeWNsaW5nTGF5ZXIob3B0aW9ucyk7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50cykge1xuICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobGF5ZXIsIGV2ZW50TmFtZSwgZXZlbnRzW2V2ZW50TmFtZV0pO1xuICAgIH1cbiAgICByZXR1cm4gbGF5ZXI7XG4gIH07XG4gIFxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogJ15tYXAnLFxuXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtYXBDb250cm9sbGVyKSB7XG4gICAgICB2YXIgb3JnQXR0cnMgPSBwYXJzZXIub3JnQXR0cmlidXRlcyhlbGVtZW50KTtcbiAgICAgIHZhciBmaWx0ZXJlZCA9IHBhcnNlci5maWx0ZXIoYXR0cnMpO1xuICAgICAgdmFyIG9wdGlvbnMgPSBwYXJzZXIuZ2V0T3B0aW9ucyhmaWx0ZXJlZCk7XG4gICAgICB2YXIgZXZlbnRzID0gcGFyc2VyLmdldEV2ZW50cyhzY29wZSwgZmlsdGVyZWQpO1xuXG4gICAgICB2b2lkIDA7XG5cbiAgICAgIHZhciBsYXllciA9IGdldExheWVyKG9wdGlvbnMsIGV2ZW50cyk7XG4gICAgICBtYXBDb250cm9sbGVyLmFkZE9iamVjdCgnYmljeWNsaW5nTGF5ZXJzJywgbGF5ZXIpO1xuICAgICAgcGFyc2VyLm9ic2VydmVBdHRyU2V0T2JqKG9yZ0F0dHJzLCBhdHRycywgbGF5ZXIpOyAgLy9vYnNlcnZlcnNcbiAgICB9XG4gICB9OyAvLyByZXR1cm5cbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBjbG91ZC1sYXllclxuICogQHJlcXVpcmVzIEF0dHIyT3B0aW9ucyBcbiAqIEBkZXNjcmlwdGlvbiBcbiAqICAgUmVxdWlyZXM6ICBtYXAgZGlyZWN0aXZlXG4gKiAgIFJlc3RyaWN0IFRvOiAgRWxlbWVudFxuICpcbiAqIEBleGFtcGxlXG4gKiBFeGFtcGxlOiBcbiAqXG4gKiAgIDxtYXAgem9vbT1cIjEzXCIgY2VudGVyPVwiMzQuMDQ5MjQ1OTQxOTMxNjQsIC0xMTguMjQxMDQzMDkwODIwMzFcIj5cbiAqICAgICA8Y2xvdWQtbGF5ZXI+PC9jbG91ZC1sYXllcj5cbiAqICAgIDwvbWFwPlxuICovXG4vKmpzaGludCAtVzA4OSovXG5uZ01hcC5kaXJlY3RpdmUoJ2Nsb3VkTGF5ZXInLCBbJ0F0dHIyT3B0aW9ucycsIGZ1bmN0aW9uKEF0dHIyT3B0aW9ucykge1xuICB2YXIgcGFyc2VyID0gQXR0cjJPcHRpb25zO1xuICBcbiAgdmFyIGdldExheWVyID0gZnVuY3Rpb24ob3B0aW9ucywgZXZlbnRzKSB7XG4gICAgdmFyIGxheWVyID0gbmV3IGdvb2dsZS5tYXBzLndlYXRoZXIuQ2xvdWRMYXllcihvcHRpb25zKTtcbiAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gZXZlbnRzKSB7XG4gICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihsYXllciwgZXZlbnROYW1lLCBldmVudHNbZXZlbnROYW1lXSk7XG4gICAgfVxuICAgIHJldHVybiBsYXllcjtcbiAgfTtcbiAgXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXF1aXJlOiAnXm1hcCcsXG5cbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG1hcENvbnRyb2xsZXIpIHtcbiAgICAgIHZhciBvcmdBdHRycyA9IHBhcnNlci5vcmdBdHRyaWJ1dGVzKGVsZW1lbnQpO1xuICAgICAgdmFyIGZpbHRlcmVkID0gcGFyc2VyLmZpbHRlcihhdHRycyk7XG4gICAgICB2YXIgb3B0aW9ucyA9IHBhcnNlci5nZXRPcHRpb25zKGZpbHRlcmVkKTtcbiAgICAgIHZhciBldmVudHMgPSBwYXJzZXIuZ2V0RXZlbnRzKHNjb3BlLCBmaWx0ZXJlZCk7XG4gICAgICB2b2lkIDA7XG5cbiAgICAgIHZhciBsYXllciA9IGdldExheWVyKG9wdGlvbnMsIGV2ZW50cyk7XG4gICAgICBtYXBDb250cm9sbGVyLmFkZE9iamVjdCgnY2xvdWRMYXllcnMnLCBsYXllcik7XG4gICAgICBwYXJzZXIub2JzZXJ2ZUF0dHJTZXRPYmoob3JnQXR0cnMsIGF0dHJzLCBsYXllcik7ICAvL29ic2VydmVyc1xuICAgIH1cbiAgIH07IC8vIHJldHVyblxufV0pO1xuXG4vKmpzaGludCAtVzAzMCovXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIGN1c3RvbS1jb250cm9sXG4gKiBAcmVxdWlyZXMgQXR0cjJPcHRpb25zIFxuICogQHJlcXVpcmVzICRjb21waWxlXG4gKiBAZGVzY3JpcHRpb24gXG4gKiAgIEJ1aWxkIGN1c3RvbSBjb250cm9sIGFuZCBzZXQgdG8gdGhlIG1hcCB3aXRoIHBvc2l0aW9uXG4gKiAgIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqXG4gKiAgIFJlc3RyaWN0IFRvOiAgRWxlbWVudFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwb3NpdGlvbiBwb3NpdGlvbiBvZiB0aGlzIGNvbnRyb2xcbiAqICAgICAgICBpLmUuIFRPUF9SSUdIVFxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IGluZGV4IG9mIHRoZSBjb250cm9sXG4gKiBAZXhhbXBsZVxuICpcbiAqIEV4YW1wbGU6IFxuICogIDxtYXAgY2VudGVyPVwiNDEuODUwMDMzLC04Ny42NTAwNTIzXCIgem9vbT1cIjNcIj5cbiAqICAgIDxjdXN0b20tY29udHJvbCBpZD1cImhvbWVcIiBwb3NpdGlvbj1cIlRPUF9MRUZUXCIgaW5kZXg9XCIxXCI+XG4gKiAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcIj5cbiAqICAgICAgICA8Yj5Ib21lPC9iPlxuICogICAgICA8L2Rpdj5cbiAqICAgIDwvY3VzdG9tLWNvbnRyb2w+XG4gKiAgPC9tYXA+XG4gKlxuICovXG4vKmpzaGludCAtVzA4OSovXG5uZ01hcC5kaXJlY3RpdmUoJ2N1c3RvbUNvbnRyb2wnLCBbJ0F0dHIyT3B0aW9ucycsICckY29tcGlsZScsIGZ1bmN0aW9uKEF0dHIyT3B0aW9ucywgJGNvbXBpbGUpICB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6ICdebWFwJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG1hcENvbnRyb2xsZXIpIHtcbiAgICAgIGVsZW1lbnQuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xuICAgICAgdmFyIG9yZ0F0dHJzID0gcGFyc2VyLm9yZ0F0dHJpYnV0ZXMoZWxlbWVudCk7XG4gICAgICB2YXIgZmlsdGVyZWQgPSBwYXJzZXIuZmlsdGVyKGF0dHJzKTtcbiAgICAgIHZhciBvcHRpb25zID0gcGFyc2VyLmdldE9wdGlvbnMoZmlsdGVyZWQsIHNjb3BlKTtcbiAgICAgIHZhciBldmVudHMgPSBwYXJzZXIuZ2V0RXZlbnRzKHNjb3BlLCBmaWx0ZXJlZCk7XG4gICAgICB2b2lkIDA7XG5cbiAgICAgIC8qKlxuICAgICAgICogYnVpbGQgYSBjdXN0b20gY29udHJvbCBlbGVtZW50XG4gICAgICAgKi9cbiAgICAgIHZhciBjb21waWxlZCA9ICRjb21waWxlKGVsZW1lbnQuaHRtbCgpLnRyaW0oKSkoc2NvcGUpO1xuICAgICAgdmFyIGN1c3RvbUNvbnRyb2xFbCA9IGNvbXBpbGVkWzBdO1xuXG4gICAgICAvKipcbiAgICAgICAqIHNldCBldmVudHNcbiAgICAgICAqL1xuICAgICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50cykge1xuICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcihjdXN0b21Db250cm9sRWwsIGV2ZW50TmFtZSwgZXZlbnRzW2V2ZW50TmFtZV0pO1xuICAgICAgfVxuXG4gICAgICBtYXBDb250cm9sbGVyLmFkZE9iamVjdCgnY3VzdG9tQ29udHJvbHMnLCBjdXN0b21Db250cm9sRWwpO1xuICAgICAgc2NvcGUuJG9uKCdtYXBJbml0aWFsaXplZCcsIGZ1bmN0aW9uKGV2dCwgbWFwKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IG9wdGlvbnMucG9zaXRpb247XG4gICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb25bcG9zaXRpb25dXS5wdXNoKGN1c3RvbUNvbnRyb2xFbCk7XG4gICAgICB9KTtcblxuICAgIH0gLy9saW5rXG4gIH07IC8vIHJldHVyblxufV0pOy8vIGZ1bmN0aW9uXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgZHluYW1pYy1tYXBzLWVuZ2luZS1sYXllclxuICogQGRlc2NyaXB0aW9uIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50XG4gKlxuICogQGV4YW1wbGVcbiAqIEV4YW1wbGU6IFxuICogICA8bWFwIHpvb209XCIxNFwiIGNlbnRlcj1cIls1OS4zMjI1MDYsIDE4LjAxMDAyNV1cIj5cbiAqICAgICA8ZHluYW1pYy1tYXBzLWVuZ2luZS1sYXllciBsYXllci1pZD1cIjA2NjczMDU2NDU0MDQ2MTM1NTM3LTA4ODk2NTAxOTk3NzY2NTUzODExXCI+PC9keW5hbWljLW1hcHMtZW5naW5lLWxheWVyPlxuICogICAgPC9tYXA+XG4gKi9cbi8qanNoaW50IC1XMDg5Ki9cbm5nTWFwLmRpcmVjdGl2ZSgnZHluYW1pY01hcHNFbmdpbmVMYXllcicsIFsnQXR0cjJPcHRpb25zJywgZnVuY3Rpb24oQXR0cjJPcHRpb25zKSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG5cbiAgdmFyIGdldER5bmFtaWNNYXBzRW5naW5lTGF5ZXIgPSBmdW5jdGlvbihvcHRpb25zLCBldmVudHMpIHtcbiAgICB2YXIgbGF5ZXIgPSBuZXcgZ29vZ2xlLm1hcHMudmlzdWFsaXphdGlvbi5EeW5hbWljTWFwc0VuZ2luZUxheWVyKG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50cykge1xuICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobGF5ZXIsIGV2ZW50TmFtZSwgZXZlbnRzW2V2ZW50TmFtZV0pO1xuICAgIH1cblxuICAgIHJldHVybiBsYXllcjtcbiAgfTtcblxuICBcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6ICdebWFwJyxcblxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbWFwQ29udHJvbGxlcikge1xuICAgICAgdmFyIGZpbHRlcmVkID0gcGFyc2VyLmZpbHRlcihhdHRycyk7XG4gICAgICB2YXIgb3B0aW9ucyA9IHBhcnNlci5nZXRPcHRpb25zKGZpbHRlcmVkKTtcbiAgICAgIHZhciBldmVudHMgPSBwYXJzZXIuZ2V0RXZlbnRzKHNjb3BlLCBmaWx0ZXJlZCwgZXZlbnRzKTtcbiAgICAgIHZvaWQgMDtcblxuICAgICAgdmFyIGxheWVyID0gZ2V0RHluYW1pY01hcHNFbmdpbmVMYXllcihvcHRpb25zLCBldmVudHMpO1xuICAgICAgbWFwQ29udHJvbGxlci5hZGRPYmplY3QoJ21hcHNFbmdpbmVMYXllcnMnLCBsYXllcik7XG4gICAgfVxuICAgfTsgLy8gcmV0dXJuXG59XSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgZnVzaW9uLXRhYmxlcy1sYXllclxuICogQGRlc2NyaXB0aW9uIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50XG4gKlxuICogQGV4YW1wbGVcbiAqIEV4YW1wbGU6IFxuICogICA8bWFwIHpvb209XCIxMVwiIGNlbnRlcj1cIjQxLjg1MDAzMywgLTg3LjY1MDA1MjNcIj5cbiAqICAgICA8ZnVzaW9uLXRhYmxlcy1sYXllciBxdWVyeT1cIntcbiAqICAgICAgIHNlbGVjdDogJ0dlb2NvZGFibGUgYWRkcmVzcycsXG4gKiAgICAgICBmcm9tOiAnMW1aNTNaNzBOc0NobkJNbS1xRVltU0RPdkxYZ3JyZUxUa1FVdnZnJ31cIj5cbiAqICAgICA8L2Z1c2lvbi10YWJsZXMtbGF5ZXI+XG4gKiAgIDwvbWFwPlxuICovXG4vKmpzaGludCAtVzA4OSovXG5uZ01hcC5kaXJlY3RpdmUoJ2Z1c2lvblRhYmxlc0xheWVyJywgWydBdHRyMk9wdGlvbnMnLCBmdW5jdGlvbihBdHRyMk9wdGlvbnMpIHtcbiAgdmFyIHBhcnNlciA9IEF0dHIyT3B0aW9ucztcblxuICB2YXIgZ2V0TGF5ZXIgPSBmdW5jdGlvbihvcHRpb25zLCBldmVudHMpIHtcbiAgICB2YXIgbGF5ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuRnVzaW9uVGFibGVzTGF5ZXIob3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gZXZlbnRzKSB7XG4gICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihsYXllciwgZXZlbnROYW1lLCBldmVudHNbZXZlbnROYW1lXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxheWVyO1xuICB9O1xuXG4gIFxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogJ15tYXAnLFxuXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtYXBDb250cm9sbGVyKSB7XG4gICAgICB2YXIgZmlsdGVyZWQgPSBwYXJzZXIuZmlsdGVyKGF0dHJzKTtcbiAgICAgIHZhciBvcHRpb25zID0gcGFyc2VyLmdldE9wdGlvbnMoZmlsdGVyZWQpO1xuICAgICAgdmFyIGV2ZW50cyA9IHBhcnNlci5nZXRFdmVudHMoc2NvcGUsIGZpbHRlcmVkLCBldmVudHMpO1xuICAgICAgdm9pZCAwO1xuXG4gICAgICB2YXIgbGF5ZXIgPSBnZXRMYXllcihvcHRpb25zLCBldmVudHMpO1xuICAgICAgbWFwQ29udHJvbGxlci5hZGRPYmplY3QoJ2Z1c2lvblRhYmxlc0xheWVycycsIGxheWVyKTtcbiAgICB9XG4gICB9OyAvLyByZXR1cm5cbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBoZWF0bWFwLWxheWVyXG4gKiBAcmVxdWlyZXMgQXR0cjJPcHRpb25zIFxuICogQGRlc2NyaXB0aW9uIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50XG4gKlxuICogQGV4YW1wbGVcbiAqIEV4YW1wbGU6IFxuICpcbiAqICAgPG1hcCB6b29tPVwiMTFcIiBjZW50ZXI9XCJbNDEuODc1Njk2LC04Ny42MjQyMDddXCI+XG4gKiAgICAgPGhlYXRtYXAtbGF5ZXIgZGF0YT1cInRheGlEYXRhXCI+PC9oZWF0bWFwLWxheWVyPlxuICogICA8L21hcD5cbiAqL1xuLypqc2hpbnQgLVcwODkqL1xubmdNYXAuZGlyZWN0aXZlKCdoZWF0bWFwTGF5ZXInLCBbJ0F0dHIyT3B0aW9ucycsICckd2luZG93JywgZnVuY3Rpb24oQXR0cjJPcHRpb25zLCAkd2luZG93KSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG4gIFxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogJ15tYXAnLFxuXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtYXBDb250cm9sbGVyKSB7XG4gICAgICB2YXIgZmlsdGVyZWQgPSBwYXJzZXIuZmlsdGVyKGF0dHJzKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBzZXQgb3B0aW9ucyBcbiAgICAgICAqL1xuICAgICAgdmFyIG9wdGlvbnMgPSBwYXJzZXIuZ2V0T3B0aW9ucyhmaWx0ZXJlZCk7XG4gICAgICBvcHRpb25zLmRhdGEgPSAkd2luZG93W2F0dHJzLmRhdGFdIHx8IHNjb3BlW2F0dHJzLmRhdGFdO1xuICAgICAgaWYgKG9wdGlvbnMuZGF0YSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIG9wdGlvbnMuZGF0YSA9IG5ldyBnb29nbGUubWFwcy5NVkNBcnJheShvcHRpb25zLmRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgXCJpbnZhbGlkIGhlYXRtYXAgZGF0YVwiO1xuICAgICAgfVxuICAgICAgdmFyIGxheWVyID0gbmV3IGdvb2dsZS5tYXBzLnZpc3VhbGl6YXRpb24uSGVhdG1hcExheWVyKG9wdGlvbnMpO1xuXG4gICAgICAvKipcbiAgICAgICAqIHNldCBldmVudHMgXG4gICAgICAgKi9cbiAgICAgIHZhciBldmVudHMgPSBwYXJzZXIuZ2V0RXZlbnRzKHNjb3BlLCBmaWx0ZXJlZCk7XG4gICAgICB2b2lkIDA7XG5cbiAgICAgIG1hcENvbnRyb2xsZXIuYWRkT2JqZWN0KCdoZWF0bWFwTGF5ZXJzJywgbGF5ZXIpO1xuICAgIH1cbiAgIH07IC8vIHJldHVyblxufV0pO1xuXG4vKmpzaGludCAtVzAzMCovXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIGluZm8td2luZG93IFxuICogQHJlcXVpcmVzIEF0dHIyT3B0aW9ucyBcbiAqIEByZXF1aXJlcyAkY29tcGlsZVxuICogQGRlc2NyaXB0aW9uIFxuICogICBEZWZpbmVzIGluZm9XaW5kb3cgYW5kIHByb3ZpZGVzIGNvbXBpbGUgbWV0aG9kXG4gKiAgIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqXG4gKiAgIFJlc3RyaWN0IFRvOiAgRWxlbWVudFxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gdmlzaWJsZSBJbmRpY2F0ZXMgdG8gc2hvdyBpdCB3aGVuIG1hcCBpcyBpbml0aWFsaXplZFxuICogQHBhcmFtIHtCb29sZWFufSB2aXNpYmxlLW9uLW1hcmtlciBJbmRpY2F0ZXMgdG8gc2hvdyBpdCBvbiBhIG1hcmtlciB3aGVuIG1hcCBpcyBpbml0aWFsaXplZFxuICogQHBhcmFtIHtTdHJpbmd9ICZsdDtJbmZvV2luZG93T3B0aW9uPiBBbnkgSW5mb1dpbmRvdyBvcHRpb25zLFxuICogICAgICAgIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi9qYXZhc2NyaXB0L3JlZmVyZW5jZT9jc3c9MSNJbmZvV2luZG93T3B0aW9ucyAgXG4gKiBAcGFyYW0ge1N0cmluZ30gJmx0O0luZm9XaW5kb3dFdmVudD4gQW55IEluZm9XaW5kb3cgZXZlbnRzLCBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC9yZWZlcmVuY2VcbiAqIEBleGFtcGxlXG4gKiBVc2FnZTogXG4gKiAgIDxtYXAgTUFQX0FUVFJJQlVURVM+XG4gKiAgICA8aW5mby13aW5kb3cgaWQ9XCJmb29cIiBBTllfT1BUSU9OUyBBTllfRVZFTlRTXCI+PC9pbmZvLXdpbmRvdz5cbiAqICAgPC9tYXA+XG4gKlxuICogRXhhbXBsZTogXG4gKiAgPG1hcCBjZW50ZXI9XCI0MS44NTAwMzMsLTg3LjY1MDA1MjNcIiB6b29tPVwiM1wiPlxuICogICAgPGluZm8td2luZG93IGlkPVwiMVwiIHBvc2l0aW9uPVwiNDEuODUwMDMzLC04Ny42NTAwNTIzXCIgPlxuICogICAgICA8ZGl2IG5nLW5vbi1iaW5kYWJsZT5cbiAqICAgICAgICBDaGljYWdvLCBJTDxici8+XG4gKiAgICAgICAgTGF0TG5nOiB7e2NoaWNhZ28ubGF0KCl9fSwge3tjaGljYWdvLmxuZygpfX0sIDxici8+XG4gKiAgICAgICAgV29ybGQgQ29vcmRpbmF0ZToge3t3b3JsZENvb3JkaW5hdGUueH19LCB7e3dvcmxkQ29vcmRpbmF0ZS55fX0sIDxici8+XG4gKiAgICAgICAgUGl4ZWwgQ29vcmRpbmF0ZToge3twaXhlbENvb3JkaW5hdGUueH19LCB7e3BpeGVsQ29vcmRpbmF0ZS55fX0sIDxici8+XG4gKiAgICAgICAgVGlsZSBDb29yZGluYXRlOiB7e3RpbGVDb29yZGluYXRlLnh9fSwge3t0aWxlQ29vcmRpbmF0ZS55fX0gYXQgWm9vbSBMZXZlbCB7e21hcC5nZXRab29tKCl9fVxuICogICAgICA8L2Rpdj5cbiAqICAgIDwvaW5mby13aW5kb3c+XG4gKiAgPC9tYXA+XG4gKi9cbm5nTWFwLmRpcmVjdGl2ZSgnaW5mb1dpbmRvdycsIFsnQXR0cjJPcHRpb25zJywgJyRjb21waWxlJywgJyR0aW1lb3V0JywgZnVuY3Rpb24oQXR0cjJPcHRpb25zLCAkY29tcGlsZSwgJHRpbWVvdXQpICB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG5cbiAgdmFyIGdldEluZm9XaW5kb3cgPSBmdW5jdGlvbihvcHRpb25zLCBldmVudHMsIGVsZW1lbnQpIHtcbiAgICB2YXIgaW5mb1dpbmRvdztcblxuICAgIC8qKlxuICAgICAqIHNldCBvcHRpb25zXG4gICAgICovXG4gICAgaWYgKG9wdGlvbnMucG9zaXRpb24gJiYgXG4gICAgICAhKG9wdGlvbnMucG9zaXRpb24gaW5zdGFuY2VvZiBnb29nbGUubWFwcy5MYXRMbmcpKSB7XG4gICAgICB2YXIgYWRkcmVzcyA9IG9wdGlvbnMucG9zaXRpb247XG4gICAgICBkZWxldGUgb3B0aW9ucy5wb3NpdGlvbjtcbiAgICAgIGluZm9XaW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdyhvcHRpb25zKTtcbiAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpbmZvV2luZG93Lm9wZW4oaW5mb1dpbmRvdy5tYXApO1xuICAgICAgfVxuICAgICAgcGFyc2VyLnNldERlbGF5ZWRHZW9Mb2NhdGlvbihpbmZvV2luZG93LCAnc2V0UG9zaXRpb24nLCBhZGRyZXNzLCB7Y2FsbGJhY2s6IGNhbGxiYWNrfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluZm9XaW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdyhvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgZXZlbnRzXG4gICAgICovXG4gICAgaWYgKE9iamVjdC5rZXlzKGV2ZW50cykubGVuZ3RoID4gMCkge1xuICAgICAgdm9pZCAwO1xuICAgIH1cbiAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gZXZlbnRzKSB7XG4gICAgICBpZiAoZXZlbnROYW1lKSB7XG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKGluZm9XaW5kb3csIGV2ZW50TmFtZSwgZXZlbnRzW2V2ZW50TmFtZV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCB0ZW1wbGF0ZSBhbmUgdGVtcGxhdGUtcmVsYXRlIGZ1bmN0aW9uc1xuICAgICAqIGl0IG11c3QgaGF2ZSBhIGNvbnRhaW5lciBlbGVtZW50IHdpdGggbmctbm9uLWJpbmRhYmxlXG4gICAgICovXG4gICAgdmFyIHRlbXBsYXRlID0gZWxlbWVudC5odG1sKCkudHJpbSgpO1xuICAgIGlmIChhbmd1bGFyLmVsZW1lbnQodGVtcGxhdGUpLmxlbmd0aCAhPSAxKSB7XG4gICAgICB0aHJvdyBcImluZm8td2luZG93IHdvcmtpbmcgYXMgYSB0ZW1wbGF0ZSBtdXN0IGhhdmUgYSBjb250YWluZXJcIjtcbiAgICB9XG4gICAgaW5mb1dpbmRvdy5fX3RlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvXFxzP25nLW5vbi1iaW5kYWJsZVs9J1wiXSsvLFwiXCIpO1xuXG4gICAgaW5mb1dpbmRvdy5fX2NvbXBpbGUgPSBmdW5jdGlvbihzY29wZSkge1xuICAgICAgdmFyIGVsID0gJGNvbXBpbGUoaW5mb1dpbmRvdy5fX3RlbXBsYXRlKShzY29wZSk7XG4gICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudChlbFswXSk7XG4gICAgfTtcblxuICAgIGluZm9XaW5kb3cuX19ldmFsID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciB0ZW1wbGF0ZSA9IGluZm9XaW5kb3cuX190ZW1wbGF0ZTtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoL3t7KGV2ZW50fHRoaXMpW147XFx9XSt9fS9nLCBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IG1hdGNoLnJlcGxhY2UoL1t7fV0vZywgXCJcIikucmVwbGFjZShcInRoaXMuXCIsIFwiX3RoaXMuXCIpO1xuICAgICAgICByZXR1cm4gZXZhbChleHByZXNzaW9uKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgIH07XG5cbiAgICByZXR1cm4gaW5mb1dpbmRvdztcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogJ15tYXAnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbWFwQ29udHJvbGxlcikge1xuICAgICAgZWxlbWVudC5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XG4gICAgICB2YXIgb3JnQXR0cnMgPSBwYXJzZXIub3JnQXR0cmlidXRlcyhlbGVtZW50KTtcbiAgICAgIHZhciBmaWx0ZXJlZCA9IHBhcnNlci5maWx0ZXIoYXR0cnMpO1xuICAgICAgdmFyIG9wdGlvbnMgPSBwYXJzZXIuZ2V0T3B0aW9ucyhmaWx0ZXJlZCwgc2NvcGUpO1xuICAgICAgdmFyIGV2ZW50cyA9IHBhcnNlci5nZXRFdmVudHMoc2NvcGUsIGZpbHRlcmVkKTtcbiAgICAgIHZvaWQgMDtcblxuICAgICAgdmFyIGluZm9XaW5kb3cgPSBnZXRJbmZvV2luZG93KG9wdGlvbnMsIGV2ZW50cywgZWxlbWVudCk7XG5cbiAgICAgIG1hcENvbnRyb2xsZXIuYWRkT2JqZWN0KCdpbmZvV2luZG93cycsIGluZm9XaW5kb3cpO1xuICAgICAgcGFyc2VyLm9ic2VydmVBdHRyU2V0T2JqKG9yZ0F0dHJzLCBhdHRycywgaW5mb1dpbmRvdyk7IC8qIG9ic2VydmVycyAqL1xuXG4gICAgICAvLyBzaG93IEluZm9XaW5kb3cgd2hlbiBpbml0aWFsaXplZFxuICAgICAgaWYgKGluZm9XaW5kb3cudmlzaWJsZSkge1xuICAgICAgICAvL2lmICghaW5mb1dpbmRvdy5wb3NpdGlvbikgeyB0aHJvdyBcIkludmFsaWQgcG9zaXRpb25cIjsgfVxuICAgICAgICBzY29wZS4kb24oJ21hcEluaXRpYWxpemVkJywgZnVuY3Rpb24oZXZ0LCBtYXApIHtcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGluZm9XaW5kb3cuX190ZW1wbGF0ZSA9IGluZm9XaW5kb3cuX19ldmFsLmFwcGx5KHRoaXMsIFtldnRdKTtcbiAgICAgICAgICAgIGluZm9XaW5kb3cuX19jb21waWxlKHNjb3BlKTtcbiAgICAgICAgICAgIGluZm9XaW5kb3cubWFwID0gbWFwO1xuICAgICAgICAgICAgaW5mb1dpbmRvdy5wb3NpdGlvbiAmJiBpbmZvV2luZG93Lm9wZW4obWFwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHNob3cgSW5mb1dpbmRvdyBvbiBhIG1hcmtlciAgd2hlbiBpbml0aWFsaXplZFxuICAgICAgaWYgKGluZm9XaW5kb3cudmlzaWJsZU9uTWFya2VyKSB7XG4gICAgICAgIHNjb3BlLiRvbignbWFwSW5pdGlhbGl6ZWQnLCBmdW5jdGlvbihldnQsIG1hcCkge1xuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG1hcmtlcklkID0gaW5mb1dpbmRvdy52aXNpYmxlT25NYXJrZXI7XG4gICAgICAgICAgICB2YXIgbWFya2VyID0gbWFwLm1hcmtlcnNbbWFya2VySWRdO1xuICAgICAgICAgICAgaWYgKCFtYXJrZXIpIHRocm93IFwiSW52YWxpZCBtYXJrZXIgaWRcIjtcbiAgICAgICAgICAgIGluZm9XaW5kb3cuX190ZW1wbGF0ZSA9IGluZm9XaW5kb3cuX19ldmFsLmFwcGx5KHRoaXMsIFtldnRdKTtcbiAgICAgICAgICAgIGluZm9XaW5kb3cuX19jb21waWxlKHNjb3BlKTtcbiAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXAsIG1hcmtlcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIHByb3ZpZGUgc2hvd0luZm9XaW5kb3cgbWV0aG9kIHRvIHNjb3BlXG4gICAgICAgKi9cbiAgICAgIHNjb3BlLnNob3dJbmZvV2luZG93ICA9IHNjb3BlLnNob3dJbmZvV2luZG93IHx8XG4gICAgICAgIGZ1bmN0aW9uKGV2ZW50LCBpZCwgYW5jaG9yKSB7XG4gICAgICAgICAgdmFyIGluZm9XaW5kb3cgPSBtYXBDb250cm9sbGVyLm1hcC5pbmZvV2luZG93c1tpZF07XG4gICAgICAgICAgaW5mb1dpbmRvdy5fX3RlbXBsYXRlID0gaW5mb1dpbmRvdy5fX2V2YWwuYXBwbHkodGhpcywgW2V2ZW50XSk7XG4gICAgICAgICAgaW5mb1dpbmRvdy5fX2NvbXBpbGUoc2NvcGUpO1xuICAgICAgICAgIGlmIChhbmNob3IpIHtcbiAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXBDb250cm9sbGVyLm1hcCwgYW5jaG9yKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UG9zaXRpb24pIHtcbiAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXBDb250cm9sbGVyLm1hcCwgdGhpcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXBDb250cm9sbGVyLm1hcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIHByb3ZpZGUgaGlkZUluZm9XaW5kb3cgbWV0aG9kIHRvIHNjb3BlXG4gICAgICAgKi9cbiAgICAgIHNjb3BlLmhpZGVJbmZvV2luZG93ICA9IHNjb3BlLmhpZGVJbmZvV2luZG93IHx8XG4gICAgICAgIGZ1bmN0aW9uKGV2ZW50LCBpZCwgYW5jaG9yKSB7XG4gICAgICAgICAgdmFyIGluZm9XaW5kb3cgPSBtYXBDb250cm9sbGVyLm1hcC5pbmZvV2luZG93c1tpZF07XG4gICAgICAgICAgaW5mb1dpbmRvdy5fX3RlbXBsYXRlID0gaW5mb1dpbmRvdy5fX2V2YWwuYXBwbHkodGhpcywgW2V2ZW50XSk7XG4gICAgICAgICAgaW5mb1dpbmRvdy5fX2NvbXBpbGUoc2NvcGUpO1xuICAgICAgICAgIGluZm9XaW5kb3cuY2xvc2UoKTtcbiAgICAgICAgfTtcblxuICAgIH0gLy9saW5rXG4gIH07IC8vIHJldHVyblxufV0pOy8vIGZ1bmN0aW9uXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUga21sLWxheWVyXG4gKiBAcmVxdWlyZXMgQXR0cjJPcHRpb25zIFxuICogQGRlc2NyaXB0aW9uIFxuICogICByZW5kZXJzIEttbCBsYXllciBvbiBhIG1hcFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50XG4gKlxuICogQHBhcmFtIHtVcmx9IHVybCB1cmwgb2YgdGhlIGttbCBsYXllclxuICogQHBhcmFtIHtLbWxMYXllck9wdGlvbnN9IEttbExheWVyT3B0aW9uc1xuICogICAoaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcmVmZXJlbmNlI0ttbExheWVyT3B0aW9ucykgIFxuICogQHBhcmFtIHtTdHJpbmd9ICZsdDtLbWxMYXllckV2ZW50PiBBbnkgS21sTGF5ZXIgZXZlbnRzLCBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC9yZWZlcmVuY2VcbiAqIEBleGFtcGxlXG4gKiBVc2FnZTogXG4gKiAgIDxtYXAgTUFQX0FUVFJJQlVURVM+XG4gKiAgICA8a21sLWxheWVyIEFOWV9LTUxfTEFZRVIgQU5ZX0tNTF9MQVlFUl9FVkVOVFNcIj48L2ttbC1sYXllcj5cbiAqICAgPC9tYXA+XG4gKlxuICogRXhhbXBsZTogXG4gKlxuICogICA8bWFwIHpvb209XCIxMVwiIGNlbnRlcj1cIls0MS44NzU2OTYsLTg3LjYyNDIwN11cIj5cbiAqICAgICA8a21sLWxheWVyIHVybD1cImh0dHA6Ly9nbWFwcy1zYW1wbGVzLmdvb2dsZWNvZGUuY29tL3N2bi90cnVuay9nZ2VveG1sL2N0YS5rbWxcIiA+PC9rbWwtbGF5ZXI+XG4gKiAgICA8L21hcD5cbiAqL1xuLypqc2hpbnQgLVcwODkqL1xubmdNYXAuZGlyZWN0aXZlKCdrbWxMYXllcicsIFsnQXR0cjJPcHRpb25zJywgZnVuY3Rpb24oQXR0cjJPcHRpb25zKSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG4gIFxuICB2YXIgZ2V0S21sTGF5ZXIgPSBmdW5jdGlvbihvcHRpb25zLCBldmVudHMpIHtcbiAgICB2YXIga21sTGF5ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuS21sTGF5ZXIob3B0aW9ucyk7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50cykge1xuICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIoa21sTGF5ZXIsIGV2ZW50TmFtZSwgZXZlbnRzW2V2ZW50TmFtZV0pO1xuICAgIH1cbiAgICByZXR1cm4ga21sTGF5ZXI7XG4gIH07XG4gIFxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogJ15tYXAnLFxuXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtYXBDb250cm9sbGVyKSB7XG4gICAgICB2YXIgb3JnQXR0cnMgPSBwYXJzZXIub3JnQXR0cmlidXRlcyhlbGVtZW50KTtcbiAgICAgIHZhciBmaWx0ZXJlZCA9IHBhcnNlci5maWx0ZXIoYXR0cnMpO1xuICAgICAgdmFyIG9wdGlvbnMgPSBwYXJzZXIuZ2V0T3B0aW9ucyhmaWx0ZXJlZCk7XG4gICAgICB2YXIgZXZlbnRzID0gcGFyc2VyLmdldEV2ZW50cyhzY29wZSwgZmlsdGVyZWQpO1xuICAgICAgdm9pZCAwO1xuXG4gICAgICB2YXIga21sTGF5ZXIgPSBnZXRLbWxMYXllcihvcHRpb25zLCBldmVudHMpO1xuICAgICAgbWFwQ29udHJvbGxlci5hZGRPYmplY3QoJ2ttbExheWVycycsIGttbExheWVyKTtcbiAgICAgIHBhcnNlci5vYnNlcnZlQXR0clNldE9iaihvcmdBdHRycywgYXR0cnMsIGttbExheWVyKTsgIC8vb2JzZXJ2ZXJzXG4gICAgfVxuICAgfTsgLy8gcmV0dXJuXG59XSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbWFwLWRhdGFcbiAqIEBkZXNjcmlwdGlvbiBcbiAqICAgc2V0IG1hcCBkYXRhXG4gKiAgIFJlcXVpcmVzOiAgbWFwIGRpcmVjdGl2ZVxuICogICBSZXN0cmljdCBUbzogIEVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kLW5hbWUsIHJ1biBtYXAuZGF0YVttZXRob2QtbmFtZV0gd2l0aCBhdHRyaWJ1dGUgdmFsdWVcbiAqIEBleGFtcGxlXG4gKiBFeGFtcGxlOiBcbiAqXG4gKiAgIDxtYXAgem9vbT1cIjExXCIgY2VudGVyPVwiWzQxLjg3NTY5NiwtODcuNjI0MjA3XVwiPlxuICogICAgIDxtYXAtZGF0YSBsb2FkLWdlby1qc29uPVwiaHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL21hcHMtZGV2cmVsL2dvb2dsZS5qc29uXCI+PC9tYXAtZGF0YT5cbiAqICAgIDwvbWFwPlxuICovXG5uZ01hcC5kaXJlY3RpdmUoJ21hcERhdGEnLCBbJ0F0dHIyT3B0aW9ucycsIGZ1bmN0aW9uKEF0dHIyT3B0aW9ucykge1xuICB2YXIgcGFyc2VyID0gQXR0cjJPcHRpb25zO1xuICBcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6ICdebWFwJyxcblxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbWFwQ29udHJvbGxlcikge1xuICAgICAgdmFyIGZpbHRlcmVkID0gcGFyc2VyLmZpbHRlcihhdHRycyk7XG4gICAgICB2YXIgb3B0aW9ucyA9IHBhcnNlci5nZXRPcHRpb25zKGZpbHRlcmVkKTtcbiAgICAgIHZhciBldmVudHMgPSBwYXJzZXIuZ2V0RXZlbnRzKHNjb3BlLCBmaWx0ZXJlZCwgZXZlbnRzKTtcblxuICAgICAgdm9pZCAwO1xuICAgICAgc2NvcGUuJG9uKCdtYXBJbml0aWFsaXplZCcsIGZ1bmN0aW9uKGV2ZW50LCBtYXApIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIG9wdGlvbnNcbiAgICAgICAgICovXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IG9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2NvcGVbdmFsXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgIG1hcC5kYXRhW2tleV0oc2NvcGVbdmFsXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtYXAuZGF0YVtrZXldKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSAvLyBpZiAoa2V5KVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50cykge1xuICAgICAgICAgIGlmIChldmVudHNbZXZlbnROYW1lXSkge1xuICAgICAgICAgICAgbWFwLmRhdGEuYWRkTGlzdGVuZXIoZXZlbnROYW1lLCBldmVudHNbZXZlbnROYW1lXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICB9OyAvLyByZXR1cm5cbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBtYXAtdHlwZVxuICogQHJlcXVpcmVzIEF0dHIyT3B0aW9ucyBcbiAqIEBkZXNjcmlwdGlvbiBcbiAqICAgUmVxdWlyZXM6ICBtYXAgZGlyZWN0aXZlXG4gKiAgIFJlc3RyaWN0IFRvOiAgRWxlbWVudFxuICpcbiAqIEBleGFtcGxlXG4gKiBFeGFtcGxlOiBcbiAqXG4gKiAgIDxtYXAgem9vbT1cIjEzXCIgY2VudGVyPVwiMzQuMDQ5MjQ1OTQxOTMxNjQsIC0xMTguMjQxMDQzMDkwODIwMzFcIj5cbiAqICAgICA8bWFwLXR5cGUgbmFtZT1cImNvb3JkaW5hdGVcIiBvYmplY3Q9XCJjb29yZGluYXRlTWFwVHlwZVwiPjwvbWFwLXR5cGU+XG4gKiAgIDwvbWFwPlxuICovXG4vKmpzaGludCAtVzA4OSovXG5uZ01hcC5kaXJlY3RpdmUoJ21hcFR5cGUnLCBbJ0F0dHIyT3B0aW9ucycsICckd2luZG93JywgZnVuY3Rpb24oQXR0cjJPcHRpb25zLCAkd2luZG93KSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG4gIFxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogJ15tYXAnLFxuXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtYXBDb250cm9sbGVyKSB7XG4gICAgICB2YXIgbWFwVHlwZU5hbWUgPSBhdHRycy5uYW1lLCBtYXBUeXBlT2JqZWN0O1xuICAgICAgaWYgKCFtYXBUeXBlTmFtZSkge1xuICAgICAgICB0aHJvdyBcImludmFsaWQgbWFwLXR5cGUgbmFtZVwiO1xuICAgICAgfVxuICAgICAgaWYgKGF0dHJzLm9iamVjdCkge1xuICAgICAgICB2YXIgX19zY29wZSA9IHNjb3BlW2F0dHJzLm9iamVjdF0gPyBzY29wZSA6ICR3aW5kb3c7XG4gICAgICAgIG1hcFR5cGVPYmplY3QgPSBfX3Njb3BlW2F0dHJzLm9iamVjdF07XG4gICAgICAgIGlmICh0eXBlb2YgbWFwVHlwZU9iamVjdCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBtYXBUeXBlT2JqZWN0ID0gbmV3IG1hcFR5cGVPYmplY3QoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFtYXBUeXBlT2JqZWN0KSB7XG4gICAgICAgIHRocm93IFwiaW52YWxpZCBtYXAtdHlwZSBvYmplY3RcIjtcbiAgICAgIH1cblxuICAgICAgc2NvcGUuJG9uKCdtYXBJbml0aWFsaXplZCcsIGZ1bmN0aW9uKGV2dCwgbWFwKSB7XG4gICAgICAgIG1hcC5tYXBUeXBlcy5zZXQobWFwVHlwZU5hbWUsIG1hcFR5cGVPYmplY3QpO1xuICAgICAgfSk7XG4gICAgICBtYXBDb250cm9sbGVyLmFkZE9iamVjdCgnbWFwVHlwZXMnLCBtYXBUeXBlT2JqZWN0KTtcbiAgICB9XG4gICB9OyAvLyByZXR1cm5cbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBtYXBcbiAqIEByZXF1aXJlcyBBdHRyMk9wdGlvbnNcbiAqIEBkZXNjcmlwdGlvblxuICogICBJbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgTWFwQ29udHJvbGxlcn1cbiAqICAgSW5pdGlhbGl6ZSBhIEdvb2dsZSBtYXAgd2l0aGluIGEgYDxkaXY+YCB0YWcgd2l0aCBnaXZlbiBvcHRpb25zIGFuZCByZWdpc3RlciBldmVudHNcbiAqICAgSXQgYWNjZXB0cyBjaGlsZHJlbiBkaXJlY3RpdmVzOyBtYXJrZXIsIHNoYXBlLCBvciBtYXJrZXItY2x1c3RlcmVyXG4gKlxuICogICBJdCBpbml0aWFsaXplIG1hcCwgY2hpbGRyZW4gdGFncywgdGhlbiBlbWl0cyBtZXNzYWdlIGFzIHNvb24gYXMgdGhlIGFjdGlvbiBpcyBkb25lXG4gKiAgIFRoZSBtZXNzYWdlIGVtaXR0ZWQgZnJvbSB0aGlzIGRpcmVjdGl2ZSBpcztcbiAqICAgICAuIG1hcEluaXRpYWxpemVkXG4gKlxuICogICBSZXN0cmljdCBUbzpcbiAqICAgICBFbGVtZW50XG4gKlxuICogQHBhcmFtIHtBcnJheX0gZ2VvLWZhbGxiYWNrLWNlbnRlciBcbiAqICAgIFRoZSBjZW50ZXIgb2YgbWFwIGluY2FzZSBnZW9sb2NhdGlvbiBmYWlsZWQuIGkuZS4gWzAsMF1cbiAqIEBwYXJhbSB7U3RyaW5nfSBpbml0LWV2ZW50IFRoZSBuYW1lIG9mIGV2ZW50IHRvIGluaXRpYWxpemUgdGhpcyBtYXAuIFxuICogICAgICAgIElmIHRoaXMgb3B0aW9uIGlzIGdpdmVuLCB0aGUgbWFwIHdvbid0IGJlIGluaXRpYWxpemVkIHVudGlsIHRoZSBldmVudCBpcyByZWNlaXZlZC5cbiAqICAgICAgICBUbyBpbnZva2UgdGhlIGV2ZW50LCB1c2UgJHNjb3BlLiRlbWl0IG9yICRzY29wZS4kYnJvYWNhc3QuIFxuICogICAgICAgIGkuZS4gPG1hcCBpbml0LWV2ZW50PVwiaW5pdC1tYXBcIiBuZy1jbGljaz1cIiRlbWl0KCdpbml0LW1hcCcpXCIgY2VudGVyPS4uLiA+PC9tYXA+XG4gKiBAcGFyYW0ge1N0cmluZ30gJmx0O01hcE9wdGlvbj4gQW55IEdvb2dsZSBtYXAgb3B0aW9ucywgXG4gKiAgICAgICAgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcmVmZXJlbmNlP2Nzdz0xI01hcE9wdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSAmbHQ7TWFwRXZlbnQ+IEFueSBHb29nbGUgbWFwIGV2ZW50cywgXG4gKiAgICAgICAgaHR0cHM6Ly9yYXdnaXQuY29tL2FsbGVuaHdraW0vYW5ndWxhcmpzLWdvb2dsZS1tYXBzL21hc3Rlci9idWlsZC9tYXBfZXZlbnRzLmh0bWxcbiAqIEBleGFtcGxlXG4gKiBVc2FnZTpcbiAqICAgPG1hcCBNQVBfT1BUSU9OU19PUl9NQVBfRVZFTlRTIC4uPlxuICogICAgIC4uLiBBbnkgY2hpbGRyZW4gZGlyZWN0aXZlc1xuICogICA8L21hcD5cbiAqIFxuICogRXhhbXBsZTpcbiAqICAgPG1hcCBjZW50ZXI9XCJbNDAuNzQsIC03NC4xOF1cIiBvbi1jbGljaz1cImRvVGhhdCgpXCI+XG4gKiAgIDwvbWFwPlxuICpcbiAqICAgPG1hcCBnZW8tZmFsbGJhY2stY2VudGVyPVwiWzQwLjc0LCAtNzQuMThdXCI+XG4gKiAgIDwvbWFwPlxuICovXG4vKmpzaGludCAtVzAzMCovXG5uZ01hcC5kaXJlY3RpdmUoJ21hcCcsIFsnQXR0cjJPcHRpb25zJywgJyR0aW1lb3V0JywgZnVuY3Rpb24oQXR0cjJPcHRpb25zLCAkdGltZW91dCkge1xuICB2YXIgcGFyc2VyID0gQXR0cjJPcHRpb25zO1xuICBmdW5jdGlvbiBnZXRTdHlsZShlbCxzdHlsZVByb3ApXG4gIHtcbiAgICBpZiAoZWwuY3VycmVudFN0eWxlKSB7XG4gICAgICB2YXIgeSA9IGVsLmN1cnJlbnRTdHlsZVtzdHlsZVByb3BdO1xuICAgIH0gZWxzZSBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUpIHtcbiAgICAgIHZhciB5ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbCxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHN0eWxlUHJvcCk7XG4gICAgfVxuICAgIHJldHVybiB5O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0FFJyxcbiAgICBjb250cm9sbGVyOiBuZ01hcC5NYXBDb250cm9sbGVyLFxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgbWFwIGFuZCBldmVudHNcbiAgICAgKiBAbWVtYmVyb2YgbWFwXG4gICAgICogQHBhcmFtIHskc2NvcGV9IHNjb3BlXG4gICAgICogQHBhcmFtIHthbmd1bGFyLmVsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge0hhc2h9IGF0dHJzXG4gICAgICogQGN0cmwge01hcENvbnRyb2xsZXJ9IGN0cmxcbiAgICAgKi9cbiAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG4gICAgICB2YXIgb3JnQXR0cnMgPSBwYXJzZXIub3JnQXR0cmlidXRlcyhlbGVtZW50KTtcblxuICAgICAgc2NvcGUuZ29vZ2xlID0gZ29vZ2xlOyAgLy91c2VkIGJ5ICRzY29wZS5ldmFsIGluIEF0dHIyT3B0aW9ucyB0byBhdm9pZCBldmFsKClcblxuICAgICAgLyoqXG4gICAgICAgKiBjcmVhdGUgYSBuZXcgYGRpdmAgaW5zaWRlIG1hcCB0YWcsIHNvIHRoYXQgaXQgZG9lcyBub3QgdG91Y2ggbWFwIGVsZW1lbnRcbiAgICAgICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjA5NTUzNTZcbiAgICAgICAqL1xuICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGVsLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICBlbC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcbiAgICAgIGVsZW1lbnQucHJlcGVuZChlbCk7XG5cbiAgICAgIC8qKlxuICAgICAgICogaWYgc3R5bGUgaXMgbm90IGdpdmVuIHRvIHRoZSBtYXAgZWxlbWVudCwgc2V0IGRpc3BsYXkgYW5kIGhlaWdodFxuICAgICAgICovXG4gICAgICBpZiAoZ2V0U3R5bGUoZWxlbWVudFswXSwgJ2Rpc3BsYXknKSAhPSBcImJsb2NrXCIpIHtcbiAgICAgICAgZWxlbWVudC5jc3MoJ2Rpc3BsYXknLCdibG9jaycpO1xuICAgICAgfVxuICAgICAgaWYgKGdldFN0eWxlKGVsZW1lbnRbMF0sICdoZWlnaHQnKS5tYXRjaCgvXigwfGF1dG8pLykpIHtcbiAgICAgICAgZWxlbWVudC5jc3MoJ2hlaWdodCcsJzMwMHB4Jyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogaW5pdGlhbGl6ZSBmdW5jdGlvblxuICAgICAgICovXG4gICAgICB2YXIgaW5pdGlhbGl6ZU1hcCA9IGZ1bmN0aW9uKG1hcE9wdGlvbnMsIG1hcEV2ZW50cykge1xuICAgICAgICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChlbCwge30pO1xuICAgICAgICBtYXAubWFya2VycyA9IHt9O1xuICAgICAgICBtYXAuc2hhcGVzID0ge307XG4gICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXNpemUgdGhlIG1hcCB0byBwcmV2ZW50IHNob3dpbmcgcGFydGlhbGx5LCBpbiBjYXNlIGludGlhbGl6ZWQgdG9vIGVhcmx5XG4gICAgICAgICAqL1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG1hcCwgXCJyZXNpemVcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzZXQgb3B0aW9uc1xuICAgICAgICAgKi9cbiAgICAgICAgbWFwT3B0aW9ucy56b29tID0gbWFwT3B0aW9ucy56b29tIHx8IDE1O1xuICAgICAgICB2YXIgY2VudGVyID0gbWFwT3B0aW9ucy5jZW50ZXI7XG4gICAgICAgIGlmICghY2VudGVyKSB7XG4gICAgICAgICAgbWFwT3B0aW9ucy5jZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDAsMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIShjZW50ZXIgaW5zdGFuY2VvZiBnb29nbGUubWFwcy5MYXRMbmcpKSB7XG4gICAgICAgICAgZGVsZXRlIG1hcE9wdGlvbnMuY2VudGVyO1xuICAgICAgICAgIEF0dHIyT3B0aW9ucy5zZXREZWxheWVkR2VvTG9jYXRpb24obWFwLCAnc2V0Q2VudGVyJywgXG4gICAgICAgICAgICAgIGNlbnRlciwge2ZhbGxiYWNrTG9jYXRpb246IG9wdGlvbnMuZ2VvRmFsbGJhY2tDZW50ZXJ9KTtcbiAgICAgICAgfVxuICAgICAgICBtYXAuc2V0T3B0aW9ucyhtYXBPcHRpb25zKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2V0IGV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgZm9yICh2YXIgZXZlbnROYW1lIGluIG1hcEV2ZW50cykge1xuICAgICAgICAgIGlmIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgZXZlbnROYW1lLCBtYXBFdmVudHNbZXZlbnROYW1lXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNldCBvYnNlcnZlcnNcbiAgICAgICAgICovXG4gICAgICAgIHBhcnNlci5vYnNlcnZlQXR0clNldE9iaihvcmdBdHRycywgYXR0cnMsIG1hcCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNldCBjb250cm9sbGVyIGFuZCBzZXQgb2JqZWN0c1xuICAgICAgICAgKiBzbyB0aGF0IG1hcCBjYW4gYmUgdXNlZCBieSBvdGhlciBkaXJlY3RpdmVzOyBtYXJrZXIgb3Igc2hhcGUgXG4gICAgICAgICAqIGN0cmwuX29iamVjdHMgYXJlIGdhdGhlcmVkIHdoZW4gbWFya2VyIGFuZCBzaGFwZSBhcmUgaW5pdGlhbGl6ZWQgYmVmb3JlIG1hcCBpcyBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGN0cmwubWFwID0gbWFwOyAgIC8qIHNvIHRoYXQgbWFwIGNhbiBiZSB1c2VkIGJ5IG90aGVyIGRpcmVjdGl2ZXM7IG1hcmtlciBvciBzaGFwZSAqL1xuICAgICAgICBjdHJsLmFkZE9iamVjdHMoY3RybC5fb2JqZWN0cyk7XG5cbiAgICAgICAgLy8gLyogcHJvdmlkaW5nIG1ldGhvZCB0byBhZGQgYSBtYXJrZXIgdXNlZCBieSB1c2VyIHNjb3BlICovXG4gICAgICAgIC8vIG1hcC5hZGRNYXJrZXIgPSBjdHJsLmFkZE1hcmtlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2V0IG1hcCBmb3Igc2NvcGUgYW5kIGNvbnRyb2xsZXIgYW5kIGJyb2FkY2FzdCBtYXAgZXZlbnRcbiAgICAgICAgICogc2NvcGUubWFwIHdpbGwgYmUgb3ZlcndyaXR0ZW4gaWYgdXNlciBoYXZlIG11bHRpcGxlIG1hcHMgaW4gYSBzY29wZSxcbiAgICAgICAgICogdGh1cyB0aGUgbGFzdCBtYXAgd2lsbCBiZSBzZXQgYXMgc2NvcGUubWFwLlxuICAgICAgICAgKiBob3dldmVyIGFuIGBtYXBJbml0aWFsaXplZGAgZXZlbnQgd2lsbCBiZSBlbWl0dGVkIGV2ZXJ5IHRpbWUuXG4gICAgICAgICAqL1xuICAgICAgICBzY29wZS5tYXAgPSBtYXA7XG4gICAgICAgIHNjb3BlLm1hcC5zY29wZSA9IHNjb3BlO1xuICAgICAgICAvL2dvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZShtYXAsIFwiaWRsZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2NvcGUuJGVtaXQoJ21hcEluaXRpYWxpemVkJywgbWFwKTsgIFxuICAgICAgICAvL30pO1xuXG4gICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgbGluZXMgd2lsbCBiZSBkZXByZWNhdGVkIG9uIGJlaGFsZiBvZiBtYXBJbml0aWFsaXplZFxuICAgICAgICAvLyB0byBjb2xsZWN0IG1hcHMsIHdlIHNob3VsZCB1c2Ugc2NvcGUubWFwcyBpbiB5b3VyIG93biBjb250cm9sbGVyLCBpLmUuIE15Q3RybFxuICAgICAgICBzY29wZS5tYXBzID0gc2NvcGUubWFwcyB8fCB7fTsgXG4gICAgICAgIHNjb3BlLm1hcHNbb3B0aW9ucy5pZHx8T2JqZWN0LmtleXMoc2NvcGUubWFwcykubGVuZ3RoXSA9IG1hcDtcbiAgICAgICAgc2NvcGUuJGVtaXQoJ21hcHNJbml0aWFsaXplZCcsIHNjb3BlLm1hcHMpOyAgXG4gICAgICB9OyAvLyBmdW5jdGlvbiBpbml0aWFsaXplTWFwKClcblxuICAgICAgLyoqXG4gICAgICAgKiBnZXQgbWFwIG9wdGlvbnMgYW5kIGV2ZW50c1xuICAgICAgICovXG4gICAgICB2YXIgZmlsdGVyZWQgPSBwYXJzZXIuZmlsdGVyKGF0dHJzKTtcbiAgICAgIHZhciBvcHRpb25zID0gcGFyc2VyLmdldE9wdGlvbnMoZmlsdGVyZWQsIHNjb3BlKTtcbiAgICAgIHZhciBjb250cm9sT3B0aW9ucyA9IHBhcnNlci5nZXRDb250cm9sT3B0aW9ucyhmaWx0ZXJlZCk7XG4gICAgICB2YXIgbWFwT3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKG9wdGlvbnMsIGNvbnRyb2xPcHRpb25zKTtcbiAgICAgIHZhciBtYXBFdmVudHMgPSBwYXJzZXIuZ2V0RXZlbnRzKHNjb3BlLCBmaWx0ZXJlZCk7XG4gICAgICB2b2lkIDA7XG5cbiAgICAgIGlmIChhdHRycy5pbml0RXZlbnQpIHsgLy8gYWxsb3dzIGNvbnRyb2xsZWQgaW5pdGlhbGl6YXRpb25cbiAgICAgICAgc2NvcGUuJG9uKGF0dHJzLmluaXRFdmVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgIWN0cmwubWFwICYmIGluaXRpYWxpemVNYXAobWFwT3B0aW9ucywgbWFwRXZlbnRzKTsgLy8gaW5pdCBpZiBub3QgZG9uZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluaXRpYWxpemVNYXAobWFwT3B0aW9ucywgbWFwRXZlbnRzKTtcbiAgICAgIH0gLy8gaWZcbiAgICB9XG4gIH07IFxufV0pO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIE1hcENvbnRyb2xsZXJcbiAqIEByZXF1aXJlcyAkc2NvcGVcbiAqIEBwcm9wZXJ0eSB7SGFzaH0gY29udHJvbHMgY29sbGVjdGlvbiBvZiBDb250cm9scyBpbml0aWF0ZWQgd2l0aGluIGBtYXBgIGRpcmVjdGl2ZVxuICogQHByb3BlcnR5IHtIYXNofSBtYXJrZXJzaSBjb2xsZWN0aW9uIG9mIE1hcmtlcnMgaW5pdGlhdGVkIHdpdGhpbiBgbWFwYCBkaXJlY3RpdmVcbiAqIEBwcm9wZXJ0eSB7SGFzaH0gc2hhcGVzIGNvbGxlY3Rpb24gb2Ygc2hhcGVzIGluaXRpYXRlZCB3aXRoaW4gYG1hcGAgZGlyZWN0aXZlXG4gKiBAcHJvcGVydHkge01hcmtlckNsdXN0ZXJlcn0gbWFya2VyQ2x1c3RlcmVyIE1hcmtlckNsdXN0ZXJlciBpbml0aWF0ZWQgd2l0aGluIGBtYXBgIGRpcmVjdGl2ZVxuICovXG4vKmpzaGludCAtVzA4OSovXG5uZ01hcC5NYXBDb250cm9sbGVyID0gZnVuY3Rpb24oKSB7IFxuXG4gIHRoaXMubWFwID0gbnVsbDtcbiAgdGhpcy5fb2JqZWN0cyA9IFtdO1xuXG4gIC8qKlxuICAgKiBBZGQgYSBtYXJrZXIgdG8gbWFwIGFuZCAkc2NvcGUubWFya2Vyc1xuICAgKiBAbWVtYmVyb2YgTWFwQ29udHJvbGxlclxuICAgKiBAbmFtZSBhZGRNYXJrZXJcbiAgICogQHBhcmFtIHtNYXJrZXJ9IG1hcmtlciBnb29nbGUgbWFwIG1hcmtlclxuICAgKi9cbiAgdGhpcy5hZGRNYXJrZXIgPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgICAvKipcbiAgICAgKiBtYXJrZXIgYW5kIHNoYXBlIGFyZSBpbml0aWFsaXplZCBiZWZvcmUgbWFwIGlzIGluaXRpYWxpemVkXG4gICAgICogc28sIGNvbGxlY3QgX29iamVjdHMgdGhlbiB3aWxsIGluaXQuIHRob3NlIHdoZW4gbWFwIGlzIGluaXRpYWxpemVkXG4gICAgICogSG93ZXZlciB0aGUgY2FzZSBhcyBpbiBuZy1yZXBlYXQsIHdlIGNhbiBkaXJlY3RseSBhZGQgdG8gbWFwXG4gICAgICovXG4gICAgaWYgKHRoaXMubWFwKSB7XG4gICAgICB0aGlzLm1hcC5tYXJrZXJzID0gdGhpcy5tYXAubWFya2VycyB8fCB7fTtcbiAgICAgIG1hcmtlci5zZXRNYXAodGhpcy5tYXApO1xuICAgICAgaWYgKG1hcmtlci5jZW50ZXJlZCkge1xuICAgICAgICB0aGlzLm1hcC5zZXRDZW50ZXIobWFya2VyLnBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICAgIHZhciBsZW4gPSBPYmplY3Qua2V5cyh0aGlzLm1hcC5tYXJrZXJzKS5sZW5ndGg7XG4gICAgICB0aGlzLm1hcC5tYXJrZXJzW21hcmtlci5pZCB8fCBsZW5dID0gbWFya2VyO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9vYmplY3RzLnB1c2gobWFya2VyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBhIHNoYXBlIHRvIG1hcCBhbmQgJHNjb3BlLnNoYXBlc1xuICAgKiBAbWVtYmVyb2YgTWFwQ29udHJvbGxlclxuICAgKiBAbmFtZSBhZGRTaGFwZVxuICAgKiBAcGFyYW0ge1NoYXBlfSBzaGFwZSBnb29nbGUgbWFwIHNoYXBlXG4gICAqL1xuICB0aGlzLmFkZFNoYXBlID0gZnVuY3Rpb24oc2hhcGUpIHtcbiAgICBpZiAodGhpcy5tYXApIHtcbiAgICAgIHRoaXMubWFwLnNoYXBlcyA9IHRoaXMubWFwLnNoYXBlcyB8fCB7fTtcbiAgICAgIHNoYXBlLnNldE1hcCh0aGlzLm1hcCk7XG4gICAgICB2YXIgbGVuID0gT2JqZWN0LmtleXModGhpcy5tYXAuc2hhcGVzKS5sZW5ndGg7XG4gICAgICB0aGlzLm1hcC5zaGFwZXNbc2hhcGUuaWQgfHwgbGVuXSA9IHNoYXBlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9vYmplY3RzLnB1c2goc2hhcGUpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLmFkZE9iamVjdCA9IGZ1bmN0aW9uKGdyb3VwTmFtZSwgb2JqKSB7XG4gICAgaWYgKHRoaXMubWFwKSB7XG4gICAgICB0aGlzLm1hcFtncm91cE5hbWVdID0gdGhpcy5tYXBbZ3JvdXBOYW1lXSB8fCB7fTtcbiAgICAgIHZhciBsZW4gPSBPYmplY3Qua2V5cyh0aGlzLm1hcFtncm91cE5hbWVdKS5sZW5ndGg7XG4gICAgICB0aGlzLm1hcFtncm91cE5hbWVdW29iai5pZCB8fCBsZW5dID0gb2JqO1xuICAgICAgaWYgKGdyb3VwTmFtZSAhPSBcImluZm9XaW5kb3dzXCIgJiYgb2JqLnNldE1hcCkgeyAvL2luZm9XaW5kb3cuc2V0TWFwIHdvcmtzIGxpa2UgaW5mb1dpbmRvdy5vcGVuXG4gICAgICAgIG9iai5zZXRNYXAodGhpcy5tYXApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvYmouZ3JvdXBOYW1lID0gZ3JvdXBOYW1lO1xuICAgICAgdGhpcy5fb2JqZWN0cy5wdXNoKG9iaik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHNoYXBlIHRvIG1hcCBhbmQgJHNjb3BlLnNoYXBlc1xuICAgKiBAbWVtYmVyb2YgTWFwQ29udHJvbGxlclxuICAgKiBAbmFtZSBhZGRTaGFwZVxuICAgKiBAcGFyYW0ge1NoYXBlfSBzaGFwZSBnb29nbGUgbWFwIHNoYXBlXG4gICAqL1xuICB0aGlzLmFkZE9iamVjdHMgPSBmdW5jdGlvbihvYmplY3RzKSB7XG4gICAgZm9yICh2YXIgaT0wOyBpPG9iamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvYmo9b2JqZWN0c1tpXTtcbiAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBnb29nbGUubWFwcy5NYXJrZXIpIHtcbiAgICAgICAgdGhpcy5hZGRNYXJrZXIob2JqKTtcbiAgICAgIH0gZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgZ29vZ2xlLm1hcHMuQ2lyY2xlIHx8XG4gICAgICAgIG9iaiBpbnN0YW5jZW9mIGdvb2dsZS5tYXBzLlBvbHlnb24gfHxcbiAgICAgICAgb2JqIGluc3RhbmNlb2YgZ29vZ2xlLm1hcHMuUG9seWxpbmUgfHxcbiAgICAgICAgb2JqIGluc3RhbmNlb2YgZ29vZ2xlLm1hcHMuUmVjdGFuZ2xlIHx8XG4gICAgICAgIG9iaiBpbnN0YW5jZW9mIGdvb2dsZS5tYXBzLkdyb3VuZE92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5hZGRTaGFwZShvYmopO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGRPYmplY3Qob2JqLmdyb3VwTmFtZSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbn07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbWFwcy1lbmdpbmUtbGF5ZXJcbiAqIEBkZXNjcmlwdGlvbiBcbiAqICAgUmVxdWlyZXM6ICBtYXAgZGlyZWN0aXZlXG4gKiAgIFJlc3RyaWN0IFRvOiAgRWxlbWVudFxuICpcbiAqIEBleGFtcGxlXG4gKiBFeGFtcGxlOiBcbiAqICAgPG1hcCB6b29tPVwiMTRcIiBjZW50ZXI9XCJbNTkuMzIyNTA2LCAxOC4wMTAwMjVdXCI+XG4gKiAgICAgPG1hcHMtZW5naW5lLWxheWVyIGxheWVyLWlkPVwiMDY2NzMwNTY0NTQwNDYxMzU1MzctMDg4OTY1MDE5OTc3NjY1NTM4MTFcIj48L21hcHMtZW5naW5lLWxheWVyPlxuICogICAgPC9tYXA+XG4gKi9cbi8qanNoaW50IC1XMDg5Ki9cbm5nTWFwLmRpcmVjdGl2ZSgnbWFwc0VuZ2luZUxheWVyJywgWydBdHRyMk9wdGlvbnMnLCBmdW5jdGlvbihBdHRyMk9wdGlvbnMpIHtcbiAgdmFyIHBhcnNlciA9IEF0dHIyT3B0aW9ucztcblxuICB2YXIgZ2V0TWFwc0VuZ2luZUxheWVyID0gZnVuY3Rpb24ob3B0aW9ucywgZXZlbnRzKSB7XG4gICAgdmFyIGxheWVyID0gbmV3IGdvb2dsZS5tYXBzLnZpc3VhbGl6YXRpb24uTWFwc0VuZ2luZUxheWVyKG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50cykge1xuICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobGF5ZXIsIGV2ZW50TmFtZSwgZXZlbnRzW2V2ZW50TmFtZV0pO1xuICAgIH1cblxuICAgIHJldHVybiBsYXllcjtcbiAgfTtcblxuICBcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6ICdebWFwJyxcblxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbWFwQ29udHJvbGxlcikge1xuICAgICAgdmFyIGZpbHRlcmVkID0gcGFyc2VyLmZpbHRlcihhdHRycyk7XG4gICAgICB2YXIgb3B0aW9ucyA9IHBhcnNlci5nZXRPcHRpb25zKGZpbHRlcmVkKTtcbiAgICAgIHZhciBldmVudHMgPSBwYXJzZXIuZ2V0RXZlbnRzKHNjb3BlLCBmaWx0ZXJlZCwgZXZlbnRzKTtcbiAgICAgIHZvaWQgMDtcblxuICAgICAgdmFyIGxheWVyID0gZ2V0TWFwc0VuZ2luZUxheWVyKG9wdGlvbnMsIGV2ZW50cyk7XG4gICAgICBtYXBDb250cm9sbGVyLmFkZE9iamVjdCgnbWFwc0VuZ2luZUxheWVycycsIGxheWVyKTtcbiAgICB9XG4gICB9OyAvLyByZXR1cm5cbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBtYXJrZXJcbiAqIEByZXF1aXJlcyBBdHRyMk9wdGlvbnMgXG4gKiBAcmVxdWlyZXMgTmF2aWdhdG9yR2VvbG9jYXRpb25cbiAqIEBkZXNjcmlwdGlvbiBcbiAqICAgRHJhdyBhIEdvb2dsZSBtYXAgbWFya2VyIG9uIGEgbWFwIHdpdGggZ2l2ZW4gb3B0aW9ucyBhbmQgcmVnaXN0ZXIgZXZlbnRzICBcbiAqICAgXG4gKiAgIFJlcXVpcmVzOiAgbWFwIGRpcmVjdGl2ZVxuICpcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50IFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwb3NpdGlvbiBhZGRyZXNzLCAnY3VycmVudCcsIG9yIFtsYXRpdHVkZSwgbG9uZ2l0dWRlXSAgXG4gKiAgICBleGFtcGxlOiAgXG4gKiAgICAgICcxNjAwIFBlbm5zeWx2YW5pYSBBdmUsIDIwNTAwICBXYXNoaW5ndGlvbiBEQycsICAgXG4gKiAgICAgICdjdXJyZW50IHBvc2l0aW9uJywgIFxuICogICAgICAnWzQwLjc0LCAtNzQuMThdJyAgXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGNlbnRlcmVkIGlmIHNldCwgbWFwIHdpbGwgYmUgY2VudGVyZWQgd2l0aCB0aGlzIG1hcmtlclxuICogQHBhcmFtIHtTdHJpbmd9ICZsdDtNYXJrZXJPcHRpb24+IEFueSBNYXJrZXIgb3B0aW9ucywgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcmVmZXJlbmNlP2Nzdz0xI01hcmtlck9wdGlvbnMgIFxuICogQHBhcmFtIHtTdHJpbmd9ICZsdDtNYXBFdmVudD4gQW55IE1hcmtlciBldmVudHMsIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi9qYXZhc2NyaXB0L3JlZmVyZW5jZVxuICogQGV4YW1wbGVcbiAqIFVzYWdlOiBcbiAqICAgPG1hcCBNQVBfQVRUUklCVVRFUz5cbiAqICAgIDxtYXJrZXIgQU5ZX01BUktFUl9PUFRJT05TIEFOWV9NQVJLRVJfRVZFTlRTXCI+PC9NQVJLRVI+XG4gKiAgIDwvbWFwPlxuICpcbiAqIEV4YW1wbGU6IFxuICogICA8bWFwIGNlbnRlcj1cIls0MC43NCwgLTc0LjE4XVwiPlxuICogICAgPG1hcmtlciBwb3NpdGlvbj1cIls0MC43NCwgLTc0LjE4XVwiIG9uLWNsaWNrPVwibXlmdW5jKClcIj48L2Rpdj5cbiAqICAgPC9tYXA+XG4gKlxuICogICA8bWFwIGNlbnRlcj1cInRoZSBjbiB0b3dlclwiPlxuICogICAgPG1hcmtlciBwb3NpdGlvbj1cInRoZSBjbiB0b3dlclwiIG9uLWNsaWNrPVwibXlmdW5jKClcIj48L2Rpdj5cbiAqICAgPC9tYXA+XG4gKi9cbm5nTWFwLmRpcmVjdGl2ZSgnbWFya2VyJywgWydBdHRyMk9wdGlvbnMnLCBmdW5jdGlvbihBdHRyMk9wdGlvbnMpICB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG5cbiAgdmFyIGdldE1hcmtlciA9IGZ1bmN0aW9uKG9wdGlvbnMsIGV2ZW50cykge1xuICAgIHZhciBtYXJrZXI7XG5cbiAgICAvKipcbiAgICAgKiBzZXQgb3B0aW9uc1xuICAgICAqL1xuICAgIGlmIChvcHRpb25zLmljb24gaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgIGlmICgoXCJcIitvcHRpb25zLmljb24ucGF0aCkubWF0Y2goL15bQS1aX10rJC8pKSB7XG4gICAgICAgIG9wdGlvbnMuaWNvbi5wYXRoID0gIGdvb2dsZS5tYXBzLlN5bWJvbFBhdGhbb3B0aW9ucy5pY29uLnBhdGhdO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMuaWNvbikge1xuICAgICAgICB2YXIgYXJyID0gb3B0aW9ucy5pY29uW2tleV07XG4gICAgICAgIGlmIChrZXkgPT0gXCJhbmNob3JcIiB8fCBrZXkgPT0gXCJvcmlnaW5cIikge1xuICAgICAgICAgIG9wdGlvbnMuaWNvbltrZXldID0gbmV3IGdvb2dsZS5tYXBzLlBvaW50KGFyclswXSwgYXJyWzFdKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT0gXCJzaXplXCIgfHwga2V5ID09IFwic2NhbGVkU2l6ZVwiKSB7XG4gICAgICAgICAgb3B0aW9ucy5pY29uW2tleV0gPSBuZXcgZ29vZ2xlLm1hcHMuU2l6ZShhcnJbMF0sIGFyclsxXSk7XG4gICAgICAgIH0gXG4gICAgICB9XG4gICAgfVxuICAgIGlmICghKG9wdGlvbnMucG9zaXRpb24gaW5zdGFuY2VvZiBnb29nbGUubWFwcy5MYXRMbmcpKSB7XG4gICAgICB2YXIgb3JnUG9zaXRpb24gPSBvcHRpb25zLnBvc2l0aW9uO1xuICAgICAgb3B0aW9ucy5wb3NpdGlvbiA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMCwwKTtcbiAgICAgIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIob3B0aW9ucyk7XG4gICAgICBwYXJzZXIuc2V0RGVsYXllZEdlb0xvY2F0aW9uKG1hcmtlciwgJ3NldFBvc2l0aW9uJywgb3JnUG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCBldmVudHNcbiAgICAgKi9cbiAgICBpZiAoT2JqZWN0LmtleXMoZXZlbnRzKS5sZW5ndGggPiAwKSB7XG4gICAgICB2b2lkIDA7XG4gICAgfVxuICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiBldmVudHMpIHtcbiAgICAgIGlmIChldmVudE5hbWUpIHtcbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCBldmVudE5hbWUsIGV2ZW50c1tldmVudE5hbWVdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWFya2VyO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXF1aXJlOiAnXm1hcCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtYXBDb250cm9sbGVyKSB7XG4gICAgICB2YXIgb3JnQXR0cnMgPSBwYXJzZXIub3JnQXR0cmlidXRlcyhlbGVtZW50KTtcbiAgICAgIHZhciBmaWx0ZXJlZCA9IHBhcnNlci5maWx0ZXIoYXR0cnMpO1xuICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSBwYXJzZXIuZ2V0T3B0aW9ucyhmaWx0ZXJlZCwgc2NvcGUpO1xuICAgICAgdmFyIG1hcmtlckV2ZW50cyA9IHBhcnNlci5nZXRFdmVudHMoc2NvcGUsIGZpbHRlcmVkKTtcbiAgICAgIHZvaWQgMDtcblxuICAgICAgLyoqXG4gICAgICAgKiBzZXQgZXZlbnQgdG8gY2xlYW4gdXAgcmVtb3ZlZCBtYXJrZXJcbiAgICAgICAqIHVzZWZ1bCB3aXRoIG5nLXJlcGVhdFxuICAgICAgICovXG4gICAgICBlbGVtZW50LmJpbmQoJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtYXJrZXJzID0gbWFya2VyLm1hcC5tYXJrZXJzO1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG1hcmtlcnMpIHtcbiAgICAgICAgICBpZiAobWFya2Vyc1tuYW1lXSA9PSBtYXJrZXIpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBtYXJrZXJzW25hbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpOyAgICAgICAgICBcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgbWFya2VyID0gZ2V0TWFya2VyKG1hcmtlck9wdGlvbnMsIG1hcmtlckV2ZW50cyk7XG4gICAgICBtYXBDb250cm9sbGVyLmFkZE1hcmtlcihtYXJrZXIpO1xuXG4gICAgICAvKipcbiAgICAgICAqIHNldCBvYnNlcnZlcnNcbiAgICAgICAqL1xuICAgICAgcGFyc2VyLm9ic2VydmVBdHRyU2V0T2JqKG9yZ0F0dHJzLCBhdHRycywgbWFya2VyKTsgLyogb2JzZXJ2ZXJzICovXG5cbiAgICB9IC8vbGlua1xuICB9OyAvLyByZXR1cm5cbn1dKTsvLyBcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBvdmVybGF5LW1hcC10eXBlXG4gKiBAcmVxdWlyZXMgQXR0cjJPcHRpb25zIFxuICogQGRlc2NyaXB0aW9uIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50XG4gKlxuICogQGV4YW1wbGVcbiAqIEV4YW1wbGU6IFxuICpcbiAqICAgPG1hcCB6b29tPVwiMTNcIiBjZW50ZXI9XCIzNC4wNDkyNDU5NDE5MzE2NCwgLTExOC4yNDEwNDMwOTA4MjAzMVwiPlxuICogICAgIDxvdmVybGF5LW1hcC10eXBlIGluZGV4PVwiMFwiIG9iamVjdD1cImNvb3JkaW5hdGVNYXBUeXBlXCI+PC9tYXAtdHlwZT5cbiAqICAgPC9tYXA+XG4gKi9cbi8qanNoaW50IC1XMDg5Ki9cbm5nTWFwLmRpcmVjdGl2ZSgnb3ZlcmxheU1hcFR5cGUnLCBbJ0F0dHIyT3B0aW9ucycsICckd2luZG93JywgZnVuY3Rpb24oQXR0cjJPcHRpb25zLCAkd2luZG93KSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG4gIFxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogJ15tYXAnLFxuXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtYXBDb250cm9sbGVyKSB7XG4gICAgICB2YXIgb3ZlcmxheU1hcFR5cGVPYmplY3Q7XG4gICAgICB2YXIgaW5pdE1ldGhvZCA9IGF0dHJzLmluaXRNZXRob2QgfHwgXCJpbnNlcnRBdFwiO1xuICAgICAgaWYgKGF0dHJzLm9iamVjdCkge1xuICAgICAgICB2YXIgX19zY29wZSA9IHNjb3BlW2F0dHJzLm9iamVjdF0gPyBzY29wZSA6ICR3aW5kb3c7XG4gICAgICAgIG92ZXJsYXlNYXBUeXBlT2JqZWN0ID0gX19zY29wZVthdHRycy5vYmplY3RdO1xuICAgICAgICBpZiAodHlwZW9mIG92ZXJsYXlNYXBUeXBlT2JqZWN0ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIG92ZXJsYXlNYXBUeXBlT2JqZWN0ID0gbmV3IG92ZXJsYXlNYXBUeXBlT2JqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghb3ZlcmxheU1hcFR5cGVPYmplY3QpIHtcbiAgICAgICAgdGhyb3cgXCJpbnZhbGlkIG1hcC10eXBlIG9iamVjdFwiO1xuICAgICAgfVxuXG4gICAgICBzY29wZS4kb24oJ21hcEluaXRpYWxpemVkJywgZnVuY3Rpb24oZXZ0LCBtYXApIHtcbiAgICAgICAgaWYgKGluaXRNZXRob2QgPT0gXCJpbnNlcnRBdFwiKSB7XG4gICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQoYXR0cnMuaW5kZXgsIDEwKTtcbiAgICAgICAgICBtYXAub3ZlcmxheU1hcFR5cGVzLmluc2VydEF0KGluZGV4LCBvdmVybGF5TWFwVHlwZU9iamVjdCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5pdE1ldGhvZCA9PSBcInB1c2hcIikge1xuICAgICAgICAgIG1hcC5vdmVybGF5TWFwVHlwZXMucHVzaChvdmVybGF5TWFwVHlwZU9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbWFwQ29udHJvbGxlci5hZGRPYmplY3QoJ292ZXJsYXlNYXBUeXBlcycsIG92ZXJsYXlNYXBUeXBlT2JqZWN0KTtcbiAgICB9XG4gICB9OyAvLyByZXR1cm5cbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBzaGFwZVxuICogQHJlcXVpcmVzIEF0dHIyT3B0aW9ucyBcbiAqIEBkZXNjcmlwdGlvbiBcbiAqICAgSW5pdGlhbGl6ZSBhIEdvb2dsZSBtYXAgc2hhcGUgaW4gbWFwIHdpdGggZ2l2ZW4gb3B0aW9ucyBhbmQgcmVnaXN0ZXIgZXZlbnRzICBcbiAqICAgVGhlIHNoYXBlcyBhcmU6XG4gKiAgICAgLiBjaXJjbGVcbiAqICAgICAuIHBvbHlnb25cbiAqICAgICAuIHBvbHlsaW5lXG4gKiAgICAgLiByZWN0YW5nbGVcbiAqICAgICAuIGdyb3VuZE92ZXJsYXkob3IgaW1hZ2UpXG4gKiAgIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqXG4gKiAgIFJlc3RyaWN0IFRvOiAgRWxlbWVudFxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gY2VudGVyZWQgaWYgc2V0LCBtYXAgd2lsbCBiZSBjZW50ZXJlZCB3aXRoIHRoaXMgbWFya2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gJmx0O09QVElPTlM+XG4gKiAgIEZvciBjaXJjbGUsIFthbnkgY2lyY2xlIG9wdGlvbnNdKGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi9qYXZhc2NyaXB0L3JlZmVyZW5jZSNDaXJjbGVPcHRpb25zKSAgXG4gKiAgIEZvciBwb2x5Z29uLCBbYW55IHBvbHlnb24gb3B0aW9uc10oaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcmVmZXJlbmNlI1BvbHlnb25PcHRpb25zKSAgXG4gKiAgIEZvciBwb2x5bGluZSwgW2FueSBwb2x5bGluZSBvcHRpb25zXShodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC9yZWZlcmVuY2UjUG9seWxpbmVPcHRpb25zKSAgIFxuICogICBGb3IgcmVjdGFuZ2xlLCBbYW55IHJlY3RhbmdsZSBvcHRpb25zXShodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC9yZWZlcmVuY2UjUmVjdGFuZ2xlT3B0aW9ucykgICBcbiAqICAgRm9yIGltYWdlLCBbYW55IGdyb3VuZE92ZXJsYXkgb3B0aW9uc10oaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcmVmZXJlbmNlI0dyb3VuZE92ZXJsYXlPcHRpb25zKSAgIFxuICogQHBhcmFtIHtTdHJpbmd9ICZsdDtNYXBFdmVudD4gQW55IFNoYXBlIGV2ZW50cywgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcmVmZXJlbmNlXG4gKiBAZXhhbXBsZVxuICogVXNhZ2U6IFxuICogICA8bWFwIE1BUF9BVFRSSUJVVEVTPlxuICogICAgPHNoYXBlIG5hbWU9U0hBUEVfTkFNRSBBTllfU0hBUEVfT1BUSU9OUyBBTllfU0hBUEVfRVZFTlRTXCI+PC9NQVJLRVI+XG4gKiAgIDwvbWFwPlxuICpcbiAqIEV4YW1wbGU6IFxuICpcbiAqICAgPG1hcCB6b29tPVwiMTFcIiBjZW50ZXI9XCJbNDAuNzQsIC03NC4xOF1cIj5cbiAqICAgICA8c2hhcGUgaWQ9XCJwb2x5bGluZVwiIG5hbWU9XCJwb2x5bGluZVwiIGdlb2Rlc2ljPVwidHJ1ZVwiIHN0cm9rZS1jb2xvcj1cIiNGRjAwMDBcIiBzdHJva2Utb3BhY2l0eT1cIjEuMFwiIHN0cm9rZS13ZWlnaHQ9XCIyXCJcbiAqICAgICAgcGF0aD1cIltbNDAuNzQsLTc0LjE4XSxbNDAuNjQsLTc0LjEwXSxbNDAuNTQsLTc0LjA1XSxbNDAuNDQsLTc0XV1cIiA+PC9zaGFwZT5cbiAqICAgIDwvbWFwPlxuICpcbiAqICAgPG1hcCB6b29tPVwiMTFcIiBjZW50ZXI9XCJbNDAuNzQsIC03NC4xOF1cIj5cbiAqICAgICA8c2hhcGUgaWQ9XCJwb2x5Z29uXCIgbmFtZT1cInBvbHlnb25cIiBzdHJva2UtY29sb3I9XCIjRkYwMDAwXCIgc3Ryb2tlLW9wYWNpdHk9XCIxLjBcIiBzdHJva2Utd2VpZ2h0PVwiMlwiXG4gKiAgICAgIHBhdGhzPVwiW1s0MC43NCwtNzQuMThdLFs0MC42NCwtNzQuMThdLFs0MC44NCwtNzQuMDhdLFs0MC43NCwtNzQuMThdXVwiID48L3NoYXBlPlxuICogICA8L21hcD5cbiAqICAgXG4gKiAgIDxtYXAgem9vbT1cIjExXCIgY2VudGVyPVwiWzQwLjc0LCAtNzQuMThdXCI+XG4gKiAgICAgPHNoYXBlIGlkPVwicmVjdGFuZ2xlXCIgbmFtZT1cInJlY3RhbmdsZVwiIHN0cm9rZS1jb2xvcj0nI0ZGMDAwMCcgc3Ryb2tlLW9wYWNpdHk9XCIwLjhcIiBzdHJva2Utd2VpZ2h0PVwiMlwiXG4gKiAgICAgIGJvdW5kcz1cIltbNDAuNzQsLTc0LjE4XSwgWzQwLjc4LC03NC4xNF1dXCIgZWRpdGFibGU9XCJ0cnVlXCIgPjwvc2hhcGU+XG4gKiAgIDwvbWFwPlxuICpcbiAqICAgPG1hcCB6b29tPVwiMTFcIiBjZW50ZXI9XCJbNDAuNzQsIC03NC4xOF1cIj5cbiAqICAgICA8c2hhcGUgaWQ9XCJjaXJjbGVcIiBuYW1lPVwiY2lyY2xlXCIgc3Ryb2tlLWNvbG9yPScjRkYwMDAwJyBzdHJva2Utb3BhY2l0eT1cIjAuOFwic3Ryb2tlLXdlaWdodD1cIjJcIiBcbiAqICAgICAgY2VudGVyPVwiWzQwLjcwLC03NC4xNF1cIiByYWRpdXM9XCI0MDAwXCIgZWRpdGFibGU9XCJ0cnVlXCIgPjwvc2hhcGU+XG4gKiAgIDwvbWFwPlxuICpcbiAqICAgPG1hcCB6b29tPVwiMTFcIiBjZW50ZXI9XCJbNDAuNzQsIC03NC4xOF1cIj5cbiAqICAgICA8c2hhcGUgaWQ9XCJpbWFnZVwiIG5hbWU9XCJpbWFnZVwiIHVybD1cImh0dHBzOi8vd3d3LmxpYi51dGV4YXMuZWR1L21hcHMvaGlzdG9yaWNhbC9uZXdhcmtfbmpfMTkyMi5qcGdcIlxuICogICAgICBib3VuZHM9XCJbWzQwLjcxLC03NC4yMl0sWzQwLjc3LC03NC4xMl1dXCIgb3BhY2l0eT1cIjAuN1wiIGNsaWNrYWJsZT1cInRydWVcIiA+PC9zaGFwZT5cbiAqICAgPC9tYXA+XG4gKlxuICogIEZvciBmdWxsLXdvcmtpbmcgZXhhbXBsZSwgcGxlYXNlIHZpc2l0IFxuICogICAgW3NoYXBlIGV4YW1wbGVdKGh0dHBzOi8vcmF3Z2l0LmNvbS9hbGxlbmh3a2ltL2FuZ3VsYXJqcy1nb29nbGUtbWFwcy9tYXN0ZXIvYnVpbGQvc2hhcGUuaHRtbClcbiAqL1xubmdNYXAuZGlyZWN0aXZlKCdzaGFwZScsIFsnQXR0cjJPcHRpb25zJywgZnVuY3Rpb24oQXR0cjJPcHRpb25zKSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG4gIFxuICB2YXIgZ2V0Qm91bmRzID0gZnVuY3Rpb24ocG9pbnRzKSB7XG4gICAgcmV0dXJuIG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMocG9pbnRzWzBdLCBwb2ludHNbMV0pO1xuICB9O1xuICBcbiAgdmFyIGdldFNoYXBlID0gZnVuY3Rpb24ob3B0aW9ucywgZXZlbnRzKSB7XG4gICAgdmFyIHNoYXBlO1xuXG4gICAgdmFyIHNoYXBlTmFtZSA9IG9wdGlvbnMubmFtZTtcbiAgICBkZWxldGUgb3B0aW9ucy5uYW1lOyAgLy9yZW1vdmUgbmFtZSBiY296IGl0J3Mgbm90IGZvciBvcHRpb25zXG4gICAgdm9pZCAwO1xuXG4gICAgLyoqXG4gICAgICogc2V0IG9wdGlvbnNcbiAgICAgKi9cbiAgICBpZiAob3B0aW9ucy5pY29ucykge1xuICAgICAgZm9yICh2YXIgaT0wOyBpPG9wdGlvbnMuaWNvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGVsID0gb3B0aW9ucy5pY29uc1tpXTtcbiAgICAgICAgaWYgKGVsLmljb24ucGF0aC5tYXRjaCgvXltBLVpfXSskLykpIHtcbiAgICAgICAgICBlbC5pY29uLnBhdGggPSAgZ29vZ2xlLm1hcHMuU3ltYm9sUGF0aFtlbC5pY29uLnBhdGhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXRjaChzaGFwZU5hbWUpIHtcbiAgICAgIGNhc2UgXCJjaXJjbGVcIjpcbiAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyIGluc3RhbmNlb2YgZ29vZ2xlLm1hcHMuTGF0TG5nKSB7XG4gICAgICAgICAgc2hhcGUgPSBuZXcgZ29vZ2xlLm1hcHMuQ2lyY2xlKG9wdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBvcmdDZW50ZXIgPSBvcHRpb25zLmNlbnRlcjtcbiAgICAgICAgICBvcHRpb25zLmNlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMCwwKTtcbiAgICAgICAgICBzaGFwZSA9IG5ldyBnb29nbGUubWFwcy5DaXJjbGUob3B0aW9ucyk7XG4gICAgICAgICAgcGFyc2VyLnNldERlbGF5ZWRHZW9Mb2NhdGlvbihzaGFwZSwgJ3NldENlbnRlcicsIG9yZ0NlbnRlcik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicG9seWdvblwiOlxuICAgICAgICBzaGFwZSA9IG5ldyBnb29nbGUubWFwcy5Qb2x5Z29uKG9wdGlvbnMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJwb2x5bGluZVwiOiBcbiAgICAgICAgc2hhcGUgPSBuZXcgZ29vZ2xlLm1hcHMuUG9seWxpbmUob3B0aW9ucyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInJlY3RhbmdsZVwiOiBcbiAgICAgICAgaWYgKG9wdGlvbnMuYm91bmRzKSB7XG4gICAgICAgICAgb3B0aW9ucy5ib3VuZHMgPSBnZXRCb3VuZHMob3B0aW9ucy5ib3VuZHMpO1xuICAgICAgICB9XG4gICAgICAgIHNoYXBlID0gbmV3IGdvb2dsZS5tYXBzLlJlY3RhbmdsZShvcHRpb25zKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZ3JvdW5kT3ZlcmxheVwiOlxuICAgICAgY2FzZSBcImltYWdlXCI6XG4gICAgICAgIHZhciB1cmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgdmFyIGJvdW5kcyA9IGdldEJvdW5kcyhvcHRpb25zLmJvdW5kcyk7XG4gICAgICAgIHZhciBvcHRzID0ge29wYWNpdHk6IG9wdGlvbnMub3BhY2l0eSwgY2xpY2thYmxlOiBvcHRpb25zLmNsaWNrYWJsZSwgaWQ6b3B0aW9ucy5pZH07XG4gICAgICAgIHNoYXBlID0gbmV3IGdvb2dsZS5tYXBzLkdyb3VuZE92ZXJsYXkodXJsLCBib3VuZHMsIG9wdHMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgZXZlbnRzXG4gICAgICovXG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50cykge1xuICAgICAgaWYgKGV2ZW50c1tldmVudE5hbWVdKSB7XG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHNoYXBlLCBldmVudE5hbWUsIGV2ZW50c1tldmVudE5hbWVdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNoYXBlO1xuICB9O1xuICBcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6ICdebWFwJyxcbiAgICAvKipcbiAgICAgKiBsaW5rIGZ1bmN0aW9uXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG1hcENvbnRyb2xsZXIpIHtcbiAgICAgIHZhciBvcmdBdHRycyA9IHBhcnNlci5vcmdBdHRyaWJ1dGVzKGVsZW1lbnQpO1xuICAgICAgdmFyIGZpbHRlcmVkID0gcGFyc2VyLmZpbHRlcihhdHRycyk7XG4gICAgICB2YXIgc2hhcGVPcHRpb25zID0gcGFyc2VyLmdldE9wdGlvbnMoZmlsdGVyZWQpO1xuICAgICAgdmFyIHNoYXBlRXZlbnRzID0gcGFyc2VyLmdldEV2ZW50cyhzY29wZSwgZmlsdGVyZWQpO1xuXG4gICAgICB2YXIgc2hhcGUgPSBnZXRTaGFwZShzaGFwZU9wdGlvbnMsIHNoYXBlRXZlbnRzKTtcbiAgICAgIG1hcENvbnRyb2xsZXIuYWRkU2hhcGUoc2hhcGUpO1xuXG4gICAgICAvKipcbiAgICAgICAqIHNldCBvYnNlcnZlcnNcbiAgICAgICAqL1xuICAgICAgcGFyc2VyLm9ic2VydmVBdHRyU2V0T2JqKG9yZ0F0dHJzLCBhdHRycywgc2hhcGUpOyBcbiAgICB9XG4gICB9OyAvLyByZXR1cm5cbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB0cmFmZmljLWxheWVyXG4gKiBAcmVxdWlyZXMgQXR0cjJPcHRpb25zIFxuICogQGRlc2NyaXB0aW9uIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50XG4gKlxuICogQGV4YW1wbGVcbiAqIEV4YW1wbGU6IFxuICpcbiAqICAgPG1hcCB6b29tPVwiMTNcIiBjZW50ZXI9XCIzNC4wNDkyNDU5NDE5MzE2NCwgLTExOC4yNDEwNDMwOTA4MjAzMVwiPlxuICogICAgIDx0cmFmZmljLWxheWVyPjwvdHJhZmZpYy1sYXllcj5cbiAqICAgIDwvbWFwPlxuICovXG4vKmpzaGludCAtVzA4OSovXG5uZ01hcC5kaXJlY3RpdmUoJ3RyYWZmaWNMYXllcicsIFsnQXR0cjJPcHRpb25zJywgZnVuY3Rpb24oQXR0cjJPcHRpb25zKSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG4gIFxuICB2YXIgZ2V0TGF5ZXIgPSBmdW5jdGlvbihvcHRpb25zLCBldmVudHMpIHtcbiAgICB2YXIgbGF5ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuVHJhZmZpY0xheWVyKG9wdGlvbnMpO1xuICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiBldmVudHMpIHtcbiAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKGxheWVyLCBldmVudE5hbWUsIGV2ZW50c1tldmVudE5hbWVdKTtcbiAgICB9XG4gICAgcmV0dXJuIGxheWVyO1xuICB9O1xuICBcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6ICdebWFwJyxcblxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbWFwQ29udHJvbGxlcikge1xuICAgICAgdmFyIG9yZ0F0dHJzID0gcGFyc2VyLm9yZ0F0dHJpYnV0ZXMoZWxlbWVudCk7XG4gICAgICB2YXIgZmlsdGVyZWQgPSBwYXJzZXIuZmlsdGVyKGF0dHJzKTtcbiAgICAgIHZhciBvcHRpb25zID0gcGFyc2VyLmdldE9wdGlvbnMoZmlsdGVyZWQpO1xuICAgICAgdmFyIGV2ZW50cyA9IHBhcnNlci5nZXRFdmVudHMoc2NvcGUsIGZpbHRlcmVkKTtcbiAgICAgIHZvaWQgMDtcblxuICAgICAgdmFyIGxheWVyID0gZ2V0TGF5ZXIob3B0aW9ucywgZXZlbnRzKTtcbiAgICAgIG1hcENvbnRyb2xsZXIuYWRkT2JqZWN0KCd0cmFmZmljTGF5ZXJzJywgbGF5ZXIpO1xuICAgICAgcGFyc2VyLm9ic2VydmVBdHRyU2V0T2JqKG9yZ0F0dHJzLCBhdHRycywgbGF5ZXIpOyAgLy9vYnNlcnZlcnNcbiAgICB9XG4gICB9OyAvLyByZXR1cm5cbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB0cmFuc2l0LWxheWVyXG4gKiBAcmVxdWlyZXMgQXR0cjJPcHRpb25zIFxuICogQGRlc2NyaXB0aW9uIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50XG4gKlxuICogQGV4YW1wbGVcbiAqIEV4YW1wbGU6IFxuICpcbiAqICAgPG1hcCB6b29tPVwiMTNcIiBjZW50ZXI9XCIzNC4wNDkyNDU5NDE5MzE2NCwgLTExOC4yNDEwNDMwOTA4MjAzMVwiPlxuICogICAgIDx0cmFuc2l0LWxheWVyPjwvdHJhbnNpdC1sYXllcj5cbiAqICAgIDwvbWFwPlxuICovXG4vKmpzaGludCAtVzA4OSovXG5uZ01hcC5kaXJlY3RpdmUoJ3RyYW5zaXRMYXllcicsIFsnQXR0cjJPcHRpb25zJywgZnVuY3Rpb24oQXR0cjJPcHRpb25zKSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG4gIFxuICB2YXIgZ2V0TGF5ZXIgPSBmdW5jdGlvbihvcHRpb25zLCBldmVudHMpIHtcbiAgICB2YXIgbGF5ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuVHJhbnNpdExheWVyKG9wdGlvbnMpO1xuICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiBldmVudHMpIHtcbiAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKGxheWVyLCBldmVudE5hbWUsIGV2ZW50c1tldmVudE5hbWVdKTtcbiAgICB9XG4gICAgcmV0dXJuIGxheWVyO1xuICB9O1xuICBcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6ICdebWFwJyxcblxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbWFwQ29udHJvbGxlcikge1xuICAgICAgdmFyIG9yZ0F0dHJzID0gcGFyc2VyLm9yZ0F0dHJpYnV0ZXMoZWxlbWVudCk7XG4gICAgICB2YXIgZmlsdGVyZWQgPSBwYXJzZXIuZmlsdGVyKGF0dHJzKTtcbiAgICAgIHZhciBvcHRpb25zID0gcGFyc2VyLmdldE9wdGlvbnMoZmlsdGVyZWQpO1xuICAgICAgdmFyIGV2ZW50cyA9IHBhcnNlci5nZXRFdmVudHMoc2NvcGUsIGZpbHRlcmVkKTtcbiAgICAgIHZvaWQgMDtcblxuICAgICAgdmFyIGxheWVyID0gZ2V0TGF5ZXIob3B0aW9ucywgZXZlbnRzKTtcbiAgICAgIG1hcENvbnRyb2xsZXIuYWRkT2JqZWN0KCd0cmFuc2l0TGF5ZXJzJywgbGF5ZXIpO1xuICAgICAgcGFyc2VyLm9ic2VydmVBdHRyU2V0T2JqKG9yZ0F0dHJzLCBhdHRycywgbGF5ZXIpOyAgLy9vYnNlcnZlcnNcbiAgICB9XG4gICB9OyAvLyByZXR1cm5cbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB3ZWF0aGVyLWxheWVyXG4gKiBAcmVxdWlyZXMgQXR0cjJPcHRpb25zIFxuICogQGRlc2NyaXB0aW9uIFxuICogICBSZXF1aXJlczogIG1hcCBkaXJlY3RpdmVcbiAqICAgUmVzdHJpY3QgVG86ICBFbGVtZW50XG4gKlxuICogQGV4YW1wbGVcbiAqIEV4YW1wbGU6IFxuICpcbiAqICAgPG1hcCB6b29tPVwiMTNcIiBjZW50ZXI9XCIzNC4wNDkyNDU5NDE5MzE2NCwgLTExOC4yNDEwNDMwOTA4MjAzMVwiPlxuICogICAgIDx3ZWF0aGVyLWxheWVyPjwvd2VhdGhlci1sYXllcj5cbiAqICAgIDwvbWFwPlxuICovXG4vKmpzaGludCAtVzA4OSovXG5uZ01hcC5kaXJlY3RpdmUoJ3dlYXRoZXJMYXllcicsIFsnQXR0cjJPcHRpb25zJywgZnVuY3Rpb24oQXR0cjJPcHRpb25zKSB7XG4gIHZhciBwYXJzZXIgPSBBdHRyMk9wdGlvbnM7XG4gIFxuICB2YXIgZ2V0TGF5ZXIgPSBmdW5jdGlvbihvcHRpb25zLCBldmVudHMpIHtcbiAgICB2YXIgbGF5ZXIgPSBuZXcgZ29vZ2xlLm1hcHMud2VhdGhlci5XZWF0aGVyTGF5ZXIob3B0aW9ucyk7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50cykge1xuICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobGF5ZXIsIGV2ZW50TmFtZSwgZXZlbnRzW2V2ZW50TmFtZV0pO1xuICAgIH1cbiAgICByZXR1cm4gbGF5ZXI7XG4gIH07XG4gIFxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogJ15tYXAnLFxuXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtYXBDb250cm9sbGVyKSB7XG4gICAgICB2YXIgb3JnQXR0cnMgPSBwYXJzZXIub3JnQXR0cmlidXRlcyhlbGVtZW50KTtcbiAgICAgIHZhciBmaWx0ZXJlZCA9IHBhcnNlci5maWx0ZXIoYXR0cnMpO1xuICAgICAgdmFyIG9wdGlvbnMgPSBwYXJzZXIuZ2V0T3B0aW9ucyhmaWx0ZXJlZCk7XG4gICAgICB2YXIgZXZlbnRzID0gcGFyc2VyLmdldEV2ZW50cyhzY29wZSwgZmlsdGVyZWQpO1xuXG4gICAgICB2b2lkIDA7XG5cbiAgICAgIHZhciBsYXllciA9IGdldExheWVyKG9wdGlvbnMsIGV2ZW50cyk7XG4gICAgICBtYXBDb250cm9sbGVyLmFkZE9iamVjdCgnd2VhdGhlckxheWVycycsIGxheWVyKTtcbiAgICAgIHBhcnNlci5vYnNlcnZlQXR0clNldE9iaihvcmdBdHRycywgYXR0cnMsIGxheWVyKTsgIC8vb2JzZXJ2ZXJzXG4gICAgfVxuICAgfTsgLy8gcmV0dXJuXG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgZm9yIGFkZGluZyBnb29nbGUgcGxhY2VzIGF1dG9jb21wbGV0ZSB0byBhIHRleHQgYm94XG4gKiBnb29nbGUgcGxhY2VzIGF1dG9jb21wbGV0ZSBpbmZvOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC9wbGFjZXNcbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiA8aW5wdXQgdHlwZT1cInRleHRcIiAgbmctYXV0b2NvbXBsZXRlIG5nLW1vZGVsPVwiYXV0b2NvbXBsZXRlXCIgb3B0aW9ucz1cIm9wdGlvbnNcIiBkZXRhaWxzPVwiZGV0YWlscy8+XG4gKlxuICogKyBuZy1tb2RlbCAtIGF1dG9jb21wbGV0ZSB0ZXh0Ym94IHZhbHVlXG4gKlxuICogKyBkZXRhaWxzIC0gbW9yZSBkZXRhaWxlZCBhdXRvY29tcGxldGUgcmVzdWx0LCBpbmNsdWRlcyBhZGRyZXNzIHBhcnRzLCBsYXRsbmcsIGV0Yy4gKE9wdGlvbmFsKVxuICpcbiAqICsgb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBhdXRvY29tcGxldGUgKE9wdGlvbmFsKVxuICpcbiAqICAgICAgICsgdHlwZXM6IHR5cGUsICAgICAgICBTdHJpbmcsIHZhbHVlcyBjYW4gYmUgJ2dlb2NvZGUnLCAnZXN0YWJsaXNobWVudCcsICcocmVnaW9ucyknLCBvciAnKGNpdGllcyknXG4gKiAgICAgICArIGJvdW5kczogYm91bmRzLCAgICAgR29vZ2xlIG1hcHMgTGF0TG5nQm91bmRzIE9iamVjdCwgYmlhc2VzIHJlc3VsdHMgdG8gYm91bmRzLCBidXQgbWF5IHJldHVybiByZXN1bHRzIG91dHNpZGUgdGhlc2UgYm91bmRzXG4gKiAgICAgICArIGNvdW50cnk6IGNvdW50cnkgICAgU3RyaW5nLCBJU08gMzE2Ni0xIEFscGhhLTIgY29tcGF0aWJsZSBjb3VudHJ5IGNvZGUuIGV4YW1wbGVzOyAnY2EnLCAndXMnLCAnZ2InXG4gKiAgICAgICArIHdhdGNoRW50ZXI6ICAgICAgICAgQm9vbGVhbiwgdHJ1ZTsgb24gRW50ZXIgc2VsZWN0IHRvcCBhdXRvY29tcGxldGUgcmVzdWx0LiBmYWxzZShkZWZhdWx0KTsgZW50ZXIgZW5kcyBhdXRvY29tcGxldGVcbiAqXG4gKiBleGFtcGxlOlxuICpcbiAqICAgIG9wdGlvbnMgPSB7XG4gKiAgICAgICAgdHlwZXM6ICcoY2l0aWVzKScsXG4gKiAgICAgICAgY291bnRyeTogJ2NhJ1xuICogICAgfVxuKiovXG5cbmFuZ3VsYXIubW9kdWxlKCBcIm5nQXV0b2NvbXBsZXRlXCIsIFtdKVxuICAuZGlyZWN0aXZlKCduZ0F1dG9jb21wbGV0ZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICBzY29wZToge1xuICAgICAgICBuZ01vZGVsOiAnPScsXG4gICAgICAgIG9wdGlvbnM6ICc9PycsXG4gICAgICAgIGRldGFpbHM6ICc9PydcbiAgICAgIH0sXG5cbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcikge1xuXG4gICAgICAgIC8vb3B0aW9ucyBmb3IgYXV0b2NvbXBsZXRlXG4gICAgICAgIHZhciBvcHRzXG4gICAgICAgIHZhciB3YXRjaEVudGVyID0gZmFsc2VcbiAgICAgICAgLy9jb252ZXJ0IG9wdGlvbnMgcHJvdmlkZWQgdG8gb3B0c1xuICAgICAgICB2YXIgaW5pdE9wdHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgIG9wdHMgPSB7fVxuICAgICAgICAgIGlmIChzY29wZS5vcHRpb25zKSB7XG5cbiAgICAgICAgICAgIGlmIChzY29wZS5vcHRpb25zLndhdGNoRW50ZXIgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgd2F0Y2hFbnRlciA9IGZhbHNlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB3YXRjaEVudGVyID0gdHJ1ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2NvcGUub3B0aW9ucy50eXBlcykge1xuICAgICAgICAgICAgICBvcHRzLnR5cGVzID0gW11cbiAgICAgICAgICAgICAgb3B0cy50eXBlcy5wdXNoKHNjb3BlLm9wdGlvbnMudHlwZXMpXG4gICAgICAgICAgICAgIHNjb3BlLmdQbGFjZS5zZXRUeXBlcyhvcHRzLnR5cGVzKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2NvcGUuZ1BsYWNlLnNldFR5cGVzKFtdKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2NvcGUub3B0aW9ucy5ib3VuZHMpIHtcbiAgICAgICAgICAgICAgb3B0cy5ib3VuZHMgPSBzY29wZS5vcHRpb25zLmJvdW5kc1xuICAgICAgICAgICAgICBzY29wZS5nUGxhY2Uuc2V0Qm91bmRzKG9wdHMuYm91bmRzKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2NvcGUuZ1BsYWNlLnNldEJvdW5kcyhudWxsKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2NvcGUub3B0aW9ucy5jb3VudHJ5KSB7XG4gICAgICAgICAgICAgIG9wdHMuY29tcG9uZW50UmVzdHJpY3Rpb25zID0ge1xuICAgICAgICAgICAgICAgIGNvdW50cnk6IHNjb3BlLm9wdGlvbnMuY291bnRyeVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNjb3BlLmdQbGFjZS5zZXRDb21wb25lbnRSZXN0cmljdGlvbnMob3B0cy5jb21wb25lbnRSZXN0cmljdGlvbnMpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzY29wZS5nUGxhY2Uuc2V0Q29tcG9uZW50UmVzdHJpY3Rpb25zKG51bGwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNjb3BlLmdQbGFjZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzY29wZS5nUGxhY2UgPSBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLkF1dG9jb21wbGV0ZShlbGVtZW50WzBdLCB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIoc2NvcGUuZ1BsYWNlLCAncGxhY2VfY2hhbmdlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBzY29wZS5nUGxhY2UuZ2V0UGxhY2UoKTtcbiAgICAgICAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuYWRkcmVzc19jb21wb25lbnRzICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBzY29wZS5kZXRhaWxzID0gcmVzdWx0O1xuXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKGVsZW1lbnQudmFsKCkpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBpZiAod2F0Y2hFbnRlcikge1xuICAgICAgICAgICAgICAgIGdldFBsYWNlKHJlc3VsdClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAvL2Z1bmN0aW9uIHRvIGdldCByZXRyaWV2ZSB0aGUgYXV0b2NvbXBsZXRlcyBmaXJzdCByZXN1bHQgdXNpbmcgdGhlIEF1dG9jb21wbGV0ZVNlcnZpY2UgXG4gICAgICAgIHZhciBnZXRQbGFjZSA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHZhciBhdXRvY29tcGxldGVTZXJ2aWNlID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5BdXRvY29tcGxldGVTZXJ2aWNlKCk7XG4gICAgICAgICAgaWYgKHJlc3VsdC5uYW1lLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgYXV0b2NvbXBsZXRlU2VydmljZS5nZXRQbGFjZVByZWRpY3Rpb25zKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHJlc3VsdC5uYW1lLFxuICAgICAgICAgICAgICAgIG9mZnNldDogcmVzdWx0Lm5hbWUubGVuZ3RoXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGxpc3RlbnRvcmVzdWx0KGxpc3QsIHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGlmKGxpc3QgPT0gbnVsbCB8fCBsaXN0Lmxlbmd0aCA9PSAwKSB7XG5cbiAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuZGV0YWlscyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB2YXIgcGxhY2VzU2VydmljZSA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuUGxhY2VzU2VydmljZShlbGVtZW50WzBdKTtcbiAgICAgICAgICAgICAgICAgIHBsYWNlc1NlcnZpY2UuZ2V0RGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgeydyZWZlcmVuY2UnOiBsaXN0WzBdLnJlZmVyZW5jZX0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRldGFpbHNyZXN1bHQoZGV0YWlsc1Jlc3VsdCwgcGxhY2VzU2VydmljZVN0YXR1cykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYWNlc1NlcnZpY2VTdGF0dXMgPT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoZGV0YWlsc1Jlc3VsdC5mb3JtYXR0ZWRfYWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsKGRldGFpbHNSZXN1bHQuZm9ybWF0dGVkX2FkZHJlc3MpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmRldGFpbHMgPSBkZXRhaWxzUmVzdWx0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vb24gZm9jdXNvdXQgdGhlIHZhbHVlIHJldmVydHMsIG5lZWQgdG8gc2V0IGl0IGFnYWluLlxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2F0Y2hGb2N1c091dCA9IGVsZW1lbnQub24oJ2ZvY3Vzb3V0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnZhbChkZXRhaWxzUmVzdWx0LmZvcm1hdHRlZF9hZGRyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnVuYmluZCgnZm9jdXNvdXQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250cm9sbGVyLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGxvY2F0aW9uID0gY29udHJvbGxlci4kdmlld1ZhbHVlO1xuICAgICAgICAgIGVsZW1lbnQudmFsKGxvY2F0aW9uKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvL3dhdGNoIG9wdGlvbnMgcHJvdmlkZWQgdG8gZGlyZWN0aXZlXG4gICAgICAgIHNjb3BlLndhdGNoT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2NvcGUub3B0aW9uc1xuICAgICAgICB9O1xuICAgICAgICBzY29wZS4kd2F0Y2goc2NvcGUud2F0Y2hPcHRpb25zLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaW5pdE9wdHMoKVxuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgfVxuICAgIH07XG4gIH0pOyIsIid1c2Ugc3RyaWN0JztcblxuLy8gRGVjbGFyZSBhcHAgbGV2ZWwgbW9kdWxlIHdoaWNoIGRlcGVuZHMgb24gdmlld3MsIGFuZCBjb21wb25lbnRzXG5hbmd1bGFyLm1vZHVsZSgnYXBwLWNvbnRyb2xsZXJzJywgW1xuICAgICduZ01hdGVyaWFsJyxcbiAgICAnbmdNZXNzYWdlcycsXG4gICAgLy8gJ3VpLmJvb3RzdHJhcCcsXG4gICAgJ21kRGF0ZVRpbWUnLFxuICAgICduZ0F1dG9jb21wbGV0ZScsXG4gICAgJ25nTWFwJ1xuXSkuXG5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJywgWyckbG9nJywgJyRtZFNpZGVuYXYnLCAnJG1kQm90dG9tU2hlZXQnLCAnJGxvY2F0aW9uJywgJyRmaWx0ZXInLCAnJG1kRGlhbG9nJywgZnVuY3Rpb24oJGxvZywgJG1kU2lkZW5hdiwgJG1kQm90dG9tU2hlZXQsICRsb2NhdGlvbiwgJGZpbHRlciwgJG1kRGlhbG9nKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgdmFyIGRhdGVGb3JtYXQgPSBcIkVFRUUsIE1NTU0gZCwgeSBoOm1tOnNzIGFcIlxuXG4gICAgdGhpcy5vcGVuRGF0YVRpbWVQaWNrZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPG1kLWRpYWxvZyBhcmlhLWxhYmVsPVwiTWFuZ28gKEZydWl0KVwiPjx0aW1lLWRhdGUtcGlja2VyIGRhdGEtbmctbW9kZWw9XCJhcHAuZXZlbnQud2hlblwiIG9uLXNhdmU9XCJzYXZlKCR2YWx1ZSlcIiBvbi1jYW5jZWw9XCJjYW5jZWwoJHZhbHVlKVwiIGRhdGEtZGlzcGxheS1tb2RlPVwiZnVsbFwiPjwvdGltZS1kYXRlLXBpY2tlcj48L21kLWRpYWxvZz4nLFxuICAgICAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGFuc3dlcikge1xuICAgICAgICAgICAgaWYgKGFuc3dlcikge1xuICAgICAgICAgICAgICAgIHRoYXQuZXZlbnQud2hlbiA9IG5ldyBEYXRlKGFuc3dlcikuZ2V0VGltZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRsb2cuaW5mbyhcIllvdSBjYW5jZWxsZWQgdGhlIGRpYWxvZy5cIik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZUV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRsb2cuaW5mbyhcIkV2ZW50IGNyZWF0ZWQhXCIsIGFuZ3VsYXIudG9Kc29uKHRoYXQuZXZlbnQsIHRydWUpKTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZXNldEV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZXZlbnQgPSB7fTtcbiAgICAgICAgdGhpcy5ldmVudC5saW1pdFRvID0gMTg7XG4gICAgICAgIC8vICRmaWx0ZXIoXCJkYXRlXCIpKERhdGUubm93KCksIGRhdGVGb3JtYXQpO1xuICAgICAgICB0aGlzLmV2ZW50LndoZW4gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZXNldEV2ZW50KCk7XG5cbn1dKS5cbmNvbnRyb2xsZXIoJ0V2ZW50Q29udHJvbGxlcicsIFsnJGxvZycsICckbWRTaWRlbmF2JywgJyRtZEJvdHRvbVNoZWV0JywgJyRsb2NhdGlvbicsICckbWREaWFsb2cnLCBmdW5jdGlvbigkbG9nLCAkbWRTaWRlbmF2LCAkbWRCb3R0b21TaGVldCwgJGxvY2F0aW9uLCAkbWREaWFsb2cpIHtcblxufV0pLlxuY29udHJvbGxlcignRXZlbnRMaXN0Q29udHJvbGxlcicsIFsnJGxvZycsICckbWRTaWRlbmF2JywgJyRtZEJvdHRvbVNoZWV0JywgJyRsb2NhdGlvbicsICckbWREaWFsb2cnLCBmdW5jdGlvbigkbG9nLCAkbWRTaWRlbmF2LCAkbWRCb3R0b21TaGVldCwgJGxvY2F0aW9uLCAkbWREaWFsb2cpIHtcbiAgICB0aGlzLmV2ZW50cyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMTA7IGkrKykge1xuICAgICAgICB0aGlzLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIFwid2hhdFwiOiBcImV2ZW50IC0gXCIgKyBpLFxuICAgICAgICAgICAgXCJ3aGVyZVwiOiBcInNvbWV3aGVyZVwiICsgaSxcbiAgICAgICAgICAgIFwid2hlblwiOiAxMjg4MzIzNjIzMDA2LFxuICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoaXMgcGFyYWdyYXBoIGNvbnRhaW5zIGEgdmVyeSBsb25nIHdvcmQ6IHRoaXNpc2F2ZXJ5dmVyeXZlcnl2ZXJ5dmVyeXZlcnlsb25nd29yZC4gVGhlIGxvbmcgd29yZCB3aWxsIGJyZWFrIGFuZCB3cmFwIHRvIHRoZSBuZXh0IGxpbmUuXCIgKyBpLFxuICAgICAgICAgICAgXCJsaW1pdFRvXCI6IDE4LFxuICAgICAgICAgICAgXCJhdHRlbmRlZXNcIjogW3tcIm5hbWVcIjogXCJ0aXppb1wifSwge1wibmFtZVwiOiBcImNhaW9cIn0sIHtcIm5hbWVcIjogXCJzZW1wcm9uaW9cIn1dXG4gICAgICAgIH0pO1xuICAgIH1cblxufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9